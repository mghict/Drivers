"use strict";(self.webpackChunkcodal_analysis=self.webpackChunkcodal_analysis||[]).push([[837],{3837:(B,C,s)=>{s.r(C),s.d(C,{MineModule:()=>p});var u=s(6895),v=s(3959),l=s(1716),t=s(1571),f=s(7109),_=s(4376),x=s(2508),M=s(7140),b=s(2608),y=s(535);const T=function(){return["add"]},Z=function(){return{mode:"add"}};function J(n,i){1&n&&(t.TgZ(0,"button",11),t._UZ(1,"i",12),t._uU(2," \u0627\u0641\u0632\u0648\u062f\u0646 "),t.qZA()),2&n&&t.Q6J("routerLink",t.DdM(2,T))("state",t.DdM(3,Z))}const A=function(n){return[n]},k=function(n){return{any:n}};function S(n,i){if(1&n&&t.YNc(0,J,3,4,"button",10),2&n){const e=t.oxw();t.Q6J("mtsClaim",t.VKq(3,k,t.VKq(1,A,e.permision.MineCreate)))}}const w=function(n){return["detail",n]},F=function(){return{mode:"show"}},Q=function(n){return["edit",n]},E=function(){return{mode:"edit"}},N=function(){return{}};function I(n,i){if(1&n){const e=t.EpF();t._UZ(0,"a",13)(1,"a",14),t.TgZ(2,"a",15),t.NdJ("confirm",function(){const d=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.delete(d))}),t._UZ(3,"i",16),t.qZA()}if(2&n){const e=i.$implicit;t.Q6J("routerLink",t.VKq(5,w,e.id))("state",t.DdM(7,F)),t.xp6(1),t.Q6J("routerLink",t.VKq(8,Q,e.id))("state",t.DdM(10,E)),t.xp6(1),t.Q6J("appConfirmation",t.DdM(11,N))}}class h extends l.gq{constructor(i,e){super(i),this.service=e}search(){this.dataSource=new v.in(i=>this.service.get(i,this.cleanData(this.searchModel)))}ngOnInit(){this.search()}delete(i){i.id&&this.service.delete(i.id).subscribe(this.sucessDeleteObserver)}static#t=this.\u0275fac=function(e){return new(e||h)(t.Y36(l.u),t.Y36(l.CO))};static#e=this.\u0275cmp=t.Xpm({type:h,selectors:[["moneyon-list"]],features:[t.qOj],decls:11,vars:2,consts:[[1,"row","mt-3"],[1,"card","p-3"],[3,"dataSource"],["mts-action-data-table",""],["name","name","title","\u0646\u0627\u0645","type","text"],["name","provinceName","title","\u0627\u0633\u062a\u0627\u0646","type","text"],["name","cityName","title","\u0634\u0647\u0631","type","text"],["name","address","title","\u0622\u062f\u0631\u0633","type","text"],["name","mineCode","title","\u0634\u0646\u0627\u0633\u0647 \u0645\u0639\u062f\u0646","type","text"],["cellClass","text-end",3,"shrink"],["class","btn btn-primary",3,"routerLink","state",4,"mtsClaim"],[1,"btn","btn-primary",3,"routerLink","state"],[1,"fa-solid","fa-plus"],["ngbTooltip","\u0645\u0634\u0627\u0647\u062f\u0647 ","role","button",1,"p-2","fa","fa-eye","text-primary",3,"routerLink","state"],["ngbTooltip","\u0648\u06cc\u0631\u0627\u06cc\u0634 ","role","button",1,"p-2","fa","fa-edit","text-warning",3,"routerLink","state"],["type","button",1,"btn",3,"appConfirmation","confirm"],[1,"fa-solid","fa-trash","text-danger"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mts-data-table",2),t.YNc(3,S,1,5,"ng-template",3),t._UZ(4,"mts-data-table-col",4)(5,"mts-data-table-col",5)(6,"mts-data-table-col",6)(7,"mts-data-table-col",7)(8,"mts-data-table-col",8),t.TgZ(9,"mts-data-table-col",9),t.YNc(10,I,4,12,"ng-template"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(7),t.Q6J("shrink",!1))},dependencies:[f.rH,_.Q,x.U,M.v,b.Z,y.k]})}var O=s(4128),Y=s(6355),c=s(4006),K=s(5795),L=s(8008),G=s(8557),U=s(4148);function H(n,i){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function D(n,i){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mts-form-field",8)(3,"input",9),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.name=o)}),t.qZA()()(),t.TgZ(4,"div",7)(5,"mts-form-field",10)(6,"select",11),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.location.provinceId=o)})("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.getAllCity())}),t.YNc(7,H,2,2,"option",12),t.ALo(8,"async"),t.qZA()()(),t.TgZ(9,"div",7)(10,"mts-form-field",13)(11,"select",14),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.location.cityId=o)}),t.YNc(12,D,2,2,"option",12),t.qZA()()(),t.TgZ(13,"div",7)(14,"mts-form-field",15)(15,"input",16),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.location.lat=o)}),t.qZA()()(),t.TgZ(16,"div",7)(17,"mts-form-field",17)(18,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.location.lng=o)}),t.qZA()()(),t.TgZ(19,"div",7)(20,"mts-form-field",19)(21,"input",20),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.mineCode=o)}),t.qZA()()(),t.TgZ(22,"div",2)(23,"mts-form-field",21)(24,"input",22),t.NdJ("ngModelChange",function(o){t.CHM(e);const d=t.oxw();return t.KtG(d.model.address=o)}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.model.name)("disabled",e.isShowMode),t.xp6(3),t.Q6J("ngModel",e.model.location.provinceId)("disabled",e.isShowMode),t.xp6(1),t.Q6J("ngForOf",t.lcZ(8,16,e.getAllProvince$)),t.xp6(4),t.Q6J("ngModel",e.model.location.cityId)("disabled",e.isShowMode),t.xp6(1),t.Q6J("ngForOf",e.cities),t.xp6(3),t.Q6J("ngModel",e.model.location.lat)("disabled",e.isShowMode),t.xp6(3),t.Q6J("ngModel",e.model.location.lng)("disabled",e.isShowMode),t.xp6(3),t.Q6J("ngModel",e.model.mineCode)("disabled",e.isShowMode),t.xp6(3),t.Q6J("ngModel",e.model.address)("disabled",e.isShowMode)}}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"input",25),t.NdJ("change",function(o){const m=t.CHM(e).index,j=t.oxw();return t.KtG(j.materialChange(m,o))}),t.qZA(),t.TgZ(2,"label",26),t._uU(3),t.qZA()()}if(2&n){const e=i.$implicit,a=t.oxw();t.MGl("id","flexCheckChecked",e.id,""),t.xp6(1),t.MGl("id","flexCheckChecked",e.id,""),t.Q6J("checked",e.isChecked)("disabled",a.isShowMode),t.xp6(1),t.MGl("for","flexCheckChecked",e.id,""),t.xp6(1),t.hij(" ",e.name," ")}}class r extends l.vx{constructor(i,e,a,o,d,m){super(i),this.activatedRoute=e,this.cityService=a,this.provinceService=o,this.service=d,this.materialService=m,this.model=new l.Wc,this.cities=[],this.materials=[],this.getAllProvince$=this.provinceService.read(void 0,"provinces"),this.entityId=e.snapshot.paramMap.get("id")}ngOnInit(){this.findMode(),this.entityId?this.anotherSubscription=(0,O.D)([this.getAllMaterial(),this.getMine()]).subscribe(i=>{i[0]&&(this.materials=i[0]),i[1]&&(this.model=i[1],this.getAllCity()),this.checkedMaterials()}):this.getAllMaterial().subscribe(i=>{this.materials=i})}getMine(){return this.service.getById(+this.entityId)}getAllCity(){this.anotherSubscription=this.cityService.read(void 0,`${this.model.location.provinceId}/cities`).subscribe(i=>{this.cities=i})}getAllMaterial(){return this.materialService.read(void 0,"materials")}checkedMaterials(){return this.entityId&&this.model.materialIds?.forEach(i=>{if(i){const e=this.materials.findIndex(a=>a.id==i);this.materials[e].isChecked=!0}}),!1}materialChange(i,e){this.materials[i].isChecked=e.target.checked}next(){this.model.materialIds=this.materialService.getCheckedItems(this.materials),this.model.mineCode&&(this.model.mineCode=+this.model?.mineCode),this.isAddMode?this.anotherSubscription=this.service.post(this.model).subscribe(this.sucessObserver):this.isEditMode&&(this.anotherSubscription=this.service.put(this.model).subscribe(this.sucessObserver))}back(){this.router.navigate(this.entityId?["../.."]:[".."],{relativeTo:this.activatedRoute})}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(l.u),t.Y36(f.gz),t.Y36(l.Zp),t.Y36(l.fU),t.Y36(l.CO),t.Y36(Y.U))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["moneyon-edit"]],features:[t.qOj],decls:9,vars:5,consts:[["form","ngForm"],["class","row pb-4",4,"ngIf"],[1,"col-md-6"],["for","",1,"m-2"],["class","form-check",3,"id",4,"ngFor","ngForOf"],[3,"showNext","withBackArrow","nextDisabled","next","back"],[1,"row","pb-4"],[1,"col-md-4"],["label","\u0646\u0627\u0645  "],["type","text","name","name","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label"," \u0627\u0633\u062a\u0627\u0646 "],["name","provinceId",1,"form-select",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["label"," \u0634\u0647\u0631 "],["name","cityId",1,"form-select",3,"ngModel","disabled","ngModelChange"],["label"," lat "],["type","text","name","lat","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label"," lng"],["type","text","name","lng","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label"," \u0634\u0646\u0627\u0633\u0647 \u0645\u0639\u062f\u0646"],["type","text","mtsOnlyNumber","","name","mineCode","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label"," \u0622\u062f\u0631\u0633  "],["type","text","name","address",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"value"],[1,"form-check",3,"id"],["type","checkbox","value","",1,"form-check-input",3,"id","checked","disabled","change"],[1,"form-check-label",3,"for"]],template:function(e,a){if(1&e&&(t.TgZ(0,"form",null,0)(2,"mts-card"),t.YNc(3,q,25,18,"div",1),t.TgZ(4,"div",2)(5,"label",3),t._uU(6,"\u0645\u0648\u0627\u062f \u0645\u0639\u062f\u0646\u06cc"),t.qZA(),t.YNc(7,$,4,6,"div",4),t.qZA(),t.TgZ(8,"mts-next-back-btns",5),t.NdJ("next",function(){return a.next()})("back",function(){return a.back()}),t.qZA()()()),2&e){const o=t.MAs(1);t.xp6(3),t.Q6J("ngIf",a.model),t.xp6(4),t.Q6J("ngForOf",a.materials),t.xp6(1),t.Q6J("showNext",!a.isShowMode)("withBackArrow",!1)("nextDisabled",!!o.invalid)}},dependencies:[u.sg,u.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.On,c.F,K.A,L.h,G.J,U.p,u.Ov]})}var g=s(925);class p{static#t=this.\u0275fac=function(e){return new(e||p)};static#e=this.\u0275mod=t.oAB({type:p});static#i=this.\u0275inj=t.cJS({providers:[l.CO],imports:[u.ez,v.SK,f.Bz.forChild([{path:"",component:h,data:{title:"\u0644\u06cc\u0633\u062a \u0645\u0639\u062f\u0646"}},{path:"add",component:r,data:{title:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0645\u0639\u062f\u0646",claim:g.y.MineCreate}},{path:"detail/:id",component:r,data:{title:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0645\u0639\u062f\u0646",claim:g.y.MineView}},{path:"edit/:id",component:r,data:{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0645\u0639\u062f\u0646",claim:g.y.MineEdit}}])]})}}}]);