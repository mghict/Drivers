(self.webpackChunkcodal_analysis=self.webpackChunkcodal_analysis||[]).push([[179],{2017:(tn,nt,N)=>{"use strict";N.d(nt,{O:()=>O,S:()=>u});var o=N(3959);class O extends o.s1{constructor(Y,i,q,de,we){super(we),this.id=Y,this.token=i,this.displayName=q}}const u="atd"},925:(tn,nt,N)=>{"use strict";N.d(nt,{y:()=>o});var o=(()=>{return(O=o||(o={})).MineView="200",O.MineCreate="201",O.MineEdit="202",O.MineDelete="203",O.AutoBrandView="210",O.AutoBrandCreate="211",O.AutoBrandEdit="212",O.AutoBrandDelete="213",O.AutoModelView="220",O.AutoModelCreate="221",O.AutoModelEdit="222",O.AutoModelDelete="223",O.AutoView="230",O.AutoCreate="231",O.AutoEdit="232",O.AutoDelete="233",O.DriverView="240",O.DriverCreate="241",O.DriverEdit="242",O.DriverDelete="243",O.PersonView="250",O.PersonCreate="251",O.PersonEdit="252",O.PersonDelete="253",O.ProvinceView="260",O.ProvinceCreate="261",O.ProvinceEdit="262",O.ProvinceDelete="263",O.CityView="264",O.CityCreate="265",O.CityEdit="266",O.CityDelete="267",O.MaterialView="270",O.MaterialCreate="271",O.MaterialEdit="272",O.MaterialDelete="273",O.AutoHistoryReportView="300",O.ProvinceReportView="301",O.CityReportView="302",O.MineReportView="303",o;var O})()},107:(tn,nt,N)=>{"use strict";N.d(nt,{_:()=>fe});var o=N(3959),O=N(1571),u=N(7109);class fe{constructor(i,q){this.router=i,this.userStore=q}canActivate(i,q){return null==this.userStore.get()||this.router.createUrlTree(["user","dashboard"])}static#e=this.\u0275fac=function(q){return new(q||fe)(O.LFG(u.F0),O.LFG(o.cq))};static#t=this.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"})}},1716:(tn,nt,N)=>{"use strict";N.d(nt,{sK:()=>vv,IZ:()=>bb,OW:()=>Mm,n:()=>wm,cK:()=>xv,ug:()=>Sm,uD:()=>Ag,vx:()=>xm,gq:()=>x_,u:()=>we,UY:()=>k0,Zp:()=>Sg,Cf:()=>F0,Ip:()=>O,tB:()=>dy,Ft:()=>Mv.F,ld:()=>uy,CU:()=>_v,Wc:()=>w_,CO:()=>U0.C,DB:()=>R0,fU:()=>Dm,Nj:()=>wv.N,Il:()=>hy.I,jw:()=>u,hs:()=>Af,hb:()=>gv,fz:()=>Tm});var o=N(945),O=(()=>{return(_=O||(O={}))[_.DriverPicture=0]="DriverPicture",_[_.AutoPicture=1]="AutoPicture",O;var _})(),u=(()=>{return(_=u||(u={})).SUCCESSFUL_CREATING="\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_EDITING="\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_DELETING="\u062d\u0630\u0641 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_OPERATION="\u0639\u0645\u0644\u06cc\u0627\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",u;var _})(),fe=N(727),Y=N(3959),i=N(1571),q=N(7109),de=N(4006);class we{constructor(e,t,r){this._router=e,this._toastService=t,this._fb=r}get router(){return this._router}get toastService(){return this._toastService}get formBuilderService(){return this._fb}static#e=this.\u0275fac=function(t){return new(t||we)(i.LFG(q.F0),i.LFG(Y.kl),i.LFG(de.qu))};static#t=this.\u0275prov=i.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"})}var Ve=N(925),De=(()=>{return(_=De||(De={})).BASE_INFO_URL="base-info/resources/enums",_.USER_INFO_URL="user-info/resources/enums",_.PORTFOLIO_URL="portfolio-api/resources/enums",_.ACCOUNTING_URL="accounting-api/resources/enums",_.ASSET_INFO_URL="asset-info-api/resources/enums",_.ACTIVITY_URL="activity-log/resources/enums",De;var _})(),lt=(()=>{return(_=lt||(lt={})).withdraw="WITHDRAW",_.deposit="DEPOSIT",lt;var _})(),kt=(()=>{return(_=kt||(kt={})).SUCCESSFUL_CREATING="\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_EDITING="\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_DELETING="\u062d\u0630\u0641 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_OPERATION="\u0639\u0645\u0644\u06cc\u0627\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_CHANGE_STATUS="\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f",_.SUCCESSFUL_REJECT_REQUEST="\u0631\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_CANCEL_REQUEST="\u0644\u063a\u0648 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_ACCEPT_REQUEST="\u062a\u0627\u06cc\u06cc\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.SUCCESSFUL_RETURN_REQUEST="\u0628\u0627\u0632\u06af\u0631\u062f\u0627\u0646\u062f\u0646 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",_.ALREADY_SELECETED="\u0642\u0628\u0644\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0627\u0633\u062a",kt;var _})();class Vr{}class Hi{constructor(e){this.http=e}getEnums(e,t){return this.http.get(`${e}/${t}`)}getOrganizationTypes(){return this.http.get(`${De.BASE_INFO_URL}/organization-types`)}getPillarTypes(){return this.http.get(`${De.BASE_INFO_URL}/pillar-types`)}getPersonTypes(){return this.http.get(`${De.BASE_INFO_URL}/person-types`)}getCurrencyTypes(){return this.http.get(`${De.BASE_INFO_URL}/currency-types`)}getPaymentPeriodTypes(){return this.http.get(`${De.BASE_INFO_URL}/interest-payment-period-types`)}getDepositStatusTypes(){return this.http.get(`${De.BASE_INFO_URL}/deposit-status-types`)}getCompanyTypes(){return this.http.get(`${De.BASE_INFO_URL}/company-types`)}getChangeStatusTypes(){return this.http.get(`${De.BASE_INFO_URL}/change-status-types`)}getOwnerTypes(){return this.http.get(`${De.BASE_INFO_URL}/owner-types`)}getDataEntryMethodTypes(){return this.http.get(`${De.BASE_INFO_URL}/data-entry-method-types`)}getAccountStatusTypes(){return this.http.get(`${De.USER_INFO_URL}/account-status-types`)}getAccountTypes(){return this.http.get(`${De.USER_INFO_URL}/account-types`)}getContractTypes(){return this.http.get(`${De.PORTFOLIO_URL}/contract-status-types`)}getPamTypes(){return this.http.get(`${De.PORTFOLIO_URL}/pam-status-types`)}getAssetTypes(){return this.http.get(`${De.PORTFOLIO_URL}/asset-types`)}getRelationTypes(){return this.http.get(`${De.PORTFOLIO_URL}/relation-types`)}getEducationLevelTypes(){return this.http.get(`${De.PORTFOLIO_URL}/education-level-types`)}getTransactionStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/transaction-status-types`)}getStockTransactionStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/stock-transaction-reason-types`)}getCashTransactionReasonTypes(){return this.http.get(`${De.PORTFOLIO_URL}/cash-transaction-reason-types`)}getCashTransactionReasonTypesWithdraw(){return this.http.get(`${De.PORTFOLIO_URL}/cash-transaction-reason-types-withdraw`)}getCashTransactionReasonTypesDeposit(){return this.http.get(`${De.PORTFOLIO_URL}/cash-transaction-reason-types-deposit`)}getMarriageStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/marriage-status-types`)}getOccupationStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/occupation-status-types`)}getInvestmentTypes(){return this.http.get(`${De.PORTFOLIO_URL}/investment-types`)}getDescriptiveProfitLossTypes(){return this.http.get(`${De.PORTFOLIO_URL}/descriptive-profit-loss-types`)}getProfitLossTypes(){return this.http.get(`${De.PORTFOLIO_URL}/profit-loss-types`)}getPositionTypes(){return this.http.get(`${De.PORTFOLIO_URL}/position-types`)}getRequestTypes(){return this.http.get(`${De.PORTFOLIO_URL}/request-types`)}getRequestStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/request-status-types`)}getRequestStageTypes(){return this.http.get(`${De.PORTFOLIO_URL}/request-stage-types`)}getCustomerTypes(){return this.http.get(`${De.PORTFOLIO_URL}/customer-types`)}getIndividualsInvestmentPurposes(){return this.http.get(`${De.PORTFOLIO_URL}/individuals-investment-purpose-types`)}getCorporationInvestmentPurposes(){return this.http.get(`${De.PORTFOLIO_URL}/corporation-investment-purpose-types`)}getAdminRequestActionTypes(){return this.http.get(`${De.PORTFOLIO_URL}/admin-request-action-types`)}getCustomerRequestActionTypes(){return this.http.get(`${De.PORTFOLIO_URL}/customer-request-action-types`)}getFinancialOperationTypes(){return this.http.get(`${De.PORTFOLIO_URL}/financial-operation-types`)}getPamOperationTypes(){return this.http.get(`${De.PORTFOLIO_URL}/pam-transaction-types`)}getTransferMethodTypes(){return this.http.get(`${De.PORTFOLIO_URL}/transfer-method-types`)}getAdminContractActionTypes(){return this.http.get(`${De.PORTFOLIO_URL}/admin-contract-action-types`)}getCustomerContractActionTypes(){return this.http.get(`${De.PORTFOLIO_URL}/customer-contract-action-types`)}getCustomerStockTransactionReasonTypes(){return this.http.get(`${De.PORTFOLIO_URL}/customer-stock-transaction-reason-types`)}getRiskLevelTypes(){return this.http.get(`${De.PORTFOLIO_URL}/risk-level-types`)}getUsageTypes(){return this.http.get(`${De.PORTFOLIO_URL}/usage-types`)}getAllUsageTypes(){return this.http.get(`${De.PORTFOLIO_URL}/all-usage-types`)}getStockTransactionReasonTypes(){return this.http.get(`${De.PORTFOLIO_URL}/customer-stock-transaction-reason-types`)}getAssigneeStatusTypes(){return this.http.get(`${De.PORTFOLIO_URL}/assignee-status-types`)}getStockOperationTypes(){return this.http.get(`${De.PORTFOLIO_URL}/stock-operation-types`)}getTradeTypes(){return this.http.get(`${De.PORTFOLIO_URL}/trade-types`)}getRoleTypes(){return this.http.get(`${De.PORTFOLIO_URL}/role-types`)}getReturnTypes(){return this.http.get(`${De.PORTFOLIO_URL}/return-types`)}getPerformanceCalcBaseTypes(){return this.http.get(`${De.PORTFOLIO_URL}/performance-calc-base-types`)}getPerformanceFeeBaseTypes(){return this.http.get(`${De.PORTFOLIO_URL}/performance-fee-base-types`)}getTradeType(){return this.http.get(`${De.ACCOUNTING_URL}/trade-types`)}getWageTradeGroupType(){return this.http.get(`${De.ACCOUNTING_URL}/wage-trade-group-types`)}getReceiverType(){return this.http.get(`${De.ACCOUNTING_URL}/receiver-types`)}getLedgerCategoryTypes(){return this.http.get(`${De.ACCOUNTING_URL}/ledger-category-types`)}getNatureTypes(){return this.http.get(`${De.ACCOUNTING_URL}/nature-types`)}getLedgerStatusTypes(){return this.http.get(`${De.ACCOUNTING_URL}/ledger-status-types`)}getLedgerLevelTypes(){return this.http.get(`${De.ACCOUNTING_URL}/ledger-level-types`)}getLedgerCurrencyTypes(){return this.http.get(`${De.ACCOUNTING_URL}/currency-types`)}getBalanceControlPeriodTypes(){return this.http.get(`${De.ACCOUNTING_URL}/balance-control-period-types`)}getBalanceSheetTypes(){return this.http.get(`${De.ACCOUNTING_URL}/balance-sheet-types`)}getLedgerAccountSizeTypes(){return this.http.get(`${De.ACCOUNTING_URL}/ledger-account-size-types`)}getProductUsageTypes(){return this.http.get(`${De.ACCOUNTING_URL}/usage-types`)}getBusinessTypes(){return this.http.get(`${De.ACCOUNTING_URL}/business-types`)}getDateDiscoveryTypes(){return this.http.get(`${De.ACCOUNTING_URL}/date-discovery-types`)}getTemplateTypes(){return this.http.get(`${De.ACCOUNTING_URL}/template-types`)}getOperationTypes(){return this.http.get(`${De.ACCOUNTING_URL}/operation-types`)}getAssetUsageTypes(){return this.http.get(`${De.ASSET_INFO_URL}/usage-types`)}getMarketTypes(){return this.http.get(`${De.ASSET_INFO_URL}/markets`)}getAssetClassTypes(){return this.http.get(`${De.ASSET_INFO_URL}/asset-class-types`)}getBourseMarkets(){return this.http.get(`${De.ASSET_INFO_URL}/bourse-markets`)}getActivityLevelType(){return this.http.get(`${De.ACTIVITY_URL}/activity-level-types`)}getSchedulerType(){return this.http.get(`${De.ACTIVITY_URL}/scheduler-log-types`)}getSchedulerStatus(){return this.http.get(`${De.ACTIVITY_URL}/scheduler-log-status-types`)}static#e=this.\u0275fac=function(t){return new(t||Hi)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Hi,factory:Hi.\u0275fac,providedIn:"root"})}class Vi{constructor(e,t,r,h){this._router=e,this._toastService=t,this._enumService=r,this._fb=h}get router(){return this._router}get toastService(){return this._toastService}get enumService(){return this._enumService}get formBuilderService(){return this._fb}static#e=this.\u0275fac=function(t){return new(t||Vi)(i.LFG(q.F0),i.LFG(Y.kl),i.LFG(Hi),i.LFG(de.qu))};static#t=this.\u0275prov=i.Yz7({token:Vi,factory:Vi.\u0275fac,providedIn:"root"})}class Hr extends Y.s1{constructor(e,t,r,h,y,D,F,G,W,ge,ae,be,ce,pt,ke){super(ke),this.id=e,this.username=t,this.ssn=r,this.fullName=h,this.mobileNumber=y,this.lastLogin=D,this.sejami=F,this.email=G,this.towFactorAuth=W,this.documentDto=ge,this.userCustomers=ae,this.defaultUserCustomer=be,this.organizations=ce,this.defaultOrganization=pt}}const en="authenticate";var Ot=N(7579),Jt=N(529);class ln{constructor(e,t){this.http=e,this._http=t,this.baseUrl="user-info/api/identity",this.cssStyleSubject$=new Ot.x,this.cssStyleSubjectChanged$=this.cssStyleSubject$.asObservable(),this.bgImageSubject$=new Ot.x,this.bgImageSubjectChanged$=this.bgImageSubject$.asObservable()}getCaptcha(){return this.http.get(`${this.baseUrl}/captcha/new`)}signUp(e){return this.http.post(`${this.baseUrl}/sign-up`,e)}signUpOtp(e){return this.http.get(`${this.baseUrl}/sign-up/${e.otpKey}/${e.otpAnswer}`)}signUpResendOtp(e){return this.http.get(`${this.baseUrl}/sign-up/send-otp/${e}`)}signIn(e){return this.http.post("rest/auth",e)}forgetPass(e){return this.http.post(`${this.baseUrl}/oauth2/auth/forget-password`,e)}forgetChangePass(e){return this.http.post(`${this.baseUrl}/oauth2/auth/reset-password`,e)}changePass(e){return this.http.patch("user-info/resources/users/profiles/change-password",e)}changeTowFactorAuth(e,t){return this.http.patch(`user-info/resources/users/change-two-way-auth/${e}/${t}`,{})}logout(){return this.http.post("rest/auth/logout",{})}static#e=this.\u0275fac=function(t){return new(t||ln)(i.LFG(Y.OE),i.LFG(Jt.eN))};static#t=this.\u0275prov=i.Yz7({token:ln,factory:ln.\u0275fac,providedIn:"root"})}var fn=N(4004),qt=N(9646),On=N(4128);const Nn={name:"development",production:!1,version:"DEV",apiUrl:"/api/",signinPath:"access/signin"};var Ui=N(1481);class Yn{constructor(e,t,r){this.http=e,this.identityStore=t,this.sanitizer=r,this.baseUrl="user-info/resources/users",this.userCustomersUrl="user-info/resources/user-customers",this.searchAllUser=h=>this.http.get(`${this.baseUrl}/all`,{query:{some:h}})}getPermission(){return this.http.get(`${this.baseUrl}/profiles/menu`)}getProfile(){return this.http.get(`${this.baseUrl}/profiles`)}defaultUserCustomer(e){return this.http.patch(`defaults/customer/${e}`,{})}defaultOrganization(e){return this.http.patch(`defaults/organization/${e}`,{})}getCustomers(){return"customer"===Nn.name?this.http.get(`${this.userCustomersUrl}`).pipe((0,fn.U)(e=>{const t=e?.defaultUserCustomer,r=e?.userCustomers?.content;return{defaultUserCustomer:t,userCustomers:r}})):(0,qt.of)(null)}changeDefaultCustomer(e){return this.http.patch(`${this.userCustomersUrl}/${e}`,{})}getOrganizations(){return"admin"===Nn.name?this.http.get(`${this.baseUrl}/profiles/organizations`).pipe((0,fn.U)(e=>{const t=e?.defaultOrganization,r=e?.organizations?.content;return{defaultOrganization:t,organizations:r}})):(0,qt.of)(null)}changeDefaultOrganization(e){const t=this.identityStore.get()?.ssn;return this.http.patch(`${this.baseUrl}/${t}/organizations/${e}`,{})}setAuthenticateUser(){sessionStorage.setItem(en,"true")}isAuthenticateUser(){return!!sessionStorage.getItem(en)}getUserIdentity(){return(0,On.D)([this.getPermission(),this.getProfile(),this.getCustomers(),this.getOrganizations()]).pipe((0,fn.U)(e=>{const t=e[0].map(ae=>ae.name),r={...e[1]},h={...e[2]},y={...e[3]},D=h?.userCustomers,F=h?.defaultUserCustomer??{};!h?.defaultUserCustomer&&!y?.defaultOrganization&&(F.name=r.fullName);const G=y?.organizations,W=y?.defaultOrganization,ge=new Hr(r.id,r.username,r.ssn,r.fullName,r.mobileNumber,r.lastLogin,r.sejami,r.email,r.towFactorAuth,r.documentDto,D,F,G,W,t);return this.identityStore.set(ge),ge}))}clearUser(){this.identityStore.set(void 0),sessionStorage.clear()}uploadAvatar(e,t){return this.http.post(`${this.baseUrl}/upload`,{multipartFile:e},{contentType:"multipart/form-data",reportProgress:!0,observe:"events",query:{ssn:t}})}getFileBy(e){return this.http.get(`base-info/resources/documents/download/${e}`,{responseType:"blob"}).pipe((0,fn.U)(t=>{const r=t.size;return{image:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)),size:r}}))}removeAvatarBy(e){return this.http.delete(`${this.baseUrl}/upload/delete/${e}`)}static#e=this.\u0275fac=function(t){return new(t||Yn)(i.LFG(Y.OE),i.LFG(Y.cq),i.LFG(Ui.H7))};static#t=this.\u0275prov=i.Yz7({token:Yn,factory:Yn.\u0275fac,providedIn:"root"})}class Gn{constructor(e){this.http=e,this.baseUrl="user-info/resources/customers",this.searchCustomerName=t=>this.http.get(`${this.baseUrl}/all/search`,{query:{some:t}})}checkSejamStatus(e){return this.http.post(`${this.baseUrl}/sejam-status`,e)}saveCustomerProfile(e){return this.http.post(`${this.baseUrl}/individuals`,e)}saveLegalCustomerProfile(e){return this.http.post(`${this.baseUrl}/legals`,e)}updateCustomerProfile(e,t){return this.http.put(`${this.baseUrl}/${{LEGAL:"legals",INDIVIDUAL:"individuals"}[t]}`,e)}getCustomerProfile(){return this.http.get(`${this.baseUrl}/profile`).pipe((0,fn.U)(e=>this.refactorCustomerInfo(e)))}getCustomerProfileBy(e){return this.http.get(`${this.baseUrl}/profile/ssn/${e}`).pipe((0,fn.U)(t=>this.refactorCustomerInfo(t)))}searchBy(e){return this.http.get(`${this.baseUrl}`,{query:e}).pipe((0,fn.U)(t=>t.content))}resendOtp(e){return this.http.post(`${this.baseUrl}/sejam-resend-otp`,e)}refactorCustomerInfo(e){if(e){if(e.individualCustomer){e.individualCustomer.ssn=e.ssn,e.individualCustomer.mobileNumber=e.mobileNumber,e.individualCustomer.email=e.email,e.individualCustomer.sejamTypeTitle=e.sejamTypeTitle,e.individualCustomer.birthOn=new Date(e.individualCustomer.birthOn).toLocaleDateString("fa-IR"),e.agent&&(e.agent.expirationOn=new Date(e.agent.expirationOn).toLocaleDateString("fa-IR")),e.job&&(e.job.employmentOn=new Date(e.job.employmentOn).toLocaleDateString("fa-IR")),e.deposits?.map(r=>(r.defaulted=r.defaulted?"\u0628\u0644\u0647":"\u062e\u06cc\u0631",r));const t=e.job;t.companyPhone=t.companyCityPrefix?`${t.companyCityPrefix}-${t.companyPhone}`:t.companyPhone,t.companyFax=t.companyFaxPrefix?`${t.companyFaxPrefix}-${t.companyFax}`:t.companyFax,e.addresses?.map(r=>{const h=r.cityPrefix??"",y=r.countryPrefix??"",D=r.emergencyPhoneCityPrefix??"";return r.emergencyPhone=D?`${r.emergencyPhoneCountryPrefix??""}${D}-${r.emergencyPhone}`:r.emergencyPhone,r.phone=h?`${y}${h}-${r.phone}`:r.phone,r.fax=r.faxPrefix?`${r.faxPrefix}${r.fax}`:r.fax,r})}e.stakeholders?.map(t=>(t.startOn=t.startOn?new Date(t.startOn).toLocaleDateString("fa-IR"):"",t.endOn=t.endOn?new Date(t.endOn).toLocaleDateString("fa-IR"):"",t.ownerSignature=t.ownerSignature?"\u0628\u0644\u0647":"\u062e\u06cc\u0631",t)),e.legalCustomer&&(e.legalCustomer.ssn=e.ssn,e.legalCustomer.registeredOn=new Date(e.legalCustomer.registeredOn).toLocaleDateString("fa-IR"),e.legalCustomer.evidenceReleasedOn=new Date(e.legalCustomer.evidenceReleasedOn).toLocaleDateString("fa-IR"),e.legalCustomer.evidenceExpirationOn=new Date(e.legalCustomer.evidenceExpirationOn).toLocaleDateString("fa-IR"))}return e}static#e=this.\u0275fac=function(t){return new(t||Gn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Gn,factory:Gn.\u0275fac,providedIn:"root"})}class Xn{constructor(e,t){this.userInfoService=e,this.identityStore=t}resolve(e,t){const r=this.identityStore.get();return r?(0,qt.of)(r):this.userInfoService.getUserIdentity()}static#e=this.\u0275fac=function(t){return new(t||Xn)(i.LFG(Yn),i.LFG(Y.cq))};static#t=this.\u0275prov=i.Yz7({token:Xn,factory:Xn.\u0275fac,providedIn:"root"})}class mi{constructor(e){this.userInfoService=e}canActivate(e,t){return this.userInfoService.isAuthenticateUser()}static#e=this.\u0275fac=function(t){return new(t||mi)(i.LFG(Yn))};static#t=this.\u0275prov=i.Yz7({token:mi,factory:mi.\u0275fac,providedIn:"root"})}const pi=Y.zl.extend({dictionary:{firstName:"\u0646\u0627\u0645",lastName:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",nationalCode:"\u06a9\u062f\u0645\u0644\u06cc",password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631",rePassword:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",currentPassword:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc",otp:"\u06a9\u062f \u0627\u0645\u0646\u06cc\u062a\u06cc",mobileNumber:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647",captcha:"\u062a\u0635\u0648\u06cc\u0631 \u0627\u0645\u0646\u06cc\u062a\u06cc",defaultSelectOption:"\u0647\u0645\u0647",pleaseSelect:"\u0644\u0637\u0641\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",searchButtonTitle:"\u062c\u0633\u062a\u062c\u0648",clearButtonTitle:"\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc",submitButtonTitle:"\u062b\u0628\u062a",backButtonTitle:"\u0628\u0627\u0632\u06af\u0634\u062a"},enum:{AccountType:{NONE:"\u0646\u0627\u0645\u0634\u062e\u0635",SHORT_TERM_ACCOUNT:"\u06a9\u0648\u062a\u0627\u0647 \u0645\u062f\u062a",CURRENT_ACCOUNT:"\u062c\u0627\u0631\u06cc",SAVING_ACCOUNT:"\u0642\u0631\u0636 \u0627\u0644\u062d\u0633\u0646\u0647"},AccountStatusType:{OPEN:"\u0628\u0627\u0632",CLOSED:"\u0628\u0633\u062a\u0647",TOTALLY_BLOCKED:"\u0645\u0633\u062f\u0648\u062f \u0634\u062f\u0647",STAGNANT:"\u0631\u0627\u06a9\u062f",UNABLE_TO_DEPOSIT:"\u0639\u062f\u0645 \u0627\u0645\u06a9\u0627\u0646 \u0648\u0627\u0631\u06cc\u0632"}},errorTranslators:{iranianMobileNumber:_=>"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",iranianNationalCode:_=>"\u06a9\u062f\u0645\u0644\u06cc \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",password:_=>"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0646\u0627\u062f\u0631\u0633\u062a \u0627\u0633\u062a.",noSpace:_=>"\u0641\u0636\u0627\u06cc \u062e\u0627\u0644\u06cc \u0645\u062c\u0627\u0632 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f",noUppercase:_=>"\u0628\u0627\u06cc\u062f \u062f\u0627\u0631\u0627\u06cc \u062d\u062f\u0627\u0642\u0644 1 \u062f\u0631 \u062d\u0631\u0641 \u0628\u0632\u0631\u06af \u0628\u0627\u0634\u062f",noLowercase:_=>"\u0628\u0627\u06cc\u062f \u062f\u0627\u0631\u0627\u06cc \u062d\u062f\u0627\u0642\u0644 1 \u062f\u0631 \u062d\u0631\u0641 \u06a9\u0648\u0686\u06a9 \u0628\u0627\u0634\u062f",noNumber:_=>"\u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 1 \u0639\u062f\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f",noSymbol:_=>"\u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 1 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u062e\u0627\u0635 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f",invalidLength:_=>"\u062a\u0639\u062f\u0627\u062f \u0646\u0627\u062f\u0631\u0633\u062a \u0627\u0633\u062a",passwordMismatch:_=>"\u0645\u0637\u0627\u0628\u0642\u062a \u0646\u062f\u0627\u0631\u062f"}});class Mn{constructor(e){this.elementRef=e,setTimeout(()=>{this.elementRef.nativeElement.focus()},0)}static#e=this.\u0275fac=function(t){return new(t||Mn)(i.Y36(i.SBq))};static#t=this.\u0275dir=i.lG2({type:Mn,selectors:[["","mtsAutofocus",""]],standalone:!0})}new i.OlP("environment");class mn{constructor(e){this.ebService=e;const t=localStorage.getItem("activePersonSSN");t&&(this.ssn=t),this.ebService.on(Fe.CurrentSsn,r=>this.ssn=r)}intercept(e,t){if(!this.ssn||e.url.includes("base-info"))return t.handle(e);{const r=e.clone({setHeaders:{"customer-id":this.ssn}});return t.handle(r)}}static#e=this.\u0275fac=function(t){return new(t||mn)(i.LFG(qi))};static#t=this.\u0275prov=i.Yz7({token:mn,factory:mn.\u0275fac,providedIn:"root"})}var kn=N(2843),ii=N(262);class $n{constructor(e){this.httpErrorService=e}intercept(e,t){return t.handle(e).pipe((0,fn.U)(r=>r instanceof Jt.UA&&201===r.status?r.clone({status:200}):r),(0,ii.K)(r=>{const h=r?.error?.subErrors;return h&&h.length>0?h.forEach(y=>{this.httpErrorService.emitError({status:r.status,message:y?.localizedMessage})}):this.httpErrorService.emitError({status:r.status,message:r?.error?.localizedMessage}),(0,kn._)(()=>r)}))}static#e=this.\u0275fac=function(t){return new(t||$n)(i.LFG(Y.BN))};static#t=this.\u0275prov=i.Yz7({token:$n,factory:$n.\u0275fac})}var mr=(()=>{return(_=mr||(mr={})).baseInfoView="base-info-view",_.baseInfoCreate="base-info-create",_.baseInfoUpdate="base-info-update",_.baseInfoDelete="base-info-delete",_.portfolioView="portfolio-view",_.portfolioCreate="portfolio-create",_.portfolioUpdate="portfolio-update",_.portfolioDelete="portfolio-delete",_.customerPortfolioView="customer-portfolio-view",_.portfolioPamTransactionView="portfolio-pam-transaction-view",_.userInfoView="user-info-view",_.userInfoCreate="user-info-create",_.userInfoUpdate="user-info-update",_.userInfoDelete="user-info-delete",_.contractView="contract-view",_.customerContractView="customer-contract-view",_.administrationView="administration-view",_.capitalManagementView="capital-management-view",_.activityLogView="activity-log-view",_.customerActivityLogView="customer-activity-log-view",_.glView="gl-view",_.glCreate="gl-create",_.glUpdate="gl-update",_.glDelete="gl-delete",_.assetInfoView="asset-info-view",_.assetInfoCreate="asset-info-create",_.assetInfoUpdate="asset-info-update",_.assetInfoDelete="asset-info-delete",mr;var _})();class gr{constructor(e,t){this.baseService=e,this.childService=t,this.nextTitle=pi.dictionary.searchButtonTitle,this.backTitle=pi.dictionary.clearButtonTitle,this.defaultSelection=pi.dictionary.defaultSelectOption,this.pleaseSelect=pi.dictionary.pleaseSelect,this._subscription=new fe.w0,this._dataSource=new Y.P3([]),this.searchModel={}}ngOnDestroy(){this.resetSubscriptions()}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(e){this._subscription.add(e)}set dataSource(e){this._dataSource=e}get dataSource(){return this._dataSource}set searchModel(e){this._searchModel=e}get searchModel(){return this._searchModel}clearSearchForm(){this.searchModel={}}clearAndRefreshSearchForm(){this.searchModel={},this.search()}clearDataSource(){this.dataSource=new Y.P3([])}reload(){this.search()}cleanData(e){for(const t in e)"undefined"===e[t]&&delete e[t];return e}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}get enumService(){return this.baseService.enumService}static#e=this.\u0275fac=function(t){i.$Z()};static#t=this.\u0275prov=i.Yz7({token:gr,factory:gr.\u0275fac})}var Mo=N(9300);class qi{constructor(){this.subject$=new Ot.x}on(e,t){return this.subject$.pipe((0,Mo.h)(r=>r.name===e),(0,fn.U)(r=>r.value)).subscribe(t)}emit(e){this.subject$.next(e)}static#e=this.\u0275fac=function(t){return new(t||qi)};static#t=this.\u0275prov=i.Yz7({token:qi,factory:qi.\u0275fac,providedIn:"root"})}class j{constructor(e,t){this.name=e,this.value=t}}var Fe=(()=>{return(_=Fe||(Fe={}))[_.NextStep=0]="NextStep",_[_.CurrentSsn=1]="CurrentSsn",_[_.HttpRequest=2]="HttpRequest",_[_.HttpResponse=3]="HttpResponse",Fe;var _})();class Yt{constructor(e,t){this.http=e,this.baseUrl=t}set setBaseUrl(e){this.baseUrl=e}get getBaseUrl(){return this.baseUrl}save(e,t="",r,h){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(t)}`,e,{...r,query:h})}getById(e,t="",r="",h,y){return this.http.get(`${this.baseUrl}${t}/${e}${this.makeConcatUrl(r)}`,{...h,query:y})}post(e,t="",r,h){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(t)}`,e,{...r,query:h})}get(e,t,r="",h){return this.http.getPagable(`${this.baseUrl}${this.makeConcatUrl(r)}`,e,{...h,query:t})}read(e,t="",r){return this.http.get(`${this.baseUrl}${this.makeConcatUrl(t)}`,{...r,query:e})}put(e,t,r="",h,y){const D=t?`${this.baseUrl}/${t}${this.makeConcatUrl(r)}`:`${this.baseUrl}${this.makeConcatUrl(r)}`;return this.http.put(D,e,{...h,query:y})}patch(e,t,r="",h,y){const D=t?`${this.baseUrl}/${t}${this.makeConcatUrl(r)}`:`${this.baseUrl}${this.makeConcatUrl(r)}`;return this.http.patch(D,e,{...y,query:h})}delete(e,t="",r,h){return this.http.delete(`${this.baseUrl}/${e}${this.makeConcatUrl(t)}`,{...r,query:h})}makeConcatUrl(e){return e?`/${e}`:""}static#e=this.\u0275fac=function(t){i.$Z()};static#t=this.\u0275prov=i.Yz7({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}var ut=N(5861),It=N(8505),rt=N(8189),Vt=N(5577),di=N(7359),hi=N(4482);const _r=(_,e)=>(_.push(e),_);var bo=N(9808),Yi=N(9635);class wr{constructor(e,t,r){this.http=e,this.userIdentity=t,this.sanitizer=r,this.baseUrl="portfolio-api/resources",this.infoUrl=`${this.baseUrl}/information`,this.quizUrl=`${this.infoUrl}/quiz`,this.privatePersonUrl=`${this.infoUrl}/private`,this.corporateUrl=`${this.infoUrl}/corporate`,this.requestUrl=`${this.baseUrl}/portfolio/request`,this._underSupportInfoList=[],this._educationInfoList=[],this._occupationInfoList=[],this._investmentExperienceList=[],this._debtsInfoList=[],this._relatedPersonList=[],this._companySharesList=[],this._corporateList=[],this._assetList=[],this._depositDithdrawList=[],this._editable=!1,this._returned=!1,this._isAllowedRq=!0,this.assessmentSubject$=new Ot.x,this.assessmentSubjectChanged$=this.assessmentSubject$.asObservable(),this.fileDownloader=h=>this.http.get(`${this.baseUrl}/document/download/${h}`,{responseType:"blob"}),this.initActivePerson(),this.initCustomerType()}getRequestId(){return this.http.post(`${this.requestUrl}/create`,{}).pipe((0,It.b)(e=>{this.requestId=e.id,this.requestUid=e.requestId}))}get requestId(){if(!this._requestId){const e=localStorage.getItem("requestId");e&&(this._requestId=e)}return this._requestId}set requestId(e){this._requestId=e,localStorage.setItem("requestId",e)}get requestUid(){if(!this._requestUid){const e=localStorage.getItem("requestUid");e&&(this._requestUid=e)}return this._requestUid}set requestUid(e){this._requestUid=e,localStorage.setItem("requestUid",e)}get activePersonSSN(){if(!this._activePersonSSN){const e=localStorage.getItem("activePersonSSN");e&&(this._activePersonSSN=e)}return this._activePersonSSN}set activePersonSSN(e){this._activePersonSSN=e,localStorage.setItem("activePersonSSN",e)}get customerType(){if(!this._customerType){const e=localStorage.getItem("customerType");e&&(this._customerType=e)}return this._customerType}set customerType(e){this._customerType=e,localStorage.setItem("customerType",e)}get reVisit(){if(!this._reVisit){const e=localStorage.getItem("reVisit");e&&(this._reVisit=JSON.parse(e))}return this._reVisit}set reVisit(e){this._reVisit=e,localStorage.setItem("reVisit",JSON.stringify(e))}get editable(){if(!this._editable){const e=localStorage.getItem("editable");e&&(this._editable=JSON.parse(e))}return this._editable}set editable(e){this._editable=e,localStorage.setItem("editable",JSON.stringify(e))}get returned(){if(!this._returned){const e=localStorage.getItem("returned");e&&(this._returned=JSON.parse(e))}return this._returned}set returned(e){this._returned=e,localStorage.setItem("returned",JSON.stringify(e))}get customerName(){if(!this._customerName){const e=localStorage.getItem("customerName");e&&(this._customerName=e)}return this._customerName}set customerName(e){this._customerName=e,localStorage.setItem("customerName",e)}underSupportInfoSave(){return this.http.post(`${this.privatePersonUrl}/under-support/${this.requestId}`,this._underSupportInfoList).pipe(this.toAllowedRq())}underSupportInfoList(){return this._isAllowedRq?this.http.get(`${this.privatePersonUrl}/under-support/${this.requestId}`).pipe((0,It.b)(e=>{this._underSupportInfoList=e,this._isAllowedRq=!1})):(0,qt.of)(this._underSupportInfoList)}educationInfoSave(){return this.http.post(`${this.privatePersonUrl}/education/${this.requestId}`,this._educationInfoList).pipe(this.toAllowedRq())}educationInfoList(){return this._isAllowedRq?this.http.get(`${this.privatePersonUrl}/education/${this.requestId}`).pipe((0,It.b)(e=>{this._educationInfoList=e,this._isAllowedRq=!1})):(0,qt.of)(this._educationInfoList)}occupationInfoSave(){return this.http.post(`${this.privatePersonUrl}/occupation/${this.requestId}`,this._occupationInfoList).pipe(this.toAllowedRq())}occupationInfoList(){return this._isAllowedRq?this.http.get(`${this.privatePersonUrl}/occupation/${this.requestId}`).pipe((0,It.b)(e=>{this._occupationInfoList=e,this._isAllowedRq=!1})):(0,qt.of)(this._occupationInfoList)}furtherInfoRealSave(e){return this.http.post(`${this.privatePersonUrl}/complementary/${this.requestId}`,e)}getFurtherInfoReal(){return this.http.get(`${this.privatePersonUrl}/complementary/${this.requestId}`).pipe((0,It.b)(e=>{this._furtherInfoReal=e}))}incomeSave(e){return this.http.post(`${this.privatePersonUrl}/income/${this.requestId}`,e)}getIncomeInfo(){return this.http.get(`${this.privatePersonUrl}/income/${this.requestId}`).pipe((0,It.b)(e=>{this._incomeInfo=e}))}investmentExperienceSave(){return this.http.post(`${this.infoUrl}/investment-experience/${this.requestId}`,this._investmentExperienceList).pipe(this.toAllowedRq())}investmentExperienceList(){return this._isAllowedRq?this.http.get(`${this.infoUrl}/investment-experience/${this.requestId}`).pipe((0,It.b)(e=>{this._investmentExperienceList=e,this._isAllowedRq=!1})):(0,qt.of)(this._investmentExperienceList)}debtsInfoSave(){return this.http.post(`${this.infoUrl}/debts/${this.requestId}`,this._debtsInfoList).pipe(this.toAllowedRq())}debtsInfoList(){return this._isAllowedRq?this.http.get(`${this.infoUrl}/debts/${this.requestId}`).pipe((0,It.b)(e=>{this._debtsInfoList=e,this._isAllowedRq=!1})):(0,qt.of)(this._debtsInfoList)}relatedPersonSave(){return this.http.post(`${this.infoUrl}/corporate/related-persons/${this.requestId}`,this._relatedPersonList).pipe(this.toAllowedRq())}relatedPersonList(){return this._isAllowedRq?this.http.get(`${this.infoUrl}/corporate/related-persons/${this.requestId}`).pipe((0,It.b)(e=>{this._relatedPersonList=e,this._isAllowedRq=!1})):(0,qt.of)(this._relatedPersonList)}companySharesSave(){return this.http.post(`${this.corporateUrl}/company-shares/${this.requestId}`,this._companySharesList).pipe(this.toAllowedRq())}companySharesList(){return this._isAllowedRq?this.http.get(`${this.corporateUrl}/company-shares/${this.requestId}`).pipe((0,It.b)(e=>{this._companySharesList=e,this._isAllowedRq=!1})):(0,qt.of)(this._companySharesList)}corporateSave(){return this.http.post(`${this.corporateUrl}/income/${this.requestId}`,this._corporateList).pipe(this.toAllowedRq())}corporateList(){return this._isAllowedRq?this.http.get(`${this.corporateUrl}/income/${this.requestId}`).pipe((0,It.b)(e=>{this._corporateList=e,this._isAllowedRq=!1})):(0,qt.of)(this._corporateList)}assetSave(){return this.http.post(`${this.infoUrl}/assets/${this.requestId}`,this._assetList).pipe(this.toAllowedRq())}assetList(){return this._isAllowedRq?this.http.get(`${this.infoUrl}/assets/${this.requestId}`).pipe((0,It.b)(e=>{this._assetList=e,this._isAllowedRq=!1})):(0,qt.of)(this._assetList)}depositDithdrawSave(){return this.http.post(`${this.infoUrl}/deposit-withdraw-anticipation/${this.requestId}`,this._depositDithdrawList).pipe(this.toAllowedRq())}depositDithdrawList(){return this._isAllowedRq?this.http.get(`${this.infoUrl}/deposit-withdraw-anticipation/${this.requestId}`).pipe((0,It.b)(e=>{this._depositDithdrawList=e,this._isAllowedRq=!1})):(0,qt.of)(this._depositDithdrawList)}InvestmentPurposeSave(e){return this.http.post(`${this.infoUrl}/investment-purpose/${this.requestId}`,e)}getInvestmentPurpose(){return this.http.get(`${this.infoUrl}/investment-purpose/${this.requestId}`).pipe((0,It.b)(e=>{this._investmentPurpose=e}))}furtherInfoLegalSave(e){return this.http.post(`${this.corporateUrl}/complementary/${this.requestId}`,e)}getFurtherInfoLegal(){return this.http.get(`${this.corporateUrl}/complementary/${this.requestId}`).pipe((0,It.b)(e=>{this._furtherInfoLegal=e}))}investmentValueSave(e){return this.http.post(`${this.infoUrl}/investment-value/${this.requestId}`,e)}getInvestmentValue(){return this.http.get(`${this.infoUrl}/investment-value/${this.requestId}`).pipe((0,It.b)(e=>{this._investmentValue=e}))}getQuestions(){return this.http.get(`${this.quizUrl}/risk-assessment-questions`).pipe((0,rt.J)(),(0,Vt.z)(e=>e.imageId?this.getFileBy(e.imageId).pipe((0,fn.U)(t=>({...t,...e}))):(0,qt.of)(e)),function pr(){return(0,hi.e)((_,e)=>{(function bi(_,e){return(0,hi.e)((0,di.U)(_,e,arguments.length>=2,!1,!0))})(_r,[])(_).subscribe(e)})}())}getQuizResult(){return this.http.get(`${this.quizUrl}/result/${this.requestId}`)}saveManagerScore(e){return this.http.patch(`${this.quizUrl}/result/${this.requestId}`,e)}updateQuizResultBy(e){return this.http.patch(`${this.quizUrl}/result/${this.requestId}`,e)}sendAnswers(e){return this.http.post(`${this.quizUrl}/risk-assessment-answers/${this.requestId}`,e)}getRiskAssessmentParameters(){return this.http.get(`${this.quizUrl}/result/parameters/${this.customerType}`)}finalizing(){return this.http.get(`${this.requestUrl}/confirm/${this.requestId}`)}uploadDocument(e,t){return this.http.post(`${this.baseUrl}/document/upload/${this.requestUid}`,{file:e},{contentType:"multipart/form-data",reportProgress:!0,observe:"events",query:{fileType:t}})}upload(e,t="OTHER"){return this.http.post(`${this.baseUrl}/document/document-upload`,{file:e},{contentType:"multipart/form-data",reportProgress:!0,observe:"events",query:{fileType:t}})}getDocuments(){return this.http.get(`${this.baseUrl}/document/${this.requestUid}`)}getSejamSignature(){return this.http.get("user-info/resources/customers/sejam-signature",{query:{ssn:this.activePersonSSN}})}deleteDocumentBy(e){return this.http.delete(`${this.baseUrl}/document/${e}`)}getFileBy(e){return this.fileDownloader(e).pipe((0,fn.U)(t=>{const r=t.size;return{image:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)),size:r}}))}getDocInfo(e){var t=this;return(0,ut.Z)(function*(){const r=t.http.get(`${t.baseUrl}/document/info/${e}`);return yield(0,bo.n)(r)})()}initActivePerson(){const e=localStorage.getItem("activePersonSSN");if(e)this.activePersonSSN=e;else{const t=this.userIdentity.get()?.defaultUserCustomer?.ssn;t&&(this.activePersonSSN=t)}}initCustomerType(){const e=localStorage.getItem("customerType");if(e)this.customerType=e;else{const t=this.userIdentity.get()?.defaultUserCustomer?.customerType;t&&(this.customerType=t)}}toAllowedRq(){return(0,Yi.z)((0,It.b)(e=>{this._isAllowedRq=!0}))}get checkingByCustomer(){return"{}"!==JSON.stringify(this.userIdentity.get()?.defaultUserCustomer)}static#e=this.\u0275fac=function(t){return new(t||wr)(i.LFG(Y.OE),i.LFG(Y.cq),i.LFG(Ui.H7))};static#t=this.\u0275prov=i.Yz7({token:wr,factory:wr.\u0275fac,providedIn:"root"})}class Gr{constructor(e){this.http=e,this.baseUrl="base-info/resources/banks"}get(e){return this.http.getPagable(this.baseUrl,e)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}static#e=this.\u0275fac=function(t){return new(t||Gr)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Gr,factory:Gr.\u0275fac,providedIn:"root"})}class ao{constructor(e){this.http=e,this.baseUrl="base-info/resources/locations"}getProvinces(){return this.http.get(`${this.baseUrl}/provinces`)}getCitiesBy(e){return this.http.get(`${this.baseUrl}/parent/${e}`)}static#e=this.\u0275fac=function(t){return new(t||ao)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ao,factory:ao.\u0275fac,providedIn:"root"})}class Zr{constructor(e){this.http=e,this.reloadOnInitSubject$=new Ot.x,this.reloadOnInitSubjectChanged$=this.reloadOnInitSubject$.asObservable(),this.baseUrl="portfolio-api/resources/cartable",this.commentUrl="portfolio-api/resources/comment",this.currentEnv=Nn.name}set setBaseUrl(e){this.baseUrl=e}get requestType(){if(!this._requestType){const e=localStorage.getItem("requestType");e&&(this._requestType=e)}return this._requestType}set requestType(e){this._requestType=e,localStorage.setItem("requestType",e)}get action(){if(!this._action){const e=localStorage.getItem("action");e&&(this._action=e)}return this._action}set action(e){this._action=e,localStorage.setItem("action",e)}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e,t){return this.http.get(`${this.baseUrl}/${e}`,{query:{type:t}})}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}update(e){return this.http.put(`${this.baseUrl}/${e.requestId}/${e.action}`,e.dto,{query:{type:e.type,description:e.description}})}patch(e){return this.http.patch(`${this.baseUrl}/${e.requestId}`,e.dto,{query:{type:e.type}})}getCommentsBy(e,t){return this.http.get(`${this.commentUrl}/${e}?sort=${t}`)}saveComment(e,t){return this.http.post(`${this.commentUrl}/${e}`,t)}getApplicableActions(){return this.http.get(`${this.baseUrl}/cartable-actions`,{query:{requestType:this.requestType}})}static#e=this.\u0275fac=function(t){return new(t||Zr)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Zr,factory:Zr.\u0275fac,providedIn:"root"})}class Qt{constructor(e){this.http=e,this.baseUrl="portfolio-api/resources/contract",this.getContractByPortfolioName=t=>this.http.get(`${this.baseUrl}/all`,{query:{some:t}}),this.contractDownloader=t=>this.http.get(`${this.baseUrl}/${t}/pdf`,{responseType:"blob"})}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}update(e,t){return this.http.patch(`${this.baseUrl}/${t}`,e)}addPam(e,t){return this.http.post(`${this.baseUrl}/pam/${t}`,e)}getAllPam(e){return this.http.get(`${this.baseUrl}/pam/${e}`)}deletePam(e){return this.http.delete(`${this.baseUrl}/pam/${e}`)}sign(e,t){return this.http.patch(`${this.baseUrl}/sign/${e}`,{},{query:{"verification-code":t}})}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}savePortfolioAndFiscal(e){return this.http.patch(`${this.baseUrl}/change-portfolio-name`,e)}cashDeposit(e,t){return this.http.post(`${this.baseUrl}/cash/customer/deposit/${e}`,t)}cashWithdrawal(e,t){return this.http.post(`${this.baseUrl}/cash/customer/withdraw/${e}`,t)}getPrxCodeReqInfoBy(e){return this.http.get(`${this.baseUrl}/prx/${e}`)}getContractHtmlBy(e){return this.http.get(`${this.baseUrl}/${e}/html`,{responseType:"blob"})}getPrxCodeReqDocxBy(e){return this.http.get(`${this.baseUrl}/prx/${e}/docx`,{responseType:"blob"})}getContractDocxBy(e){return this.http.get(`${this.baseUrl}/${e}/docx`,{responseType:"blob"})}registerPrxCodeReq(e){return this.http.post(`${this.baseUrl}/prx/${e}`,{})}sendOtp(e){return this.http.post(`${this.baseUrl}/otp/${e}`,{})}getIssuedContractAll(){return this.http.get(`${this.baseUrl}/issued/all`)}getCustomerIssuedContractAll(){return this.http.get(`${this.baseUrl}/customer/issued/all`)}static#e=this.\u0275fac=function(t){return new(t||Qt)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"})}class K{constructor(e){this.http=e,this.baseUrl="portfolio-api/resources/contract-deposits"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAllBybranchId(e){return this.http.get(`${this.baseUrl}/all/${e}`)}getAllByContractId(e,t){return this.http.get(`${this.baseUrl}/contract-id/${e}/usage-type/${t}`)}static#e=this.\u0275fac=function(t){return new(t||K)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"})}class se{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/asset-types"}get(e){return this.http.getPagable(this.baseUrl,e)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}static#e=this.\u0275fac=function(t){return new(t||se)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:se,factory:se.\u0275fac,providedIn:"root"})}class he{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/securities",this.getSecuritiesWithName=t=>this.http.get(`${this.baseUrl}/all`,{query:{some:t}})}getAllBy(e){return this.http.get(`${this.baseUrl}/all/asset-type-id/${e}`)}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}getAll(){return this.http.get(`${this.baseUrl}/all`)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}static#e=this.\u0275fac=function(t){return new(t||he)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"})}class re{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/industries"}get(e){return this.http.getPagable(this.baseUrl,e)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}static#e=this.\u0275fac=function(t){return new(t||re)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"})}class _e{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/sub-industries"}get(e){return this.http.getPagable(this.baseUrl,e)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}getAllByIndustry(e){return this.http.get(`${this.baseUrl}/all/industry-code/${e}`)}static#e=this.\u0275fac=function(t){return new(t||_e)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"})}class Le{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/asset-types"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}getAll(){return this.http.get(`${this.baseUrl}/all`)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAllByAssetClass(e){return this.http.get(`${this.baseUrl}/all`,{query:{assetClass:e}})}getAssetInfoTypes(e){return this.http.get(`${this.baseUrl}/search`,{query:e})}static#e=this.\u0275fac=function(t){return new(t||Le)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"})}class Pe extends Yt{constructor(e){super(e,"portfolio-api/resources/security/transactions")}getSecurityEntryById(e,t){return this.http.get(`portfolio-api/resources/cartable/${e}`,{query:t})}static#e=this.\u0275fac=function(t){return new(t||Pe)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}class ot{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/capital-increases"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}mapResultToDataResult(e){return e.body instanceof Blob?new Y.xk(e.body,"file"):new Y.iB(e.data,e.total)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}getAll(){return this.http.get(`${this.baseUrl}/all`)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAllByAssetClass(e){return this.http.get(`${this.baseUrl}/search`,{query:{assetClass:e}})}static#e=this.\u0275fac=function(t){return new(t||ot)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"root"})}class Nt{constructor(e){this.http=e,this.baseUrl="portfolio-api/resources/pam-transactions"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}save(e){return this.http.post(this.baseUrl,e)}static#e=this.\u0275fac=function(t){return new(t||Nt)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Nt,factory:Nt.\u0275fac,providedIn:"root"})}class rn{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/security-price-adjustments"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}static#e=this.\u0275fac=function(t){return new(t||rn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:rn,factory:rn.\u0275fac,providedIn:"root"})}class dn{constructor(e){this.http=e,this.baseUrl="asset-info-api/resources/corporations",this.getCorporationsBy=t=>this.http.get(`${this.baseUrl}/all`,{query:{some:t}})}get(e){return this.http.getPagable(this.baseUrl,e)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}static#e=this.\u0275fac=function(t){return new(t||dn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:dn,factory:dn.\u0275fac,providedIn:"root"})}class et{constructor(e){this.http=e,this.baseUrl="activity-log/resources/activities"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getCustomer(e,t){return this.http.getPagable(`${this.baseUrl}/customer`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}static#e=this.\u0275fac=function(t){return new(t||et)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"})}class tt{constructor(e){this.http=e,this.accoutingUrl="accounting-api/resources/fiscal-year"}getAllByContractId(e){return this.http.get(`${this.accoutingUrl}/all/contract/${e} `)}static#e=this.\u0275fac=function(t){return new(t||tt)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:tt,factory:tt.\u0275fac})}class Ye{constructor(e){this.http=e,this.baseUrl="user-info/resources/users"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e,t){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}changeStatus(e){return this.http.patch(`${this.baseUrl}/change-active-status`,e)}static#e=this.\u0275fac=function(t){return new(t||Ye)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"})}class bt{constructor(e){this.http=e,this.baseUrl="user-info/resources/roles"}get(e){return this.http.get(`${this.baseUrl}`,{query:e})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e,t){return this.http.put(`${this.baseUrl}/${t}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getPermisionList(){return this.http.get("user-info/resources/permissions")}changeStatus(e){return this.http.patch(`${this.baseUrl}/change-active-status`,e)}static#e=this.\u0275fac=function(t){return new(t||bt)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"})}class mt{constructor(e){this.http=e,this.baseUrl="base-info/resources/branches",this.getBranchesBy=t=>this.http.get(`${this.baseUrl}/all/${t}`)}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}changeStatus(e){return this.http.patch(`${this.baseUrl}/change-status`,e)}static#e=this.\u0275fac=function(t){return new(t||mt)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:mt,factory:mt.\u0275fac,providedIn:"root"})}class cn{constructor(e){this.http=e,this.baseUrl="base-info/resources/organizations",this.getManagersBy=t=>this.http.get("user-info/resources/users/all/type/ADMIN",{query:{some:t}})}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAllOrganizations(){return this.http.get(`${this.baseUrl}/all`)}changeStatus(e){return this.http.patch(`${this.baseUrl}/change-status`,e)}getOrganizationUserBy(e,t){return this.http.get(`user-info/resources/users/all/name/${e}/organization/${t}`)}static#e=this.\u0275fac=function(t){return new(t||cn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:cn,factory:cn.\u0275fac,providedIn:"root"})}const xn="portfolio-api/resources/portfolio-plans";class In extends Yt{constructor(e){super(e,xn)}changeStatus(e){return this.http.patch(`${xn}/change-status`,e)}static#e=this.\u0275fac=function(t){return new(t||In)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:In,factory:In.\u0275fac})}class ai{constructor(e){this.http=e,this.baseUrl="base-info/resources/deposit-types"}get(e){return this.http.get(`${this.baseUrl}`,e).pipe((0,fn.U)(t=>new Y.iB(t.content)))}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}searchBy(e){return this.http.get(`${this.baseUrl}`,{query:e})}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}static#e=this.\u0275fac=function(t){return new(t||ai)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ai,factory:ai.\u0275fac,providedIn:"root"})}class Bn{constructor(e){this.http=e,this.baseUrl="base-info/resources/brokerage-companies",this.getBrokerageCompanyByName=t=>this.http.get(`${this.baseUrl}/all`,{query:{some:t}})}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}disableBrokerageCompany(e){return this.http.patch(`${this.baseUrl}/disable`,e)}enableBrokerageCompany(e){return this.http.patch(`${this.baseUrl}/enable/${e}`,{})}static#e=this.\u0275fac=function(t){return new(t||Bn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Bn,factory:Bn.\u0275fac,providedIn:"root"})}class Ni{constructor(e){this.http=e,this.baseUrl="base-info/resources/deposits"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}getAllBybranchId(e){return this.http.get(`${this.baseUrl}/all/branch-id/${e}`)}getAllBybranchIdAndusagetype(e,t){return this.http.get(`${this.baseUrl}/all/branch-id/${e}/usage-type/${t}`)}getAllDepositByCustomerSsn(e){return this.http.get(`${this.baseUrl}/all/ssn/${e}`)}getAllDepositByUsageType(e){return this.http.get(`${this.baseUrl}/all/usage-type/${e}`)}getAllSearchDepositByUsageType(e){return this.http.get(`${this.baseUrl}/all?usageType=${e}`)}static#e=this.\u0275fac=function(t){return new(t||Ni)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ni,factory:Ni.\u0275fac,providedIn:"root"})}class ur{constructor(e){this.http=e,this.baseUrl="base-info/resources/companies",this.fileBaseUrl="base-info/resources",this.uploadDocUrl=`${this.baseUrl}/upload`,this.userInfoUrl="user-info/resources/customers/legals",this.pillarsUrl="base-info/resources/pillars",this.fileDownloader=t=>this.http.get(`${this.fileBaseUrl}/documents/download/${t}`,{responseType:"blob"})}getLegalCustomerBy(e){return this.http.get(`${this.userInfoUrl}/${e}`)}getCompany(){return this.http.get(`${this.baseUrl}/all`)}saveCompany(e){return this.http.post(`${this.baseUrl}`,e)}putCompany(e){return this.http.put(`${this.baseUrl}`,e)}uploadDocument(e,t){return this.http.post(`${this.uploadDocUrl}`,{multipartFile:e},{contentType:"multipart/form-data",reportProgress:!0,observe:"events",query:{ssn:t}})}removeFileBy(e){return this.http.delete(`${this.uploadDocUrl}/delete/${e}`)}get(e){return this.http.getPagable(`${this.pillarsUrl}`,e)}getById(e){return this.http.get(`${this.pillarsUrl}/${e}`)}getAll(){return this.http.get(`${this.baseUrl}/all`)}save(e){return this.http.post(this.pillarsUrl,e)}put(e){return this.http.put(`${this.pillarsUrl}`,e)}delete(e){return this.http.delete(`${this.pillarsUrl}/${e}`)}static#e=this.\u0275fac=function(t){return new(t||ur)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ur,factory:ur.\u0275fac,providedIn:"root"})}const Gi="accounting-api/resources/products";class Wi extends Yt{constructor(e){super(e,Gi)}addWage(e,t="",r){return this.http.post(`${Gi}/${t}/${r}`,e)}static#e=this.\u0275fac=function(t){return new(t||Wi)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Wi,factory:Wi.\u0275fac})}class xo extends Yt{constructor(e){super(e,"accounting-api/resources/products-actions")}static#e=this.\u0275fac=function(t){return new(t||xo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:xo,factory:xo.\u0275fac})}class Ae extends Yt{constructor(e){super(e,"accounting-api/resources/ledgers")}static#e=this.\u0275fac=function(t){return new(t||Ae)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ae,factory:Ae.\u0275fac})}var Te=N(1135),Xe=(()=>{return(_=Xe||(Xe={})).TEMPLATE_BASE_URL="accounting-api/resources/templates",_.DTMDETAIL_BASE_URL="accounting-api/resources/template-details",_.DTMDETAIL_ITEM_BASE_URL="accounting-api/resources/template-detail-items",Xe;var _})();class Ct extends Yt{constructor(e){super(e,Xe.TEMPLATE_BASE_URL),this.counts=new Te.X({amountCount:0,titleCount:0,detailCount:0}),this.templateOrder=new Te.X(1),this.templateState=new Te.X({detailPanelActive:!1,detailItemId:0,detailItemActive:!1,isGroupEnabled:!1}),this.returnUrlKey="returnUrl",this.getTemplateByName=t=>this.http.get(`${Xe.TEMPLATE_BASE_URL}/all`,{query:{some:t,autocomplete:!0}})}saveReturnUlr(e){e&&localStorage.setItem(this.returnUrlKey,e)}loadReturnUrl(){return localStorage.getItem(this.returnUrlKey)}clearReturnUrl(){localStorage.removeItem(this.returnUrlKey)}resetState(){this.templateState.next({detailPanelActive:!1,detailItemId:0,detailItemActive:!1,isGroupEnabled:!0})}static#e=this.\u0275fac=function(t){return new(t||Ct)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ct,factory:Ct.\u0275fac})}class St extends Yt{constructor(e){super(e,Xe.DTMDETAIL_BASE_URL),this.getTemplateByName=t=>this.http.get(`${Xe.DTMDETAIL_BASE_URL}/all`,{query:{some:t}})}static#e=this.\u0275fac=function(t){return new(t||St)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:St,factory:St.\u0275fac})}class Tn extends Yt{constructor(e){super(e,Xe.DTMDETAIL_ITEM_BASE_URL),this.getTemplateByName=t=>this.http.get(`${Xe.DTMDETAIL_ITEM_BASE_URL}/all`,{query:{some:t}})}static#e=this.\u0275fac=function(t){return new(t||Tn)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Tn,factory:Tn.\u0275fac})}const Hn="accounting-api/resources/wages";class ri extends Yt{constructor(e){super(e,Hn),this.getWages=t=>this.http.post(`${Hn}`,t)}static#e=this.\u0275fac=function(t){return new(t||ri)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ri,factory:ri.\u0275fac,providedIn:"root"})}class xi extends Yt{constructor(e){super(e,"accounting-api/resources/wage-types")}static#e=this.\u0275fac=function(t){return new(t||xi)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:xi,factory:xi.\u0275fac,providedIn:"root"})}const Sn="accounting-api/resources/wage-rates";class ci extends Yt{constructor(e){super(e,Sn)}getByWageTypeId(e){return this.http.get(`${Sn}`,{query:{wageTypeId:e}}).pipe((0,fn.U)(t=>t.content))}static#e=this.\u0275fac=function(t){return new(t||ci)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ci,factory:ci.\u0275fac,providedIn:"root"})}class Pi extends Yt{constructor(e){super(e,"accounting-api/resources/accounts")}static#e=this.\u0275fac=function(t){return new(t||Pi)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Pi,factory:Pi.\u0275fac})}class Bo extends Yt{constructor(e){super(e,"asset-info-api/resources/index-infos")}readMarkets(e){return this.http.get("asset-info-api/resources/market-indexes/all",{query:e})}static#e=this.\u0275fac=function(t){return new(t||Bo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Bo,factory:Bo.\u0275fac})}class Ga extends Yt{constructor(e){super(e,"accounting-api/resources/entry-items")}static#e=this.\u0275fac=function(t){return new(t||Ga)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ga,factory:Ga.\u0275fac})}class ar extends Yt{constructor(e){super(e,"accounting-api/resources/fiscal-years")}static#e=this.\u0275fac=function(t){return new(t||ar)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ar,factory:ar.\u0275fac})}class Oo extends Yt{constructor(e){super(e,"accounting-api/resources/entries")}static#e=this.\u0275fac=function(t){return new(t||Oo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Oo,factory:Oo.\u0275fac})}class mo extends Yt{constructor(e){super(e,"accounting-api/resources/entry-items")}static#e=this.\u0275fac=function(t){return new(t||mo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:mo,factory:mo.\u0275fac})}class wa extends Yt{constructor(e){super(e,"accounting-api/resources/product-ledgers")}static#e=this.\u0275fac=function(t){return new(t||wa)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:wa,factory:wa.\u0275fac,providedIn:"root"})}class Za{constructor(e){this.http=e,this.baseUrl="portfolio-api/resources/request-role-assignees"}get(e,t){return this.http.getPagable(`${this.baseUrl}`,e,{query:t})}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}save(e){return this.http.post(this.baseUrl,e)}put(e){return this.http.put(`${this.baseUrl}`,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}static#e=this.\u0275fac=function(t){return new(t||Za)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Za,factory:Za.\u0275fac,providedIn:"root"})}class Ia extends Yt{constructor(e){super(e,"activity-log/resources/scheduler-logs")}static#e=this.\u0275fac=function(t){return new(t||Ia)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ia,factory:Ia.\u0275fac})}const Iu="portfolio-api/resources/fees";class lo extends Yt{constructor(e){super(e,Iu),this.templateState=new Te.X({fixedFeeActive:!1,performanceFeeActive:!1})}get performanceFeeBaseType(){if(!this._performanceFeeBaseType){const e=localStorage.getItem("performanceFeeBaseType");e&&(this._performanceFeeBaseType=e)}return this._performanceFeeBaseType}set performanceFeeBaseType(e){this._performanceFeeBaseType=e,localStorage.setItem("performanceFeeBaseType",String(e))}getByContractPlanId(e){return this.http.get(`${Iu}/customer/contract-plan-id/${e}`)}static#e=this.\u0275fac=function(t){return new(t||lo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:lo,factory:lo.\u0275fac})}const fl="portfolio-api/resources/fixed-fees";class zo extends Yt{constructor(e){super(e,fl),this.hasFixedFee=!1}read(e){return super.read(e).pipe((0,It.b)(t=>{this.hasFixedFee=!1,t&&t.content.length>0&&(this.hasFixedFee=!0)}))}getAllByFeeId(e){return this.http.get(`${fl}/customer/all`,{query:{feeId:e}})}static#e=this.\u0275fac=function(t){return new(t||zo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:zo,factory:zo.\u0275fac})}const Oa="portfolio-api/resources/performance-fees";class Ls extends Yt{constructor(e){super(e,Oa),this.hasPerformanceFee=!1}read(e){return super.read(e).pipe((0,It.b)(t=>{this.hasPerformanceFee=!1,t&&t.content.length>0&&(this.hasPerformanceFee=!0)}))}getAllByFeeId(e){return this.http.get(`${Oa}/customer/all`,{query:{feeId:e}})}static#e=this.\u0275fac=function(t){return new(t||Ls)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ls,factory:Ls.\u0275fac})}class Yo extends Yt{constructor(e){super(e,"base-info/resources/calendars")}static#e=this.\u0275fac=function(t){return new(t||Yo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Yo,factory:Yo.\u0275fac})}class uo extends Yt{constructor(e){super(e,"portfolio-api/resources/security-asset-daily-balances")}static#e=this.\u0275fac=function(t){return new(t||uo)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:uo,factory:uo.\u0275fac})}class go extends Yt{constructor(e){super(e,"portfolio-api/resources/security-asset-daily-balances/customer")}static#e=this.\u0275fac=function(t){return new(t||go)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:go,factory:go.\u0275fac})}class xs extends Yt{constructor(e){super(e,"portfolio-api/resources/daily-balance-charts")}static#e=this.\u0275fac=function(t){return new(t||xs)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:xs,factory:xs.\u0275fac})}class ko extends Yt{constructor(e){super(e,"portfolio-api/resources/daily-balance-charts/customer")}static#e=this.\u0275fac=function(t){return new(t||ko)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:ko,factory:ko.\u0275fac})}const Zo="portfolio-api/resources/contract-plans";class to extends Yt{constructor(e){super(e,Zo)}get contractPlanId(){if(!this._contractPlanId){const e=localStorage.getItem("contractPlanId");e&&(this._contractPlanId=Number(e))}return this._contractPlanId}set contractPlanId(e){this._contractPlanId=e,localStorage.setItem("contractPlanId",String(e))}getSelectedPlanBy(e){return this.http.get(`${Zo}/customer/request-id/${e}`)}getContractPlanBy(e){return this.http.get(`${Zo}/request-id/${e}`).pipe((0,It.b)(t=>{t&&(this.contractPlanId=t.id)}))}getContractPlanByContractId(e){return this.http.get(`${Zo}/customer/contract-id/${e}`).pipe((0,It.b)(t=>{t&&(this.contractPlanId=t.id)}))}changeStatus(e){return this.http.patch(`${Zo}/change-status`,e)}accept(e){return this.http.patch(`${Zo}/customer/accept/contract-id/${e}`,{})}static#e=this.\u0275fac=function(t){return new(t||to)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:to,factory:to.\u0275fac})}class hs{constructor(e){this.baseService=e,this.nextTitle=pi.dictionary.submitButtonTitle,this.backTitle=pi.dictionary.backButtonTitle,this.defaultSelection=pi.dictionary.defaultSelectOption,this.pleaseSelect=pi.dictionary.pleaseSelect,this._subscription=new fe.w0,this.formModel={}}ngOnDestroy(){this.resetSubscriptions()}findMode(){const e=history.state;e&&e.mode&&(this.mode=e.mode)}get isAddMode(){return"add"===this.mode}get isEditMode(){return"edit"===this.mode}get isShowMode(){return"show"===this.mode}setPropertyValue(e,t,r){e[t]=r}areAllPropsUndefined(e){return Object.values(e).every(t=>void 0===t)}areAllRequiredKeysAssigned(e,t){return t.every(r=>null!=e[r])}getRequiredKeys(e){return Object.keys(e).filter(t=>null!=e[t])}filterObjectByKeyList(e,t){return Object.keys(e).reduce((r,h)=>(t.includes(h)&&(r[h]=e[h]),r),{})}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(e){this._subscription.add(e)}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}get enumService(){return this.baseService.enumService}get formBuilderService(){return this.baseService.formBuilderService}static#e=this.\u0275fac=function(t){return new(t||hs)(i.LFG(Vi))};static#t=this.\u0275prov=i.Yz7({token:hs,factory:hs.\u0275fac})}class ml{}class aa{}class la extends aa{constructor(){super(...arguments),this.customerActions=[],this.adminActions=[],this.portfolioName=""}}class du extends aa{}class hu extends aa{}class Jl extends aa{constructor(){super(...arguments),this.enable=!0}}class ua extends aa{constructor(){super(...arguments),this.enable=!0}}class Ca extends aa{constructor(){super(...arguments),this.assignees=[]}}class Pa extends aa{constructor(){super(...arguments),this.status="OPEN",this.show=!1}}class _l{}class yl{}class Ql extends aa{}class Kl extends aa{}class ws extends aa{}class vl extends aa{constructor(){super()}}class Bl extends vl{}class So{constructor(e,t){this.router=e,this.portfolioRequestService=t}canActivate(e,t){const h=localStorage.getItem(`${this.portfolioRequestService.requestId}_mts_Stepper`),D=t.url?.split("/");let F="";if(D?.length){const G=D.findIndex(W=>"basket"===W);F=D[G+1]}if(h){if("pristine"===JSON.parse(h).find(ge=>ge.link===F).state)return!1}else{if(this.portfolioRequestService.reVisit)return!0;if("sejam"!==F)return!1}return!0}static#e=this.\u0275fac=function(t){return new(t||So)(i.LFG(q.F0),i.LFG(wr))};static#t=this.\u0275prov=i.Yz7({token:So,factory:So.\u0275fac,providedIn:"root"})}class Ws{constructor(e,t,r){this.userIdentity=e,this.userInfoService=t,this.router=r,this.signInPathSet={customer:"/access/signin",admin:"/access/admin-signin"}}canActivateChild(e,t){return this._canActivate(e)}canActivate(e,t){return this._canActivate(e)}_canActivate(e){var t=this;return(0,ut.Z)(function*(){let r=e,h=t.userIdentity?.get();if(!h){const y=t.userInfoService.getUserIdentity().pipe((0,ii.K)(D=>(t.router.navigateByUrl(t.signInPathSet[Nn.name]).then(()=>{t.userInfoService.clearUser(),window.location.reload()}),(0,kn._)(()=>D))));y&&(h=yield(0,bo.n)(y))}do{const D=r.routeConfig?.data?.claim;if(!h)return!1;if(D){if("string"==typeof D)return h.hasClaim(D);if(D.all)return h.hasAllClaims(D.all);if(D.any)return h.hasAnyClaim(D.any)}r=r?.children[0]}while(r);return!0})()}static#e=this.\u0275fac=function(t){return new(t||Ws)(i.LFG(Y.cq,8),i.LFG(Yn),i.LFG(q.F0))};static#t=this.\u0275prov=i.Yz7({token:Ws,factory:Ws.\u0275fac,providedIn:"root"})}var Is=N(9751),gn=N(6895);const oc=["form"];function Ya(_,e){1&_&&(i.TgZ(0,"label",3)(1,"form",4,5),i._UZ(3,"input",6),i.qZA()())}function Cs(_,e){if(1&_&&(i.TgZ(0,"div",7)(1,"div",8),i._uU(2),i.qZA(),i._UZ(3,"div",9),i.qZA()),2&_){const t=i.oxw();i.xp6(1),i.Udp("margin-left",t.percent),i.xp6(1),i.hij("",t.progress,"%"),i.xp6(1),i.Udp("width",t.percent)}}function da(_,e){1&_&&(i.ynx(0),i._UZ(1,"span",10),i.BQk())}function Da(_,e){1&_&&(i.ynx(0),i._UZ(1,"span",11),i.BQk())}const zs=["*"];class ka{constructor(){this.disabled=!1,this.maxSize=2,this.showProgress=!0,this.extentionSet=["pdf","png","jpg","jpeg"],this.inValidExtention=new i.vpe,this.preView=new i.vpe,this.fileStatus=new i.vpe,this.file=null,this.grabage=new fe.w0,this._progress=0,this.downloadable=!1}emitFiles(e){const t=e&&e.item(0);this.file=t,this._onFileChange()}get percent(){return this.progress+"%"}get finished(){return 100===this.progress}get progress(){return"pending"===this.status?this._progress:0}_onFileChange(){if(this.file){this.size=this.file.size.toString();let e=new FileReader;if(e.readAsDataURL(this.file),this.file.size>1024*this.maxSize*1024)return this.currentForm.controls.fileName.setErrors({maxSize:!0}),void(e={});if(!this.hasAllowExtention())return this.currentForm.controls.fileName.setErrors({extention:!0}),void(e={});e.onload=t=>{e&&this.preView.emit({fileName:this.file?.name,result:t.target.result,size:this.size})},this.uploader&&this.uploadFile()}}uploadFile(){if("function"!=typeof this.uploader)throw Error("No uploader function is set.");if(!(this.file instanceof File))throw Error("No File object is selected to upload.");let e;try{e=this.uploader(this.file,this.uploaderData)}catch{throw Error("upload error.")}if(!(e instanceof Is.y))throw Error("Uploader function should return an Observable.");this.grabage.add(e.subscribe({next:t=>{this.status=t},error:t=>{this._status="error"}}))}set status(e){if(typeof e<"u")switch(e.type){case 0:this._status="pending";break;case 1:this._status="pending",e.loaded&&e.total&&(this._progress=Math.round(e.loaded/e.total*100),this._progress>100&&(this._progress=100));break;case 2:case 3:200!==e.status&&(this._status="error");break;case 4:this._status="registered"}}get status(){return this._status}set size(e){this._size=e}get size(){return this._size}hasAllowExtention(){const e=this.file?.name.substring(this.file.name.lastIndexOf(".")+1).toLowerCase();return!(this.file instanceof File&&!this.extentionSet.includes(e||""))}ngOnDestroy(){this.grabage.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||ka)};static#t=this.\u0275cmp=i.Xpm({type:ka,selectors:[["pfo-upload"]],viewQuery:function(t,r){if(1&t&&i.Gf(oc,5),2&t){let h;i.iGM(h=i.CRH())&&(r.currentForm=h.first)}},hostBindings:function(t,r){1&t&&i.NdJ("change",function(y){return r.emitFiles(y.target.files)})},inputs:{uploader:"uploader",disabled:"disabled",uploaderData:"uploaderData",maxSize:"maxSize",showProgress:"showProgress",extentionSet:"extentionSet"},outputs:{inValidExtention:"inValidExtention",preView:"preView",fileStatus:"fileStatus"},ngContentSelectors:zs,decls:5,vars:4,consts:[["class","position-absolute bottom-0 start-0 h-100 z-index-1 w-90","role","button",4,"ngIf"],["class","bg-progress",4,"ngIf"],[4,"ngIf"],["role","button",1,"position-absolute","bottom-0","start-0","h-100","z-index-1","w-90"],[1,"fileForm"],["form","ngForm"],["type","file","name","fileName","ngModel","",1,"opacity-0","w-25"],[1,"bg-progress"],[1,"num"],[1,"progress-line"],[1,"fa-solid","fa-circle-check","fa-2x","text-success"],[1,"fa-solid","fa-triangle-exclamation","fa-2x","text-danger"]],template:function(t,r){1&t&&(i.F$t(),i.Hsn(0),i.YNc(1,Ya,4,0,"label",0),i.YNc(2,Cs,4,5,"div",1),i.YNc(3,da,2,0,"ng-container",2),i.YNc(4,Da,2,0,"ng-container",2)),2&t&&(i.xp6(1),i.Q6J("ngIf",!r.disabled),i.xp6(1),i.Q6J("ngIf","pending"===r.status&&r.showProgress),i.xp6(1),i.Q6J("ngIf","uploadComplete"===r.status),i.xp6(1),i.Q6J("ngIf","error"===r.status))},dependencies:[gn.O5,de._Y,de.Fj,de.JJ,de.JL,de.On,de.F],styles:["[_nghost-%COMP%]{position:relative;width:100%;display:inline-block}.fileForm[_ngcontent-%COMP%]{margin-top:-1rem}.bg-progress[_ngcontent-%COMP%]{width:12rem;height:14px;border-radius:8px;border:1px solid var(--bs-primary);display:flex;align-items:center;position:relative;margin:1.5rem auto 0;direction:ltr}.bg-progress[_ngcontent-%COMP%]   .progress-line[_ngcontent-%COMP%]{width:50%;height:12px;background:var(--bs-primary);border-radius:8px;transition:width .75s ease-in-out}.bg-progress[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{color:var(--bs-primary);font-family:montserrat;font-size:14px;position:absolute;top:-21px;left:-7px;margin-left:50%}.w-90[_ngcontent-%COMP%]{width:90%}"]})}class Jo{static#e=this.\u0275fac=function(t){return new(t||Jo)};static#t=this.\u0275mod=i.oAB({type:Jo});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.kx]})}var ye=N(8557);function ve(_,e){1&_&&i._UZ(0,"div",14)}const ne=function(_,e,t){return{"bg-primary":_,"step-dotted":e,"bg-success bg-opacity-10":t}},We=function(_,e,t){return{"text-primary":_,"text-secondary text-opacity-50":e,"text-white ":t}},_n=function(_){return{"text-secondary text-opacity-50":_}};function ki(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",7)(2,"div",8),i.NdJ("click",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.onStepClicked(y))}),i.TgZ(3,"div",9)(4,"span",10),i._uU(5),i.qZA()(),i.TgZ(6,"div",11),i.NdJ("click",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.onStepClicked(y))}),i.TgZ(7,"b",12),i._uU(8),i.qZA()()(),i.YNc(9,ve,1,0,"div",13),i.qZA(),i.BQk()}if(2&_){const t=e.$implicit,r=e.last,h=e.index;i.xp6(1),i.Q6J("ngClass",r?"pe-3":""),i.xp6(2),i.Q6J("ngSwitch",t.state)("ngClass",i.kEZ(8,ne,"passed"===t.state,"passed"!==t.state,"dirty"===t.state)),i.xp6(1),i.Q6J("ngClass",i.kEZ(12,We,"dirty"===t.state,"pristine"===t.state,"passed"===t.state)),i.xp6(1),i.Oqu(h+1),i.xp6(2),i.Q6J("ngClass",i.VKq(16,_n,"pristine"===t.state)),i.xp6(1),i.Oqu(t.title),i.xp6(1),i.Q6J("ngIf",!r)}}function Wo(_,e){if(1&_&&(i.TgZ(0,"b"),i._uU(1,"\u0634\u0645\u0627\u0631\u0647 \u062f\u0631\u062e\u0648\u0627\u0633\u062a : "),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&_){const t=i.oxw();i.xp6(3),i.Oqu(t.requestId)}}function Nr(_,e){if(1&_&&(i.TgZ(0,"b"),i._uU(1,"\u0646\u0627\u0645 \u0645\u0634\u062a\u0631\u06cc : "),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&_){const t=i.oxw();i.xp6(3),i.Oqu(t.customerName)}}class Qs{constructor(e){this.router=e,this.structure=[],this.clickedStep=new i.vpe,this.environment=Nn,this.currentEnv=Nn.name}onStepClicked(e){this.clickedStep.emit(e)}back(){let e="";const t="user/sys/portfolio/customer-request",r="user/sys/portfolio/adminstration/request";e=this.requestUid?{customer:`${t}/detail/${this.requestUid}`,admin:`${r}/detail/${this.requestUid}`}[this.currentEnv]:{customer:t,admin:r}[this.currentEnv],this.router.navigateByUrl(e)}static#e=this.\u0275fac=function(t){return new(t||Qs)(i.Y36(q.F0))};static#t=this.\u0275cmp=i.Xpm({type:Qs,selectors:[["pfo-stepper"]],inputs:{structure:"structure",requestId:"requestId",requestUid:"requestUid",customerName:"customerName"},outputs:{clickedStep:"clickedStep"},decls:8,vars:4,consts:[[1,"rounded-2","bg-white","mb-3","pb-4"],[1,"d-flex","py-3","ps-3"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-around","align-items-center","w-100","mt-4"],[4,"ngIf"],[1,"me-3"],[1,"w-auto",3,"showNext","back"],[1,"d-flex","justify-content-center","align-items-center","position-relative",3,"ngClass"],["role","button",1,"",3,"click"],[1,"step-size","rounded-2","d-flex","justify-content-center","align-items-center",3,"ngSwitch","ngClass"],[1,"text-center","text-secondary","text-opacity-50","fw-bold","fs-5",3,"ngClass"],["role","button",1,"d-flex","flex-column","pt-2","position-absolute",3,"click"],[1,"d-none","d-md-block",3,"ngClass"],["class","line",4,"ngIf"],[1,"line"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,ki,10,18,"ng-container",2),i.TgZ(3,"div",3),i.YNc(4,Wo,4,1,"b",4),i.YNc(5,Nr,4,1,"b",4),i.qZA()(),i.TgZ(6,"div",5)(7,"mts-next-back-btns",6),i.NdJ("back",function(){return r.back()}),i.qZA()()()),2&t&&(i.xp6(2),i.Q6J("ngForOf",r.structure),i.xp6(2),i.Q6J("ngIf","admin"===r.environment.name),i.xp6(1),i.Q6J("ngIf","undefined"!==r.customerName&&"admin"===r.environment.name),i.xp6(2),i.Q6J("showNext",!1))},dependencies:[gn.mk,gn.sg,gn.O5,gn.RF,ye.J],styles:[".step-size[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.line[_ngcontent-%COMP%]{height:1px;width:6rem;border:1px dotted var(--bs-success)}.step-dotted[_ngcontent-%COMP%]{border:1px dotted var(--bs-primary)}@media (max-width: 768px){.step-size[_ngcontent-%COMP%]{width:2rem;height:2rem}.line[_ngcontent-%COMP%]{height:1px;width:2rem;border:1px dotted var(--bs-success)}}"]})}class js{static#e=this.\u0275fac=function(t){return new(t||js)};static#t=this.\u0275mod=i.oAB({type:js});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.P7]})}const Xl=function(_){return{color:_}};function Un(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",1),i.NdJ("click",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.onClicked())}),i.TgZ(1,"div",2),i._UZ(2,"span",3),i.qZA(),i.TgZ(3,"div",4)(4,"b",5),i._uU(5),i.qZA(),i.TgZ(6,"small",6),i._uU(7),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngStyle",i.VKq(3,Xl,"passed"===t.item.state?"#099885":"#e4e6ef")),i.xp6(3),i.Oqu(t.item.title),i.xp6(2),i.Oqu(t.item.subTitle)}}class vr{constructor(){this.link=new i.vpe}onClicked(){this.link.emit(this.item.link)}static#e=this.\u0275fac=function(t){return new(t||vr)};static#t=this.\u0275cmp=i.Xpm({type:vr,selectors:[["pfo-headline-card"]],inputs:{item:"item"},outputs:{link:"link"},decls:1,vars:1,consts:[["class","row","role","button",3,"click",4,"ngIf"],["role","button",1,"row",3,"click"],[1,"col-2","d-flex","align-items-center","justify-content-end"],[1,"fa-solid","fa-file-lines","fa-xl",3,"ngStyle"],[1,"col-10","d-flex","flex-column","justify-content-start","align-items-start","pt-2","pb-1"],[1,"fs-6"],[1,"text-secondary","text-opacity-50"]],template:function(t,r){1&t&&i.YNc(0,Un,8,5,"div",0),2&t&&i.Q6J("ngIf",r.item)},dependencies:[gn.O5,gn.PC]})}class ku{static#e=this.\u0275fac=function(t){return new(t||ku)};static#t=this.\u0275mod=i.oAB({type:ku});static#n=this.\u0275inj=i.cJS({imports:[gn.ez]})}var Ra=N(1366);class fu{constructor(){this.docType="pdf",this.docName="",this.docTitle="",this.boxWith="14rem",this._docSize="",this.iconSet={pdf:"fa-file-pdf text-danger",docx:"fa-file-lines text-info",xlxs:"fa-file-word text-primary"},this.blobTypeSet={pdf:"application/pdf",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlxs:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}get docSize(){return this._docSize}set docSize(e){this._docSize=function Ro(_){const e=["Bytes","KB","MB","GB","TB"];if(0===_)return"n/a";const t=parseInt(Math.floor(Math.log(_)/Math.log(1024)).toString());return 0===t?`${_} ${e[t]}`:`${(_/Math.pow(1024,t)).toFixed(1)} ${e[t]}`}(e)}download(){var e=this;return(0,ut.Z)(function*(){if(e.downloader&&e.fileId){const t=e.downloader(e.fileId);if(t&&e.docType){const r=yield(0,bo.n)(t),h=new Blob([r],{type:e.blobTypeSet[e.docType]}),y=URL.createObjectURL(h),D=document.createElement("a");D.href=y,D.download=e.docName??`example.${e.blobTypeSet[e.docType]}`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(y)}}})()}static#e=this.\u0275fac=function(t){return new(t||fu)};static#t=this.\u0275cmp=i.Xpm({type:fu,selectors:[["pfo-document-box"]],inputs:{docType:"docType",docName:"docName",docTitle:"docTitle",fileId:"fileId",downloader:"downloader",disabled:"disabled",boxWith:"boxWith",docSize:"docSize"},decls:14,vars:6,consts:[[1,"card","shadow"],["dir","ltr",1,"py-3","px-3","bg-secondary","bg-opacity-25","text-dark","rounded-top"],[1,"fa-duotone","fa-file-doc","fa-xl",3,"ngClass"],[1,"pe-2"],[1,"card-body","d-flex","flex-column","justify-content-center","align-items-center","position-relative"],[1,"pb-2","align-self-start"],[1,"card-text","align-self-start"],[1,"fa-regular","fa-bookmark","pe-2"],["dir","ltr"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"span",2),i.TgZ(3,"small",3),i._uU(4),i.qZA()(),i.TgZ(5,"div",4)(6,"span",5),i._uU(7),i.qZA(),i.TgZ(8,"p",6),i._UZ(9,"span",7),i.TgZ(10,"span",8),i._uU(11),i.qZA()(),i.TgZ(12,"button",9),i.NdJ("click",function(){return r.download()}),i._uU(13,"\u062f\u0627\u0646\u0644\u0640\u0640\u0640\u0648\u062f"),i.qZA()()()),2&t&&(i.Udp("width",r.boxWith),i.xp6(2),i.Q6J("ngClass",r.iconSet[r.docType]),i.xp6(2),i.Oqu(r.docName),i.xp6(3),i.Oqu(r.docTitle),i.xp6(4),i.Oqu(r.docSize))},dependencies:[gn.mk],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:0!important}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem .5rem!important}.downloadBtn[_ngcontent-%COMP%]{width:8rem;margin-bottom:3px}"]})}function eu(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"span",9)(1,"pfo-upload",10),i.NdJ("preView",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.showPreView(h))}),i._UZ(2,"span",11),i.qZA()()}if(2&_){const t=i.oxw();i.xp6(1),i.Q6J("uploader",t.uploader)("uploaderData",t.uploaderData)("disabled",t.disabled)("extentionSet",t.extentionSet)}}function ha(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"i",12),i.NdJ("click",function(){i.CHM(t);const h=i.oxw(),y=i.MAs(12);return i.KtG(h.showModal(y))}),i.qZA()}}function nl(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"i",13),i.NdJ("click",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.remove())}),i.qZA()}}function pa(_,e){if(1&_&&(i.TgZ(0,"a",14),i._UZ(1,"i",15),i.qZA()),2&_){const t=i.oxw();i.Q6J("href",t.thumbnailUrl,i.LSH)("download",t.fileName)}}function Fa(_,e){1&_&&(i.TgZ(0,"small"),i._uU(1,"\u0641\u0631\u0645\u062a \u0641\u0627\u06cc\u0644 \u0645\u062c\u0627\u0632 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f!"),i.qZA())}function tu(_,e){1&_&&(i.TgZ(0,"small"),i._uU(1,"\u062d\u062c\u0645 \u0641\u0627\u06cc\u0644 \u0645\u062c\u0627\u0632 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f!"),i.qZA())}function mu(_,e){1&_&&(i.TgZ(0,"span",23),i._uU(1,"*"),i.qZA())}const Os=function(_){return{"pb-2":_}};function Na(_,e){if(1&_&&(i.TgZ(0,"span",24),i._uU(1),i.qZA()),2&_){const t=i.oxw(2);i.Q6J("ngClass",i.VKq(2,Os,!t.registered)),i.xp6(1),i.Oqu(t.title)}}function Ru(_,e){1&_&&(i.TgZ(0,"small",25),i._uU(1,"\u062d\u062f\u0627\u06a9\u062b\u0631 \u062d\u062c\u0645 \u0645\u0648\u0631\u062f \u0642\u0628\u0648\u0644: 2MB"),i.qZA())}function bl(_,e){if(1&_&&(i.TgZ(0,"small",26),i._uU(1),i.qZA()),2&_){const t=i.oxw(2);i.xp6(1),i.hij("\u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc \u0645\u0648\u0631\u062f \u0642\u0628\u0648\u0644: ",t.allowedExtension,"")}}function fa(_,e){if(1&_&&(i.ynx(0),i.YNc(1,mu,2,0,"span",16),i.TgZ(2,"div",17),i._UZ(3,"img",18),i.qZA(),i.TgZ(4,"div",19),i.YNc(5,Na,2,4,"span",20),i.YNc(6,Ru,2,0,"small",21),i.YNc(7,bl,2,1,"small",22),i.qZA(),i.BQk()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("ngIf",t.required),i.xp6(1),i.Q6J("ngClass",t.thumbnailUrl!==t.defaultImg&&t.isImage?"img-content":"default-img"),i.xp6(1),i.Q6J("src",t.thumbnailUrl,i.LSH),i.xp6(2),i.Q6J("ngIf",t.title),i.xp6(1),i.Q6J("ngIf",t.uploader&&!(null!=t.uploadComp&&t.uploadComp.status)&&!t.docSize),i.xp6(1),i.Q6J("ngIf",t.uploader&&!(null!=t.uploadComp&&t.uploadComp.status)&&!t.docSize)}}function qa(_,e){if(1&_&&i._UZ(0,"pfo-document-box",28),2&_){const t=i.oxw(2);let r;i.Q6J("docTitle",t.title)("docType",t.extension)("docName",null!==(r=t.fileName)&&void 0!==r?r:"")("docSize",t.docSize)("fileId",t.fileId)("downloader",t.downloader)}}function gu(_,e){if(1&_&&(i.ynx(0),i.YNc(1,qa,1,6,"pfo-document-box",27),i.BQk()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("ngIf",!t.isImage)}}function yc(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",29)(1,"button",30),i.NdJ("click",function(){const y=i.CHM(t).dismiss;return i.KtG(y("Cross click"))}),i.qZA()(),i.TgZ(2,"div",31),i._UZ(3,"img",32),i.qZA(),i.TgZ(4,"div",33)(5,"mts-next-back-btns",34),i.NdJ("next",function(){const y=i.CHM(t).dismiss;return i.KtG(y("Cross click"))})("back",function(){const y=i.CHM(t).dismiss;return i.KtG(y("Cross click"))}),i.qZA()()}if(2&_){const t=i.oxw();i.xp6(3),i.Q6J("src",t.thumbnailUrl,i.LSH),i.xp6(2),i.Q6J("showNext",!1)("btnsCenter",!0)}}class Ts{constructor(e,t,r){this.ngbModal=e,this.cdr=t,this.sanitizer=r,this.title="",this.disabled=!1,this.isAllowedDownload=!0,this.required=!0,this.extentionSet=["pdf","png","jpg","jpeg"],this.maxSize=2,this._docSize="",this._extension="png",this.inValidExtention=new i.vpe,this.removeCalled=new i.vpe,this.defaultImg="/assets/images/basket/upload.svg",this.registered=!1}get extension(){return this._extension}set extension(e){e&&(this._extension=e)}ngOnInit(){this.setDefaultImg()}ngOnChanges(e){e.docSize&&e.docSize.currentValue&&setTimeout(()=>{this.isImage&&this.prepareImagePreview()},0)}showPreView(e){this.fileName=e?.fileName,this.docSize=Number(e?.size);const t=e?.result,r=this.fileName?.substring(this.fileName?.lastIndexOf(".")+1).toLowerCase();this.thumbnailUrl=this.defaultImg,r&&(this.extension=r,this.isImage&&t&&(this.thumbnailUrl=t,this.registered=!0))}showModal(e){this.ngbModal.open(e,{size:"lg",centered:!0})}remove(){this.removeCalled.emit(!0),this.reset()}get isImage(){return!(!this.extension||!["png","jpg","jpeg"].includes(this.extension))}prepareImagePreview(){var e=this;return(0,ut.Z)(function*(){if(e.downloader&&e.fileId&&e.docSize){const t=e.downloader(e.fileId);if(t){const r=yield(0,bo.n)(t),h=e.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r));h&&(e.thumbnailUrl=h,e.registered=!0,e.uploadComp&&(e.uploadComp._status="registered"))}}else e.registered=!1,e.uploadComp&&(e.uploadComp._status="",e.setDefaultImg())})()}setDefaultImg(){this.thumbnailUrl||(this.thumbnailUrl=this.defaultImg)}reset(){this.uploadComp.currentForm.reset(),this.uploadComp._status="",this.docSize=0,this.fileName="",this.fileId="",this.extension="png",this.thumbnailUrl="",this.registered=!1,this.disabled=!1,this.setDefaultImg()}get allowedExtension(){return this.extentionSet?.toString()?.toUpperCase()}get field(){return this.uploadComp?.currentForm?.controls.fileName}static#e=this.\u0275fac=function(t){return new(t||Ts)(i.Y36(Ra.FF),i.Y36(i.sBO),i.Y36(Ui.H7))};static#t=this.\u0275cmp=i.Xpm({type:Ts,selectors:[["pfo-upload-document"]],viewQuery:function(t,r){if(1&t&&i.Gf(ka,5),2&t){let h;i.iGM(h=i.CRH())&&(r.uploadComp=h.first)}},inputs:{title:"title",uploader:"uploader",uploaderData:"uploaderData",disabled:"disabled",docSize:"docSize",fileName:"fileName",fileId:"fileId",isAllowedDownload:"isAllowedDownload",required:"required",downloader:"downloader",extentionSet:"extentionSet",maxSize:"maxSize",extension:"extension"},outputs:{inValidExtention:"inValidExtention",removeCalled:"removeCalled"},features:[i.TTD],decls:13,vars:10,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","rounded-2","border-secondary","border-opacity-10","border-dotted","position-relative","bg-white"],[1,"d-flex","flex-column","position-absolute",3,"ngClass"],["class","p-2 z-index-1",4,"ngIf"],["class","fa fa-eye text-warning p-2 z-index-1","role","button",3,"click",4,"ngIf"],["class","fa fa-trash text-danger p-2 z-index-1","role","button",3,"click",4,"ngIf"],["class","p-2",3,"href","download",4,"ngIf"],[1,"text-danger","position-absolute","top-0","z-1",3,"ngClass"],[4,"ngIf"],["content",""],[1,"p-2","z-index-1"],[3,"uploader","uploaderData","disabled","extentionSet","preView"],["role","button",1,"fa-solid","fa-upload"],["role","button",1,"fa","fa-eye","text-warning","p-2","z-index-1",3,"click"],["role","button",1,"fa","fa-trash","text-danger","p-2","z-index-1",3,"click"],[1,"p-2",3,"href","download"],[1,"fa","fa-download"],["class","text-danger position-absolute top-0 start-0 p-2",4,"ngIf"],[1,"d-flex","justify-content-center","p-2",3,"ngClass"],["alt","",1,"img-fluid",3,"src"],[1,"d-flex","flex-column","justify-content-center","align-items-center","pb-2"],["class","text-secondary",3,"ngClass",4,"ngIf"],["class","text-secondary text-opacity-50",4,"ngIf"],["class","text-secondary text-opacity-50 pt-1",4,"ngIf"],[1,"text-danger","position-absolute","top-0","start-0","p-2"],[1,"text-secondary",3,"ngClass"],[1,"text-secondary","text-opacity-50"],[1,"text-secondary","text-opacity-50","pt-1"],["boxWith","100%",3,"docTitle","docType","docName","docSize","fileId","downloader",4,"ngIf"],["boxWith","100%",3,"docTitle","docType","docName","docSize","fileId","downloader"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","d-flex","justify-content-center"],["height","400",3,"src"],[1,"modal-footer"],[3,"showNext","btnsCenter","next","back"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,eu,3,4,"span",2),i.YNc(3,ha,1,0,"i",3),i.YNc(4,nl,1,0,"i",4),i.YNc(5,pa,2,2,"a",5),i.qZA(),i.TgZ(6,"div",6),i.YNc(7,Fa,2,0,"small",7),i.YNc(8,tu,2,0,"small",7),i.qZA(),i.YNc(9,fa,8,6,"ng-container",7),i.YNc(10,gu,2,1,"ng-container",7),i.qZA(),i.YNc(11,yc,6,3,"ng-template",null,8,i.W1O)),2&t&&(i.xp6(1),i.Q6J("ngClass",r.isImage?"action-btns-image":"action-btns-file"),i.xp6(1),i.Q6J("ngIf",r.uploader&&!r.disabled),i.xp6(1),i.Q6J("ngIf",r.uploader&&"registered"===(null==r.uploadComp?null:r.uploadComp.status)&&r.isImage||r.registered&&r.isImage),i.xp6(1),i.Q6J("ngIf",r.uploader&&"registered"===(null==r.uploadComp?null:r.uploadComp.status)&&!r.disabled||!r.isImage&&!r.disabled),i.xp6(1),i.Q6J("ngIf",r.isAllowedDownload&&r.isImage&&r.uploader&&"registered"===(null==r.uploadComp?null:r.uploadComp.status)||r.isAllowedDownload&&r.isImage&&r.registered),i.xp6(1),i.Q6J("ngClass",r.isImage?"mt-2":"mt-5"),i.xp6(1),i.Q6J("ngIf",null==r.field||null==r.field.errors?null:r.field.errors.extention),i.xp6(1),i.Q6J("ngIf",null==r.field||null==r.field.errors?null:r.field.errors.maxSize),i.xp6(1),i.Q6J("ngIf",r.isImage),i.xp6(1),i.Q6J("ngIf",!r.isImage))},dependencies:[gn.mk,gn.O5,ye.J,ka,fu],styles:["[_nghost-%COMP%]{width:100%}.img-content[_ngcontent-%COMP%]{height:160px;width:80%}.default-img[_ngcontent-%COMP%]{height:110px}.action-btns-image[_ngcontent-%COMP%]{left:0;top:0}.action-btns-file[_ngcontent-%COMP%]{left:0;top:3.5rem}"]})}class ts{static#e=this.\u0275fac=function(t){return new(t||ts)};static#t=this.\u0275mod=i.oAB({type:ts});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,Jo]})}class ma{static#e=this.\u0275fac=function(t){return new(t||ma)};static#t=this.\u0275mod=i.oAB({type:ma});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,Jo,ts]})}var Eo=N(8008),dr=N(5795);function _u(_,e){if(1&_&&(i.TgZ(0,"option",10),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.value),i.xp6(1),i.hij(" ",t.title," ")}}class La{constructor(e,t){this.service=e,this.enumService=t,this.person=new ml,this.personTypes$=this.enumService.getPersonTypes(),this.response=new i.vpe,this.btnTitle="\u062c\u0633\u062a\u062c\u0648",this.grabage=new fe.w0}search(){this.grabage.add(this.service.searchBy(this.person).subscribe(e=>{e&&e.length&&this.response.emit(e[0])}))}ngOnDestroy(){this.grabage.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||La)(i.Y36(Gn),i.Y36(Hi))};static#t=this.\u0275cmp=i.Xpm({type:La,selectors:[["pfo-search-person"]],outputs:{response:"response"},decls:14,vars:9,consts:[["form","ngForm"],[1,"row","pb-4"],[1,"col-md-4"],["label","\u0646\u0648\u0639 \u0634\u062e\u0635"],["name","type","required","",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","\u06a9\u062f\u0645\u0644\u06cc/\u0634\u0646\u0627\u0633\u0647 \u0645\u0644\u06cc"],["type","text","name","ssn","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-4","mt-4"],[3,"nextTitle","withNextArrow","showBack","nextDisabled","next"],[3,"value"]],template:function(t,r){if(1&t&&(i.TgZ(0,"mts-card")(1,"form",null,0)(3,"div",1)(4,"div",2)(5,"mts-form-field",3)(6,"select",4),i.NdJ("ngModelChange",function(y){return r.person.type=y}),i.YNc(7,_u,2,2,"option",5),i.ALo(8,"async"),i.qZA()()(),i.TgZ(9,"div",2)(10,"mts-form-field",6)(11,"input",7),i.NdJ("ngModelChange",function(y){return r.person.ssn=y}),i.qZA()()(),i.TgZ(12,"div",8)(13,"mts-next-back-btns",9),i.NdJ("next",function(){return r.search()}),i.qZA()()()()()),2&t){const h=i.MAs(2);i.xp6(6),i.Q6J("ngModel",r.person.type),i.xp6(1),i.Q6J("ngForOf",i.lcZ(8,7,r.personTypes$)),i.xp6(4),i.Q6J("ngModel",r.person.ssn),i.xp6(2),i.Q6J("nextTitle",r.btnTitle)("withNextArrow",!1)("showBack",!1)("nextDisabled",!h.valid)}},dependencies:[gn.sg,de._Y,de.YN,de.Kr,de.Fj,de.EJ,de.JJ,de.JL,de.Q7,de.On,de.F,Eo.h,ye.J,dr.A,gn.Ov]})}class Ja{static#e=this.\u0275fac=function(t){return new(t||Ja)};static#t=this.\u0275mod=i.oAB({type:Ja});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.kx,Y.v,Y.P7,Y.dT]})}function Cr(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"a",3),i.NdJ("click",function(){i.CHM(t);const h=i.oxw().$implicit,y=i.oxw();return i.KtG(y.onClick(h))}),i.TgZ(1,"button",4)(2,"small",5),i._uU(3),i.qZA()()()}if(2&_){const t=i.oxw().$implicit;let r;i.xp6(1),i.Q6J("ngClass",t.class)("disabled",null!==(r=t.disableCondition)&&void 0!==r&&r),i.xp6(2),i.Oqu(t.title)}}function co(_,e){if(1&_&&(i.ynx(0),i.YNc(1,Cr,4,3,"a",2),i.BQk()),2&_){const t=e.$implicit;let r;i.xp6(1),i.Q6J("ngIf",null===(r=t.condition)||void 0===r||r)}}class ps{constructor(){this.btnClicked=new i.vpe,this.btnClassSet={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",danger:"btn-danger",warning:"btn-warning",info:"btn-info",light:"bg-primary bg-opacity-10 text-primary"}}setBtnStyle(){this.config=this.config?.map(e=>(e.class=e.type?this.btnClassSet[e.type]:"btn-primary",e))}ngOnChanges(e){e.config&&this.setBtnStyle()}onClick(e){this.btnClicked.emit(e?.value)}static#e=this.\u0275fac=function(t){return new(t||ps)};static#t=this.\u0275cmp=i.Xpm({type:ps,selectors:[["pfo-btn-group-box"]],inputs:{config:"config"},outputs:{btnClicked:"btnClicked"},features:[i.TTD],decls:2,vars:1,consts:[[1,"d-flex","flex-row-reverse","flex-wrap","align-items-center","w-100"],[4,"ngFor","ngForOf"],["class","mx-2 mt-2",3,"click",4,"ngIf"],[1,"mx-2","mt-2",3,"click"],["type","button",1,"btn","py-2",3,"ngClass","disabled"],[1,""]],template:function(t,r){1&t&&(i.TgZ(0,"div",0),i.YNc(1,co,2,1,"ng-container",1),i.qZA()),2&t&&(i.xp6(1),i.Q6J("ngForOf",r.config))},dependencies:[gn.mk,gn.sg,gn.O5]})}class ga{static#e=this.\u0275fac=function(t){return new(t||ga)};static#t=this.\u0275mod=i.oAB({type:ga});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,q.Bz]})}function Wa(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"mts-card",1)(1,"div",2)(2,"mts-form-field",3)(3,"input",4),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.comment.title=h)}),i.qZA()()(),i.TgZ(4,"div",5)(5,"mts-form-field",6)(6,"textarea",7),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.comment.text=h)}),i.qZA()()(),i.TgZ(7,"mts-next-back-btns",8),i.NdJ("next",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.save())})("back",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.back())}),i.qZA()()}if(2&_){const t=i.oxw();i.xp6(3),i.Q6J("ngModel",t.comment.title),i.xp6(3),i.Q6J("ngModel",t.comment.text),i.xp6(1),i.Q6J("nextTitle",t.nextTitle)("withBackArrow",!1)}}function Vu(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"mts-next-back-btns",20),i.NdJ("next",function(){i.CHM(t);const h=i.oxw(2).$implicit,y=i.oxw(2);return i.KtG(y.replayComment(h))}),i.qZA()}2&_&&i.Q6J("nextTitle","\u062b\u0628\u062a \u067e\u06cc\u0627\u0645")("withBackArrow",!1)}function Qc(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",16)(1,"h6",10),i._uU(2),i.qZA(),i.TgZ(3,"div"),i._uU(4," \u067e\u0627\u0633\u062e : "),i.TgZ(5,"textarea",17),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw().$implicit;return i.KtG(y.replyText=h)}),i.qZA(),i.TgZ(6,"div",18),i.YNc(7,Vu,1,2,"mts-next-back-btns",19),i.qZA()()()}if(2&_){const t=i.oxw().$implicit,r=i.oxw(2);i.xp6(2),i.hij("\u0645\u062a\u0646 \u062a\u0648\u0636\u06cc\u062d\u0627\u062a : ",t.text,""),i.xp6(3),i.Q6J("readOnly",r.userIdentitySsn===t.reporterUserSsn)("disabled","OPEN"!==t.status)("ngModel",t.replyText),i.xp6(2),i.Q6J("ngIf","OPEN"===t.status&&r.userIdentitySsn!==t.reporterUserSsn)}}function _a(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",10)(1,"div",11)(2,"h6",12),i._uU(3),i.qZA(),i.TgZ(4,"div")(5,"button",13),i.NdJ("click",function(){const y=i.CHM(t).$implicit;return i.KtG(y.show=!y.show)}),i._UZ(6,"i",14),i.qZA()()(),i.YNc(7,Qc,8,5,"div",15),i._UZ(8,"hr"),i.qZA()}if(2&_){const t=e.$implicit;i.xp6(3),i.hij("\u0639\u0646\u0648\u0627\u0646 : ",t.title,""),i.xp6(3),i.Q6J("ngClass",t.show?"fa fa-arrow-up":"fa fa-arrow-down"),i.xp6(1),i.Q6J("ngIf",t.show)}}function Ul(_,e){if(1&_&&(i.TgZ(0,"mts-card",1),i.YNc(1,_a,9,3,"div",9),i.qZA()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.comments)}}class no{constructor(e,t,r,h){this.activatedRoute=e,this.toast=t,this.userIdentity=r,this.requestService=h,this.mode="create",this.comment=new Pa,this.request=new Ca,this.comments=[],this.nextTitle="\u062b\u0628\u062a \u0648 \u0627\u0631\u0633\u0627\u0644 ",this.userIdentitySsn="",this.grabage=new fe.w0,this.requestId=e.snapshot.paramMap.get("id")}ngOnInit(){this.userIdentitySsn=this.userIdentity.get()?.ssn??"",this.setPageState(),this.getCommets(),this.getRequestById()}getCommets(){this.requestId&&this.requestService.getCommentsBy(this.id,"id,desc").subscribe(e=>{this.comments=e.content,this.comments.length>0&&this.comments.forEach((t,r)=>{if(null!=t.parentCommentId){const h=this.comments.findIndex(y=>y.id==t.parentCommentId);this.comments[h].replyId=t.id,this.comments[h].replyText=t.text,this.comments[h].replyTitle=t.title,this.comments[h].status="DONE",this.comments.splice(r,1)}})})}getRequestById(){this.requestId&&this.grabage.add(this.requestService.getById(this.requestId,this.requestType).subscribe(e=>{this.request=e.data,this.request.id=e.id,this.comment.assigneeUserSsn=this.request.customerSsn,this.comment.reporterUserSsn=this.userIdentity.get()?.ssn??""}))}replayComment(e){const t=new Pa;t.parentCommentId=e.id,t.title=`\u067e\u0627\u0633\u062e \u0628\u0647 ${e.replyTitle}`,t.text=e.replyText,t.assigneeUserSsn=this.request.customerSsn,t.reporterUserSsn=this.userIdentity.get()?.ssn??"",this.requestService.saveComment(this.id,t).subscribe(()=>{this.getCommets(),this.comment.title="",this.comment.text="",this.toast.show("\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.")})}save(){this.grabage.add(this.requestService.saveComment(this.id,this.comment).subscribe(()=>{this.getCommets(),this.comment.title="",this.comment.text="",this.toast.show("\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f."),this.back()}))}back(){window.history.go(-1)}changeRequestStage(){const e=new Ca;return e.stage="RETURNED",this.requestService.update({requestId:this.requestId,action:this.action,type:this.requestType,dto:e})}setPageState(){const e=history.state;e&&e.mode&&(this.mode=e.mode)}get requestType(){return this.requestService.requestType}get action(){return this.requestService.action}static#e=this.\u0275fac=function(t){return new(t||no)(i.Y36(q.gz),i.Y36(Y.kl),i.Y36(Y.cq),i.Y36(Zr))};static#t=this.\u0275cmp=i.Xpm({type:no,selectors:[["pfo-comment-detail"]],inputs:{mode:"mode",id:"id"},decls:2,vars:2,consts:[["class","bg-primary bg-opacity-10 mt-4",4,"ngIf"],[1,"bg-primary","bg-opacity-10","mt-4"],[1,"col-md-4"],["label","\u0639\u0646\u0648\u0627\u0646"],["type","text","name","title",1,"form-control","bg-light",3,"ngModel","ngModelChange"],[1,"col-md-12","mb-4"],["label","\u0645\u062a\u0646"],["name","text","type","text","rows","4",1,"form-control","bg-light",3,"ngModel","ngModelChange"],[3,"nextTitle","withBackArrow","next","back"],["class","mt-1",4,"ngFor","ngForOf"],[1,"mt-1"],[1,"card-header","d-flex","justify-content-between","align-item-start"],[1,""],[1,"btn","btn-sm",3,"click"],[3,"ngClass"],["class","card-body",4,"ngIf"],[1,"card-body"],["name","text","type","text","rows","2",1,"form-control","bg-light","m-1",3,"readOnly","disabled","ngModel","ngModelChange"],[1,"mt-3"],[3,"nextTitle","withBackArrow","next",4,"ngIf"],[3,"nextTitle","withBackArrow","next"]],template:function(t,r){1&t&&(i.YNc(0,Wa,8,4,"mts-card",0),i.YNc(1,Ul,2,1,"mts-card",0)),2&t&&(i.Q6J("ngIf","create"===r.mode),i.xp6(1),i.Q6J("ngIf",r.comments.length>0))},dependencies:[gn.mk,gn.sg,gn.O5,de.Fj,de.JJ,de.On,dr.A,Eo.h,ye.J],styles:[".card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.8rem 1.5rem}"]})}class Qa{static#e=this.\u0275fac=function(t){return new(t||Qa)};static#t=this.\u0275mod=i.oAB({type:Qa});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK]})}function Qo(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",37)(1,"mts-form-field",38)(2,"input",39),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw().$implicit;return i.KtG(y.comment=h)}),i.qZA()()()}if(2&_){const t=i.oxw(),r=t.index,h=t.$implicit,y=i.oxw(2);i.xp6(2),i.MGl("name","riskComment",r,""),i.Q6J("ngModel",h.comment)("disabled",y.isDisabledAssessment)}}function os(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",12)(1,"p",28),i._uU(2),i.qZA(),i.TgZ(3,"div",29)(4,"mts-form-field",30)(5,"input",31),i.NdJ("ngModelChange",function(h){const D=i.CHM(t).$implicit;return i.KtG(D.minimumScore=h)}),i.qZA()()(),i.TgZ(6,"div",29)(7,"mts-form-field",32)(8,"input",31),i.NdJ("ngModelChange",function(h){const D=i.CHM(t).$implicit;return i.KtG(D.maximumScore=h)}),i.qZA()()(),i.TgZ(9,"div",29)(10,"mts-form-field",33)(11,"pfo-input-range",34),i.NdJ("ngModelChange",function(h){const D=i.CHM(t).$implicit;return i.KtG(D.score=h)}),i.qZA()()(),i.YNc(12,Qo,3,3,"div",35),i._UZ(13,"hr",36),i.qZA()}if(2&_){const t=e.$implicit,r=e.index,h=i.oxw(2);i.xp6(2),i.AsE("",r+1," - ",t.riskTitle,""),i.xp6(3),i.MGl("name","minimumScore",r,""),i.Q6J("ngModel",t.minimumScore),i.xp6(3),i.MGl("name","maximumScore",r,""),i.Q6J("ngModel",t.maximumScore),i.xp6(3),i.MGl("name","riskValue",r,""),i.Q6J("max",t.maximumScore)("min",t.minimumScore)("required",!0)("disabled",h.isDisabledAssessment||0===r)("ngModel",t.score),i.xp6(1),i.Q6J("ngIf",0!==r)}}function te(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",21)(1,"mts-form-field",40)(2,"textarea",41),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2);return i.KtG(y.partialQuizResult.customerNotes=h)}),i.qZA()()()}if(2&_){const t=i.oxw(2);i.xp6(2),i.Q6J("ngModel",t.partialQuizResult.customerNotes)("disabled",t.isDisabledCustomerNotes)}}const Se=function(){return{standalone:!0}};function X(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"pfo-panel",4)(1,"div",5)(2,"div",6)(3,"mts-form-field",7)(4,"input",8),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.riskLevelTypeKeyVal[null==y.quizResult?null:y.quizResult.customerAnswersRiskStage]=h)}),i.qZA()()(),i.TgZ(5,"form",null,9),i.YNc(7,os,14,13,"div",10),i.qZA()(),i.TgZ(8,"div",5)(9,"form",null,11)(11,"div",12)(12,"div",6)(13,"mts-form-field",13)(14,"div",14)(15,"input",15),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.partialQuizResult.bankMutualFundPercent=h)}),i.qZA(),i.TgZ(16,"span",16),i._uU(17,"%"),i.qZA()()()(),i.TgZ(18,"div",6)(19,"mts-form-field",17)(20,"div",14)(21,"input",18),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.partialQuizResult.derivativeSecuritiesPercent=h)}),i.qZA(),i.TgZ(22,"span",16),i._uU(23,"%"),i.qZA()()()(),i.TgZ(24,"div",6)(25,"mts-form-field",19)(26,"div",14)(27,"input",20),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.partialQuizResult.boursePercent=h)}),i.qZA(),i.TgZ(28,"span",16),i._uU(29,"%"),i.qZA()()()(),i.TgZ(30,"div",21)(31,"mts-form-field",22)(32,"textarea",23),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.partialQuizResult.portfolioPattern=h)}),i.qZA()()(),i.TgZ(33,"div",21)(34,"mts-form-field",24)(35,"textarea",25),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.partialQuizResult.managerNotes=h)}),i.qZA()()(),i.YNc(36,te,3,2,"div",26),i.TgZ(37,"mts-next-back-btns",27),i.NdJ("next",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.updateQuizResult())})("back",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.goBack())}),i.qZA()()()()()}if(2&_){const t=i.MAs(6),r=i.MAs(10),h=i.oxw();i.Q6J("active",h.showAssessment),i.xp6(4),i.Q6J("ngModel",h.riskLevelTypeKeyVal[null==h.quizResult?null:h.quizResult.customerAnswersRiskStage])("ngModelOptions",i.DdM(24,Se)),i.xp6(3),i.Q6J("ngForOf",h.riskAssessmentParameters),i.xp6(8),i.Q6J("min",0)("max",100)("ngModel",h.partialQuizResult.bankMutualFundPercent)("disabled",h.isDisabledAssessment),i.xp6(6),i.Q6J("min",0)("max",100)("ngModel",h.partialQuizResult.derivativeSecuritiesPercent)("disabled",h.isDisabledAssessment),i.xp6(6),i.Q6J("min",0)("max",100)("ngModel",h.partialQuizResult.boursePercent)("disabled",h.isDisabledAssessment),i.xp6(5),i.Q6J("ngModel",h.partialQuizResult.portfolioPattern)("disabled",h.isDisabledAssessment),i.xp6(3),i.Q6J("ngModel",h.partialQuizResult.managerNotes)("disabled",h.isDisabledAssessment),i.xp6(1),i.Q6J("ngIf",h.showCustomerNotes),i.xp6(1),i.Q6J("nextTitle","\u062b\u0628\u062a \u0648 \u0627\u062f\u0627\u0645\u0647")("nextDisabled",t.invalid||r.invalid)("showNext",h.showNext)}}class Ue{constructor(e,t,r,h){this.portfolioRequestService=e,this.location=t,this.toast=r,this.enumService=h,this.riskAssessmentRisult=new du,this.partialQuizResult=new hu,this.showQuestions=!1,this.showAssessment=!0,this.showAssessmentSection=!0,this.showCustomerNotes=!1,this.isDisabledAssessment=!1,this.isQuestionDisabled=!0,this.isDisabledCustomerNotes=!0,this.showNext=!0,this.riskLevelTypeKeyVal={},this.riskLevelScoreKeyVal={},this.grabage=new fe.w0}ngOnInit(){this.getRiskLevelTypes(),this.getQuizResult()}getRiskAssessmentParameters(){this.portfolioRequestService.getRiskAssessmentParameters().subscribe(e=>{if(this.quizResult&&this.quizResult.managerScoreJson){const t=JSON.parse(this.quizResult.managerScoreJson);e.map(r=>{const h=t.find(y=>y.id===r.id);return h&&(r.score=h.score,r.comment=h.comment),r})}e[0].score=this.riskLevelScoreKeyVal[this.quizResult?.customerAnswersRiskStage],this.riskAssessmentParameters=e,this.portfolioRequestService.assessmentSubject$.next(!0)})}getQuizResult(){this.portfolioRequestService.getQuizResult().subscribe(e=>{this.quizResult=e,e&&(this.partialQuizResult.bankMutualFundPercent=this.quizResult.bankMutualFundPercent,this.partialQuizResult.derivativeSecuritiesPercent=this.quizResult.derivativeSecuritiesPercent,this.partialQuizResult.boursePercent=this.quizResult.boursePercent,this.partialQuizResult.portfolioPattern=this.quizResult.portfolioPattern,this.partialQuizResult.managerNotes=this.quizResult.managerNotes,this.partialQuizResult.customerNotes=this.quizResult.customerNotes??"\u0646\u0638\u0631\u06cc \u0645\u063a\u0627\u06cc\u0631 \u0628\u0627 \u0622\u0646 \u0646\u062f\u0627\u0631\u0645. \u0628\u062f\u06cc\u0647\u06cc \u0627\u0633\u062a \u0645\u0633\u0626\u0648\u0644\u06cc\u062a \u062a\u0637\u0628\u06cc\u0642 \u062a\u062d\u0644\u06cc\u0644 \u0641\u0648\u0642 \u0628\u0627 \u0631\u0648\u06cc\u0647\u200c\u0647\u0627\u06cc \u0633\u0628\u062f\u06af\u0631\u062f\u0627\u0646\u060c \u0628\u0647 \u0639\u0647\u062f\u0647 \u0633\u0628\u062f\u06af\u0631\u062f\u0627\u0646 \u0645\u06cc\u200c\u0628\u0627\u0634\u062f."),this.getRiskAssessmentParameters()})}goBack(){this.location.back()}updateQuizResult(){let e;console.log("this.riskAssessmentParameters",this.riskAssessmentParameters),e=this.isDisabledCustomerNotes?{managerScore:this.riskAssessmentParameters.map(r=>({id:r.id,comment:r.comment,score:r.score})),...this.partialQuizResult}:{customerNotes:this.partialQuizResult.customerNotes,customerConfirmDate:(new Date).toISOString()},this.portfolioRequestService.updateQuizResultBy(e).subscribe(t=>{this.toast.show("\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f."),this.goBack()})}getRiskLevelTypes(){this.grabage.add(this.enumService.getRiskLevelTypes().subscribe(e=>{this.riskLevelTypes=e,this.makeOrganizationTypeKeyVal()}))}makeOrganizationTypeKeyVal(){this.riskLevelTypes.forEach(e=>{this.riskLevelTypeKeyVal[e.value]=e.title,this.riskLevelScoreKeyVal[e.value]=e.index})}static#e=this.\u0275fac=function(t){return new(t||Ue)(i.Y36(wr),i.Y36(gn.Ye),i.Y36(Y.kl),i.Y36(Hi))};static#t=this.\u0275cmp=i.Xpm({type:Ue,selectors:[["pfo-risk-assessment"]],decls:5,vars:4,consts:[["title","\u067e\u0631\u0633\u0634 \u0646\u0627\u0645\u0647 \u0631\u06cc\u0633\u06a9",3,"active"],[1,"p-3"],[3,"isQuestionDisabled","showBackBtn"],["title","\u0646\u062a\u0627\u06cc\u062c \u0627\u0631\u0632\u06cc\u0627\u0628\u06cc",3,"active",4,"ngIf"],["title","\u0646\u062a\u0627\u06cc\u062c \u0627\u0631\u0632\u06cc\u0627\u0628\u06cc",3,"active"],[1,"mt-4","p-4"],[1,"col-md-4"],["label","\u062a\u0648\u0635\u06cc\u0641 \u0645\u0634\u062a\u0631\u06cc \u0627\u0632 \u0646\u0638\u0631 \u0631\u06cc\u0633\u06a9 \u067e\u0630\u06cc\u0631\u06cc"],["type","text","name","adminNotes","disabled","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["paramForm","ngForm"],["class","row",4,"ngFor","ngForOf"],["form","ngForm"],[1,"row"],["label","\u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631\u06cc \u062f\u0631 \u0633\u067e\u0631\u062f\u0647 \u0628\u0627\u0646\u06a9\u06cc \u06cc\u0627 \u0627\u0648\u0631\u0627\u0642 \u0628\u0647\u0627\u062f\u0627\u0631 \u0628\u0627 \u062f\u0631\u0622\u0645\u062f \u062b\u0627\u0628\u062a"],[1,"input-group"],["type","number","name","bankMutualFundPercent","required","",1,"form-control",3,"min","max","ngModel","disabled","ngModelChange"],[1,"input-group-text"],["label","\u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631\u06cc \u062f\u0631 \u0627\u0648\u0631\u0627\u0642 \u0645\u0634\u062a\u0642\u0647 \u0642\u0627\u0628\u0644 \u0645\u0639\u0627\u0645\u0644\u0647 \u062f\u0631 \u0628\u0648\u0631\u0633 \u0648 \u0641\u0631\u0627\u0628\u0648\u0631\u0633"],["type","number","name","derivativeSecuritiesPercent","required","",1,"form-control",3,"min","max","ngModel","disabled","ngModelChange"],["label","\u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631\u06cc \u062f\u0631 \u0633\u0647\u0627\u0645 \u0642\u0627\u0628\u0644 \u0645\u0639\u0627\u0645\u0644\u0647 \u062f\u0631 \u0628\u0648\u0631\u0633 \u0648 \u0641\u0631\u0627\u0628\u0648\u0631\u0633"],["type","number","name","boursePercent","required","",1,"form-control",3,"min","max","ngModel","disabled","ngModelChange"],[1,"col-md-12","mb-4"],["label","\u0627\u0644\u06af\u0648\u06cc \u062a\u0646\u0648\u0639 \u0633\u0627\u0632\u06cc"],["name","portfolioPattern","rows","2",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u0645\u062f\u06cc\u0631 \u0633\u0628\u062f \u062f\u0631 \u062e\u0635\u0648\u0635 \u0631\u06cc\u0633\u06a9 \u067e\u0630\u06cc\u0631\u06cc \u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631"],["name","managerNotes","rows","2",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-md-12 mb-4",4,"ngIf"],[3,"nextTitle","nextDisabled","showNext","next","back"],[1,"p-1"],[1,"col-md-1"],["label","\u062d\u062f\u0627\u0642\u0644 \u0627\u0645\u062a\u06cc\u0627\u0632"],["type","text","disabled","","dir","ltr",1,"form-control",3,"ngModel","name","ngModelChange"],["label","\u062d\u062f\u0627\u06a9\u062b\u0631 \u0627\u0645\u062a\u06cc\u0627\u0632"],["label","\u0627\u0645\u062a\u06cc\u0627\u0632"],[3,"max","min","required","disabled","ngModel","name","ngModelChange"],["class","col-md-9",4,"ngIf"],[1,"hr"],[1,"col-md-9"],["label","\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"],["type","text",1,"form-control",3,"ngModel","name","disabled","ngModelChange"],["label","\u0646\u0638\u0631 \u0645\u0634\u062a\u0631\u06cc"],["name","customerNotes","rows","2",1,"form-control",3,"ngModel","disabled","ngModelChange"]],template:function(t,r){1&t&&(i.TgZ(0,"pfo-accordion")(1,"pfo-panel",0)(2,"div",1),i._UZ(3,"pfo-risk-assessment-question",2),i.qZA()(),i.YNc(4,X,38,25,"pfo-panel",3),i.qZA()),2&t&&(i.xp6(1),i.Q6J("active",r.showQuestions),i.xp6(2),i.Q6J("isQuestionDisabled",r.isQuestionDisabled)("showBackBtn",!r.showAssessmentSection),i.xp6(1),i.Q6J("ngIf",r.showAssessmentSection&&r.riskAssessmentParameters))}})}const vt=["form"];function an(_,e){1&_&&(i.TgZ(0,"span",14),i._uU(1,"*"),i.qZA())}function En(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",19),i.NdJ("change",function(){i.CHM(t);const h=i.oxw().$implicit,y=i.oxw().$implicit,D=i.oxw();return i.KtG(D.toggleSelection(y.id,h))}),i.qZA()}if(2&_){const t=i.oxw().$implicit,r=i.oxw().$implicit,h=i.oxw();i.s9C("name",r.id),i.s9C("id",r.id),i.Q6J("checked",t.checked)("required",r.mandatory)("disabled",!h.hasUpdatePermision||h.isQuestionDisabled)}}function oi(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",20),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2).$implicit;return i.KtG(y.value=h)}),i.qZA()}if(2&_){const t=i.oxw().$implicit,r=i.oxw().$implicit,h=i.oxw();i.s9C("name",r.id),i.MGl("id","question-",r.id,""),i.Q6J("ngModel",r.value)("value",t)("required",r.mandatory)("disabled",!h.hasUpdatePermision||h.isQuestionDisabled)}}function Jr(_,e){if(1&_&&(i.TgZ(0,"div",15),i.YNc(1,En,1,5,"input",16),i.YNc(2,oi,1,6,"input",17),i.TgZ(3,"label",18),i._uU(4),i.qZA()()),2&_){const t=e.$implicit,r=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",r.multipleAnswer),i.xp6(1),i.Q6J("ngIf",!r.multipleAnswer),i.xp6(1),i.s9C("for",r.id),i.xp6(1),i.hij(" ",t.answer," ")}}function Dn(_,e){1&_&&(i.TgZ(0,"small",21),i._uU(1,"\u0627\u06cc\u0646 \u0633\u0648\u0627\u0644 \u0627\u062c\u0628\u0627\u0631\u06cc \u0645\u06cc \u0628\u0627\u0634\u062f!!!"),i.qZA())}function Tr(_,e){if(1&_&&i._UZ(0,"img",22),2&_){const t=i.oxw().$implicit;i.Q6J("src",t.image,i.LSH)}}function er(_,e){if(1&_&&(i.TgZ(0,"div",6)(1,"div",7)(2,"label",8),i._uU(3),i.YNc(4,an,2,0,"span",9),i.qZA(),i.YNc(5,Jr,5,4,"div",10),i.YNc(6,Dn,2,0,"small",11),i.TgZ(7,"div",12),i.YNc(8,Tr,1,1,"img",13),i.qZA()()()),2&_){const t=e.$implicit,r=e.index;i.oxw();const h=i.MAs(6);i.xp6(3),i.AsE("",r+1,". ",t.questionText," "),i.xp6(1),i.Q6J("ngIf",t.mandatory),i.xp6(1),i.Q6J("ngForOf",t.answers),i.xp6(1),i.Q6J("ngIf",(null==h.controls||null==h.controls[t.id]?null:h.controls[t.id].invalid)&&(null==h.controls||null==h.controls[t.id]?null:h.controls[t.id].touched)),i.xp6(2),i.Q6J("ngIf",t.imageId)}}class wo{constructor(e,t,r,h,y,D,F){this.router=e,this.route=t,this.location=r,this.userIdentity=h,this.portfolioRequestService=y,this.ebService=D,this.fb=F,this.isQuestionDisabled=!0,this.showBackBtn=!0,this.questions=[],this.form=this.fb.group({}),this.grabage=new fe.w0,this.hasUpdatePermision=!1;const G=this.userIdentity.get()?.hasCriteria(mr.portfolioUpdate);G&&(this.hasUpdatePermision=G)}onNext(){this.ebService.emit(new j(Fe.NextStep,!0))}ngOnInit(){this.getQuestions()}getQuestions(){this.grabage.add(this.portfolioRequestService.getQuestions().subscribe(e=>{this.questions=e.map(t=>(t.answers=t.answers.sort((r,h)=>r.id>h.id?1:r.id<h.id?-1:0),t.multipleAnswer&&(t.value=[],t.answers=t.answers.map(r=>(r.checked=!1,r))),t)),this.getQuizResult()}))}getQuizResult(){this.portfolioRequestService.getQuizResult().subscribe(e=>{if(e){const t=JSON.parse(e.customerAnswersJson);t&&t.length>0&&(this.questions=this.questions.map(r=>{const h=t.find(y=>y.questionId===r.id);if(h)if(r.multipleAnswer)r.value=[],h.answers.forEach(y=>{const D=r.answers.find(F=>F.id===y);D&&(D.checked=!0),r.value.push(D)});else{const y=r.answers.find(D=>D.id===h.answers[0]);r.value=y}return r}))}})}save(){const e=this.currentForm.form;if(e.markAllAsTouched(),e.invalid&&this.scrollToFirstInvalidControl(),e.valid){const t=this.makeReqBody();this.portfolioRequestService.sendAnswers(t).subscribe(r=>{this.ebService.emit(new j(Fe.NextStep,!0))})}}toggleSelection(e,t){t.checked=!t.checked;const r=this.questions.findIndex(y=>y.id===e),h=this.questions[r];t.checked?h.value.push(t):h.value=h.value.filter(y=>y.id!==t.id),this.questions[r]=h}makeReqBody(){const e=[];return this.questions.forEach((t,r)=>{if(t.multipleAnswer){const h=[];t.value.forEach(y=>{y&&h.push(y.id)}),h.length>0&&(e[r]={},e[r].questionId=t.id,e[r].answers=h)}else t?.value?.id&&(e[r]={},e[r].questionId=t.id,e[r].answers=[t?.value?.id])}),e}get editable(){return this.portfolioRequestService.editable}goBack(){this.location.back()}scrollToFirstInvalidControl(){const e=this.currentForm.form,t=Object.keys(e.controls),r=t?t.map(h=>e.controls[h]).findIndex(h=>h.invalid):null;if(null!==r){const h=document.querySelector(`#question-${t[r]}`);h&&h.scrollIntoView({behavior:"smooth",block:"center"})}}static#e=this.\u0275fac=function(t){return new(t||wo)(i.Y36(q.F0),i.Y36(q.gz),i.Y36(gn.Ye),i.Y36(Y.cq),i.Y36(wr),i.Y36(qi),i.Y36(de.qu))};static#t=this.\u0275cmp=i.Xpm({type:wo,selectors:[["pfo-risk-assessment-question"]],viewQuery:function(t,r){if(1&t&&i.Gf(vt,5),2&t){let h;i.iGM(h=i.CRH())&&(r.currentForm=h.first)}},inputs:{isQuestionDisabled:"isQuestionDisabled",showBackBtn:"showBackBtn"},decls:9,vars:3,consts:[[1,"container"],[1,"pt-4"],[1,"row","mt-5"],["form","ngForm"],["class","py-4",4,"ngFor","ngForOf"],["nextTitle","\u062b\u0628\u062a \u0648 \u0627\u062f\u0627\u0645\u0647",3,"showNext","showBack","next","back"],[1,"py-4"],[1,"d-flex","flex-column"],[1,"pe-5","pb-3"],["class","text-danger form-field-required",4,"ngIf"],["class","form-check form-check-inline py-1",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","img-thumbnail",3,"src",4,"ngIf"],[1,"text-danger","form-field-required"],[1,"form-check","form-check-inline","py-1"],["type","checkbox","class","form-check-input","ngModel","",3,"name","id","checked","required","disabled","change",4,"ngIf"],["type","radio","class","form-check-input",3,"name","id","ngModel","value","required","disabled","ngModelChange",4,"ngIf"],[1,"form-check-label",3,"for"],["type","checkbox","ngModel","",1,"form-check-input",3,"name","id","checked","required","disabled","change"],["type","radio",1,"form-check-input",3,"name","id","ngModel","value","required","disabled","ngModelChange"],[1,"text-danger"],[1,"img-thumbnail",3,"src"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"p",1),i._uU(2," \u062f\u0631 \u067e\u0631\u0633\u0634\u0646\u0627\u0645\u0647 \u0632\u06cc\u0631 \u0648 \u0647\u0645\u200c\u0686\u0646\u06cc\u0646 \u0641\u0631\u0645 \u062a\u062d\u0644\u06cc\u0644 \u0646\u062a\u0627\u06cc\u062c\u060c \u0645\u0641\u0627\u0647\u06cc\u0645 \u0648 \u0627\u0635\u0637\u0644\u0627\u062d\u0627\u062a\u06cc \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f \u06a9\u0647 \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0628\u0631\u0627\u06cc \u0634\u0645\u0627 \u0645\u0628\u0647\u0645 \u0648 \u06cc\u0627 \u0646\u0627\u0622\u0634\u0646\u0627 \u0628\u0627\u0634\u062f. \u0628\u0647 \u0645\u0646\u0638\u0648\u0631 \u062f\u0631\u06a9 \u0628\u0647\u062a\u0631 \u0645\u062d\u062a\u0648\u0627\u06cc \u0633\u0624\u0627\u0644\u0627\u062a \u0648 \u067e\u0627\u0633\u062e\u200c\u06af\u0648\u06cc\u06cc \u062f\u0642\u06cc\u0642\u200c\u062a\u0631 \u0627\u0632 \u062c\u0627\u0646\u0628 \u0634\u0645\u0627 \u0648 \u062f\u0631 \u0635\u0648\u0631\u062a \u0646\u06cc\u0627\u0632 \u0628\u0647 \u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0632 \u062a\u062d\u0644\u06cc\u0644\u06af\u0631 \u0648 \u06cc\u0627 \u0645\u062f\u06cc\u0631 \u0633\u0628\u062f \u06a9\u0645\u06a9 \u0628\u06af\u06cc\u0631\u06cc\u062f. "),i.qZA(),i.TgZ(3,"div",2)(4,"div",0)(5,"form",null,3),i.YNc(7,er,9,6,"div",4),i.TgZ(8,"mts-next-back-btns",5),i.NdJ("next",function(){return r.save()})("back",function(){return r.goBack()}),i.qZA()()()()()),2&t&&(i.xp6(7),i.Q6J("ngForOf",r.questions),i.xp6(1),i.Q6J("showNext",!r.isQuestionDisabled)("showBack",r.showBackBtn))},dependencies:[gn.sg,gn.O5,de._Y,de.Fj,de.Wl,de._,de.JJ,de.JL,de.Q7,de.Zs,de.On,de.F,ye.J]})}class hr{static#e=this.\u0275fac=function(t){return new(t||hr)};static#t=this.\u0275mod=i.oAB({type:hr});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.UX,Y.SK,Y.P7]})}class Pr{constructor(e){this.inj=e,this.inputVal="",this.propagateChange=t=>{},this.onTouch=()=>{}}ngAfterViewInit(){this.ngControl=this.inj.get(de.a5)}writeValue(e){typeof e<"u"&&""!==e&&null!==e?this.rangeChecker(e):this.inputVal="",setTimeout(()=>{this.propagateChange(e)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouch=e}preventNonNumeric(e){const t=e.which;(t<45||t>57)&&e.preventDefault()}onChanged(e){this.rangeChecker(e.target.value),this.onTouch()}rangeChecker(e){this._value=e,"number"==typeof this._value&&(this._value=this._value.toString()),(void 0!==this.min&&this._value<this.min||void 0!==this.max&&this._value>this.max||!/^-?\d+(\.\d+)?$/.test(this._value))&&setTimeout(()=>{this.ngControl.control?.setErrors({invalidRange:!0})},0),this._value=(0,Y.Yk)(this._value),this.inputVal=this._value,this._value||(this.inputVal=""),this.propagateChange(this._value)}static#e=this.\u0275fac=function(t){return new(t||Pr)(i.Y36(i.zs3))};static#t=this.\u0275cmp=i.Xpm({type:Pr,selectors:[["pfo-input-range"]],hostBindings:function(t,r){1&t&&i.NdJ("keypress",function(y){return r.preventNonNumeric(y)})},inputs:{inputVal:"inputVal",name:"name",label:"label",disabled:"disabled",required:"required",max:"max",min:"min"},features:[i._Bn([{provide:de.JU,useExisting:(0,i.Gpc)(()=>Pr),multi:!0}])],decls:2,vars:4,consts:[[1,"input-group"],["type","text","ngModel","","dir","ltr",1,"form-control",3,"name","value","disabled","required","input"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"input",1),i.NdJ("input",function(y){return r.onChanged(y)}),i.qZA()()),2&t&&(i.xp6(1),i.Q6J("name",r.name)("value",r.inputVal)("disabled",r.disabled)("required",r.required))},dependencies:[de.Fj,de.JJ,de.Q7,de.On]})}class Vs{static#e=this.\u0275fac=function(t){return new(t||Vs)};static#t=this.\u0275mod=i.oAB({type:Vs});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.kx]})}class Hs{static#e=this.\u0275fac=function(t){return new(t||Hs)};static#t=this.\u0275mod=i.oAB({type:Hs});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.dT,de.u5]})}function Ma(_,e){return{type:7,name:_,definitions:e,options:{}}}function zl(_,e=null){return{type:4,styles:e,timings:_}}function Gs(_){return{type:6,styles:_,offset:null}}function rr(_,e,t){return{type:0,name:_,styles:e,options:t}}function ns(_,e,t=null){return{type:1,expr:_,animation:e,options:t}}const ss=["headerTemplate"];function $s(_,e){if(1&_&&i._UZ(0,"i",9),2&_){const t=i.oxw(2);i.Q6J("ngClass",t.icon)}}const ms=function(_){return{collapsed:_}};function rl(_,e){if(1&_&&(i.TgZ(0,"h2",6)(1,"button",7),i.YNc(2,$s,1,1,"i",8),i._uU(3),i.qZA()()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("disabled",t.disabled)("ngClass",i.VKq(4,ms,!t.active)),i.xp6(1),i.Q6J("ngIf",t.icon),i.xp6(1),i.hij(" ",t.title," ")}}const xl=function(_,e){return{active:_,title:e}},nu=function(_){return{$implicit:_}},zr=function(_){return{"d-block p-2 show":_}},Ge=["*"];class me{constructor(){this.active=!1,this.activeChange=new i.vpe,this.toggler=new i.vpe}toggle(){this.active=!this.active,this.toggler.next({active:this.active}),this.activeChange.emit(this.active)}get expandCollapseState(){return this.active?"expanded":"collapsed"}static#e=this.\u0275fac=function(t){return new(t||me)};static#t=this.\u0275cmp=i.Xpm({type:me,selectors:[["pfo-panel"]],contentQueries:function(t,r,h){if(1&t&&i.Suo(h,ss,5,i.Rgc),2&t){let y;i.iGM(y=i.CRH())&&(r.headerTemplate=y.first)}},inputs:{title:"title",icon:"icon",disabled:"disabled",pClass:"pClass",active:"active"},outputs:{activeChange:"activeChange",toggler:"toggler"},ngContentSelectors:Ge,decls:8,vars:13,consts:[[1,"accordion-item"],[1,"accordion-header","cursor-pointer",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],["defaultHeader",""],[1,"accordion-header"],["type","button",1,"accordion-button",3,"disabled","ngClass"],["class","fa me-3",3,"ngClass",4,"ngIf"],[1,"fa","me-3",3,"ngClass"]],template:function(t,r){if(1&t&&(i.F$t(),i.TgZ(0,"div",0)(1,"div",1),i.NdJ("click",function(){return r.toggle()}),i.GkF(2,2),i.qZA(),i.TgZ(3,"div",3)(4,"div",4),i.Hsn(5),i.qZA()()(),i.YNc(6,rl,4,6,"ng-template",null,5,i.W1O)),2&t){const h=i.MAs(7);i.Tol(r.pClass),i.xp6(2),i.Q6J("ngTemplateOutlet",r.headerTemplate||h)("ngTemplateOutletContext",i.VKq(9,nu,i.WLB(6,xl,r.active,r.title))),i.xp6(1),i.Q6J("ngClass",i.VKq(11,zr,r.active)),i.xp6(1),i.Q6J("@expandCollapse",r.expandCollapseState)}},dependencies:[gn.mk,gn.O5,gn.tP],data:{animation:[Ma("expandCollapse",[rr("collapsed",Gs({height:"0",overflow:"hidden",opecity:0})),rr("expanded",Gs({height:"*"})),ns("collapsed <=> expanded",zl("100ms ease-out"))])]}})}const J=["*"];class He{constructor(){this.multiple=!1}onToggleSubscriber(e){return t=>{this.panels.forEach(r=>{t.active&&r!==e&&!this.multiple&&(r.active=!1)})}}ngAfterContentInit(){this.panels.forEach((e,t)=>{e.toggler.subscribe(this.onToggleSubscriber(e))})}static#e=this.\u0275fac=function(t){return new(t||He)};static#t=this.\u0275cmp=i.Xpm({type:He,selectors:[["pfo-accordion"]],contentQueries:function(t,r,h){if(1&t&&i.Suo(h,me,4),2&t){let y;i.iGM(y=i.CRH())&&(r.panels=y)}},inputs:{multiple:"multiple"},ngContentSelectors:J,decls:2,vars:0,consts:[[1,"accordion"]],template:function(t,r){1&t&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},styles:["pfo-panel:first-of-type>.accordion-item,   pfo-panel:first-of-type>.accordion-item .accordion-header{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}  pfo-panel:last-of-type>.accordion-item,   pfo-panel:last-of-type>.accordion-item .accordion-header{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}"]})}class zt{static#e=this.\u0275fac=function(t){return new(t||zt)};static#t=this.\u0275mod=i.oAB({type:zt});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.UX,de.u5,Y.kx,Y.P7,Y.dT,hr,Vs,Hs,Y.SK]})}function hn(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",5)(1,"mts-form-field",12)(2,"input",13),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.contract.customerName=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.contract.customerName)("disabled",!0)}}i.B6R(Ue,[gn.sg,gn.O5,de._Y,de.Fj,de.wV,de.JJ,de.JL,de.Q7,de.qQ,de.Fd,de.On,de.F,Eo.h,ye.J,wo,Pr,He,me],[]);class Ii{constructor(){this.contract=new la,this.isAdmin=!0}static#e=this.\u0275fac=function(t){return new(t||Ii)};static#t=this.\u0275cmp=i.Xpm({type:Ii,selectors:[["pfo-contract-detail"]],inputs:{contract:"contract",isAdmin:"isAdmin"},decls:15,vars:9,consts:[[1,"row"],["class","col-md-3",4,"ngIf"],[1,"col-md-2"],["label","\u0634\u0645\u0627\u0631\u0647 \u0642\u0631\u0627\u0631\u062f\u0627\u062f"],["type","text","name","contract_contract_id",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["label","\u0639\u0646\u0648\u0627\u0646 \u0642\u0631\u0627\u0631\u062f\u0627\u062f"],["type","text","name","title",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u06a9\u062f PRX"],["type","text","name","prxCode",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u0648\u0636\u0639\u06cc\u062a \u0642\u0631\u0627\u0631\u062f\u0627\u062f"],["type","text","name","contractStatus",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u0646\u0627\u0645 \u0645\u0634\u062a\u0631\u06cc"],["type","text","name","customerName","readonly","",1,"form-control",3,"ngModel","disabled","ngModelChange"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"div",0),i.YNc(2,hn,3,2,"div",1),i.TgZ(3,"div",2)(4,"mts-form-field",3)(5,"input",4),i.NdJ("ngModelChange",function(y){return r.contract.contractCode=y}),i.qZA()()(),i.TgZ(6,"div",5)(7,"mts-form-field",6)(8,"input",7),i.NdJ("ngModelChange",function(y){return r.contract.contractTitle=y}),i.qZA()()(),i.TgZ(9,"div",2)(10,"mts-form-field",8)(11,"input",9),i.NdJ("ngModelChange",function(y){return r.contract.prxCode=y}),i.qZA()()(),i.TgZ(12,"div",2)(13,"mts-form-field",10)(14,"input",11),i.NdJ("ngModelChange",function(y){return r.contract.contractStatusTitle=y}),i.qZA()()()()()),2&t&&(i.xp6(2),i.Q6J("ngIf",r.isAdmin),i.xp6(3),i.Q6J("ngModel",r.contract.contractCode)("disabled",!0),i.xp6(3),i.Q6J("ngModel",r.contract.contractTitle)("disabled",!0),i.xp6(3),i.Q6J("ngModel",r.contract.prxCode)("disabled",!0),i.xp6(3),i.Q6J("ngModel",r.contract.contractStatusTitle)("disabled",!0))},dependencies:[gn.O5,de.Fj,de.JJ,de.On,dr.A,Eo.h],styles:[".shadow[_ngcontent-%COMP%]{box-shadow:0 0 5px #38476d13!important}[_nghost-%COMP%]     .card{margin-bottom:1rem!important}[_nghost-%COMP%]     .card .card-body{padding:1rem 2rem 0!important}"]})}class Li{static#e=this.\u0275fac=function(t){return new(t||Li)};static#t=this.\u0275mod=i.oAB({type:Li});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK]})}var Co=N(4376),gs=N(2508);function iu(_,e){if(1&_&&(i.TgZ(0,"option",11),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Hu(_,e){if(1&_&&(i.TgZ(0,"option",11),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Gu(_,e){if(1&_&&(i.TgZ(0,"option",42),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Zu(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",43),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectLedger(y))}),i.qZA()}}function Ec(_,e){1&_&&i._uU(0),2&_&&i.hij(" ",e.$implicit.permanent?"\u062f\u0627\u0626\u0645":"\u0645\u0648\u0642\u062a"," ")}function Xs(_,e){1&_&&i._uU(0),2&_&&i.hij(" ",e.$implicit.leaf?"\u0628\u0644\u0647":"\u062e\u06cc\u0631"," ")}class za{constructor(e,t,r){this.ledgerService=e,this.enumService=t,this.lookupRef=r,this.disableDetail=!1,this.ledgerSearchModel=new Bl,this.ledgerModel=new vl,this.ledgerCategories$=this.enumService.getLedgerCategoryTypes(),this.ledgerStatuses$=this.enumService.getLedgerStatusTypes(),this.ledgerLevelTypes$=this.enumService.getLedgerLevelTypes()}ngOnInit(){void 0!==this.hasDetail&&(this.ledgerSearchModel.hasDetail=this.hasDetail)}search(){this.dataSource=new Y.in(e=>this.ledgerService.get(e,this.ledgerSearchModel))}selectLedger(e){this.ledgerModel=e}confirm(e){this.lookupRef.close(this.ledgerModel.id,`${this.ledgerModel.aliasCode}`,this.ledgerModel.aliasTitle)}close(){this.lookupRef.close(null)}clearSearchModel(){this.ledgerSearchModel=new Bl,this.search()}static#e=this.\u0275fac=function(t){return new(t||za)(i.Y36(Ae),i.Y36(Hi),i.Y36(Y.rt))};static#t=this.\u0275cmp=i.Xpm({type:za,selectors:[["pfo-ledger-lookup"]],inputs:{hasDetail:"hasDetail",disableDetail:"disableDetail"},features:[i._Bn([Ae])],decls:66,vars:29,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-4"],["label","\u0639\u0646\u0648\u0627\u0646 \u0633\u0631\u0641\u0635\u0644"],["type","text","name","title",1,"form-control",3,"ngModel","ngModelChange"],["label","\u06af\u0631\u0648\u0647 \u0633\u0631\u0641\u0635\u0644 \u0647\u0627"],["name","portfolioManagerSsn",1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["label","\u0633\u0637\u062d"],[1,"form-select",3,"ngModel","ngModelChange"],["label","\u0627\u0632 \u06a9\u062f \u0633\u0631\u0641\u0635\u0644"],["type","text","name","requestId",1,"form-control",3,"ngModel","ngModelChange"],["label","\u062a\u0627 \u06a9\u062f \u0633\u0631\u0641\u0635\u0644"],["type","text","name","code",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0648\u0636\u0639\u06cc\u062a"],["value","undefined"],[3,"value",4,"ngFor","ngForOf"],["label","\u0622\u06cc\u0627 \u062a\u0641\u0635\u06cc\u0644 \u067e\u0630\u06cc\u0631 \u0627\u0633\u062a\u061f"],[1,"form-check"],[1,"form-check","form-check-inline"],["for","true",1,"form-check-label"],["type","radio","id","true","name","hasDetail","required","",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],["for","false",1,"form-check-label"],["type","radio","id","false","name","hasDetail","required","",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],["nextTitle","\u062c\u0633\u062a\u062c\u0648",3,"showBack","backTitle","withBackArrow","withNextArrow","next","back"],[3,"dataSource"],["type","text"],["title","\u0639\u0646\u0648\u0627\u0646 \u06a9\u0627\u0645\u0644","type","text","name","aliasTitle"],["title","\u06a9\u062f","type","text","name","code"],["title","\u06a9\u062f \u0633\u0631\u0641\u0635\u0644","type","text","name","aliasCode"],["title","\u0645\u0627\u0647\u06cc\u062a","type","text","name","natureTitle"],["title","\u062f\u0627\u0626\u0645 \u06cc\u0627 \u0645\u0648\u0642\u062a"],["title","\u0622\u06cc\u0627 \u062a\u0641\u0635\u06cc\u0644 \u067e\u0630\u06cc\u0631 \u0627\u0633\u062a"],["title","\u0631\u0648\u0634 \u0648\u0631\u0648\u062f \u062f\u0627\u062f\u0647","name","entryMethodTitle"],["title","\u0648\u0636\u0639\u06cc\u062a","name","statusTitle"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],[3,"value"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"div",0)(2,"div",1)(3,"h5",2),i._uU(4," \u0627\u0646\u062a\u062e\u0627\u0628 \u0633\u0631\u0641\u0635\u0644 "),i.qZA()(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"mts-form-field",7)(10,"input",8),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.title=y}),i.qZA()()(),i.TgZ(11,"div",6)(12,"mts-form-field",9)(13,"select",10),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.category=y}),i.TgZ(14,"option",11),i._uU(15,"\u0647\u0645\u0647"),i.qZA(),i.YNc(16,iu,2,2,"option",12),i.ALo(17,"async"),i.qZA()()(),i.TgZ(18,"div",6)(19,"mts-form-field",13)(20,"select",14),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.levelType=y}),i.TgZ(21,"option",11),i._uU(22,"\u0647\u0645\u0647"),i.qZA(),i.YNc(23,Hu,2,2,"option",12),i.ALo(24,"async"),i.qZA()()(),i.TgZ(25,"div",6)(26,"mts-form-field",15)(27,"input",16),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.fromAliasCode=y}),i.qZA()()(),i.TgZ(28,"div",6)(29,"mts-form-field",17)(30,"input",18),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.toAliasCode=y}),i.qZA()()(),i.TgZ(31,"div",6)(32,"mts-form-field",19)(33,"select",14),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.status=y}),i.TgZ(34,"option",20),i._uU(35,"\u0647\u0645\u0647"),i.qZA(),i.YNc(36,Gu,2,2,"option",21),i.ALo(37,"async"),i.qZA()()(),i.TgZ(38,"div",6)(39,"mts-form-field",22)(40,"div",23)(41,"div",24)(42,"label",25),i._uU(43,"\u0628\u0644\u0647"),i.qZA(),i.TgZ(44,"input",26),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.hasDetail=y}),i.qZA()(),i.TgZ(45,"div",24)(46,"label",27),i._uU(47,"\u062e\u06cc\u0631"),i.qZA(),i.TgZ(48,"input",28),i.NdJ("ngModelChange",function(y){return r.ledgerSearchModel.hasDetail=y}),i.qZA()()()()()(),i.TgZ(49,"mts-next-back-btns",29),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearSearchModel()}),i.qZA(),i.TgZ(50,"mts-data-table",30)(51,"mts-data-table-col",31),i.YNc(52,Zu,1,0,"ng-template"),i.qZA(),i._UZ(53,"mts-data-table-col",32)(54,"mts-data-table-col",33)(55,"mts-data-table-col",34)(56,"mts-data-table-col",35),i.TgZ(57,"mts-data-table-col",36),i.YNc(58,Ec,1,1,"ng-template"),i.qZA(),i.TgZ(59,"mts-data-table-col",37),i.YNc(60,Xs,1,1,"ng-template"),i.qZA(),i._UZ(61,"mts-data-table-col",38)(62,"mts-data-table-col",39),i.qZA(),i.TgZ(63,"div",40)(64,"button",41),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(65,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t&&(i.xp6(10),i.Q6J("ngModel",r.ledgerSearchModel.title),i.xp6(3),i.Q6J("ngModel",r.ledgerSearchModel.category),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(2),i.Q6J("ngForOf",i.lcZ(17,23,r.ledgerCategories$)),i.xp6(4),i.Q6J("ngModel",r.ledgerSearchModel.levelType),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(2),i.Q6J("ngForOf",i.lcZ(24,25,r.ledgerLevelTypes$)),i.xp6(4),i.Q6J("ngModel",r.ledgerSearchModel.fromAliasCode),i.xp6(3),i.Q6J("ngModel",r.ledgerSearchModel.toAliasCode),i.xp6(3),i.Q6J("ngModel",r.ledgerSearchModel.status),i.xp6(3),i.Q6J("ngForOf",i.lcZ(37,27,r.ledgerStatuses$)),i.xp6(8),i.Q6J("value",!0)("ngModel",r.ledgerSearchModel.hasDetail)("disabled",r.disableDetail),i.xp6(4),i.Q6J("value",!1)("ngModel",r.ledgerSearchModel.hasDetail)("disabled",r.disableDetail),i.xp6(1),i.Q6J("showBack",!0)("backTitle","\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc")("withBackArrow",!1)("withNextArrow",!1),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(14),i.Q6J("disabled",void 0===r.ledgerModel.id))},dependencies:[gn.sg,de.YN,de.Kr,de.Fj,de.EJ,de._,de.JJ,de.Q7,de.On,dr.A,Eo.h,Co.Q,gs.U,ye.J,gn.Ov]})}class ru{static#e=this.\u0275fac=function(t){return new(t||ru)};static#t=this.\u0275mod=i.oAB({type:ru});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.SK]})}class ho{constructor(e,t,r,h,y){this.baseService=e,this.activatedRoute=t,this.requestService=r,this.dialog=h,this.injector=y,this.applicableActionList=[],this.btnGroupActionSet={},this.grabage=new fe.w0,this.requestId=t.snapshot.paramMap.get("id")}onBtnClicked(e){this.btnGroupActionSet[e]()}return(e="\u0628\u0627\u0632\u06af\u0631\u062f\u0627\u0646\u062f\u0646 \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"RETURN",message:kt.SUCCESSFUL_RETURN_REQUEST})}cancel(e="\u0644\u063a\u0648 \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"CANCEL",message:kt.SUCCESSFUL_CANCEL_REQUEST})}reject(e="\u0631\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"REJECT",message:kt.SUCCESSFUL_REJECT_REQUEST})}confirm(e="\u062a\u0627\u06cc\u06cc\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"CONFIRM",message:kt.SUCCESSFUL_ACCEPT_REQUEST})}trusteeReject(e="\u0631\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"TRUSTEE_REJECT",message:kt.SUCCESSFUL_REJECT_REQUEST})}trusteeConfirm(e="\u062a\u0627\u06cc\u06cc\u062f \u062f\u0631\u062e\u0648\u0627\u0633\u062a",t="\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f"){this.openActionModal({header:e,content:t,action:"TRUSTEE_CONFIRM",message:kt.SUCCESSFUL_ACCEPT_REQUEST})}openActionModal({content:e,header:t,action:r,message:h=kt.SUCCESSFUL_OPERATION}){this.dialog.open(is,{injector:this.injector,size:"sm",data:{content:e},headerTitle:t}).afterClosedSubject.subscribe(D=>{D&&"accept"===D.status&&this.grabage.add(this.requestService.update({requestId:this.requestId,action:r,type:this.requestType,description:D.description,dto:{}}).subscribe(()=>{this.toastService.show(h,{style:"success"}),this.back()}))})}back(){this.router.navigate(["../.."],{relativeTo:this.activatedRoute})}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}get enumService(){return this.baseService.enumService}ngOnDestroy(){this.grabage.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||ho)(i.Y36(Vi),i.Y36(q.gz),i.Y36(Zr),i.Y36(Y.jn),i.Y36(i.zs3))};static#t=this.\u0275cmp=i.Xpm({type:ho,selectors:[["pfo-common-request-detail-child"]],inputs:{data:"data",contract:"contract",requestType:"requestType",action:"action",applicableActionList:"applicableActionList",config:"config"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}class Ds{constructor(e,t,r){this.data=e,this.ref=t,this.portfolioRequestService=r,this.fileInfo=new Vr,this.formModel={fileId:"",supplementCode:"",state:"close"},this.fileUploader=(h,y)=>this.portfolioRequestService.upload(h,y).pipe((0,It.b)(D=>{D instanceof Jt.Zn&&(this.formModel.fileId=D.body?.key)})),e&&(this.title=e.title??"\u0645\u062a\u0645\u0645",this.formModel.fileId=e.fileKey,this.formModel.supplementCode=e.supplementCode),console.log("this.formModel",this.formModel)}ngOnInit(){this.data&&this.getDoc()}getDoc(){var e=this;return(0,ut.Z)(function*(){e.formModel.fileId&&(e.fileInfo=yield e.portfolioRequestService.getDocInfo(e.formModel.fileId))})()}next(){this.formModel.state="save",this.formModel.fileId&&this.formModel.supplementCode&&this.ref.close(this.formModel)}back(){this.ref.close(this.formModel)}onRemoveFile(){this.formModel.fileId&&this.portfolioRequestService.deleteDocumentBy(this.formModel.fileId).subscribe(()=>{this.formModel.fileId=""})}static#e=this.\u0275fac=function(t){return new(t||Ds)(i.Y36(Y.zt),i.Y36(Y.U8),i.Y36(wr))};static#t=this.\u0275cmp=i.Xpm({type:Ds,selectors:[["pfo-supplement"]],decls:15,vars:9,consts:[["form","ngForm"],[1,"row","d-flex","flex-column","align-items-center"],[1,"col-md-12"],["label","\u0634\u0645\u0627\u0631\u0647 \u0645\u062a\u0645\u0645"],["type","text","name","referenceId","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-8","pb-4"],["uploaderData","OTHER",3,"title","fileId","fileName","docSize","extension","uploader","downloader","removeCalled"],[1,"d-flex","flex-row-reverse","align-items-center","w-100"],["type","submit","data-testid","next",1,"btn","btn-primary","py-2",3,"disabled","click"],[1,"pe-2"],["type","button",1,"text-primary","btn","bg-primary","bg-opacity-10","ps-3","pe-4","py-2","me-4",3,"click"],[1,"ps-2"]],template:function(t,r){if(1&t&&(i.TgZ(0,"form",null,0)(2,"div",1)(3,"div",2)(4,"mts-form-field",3)(5,"input",4),i.NdJ("ngModelChange",function(y){return r.formModel.supplementCode=y}),i.qZA()()(),i.TgZ(6,"div",5)(7,"pfo-upload-document",6),i.NdJ("removeCalled",function(){return r.onRemoveFile()}),i.qZA()(),i.TgZ(8,"div",7)(9,"button",8),i.NdJ("click",function(){return r.next()}),i.TgZ(10,"small",9),i._uU(11,"\u062b\u0628\u062a"),i.qZA()(),i.TgZ(12,"button",10),i.NdJ("click",function(){return r.back()}),i.TgZ(13,"small",11),i._uU(14,"\u0628\u0627\u0632\u06af\u0634\u062a"),i.qZA()()()()()),2&t){const h=i.MAs(1);i.xp6(5),i.Q6J("ngModel",r.formModel.supplementCode),i.xp6(2),i.Q6J("title",r.title)("fileId",r.formModel.fileId)("fileName",r.fileInfo.fileName)("docSize",r.fileInfo.fileSize)("extension",r.fileInfo.extension)("uploader",r.fileUploader)("downloader",r.portfolioRequestService.fileDownloader),i.xp6(2),i.Q6J("disabled",h.invalid||!r.formModel.fileId)}},dependencies:[de._Y,de.Fj,de.JJ,de.JL,de.Q7,de.On,de.F,Eo.h,Ts]})}function wl(_,e){if(1&_&&i._UZ(0,"pfo-contract-detail",17),2&_){const t=i.oxw();i.Q6J("contract",t.contract)("isAdmin",!1)}}function _d(_,e){if(1&_&&(i.TgZ(0,"div",18)(1,"mts-card",3)(2,"div",4),i._UZ(3,"pfo-upload-document",19),i.qZA()()()),2&_){const t=i.oxw();i.xp6(3),i.Q6J("fileName",t.supplementInfo.fileName)("docSize",t.supplementInfo.fileSize)("extension",t.supplementInfo.extension)("fileId",t.supplementInfo.key)("downloader",t.portfolioRequestService.fileDownloader)("disabled",!0)("required",!1)}}class ac extends ho{constructor(e,t,r,h,y,D){super(e,t,r,h,y),this.portfolioRequestService=D,this.supplementInfo=new Vr,this.btnGroupActionSet={BACK:()=>this.back(),REJECT:()=>this.reject(),CONFIRM:()=>this.confirm(),TRUSTEE_REJECT:()=>this.trusteeReject(),TRUSTEE_CONFIRM:()=>this.trusteeConfirm(),UPLOAD_SUPPLEMENT_FILE:()=>this.uploadSupplementFile()}}ngOnInit(){this.createDate=this.data[0]?.createdOn,this.businessDate=this.data[0]?.businessDate,this.confirmDate=this.data[0]?.confirmDate,this.data[0]?.supplementFileId&&this.getSupplementFile(this.data[0]?.supplementFileId)}ngOnChanges(e){e.data&&!e.data?.firstChange&&this.ngOnInit()}get dataSource(){return new Y.P3(this.data)}uploadSupplementFile(){const t=this.data[0]?.supplementFileId,r=this.data[0]?.supplementCode;this.dialog.open(Ds,{injector:this.injector,size:"sm",data:{fileKey:t,supplementCode:r},headerTitle:"\u0622\u067e\u0644\u0648\u062f \u0641\u0627\u06cc\u0644 \u0645\u062a\u0645\u0645",disableClose:!0}).afterClosedSubject.subscribe(y=>{"save"===y.state&&this.grabage.add(this.requestService.update({requestId:this.requestId,action:"UPLOAD_SUPPLEMENT_FILE",type:this.requestType,dto:{fileId:y.fileId,code:y.supplementCode}}).subscribe(()=>{this.toastService.show(kt.SUCCESSFUL_CREATING),this.requestService.reloadOnInitSubject$.next(!0)}))})}getSupplementFile(e){var t=this;return(0,ut.Z)(function*(){t.supplementInfo=yield t.portfolioRequestService.getDocInfo(e)})()}get hasSupplementDoc(){return!!this.data[0]?.supplementFileId}static#e=this.\u0275fac=function(t){return new(t||ac)(i.Y36(Vi),i.Y36(q.gz),i.Y36(Zr),i.Y36(Y.jn),i.Y36(i.zs3),i.Y36(wr))};static#t=this.\u0275cmp=i.Xpm({type:ac,selectors:[["pfo-security-transaction-request"]],features:[i.qOj,i.TTD],decls:32,vars:16,consts:[[3,"contract","isAdmin",4,"ngIf"],[1,"row","pb-3","gx-3"],[3,"ngClass"],[1,"h-100"],[1,"row"],[1,"col-4","text-start"],[1,"my-5",3,"dataSource","pagable","showRowNumber"],["title","\u0639\u0644\u062a","name","reasonTitle"],["title","\u0646\u0627\u0645 \u062f\u0627\u0631\u0627\u06cc\u06cc","name","securityName"],["title","\u062a\u0639\u062f\u0627\u062f","name","quantity"],["title","\u062a\u0639\u062f\u0627\u062f \u0633\u0647\u0627\u0645 \u062c\u0627\u06cc\u0632\u0647","name","bonusShareCount"],["title","\u062a\u0639\u062f\u0627\u062f \u062d\u0642 \u062a\u0642\u062f\u0645 \u067e\u0630\u06cc\u0631\u0647 \u0646\u0648\u06cc\u0633\u06cc \u0634\u062f\u0647","name","preemptiveRightCount"],["title","\u0642\u06cc\u0645\u062a \u0648\u0627\u062d\u062f(\u0631\u06cc\u0627\u0644)","name","price","type","number"],["title","\u0628\u0647\u0627\u06cc \u062a\u0645\u0627\u0645 \u0634\u062f\u0647(\u0631\u06cc\u0627\u0644)","name","cost","type","number"],["title","\u062a\u0648\u0636\u06cc\u062d\u0627\u062a","name","note"],["class","col-md-3",4,"ngIf"],[3,"config","btnClicked"],[3,"contract","isAdmin"],[1,"col-md-3"],["title","\u062a\u0635\u0648\u06cc\u0631 \u0645\u062a\u0645\u0645",3,"fileName","docSize","extension","fileId","downloader","disabled","required"]],template:function(t,r){1&t&&(i.YNc(0,wl,1,2,"pfo-contract-detail",0),i.TgZ(1,"div",1)(2,"div",2)(3,"mts-card",3)(4,"div",4)(5,"div",5),i._uU(6," \u062a\u0627\u0631\u06cc\u062e \u0627\u06cc\u062c\u0627\u062f : "),i.TgZ(7,"span"),i._uU(8),i.ALo(9,"jalaliDate"),i.qZA()(),i.TgZ(10,"div",5),i._uU(11," \u062a\u0627\u0631\u06cc\u062e \u0639\u0645\u0644\u06cc\u0627\u062a : "),i.TgZ(12,"span"),i._uU(13),i.ALo(14,"jalaliDate"),i.qZA()(),i.TgZ(15,"div",5),i._uU(16," \u062a\u0627\u0631\u06cc\u062e \u062a\u0627\u06cc\u06cc\u062f : "),i.TgZ(17,"span"),i._uU(18),i.ALo(19,"jalaliDate"),i.qZA()()(),i.TgZ(20,"mts-data-table",6),i._UZ(21,"mts-data-table-col",7)(22,"mts-data-table-col",8)(23,"mts-data-table-col",9)(24,"mts-data-table-col",10)(25,"mts-data-table-col",11)(26,"mts-data-table-col",12)(27,"mts-data-table-col",13)(28,"mts-data-table-col",14),i.qZA()()(),i.YNc(29,_d,4,7,"div",15),i.qZA(),i.TgZ(30,"mts-card")(31,"pfo-btn-group-box",16),i.NdJ("btnClicked",function(y){return r.onBtnClicked(y)}),i.qZA()()),2&t&&(i.Q6J("ngIf",r.contract.id),i.xp6(2),i.Q6J("ngClass",r.hasSupplementDoc?"col-md-9":"col-md-12"),i.xp6(6),i.Oqu(i.lcZ(9,10,r.createDate)),i.xp6(5),i.Oqu(i.lcZ(14,12,r.businessDate)),i.xp6(5),i.Oqu(i.lcZ(19,14,r.confirmDate)),i.xp6(2),i.Q6J("dataSource",r.dataSource)("pagable",!1)("showRowNumber",!1),i.xp6(9),i.Q6J("ngIf",r.hasSupplementDoc),i.xp6(2),i.Q6J("config",r.config))}})}class Kr{static#e=this.\u0275fac=function(t){return new(t||Kr)};static#t=this.\u0275mod=i.oAB({type:Kr});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,ma]})}var p=N(5556);class g{static#e=this.\u0275fac=function(t){return new(t||g)};static#t=this.\u0275mod=i.oAB({type:g});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,Li,ga,Kr,ma,ts]})}i.B6R(ac,[gn.mk,gn.O5,dr.A,Co.Q,gs.U,Ii,ps,Ts],[p.K]);const f=["formBox"];function x(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",9)(1,"mts-form-field",27)(2,"input",28),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2);return i.KtG(y.cashDepositWithdraw.supplementCode=h)}),i.qZA()()()}if(2&_){const t=i.oxw(2);i.xp6(2),i.Q6J("disabled",!0)("ngModel",t.cashDepositWithdraw.supplementCode)}}function P(_,e){if(1&_&&(i.TgZ(0,"div",29)(1,"mts-card",30)(2,"div",8),i._UZ(3,"pfo-upload-document",31),i.qZA()()()),2&_){const t=i.oxw(2);i.xp6(1),i.Q6J("pfoMatchHeight",t.formBox1),i.xp6(2),i.Q6J("fileName",t.supplementInfo.fileName)("docSize",t.supplementInfo.fileSize)("extension",t.supplementInfo.extension)("fileId",t.supplementInfo.key)("downloader",t.portfolioRequestService.fileDownloader)("disabled",!0)("required",!1)}}function B(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"form",null,4)(2,"div",5)(3,"div",6)(4,"div",null,7)(6,"mts-card")(7,"div",8)(8,"div",9)(9,"mts-form-field",10)(10,"input",11),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.operationTypeTitle=h)}),i.qZA()()(),i.TgZ(11,"div",9)(12,"mts-form-field",12)(13,"input",13),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.reasonTypeTitle=h)}),i.qZA()()(),i.TgZ(14,"div",9)(15,"mts-form-field",14)(16,"mts-input-number",15),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.amount=h)}),i.qZA()()(),i.TgZ(17,"div",9)(18,"mts-form-field",16)(19,"mts-date-picker",17),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.date=h)}),i.qZA()()(),i.TgZ(20,"div",9)(21,"mts-form-field",18)(22,"input",19),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.depositTitle=h)}),i.qZA()()(),i.TgZ(23,"div",9)(24,"mts-form-field",20)(25,"input",21),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.partyDepositTitle=h)}),i.qZA()()(),i.YNc(26,x,3,2,"div",22),i.TgZ(27,"div",23)(28,"mts-form-field",24)(29,"textarea",25),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.note=h)}),i.qZA()()()()()()(),i.YNc(30,P,4,8,"div",26),i.qZA()()}if(2&_){const t=i.oxw();i.xp6(3),i.Q6J("ngClass",t.hasSupplementDoc?"col-md-9":"col-md-12"),i.xp6(7),i.Q6J("ngModel",t.cashDepositWithdraw.operationTypeTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.reasonTypeTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.amount)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.date)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.depositTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.partyDepositTitle),i.xp6(1),i.Q6J("ngIf",t.cashDepositWithdraw.supplementCode),i.xp6(3),i.Q6J("disabled",!0)("ngModel",t.cashDepositWithdraw.note),i.xp6(1),i.Q6J("ngIf",t.hasSupplementDoc)}}function V(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",9)(1,"mts-form-field",27)(2,"input",28),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2);return i.KtG(y.cashDepositWithdraw.supplementCode=h)}),i.qZA()()()}if(2&_){const t=i.oxw(2);i.xp6(2),i.Q6J("disabled",!0)("ngModel",t.cashDepositWithdraw.supplementCode)}}function ee(_,e){if(1&_&&(i.TgZ(0,"div",45),i._UZ(1,"pfo-upload-document",31),i.qZA()),2&_){const t=i.oxw(2);i.xp6(1),i.Q6J("fileName",t.supplementInfo.fileName)("docSize",t.supplementInfo.fileSize)("extension",t.supplementInfo.extension)("fileId",t.supplementInfo.key)("downloader",t.portfolioRequestService.fileDownloader)("disabled",!0)("required",!1)}}function Ce(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"form",null,4)(2,"div",5)(3,"div",32)(4,"div",null,7)(6,"mts-card")(7,"div",8)(8,"div",9)(9,"mts-form-field",10)(10,"input",11),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.operationTypeTitle=h)}),i.qZA()()(),i.TgZ(11,"div",9)(12,"mts-form-field",33)(13,"input",13),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.reasonTypeTitle=h)}),i.qZA()()(),i.TgZ(14,"div",9)(15,"mts-form-field",14)(16,"mts-input-number",34),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.amount=h)}),i.qZA()()(),i.TgZ(17,"div",9)(18,"mts-form-field",16)(19,"mts-date-picker",17),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.date=h)}),i.qZA()()(),i.TgZ(20,"div",9)(21,"mts-form-field",35)(22,"input",36),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.time=h)}),i.qZA()()(),i.TgZ(23,"div",9)(24,"mts-form-field",37)(25,"input",19),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.depositTitle=h)}),i.qZA()()(),i.TgZ(26,"div",9)(27,"mts-form-field",38)(28,"input",39),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.transferMethodTitle=h)}),i.qZA()()(),i.TgZ(29,"div",9)(30,"mts-form-field",40)(31,"input",41),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.receiptCode=h)}),i.qZA()()(),i.YNc(32,V,3,2,"div",22),i.TgZ(33,"div",2)(34,"mts-form-field",24)(35,"textarea",25),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.cashDepositWithdraw.note=h)}),i.qZA()()()()()()(),i.TgZ(36,"div",29)(37,"mts-card",30)(38,"div",42),i._UZ(39,"pfo-upload-document",43),i.YNc(40,ee,2,7,"div",44),i.qZA()()()()()}if(2&_){const t=i.oxw();i.xp6(10),i.Q6J("ngModel",t.cashDepositWithdraw.operationTypeTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.reasonTypeTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.amount)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.date)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.time)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.depositTitle),i.xp6(3),i.Q6J("ngModel",t.cashDepositWithdraw.transferMethodTitle),i.xp6(3),i.Q6J("disabled",!0)("ngModel",t.cashDepositWithdraw.receiptCode),i.xp6(1),i.Q6J("ngIf",t.cashDepositWithdraw.supplementCode),i.xp6(3),i.Q6J("disabled",!0)("ngModel",t.cashDepositWithdraw.note),i.xp6(2),i.Q6J("pfoMatchHeight",t.formBox1),i.xp6(2),i.Q6J("fileName",t.receiptInfo.fileName)("docSize",t.receiptInfo.fileSize)("extension",t.receiptInfo.extension)("fileId",t.receiptInfo.key)("downloader",t.portfolioRequestService.fileDownloader)("disabled",!0)("required",!1),i.xp6(1),i.Q6J("ngIf",t.cashDepositWithdraw.supplementFileId)}}class Re extends ho{constructor(e,t,r,h,y,D,F){super(e,t,r,h,y),this.portfolioRequestService=D,this.cdr=F,this.changeRequest=new i.vpe,this.addSupplement=!1,this.btnGroupActionSet={BACK:()=>this.back(),REJECT:()=>this.reject(),CANCEL:()=>this.cancel(),CONFIRM:()=>this.confirm(),TRUSTEE_REJECT:()=>this.trusteeReject(),TRUSTEE_CONFIRM:()=>this.trusteeConfirm(),UPLOAD_SUPPLEMENT_FILE:()=>this.uploadSupplementFile()},this.transactionType=lt,this.receiptInfo=new Vr,this.supplementInfo=new Vr,this.cashDepositWithdraw=new _l,this.supplementTransaction=new yl,this.documentsFileName=[]}ngOnInit(){this.cashDepositWithdraw=this.data,this.cashDepositWithdraw.date=this.data.registerDate.split("T")[0],this.cashDepositWithdraw.time=this.data.registerDate.split("T")[1],this.cashDepositWithdraw.time=this.cashDepositWithdraw.time.split(".")[0],"DEPOSIT"===this.data.operationType&&this.data.receiptFileId&&this.getFile(this.data.receiptFileId),this.data.supplementFileId&&this.getSupplementFile(this.data.supplementFileId),this.cdr.detectChanges()}ngOnChanges(e){e.data&&!e.data?.firstChange&&this.ngOnInit()}getFile(e){var t=this;return(0,ut.Z)(function*(){t.receiptInfo=yield t.portfolioRequestService.getDocInfo(e)})()}getSupplementFile(e){var t=this;return(0,ut.Z)(function*(){t.supplementInfo=yield t.portfolioRequestService.getDocInfo(e)})()}uploadSupplementFile(){const t=this.data?.supplementFileId,r=this.data?.supplementCode;this.dialog.open(Ds,{injector:this.injector,size:"sm",data:{fileKey:t,supplementCode:r},headerTitle:"\u0622\u067e\u0644\u0648\u062f \u0641\u0627\u06cc\u0644 \u0645\u062a\u0645\u0645",disableClose:!0}).afterClosedSubject.subscribe(y=>{"save"===y.state&&this.grabage.add(this.requestService.update({requestId:this.requestId,action:"UPLOAD_SUPPLEMENT_FILE",type:this.requestType,dto:{fileId:y.fileId,code:y.supplementCode}}).subscribe(()=>{this.toastService.show(kt.SUCCESSFUL_CREATING),this.requestService.reloadOnInitSubject$.next(!0)}))})}get hasSupplementDoc(){return!!this.data.supplementFileId}static#e=this.\u0275fac=function(t){return new(t||Re)(i.Y36(Vi),i.Y36(q.gz),i.Y36(Zr),i.Y36(Y.jn),i.Y36(i.zs3),i.Y36(wr),i.Y36(i.sBO))};static#t=this.\u0275cmp=i.Xpm({type:Re,selectors:[["pfo-contract-transaction-request"]],viewQuery:function(t,r){if(1&t&&i.Gf(f,5),2&t){let h;i.iGM(h=i.CRH())&&(r.formBox1=h.first)}},inputs:{isAdmin:"isAdmin"},outputs:{changeRequest:"changeRequest"},features:[i.qOj,i.TTD],decls:5,vars:5,consts:[[3,"isAdmin","contract"],[4,"ngIf"],[1,""],[3,"config","btnClicked"],["form","ngForm"],[1,"row","gx-3"],[3,"ngClass"],["formBox",""],[1,"row"],[1,"col-md-4"],["label","\u0646\u0648\u0639 \u0639\u0645\u0644\u06cc\u0627\u062a"],["type","text","name","operationTypeTitle","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0639\u0644\u062a \u0628\u0631\u062f\u0627\u0634\u062a"],["type","text","name","reasonTypeTitle","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0645\u0628\u0644\u063a"],["name","amount",3,"ngModel","disabled","ngModelChange"],["label","\u062a\u0627\u0631\u06cc\u062e \u0648\u0627\u0631\u06cc\u0632"],["name","start_date",3,"ngModel","disabled","ngModelChange"],["label","\u0633\u067e\u0631\u062f\u0647 \u062c\u0627\u0631\u06cc \u0633\u0628\u062f\u06af\u0631\u062f\u0627\u0646\u06cc"],["type","text","name","depositTitle","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0633\u067e\u0631\u062f\u0647 \u0645\u0634\u062a\u0631\u06cc"],["type","text","name","partyDepositTitle","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-4",4,"ngIf"],[1,"col-md-12"],["label","\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"],["type","text","name","note","rows","2",1,"form-control",3,"disabled","ngModel","ngModelChange"],["class","col-md-3",4,"ngIf"],["label","\u0634\u0645\u0627\u0631\u0647 \u0645\u062a\u0645\u0645"],["type","text","name","supplementCode",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"col-md-3"],[1,"mb-0","overflow-y-auto",3,"pfoMatchHeight"],["title","\u062a\u0635\u0648\u06cc\u0631 \u0645\u062a\u0645\u0645",3,"fileName","docSize","extension","fileId","downloader","disabled","required"],[1,"col-md-9"],["label","\u0639\u0644\u062a \u0648\u0627\u0631\u06cc\u0632"],["mtsOnlyNumber","","name","amount",3,"ngModel","disabled","ngModelChange"],["label","\u0633\u0627\u0639\u062a \u0648\u0627\u0631\u06cc\u0632"],["type","time","name","time","min","00:00","max","23:59",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u0633\u067e\u0631\u062f\u0647 \u0642\u0631\u0627\u0631\u062f\u0627\u062f"],["label","\u0631\u0648\u0634 \u0648\u0627\u0631\u06cc\u0632"],["type","text","name","transferMethodTitle","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc / \u0634\u0645\u0627\u0631\u0647 \u0631\u0633\u06cc\u062f"],["type","text","name","referenceId",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"row","d-flex","justify-content-center"],["title","\u062a\u0635\u0648\u06cc\u0631 \u0631\u0633\u06cc\u062f",3,"fileName","docSize","extension","fileId","downloader","disabled","required"],["class","mt-3",4,"ngIf"],[1,"mt-3"]],template:function(t,r){1&t&&(i._UZ(0,"pfo-contract-detail",0),i.YNc(1,B,31,13,"form",1),i.YNc(2,Ce,41,24,"form",1),i.TgZ(3,"mts-card",2)(4,"pfo-btn-group-box",3),i.NdJ("btnClicked",function(y){return r.onBtnClicked(y)}),i.qZA()()),2&t&&(i.Q6J("isAdmin",!1)("contract",r.contract),i.xp6(1),i.Q6J("ngIf","WITHDRAW"===r.data.operationType),i.xp6(1),i.Q6J("ngIf","DEPOSIT"===r.data.operationType),i.xp6(2),i.Q6J("config",r.config))},styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--bs-primary)}[_nghost-%COMP%]     .card{margin-bottom:1rem!important}"]})}class I{constructor(e,t){this.data=e,this.ref=t,this.content=e.content,this.acceptTitle=e.acceptTitle??"\u0628\u0644\u06cc",this.rejectTitle=e.rejectTitle??"\u062e\u06cc\u0631"}next(){this.ref.close("accept")}back(){this.ref.close("close")}static#e=this.\u0275fac=function(t){return new(t||I)(i.Y36(Y.zt),i.Y36(Y.U8))};static#t=this.\u0275cmp=i.Xpm({type:I,selectors:[["pfo-confirm-modal"]],decls:6,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"col-12","mt-3"],[3,"withNextArrow","withBackArrow","nextTitle","backTitle","next","back"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i._uU(2),i.qZA(),i._UZ(3,"br"),i.TgZ(4,"div",2)(5,"mts-next-back-btns",3),i.NdJ("next",function(){return r.next()})("back",function(){return r.back()}),i.qZA()()()),2&t&&(i.xp6(2),i.Oqu(r.content),i.xp6(3),i.Q6J("withNextArrow",!1)("withBackArrow",!1)("nextTitle",r.acceptTitle)("backTitle",r.rejectTitle))},dependencies:[ye.J]})}class R{static#e=this.\u0275fac=function(t){return new(t||R)};static#t=this.\u0275mod=i.oAB({type:R});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.P7,Y.kx,Y.SK]})}var S=N(408),U=N(8680),$=N(4148);const Rt=(..._)=>{(0,i.X6Q)()&&console.log("[MTS-PORTFOLIO-MANAGEMENT]:",..._)};class Xt{constructor(e){this.el=e}ngAfterViewInit(){setTimeout(()=>this.matchHeight())}matchHeight(){if(this.targetElement){const e=this.targetElement.nativeElement.offsetHeight;Rt(e),this.el.nativeElement.style.height=`${e}px`}}static#e=this.\u0275fac=function(t){return new(t||Xt)(i.Y36(i.SBq))};static#t=this.\u0275dir=i.lG2({type:Xt,selectors:[["","pfoMatchHeight",""]],inputs:{targetElement:["pfoMatchHeight","targetElement"]},standalone:!0})}class yn{static#e=this.\u0275fac=function(t){return new(t||yn)};static#t=this.\u0275mod=i.oAB({type:yn});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,ma,Li,ga,R,Kr,ts]})}function zn(_,e){if(1&_&&i._UZ(0,"embed",1),2&_){const t=i.oxw();i.uIk("src",t.pdfUrl,i.uOi)}}i.B6R(Re,[gn.mk,gn.O5,de._Y,de.Fj,de.JJ,de.JL,de.On,de.F,dr.A,Eo.h,S.L,U.l,$.p,Ts,Ii,ps,Xt],[]);class Rn{constructor(e,t){this.data=e,this.ref=t,this.pdfUrl=e.content}static#e=this.\u0275fac=function(t){return new(t||Rn)(i.Y36(Y.zt),i.Y36(Y.U8))};static#t=this.\u0275cmp=i.Xpm({type:Rn,selectors:[["pfo-display-pdf-modal"]],decls:1,vars:1,consts:[["type","application/pdf","width","100%","height","700px",4,"ngIf"],["type","application/pdf","width","100%","height","700px"]],template:function(t,r){1&t&&i.YNc(0,zn,1,1,"embed",0),2&t&&i.Q6J("ngIf",r.pdfUrl)},dependencies:[gn.O5]})}const qn=["prxInfoBox"];function Mi(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",34)(2,"input",35),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.birthCertificateNumber=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.birthCertificateNumber)}}function Si(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",36)(2,"input",37),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.birthCertificateSerial=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.birthCertificateSerial)}}function Ei(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",38)(2,"input",39),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.birthCertificateIssueLocation=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.birthCertificateIssueLocation)}}function Lr(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",40)(2,"input",41),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.fatherName=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.fatherName)}}function ui(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",42)(2,"input",43),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.registeredNumber=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.registeredNumber)}}function tr(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",8)(1,"mts-form-field",44)(2,"input",45),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.customerInfo.registeredLocation=h)}),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.customerInfo.registeredLocation)}}function fr(_,e){if(1&_&&(i.TgZ(0,"div",19),i._UZ(1,"pfo-upload-document",46),i.qZA()),2&_){const t=e.$implicit,r=i.oxw();i.xp6(1),i.Q6J("fileName",t.fileName)("docSize",t.fileSize)("extension",t.extension)("fileId",t.key)("downloader",r.portfolioService.fileDownloader)("disabled",!0)("required",!1)}}const Ji=function(_){return{"max-height.px":_}};class zi{constructor(e,t,r){this.portfolioService=e,this.dialog=t,this.injector=r,this.contract=new la,this.company=new ua,this.securities=[],this.customerInfo={},this.maxHeight="600px",this.grabage=new fe.w0}ngOnInit(){this.getDocumentsFile(),setTimeout(()=>{this.setPageInfo()},0)}ngOnChanges(e){e.data&&!e.data?.firstChange&&this.ngOnInit()}getDocumentsFile(){this.data&&this.data?.requestDocument&&(this.data.documents=[...this.data.documents,this.data?.requestDocument])}setPageInfo(){this.data&&(this.data?.securityTransactions&&(this.securities=this.data.securityTransactions),this.data?.company&&(this.company=this.data.company),this.data?.documents&&(this.documents=this.data.documents),this.setCustomerInfo(),this.setDocBoxHeight())}get dataSource(){return new Y.P3(this.securities)}openModal(e){this.dialog.open(Rn,{injector:this.injector,size:"xl",data:{content:e},headerTitle:"\u0641\u0627\u06cc\u0644 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u06a9\u062f \u0627\u062e\u062a\u0635\u0627\u0635\u06cc \u0633\u0628\u062f \u06af\u0631\u062f\u0627\u0646\u06cc"})}setDocBoxHeight(){this.maxHeight=this.prxInfoBox.nativeElement.offsetHeight}setBrokers(e){let t="",r="";return e?.financial?.financialBrokers&&e?.financial?.financialBrokers.length>0&&e.financial.financialBrokers.forEach(h=>{r+=`${t}${h.title}`,t=" , "}),r}setCustomerInfo(){const e=this.data.customerInfo;this.customerInfo.ssn=e.ssn??"",this.customerInfo.sejamTraceCode=e.sejamTraceCode??"",this.customerInfo.tradingCode=e?.tradingCodes[0]?.code??"",this.customerInfo.brokers=this.setBrokers(e),"INDIVIDUAL"===this.customerType?(this.customerInfo.birthCertificateNumber=e?.individualCustomer?.birthCertificateNumber??"",this.customerInfo.birthCertificateSerial=e?.individualCustomer?.birthCertificateSerial??"",this.customerInfo.birthCertificateIssueLocation=e?.individualCustomer?.birthCertificateIssueLocation??"",this.customerInfo.fatherName=e?.individualCustomer?.fatherName??""):(this.customerInfo.registeredLocation=e?.legalCustomer?.registeredLocation??"",this.customerInfo.registeredNumber=e?.legalCustomer?.registeredNumber??"")}get customerType(){return this.contract.customerType??"INDIVIDUAL"}get ssnLabel(){return"INDIVIDUAL"===this.customerType?"\u06a9\u062f \u0645\u0644\u06cc":"\u0634\u0646\u0627\u0633\u0647 \u0645\u0644\u06cc"}static#e=this.\u0275fac=function(t){return new(t||zi)(i.Y36(wr),i.Y36(Y.jn),i.Y36(i.zs3))};static#t=this.\u0275cmp=i.Xpm({type:zi,selectors:[["pfo-prx-code-info"]],viewQuery:function(t,r){if(1&t&&i.Gf(qn,5),2&t){let h;i.iGM(h=i.CRH())&&(r.prxInfoBox=h.first)}},inputs:{data:"data",contract:"contract"},features:[i.TTD],decls:52,vars:22,consts:[[3,"contract"],[1,"row","pe-3","gx-3"],[1,"col-md-9"],["prxInfoBox",""],[1,"mt-4"],["novalidate",""],["form","ngForm"],[1,"row","py-4"],[1,"col-md-4"],[3,"label"],["id","ssn","name","ssn","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-4",4,"ngIf"],["label","\u06a9\u062f \u0645\u0639\u0627\u0645\u0644\u0627\u062a\u06cc"],["name","tradingCode","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u06a9\u0627\u0631\u06af\u0632\u0627\u0631 \u0646\u0627\u0638\u0631"],["name","brokers","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc \u0633\u062c\u0627\u0645"],["name","sejamTraceCode","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"my-3"],["label","\u0646\u0627\u0645 \u0634\u0631\u06a9\u062a"],["name","name","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639 \u0645\u062c\u0648\u0632"],["name","licenseIssueDate",3,"ngModel","disabled","ngModelChange"],["label","\u062a\u0627\u0631\u06cc\u062e \u067e\u0627\u06cc\u0627\u0646 \u0645\u062c\u0648\u0632"],["name","licenseExpireDate",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],[1,"mb-0","overflow-y-auto",3,"ngStyle"],["class","my-3",4,"ngFor","ngForOf"],[3,"dataSource"],["title","\u0646\u0627\u0645 \u0646\u0645\u0627\u062f","type","text","name","securityName"],["title","\u062a\u0639\u062f\u0627\u062f \u0633\u0647\u0627\u0645","type","text","name","quantity"],["title","\u062a\u0639\u062f\u0627\u062f \u062d\u0642 \u062a\u0642\u062f\u0645","type","text","name","preemptiveRightCount"],["title","\u062a\u0639\u062f\u0627\u062f \u0633\u0647\u0627\u0645 \u062c\u0627\u06cc\u0632\u0647","type","text","name","bonusShareCount"],["label","\u0634\u0645\u0627\u0631\u0647 \u0634\u0646\u0627\u0633\u0646\u0627\u0645\u0647"],["name","birthCertificateNumber","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0633\u0631\u06cc\u0627\u0644 \u0634\u0646\u0627\u0633\u0646\u0627\u0645\u0647"],["name","birthCertificateSerial","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0645\u062d\u0644 \u0635\u062f\u0648\u0631"],["name","birthCertificateIssueLocation","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0646\u0627\u0645 \u067e\u062f\u0631"],["name","fatherName","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0634\u0645\u0627\u0631\u0647 \u062b\u0628\u062a"],["name","registeredNumber","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0645\u062d\u0644 \u062b\u0628\u062a"],["name","registeredLocation","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["title","\u062a\u0635\u0648\u06cc\u0631",3,"fileName","docSize","extension","fileId","downloader","disabled","required"]],template:function(t,r){1&t&&(i._UZ(0,"pfo-contract-detail",0),i.TgZ(1,"div",1)(2,"div",2)(3,"div",null,3)(5,"mts-card")(6,"h5",4),i._uU(7,"\u0645\u0634\u062e\u0635\u0627\u062a \u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631"),i.qZA(),i.TgZ(8,"form",5,6)(10,"div",7)(11,"div",8)(12,"mts-form-field",9)(13,"input",10),i.NdJ("ngModelChange",function(y){return r.customerInfo.ssn=y}),i.qZA()()(),i.YNc(14,Mi,3,1,"div",11),i.YNc(15,Si,3,1,"div",11),i.YNc(16,Ei,3,1,"div",11),i.YNc(17,Lr,3,1,"div",11),i.YNc(18,ui,3,1,"div",11),i.YNc(19,tr,3,1,"div",11),i.TgZ(20,"div",8)(21,"mts-form-field",12)(22,"input",13),i.NdJ("ngModelChange",function(y){return r.customerInfo.tradingCode=y}),i.qZA()()(),i.TgZ(23,"div",8)(24,"mts-form-field",14)(25,"input",15),i.NdJ("ngModelChange",function(y){return r.customerInfo.brokers=y}),i.qZA()()(),i.TgZ(26,"div",8)(27,"mts-form-field",16)(28,"input",17),i.NdJ("ngModelChange",function(y){return r.customerInfo.sejamTraceCode=y}),i.qZA()()()()(),i.TgZ(29,"div",18)(30,"h5",19),i._uU(31,"\u0645\u0634\u062e\u0635\u0627\u062a \u0634\u0631\u06a9\u062a"),i.qZA(),i.TgZ(32,"div",8)(33,"mts-form-field",20)(34,"input",21),i.NdJ("ngModelChange",function(y){return r.company.name=y}),i.qZA()()(),i.TgZ(35,"div",8)(36,"mts-form-field",22)(37,"mts-date-picker",23),i.NdJ("ngModelChange",function(y){return r.company.licenseIssueDate=y}),i.qZA()()(),i.TgZ(38,"div",8)(39,"mts-form-field",24)(40,"mts-date-picker",25),i.NdJ("ngModelChange",function(y){return r.company.licenseExpireDate=y}),i.qZA()()()()()()(),i.TgZ(41,"div",26)(42,"mts-card",27),i.YNc(43,fr,2,7,"div",28),i.qZA()()(),i.TgZ(44,"mts-card")(45,"h5",4),i._uU(46,"\u0633\u0647\u0645 \u0647\u0627\u06cc \u0627\u0646\u062a\u0642\u0627\u0644\u06cc \u0628\u0647 \u06a9\u062f \u0633\u0628\u062f\u06af\u0631\u062f\u0627\u0646"),i.qZA(),i.TgZ(47,"mts-data-table",29),i._UZ(48,"mts-data-table-col",30)(49,"mts-data-table-col",31)(50,"mts-data-table-col",32)(51,"mts-data-table-col",33),i.qZA()()),2&t&&(i.Q6J("contract",r.contract),i.xp6(12),i.Q6J("label",r.ssnLabel),i.xp6(1),i.Q6J("ngModel",r.customerInfo.ssn),i.xp6(1),i.Q6J("ngIf","INDIVIDUAL"===r.customerType),i.xp6(1),i.Q6J("ngIf","INDIVIDUAL"===r.customerType),i.xp6(1),i.Q6J("ngIf","INDIVIDUAL"===r.customerType),i.xp6(1),i.Q6J("ngIf","INDIVIDUAL"===r.customerType),i.xp6(1),i.Q6J("ngIf","LEGAL"===r.customerType),i.xp6(1),i.Q6J("ngIf","LEGAL"===r.customerType),i.xp6(3),i.Q6J("ngModel",r.customerInfo.tradingCode),i.xp6(3),i.Q6J("ngModel",r.customerInfo.brokers),i.xp6(3),i.Q6J("ngModel",r.customerInfo.sejamTraceCode),i.xp6(6),i.Q6J("ngModel",r.company.name),i.xp6(3),i.Q6J("ngModel",r.company.licenseIssueDate)("disabled",!0),i.xp6(3),i.Q6J("ngModel",r.company.licenseExpireDate)("disabled",!0),i.xp6(2),i.Q6J("ngStyle",i.VKq(20,Ji,r.maxHeight)),i.xp6(1),i.Q6J("ngForOf",r.documents),i.xp6(4),i.Q6J("dataSource",r.dataSource))},styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--bs-primary)}"]})}class nr{static#e=this.\u0275fac=function(t){return new(t||nr)};static#t=this.\u0275mod=i.oAB({type:nr});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,Li,ma,ts]})}i.B6R(zi,[gn.sg,gn.O5,gn.PC,de._Y,de.Fj,de.JJ,de.JL,de.On,de.F,dr.A,Eo.h,S.L,Co.Q,gs.U,Ii,Ts],[]);class Bi{static#e=this.\u0275fac=function(t){return new(t||Bi)};static#t=this.\u0275mod=i.oAB({type:Bi});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK]})}function Zi(_,e){1&_&&(i._uU(0),i.ALo(1,"jalaliDate")),2&_&&i.hij(" ",i.xi3(1,1,e.$implicit.activityTime,!0)," ")}function Ms(_,e){if(1&_&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.xp6(1),i.Oqu(!0===t.succeed?"\u0627\u0646\u062c\u0627\u0645 \u0634\u062f\u0647":"\u0627\u0646\u062c\u0627\u0645 \u0646\u0634\u062f\u0647")}}const Ss=function(_){return["show",_]},ja=function(){return{mode:"show"}};function ks(_,e){if(1&_&&(i.TgZ(0,"a",8),i._UZ(1,"i",9),i.qZA()),2&_){const t=e.$implicit;i.xp6(1),i.Q6J("routerLink",i.VKq(2,Ss,t.id))("state",i.DdM(4,ja))}}class $o{static#e=this.\u0275fac=function(t){return new(t||$o)};static#t=this.\u0275cmp=i.Xpm({type:$o,selectors:[["pfo-activity-logs-list"]],inputs:{data:"data"},decls:12,vars:1,consts:[[3,"dataSource"],["title","\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631","type","text","name","userFullName"],["title","\u0646\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a ","type","text","name","operationDescription"],["title","\u0646\u0627\u0645 \u0633\u0627\u0645\u0627\u0646\u0647","type","text","name","clientTypeTitle"],["title","\u0632\u0645\u0627\u0646 \u0639\u0645\u0644\u06cc\u0627\u062a"],["title","\u0648\u0636\u0639\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a"],["title","\u0633\u0637\u062d \u0644\u0627\u06af ","type","text","name","activityLevelTitle"],["cellClass","text-start text-primary","name","operation"],["role","button"],["title","\u0645\u0634\u0627\u0647\u062f\u0647",1,"fas","fa-eye","mx-3",3,"routerLink","state"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"mts-data-table",0),i._UZ(2,"mts-data-table-col",1)(3,"mts-data-table-col",2)(4,"mts-data-table-col",3),i.TgZ(5,"mts-data-table-col",4),i.YNc(6,Zi,2,4,"ng-template"),i.qZA(),i.TgZ(7,"mts-data-table-col",5),i.YNc(8,Ms,2,1,"ng-template"),i.qZA(),i._UZ(9,"mts-data-table-col",6),i.TgZ(10,"mts-data-table-col",7),i.YNc(11,ks,2,5,"ng-template"),i.qZA()()()),2&t&&(i.xp6(1),i.Q6J("dataSource",r.data))},dependencies:[q.rH,dr.A,Co.Q,gs.U,p.K]})}class is{constructor(e,t){this.data=e,this.ref=t,this.description="",this.content=e.content,this.acceptTitle=e.acceptTitle??"\u0628\u0644\u06cc",this.rejectTitle=e.rejectTitle??"\u062e\u06cc\u0631"}next(){this.ref.close({status:"accept",description:this.description})}back(){this.ref.close({status:"close",description:this.description})}static#e=this.\u0275fac=function(t){return new(t||is)(i.Y36(Y.zt),i.Y36(Y.U8))};static#t=this.\u0275cmp=i.Xpm({type:is,selectors:[["pfo-action-confirm-modal"]],decls:9,vars:6,consts:[[1,"row"],[1,"col-12"],["label","\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","mt-3"],[3,"withNextArrow","withBackArrow","nextTitle","backTitle","next","back"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i._uU(2),i.qZA(),i.TgZ(3,"div",1)(4,"mts-form-field",2)(5,"textarea",3),i.NdJ("ngModelChange",function(y){return r.description=y}),i.qZA()()(),i._UZ(6,"br"),i.TgZ(7,"div",4)(8,"mts-next-back-btns",5),i.NdJ("next",function(){return r.next()})("back",function(){return r.back()}),i.qZA()()()),2&t&&(i.xp6(2),i.Oqu(r.content),i.xp6(3),i.Q6J("ngModel",r.description),i.xp6(3),i.Q6J("withNextArrow",!1)("withBackArrow",!1)("nextTitle",r.acceptTitle)("backTitle",r.rejectTitle))},dependencies:[ye.J,Eo.h,de.Fj,de.JJ,de.On]})}class ol{static#e=this.\u0275fac=function(t){return new(t||ol)};static#t=this.\u0275mod=i.oAB({type:ol});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.P7,Y.kx,Y.SK]})}function sl(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"form",null,1)(2,"mts-card")(3,"div",2)(4,"div",3)(5,"mts-form-field",4)(6,"input",5),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.productModel.businessTypeTitle=h)}),i.qZA()()(),i.TgZ(7,"div",3)(8,"mts-form-field",6)(9,"input",7),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.productModel.name=h)}),i.qZA()()(),i.TgZ(10,"div",3)(11,"mts-form-field",8)(12,"input",9),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.productModel.code=h)}),i.qZA()()()()()()}if(2&_){const t=i.oxw();i.xp6(6),i.Q6J("ngModel",t.productModel.businessTypeTitle)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.productModel.name)("disabled",!0),i.xp6(3),i.Q6J("ngModel",t.productModel.code)("disabled",!0)}}class Cl{static#e=this.\u0275fac=function(t){return new(t||Cl)};static#t=this.\u0275cmp=i.Xpm({type:Cl,selectors:[["pfo-product-detail"]],inputs:{productModel:"productModel"},decls:1,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"row"],[1,"col-md-3"],["label","\u0646\u0648\u0639 \u06a9\u0633\u0628 \u06a9\u0627\u0631"],["type","text","name","microserviceName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u0646\u0627\u0645 \u0645\u062d\u0635\u0648\u0644"],["type","text","name","name",1,"form-control",3,"ngModel","disabled","ngModelChange"],["label","\u06a9\u062f \u0645\u062d\u0635\u0648\u0644"],["type","text","name","code",1,"form-control",3,"ngModel","disabled","ngModelChange"]],template:function(t,r){1&t&&i.YNc(0,sl,13,6,"form",0),2&t&&i.Q6J("ngIf",r.productModel)},dependencies:[gn.O5,de._Y,de.Fj,de.JJ,de.JL,de.On,de.F,dr.A,Eo.h]})}class Ys{static#e=this.\u0275fac=function(t){return new(t||Ys)};static#t=this.\u0275mod=i.oAB({type:Ys});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK]})}var Tl=N(4567),vu=N(4080);const Ac=["overlay"];function Ic(_,e){1&_&&(i.TgZ(0,"div",1)(1,"div",2),i.Hsn(2),i.qZA()())}const Oc=["*"];class ou{constructor(e,t){this.overlay=e,this.viewContainerRef=t,this.hasBackdrop=!1}toggle(e,t){this.overlayRef&&this.overlayRef.hasAttached()?this.closeOverlay():this.openPanel(e,t)}openPanel(e,t){const r=t||new i.SBq(e.target);this.positionStrategy=this.overlay.position().flexibleConnectedTo(r).withPositions([new Tl.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"})]);const h=new Tl.X_({hasBackdrop:this.hasBackdrop,positionStrategy:this.positionStrategy});this.overlayRef=this.overlay.create(h),this.backdropClickSubscription=this.overlayRef.backdropClick().subscribe(()=>{this.closeOverlay()});const y=new vu.UE(this.overlayTemplate,this.viewContainerRef);this.overlayRef.attach(y)}closeOverlay(){this.overlayRef&&this.overlayRef.detach()}static#e=this.\u0275fac=function(t){return new(t||ou)(i.Y36(Tl.aV),i.Y36(i.s_b))};static#t=this.\u0275cmp=i.Xpm({type:ou,selectors:[["pfo-overlay-panel"]],viewQuery:function(t,r){if(1&t&&i.Gf(Ac,7),2&t){let h;i.iGM(h=i.CRH())&&(r.overlayTemplate=h.first)}},inputs:{hasBackdrop:"hasBackdrop"},ngContentSelectors:Oc,decls:2,vars:0,consts:[["overlay",""],[1,"overlaypanel","border","rounded-2","shadow","p-2","mt-3","bg-white"],[1,"overlay-content"]],template:function(t,r){1&t&&(i.F$t(),i.YNc(0,Ic,3,0,"ng-template",null,0,i.W1O))},styles:[".overlaypanel[_ngcontent-%COMP%]{z-index:9999;min-width:60px}"],changeDetection:0})}function bu(_){return typeof _>"u"||null===_}function ya(_,e){_=_.replace(/\s*([+\-x/])\s*/g,"$1");const h="\\d+(\\.\\d+)?",D=new RegExp(`^-?(${h}|${e})([+\\-*/](${h}|${e}))*$`,"g");return e?D.test(_.trim()):/^-?\d+(\.\d+)?([+\-*/]\d+(\.\d+)?)*$/.test(_.trim())}const Xc=["panel"],Pc=["panelRef",""];function To(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"li",15),i.NdJ("focusout",function(){i.CHM(t);const h=i.MAs(2),y=i.oxw(2).$implicit,D=i.oxw();return i.KtG(D.onSpanClicked(h,y))}),i.TgZ(1,"span",16,17),i.NdJ("input",function(h){i.CHM(t);const y=i.oxw(2).$implicit,D=i.oxw();return i.KtG(D.onContentChange(h,y))}),i._uU(3),i.qZA()()}if(2&_){const t=i.oxw(2).$implicit;i.xp6(3),i.Oqu(t.value)}}function xu(_,e){if(1&_&&(i.TgZ(0,"li",18)(1,"span",19),i._uU(2),i.qZA()()),2&_){const t=i.oxw(2).$implicit;i.xp6(2),i.Oqu(t.value)}}function Vl(_,e){if(1&_&&(i.ynx(0),i.YNc(1,To,4,1,"li",13),i.YNc(2,xu,3,1,"li",14),i.BQk()),2&_){const t=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!t.disabled),i.xp6(1),i.Q6J("ngIf",t.disabled)}}function bc(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"i",22),i.NdJ("click",function(){i.CHM(t);const h=i.oxw(2).$implicit,y=i.oxw();return i.KtG(y.deleteTag(h))}),i.qZA()}}function Im(_,e){if(1&_&&(i.ynx(0),i.TgZ(1,"li",20)(2,"span"),i._uU(3),i.qZA(),i.YNc(4,bc,1,0,"i",21),i.qZA(),i.BQk()),2&_){const t=i.oxw().$implicit,r=i.oxw();i.xp6(3),i.Oqu(t.text),i.xp6(1),i.Q6J("ngIf",!r.disabled)}}function jh(_,e){if(1&_&&(i.ynx(0)(1,11),i.YNc(2,Vl,3,2,"ng-container",12),i.YNc(3,Im,5,2,"ng-container",12),i.BQk()()),2&_){const t=e.$implicit;i.xp6(1),i.Q6J("ngSwitch",t.type),i.xp6(1),i.Q6J("ngSwitchCase","input"),i.xp6(1),i.Q6J("ngSwitchCase","tag")}}function Vh(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"li",23)(1,"input",24),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.inputValue=h)})("ngModelChange",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.makeModel())}),i.qZA()()}if(2&_){const t=i.oxw();let r;i.xp6(1),i.Q6J("placeholder",null!==(r=t.placeholder)&&void 0!==r?r:"")("disabled",t.disabled)("required",t.required)("ngModel",t.inputValue)}}const yd=function(_){return{opacity:_}},Of=["*"];class kc{constructor(e,t){this.inj=e,this.renderer=t,this.required=!1,this.disabled=!1,this.chipsOnly=!1,this.inputValue=null,this.variables=[],this.replacements={Title:"\u0634\u0631\u062d",AMT:"\u0645\u0628\u0644\u063a",DTL:"\u062a\u0641\u0635\u06cc\u0644"},this.onTouch=()=>{},this.onChange=r=>{this.onTouch()}}ngOnInit(){this.inputTag.subscribe(e=>{e&&(this.inputValue&&this.variables.push({type:"input",value:this.inputValue}),this.variables.push(e),this.panel.closeOverlay()),this.inputValue=null,this.makeModel()})}ngAfterViewInit(){this.ngControl=this.inj.get(de.a5)}onSpanClicked(e,t){t.value=e.textContent,this.makeModel()}writeValue(e){this.combineSegments(e),this._value=e,this.onChange(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){}combineSegments(e){if(!bu(e)){const r=e.split(/(\b(?:Title[1-9]|AMT[1-9])|DTL[1-9]\b)/gi);this.inputValue=r.pop(),r.forEach((h,y)=>{if(y%2==0)this.variables.push({type:"input",value:h});else{const D=this.replaceWords(h,this.replacements);this.variables.push({type:"tag",value:h,text:D})}})}}replaceWords(e,t){let r=e;return Object.keys(t).forEach(h=>{const y=new RegExp(h,"g");r=r.replace(y,t[h])}),r}onContentChange(e,t){t.value=e.target.innerText,this.makeModel()}makeModel(){let e="";this.variables.forEach(t=>{e+=t.value}),e+=null==this.inputValue?"":this.inputValue,console.log(e),this.onChange(e)}deleteTag(e){const t=this.variables.findIndex(r=>r.value===e.value);-1!==t&&(this.variables.splice(t,1),this.makeModel())}clearInput(){this.variables=[],this.onChange(null)}set model(e){this._value=e}get model(){return this._value}static#e=this.\u0275fac=function(t){return new(t||kc)(i.Y36(i.zs3),i.Y36(i.Qsj))};static#t=this.\u0275cmp=i.Xpm({type:kc,selectors:[["pfo-input-chips","panelRef",""]],viewQuery:function(t,r){if(1&t&&i.Gf(Xc,5),2&t){let h;i.iGM(h=i.CRH())&&(r.panel=h.first)}},inputs:{inputTag:"inputTag",placeholder:"placeholder",required:"required",disabled:"disabled",chipsOnly:"chipsOnly",panelRef:"panelRef",inputValue:"inputValue"},features:[i._Bn([{provide:de.JU,useExisting:(0,i.Gpc)(()=>kc),multi:!0}])],attrs:Pc,ngContentSelectors:Of,decls:13,vars:14,consts:[[1,"bg-light"],[1,"input-group"],["type","button",1,"input-group-text","cursor-pointer","border-0",3,"ngStyle","disabled","click"],[1,"fa-solid","fa-ellipsis"],[1,"form-control","d-flex","align-items-center"],[4,"ngFor","ngForOf"],["class","w-100",4,"ngIf"],[1,"fa-solid","fa-close"],[3,"hasBackdrop"],["panel",""],[3,"ngModel","hidden","required","ngModelChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","pr-input",3,"focusout",4,"ngIf"],["class","pr-input",4,"ngIf"],[1,"pr-input",3,"focusout"],["contenteditable","true","dir","rtl",1,"w-100","editable-span",3,"input"],["editableSpans",""],[1,"pr-input"],["dir","rtl",1,"w-100"],[1,"selected-tag","d-flex","bg-light","px-2","my-1","mx-1","align-items-center","rounded-5"],["class","fa fa-times",3,"click",4,"ngIf"],[1,"fa","fa-times",3,"click"],[1,"w-100"],["type","text","direction","rtl","aria-autocomplete","none","autocomplete","off","name","inputValue",1,"form-control",3,"placeholder","disabled","required","ngModel","ngModelChange"]],template:function(t,r){if(1&t){const h=i.EpF();i.F$t(),i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(D){i.CHM(h);const F=i.MAs(10);return i.KtG(F.toggle(D))}),i._UZ(3,"i",3),i.qZA(),i.TgZ(4,"ul",4),i.YNc(5,jh,4,3,"ng-container",5),i.YNc(6,Vh,2,4,"li",6),i.qZA(),i.TgZ(7,"button",2),i.NdJ("click",function(){return r.clearInput()}),i._UZ(8,"i",7),i.qZA()()(),i.TgZ(9,"pfo-overlay-panel",8,9),i.Hsn(11),i.qZA(),i.TgZ(12,"input",10),i.NdJ("ngModelChange",function(D){return r.model=D}),i.qZA()}2&t&&(i.xp6(2),i.Q6J("ngStyle",i.VKq(10,yd,r.disabled?"1":"0.8"))("disabled",r.disabled),i.xp6(3),i.Q6J("ngForOf",r.variables),i.xp6(1),i.Q6J("ngIf",!r.chipsOnly),i.xp6(1),i.Q6J("ngStyle",i.VKq(12,yd,r.disabled?"1":"0.8"))("disabled",r.disabled),i.xp6(2),i.Q6J("hasBackdrop",!0),i.xp6(3),i.Q6J("ngModel",r.model)("hidden",!0)("required",r.required))},dependencies:[gn.sg,gn.O5,gn.PC,gn.RF,gn.n9,de.Fj,de.JJ,de.Q7,de.On,ou],styles:["ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{appearance:none;direction:rtl}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.pr-input[_ngcontent-%COMP%]{white-space:nowrap}.pr-input[_ngcontent-%COMP%]   .editable-span[_ngcontent-%COMP%]{-webkit-user-modify:read-write-plaintext-only;white-space:nowrap}.pr-input[_ngcontent-%COMP%]   .editable-span[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.selected-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;cursor:pointer}.selected-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.selected-tag[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}"]})}zl(".15s cubic-bezier(.7,.3,.1,1)");let qh=(()=>{class _{constructor(t){this._doc=t,this._cssInjected=!1}injectCss(){if(this._doc?.head&&!this._cssInjected){const t=this._doc.getElementsByTagName("head")[0],r=this._doc.createElement("style");r.appendChild(this._doc.createTextNode(".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}@media screen and (-ms-high-contrast: active){.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop,.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.jss-transparent-overlay{background-color:transparent!important}")),t.appendChild(r)}}}return _.\u0275fac=function(t){return new(t||_)(i.LFG(gn.K0,8))},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Up=(()=>{class _{constructor(t){t.injectCss()}}return _.\u0275fac=function(t){return new(t||_)(i.LFG(qh))},_.\u0275mod=i.oAB({type:_}),_.\u0275inj=i.cJS({imports:[gn.ez,Tl.U8]}),_})();new i.OlP("AppConfiguration");class bd{constructor(e){this._data=e,Object.freeze(e)}get name(){return this._data.name}get rtl(){return!0===this._data.rtl}get data(){return this._data}clone(e){return new bd({name:e?.name??this._data.name,rtl:e?.rtl??this._data.rtl,dictionary:e?.dictionary??this._data.dictionary,form:e?.form??this._data.form})}extend(e){return this.clone({dictionary:{...this._data.dictionary,...e?.dictionary},form:{validation:{error:{defaultMessage:this._data?.form?.validation?.error?.defaultMessage,translators:{...this._data?.form?.validation?.error?.translators,...e.errorTranslators}}}}})}translateError(e,t){const r=this._data?.form?.validation?.error,h=r?.translators?r.translators[e]:void 0;return"function"==typeof h?h(t):r?.defaultMessage}translateErrors(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]={key:r,value:e[r],text:this.translateError(r,e[r])});return t}translateFirstError(e){const t=Object.keys(e)[0],r=e[t];return{key:t,value:r,text:this.translateError(t,r)}}lookup(e){return this._data.dictionary?this._data.dictionary[e]:void 0}}new bd({name:"enUS",rtl:!1,dictionary:{},form:{validation:{error:{defaultMessage:"\u062e\u0637\u0627",translators:{required:_=>"Required",min:_=>`Minimum value: ${_.requiredMin}`,max:_=>`Maximum value: ${_.requiredMax}`,minlength:_=>`Minimum length: ${_.minlength}`,maxlength:_=>`Maximum length: ${_.maxlength}`,email:_=>"Invalid email"}}}}}),new i.OlP("LOCALE"),new i.OlP("HttpServiceBaseUrl"),new i.OlP("RouterConfigurationToken");class wd{static#e=this.\u0275fac=function(t){return new(t||wd)};static#t=this.\u0275mod=i.oAB({type:wd});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Up]})}class Fc{static#e=this.\u0275fac=function(t){return new(t||Fc)};static#t=this.\u0275mod=i.oAB({type:Fc});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.kx,wd]})}function wc(_,e){if(1&_&&(i.TgZ(0,"option",27),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Cd(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",28),i.NdJ("change",function(h){const D=i.CHM(t).$implicit,F=i.oxw();return i.KtG(F.selectWage(h,D))}),i.qZA()}}class xh extends gr{constructor(e,t,r,h,y,D){super(e),this.data=t,this.ref=r,this.ProductService=h,this.route=y,this.WageService=D,this.getTradeType$=this.enumService.getTradeType(),this.selectedWage=[]}search(){this.dataSource=new Y.in(e=>this.WageService.get(e,this.cleanData(this.searchModel)))}back(){this.router.navigate(["../../.."],{relativeTo:this.route})}selectWage(e,t){const r=e.target.checked,h=this.selectedWage.findIndex(y=>y===t.id);h>-1?this.selectedWage.splice(h,1):r&&this.selectedWage.push(t.id)}confirm(){this.ref.close({status:"accept",selectedWage:this.selectedWage})}close(){this.ref.close(null)}clearSearchModel(){this.searchModel=new Kl}static#e=this.\u0275fac=function(t){return new(t||xh)(i.Y36(Vi),i.Y36(Y.zt),i.Y36(Y.U8),i.Y36(Wi),i.Y36(q.gz),i.Y36(ri))};static#t=this.\u0275cmp=i.Xpm({type:xh,selectors:[["pfo-wage-lookup"]],features:[i.qOj],decls:34,vars:14,consts:[["form","ngForm"],[1,"row"],[1,"col-md-4"],["label","\u0646\u0648\u0639 \u0645\u0639\u0627\u0645\u0644\u0647"],["name","wageType","required","",1,"form-select",3,"ngModel","ngModelChange"],["value","undefined"],[3,"value",4,"ngFor","ngForOf"],["label","\u0627\u0632 \u062a\u0627\u0631\u06cc\u062e"],["name","fromDate",3,"ngModel","ngModelChange"],["label","\u062a\u0627 \u062a\u0627\u0631\u06cc\u062e"],["name","toDate",3,"ngModel","ngModelChange"],[3,"showBack","backTitle","withBackArrow","withNextArrow","nextTitle","nextDisabled","next","back"],[1,"mb-3",3,"dataSource"],["type","text"],["title","\u0646\u0648\u0639 \u0645\u0639\u0627\u0645\u0644\u0647","type","text","name","wageTradeTypeTitle"],["title","\u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0646\u062f\u0647 \u06a9\u0627\u0631\u0645\u0632\u062f","type","text","name","receiverTitle"],["title","\u0646\u0631\u062e \u06a9\u0627\u0631\u0645\u0632\u062f \u062e\u0631\u06cc\u062f","type","number","name","buyRate"],["title","\u0646\u0631\u062e \u06a9\u0627\u0631\u0645\u0632\u062f \u0641\u0631\u0648\u0634","type","number","name","sellRate"],["title","\u0646\u0631\u062e \u0645\u0627\u0644\u06cc\u0627\u062a \u0641\u0631\u0648\u0634\t","type","number","name","sellTaxRate"],["title","\u062d\u062f\u0627\u0642\u0644 \u0645\u0628\u0644\u063a \u06a9\u0627\u0631\u0645\u0632\u062f \u062e\u0631\u06cc\u062f","type","number","name","minBuyWage"],["title","\u062d\u062f\u0627\u06a9\u062b\u0631 \u0645\u0628\u0644\u063a \u06a9\u0627\u0631\u0645\u0632\u062f \u062e\u0631\u06cc\u062f","type","number","name","maxBuyWage"],["title"," \u062d\u062f\u0627\u0642\u0644 \u0645\u0628\u0644\u063a \u06a9\u0627\u0631\u0645\u0632\u062f \u0641\u0631\u0648\u0634","type","number","name","minSellWage"],["title"," \u062d\u062f\u0627\u06a9\u062b\u0631 \u0645\u0628\u0644\u063a \u06a9\u0627\u0631\u0645\u0632\u062f \u0641\u0631\u0648\u0634\t","type","number","name","maxSellWage"],["title"," \u0627\u0632 \u062a\u0627\u0631\u06cc\u062e","type","date","name","fromDate"],["title"," \u062a\u0627 \u062a\u0627\u0631\u06cc\u062e","type","date","name","toDate"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],[3,"value"],["type","checkbox","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){if(1&t&&(i.TgZ(0,"form",null,0)(2,"div",1)(3,"div",2)(4,"mts-form-field",3)(5,"select",4),i.NdJ("ngModelChange",function(y){return r.searchModel.wageType=y}),i.TgZ(6,"option",5),i._uU(7,"\u0647\u0645\u0647"),i.qZA(),i.YNc(8,wc,2,2,"option",6),i.ALo(9,"async"),i.qZA()()(),i.TgZ(10,"div",2)(11,"mts-form-field",7)(12,"mts-date-picker",8),i.NdJ("ngModelChange",function(y){return r.searchModel.from=y}),i.qZA()()(),i.TgZ(13,"div",2)(14,"mts-form-field",9)(15,"mts-date-picker",10),i.NdJ("ngModelChange",function(y){return r.searchModel.to=y}),i.qZA()()()(),i.TgZ(16,"mts-next-back-btns",11),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearAndRefreshSearchForm()}),i.qZA(),i.TgZ(17,"mts-data-table",12)(18,"mts-data-table-col",13),i.YNc(19,Cd,1,0,"ng-template"),i.qZA(),i._UZ(20,"mts-data-table-col",14)(21,"mts-data-table-col",15)(22,"mts-data-table-col",16)(23,"mts-data-table-col",17)(24,"mts-data-table-col",18)(25,"mts-data-table-col",19)(26,"mts-data-table-col",20)(27,"mts-data-table-col",21)(28,"mts-data-table-col",22)(29,"mts-data-table-col",23)(30,"mts-data-table-col",24),i.qZA(),i.TgZ(31,"div",25)(32,"button",26),i.NdJ("click",function(){return r.confirm()}),i._uU(33,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t){const h=i.MAs(1);i.xp6(5),i.Q6J("ngModel",r.searchModel.wageType),i.xp6(3),i.Q6J("ngForOf",i.lcZ(9,12,r.getTradeType$)),i.xp6(4),i.Q6J("ngModel",r.searchModel.from),i.xp6(3),i.Q6J("ngModel",r.searchModel.to),i.xp6(1),i.Q6J("showBack",!0)("backTitle",r.backTitle)("withBackArrow",!1)("withNextArrow",!1)("nextTitle","\u062c\u0633\u062a\u062c\u0648")("nextDisabled",!h.valid),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(15),i.Q6J("disabled",0===r.selectedWage.length)}},dependencies:[gn.sg,de._Y,de.YN,de.Kr,de.EJ,de.JJ,de.JL,de.Q7,de.On,de.F,Eo.h,S.L,Co.Q,gs.U,ye.J,gn.Ov]})}class wh{static#e=this.\u0275fac=function(t){return new(t||wh)};static#t=this.\u0275mod=i.oAB({type:wh});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.SK]})}class id extends Yt{constructor(e){super(e,"accounting-api/resources/accounts")}static#e=this.\u0275fac=function(t){return new(t||id)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:id,factory:id.\u0275fac})}class Nc extends aa{}var Vp=N(3263);function zm(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",23),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectLedger(y))}),i.qZA()}}const Ch=function(_,e){return{"text-success":_,"text-danger":e}};class Kh{constructor(e,t,r,h){this.accountService=e,this.lookupRef=t,this.contractService=r,this.ledgerService=h,this.disableDetail=!1,this.accountSearchModel=new Nc,this.accountModel=new Nc,this.hasResult=!1,this.aliasTitle=""}ngOnInit(){}search(){this.dataSource=new Y.in(e=>this.accountService.get(e,this.accountSearchModel))}selectLedger(e){this.accountModel=e}confirm(e){this.lookupRef.close(this.accountModel.code,`${this.accountModel.code}`,this.accountModel.title)}close(){this.lookupRef.close(null)}clearSearchModel(){this.search()}getLeger(e){null!==e&&4==e.length&&this.ledgerService.read({aliasCode:e},"all").subscribe(t=>{t.length>0?(this.aliasTitle=t[0].aliasTitle,this.hasResult=!0):this.accountSearchModel.aliasTitle="\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})}static#e=this.\u0275fac=function(t){return new(t||Kh)(i.Y36(id),i.Y36(Y.rt),i.Y36(Qt),i.Y36(Ae))};static#t=this.\u0275cmp=i.Xpm({type:Kh,selectors:[["pfo-account-lookup"]],inputs:{hasDetail:"hasDetail",disableDetail:"disableDetail"},features:[i._Bn([id,Ae])],decls:30,vars:17,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-4"],["label","\u0646\u0627\u0645 \u0633\u0628\u062f"],["name","portfolio",3,"dataProvider","textField","valueField","ngModel","placeholder","ngModelChange"],["label","\u06a9\u062f \u0633\u0631\u0641\u0635\u0644 \u0645\u0639\u06cc\u0646"],["type","text","maxlength","4","minlength","4","name","code",1,"form-control",3,"ngModel","input","ngModelChange"],[1,"align-text-bottom","pt-2",3,"ngClass"],["nextTitle","\u062c\u0633\u062a\u062c\u0648",3,"showBack","backTitle","withBackArrow","withNextArrow","next","back"],[3,"dataSource"],["type","text"],["title","\u0646\u0627\u0645 \u0633\u0628\u062f","type","text","name","portfolioName"],["title","\u06a9\u062f \u0633\u0631\u0641\u0635\u0644","type","text","name","ledgerAliasCode"],["title","\u0646\u0648\u0639 \u06a9\u0627\u0631\u0628\u0631\u062f","type","text","name","usageTypeTitle"],["title","\u06a9\u062f \u062a\u0641\u0635\u06cc\u0644","type","text","name","detailCode"],["title","\u0634\u0645\u0627\u0631\u0647 \u062d\u0633\u0627\u0628","type","text","name","code"],["title","\u0646\u0627\u0645 \u062d\u0633\u0627\u0628","name","title"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"div",0)(2,"div",1)(3,"h5",2),i._uU(4," \u0627\u0646\u062a\u062e\u0627\u0628 \u062d\u0633\u0627\u0628 "),i.qZA()(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"mts-form-field",7)(10,"mts-autocomplete",8),i.NdJ("ngModelChange",function(y){return r.accountSearchModel.contractId=y}),i.qZA()()(),i.TgZ(11,"div",6)(12,"mts-form-field",9)(13,"input",10),i.NdJ("input",function(){return r.getLeger(r.accountSearchModel.ledgerAliasCode)})("ngModelChange",function(y){return r.accountSearchModel.ledgerAliasCode=y}),i.qZA(),i.TgZ(14,"span",11)(15,"small"),i._uU(16),i.qZA()()()()(),i.TgZ(17,"mts-next-back-btns",12),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearSearchModel()}),i.qZA(),i.TgZ(18,"mts-data-table",13)(19,"mts-data-table-col",14),i.YNc(20,zm,1,0,"ng-template"),i.qZA(),i._UZ(21,"mts-data-table-col",15)(22,"mts-data-table-col",16)(23,"mts-data-table-col",17)(24,"mts-data-table-col",18)(25,"mts-data-table-col",19)(26,"mts-data-table-col",20),i.qZA(),i.TgZ(27,"div",21)(28,"button",22),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(29,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t&&(i.xp6(10),i.Q6J("dataProvider",r.contractService.getContractByPortfolioName)("textField","portfolioName")("valueField","id")("ngModel",r.accountSearchModel.contractId)("placeholder","\u0646\u0627\u0645 \u0633\u0628\u062f \u06cc\u0627 \u0646\u0627\u0645 \u0645\u0634\u062a\u0631\u06cc..."),i.xp6(3),i.Q6J("ngModel",r.accountSearchModel.ledgerAliasCode),i.xp6(1),i.Q6J("ngClass",i.WLB(14,Ch,r.hasResult,!r.hasResult)),i.xp6(2),i.Oqu(r.aliasTitle),i.xp6(1),i.Q6J("showBack",!0)("backTitle","\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc")("withBackArrow",!1)("withNextArrow",!1),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(10),i.Q6J("disabled",void 0===r.accountModel.id))},dependencies:[gn.mk,de.Fj,de.JJ,de.wO,de.nD,de.On,dr.A,Eo.h,Co.Q,gs.U,Vp.Y,ye.J]})}class Th{static#e=this.\u0275fac=function(t){return new(t||Th)};static#t=this.\u0275mod=i.oAB({type:Th});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.SK]})}class rd{static#e=this.\u0275fac=function(t){return new(t||rd)};static#t=this.\u0275mod=i.oAB({type:rd});static#n=this.\u0275inj=i.cJS({providers:[Ae],imports:[gn.ez,de.u5,Y.SK]})}function jo(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",25),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectOrganization(y))}),i.qZA()}}function Vd(_,e){if(1&_&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&_){const t=e.$implicit,r=i.oxw();i.xp6(1),i.Oqu(r.organizationTypeKeyVal[t.type])}}function qu(_,e){1&_&&i._uU(0),2&_&&i.hij(" ",e.$implicit.enable?"\u0641\u0639\u0627\u0644":"\u063a\u06cc\u0631\u0641\u0639\u0627\u0644"," ")}class au extends gr{constructor(e,t,r){super(e),this.organizationService=t,this.lookupRef=r,this.organizationTypeKeyVal={}}search(){this.dataSource=new Y.in(e=>this.organizationService.get(e,this.searchModel))}selectOrganization(e){this.searchModel=e}confirm(e){this.lookupRef.close(this.searchModel.id,this.searchModel.code,`${this.searchModel.name}`)}close(){this.lookupRef.close(null)}clearSearchModel(){this.searchModel=new Jl,this.search()}getOrganizationTypes(){this.anotherSubscription=this.enumService.getOrganizationTypes().subscribe(e=>{this.OrganizationTypes=e,this.makeOrganizationTypeKeyVal()})}makeOrganizationTypeKeyVal(){this.OrganizationTypes.forEach(e=>this.organizationTypeKeyVal[e.value]=e.title)}static#e=this.\u0275fac=function(t){return new(t||au)(i.Y36(Vi),i.Y36(cn),i.Y36(Y.rt))};static#t=this.\u0275cmp=i.Xpm({type:au,selectors:[["pfo-organization-lookup"]],features:[i.qOj],decls:37,vars:12,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-4"],["label","\u0646\u0627\u0645 \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["label","\u06a9\u062f \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc"],["type","text","name","code",1,"form-control",3,"ngModel","ngModelChange"],["label","\u0648\u0636\u0639\u06cc\u062a"],["name","enable",1,"form-select",3,"ngModel","ngModelChange"],["value","undefined"],[3,"ngValue"],["nextTitle","\u062c\u0633\u062a\u062c\u0648",3,"showBack","backTitle","withBackArrow","withNextArrow","next","back"],[3,"dataSource"],["type","text"],["title","\u0646\u0627\u0645 \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc","type","text","name","name"],["title","\u06a9\u062f \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc","type","text","name","code"],["title","\u0646\u0648\u0639 \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc"],["title","\u062a\u0644\u0641\u06461","type","text","name","telephone1"],["title","\u0648\u0636\u0639\u06cc\u062a","type","text"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"div",0)(2,"div",1)(3,"h5",2),i._uU(4," \u0627\u0646\u062a\u062e\u0627\u0628 \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc "),i.qZA()(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"mts-form-field",7)(10,"input",8),i.NdJ("ngModelChange",function(y){return r.searchModel.name=y}),i.qZA()()(),i.TgZ(11,"div",6)(12,"mts-form-field",9)(13,"input",10),i.NdJ("ngModelChange",function(y){return r.searchModel.code=y}),i.qZA()()(),i.TgZ(14,"div",6)(15,"mts-form-field",11)(16,"select",12),i.NdJ("ngModelChange",function(y){return r.searchModel.enable=y}),i.TgZ(17,"option",13),i._uU(18),i.qZA(),i.TgZ(19,"option",14),i._uU(20,"\u0641\u0639\u0627\u0644"),i.qZA(),i.TgZ(21,"option",14),i._uU(22,"\u063a\u06cc\u0631\u0641\u0639\u0627\u0644"),i.qZA()()()()(),i.TgZ(23,"mts-next-back-btns",15),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearSearchModel()}),i.qZA(),i.TgZ(24,"mts-data-table",16)(25,"mts-data-table-col",17),i.YNc(26,jo,1,0,"ng-template"),i.qZA(),i._UZ(27,"mts-data-table-col",18)(28,"mts-data-table-col",19),i.TgZ(29,"mts-data-table-col",20),i.YNc(30,Vd,2,1,"ng-template"),i.qZA(),i._UZ(31,"mts-data-table-col",21),i.TgZ(32,"mts-data-table-col",22),i.YNc(33,qu,1,1,"ng-template"),i.qZA()(),i.TgZ(34,"div",23)(35,"button",24),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(36,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t&&(i.xp6(10),i.Q6J("ngModel",r.searchModel.name),i.xp6(3),i.Q6J("ngModel",r.searchModel.code),i.xp6(3),i.Q6J("ngModel",r.searchModel.enable),i.xp6(2),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngValue",!0),i.xp6(2),i.Q6J("ngValue",!1),i.xp6(2),i.Q6J("showBack",!0)("backTitle","\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc")("withBackArrow",!1)("withNextArrow",!1),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(11),i.Q6J("disabled",void 0===r.searchModel.id))},dependencies:[de.YN,de.Kr,de.Fj,de.EJ,de.JJ,de.On,dr.A,Eo.h,Co.Q,gs.U,ye.J]})}class Dh{static#e=this.\u0275fac=function(t){return new(t||Dh)};static#t=this.\u0275mod=i.oAB({type:Dh});static#n=this.\u0275inj=i.cJS({providers:[Ct],imports:[gn.ez,de.u5,Y.SK]})}function zf(_,e){if(1&_&&(i.TgZ(0,"option",11),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function P_(_,e){if(1&_&&(i.TgZ(0,"option",11),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function jm(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",6)(1,"mts-form-field",25)(2,"select",26),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.searchModel.usageType=h)}),i.TgZ(3,"option",11),i._uU(4),i.qZA(),i.YNc(5,P_,2,2,"option",12),i.ALo(6,"async"),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.searchModel.usageType)("disabled",t.lookupConfig.enableUsageType),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(t.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(6,5,t.productUsageTypes$))}}function Hp(_,e){if(1&_&&(i.TgZ(0,"option",11),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Vm(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",6)(1,"mts-form-field",27)(2,"select",28),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y.searchModel.templateType=h)}),i.TgZ(3,"option",11),i._uU(4),i.qZA(),i.YNc(5,Hp,2,2,"option",12),i.ALo(6,"async"),i.qZA()()()}if(2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngModel",t.searchModel.templateType)("disabled",t.lookupConfig.enableTemplateType),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(t.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(6,5,t.templateTypes$))}}function jf(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",29),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectItem(y))}),i.qZA()}}function Xh(_,e){1&_&&i._uU(0),2&_&&i.hij(" ",e.$implicit.active?"\u0641\u0639\u0627\u0644":"\u063a\u06cc\u0631\u0641\u0639\u0627\u0644"," ")}class Hd extends gr{constructor(e,t,r){super(e),this.documnetTemplateManagmentService=t,this.lookupRef=r,this.templateTypes$=this.enumService.getTemplateTypes(),this.productUsageTypes$=this.enumService.getProductUsageTypes(),this.businessTypes$=this.enumService.getBusinessTypes(),this.documnetTemplateManagmentService.resetState()}ngOnInit(){Rt(this.lookupConfig),this.searchModel.templateType=this.lookupConfig.templateType,this.searchModel.businessType=this.lookupConfig.businessType,this.searchModel.usageType=this.lookupConfig.usageType}search(){this.dataSource=new Y.in(e=>this.documnetTemplateManagmentService.get(e,this.cleanData(this.searchModel)))}selectItem(e){this.model=e}confirm(e){this.lookupRef.close(this.model.id,`${this.model.name}`,this.model.code)}close(){this.lookupRef.close(null)}static#e=this.\u0275fac=function(t){return new(t||Hd)(i.Y36(Vi),i.Y36(Ct),i.Y36(Y.rt))};static#t=this.\u0275cmp=i.Xpm({type:Hd,selectors:[["pfo-doc-template-lookup"]],inputs:{lookupConfig:"lookupConfig"},features:[i.qOj],decls:34,vars:21,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-3"],["label","\u0646\u0627\u0645 \u0642\u0627\u0644\u0628 "],["name","portfolio",3,"dataProvider","textField","valueField","placeholder","ngModel","ngModelChange"],["label","\u0646\u0648\u0639 \u06a9\u0633\u0628 \u0648 \u06a9\u0627\u0631"],["name","businessType",1,"form-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","col-md-3",4,"ngIf"],[3,"showBack","backTitle","withBackArrow","withNextArrow","nextTitle","next","back"],[3,"dataSource"],["type","text"],["title","\u0646\u0648\u0639 \u06a9\u0633\u0628 \u0648 \u06a9\u0627\u0631","type","text","name","businessTypeTitle"],["title","\u0646\u0627\u0645 \u0642\u0627\u0644\u0628","type","text","name","name"],["title","\u06a9\u062f","type","text","name","code"],["title","\u0634\u0631\u062d","type","text","name","note"],["title","\u0646\u0648\u0639 \u0642\u0627\u0644\u0628 \u0633\u0646\u062f","type","text","name","templateTypeTitle"],["title","\u0648\u0636\u0639\u06cc\u062a"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],["label","\u0646\u0648\u0639 \u06a9\u0627\u0631\u0628\u0631\u062f"],["name","portfolioManagerSsn",1,"form-select",3,"ngModel","disabled","ngModelChange"],["label","\u0646\u0648\u0639 \u0642\u0627\u0644\u0628 \u0633\u0646\u062f"],["name","templateType",1,"form-select",3,"ngModel","disabled","ngModelChange"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){if(1&t&&(i.TgZ(0,"mts-card")(1,"div",0)(2,"div",1)(3,"h5",2),i._uU(4," \u0627\u0646\u062a\u062e\u0627\u0628 \u0642\u0627\u0644\u0628 "),i.qZA()(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"mts-form-field",7)(10,"mts-autocomplete",8),i.NdJ("ngModelChange",function(y){return r.searchModel.id=y}),i.qZA()()(),i.TgZ(11,"div",6)(12,"mts-form-field",9)(13,"select",10),i.NdJ("ngModelChange",function(y){return r.searchModel.businessType=y}),i.TgZ(14,"option",11),i._uU(15),i.qZA(),i.YNc(16,zf,2,2,"option",12),i.ALo(17,"async"),i.qZA()()(),i.YNc(18,jm,7,7,"div",13),i.YNc(19,Vm,7,7,"div",13),i.qZA(),i.TgZ(20,"mts-next-back-btns",14),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearAndRefreshSearchForm()}),i.qZA(),i.TgZ(21,"mts-data-table",15)(22,"mts-data-table-col",16),i.YNc(23,jf,1,0,"ng-template"),i.qZA(),i._UZ(24,"mts-data-table-col",17)(25,"mts-data-table-col",18)(26,"mts-data-table-col",19)(27,"mts-data-table-col",20)(28,"mts-data-table-col",21),i.TgZ(29,"mts-data-table-col",22),i.YNc(30,Xh,1,1,"ng-template"),i.qZA()(),i.TgZ(31,"div",23)(32,"button",24),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(33,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t){let h;i.xp6(10),i.Q6J("dataProvider",r.documnetTemplateManagmentService.getTemplateByName)("textField","name")("valueField","id")("placeholder","\u0646\u0627\u0645 \u06cc\u0627 \u06a9\u062f")("ngModel",r.searchModel.id),i.xp6(3),i.Q6J("ngModel",r.searchModel.businessType)("disabled",null!==(h=r.lookupConfig.enableBusinessType)&&void 0!==h&&h),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(17,19,r.businessTypes$)),i.xp6(2),i.Q6J("ngIf",r.lookupConfig.enableUsageType),i.xp6(1),i.Q6J("ngIf",r.lookupConfig.enableTemplateType),i.xp6(1),i.Q6J("showBack",!0)("backTitle",r.backTitle)("withBackArrow",!1)("withNextArrow",!1)("nextTitle",r.nextTitle),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(11),i.Q6J("disabled",!r.model)}},dependencies:[gn.sg,gn.O5,de.YN,de.Kr,de.EJ,de.JJ,de.On,dr.A,Eo.h,Co.Q,gs.U,Vp.Y,ye.J,gn.Ov]})}function Vf(_,e){if(1&_&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function ep(_,e){if(1&_&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.name," ")}}function Gd(_,e){if(1&_&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.code),i.xp6(1),i.hij(" ",t.name," ")}}function Td(_,e){if(1&_&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("value",t.code),i.xp6(1),i.hij(" ",t.name," ")}}function Rg(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",36),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectSecurity(y))}),i.qZA()}}class Hf extends gr{constructor(e,t,r,h,y,D){super(e),this.securitiesService=t,this.lookupRef=r,this.assetTypeService=h,this.industryService=y,this.subIndustryService=D,this.assetUsageTypes$=this.enumService.getAssetUsageTypes(),this.marketTypes$=this.enumService.getMarketTypes(),this.allIndustry$=this.industryService.getAll(),this.assetQuery={assetClass:"TRADABLE_IN_STOCK_MARKET"},this.allAssetType$=this.assetTypeService.getAssetInfoTypes(this.assetQuery),this.model=new Ql,this.hasResult=!1,this.dataSource=new Y.P3([])}ngOnInit(){this.validityOfSymbol&&(this.searchModel.valid=this.validityOfSymbol)}search(){this.dataSource=new Y.in(e=>this.securitiesService.get(e,this.cleanData(this.searchModel)))}selectSecurity(e){this.model=e}confirm(e){this.lookupRef.close(this.model,`${this.model.symbol}`,this.model.name)}close(){this.lookupRef.close(null)}clearSearchModel(){this.searchModel=new Ql,this.searchModel.valid=this.validityOfSymbol,this.subIndustryList=[]}updateAssetsTypes(){"undefined"!==this.searchModel.market?this.assetQuery.market=this.searchModel.market:this.assetQuery={assetClass:"TRADABLE_IN_STOCK_MARKET"},this.allAssetType$=this.assetTypeService.getAssetInfoTypes(this.assetQuery)}updateIndustry(e){this.subIndustryService.getAllByIndustry(e.target.value).subscribe(t=>{this.subIndustryList=t})}static#e=this.\u0275fac=function(t){return new(t||Hf)(i.Y36(Vi),i.Y36(he),i.Y36(Y.rt),i.Y36(Le),i.Y36(re),i.Y36(_e))};static#t=this.\u0275cmp=i.Xpm({type:Hf,selectors:[["pfo-securities-lookup"]],inputs:{disableValidityOfSymbol:"disableValidityOfSymbol",validityOfSymbol:"validityOfSymbol"},features:[i.qOj],decls:64,vars:32,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-4"],["label","\u0628\u0627\u0632\u0627\u0631"],["name","market",1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["label","\u0646\u0648\u0639 \u062f\u0627\u0631\u0627\u06cc\u06cc"],["name","assetTypeId",1,"form-select",3,"ngModel","ngModelChange"],["value","undefined"],["label"," \u0646\u0645\u0627\u062f"],["type","text","name","symbol",1,"form-control",3,"ngModel","ngModelChange"],["label"," \u0646\u0627\u0645 \u0646\u0645\u0627\u062f"],["label","\u0635\u0646\u0639\u062a"],["name","industryCode",1,"form-select",3,"ngModel","change","ngModelChange"],["label","\u0632\u06cc\u0631 \u06af\u0631\u0648\u0647 \u0635\u0646\u0639\u062a"],["name","subIndustryCode",1,"form-select",3,"ngModel","ngModelChange"],["label"," \u0627\u0639\u062a\u0628\u0627\u0631 \u0646\u0645\u0627\u062f"],["name","valid",1,"form-select",3,"ngModel","disabled","ngModelChange"],["selected","",3,"ngValue"],["nextTitle","\u062c\u0633\u062a\u062c\u0648",3,"showBack","backTitle","withBackArrow","withNextArrow","next","back"],[3,"dataSource"],["type","text"],["title","\u0646\u0645\u0627\u062f ","type","text","name","symbol"],["title","\u0646\u0627\u0645 ","type","text","name","name"],["title","\u0628\u0627\u0632\u0627\u0631","type","text","name","marketTitle"],["title","\u0646\u0648\u0639 \u062f\u0627\u0631\u0627\u06cc\u06cc","type","text","name","assetTypeName"],["title","\u0635\u0646\u0639\u062a ","type","text","name","industryName"],["title","\u0632\u06cc\u0631 \u06af\u0631\u0648\u0647 \u0635\u0646\u0639\u062a ","type","text","name","subIndustryName"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],[3,"value"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){1&t&&(i.TgZ(0,"div")(1,"mts-card")(2,"div",0)(3,"div",1)(4,"h5",2),i._uU(5,"\u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0645\u0627\u062f"),i.qZA()(),i.TgZ(6,"div",3)(7,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(8,"div",5)(9,"div",6)(10,"mts-form-field",7)(11,"select",8),i.NdJ("ngModelChange",function(y){return r.searchModel.market=y})("ngModelChange",function(){return r.updateAssetsTypes()}),i.TgZ(12,"option",9),i._uU(13),i.qZA(),i.YNc(14,Vf,2,2,"option",10),i.ALo(15,"async"),i.qZA()()(),i.TgZ(16,"div",6)(17,"mts-form-field",11)(18,"select",12),i.NdJ("ngModelChange",function(y){return r.searchModel.assetTypeId=y}),i.TgZ(19,"option",13),i._uU(20),i.qZA(),i.YNc(21,ep,2,2,"option",10),i.ALo(22,"async"),i.qZA()()(),i.TgZ(23,"div",6)(24,"mts-form-field",14)(25,"input",15),i.NdJ("ngModelChange",function(y){return r.searchModel.symbol=y}),i.qZA()()(),i.TgZ(26,"div",6)(27,"mts-form-field",16)(28,"input",15),i.NdJ("ngModelChange",function(y){return r.searchModel.search=y}),i.qZA()()(),i.TgZ(29,"div",6)(30,"mts-form-field",17)(31,"select",18),i.NdJ("change",function(y){return r.updateIndustry(y)})("ngModelChange",function(y){return r.searchModel.industryCode=y}),i.TgZ(32,"option",13),i._uU(33),i.qZA(),i.YNc(34,Gd,2,2,"option",10),i.ALo(35,"async"),i.qZA()()(),i.TgZ(36,"div",6)(37,"mts-form-field",19)(38,"select",20),i.NdJ("ngModelChange",function(y){return r.searchModel.subIndustryCode=y}),i.TgZ(39,"option",13),i._uU(40),i.qZA(),i.YNc(41,Td,2,2,"option",10),i.qZA()()(),i.TgZ(42,"div",6)(43,"mts-form-field",21)(44,"select",22),i.NdJ("ngModelChange",function(y){return r.searchModel.valid=y}),i.TgZ(45,"option",9),i._uU(46,"\u0647\u0645\u0647"),i.qZA(),i.TgZ(47,"option",23),i._uU(48,"\u0645\u0639\u062a\u0628\u0631"),i.qZA(),i.TgZ(49,"option",9),i._uU(50,"\u0642\u062f\u06cc\u0645\u06cc \u0648 \u062d\u0630\u0641 \u0634\u062f\u0647"),i.qZA()()()()(),i.TgZ(51,"mts-next-back-btns",24),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearSearchModel()}),i.qZA(),i.TgZ(52,"mts-data-table",25)(53,"mts-data-table-col",26),i.YNc(54,Rg,1,0,"ng-template"),i.qZA(),i._UZ(55,"mts-data-table-col",27)(56,"mts-data-table-col",28)(57,"mts-data-table-col",29)(58,"mts-data-table-col",30)(59,"mts-data-table-col",31)(60,"mts-data-table-col",32),i.qZA(),i.TgZ(61,"div",33)(62,"button",34),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(63,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()()),2&t&&(i.xp6(11),i.Q6J("ngModel",r.searchModel.market),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(15,26,r.marketTypes$)),i.xp6(4),i.Q6J("ngModel",r.searchModel.assetTypeId),i.xp6(2),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(22,28,r.allAssetType$)),i.xp6(4),i.Q6J("ngModel",r.searchModel.symbol),i.xp6(3),i.Q6J("ngModel",r.searchModel.search),i.xp6(3),i.Q6J("ngModel",r.searchModel.industryCode),i.xp6(2),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(35,30,r.allIndustry$)),i.xp6(4),i.Q6J("ngModel",r.searchModel.subIndustryCode),i.xp6(2),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",r.subIndustryList),i.xp6(3),i.Q6J("ngModel",r.searchModel.valid)("disabled",r.disableValidityOfSymbol),i.xp6(1),i.Q6J("ngValue",null),i.xp6(2),i.Q6J("ngValue",!0),i.xp6(2),i.Q6J("ngValue",!1),i.xp6(2),i.Q6J("showBack",!0)("backTitle","\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc")("withBackArrow",!1)("withNextArrow",!1),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(10),i.Q6J("disabled",void 0===r.model.id))},dependencies:[gn.sg,de.YN,de.Kr,de.Fj,de.EJ,de.JJ,de.On,dr.A,Eo.h,Co.Q,gs.U,ye.J,gn.Ov]})}class Gp{static#e=this.\u0275fac=function(t){return new(t||Gp)};static#t=this.\u0275mod=i.oAB({type:Gp});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,Y.SK]})}class tp{static#e=this.\u0275fac=function(t){return new(t||tp)};static#t=this.\u0275mod=i.oAB({type:tp});static#n=this.\u0275inj=i.cJS({providers:[Bo],imports:[gn.ez,de.u5,Y.SK]})}function np(_,e){if(1&_&&(i.TgZ(0,"option",9),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.value),i.xp6(1),i.hij(" ",t.title," ")}}function Nu(_,e){if(1&_&&(i.TgZ(0,"option",9),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.internalCode),i.xp6(1),i.hij(" ",t.name," ")}}function Cc(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",23),i.NdJ("change",function(){const y=i.CHM(t).$implicit,D=i.oxw();return i.KtG(D.selectIndicator(y))}),i.qZA()}}function Cu(_,e){if(1&_&&(i._uU(0),i.ALo(1,"jalaliDate")),2&_){const t=e.$implicit;i.AsE(" ",i.lcZ(1,2,t.indexDate),"\u2002",t.indexTime," ")}}class od extends gr{constructor(e,t,r){super(e),this.indexServiec=t,this.lookupRef=r,this.markets$=this.enumService.getMarketTypes()}search(){this.searchModel.sort="indexDate,desc",this.dataSource=new Y.in(e=>this.indexServiec.get(e,this.cleanData(this.searchModel)))}selectIndicator(e){this.searchModel=e}getIndices(e){this.indexServiec.readMarkets({market:e}).subscribe(t=>{this.indices=t})}confirm(e){this.lookupRef.close({code:this.searchModel.internalCode,name:this.searchModel.name},this.searchModel.name)}close(){this.lookupRef.close(null)}clearSearchModel(){this.searchModel=new ws,this.search()}static#e=this.\u0275fac=function(t){return new(t||od)(i.Y36(Vi),i.Y36(Bo),i.Y36(Y.rt))};static#t=this.\u0275cmp=i.Xpm({type:od,selectors:[["pfo-indicator-lookup"]],features:[i.qOj],decls:35,vars:16,consts:[[1,"row","border-title","justify-content-around","align-content-center","mb-2"],[1,"col-6","align-self-center"],[1,"modal-title","text-dark"],[1,"col-6","text-end","text-primary","align-self-center"],["aria-label","close",1,"btn-close",3,"click"],[1,"row"],[1,"col-md-3"],["label","\u0628\u0627\u0632\u0627\u0631"],["name","market",1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["label","\u0646\u0627\u0645 \u0634\u0627\u062e\u0635"],["nextTitle","\u062c\u0633\u062a\u062c\u0648",3,"showBack","backTitle","withBackArrow","withNextArrow","next","back"],[3,"dataSource"],["type","text"],["title","\u0646\u0627\u0645 \u0634\u0627\u062e\u0635","type","text","name","name"],["title","\u0632\u0645\u0627\u0646 \u0634\u0627\u062e\u0635","type","text"],["title","\u0622\u062e\u0631\u064a\u0646 \u0645\u0642\u062f\u0627\u0631 \u0634\u0627\u062e\u0635 \u0631\u0648\u0632","type","text","name","lastIndexInDay"],["title","\u062a\u0639\u062f\u0627\u062f \u0646\u0645\u0627\u062f\u0647\u0627\u064a \u0645\u0639\u0627\u0645\u0644\u0647 \u0634\u062f\u0647 \u062f\u0631 \u0634\u0627\u062e\u0635","type","text","name","tradedSymbolCount"],["title","\u0628\u064a\u0634\u062a\u0631\u064a\u0646 \u0645\u0642\u062f\u0627\u0631 \u0634\u0627\u062e\u0635 \u0631\u0648\u0632","type","text","name","highestIndexInDay"],["title","\u06a9\u0645\u062a\u0631\u064a\u0646 \u0645\u0642\u062f\u0627\u0631 \u0634\u0627\u062e\u0635 \u0631\u0648\u0632","type","text","name","lowestIndexInDay"],[1,"text-end","mt-2"],[1,"btn","btn-primary","text-end",3,"disabled","click"],["type","radio","name","radioDefault",1,"form-check-input",3,"change"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"div",0)(2,"div",1)(3,"h5",2),i._uU(4,"\u0627\u0646\u062a\u062e\u0627\u0628 \u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646\u06cc"),i.qZA()(),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return r.close()}),i.qZA()()(),i.TgZ(7,"div",5)(8,"div",6)(9,"mts-form-field",7)(10,"select",8),i.NdJ("ngModelChange",function(y){return r.searchModel.market=y})("ngModelChange",function(){return r.getIndices(r.searchModel.market)}),i.TgZ(11,"option",9),i._uU(12),i.qZA(),i.YNc(13,np,2,2,"option",10),i.ALo(14,"async"),i.qZA()()(),i.TgZ(15,"div",6)(16,"mts-form-field",11)(17,"select",8),i.NdJ("ngModelChange",function(y){return r.searchModel.internalCode=y}),i.TgZ(18,"option",9),i._uU(19),i.qZA(),i.YNc(20,Nu,2,2,"option",10),i.qZA()()()(),i.TgZ(21,"mts-next-back-btns",12),i.NdJ("next",function(){return r.search()})("back",function(){return r.clearSearchModel()}),i.qZA(),i.TgZ(22,"mts-data-table",13)(23,"mts-data-table-col",14),i.YNc(24,Cc,1,0,"ng-template"),i.qZA(),i._UZ(25,"mts-data-table-col",15),i.TgZ(26,"mts-data-table-col",16),i.YNc(27,Cu,2,4,"ng-template"),i.qZA(),i._UZ(28,"mts-data-table-col",17)(29,"mts-data-table-col",18)(30,"mts-data-table-col",19)(31,"mts-data-table-col",20),i.qZA(),i.TgZ(32,"div",21)(33,"button",22),i.NdJ("click",function(y){return r.confirm(y)}),i._uU(34,"\u0627\u0646\u062a\u062e\u0627\u0628"),i.qZA()()()),2&t&&(i.xp6(10),i.Q6J("ngModel",r.searchModel.market),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",i.lcZ(14,14,r.markets$)),i.xp6(4),i.Q6J("ngModel",r.searchModel.internalCode),i.xp6(1),i.Q6J("ngValue",void 0),i.xp6(1),i.Oqu(r.defaultSelection),i.xp6(1),i.Q6J("ngForOf",r.indices),i.xp6(1),i.Q6J("showBack",!0)("backTitle","\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc")("withBackArrow",!1)("withNextArrow",!1),i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(11),i.Q6J("disabled",void 0===r.searchModel.id))},dependencies:[gn.sg,de.YN,de.Kr,de.EJ,de.JJ,de.On,dr.A,Eo.h,Co.Q,gs.U,ye.J,gn.Ov,p.K]})}function Xa(_,e){if(1&_&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.xp6(1),i.AsE(" ",t.securityName,"(",t.symbolName,")")}}function ip(_,e){if(1&_&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"jalaliDate"),i.qZA()),2&_){const t=e.$implicit;i.xp6(1),i.hij(" ",i.lcZ(2,1,t.businessDate),"")}}class Dd extends ho{constructor(e,t,r,h,y){super(e,t,r,h,y),this.btnGroupActionSet={BACK:()=>this.back(),REJECT:()=>this.reject(),CONFIRM:()=>this.confirm()}}get dataSource(){return new Y.P3(this.data)}static#e=this.\u0275fac=function(t){return new(t||Dd)(i.Y36(Vi),i.Y36(q.gz),i.Y36(Zr),i.Y36(Y.jn),i.Y36(i.zs3))};static#t=this.\u0275cmp=i.Xpm({type:Dd,selectors:[["pfo-securities-trading-request"]],features:[i.qOj],decls:17,vars:2,consts:[[1,"mb-4",3,"dataSource"],["title","\u0646\u0627\u0645 \u0646\u0645\u0627\u062f(\u0646\u0645\u0627\u062f)","type","text"],["title","\u0646\u0627\u0645 \u0633\u0628\u062f","type","text","name","portfolioName"],["title","\u062a\u0627\u0631\u06cc\u062e \u0639\u0645\u0644\u06cc\u0627\u062a","type","text"],["title","\u0646\u0648\u0639 \u0639\u0645\u0644\u06cc\u0627\u062a","type","text","name","operationTypeTitle"],["title","\u0639\u0644\u062a","type","text","name","reasonTitle"],["title","\u062a\u0639\u062f\u0627\u062f","type","text","name","quantity"],["title","\u0642\u06cc\u0645\u062a \u0647\u0631 \u0648\u0627\u062d\u062f","type","text","name","price"],["title","\u0646\u0627\u0645 \u06a9\u0627\u0631\u06af\u0632\u0627\u0631\u06cc","type","text","name","brokerageCompanyName"],["title","\u062c\u0645\u0639 \u06a9\u0627\u0631\u0645\u0632\u062f\u0647\u0627","type","text","name","wageAmount"],["title","\u062c\u0645\u0639 \u062a\u062e\u0641\u06cc\u0641 \u0647\u0627","type","text","name","totalDiscountAmount"],["title","\u0628\u0647\u0627\u06cc \u062a\u0645\u0627\u0645 \u0634\u062f\u0647","type","text","name","cost"],["title","\u0634\u0645\u0627\u0631\u0647 \u0627\u0639\u0644\u0627\u0645\u06cc\u0647","type","text","name","noticeNo"],[3,"config","btnClicked"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card")(1,"mts-data-table",0)(2,"mts-data-table-col",1),i.YNc(3,Xa,2,2,"ng-template"),i.qZA(),i._UZ(4,"mts-data-table-col",2),i.TgZ(5,"mts-data-table-col",3),i.YNc(6,ip,3,3,"ng-template"),i.qZA(),i._UZ(7,"mts-data-table-col",4)(8,"mts-data-table-col",5)(9,"mts-data-table-col",6)(10,"mts-data-table-col",7)(11,"mts-data-table-col",8)(12,"mts-data-table-col",9)(13,"mts-data-table-col",10)(14,"mts-data-table-col",11)(15,"mts-data-table-col",12),i.qZA(),i.TgZ(16,"pfo-btn-group-box",13),i.NdJ("btnClicked",function(y){return r.onBtnClicked(y)}),i.qZA()()),2&t&&(i.xp6(1),i.Q6J("dataSource",r.dataSource),i.xp6(15),i.Q6J("config",r.config))}})}class ll{static#e=this.\u0275fac=function(t){return new(t||ll)};static#t=this.\u0275mod=i.oAB({type:ll});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,ga]})}i.B6R(Dd,[dr.A,Co.Q,gs.U,ps],[p.K]);class Zd{constructor(e){this.templateRef=e}static#e=this.\u0275fac=function(t){return new(t||Zd)(i.Y36(i.Rgc))};static#t=this.\u0275dir=i.lG2({type:Zd,selectors:[["","pfoInputNumberDetail",""]]})}const Gf=["ovlComponentEl"],Zf=["toggleBtn"];function $f(_,e){if(1&_&&(i.ynx(0),i._uU(1," \u06a9\u0627\u0631\u0645\u0632\u062f "),i.TgZ(2,"span",9),i._uU(3),i.qZA(),i._uU(4," : "),i.TgZ(5,"span",10),i._uU(6),i.ALo(7,"currency"),i.qZA(),i.BQk()),2&_){const t=i.oxw().$implicit;i.xp6(3),i.hij(" ",t.wageType.receiverTypeTitle," "),i.xp6(3),i.hij(" ",i.gM2(7,2,t.amount,"IRR","","1.0-0")," \u0631\u06cc\u0627\u0644 ")}}function Zp(_,e){1&_&&i.GkF(0)}const $d=function(_){return{$implicit:_}};function Lc(_,e){if(1&_&&(i.ynx(0),i.YNc(1,Zp,1,0,"ng-container",11),i.BQk()),2&_){const t=i.oxw().$implicit,r=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",r.detailTemplate.templateRef)("ngTemplateOutletContext",i.VKq(2,$d,t))}}function Yd(_,e){if(1&_&&(i.TgZ(0,"li",8),i.YNc(1,$f,8,7,"ng-container",5),i.YNc(2,Lc,2,4,"ng-container",5),i.qZA()),2&_){const t=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!t.detailTemplate),i.xp6(1),i.Q6J("ngIf",t.detailTemplate)}}function Md(_,e){if(1&_&&(i.TgZ(0,"pfo-overlay-panel")(1,"div",null,6),i.YNc(3,Yd,3,2,"li",7),i.qZA()()),2&_){const t=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.detail)}}class Sd{constructor(){this.onChange=()=>{},this.onTouched=()=>{}}get detail(){return this._detail}set detail(e){e&&(this._detail=JSON.parse(e))}writeValue(e){typeof e<"u"&&""!==e&&null!==e&&(this.inputVal=e),setTimeout(()=>{this.onChange(this.inputVal)})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}toggleDetail(e){this.detail&&this.detail.length>0&&(this.ovlComponent.toggle(e),this.ovlActive=!this.ovlActive)}onDocumentClick(e){if(this.detail&&this.detail.length>0){const t=this.ovlComponentEl.nativeElement.contains(e.target),r=this.toggleBtn.nativeElement.contains(e.target);!t&&!r&&this.ovlActive&&(this.ovlActive=!1,this.ovlComponent.closeOverlay())}}static#e=this.\u0275fac=function(t){return new(t||Sd)};static#t=this.\u0275cmp=i.Xpm({type:Sd,selectors:[["pfo-input-number-with-detail"]],contentQueries:function(t,r,h){if(1&t&&i.Suo(h,Zd,5),2&t){let y;i.iGM(y=i.CRH())&&(r.detailTemplate=y.first)}},viewQuery:function(t,r){if(1&t&&(i.Gf(ou,5),i.Gf(Gf,5,i.SBq),i.Gf(Zf,5,i.SBq)),2&t){let h;i.iGM(h=i.CRH())&&(r.ovlComponent=h.first),i.iGM(h=i.CRH())&&(r.ovlComponentEl=h.first),i.iGM(h=i.CRH())&&(r.toggleBtn=h.first)}},hostBindings:function(t,r){1&t&&i.NdJ("click",function(y){return r.onDocumentClick(y)},!1,i.evT)},inputs:{required:"required",disabled:"disabled",inputVal:"inputVal",detail:"detail"},features:[i._Bn([{provide:de.JU,useExisting:(0,i.Gpc)(()=>Sd),multi:!0}])],decls:6,vars:4,consts:[[1,"input-group","justify-content-between"],["role","button",1,"input-group-text","detail-icon",3,"click"],[1,"fa-duotone","fa-scroll","text-primary"],["toggleBtn",""],[1,"flex-grow-1",3,"ngModel","required","disabled","ngModelChange"],[4,"ngIf"],["ovlComponentEl",""],["class","dropdown-item d-flex p-1",4,"ngFor","ngForOf"],[1,"dropdown-item","d-flex","p-1"],[1,"me-1"],[1,"ms-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"span",1),i.NdJ("click",function(y){return r.toggleDetail(y)}),i._UZ(2,"i",2,3),i.qZA(),i.TgZ(4,"mts-input-number",4),i.NdJ("ngModelChange",function(y){return r.inputVal=y}),i.qZA()(),i.YNc(5,Md,4,1,"pfo-overlay-panel",5)),2&t&&(i.xp6(4),i.Q6J("ngModel",r.inputVal)("required",r.required)("disabled",r.disabled),i.xp6(1),i.Q6J("ngIf",r.detail&&r.detail.length>0))},dependencies:[gn.sg,gn.O5,gn.tP,de.JJ,de.Q7,de.On,ou,U.l,gn.H9],styles:["[_nghost-%COMP%]     .input-group{flex-wrap:nowrap}[_nghost-%COMP%]     mts-input-number .form-control{border-top-right-radius:0;border-bottom-right-radius:0}.detail-icon[_ngcontent-%COMP%]{background-color:#e9ecef;height:41px}li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(181,181,181,.3)}"],changeDetection:0})}class Mh{static#e=this.\u0275fac=function(t){return new(t||Mh)};static#t=this.\u0275mod=i.oAB({type:Mh});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,de.u5,wd,Y.SK]})}const Hm=["contractContainer"];function Fg(_,e){if(1&_&&i._UZ(0,"pfo-contract-detail",11),2&_){const t=i.oxw();i.Q6J("contract",t.contract)}}class $p{constructor(e,t){this.contractService=e,this.cdr=t,this.checked=new i.vpe,this.confirm=!1,this.unread=!0,this.otpSent=!1,this.checkboxTitle="\u0645\u062a\u0646 \u0642\u0631\u0627\u0631\u062f\u0627\u062f \u0645\u0648\u0631\u062f \u062a\u0627\u06cc\u06cc\u062f \u0627\u0633\u062a"}ngOnInit(){this.getHtml()}onScroll(e){const t=e.target,r=Math.round(t.scrollTop),h=Math.round(t.scrollHeight);r+Math.round(t.clientHeight)>=h&&(this.unread=!1),this.cdr.detectChanges()}getHtml(){var e=this;return(0,ut.Z)(function*(){if(e.contract.contractCode){const t=e.contractService.getContractHtmlBy(e.contract.contractCode),r=yield(0,bo.n)(t);e.contractHtml=yield r.text(),e.contractContainer.nativeElement.addEventListener("scroll",e.onScroll.bind(e)),e.cdr.detectChanges()}})()}confirmContract(){this.checked.emit(!0),this.otpSent=!0}static#e=this.\u0275fac=function(t){return new(t||$p)(i.Y36(Qt),i.Y36(i.sBO))};static#t=this.\u0275cmp=i.Xpm({type:$p,selectors:[["pfo-contract-view"]],viewQuery:function(t,r){if(1&t&&i.Gf(Hm,5),2&t){let h;i.iGM(h=i.CRH())&&(r.contractContainer=h.first)}},inputs:{contract:"contract"},outputs:{checked:"checked"},decls:15,vars:6,consts:[[3,"contract",4,"ngIf"],[1,"row"],[1,"contract-container",3,"innerHTML"],["contractContainer",""],["form","ngForm"],[1,"card-body","row"],[1,"form-check","mt-2","ms-3","d-flex","justify-content-center"],["name","confirm","role","button","type","checkbox",1,"form-check-input","me-2","border-primary",3,"disabled","ngModel","ngModelChange"],["for","confirm",1,"form-check-label"],[1,"text-end"],[1,"btn","btn-primary",3,"disabled","click"],[3,"contract"]],template:function(t,r){1&t&&(i.YNc(0,Fg,1,1,"pfo-contract-detail",0),i.TgZ(1,"mts-card")(2,"div",1),i._UZ(3,"div",2,3),i.TgZ(5,"form",null,4)(7,"div",5)(8,"div",6)(9,"input",7),i.NdJ("ngModelChange",function(y){return r.confirm=y}),i.qZA(),i.TgZ(10,"label",8),i._uU(11),i.qZA()(),i.TgZ(12,"div",9)(13,"button",10),i.NdJ("click",function(){return r.confirmContract()}),i._uU(14,"\u062b\u0628\u062a"),i.qZA()()()()()()),2&t&&(i.Q6J("ngIf",r.contract),i.xp6(3),i.Q6J("innerHTML",r.contractHtml,i.oJD),i.xp6(6),i.Q6J("disabled",r.unread||r.otpSent)("ngModel",r.confirm),i.xp6(2),i.Oqu(r.checkboxTitle),i.xp6(2),i.Q6J("disabled",!r.confirm||r.unread||r.otpSent))},styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--bs-gray-300);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--bs-primary)}[_nghost-%COMP%]     thead, [_nghost-%COMP%]     tbody, [_nghost-%COMP%]     tfoot, [_nghost-%COMP%]     tr, [_nghost-%COMP%]     td, [_nghost-%COMP%]     th{border-width:1px}[_nghost-%COMP%]     .signature thead, [_nghost-%COMP%]     .signature tbody, [_nghost-%COMP%]     .signature tr, [_nghost-%COMP%]     .signature td, [_nghost-%COMP%]     .signature th{border-width:0px}.contract-container[_ngcontent-%COMP%]{height:450px;overflow-y:auto;overflow-x:hidden}"],changeDetection:0})}class Sh{static#e=this.\u0275fac=function(t){return new(t||Sh)};static#t=this.\u0275mod=i.oAB({type:Sh});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,Y.SK,Li]})}function Yp(_,e){if(1&_&&i._UZ(0,"pfo-document-box",4),2&_){const t=i.oxw();i.Q6J("docName",t.preContractFileInfo.fileName)("docType",t.preContractFileInfo.extension)("docSize",t.preContractFileInfo.fileSize)("fileId",t.contract.contractCode)("downloader",t.contractService.contractDownloader)}}function Ng(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"pfo-upload-document",5),i.NdJ("removeCalled",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.onRemoveFile())}),i.qZA()}if(2&_){const t=i.oxw();i.Q6J("fileName",t.contractFileInfo.fileName)("docSize",t.contractFileInfo.fileSize)("extension",t.contractFileInfo.extension)("fileId",t.contractFileId)("downloader",t.contractService.contractDownloader)("uploader",t.fileUploader)("required",!1)("extentionSet",t.contractAllowdExtention)}}i.B6R($p,[gn.O5,de._Y,de.Wl,de.JJ,de.JL,de.On,de.F,dr.A,Ii],[]);class Yf extends hs{constructor(e,t,r){super(e),this.contractService=t,this.portfolioRequestService=r,this.isAdmin=!1,this.preContractFileInfo=new Vr,this.contractFileInfo=new Vr,this.contractAllowdExtention=["pdf"],this.fileUploader=(h,y)=>this.portfolioRequestService.upload(h,y).pipe((0,It.b)(D=>{if(D instanceof Jt.Zn){const F=D.body?.key;this.contract.contractCode&&(this.contractFileId=this.contract.contractCode),this.update(F)}}))}ngOnInit(){this.getContractFileInfo(),this.getPreContractFileInfo()}getPreContractFileInfo(){var e=this;return(0,ut.Z)(function*(){e.contract.preContractFileId&&(e.preContractFileInfo=e.contract.preContractDocument,!e.preContractFileInfo&&e.contract.preContractFileId&&(e.preContractFileInfo=yield e.portfolioRequestService.getDocInfo(e.contract.preContractFileId)),e.preContractFileInfo.fileName||(e.preContractFileInfo.fileName=`${e.contract.contractCode}.${e.preContractFileInfo.extension}`))})()}getContractFileInfo(){var e=this;return(0,ut.Z)(function*(){e.contract.contractFileId&&e.isAdmin&&(e.contractFileInfo=e.contract.contractDocument,!e.contractFileInfo&&e.contract.contractFileId&&(e.contractFileInfo=yield e.portfolioRequestService.getDocInfo(e.contract.contractFileId)),e.contractFileInfo.fileName||(e.contractFileInfo.fileName=`${e.contract.contractCode}.${e.contractFileInfo.extension}`),e.contract.contractCode&&(e.contractFileId=e.contract.contractCode))})()}update(e=""){this.contract.contractFileId=e;const t=new la;t.contractFileId=e,this.anotherSubscription=this.contractService.update(t,this.contract.id).subscribe(()=>{this.toastService.show(kt.SUCCESSFUL_OPERATION,{style:"success"})})}onRemoveFile(){this.contract.contractFileId&&(this.contractFileId="",this.portfolioRequestService.deleteDocumentBy(this.contract.contractFileId).subscribe(()=>this.update()))}static#e=this.\u0275fac=function(t){return new(t||Yf)(i.Y36(Vi),i.Y36(Qt),i.Y36(wr))};static#t=this.\u0275cmp=i.Xpm({type:Yf,selectors:[["pfo-contract-side"]],inputs:{contract:"contract",isAdmin:"isAdmin"},features:[i.qOj],decls:4,vars:2,consts:[[1,"h-100","p-1"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["docTitle","\u0641\u0627\u06cc\u0644 \u067e\u06cc\u0634 \u0642\u0631\u0627\u0631\u062f\u0627\u062f","boxWith","100%","class","mb-3",3,"docName","docType","docSize","fileId","downloader",4,"ngIf"],["title","\u0641\u0627\u06cc\u0644 \u0642\u0631\u0627\u0631\u062f\u0627\u062f","uploaderData","OTHER",3,"fileName","docSize","extension","fileId","downloader","uploader","required","extentionSet","removeCalled",4,"ngIf"],["docTitle","\u0641\u0627\u06cc\u0644 \u067e\u06cc\u0634 \u0642\u0631\u0627\u0631\u062f\u0627\u062f","boxWith","100%",1,"mb-3",3,"docName","docType","docSize","fileId","downloader"],["title","\u0641\u0627\u06cc\u0644 \u0642\u0631\u0627\u0631\u062f\u0627\u062f","uploaderData","OTHER",3,"fileName","docSize","extension","fileId","downloader","uploader","required","extentionSet","removeCalled"]],template:function(t,r){1&t&&(i.TgZ(0,"mts-card",0)(1,"div",1),i.YNc(2,Yp,1,5,"pfo-document-box",2),i.YNc(3,Ng,1,8,"pfo-upload-document",3),i.qZA()()),2&t&&(i.xp6(2),i.Q6J("ngIf",r.preContractFileInfo.fileSize),i.xp6(1),i.Q6J("ngIf","ISSUED"===r.contract.contractStatus&&r.isAdmin))},dependencies:[gn.O5,fu,Ts,dr.A]})}class rp{static#e=this.\u0275fac=function(t){return new(t||rp)};static#t=this.\u0275mod=i.oAB({type:rp});static#n=this.\u0275inj=i.cJS({imports:[gn.ez,ts,ma,Y.SK]})}class qp{static#e=this.\u0275fac=function(t){return new(t||qp)};static#t=this.\u0275cmp=i.Xpm({type:qp,selectors:[["pfo-counter-card"]],inputs:{title:"title",class:"class",value:"value"},standalone:!0,features:[i.jDz],decls:9,vars:3,consts:[[1,"p-2"],[1,"d-flex","justify-content-between","border-top","rounded","shadow-sm","p-3",3,"ngClass"],[1,"d-block",2,"max-width","80px"],[1,"counter-box","px-2","bg-primary","bg-opacity-10","rounded","d-inline-flex","mb-2"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h6"),i._uU(4),i.qZA()(),i.TgZ(5,"div",2)(6,"div",3)(7,"b"),i._uU(8),i.qZA()()()()()),2&t&&(i.xp6(1),i.Q6J("ngClass",r.class),i.xp6(3),i.Oqu(r.title),i.xp6(4),i.Oqu(r.value))},dependencies:[gn.ez,gn.mk],styles:[".counter-box[_ngcontent-%COMP%]{min-width:50px;text-align:center;justify-content:center;min-height:50px;align-items:center}"]})}class Eh{constructor(e){this.template=e}static#e=this.\u0275fac=function(t){return new(t||Eh)(i.Y36(i.Rgc))};static#t=this.\u0275dir=i.lG2({type:Eh,selectors:[["","pfo-action-tree-table",""]]})}class sd{constructor(e){this.componentFilterTemplate=e}static#e=this.\u0275fac=function(t){return new(t||sd)(i.Y36(i.Rgc,8))};static#t=this.\u0275dir=i.lG2({type:sd,selectors:[["tree-table-filter-column"],["","tree-table-filter-column",""]]})}class qd{constructor(){this.filterComponentModel=new Y._I,this.filterValue=null,this.type="text",this.shrink=!1,this.bold=!1}static#e=this.\u0275fac=function(t){return new(t||qd)};static#t=this.\u0275dir=i.lG2({type:qd,selectors:[["pfo-tree-table-col"]],contentQueries:function(t,r,h){if(1&t&&(i.Suo(h,i.Rgc,5),i.Suo(h,sd,5)),2&t){let y;i.iGM(y=i.CRH())&&(r.template=y.first),i.iGM(y=i.CRH())&&(r.externalFilterColumn=y.first)}},inputs:{filterValue:"filterValue",name:"name",fieldName:"fieldName",title:"title",type:"type",option:"option",filter:"filter",sort:"sort",cellClass:"cellClass",shrink:"shrink",bold:"bold"}})}var op=N(6556);class ad{constructor(e){this.filterValue=null,this.filterValue=e?.filterValue,this.name=e?.name,this.fieldName=e?.fieldName,this.title=e?.title,this.type=e?.type??"text",this.option=e?.option,this.filter=e?.filter,this.translatedEnumFilter=e?.translatedEnumFilter,this.externalFilterColumn=e?.externalFilterColumn,this.filterComponentModel=e?.filterComponentModel,e?.name&&!e?.fieldName&&(this.fieldName=e?.name?.charAt(0).toUpperCase()+e?.name?.slice(1))}get required(){return this.filter.required}get min(){return this.filter.min}get max(){return this.filter.max}get minLength(){return this.filter.minLength}get maxLength(){return this.filter.maxLength}get minDate(){return this.filter.minDate}get maxDate(){return this.filter.maxDate}}var sp=N(1250);function Ed(_,e){1&_&&i.GkF(0)}const Gm=function(_){return{$implicit:_}};function Va(_,e){if(1&_&&(i.TgZ(0,"div",13),i.YNc(1,Ed,1,0,"ng-container",14),i.qZA()),2&_){const t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngTemplateOutlet",t.externalFilterColumn.componentFilterTemplate)("ngTemplateOutletContext",i.VKq(2,Gm,t.filterComponentModel))}}function Zm(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"mts-form-field",17)(2,"input",18),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2).$implicit;return i.KtG(y.filterValue=h)}),i.qZA()(),i.BQk()}if(2&_){const t=i.oxw(2).$implicit,r=i.oxw();i.xp6(1),i.Q6J("label",t.title),i.xp6(1),i.Q6J("name",r.columnName(t))("ngModel",t.filterValue)("minlength",t.minLength)("maxlength",t.maxLength)("required",t.required)}}function Ah(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"mts-form-field",17)(2,"input",19),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2).$implicit;return i.KtG(y.filterValue=h)}),i.qZA()(),i.BQk()}if(2&_){const t=i.oxw(2).$implicit,r=i.oxw();i.xp6(1),i.Q6J("label",t.title),i.xp6(1),i.Q6J("name",r.columnName(t))("ngModel",t.filterValue)("min",t.min)("max",t.max)("required",t.required)}}function ap(_,e){if(1&_&&(i.TgZ(0,"option",23),i._uU(1),i.qZA()),2&_){const t=e.$implicit;i.Q6J("ngValue",t.key),i.xp6(1),i.hij(" ",t.value," ")}}function Jp(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"mts-form-field",17)(2,"select",20),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2).$implicit;return i.KtG(y.filterValue=h)}),i.TgZ(3,"option",21),i._uU(4,"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),i.qZA(),i.YNc(5,ap,2,2,"option",22),i.ALo(6,"enumKeyValue"),i.qZA()(),i.BQk()}if(2&_){const t=i.oxw(2).$implicit,r=i.oxw();i.xp6(1),i.Q6J("label",t.title),i.xp6(1),i.Q6J("name",r.columnName(t))("ngModel",t.filterValue)("required",t.required),i.xp6(1),i.Q6J("ngValue",null),i.xp6(2),i.Q6J("ngForOf",i.lcZ(6,6,t.translatedEnumFilter))}}function qf(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"mts-form-field",17)(2,"mts-date-picker",24),i.NdJ("ngModelChange",function(h){i.CHM(t);const y=i.oxw(2).$implicit;return i.KtG(y.filterValue=h)})("ngModelChange",function(){i.CHM(t);const h=i.oxw(2).$implicit,y=i.oxw();return i.KtG(y._changeDateValue(h))}),i.qZA()(),i.BQk()}if(2&_){const t=i.oxw(2).$implicit,r=i.oxw();i.xp6(1),i.Q6J("label",t.title),i.xp6(1),i.Q6J("name",r.columnName(t))("ngModel",t.filterValue)("minDate",t.minDate)("maxDate",t.maxDate)("required",t.required)}}function $m(_,e){if(1&_&&(i.ynx(0,15),i.YNc(1,Zm,3,6,"ng-container",16),i.YNc(2,Ah,3,6,"ng-container",16),i.YNc(3,Jp,7,8,"ng-container",16),i.YNc(4,qf,3,6,"ng-container",16),i.BQk()),2&_){const t=i.oxw().$implicit;i.Q6J("ngSwitch",t.type),i.xp6(1),i.Q6J("ngSwitchCase","text"),i.xp6(1),i.Q6J("ngSwitchCase","number"),i.xp6(1),i.Q6J("ngSwitchCase","enum"),i.xp6(1),i.Q6J("ngSwitchCase","date")}}function Ym(_,e){if(1&_&&(i.ynx(0),i.YNc(1,Va,2,4,"div",11),i.YNc(2,$m,5,5,"ng-template",12),i.BQk()),2&_){const t=e.$implicit;i.xp6(1),i.Q6J("ngIf",t.externalFilterColumn&&t.externalFilterColumn.componentFilterTemplate),i.xp6(1),i.Q6J("ngIf",!(null!=t.externalFilterColumn&&t.externalFilterColumn.componentFilterTemplate))}}class lp{constructor(e){this.translatorService=e,this.header="\u0641\u06cc\u0644\u062a\u0631\u0647\u0627\u06cc \u062c\u0633\u062a\u062c\u0648",this.search=new i.vpe,this.clear=new i.vpe,this._filterDescriptors=[],this._filterableColumns=[]}columnName(e){return e.fieldName??e.name}ngAfterContentInit(){[...this.columns].filter(t=>t.filter).map(t=>{this._mapFilterToFilterDescriptor(t)}),this._translationEnumKeys()}_mapFilterToFilterDescriptor(e){if("boolean"==typeof e.filter)this._filterDescriptors.push(new ad({filterValue:null,name:e.name,fieldName:e.fieldName,title:e.title,type:e.type,option:e.option,externalFilterColumn:e.externalFilterColumn,filterComponentModel:e.filterComponentModel,filter:{min:e.min,max:e.max,minLength:e.minLength,maxLength:e.maxLength,operator:"text"===e.type?Y.Td.LI:e.filter.operator}}));else if(e.filter?.operator===Y.Td.BT){let t=new ad({filterValue:null,name:e.name,fieldName:e.fieldName,title:e.title+" (\u0627\u0632 \u062a\u0627\u0631\u06cc\u062e)",type:e.type,option:e.option,externalFilterColumn:e.externalFilterColumn,filterComponentModel:e.filterComponentModel,filter:{operator:Y.Td.GEQ,minDate:e.filter.minDate,isBetween:!0}}),r=new ad({filterValue:null,name:e.name,fieldName:e.fieldName,title:e.title+" (\u062a\u0627 \u062a\u0627\u0631\u06cc\u062e)",type:e.type,option:e.option,externalFilterColumn:e.externalFilterColumn,filterComponentModel:e.filterComponentModel,filter:{operator:Y.Td.LEQ,maxDate:e.filter.maxDate,required:t.filterValue,isBetween:!0}});this._filterDescriptors.push(t,r)}}_translationEnumKeys(){this._filterDescriptors.map(e=>{"enum"===e.type&&e.option&&(e.translatedEnumFilter=this.translatorService.lookupEnumKeyValueByEnumClass(e.option.enum))})}_changeDateValue(e){if(e.filter.isBetween&&e.filterValue){let t=this._filterDescriptors.find(r=>r.name===e.name&&r.filter.operator===Y.Td.LEQ);t&&(t.filter.required=!0)}}_onSearch(){this.search.emit(this._filterDescriptors)}_clear(){this._filterDescriptors.map(e=>e.filterValue=null),this.clear.emit(this.columns)}static#e=this.\u0275fac=function(t){return new(t||lp)(i.Y36(Y.Ah))};static#t=this.\u0275cmp=i.Xpm({type:lp,selectors:[["pfo-tree-table-filter"]],inputs:{columns:"columns",header:"header",collapseFilter:"collapseFilter"},outputs:{search:"search",clear:"clear"},decls:16,vars:4,consts:[["form","ngForm"],["id","accordionFilters",1,"accordion","accordion-flush"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed","border-bottom","border-primary","fw-bold"],["id","flush-collapseOne","data-bs-parent","#accordionFilters",1,"accordion-collapse","collapse","p-3",3,"ngClass"],[1,"row"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"fa-solid","fa-magnifying-glass"],[1,"btn","btn-light","ms-2",3,"click"],["class","col-md-3",4,"ngIf"],[3,"ngIf"],[1,"col-md-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-md-3",3,"label"],["type","text",1,"form-control",3,"name","ngModel","minlength","maxlength","required","ngModelChange"],["type","number","mtsOnlyNumber","",1,"form-control",3,"name","ngModel","min","max","required","ngModelChange"],[1,"form-select",3,"name","ngModel","required","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"name","ngModel","minDate","maxDate","required","ngModelChange"]],template:function(t,r){if(1&t&&(i.TgZ(0,"form",null,0)(2,"div",1)(3,"div",2)(4,"h2",3)(5,"button",4),i._uU(6),i.qZA()(),i.TgZ(7,"div",5)(8,"div",6),i.YNc(9,Ym,3,2,"ng-container",7),i.TgZ(10,"div")(11,"button",8),i.NdJ("click",function(){return r._onSearch()}),i._UZ(12,"i",9),i._uU(13,"\xa0\u062c\u0633\u062a\u062c\u0648"),i.qZA(),i.TgZ(14,"button",10),i.NdJ("click",function(){return r._clear()}),i._uU(15,"\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc"),i.qZA()()()()()()()),2&t){const h=i.MAs(1);i.xp6(6),i.hij(" ",r.header," "),i.xp6(1),i.Q6J("ngClass",r.collapseFilter?"show":""),i.xp6(2),i.Q6J("ngForOf",r._filterDescriptors),i.xp6(2),i.Q6J("disabled",h.invalid)}},dependencies:[gn.mk,gn.sg,gn.O5,gn.tP,gn.RF,gn.n9,de._Y,de.YN,de.Kr,de.Fj,de.wV,de.EJ,de.JJ,de.JL,de.Q7,de.wO,de.nD,de.qQ,de.Fd,de.On,de.F,$.p,S.L,Eo.h,sp.u]})}var qm=N(5064);function k_(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"div",9)(1,"pfo-tree-table-filter",10),i.NdJ("search",function(h){i.CHM(t);const y=i.oxw();return i.KtG(y._onSearch(h))})("clear",function(){i.CHM(t);const h=i.oxw();return i.KtG(h._onClear())}),i.qZA()()}if(2&_){const t=i.oxw();i.xp6(1),i.Q6J("columns",t._columns)}}function w(_,e){1&_&&i.GkF(0)}function k(_,e){if(1&_&&(i.TgZ(0,"div"),i.YNc(1,w,1,0,"ng-container",11),i.qZA()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",t._action.template)}}function m(_,e){1&_&&i._UZ(0,"i",18)}function M(_,e){1&_&&(i.TgZ(0,"div",19)(1,"span",20),i._uU(2,"Loading..."),i.qZA()())}function Z(_,e){1&_&&(i.ynx(0),i._UZ(1,"i",24),i._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),i.BQk())}function pe(_,e){1&_&&(i.ynx(0),i._UZ(1,"i",25),i._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a "),i.BQk())}function _t(_,e){1&_&&(i.ynx(0),i._UZ(1,"i",26),i._uU(2," \u062e\u0631\u0648\u062c\u06cc PDF \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),i.BQk())}function Pt(_,e){1&_&&(i.ynx(0),i._UZ(1,"i",27),i._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a PDF "),i.BQk())}function jt(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){const y=i.CHM(t).$implicit,D=i.oxw(2);return i.KtG(D._downloadFile(y))}),i.ynx(1,22),i.YNc(2,Z,3,0,"ng-container",23),i.YNc(3,pe,3,0,"ng-container",23),i.YNc(4,_t,3,0,"ng-container",23),i.YNc(5,Pt,3,0,"ng-container",23),i.BQk(),i.qZA()}if(2&_){const t=e.$implicit,r=i.oxw(2);i.xp6(1),i.Q6J("ngSwitch",t),i.xp6(1),i.Q6J("ngSwitchCase",r.exportTypeEnum.excel),i.xp6(1),i.Q6J("ngSwitchCase",r.exportTypeEnum.excelAllPage),i.xp6(1),i.Q6J("ngSwitchCase",r.exportTypeEnum.pdf),i.xp6(1),i.Q6J("ngSwitchCase",r.exportTypeEnum.pdfAllPage)}}function nn(_,e){if(1&_&&(i.TgZ(0,"div",12)(1,"button",13),i.YNc(2,m,1,0,"i",14),i._uU(3,"\xa0 "),i.YNc(4,M,3,0,"ng-template",null,15,i.W1O),i._uU(6," \u062f\u0627\u0646\u0644\u0648\u062f "),i.qZA(),i.TgZ(7,"div",16),i.YNc(8,jt,6,5,"button",17),i.qZA()()),2&_){const t=i.MAs(5),r=i.oxw();i.xp6(2),i.Q6J("ngIf",!r._loadingFile)("ngIfElse",t),i.xp6(6),i.Q6J("ngForOf",r.exportTypes)}}function vn(_,e){1&_&&(i.TgZ(0,"th",29),i._uU(1,"#"),i.qZA())}function wi(_,e){if(1&_&&i._UZ(0,"i",33),2&_){const t=i.oxw().$implicit,r=i.oxw(2);i.Udp("transform",r._transformSort(t))}}const Qn=function(){return{cursor:"pointer"}};function _i(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"th",31),i.NdJ("click",function(){const y=i.CHM(t).$implicit,D=i.oxw(2);return i.KtG(D._onHeaderClick(y))}),i._uU(1),i.YNc(2,wi,1,2,"i",32),i.qZA()}if(2&_){const t=e.$implicit,r=i.oxw(2);i.Akn(r._isSortable(t)?i.DdM(4,Qn):""),i.xp6(1),i.hij(" ",t.title," "),i.xp6(1),i.Q6J("ngIf",r._isSortable(t)&&r._hasSortDirection(t))}}function Xr(_,e){if(1&_&&(i.TgZ(0,"thead")(1,"tr"),i.YNc(2,vn,2,0,"th",28),i._UZ(3,"th",29),i.YNc(4,_i,3,5,"th",30),i.qZA()()),2&_){const t=i.oxw();i.xp6(2),i.Q6J("ngIf",t.showRowNumber),i.xp6(2),i.Q6J("ngForOf",t._columns)}}function sr(_,e){if(1&_&&(i.TgZ(0,"td",29),i._uU(1),i.qZA()),2&_){const t=i.oxw().index,r=i.oxw(2);i.xp6(1),i.Oqu(r.activeIndex*r.pageSize+(t+1))}}const kr=function(_,e){return{"fa-chevron-down":_,"fa-chevron-left":e}};function jr(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"button",38),i.NdJ("click",function(){i.CHM(t);const h=i.oxw().$implicit;return i.KtG(h.expanded=!h.expanded)}),i._UZ(1,"i",39),i.qZA()}if(2&_){const t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngClass",i.WLB(1,kr,t.expanded,!t.expanded))}}function po(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(2);i.xp6(1),i.hij(" ",h._getCellValue(r,t)," ")}}function as(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"jalaliDate"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(2);i.xp6(1),i.hij(" ",i.lcZ(2,1,h._getCellValue(r,t))," ")}}function Fr(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"number"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(2);i.xp6(1),i.hij(" ",i.lcZ(2,1,h._getCellValue(r,t))," ")}}function io(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"mtsTranslateEnum"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(2);i.xp6(1),i.hij(" ",i.xi3(2,1,h._getCellValue(r,t),t.option.enum)," ")}}function Ao(_,e){if(1&_&&(i.TgZ(0,"span",41),i.YNc(1,po,2,1,"ng-container",2),i.YNc(2,as,3,3,"ng-container",2),i.YNc(3,Fr,3,3,"ng-container",2),i.YNc(4,io,3,4,"ng-container",2),i.qZA()),2&_){const t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf","text"==t.type),i.xp6(1),i.Q6J("ngIf","date"==t.type),i.xp6(1),i.Q6J("ngIf","number"==t.type),i.xp6(1),i.Q6J("ngIf","enum"==t.type&&t.option)}}function Vo(_,e){1&_&&i.GkF(0)}const No=function(_,e){return{$implicit:_,index:e}};function Wr(_,e){if(1&_&&i.YNc(0,Vo,1,0,"ng-container",37),2&_){const t=i.oxw().$implicit,r=i.oxw(),h=r.$implicit,y=r.index;i.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",i.WLB(2,No,h,y))}}function Dr(_,e){if(1&_&&(i.TgZ(0,"td"),i.YNc(1,Ao,5,4,"ng-template",40),i.YNc(2,Wr,1,5,"ng-template",40),i.qZA()),2&_){const t=e.$implicit;i.Tol(t.cellClass),i.ekj("shrinked",t.shrink)("fw-bold",t.bold),i.xp6(1),i.Q6J("ngIf",t.name),i.xp6(1),i.Q6J("ngIf",t.template&&!(null!=t.externalFilterColumn&&t.externalFilterColumn.componentFilterTemplate))}}function Ml(_,e){1&_&&i.GkF(0)}const Ju=function(_,e){return{$implicit:_,index:e,level:1}};function Sl(_,e){if(1&_&&(i.ynx(0),i.TgZ(1,"tr"),i.YNc(2,sr,2,1,"td",28),i.TgZ(3,"td"),i.YNc(4,jr,2,4,"button",35),i.qZA(),i.YNc(5,Dr,3,8,"td",36),i.qZA(),i.ynx(6),i.YNc(7,Ml,1,0,"ng-container",37),i.BQk()()),2&_){const t=e.$implicit,r=e.index,h=i.oxw(2),y=i.MAs(13);i.xp6(2),i.Q6J("ngIf",h.showRowNumber),i.xp6(2),i.Q6J("ngIf",(null==t?null:t.children.length)>0),i.xp6(1),i.Q6J("ngForOf",h._columns),i.xp6(2),i.Q6J("ngTemplateOutlet",y)("ngTemplateOutletContext",i.WLB(5,Ju,t,r))}}function Lu(_,e){if(1&_&&(i.ynx(0),i.YNc(1,Sl,8,8,"ng-container",34),i.BQk()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.data)}}function ld(_,e){if(1&_&&(i.TgZ(0,"tr")(1,"td",42),i._uU(2,"\u0631\u06a9\u0648\u0631\u062f\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f."),i.qZA()()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("colSpan",t._columns.length+(t.showRowNumber?2:0))}}function lu(_,e){if(1&_&&(i.TgZ(0,"tr",43)(1,"td",44),i._UZ(2,"div",45),i.qZA()()),2&_){const t=i.oxw();i.xp6(1),i.Q6J("colSpan",t._columns.length+(t.showRowNumber?1:0))}}function El(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"mts-pagination",46),i.NdJ("pageChange",function(){i.CHM(t);const h=i.oxw();return i.KtG(h._pageChange())}),i.qZA()}if(2&_){const t=i.oxw();i.Q6J("totalRecords",t.totalRecords)}}function Wu(_,e){if(1&_){const t=i.EpF();i.ynx(0),i.TgZ(1,"button",48),i.NdJ("click",function(){i.CHM(t);const h=i.oxw().$implicit;return i.KtG(h.expanded=!h.expanded)}),i._UZ(2,"i",39),i.qZA(),i.BQk()}if(2&_){const t=i.oxw().$implicit;i.xp6(2),i.Q6J("ngClass",i.WLB(1,kr,t.expanded,!t.expanded))}}function ud(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(3);i.xp6(1),i.hij(" ",h._getCellValue(r,t)," ")}}function _s(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"jalaliDate"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(3);i.xp6(1),i.hij(" ",i.lcZ(2,1,h._getCellValue(r,t))," ")}}function Ad(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"number"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(3);i.xp6(1),i.hij(" ",i.lcZ(2,1,h._getCellValue(r,t))," ")}}function Tu(_,e){if(1&_&&(i.ynx(0),i._uU(1),i.ALo(2,"mtsTranslateEnum"),i.BQk()),2&_){const t=i.oxw(2).$implicit,r=i.oxw().$implicit,h=i.oxw(3);i.xp6(1),i.hij(" ",i.xi3(2,1,h._getCellValue(r,t),t.option.enum)," ")}}function Jd(_,e){if(1&_&&(i.TgZ(0,"span",41),i.YNc(1,ud,2,1,"ng-container",2),i.YNc(2,_s,3,3,"ng-container",2),i.YNc(3,Ad,3,3,"ng-container",2),i.YNc(4,Tu,3,4,"ng-container",2),i.qZA()),2&_){const t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf","text"==t.type),i.xp6(1),i.Q6J("ngIf","date"==t.type),i.xp6(1),i.Q6J("ngIf","number"==t.type),i.xp6(1),i.Q6J("ngIf","enum"==t.type&&t.option)}}function Bc(_,e){1&_&&i.GkF(0)}function Du(_,e){if(1&_&&i.YNc(0,Bc,1,0,"ng-container",37),2&_){const t=i.oxw().$implicit,r=i.oxw().$implicit,h=i.oxw(2).$implicit;i.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",i.WLB(2,No,r,h))}}function Tc(_,e){if(1&_&&(i.TgZ(0,"td"),i.YNc(1,Jd,5,4,"ng-template",40),i.YNc(2,Du,1,5,"ng-template",40),i.qZA()),2&_){const t=e.$implicit;i.Tol(t.cellClass),i.ekj("shrinked",t.shrink)("fw-bold",t.bold),i.xp6(1),i.Q6J("ngIf",t.name),i.xp6(1),i.Q6J("ngIf",t.template&&!(null!=t.externalFilterColumn&&t.externalFilterColumn.componentFilterTemplate))}}function Al(_,e){1&_&&i.GkF(0)}const Qu=function(_){return{"padding-right.px":_}},up=function(_,e,t){return{$implicit:_,index:e,level:t}};function Jf(_,e){if(1&_&&(i.ynx(0),i.TgZ(1,"tr"),i._UZ(2,"td"),i.TgZ(3,"td",47),i.YNc(4,Wu,3,4,"ng-container",2),i.qZA(),i.YNc(5,Tc,3,8,"td",36),i.qZA(),i.YNc(6,Al,1,0,"ng-container",37),i.BQk()),2&_){const t=e.$implicit,r=i.oxw(2),h=r.level,y=r.$implicit,D=i.oxw(),F=i.MAs(13);i.xp6(3),i.Q6J("ngStyle",i.VKq(5,Qu,20*h)),i.xp6(1),i.Q6J("ngIf",(null==t?null:t.children.length)>0),i.xp6(1),i.Q6J("ngForOf",D._columns),i.xp6(1),i.Q6J("ngTemplateOutlet",F)("ngTemplateOutletContext",i.kEZ(7,up,t,y,h+1))}}function ea(_,e){if(1&_&&(i.ynx(0),i.YNc(1,Jf,7,11,"ng-container",34),i.BQk()),2&_){const t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngForOf",t.children)}}function cd(_,e){1&_&&i.YNc(0,ea,2,1,"ng-container",2),2&_&&i.Q6J("ngIf",e.$implicit.expanded)}const Wp=function(_,e,t){return{border:_,"table-bordered":e,"table-striped":t}};class n{constructor(e,t){this.paginationConfig=e,this.translatorService=t,this.showRowNumber=!0,this.showExportBtn=!1,this.showHeader=!0,this.pagable=!0,this.borderless=!1,this.tableBordered=!1,this.tableStripped=!0,this.small=!1,this.filterable=!1,this.sortable=!1,this.exportTypes=[Y.tM.excel,Y.tM.excelAllPage],this.collapsedFilter=!1,this.pageChange=new i.vpe,this.filterEnumOptions=[],this.exportTypeEnum=Y.tM,this._request=Y.i8.page(this.activeIndex,this.pageSize)}get data(){return this._data}get filters(){return this._request?.filters}get totalRecords(){return this._totalRecords}get pageSize(){return this.paginationConfig.pageSize}get activeIndex(){return this.paginationConfig.activeIndex}getColumnName(e){return e.fieldName??e.name}ngOnChanges(e){e.dataSource&&this.dataSource&&(this.load(),this._data=this.dataSource.data,this._totalRecords=this.dataSource.totalRecords,this._changeSubscription=this.dataSource.change.subscribe(t=>{t instanceof Y.iB&&(this._data=this.addFlagToTree(t.data),this._totalRecords=t.total)}))}ngOnInit(){}get _showDownloadFile(){return this.data?.length&&this.dataSource.isSupportedDownload&&this.showExportBtn}_isSortable(e){return this.sortable&&e.sort}_isFilterable(e){return this.filterable&&e.filter}_hasSortDirection(e){return"asc"===e.sort||"desc"===e.sort}_transformSort(e){return`rotate(${"asc"===e.sort?180:0}deg)`}_onHeaderClick(e){let t=this.getColumnName(e);this._isSortable(e)&&t&&(this._hasSortDirection(e)?"asc"===e.sort?(e.sort="desc",this._request?.sortDescending(t)):"desc"===e.sort&&(e.sort=!0,this._request?.resetSort()):(e.sort="asc",this._request?.sortAscending(t)),this.load())}_onSearch(e){this._request?.page&&(this._request.page.index=0),e.map(r=>{let h=this.getColumnName(r);this._request?.filters.map(y=>{"date"==r.type&&r.filter.isBetween||(y.field===r.fieldName&&(r.filterValue||r.filterComponentModel?.value)||0===r.filterValue||0===r.filterComponentModel?.value)&&this._request?.removeFilter(h)}),(r.filterValue??r.filterComponentModel?.value)||0===r.filterValue||0===r.filterComponentModel?.value?this._request?.addFilter(h,r.filterValue??r.filterComponentModel?.value,r.filter?.operator):this._request?.removeFilter(h)}),this.load()}_onClear(){this._request?.removeAllFilters(),this.load()}load(){this.dataSource.load(this._request)}_onNodeExpand(e){e.children=[...Y.c4]}_getCellValue(e,t){var r=t.name.split(".");let h=e[r[0]];for(let y=1;y<r.length;y++){if(null==h)return;h=h[r[y]]}return h}_pageChange(){this._request?.page&&(this._request.page.size=this.pageSize,this._request.page.index=this.activeIndex),this.pageChange.emit({activeIndex:this.activeIndex,pageSize:this.pageSize}),this.load()}_downloadFile(e){this._loadingFile=!0,this._constructBinaryDataRequest(e),this.dataSource.downloadFile(this._binaryDataRequest),this._changeSubscription=this.dataSource.change.subscribe(t=>{t.data&&this._loadingFile&&(Y.iK.saveBlob(t.data,t.fileName),this._loadingFile=!1)})}_constructBinaryDataRequest(e){(e===Y.tM.excelAllPage||e===Y.tM.pdfAllPage)&&(this._binaryDataRequest=Y.i8.page(this.activeIndex,2e6)),(e===Y.tM.excel||e===Y.tM.pdf)&&(this._binaryDataRequest=Y.i8.page(this.activeIndex,this.pageSize)),this._binaryDataRequest?.exportType(Y.dU.excel)}addFlagToTree(e){return 0===e.length?[]:e.map(t=>({...t,expanded:!1,children:[]}))}ngOnDestroy(){this._changeSubscription?.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||n)(i.Y36(Y.Je),i.Y36(Y.Ah))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["pfo-tree-table"]],contentQueries:function(t,r,h){if(1&t&&(i.Suo(h,Eh,5),i.Suo(h,qd,4),i.Suo(h,sd,4)),2&t){let y;i.iGM(y=i.CRH())&&(r._action=y.first),i.iGM(y=i.CRH())&&(r._columns=y),i.iGM(y=i.CRH())&&(r._externalFilters=y)}},inputs:{dataSource:"dataSource",showRowNumber:"showRowNumber",showExportBtn:"showExportBtn",showHeader:"showHeader",pagable:"pagable",borderless:"borderless",tableBordered:"tableBordered",tableStripped:"tableStripped",small:"small",filterable:"filterable",sortable:"sortable",exportTypes:"exportTypes",collapsedFilter:"collapsedFilter"},outputs:{pageChange:"pageChange"},features:[i.TTD],decls:14,vars:17,consts:[["class","mb-2",4,"ngIf"],[1,"d-flex","my-2"],[4,"ngIf"],["ngbDropdown","","class","ms-auto",4,"ngIf"],[1,"table-responsive"],[1,"table","m-0",3,"ngClass"],["class","loading-row",4,"ngIf"],["class","mt-3",3,"totalRecords","pageChange",4,"ngIf"],["expandablePanel",""],[1,"mb-2"],[3,"columns","search","clear"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"ms-auto"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["class","fa-solid fa-download",4,"ngIf","ngIfElse"],["downloadTemplate",""],["ngbDropdownMenu","","aria-labelledby","exportType","name","type"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"fa-solid","fa-download"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["ngbDropdownItem","",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa-regular","fa-file-excel"],[1,"fa-solid","fa-file-excel"],[1,"fa-regular","fa-file-pdf"],[1,"fa-solid","fa-file-pdf"],["class","row-number text-muted",4,"ngIf"],[1,"row-number","text-muted"],[3,"style","click",4,"ngFor","ngForOf"],[3,"click"],["class","fa-solid fa-arrow-down ms-2 d-inline-block text-primary",3,"transform",4,"ngIf"],[1,"fa-solid","fa-arrow-down","ms-2","d-inline-block","text-primary"],[4,"ngFor","ngForOf"],["type","button","class","btn",3,"click",4,"ngIf"],[3,"class","shrinked","fw-bold",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"btn",3,"click"],[1,"fas",3,"ngClass"],[3,"ngIf"],[1,"text-nowrap"],[1,"text-center","text-muted","small","p-3",3,"colSpan"],[1,"loading-row"],[1,"text-center",3,"colSpan"],["role","status",1,"spinner-border","text-primary"],[1,"mt-3",3,"totalRecords","pageChange"],[3,"ngStyle"],[1,"btn",3,"click"]],template:function(t,r){1&t&&(i.YNc(0,k_,2,1,"div",0),i.TgZ(1,"div",1),i.YNc(2,k,2,1,"div",2),i.YNc(3,nn,9,3,"div",3),i.qZA(),i.TgZ(4,"div",4)(5,"table",5),i.YNc(6,Xr,5,2,"thead",2),i.TgZ(7,"tbody"),i.YNc(8,Lu,2,1,"ng-container",2),i.YNc(9,ld,3,1,"tr",2),i.YNc(10,lu,3,1,"tr",6),i.qZA()()(),i.YNc(11,El,1,1,"mts-pagination",7),i.YNc(12,cd,1,1,"ng-template",null,8,i.W1O)),2&t&&(i.Q6J("ngIf",r.filterable),i.xp6(2),i.Q6J("ngIf",r._action),i.xp6(1),i.Q6J("ngIf",r._showDownloadFile),i.xp6(2),i.ekj("table-borderless",r.borderless)("table-sm",r.small),i.Q6J("ngClass",i.kEZ(13,Wp,!r.borderless,r.tableBordered,r.tableStripped)),i.xp6(1),i.Q6J("ngIf",r.showHeader),i.xp6(2),i.Q6J("ngIf",r.data),i.xp6(1),i.Q6J("ngIf",!r.data||0==r.data.length),i.xp6(1),i.Q6J("ngIf",r.dataSource&&r.dataSource.loading),i.xp6(1),i.Q6J("ngIf",r.pagable&&r.totalRecords))},dependencies:[gn.mk,gn.sg,gn.O5,gn.tP,gn.PC,gn.RF,gn.n9,op.Q,Ra.jt,Ra.iD,Ra.Vi,Ra.TH,lp,gn.JJ,p.K,qm.E],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;border-color:#e4e6ef}i[_ngcontent-%COMP%]{font-size:var(--bs-body-font-size)!important}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}td[_ngcontent-%COMP%]{min-width:50px}td.row-number[_ngcontent-%COMP%]{width:0;min-width:0}td.shrinked[_ngcontent-%COMP%]{width:0}tr.loading-row[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000014;transition:background-color 1s;z-index:1000}tr.loading-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;height:100%;display:flex;justify-content:center;align-items:center}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(161,165,183,.3)!important}"]})}var a=N(8580),d=N(8017);class T{static#e=this.\u0275fac=function(t){return new(t||T)};static#t=this.\u0275mod=i.oAB({type:T});static#n=this.\u0275inj=i.cJS({providers:[Y.Je],imports:[gn.ez,de.u5,Y.As,Y.n4,Y.u3,Y.v,Ra.XC,Y.I$,Y.kx,d.F1,a.XD,Y.L$]})}function E(_,e){1&_&&i._UZ(0,"span",13)}function L(_,e){1&_&&i._UZ(0,"span",14)}function H(_,e){1&_&&i._UZ(0,"span",13)}function ie(_,e){1&_&&i._UZ(0,"span",14)}function xe(_,e){if(1&_){const t=i.EpF();i.TgZ(0,"input",15),i.NdJ("change",function(){i.CHM(t);const h=i.oxw();return i.KtG(h.selectItem())}),i.qZA()}if(2&_){const t=i.oxw();i.Q6J("checked",t.planChecked)}}class Me{constructor(){this.selectable=!0,this.selectedItem=new i.vpe}selectItem(){this.selectedItem.emit(!0)}static#e=this.\u0275fac=function(t){return new(t||Me)};static#t=this.\u0275cmp=i.Xpm({type:Me,selectors:[["pfo-portfolio-plan-card"]],inputs:{logoFile:"logoFile",title:"title",minCapitalAmount:"minCapitalAmount",hasCapitalGuarantee:"hasCapitalGuarantee",hasPortfolioManager:"hasPortfolioManager",planChecked:"planChecked",selectable:"selectable"},outputs:{selectedItem:"selectedItem"},standalone:!0,features:[i.jDz],decls:25,vars:13,consts:[[1,"card","shadow"],["dir","ltr",1,"d-flex","justify-content-center","pt-3","px-3","text-dark","rounded-top"],["alt","\u0644\u0648\u06af\u0648 \u0637\u0631\u062d \u0633\u0628\u062f \u06af\u0631\u062f\u0627\u0646\u06cc",1,"card-img-top","logo-box",3,"src"],[1,"card-body","d-flex","flex-column","justify-content-center","align-items-start","position-relative"],[1,"fs-5","fw-bold"],[1,"align-self-center","mt-2","d-flex","justify-content-start","align-items-center","bg-primary","bg-opacity-25","rounded","p-2","w-100"],[1,"fa-solid","fa-sack-dollar","fa-xl","text-primary"],[1,"d-flex","flex-column","justify-content-center","ms-2","text-center"],[1,"d-flex","justify-content-start","align-items-center","mt-2","ps-2"],["class","fa-solid fa-square-check fa-xl text-primary",4,"ngIf"],["class","fa-solid fa-square-xmark fa-xl text-danger",4,"ngIf"],[1,"ms-2"],["type","radio","name","chosenPlan","class","form-check-input align-self-center mt-3 border-primary",3,"checked","change",4,"ngIf"],[1,"fa-solid","fa-square-check","fa-xl","text-primary"],[1,"fa-solid","fa-square-xmark","fa-xl","text-danger"],["type","radio","name","chosenPlan",1,"form-check-input","align-self-center","mt-3","border-primary",3,"checked","change"]],template:function(t,r){1&t&&(i.TgZ(0,"div",0)(1,"div",1),i._UZ(2,"img",2),i.qZA(),i.TgZ(3,"div",3)(4,"span",4),i._uU(5),i.qZA(),i.TgZ(6,"div",5),i._UZ(7,"span",6),i.TgZ(8,"div",7)(9,"span"),i._uU(10,"\u062d\u062f\u0627\u0642\u0644 \u0645\u0628\u0644\u063a \u0633\u0631\u0645\u0627\u06cc\u0647 \u06af\u0630\u0627\u0631\u06cc "),i.qZA(),i.TgZ(11,"span"),i._uU(12),i.ALo(13,"currency"),i.qZA()()(),i.TgZ(14,"div",8),i.YNc(15,E,1,0,"span",9),i.YNc(16,L,1,0,"span",10),i.TgZ(17,"span",11),i._uU(18,"\u062a\u0636\u0645\u06cc\u0646 \u0627\u0635\u0644 \u0633\u0631\u0645\u0627\u06cc\u0647 \u062f\u0627\u0631\u062f"),i.qZA()(),i.TgZ(19,"div",8),i.YNc(20,H,1,0,"span",9),i.YNc(21,ie,1,0,"span",10),i.TgZ(22,"span",11),i._uU(23,"\u0645\u062f\u06cc\u0631 \u0633\u0628\u062f\u06af\u0631\u062f\u0627\u0646\u06cc \u0627\u062e\u062a\u0635\u0627\u0635\u06cc \u062f\u0627\u0631\u062f"),i.qZA()(),i.YNc(24,xe,1,1,"input",12),i.qZA()()),2&t&&(i.xp6(2),i.Q6J("src",r.logoFile,i.LSH),i.xp6(3),i.Oqu(r.title),i.xp6(7),i.hij("",i.gM2(13,8,r.minCapitalAmount,"IRR","","1.0-0")," \u0631\u06cc\u0627\u0644"),i.xp6(3),i.Q6J("ngIf",r.hasCapitalGuarantee),i.xp6(1),i.Q6J("ngIf",!r.hasCapitalGuarantee),i.xp6(4),i.Q6J("ngIf",r.hasPortfolioManager),i.xp6(1),i.Q6J("ngIf",!r.hasPortfolioManager),i.xp6(3),i.Q6J("ngIf",r.selectable))},dependencies:[gn.ez,gn.O5,gn.H9,Y.SK],styles:["[_nghost-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem 1rem!important}.logo-box[_ngcontent-%COMP%]{height:7.5rem;width:7.5rem}"]})}function Ie(_,e){const t=_.length;for(let r=0;r<t;++r)if(_[r]===e)return r;return-1}function $e(_,e){const t=_.length,r=new Array(t);for(let h=0;h<t;++h)r[h]=e(_[h],h);return r}function Oe(_,e){const t=_.length;for(let r=0;r<t;++r)e(_[r],r)}function yt(_,e){let t=_.length;for(;t>0;)--t,e(_[t],t)}function Et(_,e){const t=_.length;for(let r=0;r<t&&e(_[r],r);++r);}function Fn(_,e){let t=!1,r=0;for(;;){if(r=_.indexOf(e,r),-1===r)return t;t=!0,_.splice(r,1)}}function Vn(_,e){let t=_.indexOf(e);return-1!==t&&(_.splice(t,1),!0)}function Ai(_,e,t){let r=Ie(_,e);-1!==r&&Yr(_,r),null==t?_.push(e):lr(_,t,e)}function Oi(_,e){-1===_.indexOf(e)&&_.push(e)}function yi(_){const e=_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=_[r];return t}function lr(_,e,t){_.splice(e,0,t)}function Yr(_,e){_.splice(e,1)}function Fi(_,e){const t=_.length;for(let r=0;r<t;++r)if(e(_[r],r))return r;return-1}function ls(_,e){const t=Fi(_,e);if(-1!==t)return _[t]}function ta(_,e){let t=_.length;for(;t>0;)--t,e(_[t])||_.splice(t,1)}class ul{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class fo{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Gl extends ul{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){Oe(this._disposers,e=>{e.dispose()})}}class yo extends ul{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){Oe(this._disposers,e=>{e.dispose()})}get disposers(){return this._disposers}}class Ur extends fo{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new fo(()=>{--this._counter,0===this._counter&&this.dispose()})}}function ro(_){return Number(_)!==_}function Ho(_){if(null!=_&&!un(_)){let e=Number(_);return ro(e)&&Qr(_)&&""!=_?Ho(_.replace(/[^0-9.\-]+/g,"")):e}return _}function Il(_){if(el(_))return new Date(_);if(un(_))return new Date(_);{let e=Number(_);return un(e)?new Date(e):new Date(_)}}function Ns(_,e){return new Array(e+1).join(_)}function el(_){return"[object Date]"===function Lo(_){return{}.toString.call(_)}(_)}function Qr(_){return"string"==typeof _}function un(_){return"number"==typeof _&&Number(_)==_}function Mu(_){return"object"==typeof _&&null!==_}const qo="__\xa7\xa7\xa7__",Ku="__\xa7\xa7\xa7\xa7__";class uu{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Oe(e,t=>{t.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(e){return function ze(_,e){const t=_.length;for(let r=0;r<t;++r)if(e(_[r]))return!0;return!1}(this._listeners,t=>(null===t.type||t.type===e)&&!t.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,t=1/0){this._disabled[e]=t}_removeListener(e){if(0===this._iterating){const t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}_removeExistingListener(e,t,r,h){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(y=>{y.once===e&&y.type===t&&(void 0===r||y.callback===r)&&y.context===h&&y.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&void 0===this._disabled[e]}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(t=>{t.type===e&&t.disposer.dispose()})}has(e,t,r){return-1!==Fi(this._listeners,y=>!0!==y.once&&y.type===e&&(void 0===t||y.callback===t)&&y.context===r)}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const t=this._disabled[e];return un(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{Oe(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(Oe(this._killed,t=>{this._removeListener(t)}),this._killed.length=0)}}dispatch(e,t){this._shouldDispatch(e)&&this._eachListener(r=>{!r.killed&&(null===r.type||r.type===e)&&r.dispatch(e,t)})}_on(e,t,r,h,y,D){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,r,h);const F={type:t,callback:r,context:h,shouldClone:y,dispatch:D,killed:!1,once:e,disposer:new fo(()=>{F.killed=!0,this._removeListener(F)})};return this._listeners.push(F),F}onAll(e,t,r=!0){return this._on(!1,null,e,t,r,(h,y)=>e.call(t,y)).disposer}on(e,t,r,h=!0){return this._on(!1,e,t,r,h,(y,D)=>t.call(r,D)).disposer}once(e,t,r,h=!0){const y=this._on(!0,e,t,r,h,(D,F)=>{y.disposer.dispose(),t.call(r,F)});return y.disposer}off(e,t,r){this._removeExistingListener(!1,e,t,r)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const t=[];return Oe(e._listeners,r=>{!r.killed&&r.shouldClone&&t.push(null===r.type?this.onAll(r.callback,r.context):r.once?this.once(r.type,r.callback,r.context):this.on(r.type,r.callback,r.context))}),new yo(t)}}function Uc(_,e){if(!(_>=0&&_<e))throw new Error("Index out of bounds: "+_)}class Dc{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new uu}),this._values=e}get values(){return this._values}contains(e){return-1!==this._values.indexOf(e)}removeValue(e){let t=0,r=this._values.length;for(;t<r;)this._values[t]===e?(this.removeIndex(t),--r):++t}indexOf(e){return Ie(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,t){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t})}_onSetIndex(e,t,r){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:t,newValue:r})}_onRemoveIndex(e,t){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t})}_onMoveIndex(e,t,r){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:t,value:r})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,t){Uc(e,this._values.length);const r=this._values[e];return r!==t&&(this._values[e]=t,this._onSetIndex(e,r,t)),r}insertIndex(e,t){return Uc(e,this._values.length+1),lr(this._values,e,t),this._onInsertIndex(e,t),t}swap(e,t){const r=this._values.length;if(Uc(e,r),Uc(t,r),e!==t){const h=this._values[e],y=this._values[t];this._values[e]=y,this._onSetIndex(e,h,y),this._values[t]=h,this._onSetIndex(t,y,h)}}removeIndex(e){Uc(e,this._values.length);const t=this._values[e];return Yr(this._values,e),this._onRemoveIndex(e,t),t}moveValue(e,t){let r=this.indexOf(e);if(-1!==r)if(Yr(this._values,r),null==t){const h=this._values.length;this._values.push(e),this._onMoveIndex(r,h,e)}else lr(this._values,t,e),this._onMoveIndex(r,t,e);else null==t?(this._values.push(e),this._onPush(e)):(lr(this._values,t,e),this._onInsertIndex(t,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){Oe(e,t=>{this.push(t)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const t=this._values;this._values=[],this._onClear(t),Oe(e,r=>{this._values.push(r),this._onPush(r)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let t=0;t<e;++t)yield this._values[t]}each(e){Oe(this._values,e)}eachReverse(e){yt(this._values,e)}}class Bu extends Dc{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(e,t,r){this.autoDispose&&t.dispose(),super._onSetIndex(e,t,r)}_onRemoveIndex(e,t){this.autoDispose&&t.dispose(),super._onRemoveIndex(e,t)}_onClear(e){this.autoDispose&&Oe(e,t=>{t.dispose()}),super._onClear(e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&Oe(this._values,e=>{e.dispose()}))}}class Ea extends Bu{constructor(e,t){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=t}}class Qp extends Dc{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(t=>{if("clear"===t.type)Oe(t.oldValues,r=>{this._onRemoved(r)});else if("push"===t.type)this._onInserted(t.newValue);else if("setIndex"===t.type)this._onRemoved(t.oldValue),this._onInserted(t.newValue,t.index);else if("insertIndex"===t.type)this._onInserted(t.newValue,t.index);else if("removeIndex"===t.type)this._onRemoved(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");this._onRemoved(t.value),this._onInserted(t.value,t.newIndex)}})}_onInserted(e,t){e._setParent(this._container,!0);const r=this._container._childrenDisplay;void 0===t?r.addChild(e._display):r.addChildAt(e._display,t)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),Oe(this.values,e=>{e.dispose()}))}}class Or{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,t){return e+this.value*(t-e)}static normalize(e,t,r){return e instanceof Or?e:new Or(t===r?0:100*Math.min(Math.max(1/(r-t)*(e-t),0),1))}}function Ha(_){return new Or(_)}Ha(0);const vi=Ha(100),Er=Ha(50);var na=N(7582);function As(_,e,t,r){return _.addEventListener(e,t,r||!1),new fo(()=>{_.removeEventListener(e,t,r||!1)})}function Wf(_){return As(window,"resize",e=>{_()})}function Uu(_){switch(_){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function Oh(_){return _.pointerId||0}function Qd(_){if(Uu("pointerevents"))return _;if(Uu("touchevents"))switch(_){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerleave":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(Uu("mouseevents"))switch(_){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return _}function Ph(_){if(typeof Touch<"u"&&_ instanceof Touch)return!0;if(typeof PointerEvent<"u"&&_ instanceof PointerEvent&&null!=_.pointerType)switch(_.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(_ instanceof MouseEvent)}else if(null!=_.type&&_.type.match(/^mouse/))return!1;return!0}function Kd(_,e,t){_.style[e]=t}function Xp(_){if(_.composedPath){const e=_.composedPath();return 0===e.length?null:e[0]}return _.target}function Mc(_,e){return _.target&&function Od(_,e){let t=e;for(;;){if(_===t)return!0;if(null===t.parentNode){if(null==t.host)return!1;t=t.host}else t=t.parentNode}}(e.root.dom,_.target)}function Xu(_,e){_.style.pointerEvents=e?"auto":"none"}function va(_,e){return un(_)?_:null!=_&&un(_.value)&&un(e)?e*_.value:0}function ba(_,e=0,t="0"){return"string"!=typeof _&&(_=_.toString()),e>_.length?Array(e-_.length+1).join(t)+_:_}function zu(_){return function Xm(_){return _.replace(/^[\s]*/,"")}(function Kf(_){return _.replace(/[\s]*$/,"")}(_))}function th(_){return _.replace(/\/(date|number|duration)$/i,"")}function pp(_){return _&&_.replace(/<[^>]*>/g,"")}function mp(_,e=!1){const t=new Date(_.getFullYear(),0,0),r=_.getTime()-t.getTime()+60*(t.getTimezoneOffset()-_.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function tf(_,e=!1){const t=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const h=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-h.getTime())/864e5+1)/7)}function Ug(_,e=!1){const t=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate())),r=t.getUTCDay()||7;return t.setUTCDate(t.getUTCDate()+4-r),new Date(Date.UTC(t.getUTCFullYear(),0,1)).getFullYear()}function eg(_,e=!1){const t=tf(new Date(_.getFullYear(),_.getMonth(),1),e);let r=tf(_,e);return 1==r&&(r=53),r-t+1}function nf(_,e){return _>12?_-=12:0===_&&(_=12),null!=e?_+(e-1):_}function Ol(_,e=!1,t=!1,r=!1,h){if(r)return e?"Coordinated Universal Time":"UTC";if(h){const F=_.toLocaleString("en-US",{timeZone:h});return zu(_.toLocaleString("en-US",{timeZone:h,timeZoneName:e?"long":"short"}).substr(F.length))}let y=_.toLocaleString("UTC"),D=_.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(y.length);return!1===t&&(D=D.replace(/ (standard|daylight|summer|winter) /i," ")),zu(D)}function Xf(_){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),t=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:_})).getTime()-t.getTime())/6e4*-1}function tg(_){return _.charAt(0).toUpperCase()+_.slice(1)}function jc(_){let e,t,r,h=_.h,y=_.s,D=_.l;if(0==y)e=t=r=D;else{let F=function(ae,be,ce){return ce<0&&(ce+=1),ce>1&&(ce-=1),ce<.16666666666666666?ae+6*(be-ae)*ce:ce<.5?be:ce<.6666666666666666?ae+(be-ae)*(.6666666666666666-ce)*6:ae},G=D<.5?D*(1+y):D+y-D*y,W=2*D-G;e=F(W,G,h+1/3),t=F(W,G,h),r=F(W,G,h-1/3)}return{r:Math.round(255*e),g:Math.round(255*t),b:Math.round(255*r)}}function jg(_){let e=_.r/255,t=_.g/255,r=_.b/255,h=Math.max(e,t,r),y=Math.min(e,t,r),D=0,F=0,G=(h+y)/2;if(h===y)D=F=0;else{let W=h-y;switch(F=G>.5?W/(2-h-y):W/(h+y),h){case e:D=(t-r)/W+(t<r?6:0);break;case t:D=(r-e)/W+2;break;case r:D=(e-t)/W+4}D/=6}return{h:D,s:F,l:G}}function Pl(_,e){return Math.round((e>0?255-_:_)*e)}function kh(_){return(299*_.r+587*_.g+114*_.b)/1e3>=128}function vo(_,e){return _||(_=[]),[..._,...e].filter((t,r,h)=>h.indexOf(t)===r)}function ng(_,e){return!(!e||_.left!=e.left||_.right!=e.right||_.top!=e.top||_.bottom!=e.bottom)}function sf(_){return"#"===_[0]&&(_=_.substr(1)),3==_.length&&(_=_[0].repeat(2)+_[1].repeat(2)+_[2].repeat(2)),parseInt(_,16)}function ec(_){return ti.fromAny(_)}class ti{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+ba(this.r.toString(16),2)+ba(this.g.toString(16),2)+ba(this.b.toString(16),2)}toHSL(e=1){return jg({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,t,r){const h=jc({h:e,s:t,l:r});return this.fromRGB(h.r,h.g,h.b)}toString(){return this.toCSSHex()}static fromHex(e){return new ti(e)}static fromRGB(e,t,r){return new ti((0|r)+(t<<8)+(e<<16))}static fromString(e){return new ti(sf(e))}static fromCSS(e){return new ti(function ig(_){let e=(_=_.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=_.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let t="";for(let r=1;r<=3;r++){let h=parseInt(e[r]).toString(16);1==h.length&&(h="0"+h),t+=h}return sf(t)}(e))}static fromAny(e){if(Qr(e)){if("#"==e[0])return ti.fromString(e);if("rgb"==e.substr(0,3))return ti.fromCSS(e)}else{if(un(e))return ti.fromHex(e);if(e instanceof ti)return ti.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,t,r){const h=function Hg(_,e={r:255,g:255,b:255},t={r:255,g:255,b:255}){let r=e,h=t;return kh(t)&&(r=t,h=e),kh(_)?h:r}({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,r?{r:r.r,g:r.g,b:r.b}:void 0);return this.fromRGB(h.r,h.g,h.b)}static interpolate(e,t,r,h="rgb"){if("hsl"==h){const y=t.toHSL(),D=r.toHSL();return ti.fromHSL(Zl(e,y.h,D.h),Zl(e,y.s,D.s),Zl(e,y.l,D.l))}return ti.fromRGB(Zl(e,t.r,r.r),Zl(e,t.g,r.g),Zl(e,t.b,r.b))}static lighten(e,t){const r=function Vg(_,e){return _&&{r:Math.max(0,Math.min(255,_.r+Pl(_.r,e))),g:Math.max(0,Math.min(255,_.g+Pl(_.g,e))),b:Math.max(0,Math.min(255,_.b+Pl(_.b,e))),a:_.a}}({r:e.r,g:e.g,b:e.b},t);return ti.fromRGB(r.r,r.g,r.b)}static brighten(e,t){const r=function nh(_,e){if(_){let r=Pl(Math.min(Math.max(_.r,_.g,_.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(_.r+r))),g:Math.max(0,Math.min(255,Math.round(_.g+r))),b:Math.max(0,Math.min(255,Math.round(_.b+r))),a:_.a}}return _}({r:e.r,g:e.g,b:e.b},t);return ti.fromRGB(r.r,r.g,r.b)}static saturate(e,t){const r=function Rh(_,e){if(void 0===_||1==e)return _;let t=jg(_);return t.s=e,jc(t)}({r:e.r,g:e.g,b:e.b},t);return ti.fromRGB(r.r,r.g,r.b)}}function Aa(_){return Object.keys(_)}function gp(_){return Object.assign({},_)}function es(_,e){Aa(_).forEach(t=>{e(t,_[t])})}function rg(_,e){return{}.hasOwnProperty.call(_,e)}function em(_){return(0,na.mG)(this,void 0,void 0,function*(){if(void 0!==_){const e=[];es(_,(t,r)=>{e.push(r.waitForStop())}),yield Promise.all(e)}})}function Zl(_,e,t){return e+_*(t-e)}function Nh(_,e,t){return _>=1?t:e}function af(_,e,t){return new Or(Zl(_,e.percent,t.percent))}function yp(_,e,t){return ti.interpolate(_,e,t)}function sg(_){return _}function vp(_){return _*_*_}function bp(_){return function(e){return 1-_(1-e)}}Math;Math.asin(1);class sb{constructor(e,t){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=t,es(t,r=>{this._userSettings[r]=!0})}get(e,t){const r=this._settings[e];return void 0!==r?r:t}setRaw(e,t){this._settings[e]=t}set(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){Aa(e).forEach(t=>{this.set(t,e[t])})}_eachSetting(e){es(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},t=this._entity.states.lookup("default");this._eachSetting((r,h)=>{e[r]||(e[r]=!0,this!==t&&(r in t._settings||(t._settings[r]=this._entity.get(r))),this._entity.set(r,h))})}applyAnimate(e){null==e&&(e=this._settings.stateAnimationDuration),null==e&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let t=this._settings.stateAnimationEasing;null==t&&(t=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",vp)));const r=this._entity.states.lookup("default"),h={stateAnimationEasing:!0,stateAnimationDuration:!0},y={};return this._eachSetting((D,F)=>{if(!h[D]){h[D]=!0,this!=r&&(D in r._settings||(r._settings[D]=this._entity.get(D)));const G=this._entity.animate({key:D,to:F,duration:e,easing:t});G&&(y[D]=G)}}),y}}class Dy{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,t){const r=this._states[e];if(r)return r.setAll(t),r;{const h=new sb(this._entity,t);return this._states[e]=h,h}}remove(e){delete this._states[e]}apply(e){const t=this._states[e];t&&t.apply(),this._entity._applyState(e)}applyAnimate(e,t){let r;const h=this._states[e];return h&&(r=h.applyAnimate(t)),this._entity._applyStateAnimated(e,t),r}}const Eu=new class Yg{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.6.2"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}};function lf(_,e){return _===e?0:_<e?-1:1}function My(_,e,t){const r=_.length,h=e.length,y=Math.min(r,h);for(let D=0;D<y;++D){const F=t(_[D],e[D]);if(0!==F)return F}return lf(r,h)}function Ey(_,e){return _===e?0:_<e?-1:1}class ih{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,t){let r=this._callbacks[e];return void 0===r&&(r=this._callbacks[e]=[]),r.push(t),this._entity._markDirtyKey(e),new fo(()=>{Vn(r,t)&&this._entity._markDirtyKey(e)})}remove(e){const t=this._callbacks[e];void 0!==t&&(delete this._callbacks[e],0!==t.length&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,t){if(!this._disabled[e]){const r=this._callbacks[e];if(void 0!==r)for(let h=0,y=r.length;h<y;++h)t=r[h](t,this._entity,e)}return t}}class xp{constructor(e,t,r,h,y,D,F){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new uu}),this._animation=e,this._from=t,this._to=r,this._duration=h,this._easing=y,this._loops=D,this._interpolate=function F_(_,e){return"number"==typeof _&&"number"==typeof e?Zl:_ instanceof Or&&e instanceof Or?af:_ instanceof ti&&e instanceof ti?yp:Nh}(t,r),this._oldTime=F}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){!this._stopped&&!this._playing&&(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,t)=>{if(this._stopped)e();else{const h=this.events.on("stopped",()=>{h.dispose(),e()})}})}_checkEnded(){return!(this._loops>1&&(--this._loops,1))}_run(e){null!==this._oldTime&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}}let tc=0;class wp{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++tc}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_playingAnimations",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}_checkDirty(){Aa(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){return!this.isDisposed()&&(es(this._animatingSettings,(t,r)=>{if(r._stopped)this._stopAnimation(t);else if(r._playing){r._run(e);const h=r.percentage;h>=1?r._checkEnded()?this.set(t,r._value(1)):(r._reset(e),this._set(t,r._value(1))):this._set(t,r._value(h))}}),es(this._animatingPrivateSettings,(t,r)=>{if(r._stopped)this._stopAnimationPrivate(t);else if(r._playing){r._run(e);const h=r.percentage;h>=1?r._checkEnded()?this.setPrivate(t,r._value(1)):(r._reset(e),this._setPrivate(t,r._value(1))):this._setPrivate(t,r._value(h))}}),0!==this._playingAnimations)}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,t){let r=this._settingEvents[e];return void 0===r&&(r=this._settingEvents[e]=[]),r.push(t),new fo(()=>{Vn(r,t),0===r.length&&delete this._settingEvents[e]})}onPrivate(e,t){let r=this._privateSettingEvents[e];return void 0===r&&(r=this._privateSettingEvents[e]=[]),r.push(t),new fo(()=>{Vn(r,t),0===r.length&&delete this._privateSettingEvents[e]})}getRaw(e,t){const r=this._settings[e];return void 0!==r?r:t}get(e,t){return this.getRaw(e,t)}_sendKeyEvent(e,t){const r=this._settingEvents[e];void 0!==r&&Oe(r,h=>{h(t,this,e)})}_sendPrivateKeyEvent(e,t){const r=this._privateSettingEvents[e];void 0!==r&&Oe(r,h=>{h(t,this,e)})}_setRaw(e,t,r){this._prevSettings[e]=t,this._sendKeyEvent(e,r)}setRaw(e,t){const r=this._settings[e];this._settings[e]=t,r!==t&&this._setRaw(e,r,t)}_set(e,t){const r=this._settings[e];this._settings[e]=t,r!==t&&(this._setRaw(e,r,t),this._markDirtyKey(e))}_stopAnimation(e){const t=this._animatingSettings[e];t&&(--this._playingAnimations,delete this._animatingSettings[e],t.stop())}set(e,t){return this._set(e,t),this._stopAnimation(e),t}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){Oe(Aa(this._settings),e=>{this.remove(e)})}getPrivate(e,t){const r=this._privateSettings[e];return void 0!==r?r:t}_setPrivateRaw(e,t,r){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,r)}setPrivateRaw(e,t){const r=this._privateSettings[e];this._privateSettings[e]=t,r!==t&&this._setPrivateRaw(e,r,t)}_setPrivate(e,t){const r=this._privateSettings[e];this._privateSettings[e]=t,r!==t&&(this._setPrivateRaw(e,r,t),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const t=this._animatingPrivateSettings[e];t&&(--this._playingAnimations,t.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){es(e,(t,r)=>{this.set(t,r)})}animate(e){const t=e.key,r=e.to,h=e.duration||0,y=e.loops||1,D=void 0===e.from?this.get(t):e.from,F=void 0===e.easing?sg:e.easing;if(0===h)this.set(t,r);else{if(void 0!==D&&D!==r){this.set(t,D);const W=this._animatingSettings[t]=new xp(this,D,r,h,F,y,this._animationTime());return++this._playingAnimations,this._startAnimation(),W}this.set(t,r)}const G=new xp(this,D,r,h,F,y,null);return G.stop(),G}animatePrivate(e){const t=e.key,r=e.to,h=e.duration||0,y=e.loops||1,D=void 0===e.from?this.getPrivate(t):e.from,F=void 0===e.easing?sg:e.easing;if(0===h)this.setPrivate(t,r);else{if(void 0!==D&&D!==r){this.setPrivate(t,D);const W=this._animatingPrivateSettings[t]=new xp(this,D,r,h,F,y,this._animationTime());return++this._playingAnimations,this._startAnimation(),W}this.setPrivate(t,r)}const G=new xp(this,D,r,h,F,y,null);return G.stop(),G}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class kl extends wp{constructor(e,t,r,h=[]){if(super(t),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Dy(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new ih(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=h,t.id&&this._registerId(t.id)}static new(e,t,r){const h=new this(e,t,!0);return h._template=r,h._afterNew(),h}static _new(e,t,r=[]){const h=new this(e,t,!0,r);return h._afterNew(),h}_afterNew(){this._checkDirty();let e=!1;const t=this._template;t&&(e=!0,t._setObjectTemplate(this)),Oe(this._internalTemplates,r=>{e=!0,r._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),Oe(this._internalTemplates,t=>{t._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new uu}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(e,t){e in this._settings||super.set(e,t)}_setRawDefault(e,t){e in this._settings||super.setRaw(e,t)}_clearDirty(){Aa(this._dirty).forEach(e=>{this._dirty[e]=!1}),Aa(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return-1!==this.classNames.indexOf(e)}_pushPropertyDisposer(e,t){let r=this._disposerProperties[e];return void 0===r&&(r=this._disposerProperties[e]=[]),r.push(t),t}_disposeProperty(e){const t=this._disposerProperties[e];void 0!==t&&(Oe(t,r=>{r.dispose()}),delete this._disposerProperties[e])}set template(e){const t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,t){}get(e,t){const r=this.adapters.fold(e,this._settings[e]);return void 0!==r?r:t}isUserSetting(e){return this._userProperties[e]||!1}set(e,t){return this._userProperties[e]=!0,super.set(e,t)}setRaw(e,t){this._userProperties[e]=!0,super.setRaw(e,t)}_setSoft(e,t){return this._userProperties[e]?t:super.set(e,t)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,t){return this._userPrivateProperties[e]=!0,super.setPrivate(e,t)}setPrivateRaw(e,t){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,t)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,t,r){this._userProperties[t]||e===this._findTemplateByKey(t)&&super.set(t,r)}_setTemplatePrivateProperty(e,t,r){this._userPrivateProperties[t]||e===this._findTemplateByPrivateKey(t)&&super.setPrivate(t,r)}_removeTemplateProperty(e){if(!this._userProperties[e]){const t=this._findTemplateByKey(e);t?super.set(e,t._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const t=this._findTemplateByPrivateKey(e);t?super.setPrivate(e,t._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const t=this.states.create(e,{}),r={};this._eachTemplate(h=>{const y=h.states.lookup(e);y&&y._apply(t,r)}),es(t._settings,h=>{!r[h]&&!t._userSettings[h]&&t.remove(h)})}_applyTemplate(e,t){this._templateDisposers.push(e._apply(this,t)),es(e._settings,(r,h)=>{!t.settings[r]&&!this._userProperties[r]&&(t.settings[r]=!0,super.set(r,h))}),es(e._privateSettings,(r,h)=>{!t.privateSettings[r]&&!this._userPrivateProperties[r]&&(t.privateSettings[r]=!0,super.setPrivate(r,h))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(t=>(e(t),!1)),yt(this._internalTemplates,e),Oe(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const t={settings:{},privateSettings:{},states:{}};this._eachTemplate(r=>{this._applyTemplate(r,t)}),e&&(es(this._settings,r=>{!this._userProperties[r]&&!t.settings[r]&&super.remove(r)}),es(this._privateSettings,r=>{!this._userPrivateProperties[r]&&!t.privateSettings[r]&&super.removePrivate(r)}))}_findTemplate(e){const t=this._findStaticTemplate(e);if(void 0===t){const r=function qs(_,e){const t=function _o(_,e){let t=_.length;for(;t>0;)if(--t,e(_[t],t))return t;return-1}(_,e);if(-1!==t)return _[t]}(this._internalTemplates,e);return void 0===r?ls(this._templates,e):r}return t}_findTemplateByKey(e){return this._findTemplate(t=>e in t._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(t=>e in t._privateSettings)}_disposeTemplates(){Oe(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){Oe(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(e=!1){let t=!1;const r=[];let h=[];const y=new Set,D=this.get("themeTagsSelf");return D&&Oe(D,F=>{y.add(F)}),this._walkParents(F=>{F===this._root._rootContainer&&(t=!0),F._defaultThemes.length>0&&r.push(F._defaultThemes);const G=F.get("themes");G&&h.push(G);const W=F.get("themeTags");W&&Oe(W,ge=>{y.add(ge)})}),h=r.concat(h),this._removeTemplates(),(t||e)&&yt(this.classNames,F=>{const G=[];Oe(h,W=>{Oe(W,ge=>{const ae=ge._lookupRules(F);ae&&yt(ae,be=>{if(be.tags.every(pt=>y.has(pt))){const pt=function Sa(_,e){let t=0,r=_.length,h=!1;for(;t<r;){const y=t+r>>1,D=e(_[y]);D<0?t=y+1:(0===D&&(h=!0),r=y)}return{found:h,index:t}}(G,ke=>{const ft=lf(be.tags.length,ke.tags.length);return 0===ft?My(be.tags,ke.tags,lf):ft});G.splice(pt.index,0,be)}})})}),Oe(G,W=>{this._templates.push(W.template),W.template._setObjectTemplate(this)})}),this._applyTemplates(),(t||e)&&(this._runSetup=!1),t||e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const t=this._prevSettings.id;t&&delete Eu.entitiesById[t]}}_registerId(e){if(Eu.entitiesById[e]&&Eu.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');Eu.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),Oe(this._internalTemplates,r=>{r._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(r=>{r.dispose()}),es(this._disposerProperties,(r,h)=>{Oe(h,y=>{y.dispose()})});const t=this.get("id");t&&delete Eu.entitiesById[t]}setTimeout(e,t){const r=setTimeout(()=>{this.removeDispose(h),e()},t),h=new fo(()=>{clearTimeout(r)});return this._disposers.push(h),h}removeDispose(e){if(!this.isDisposed()){let t=Ie(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}hasTag(e){return-1!==Ie(this.get("themeTags",[]),e)}addTag(e){if(!this.hasTag(e)){const t=this.get("themeTags",[]);t.push(e),this.set("themeTags",t)}}removeTag(e){if(this.hasTag(e)){const t=this.get("themeTags",[]);Fn(t,e),this.set("themeTags",t)}}_t(e,t,...r){return this._root.language.translate(e,t,...r)}get root(){return this._root}}Object.defineProperty(kl,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(kl,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});class fd{constructor(e,t,r){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=r}get(e,t){const r=this._settings[e];return void 0!==r?r:t}set(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){Aa(e).forEach(t=>{this._settings[t]=e[t]}),this._template._stateChanged(this._name)}_apply(e,t){es(this._settings,(r,h)=>{!t[r]&&!e._userSettings[r]&&(t[r]=!0,e.setRaw(r,h))})}}class V_{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}lookup(e){return this._states[e]}create(e,t){const r=this._states[e];if(r)return r.setAll(t),r;{const h=new fd(e,this._template,t);return this._states[e]=h,this._template._stateChanged(e),h}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,t){es(this._states,(r,h)=>{let y=t.states[r];null==y&&(y=t.states[r]={});const D=e.states.create(r,{});h._apply(D,y)})}}class rm{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,t){let r=this._callbacks[e];return void 0===r&&(r=this._callbacks[e]=[]),r.push(t),new fo(()=>{Vn(r,t),0===r.length&&delete this._callbacks[e]})}remove(e){void 0!==this._callbacks[e]&&delete this._callbacks[e]}_apply(e){const t=[];return es(this._callbacks,(r,h)=>{Oe(h,y=>{t.push(e.adapters.add(r,y))})}),new yo(t)}}class us{constructor(e,t){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new V_(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new rm}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new uu}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new us(e,!0)}get entities(){return this._entities}get(e,t){const r=this._settings[e];return void 0!==r?r:t}setRaw(e,t){this._settings[e]=t}set(e,t){this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach(r=>{r._setTemplateProperty(this,e,t)}))}remove(e){e in this._settings&&(delete this._settings[e],this._entities.forEach(t=>{t._removeTemplateProperty(e)}))}removeAll(){es(this._settings,(e,t)=>{this.remove(e)})}getPrivate(e,t){const r=this._privateSettings[e];return void 0!==r?r:t}setPrivateRaw(e,t){return this._privateSettings[e]=t,t}setPrivate(e,t){return this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach(r=>{r._setTemplatePrivateProperty(this,e,t)})),t}removePrivate(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(t=>{t._removeTemplatePrivateProperty(e)}))}setAll(e){es(e,(t,r)=>{this.set(t,r)})}on(e,t){let r=this._settingEvents[e];return void 0===r&&(r=this._settingEvents[e]=[]),r.push(t),new fo(()=>{Vn(r,t),0===r.length&&delete this._settingEvents[e]})}onPrivate(e,t){let r=this._privateSettingEvents[e];return void 0===r&&(r=this._privateSettingEvents[e]=[]),r.push(t),new fo(()=>{Vn(r,t),0===r.length&&delete this._privateSettingEvents[e]})}_apply(e,t){const r=[];return es(this._settingEvents,(h,y)=>{Oe(y,D=>{r.push(e.on(h,D))})}),es(this._privateSettingEvents,(h,y)=>{Oe(y,D=>{r.push(e.onPrivate(h,D))})}),this.states._apply(e,t),r.push(this.adapters._apply(e)),r.push(e.events.copyFrom(this.events)),new yo(r)}_setObjectTemplate(e){this._entities.push(e)}_removeObjectTemplate(e){Fn(this._entities,e)}_stateChanged(e){this._entities.forEach(t=>{t._applyStateByKey(e)})}}const Cp=Math.PI,md=Cp/180,Vc=180/Cp;function tl(_,e,t){if(!un(e)||e<=0){let r=Math.round(_);return t&&r-_==.5&&r--,r}{let r=Math.pow(10,e);return Math.round(_*r)/r}}function Rl(_,e,t){return Math.min(Math.max(_,e),t)}function Hc(_){return Math.sin(md*_)}function kd(_){return Math.cos(md*_)}function uf(_){return(_%=360)<0&&(_+=360),_}function qg(_,e,t,r,h){let y=Number.MAX_VALUE,D=Number.MAX_VALUE,F=-Number.MAX_VALUE,G=-Number.MAX_VALUE,W=[];W.push(Jg(h,t)),W.push(Jg(h,r));let ge=Math.min(90*Math.floor(t/90),90*Math.floor(r/90)),ae=Math.max(90*Math.ceil(t/90),90*Math.ceil(r/90));for(let be=ge;be<=ae;be+=90)be>=t&&be<=r&&W.push(Jg(h,be));for(let be=0;be<W.length;be++){let ce=W[be];ce.x<y&&(y=ce.x),ce.y<D&&(D=ce.y),ce.x>F&&(F=ce.x),ce.y>G&&(G=ce.y)}return{left:_+y,top:e+D,right:_+F,bottom:e+G}}function Jg(_,e){return{x:_*kd(e),y:_*Hc(e)}}class cf extends uu{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}_onRenderer(e,t){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let r=this._rendererDisposers[e];if(void 0===r){const h=this._sprite._display.on(e,y=>{t.call(this,y)});r=this._rendererDisposers[e]=new Ur(()=>{delete this._rendererDisposers[e],h.dispose()})}return r.increment()}_on(e,t,r,h,y,D){const F=super._on(e,t,r,h,y,D),G=cf.RENDERER_EVENTS[t];return void 0!==G&&(F.disposer=new yo([F.disposer,this._onRenderer(t,G)])),F}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,t){const r=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=r}}}Object.defineProperty(cf,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(_){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",_))&&this.dispatch("click",this._makePointerEvent("click",_))},rightclick:function(_){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",_))},middleclick:function(_){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",_))},dblclick:function(_){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",_))},pointerover:function(_){const e=this._sprite;let t=!0;if(e.getPrivate("trustBounds")){e._getBounds();const r=e.globalBounds();(function Zv(_,e){return _.x>=e.left&&_.y>=e.top&&_.x<=e.right&&_.y<=e.bottom})(_.point,r)||(t=!1,e._root._renderer.removeHovering(e._display))}t&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",_))},pointerout:function(_){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",_))},pointerdown:function(_){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",_))},pointerup:function(_){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",_))},globalpointerup:function(_){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",_))},globalpointermove:function(_){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",_))},wheel:function(_){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:_.event,point:_.point})}}});class Gc extends kl{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}_markDirtyKey(e){super._markDirtyKey(e),("x"==e||"y"==e||"dx"==e||"dy"==e)&&(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),("x"==e||"y"==e)&&this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new cf(this)}_processTemplateField(){let e;const t=this.get("templateField");if(t){const r=this.dataItem;if(r){const h=r.dataContext;h&&(e=h[t],!(e instanceof us)&&e&&(e=us.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const t=this._dataItem;this._dataItem=e,this._processTemplateField();const r="dataitemchanged";e!=t&&this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this,oldDataItem:t,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof Or||this.get("height")instanceof Or?Oi(e._percentageSizeChildren,this):Vn(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof Or||this.get("y")instanceof Or?Oi(e._percentagePositionChildren,this):Vn(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const t=this.get("centerX");null!=t&&(this._display.pivot.x=e.left+va(t,e.right-e.left));const r=this.get("centerY");null!=r&&(this._display.pivot.y=e.top+va(r,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const t=this._tooltipPointerDp;t&&(t.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})),this._tooltipPointerDp=new yo([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",r=>{this.showTooltip(r.point)})}),this.events.on("pointerout",()=>{const r=this._tooltipMoveDp;r&&(r.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,t=this.events;if(this.isDirty("draggable")){const h=this.get("draggable");h?(this.set("interactive",!0),this._dragDp=new yo([t.on("pointerdown",y=>{this.dragStart(y)}),t.on("globalpointermove",y=>{this.dragMove(y)}),t.on("globalpointerup",y=>{this.dragStop(y)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!h}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const h=this.get("tooltipText"),y=this.get("tooltipHTML"),D=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(h||y)&&("click"==D?(this._tooltipDp=new yo([t.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),As(document,"click",F=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)):"always"==D||(this._tooltipDp=new yo([t.on("pointerover",()=>{this.showTooltip()}),t.on("pointerout",()=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let h=this.get("toggleKey");h&&"none"!=h?this._toggleDp=t.on("click",()=>{this._isDragging||this.set(h,!this.get(h))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const h=this.parent;h&&(this.isDirty("width")&&this.get("width")instanceof Or||this.isDirty("height")&&this.get("height")instanceof Or)&&(h.markDirty(),h._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const h=this.get("wheelable");h&&this.set("interactive",!0),e.wheelable=!!h}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter"));let r=this.get("filter","");if(this.isDirty("blur")){const h=this.get("blur",0);0!=h&&(r+=" blur("+h+"px)")}if(this.isDirty("saturate")){const h=this.get("saturate",1);1!=h&&(r+=" saturate("+h+")")}if(this.isDirty("brightness")){const h=this.get("brightness",1);1!=h&&(r+=" brightness("+h+")")}if(this.isDirty("contrast")){const h=this.get("contrast",1);1!=h&&(r+=" contrast("+h+")")}if(this.isDirty("sepia")){const h=this.get("sepia",0);0!=h&&(r+=" sepia("+h+")")}if(this.isDirty("hue")){const h=this.get("hue",0);0!=h&&(r+=" hue-rotate("+h+"deg)")}if(this.isDirty("invert")){const h=this.get("invert",0);0!=h&&(r+=" invert("+h+")")}if(r&&(e.filter=r),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new yo([t.on("focus",()=>{this.showTooltip()}),t.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const h=this.events;this.get("interactive")?this._hoverDp=new yo([h.on("click",y=>{Ph(y.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:y.target,originalEvent:y.originalEvent,point:y.point,simulated:y.simulated})},10))}),h.on("globalpointerup",y=>{Ph(y.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:y.target,originalEvent:y.originalEvent,point:y.point,simulated:y.simulated})),this._isDown&&this._handleUp(y)}),h.on("pointerover",()=>{this._handleOver()}),h.on("pointerout",()=>{this._handleOut()}),h.on("pointerdown",y=>{this._handleDown(y)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const t="dragstop";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const t=Oh(e.originalEvent);delete this._downPoints[t],0==Aa(this._downPoints).length&&(this._isDown=!1)}}_hasMoved(e){const t=Oh(e.originalEvent),r=this._downPoints[t];if(r){const h=Math.abs(r.x-e.point.x),y=Math.abs(r.y-e.point.y);return h>5||y>5}return!1}_hasDown(){return Aa(this._downPoints).length>0}_handleDown(e){const t=this.parent;if(t&&!this.get("draggable")&&t._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const r=Oh(e.originalEvent);this._downPoints[r]={x:e.point.x,y:e.point.y}}}dragMove(e){let t=this._dragEvent;if(t){if(t.simulated&&!e.simulated)return!0;let r=0,h=this.parent;for(;null!=h;)r+=h.get("rotation",0),h=h.parent;let y=e.point.x-t.point.x,D=e.point.y-t.point.y;const F=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const G="dragstart";F.isEnabled(G)&&F.dispatch(G,{type:G,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let G=this._dragPoint;this.set("x",G.x+y*kd(r)+D*Hc(r)),this.set("y",G.y+D*kd(r)-y*Hc(r));const W="dragged";F.isEnabled(W)&&F.dispatch(W,{type:W,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(y,D)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const G="dragstart";F.isEnabled(G)&&F.dispatch(G,{type:G,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,t=0;for(;;){if(!e)return t;++t,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const e=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const t=this.parent;t&&"absolute"!=this.get("position")&&(null==t.get("width")||null==t.get("height")||t.get("layout"))&&t.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let t;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),t=this._adjustedLocalBounds):(t={left:0,right:0,top:0,bottom:0},this._localBounds=t,this._adjustedLocalBounds=t),!e||e.left!==t.left||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom){const r="boundschanged";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}_fixMinBounds(e){let t=this.get("minWidth",this.getPrivate("minWidth")),r=this.get("minHeight",this.getPrivate("minHeight"));un(t)&&e.right-e.left<t&&(e.right=e.left+t),un(r)&&e.bottom-e.top<r&&(e.bottom=e.top+r);let h=this.getPrivate("width"),y=this.getPrivate("height");un(h)&&(h>0?e.right=e.left+h:e.left=e.right+h),un(y)&&(y>0?e.bottom=e.top+y:e.top=e.bottom+y)}_removeParent(e){e&&(e.children.removeValue(this),Vn(e._percentageSizeChildren,this),Vn(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.showTooltip(),this._handleOver()}unhover(){this.hideTooltip(),this._handleOut()}showTooltip(e){const t=this.getTooltip(),r=this.get("tooltipText"),h=this.get("tooltipHTML");if((r||h)&&t){const y=this.get("tooltipPosition"),D=this.getPrivate("tooltipTarget",this);("fixed"==y||!e)&&(this._display._setMatrix(),e=this.toGlobal(D._getTooltipPoint())),t.set("pointTo",e),t.set("tooltipTarget",D),t.get("x")||t.set("x",e.x),t.get("y")||t.set("y",e.y),r&&t.label.set("text",r),h&&t.label.set("html",h);const F=this.dataItem;if(F&&t.label._setDataItem(F),"always"==this.get("showTooltipOn")&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();t.label.text.markDirtyText();const G=t.show();return this.setPrivateRaw("showingTooltip",!0),G}}hideTooltip(){const e=this.getTooltip();if(e&&(e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==e)){let t=e.get("keepTargetHover")&&0==e.get("stateAnimationDuration",0)?400:void 0;const r=e.hide(t);return this.setPrivateRaw("showingTooltip",!1),r}}_getTooltipPoint(){const e=this._localBounds;if(e){let t=0,r=0;return this.get("isMeasured")?(t=e.left+va(this.get("tooltipX",0),e.right-e.left),r=e.top+va(this.get("tooltipY",0),e.bottom-e.top)):(t=va(this.get("tooltipX",0),this.width()),r=va(this.get("tooltipY",0),this.height())),{x:t,y:r}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let t=this.parent;if(t)return t.getTooltip()}}_updatePosition(){const e=this.parent;let t=this.get("dx",0),r=this.get("dy",0),h=this.get("x"),y=this.getPrivate("x"),D=0,F=0;const G=this.get("position");h instanceof Or&&(h=e?e.innerWidth()*h.value+e.get("paddingLeft",0):0),un(h)?D=h+t:null!=y?D=y:e&&"relative"==G&&(D=e.get("paddingLeft",0)+t);let W=this.get("y"),ge=this.getPrivate("y");W instanceof Or&&(W=e?e.innerHeight()*W.value+e.get("paddingTop",0):0),un(W)?F=W+r:null!=ge?F=ge:e&&"relative"==G&&(F=e.get("paddingTop",0)+r);const ae=this._display;if(ae.x!=D||ae.y!=F){ae.invalidateBounds(),ae.x=D,ae.y=F;const be="positionchanged";this.events.isEnabled(be)&&this.events.dispatch(be,{type:be,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),t=this.getPrivate("x");const r=this.parent;return r?e instanceof Or?va(e,r.innerWidth())+r.get("paddingLeft",0):un(e)?e:t??r.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(null!=e)return e;let t=this.get("y");const r=this.parent;return r?t instanceof Or?va(t,r.innerHeight())+r.get("paddingTop",0):un(t)?t:e??r.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,t=this.x(),r=this.y();return{left:e.left+t,right:e.right+t,top:e.top+r,bottom:e.bottom+r}}globalBounds(){const e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),r=this.toGlobal({x:e.right,y:e.top}),h=this.toGlobal({x:e.right,y:e.bottom}),y=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,r.x,h.x,y.x),top:Math.min(t.y,r.y,h.y,y.y),right:Math.max(t.x,r.x,h.x,y.x),bottom:Math.max(t.y,r.y,h.y,y.y)}}_onShow(e){}_onHide(e){}appear(e,t){return(0,na.mG)(this,void 0,void 0,function*(){return yield this.hide(0),t?new Promise((r,h)=>{this.setTimeout(()=>{r(this.show(e))},t)}):this.show(e)})}show(e){return(0,na.mG)(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const t=this.states.applyAnimate("default",e);yield em(t),this._isShowing=!1}})}hide(e){return(0,na.mG)(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let t=this.states.lookup("hidden");t||(t=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const r=this.states.applyAnimate("hidden",e);yield em(r),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}width(){let e=this.get("width"),t=this.get("maxWidth",this.getPrivate("maxWidth")),r=this.get("minWidth",this.getPrivate("minWidth")),h=this.getPrivate("width"),y=0;if(un(h))y=h;else if(null==e)this._adjustedLocalBounds&&(y=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof Or){const D=this.parent;y=D?D.innerWidth()*e.value:this._root.width()*e.value}else un(e)&&(y=e);return un(r)&&(y=Math.max(r,y)),un(t)&&(y=Math.min(t,y)),y}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(un(e))return e;{let r=this.get("width");if(un(r))return r}const t=this.parent;return t?t.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(un(e))return e;{let r=this.get("height");if(un(r))return r}const t=this.parent;return t?t.innerHeight():this._root.height()}height(){let e=this.get("height"),t=this.get("maxHeight",this.getPrivate("maxHeight")),r=this.get("minHeight",this.getPrivate("minHeight")),h=this.getPrivate("height"),y=0;if(un(h))y=h;else if(null==e)this._adjustedLocalBounds&&(y=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof Or){const D=this.parent;y=D?D.innerHeight()*e.value:this._root.height()*e.value}else un(e)&&(y=e);return un(r)&&(y=Math.max(r,y)),un(t)&&(y=Math.min(t,y)),y}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e,t=!1){const r=this._parent;e!==r&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(r),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return function Fh(_,e){return Aa(_).sort(e)}(this._downPoints,(e,t)=>e>t?1:e<t?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}}Object.defineProperty(Gc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(Gc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([Gc.className])});class cg extends kl{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),t=this.get("width",100),r=this.get("height",100),h=this.get("fill"),y=this.get("fillOpacity",1),D=this._backgroundDisplay,F=this._display;F.clear(),D.clear(),h&&y>0&&(D.beginFill(h,y),D.drawRect(0,0,t,r),D.endFill()),F.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(F,D,e,t,r)}this._clear=!1}}Object.defineProperty(cg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(cg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([cg.className])});class Tp extends cg{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const e=this.get("canvas");e&&(this.set("width",e.width),this.set("height",e.height))}_draw(){super._draw();const e=this._image;if(e){const r=this.get("width",100),h=this.get("height",100),y=this.get("fit","image");let D=0,F=0;"pattern"==y?(D=r,F=h):(D=e.width,F=e.height,"image"==y&&(this.set("width",D),this.set("height",F)));let W=0,ge=0;this.get("centered",!0)&&(W=r/2-D/2,ge=h/2-F/2),this._display.image(e,D,F,W,ge)}const t=this.get("canvas");t&&this._display.image(t,t.width,t.height,0,0)}_load(){const e=this.get("src");if(e){const t=new Image;t.src=e,t.decode().then(()=>{this._image=t,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(r=>{})}}}Object.defineProperty(Tp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(Tp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cg.classNames.concat([Tp.className])});var Dp=(()=>{return(_=Dp||(Dp={})).ADD="lighter",_.COLOR="color",_.COLOR_BURN="color-burn",_.COLOR_DODGE="color-dodge",_.DARKEN="darken",_.DIFFERENCE="difference",_.DST_OVER="destination-over",_.EXCLUSION="exclusion",_.HARD_LIGHT="hard-light",_.HUE="hue",_.LIGHTEN="lighten",_.LUMINOSITY="luminosity",_.MULTIPLY="multiply",_.NORMAL="source-over",_.OVERLAY="overlay",_.SATURATION="saturation",_.SCREEN="screen",_.SOFT_LIGHT="soft-light",_.SRC_ATOP="source-atop",_.XOR="xor",Dp;var _})();const dg=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"];class cs extends Gc{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(t.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(t.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");un(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const t=this.get("strokeDashoffset");t&&this._display.setLineDashOffset(t);const r=this.get("blendMode",Dp.NORMAL);this._display.blendMode=r;const h=this.get("draw");h&&h(this._display,this);const y=this.get("svgPath");null!=y&&this._display.svgPath(y)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),t=this.get("fillGradient"),r=this.get("fillPattern"),h=this.get("fillOpacity"),y=this.get("stroke"),D=this.get("strokeGradient"),F=this.get("strokePattern"),G=this.get("shadowColor"),W=this.get("shadowBlur"),ge=this.get("shadowOffsetX"),ae=this.get("shadowOffsetY"),be=this.get("shadowOpacity");if(G&&(W||ge||ae)&&this._display.shadow(G,W,ge,ae,be),e&&!t&&(this._display.beginFill(e,h),this._display.endFill()),t){if(e){const pt=t.get("stops",[]);pt.length&&Oe(pt,ke=>{(!ke.color||ke.colorInherited)&&e&&(ke.color=e,ke.colorInherited=!0),(null==ke.opacity||ke.opacityInherited)&&(ke.opacity=h,ke.opacityInherited=!0)})}const ce=t.getFill(this);ce&&(this._display.beginFill(ce,h),this._display.endFill())}if(r){const ce=r.pattern;ce&&(this._display.beginFill(ce,h),this._display.endFill(),r instanceof Tp&&r.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}if(y||D||F){const ce=this.get("strokeOpacity");let pt=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(pt/=this.get("scale",1)),this.get("crisp")&&(pt/=this._root._renderer.resolution);const ke=this.get("lineJoin");if(y&&!D&&(this._display.lineStyle(pt,y,ce,ke),this._display.endStroke()),D){const ft=D.get("stops",[]);ft.length&&Oe(ft,Gt=>{(!Gt.color||Gt.colorInherited)&&y&&(Gt.color=y,Gt.colorInherited=!0),(null==Gt.opacity||Gt.opacityInherited)&&(Gt.opacity=ce,Gt.opacityInherited=!0)});const xt=D.getFill(this);xt&&(this._display.lineStyle(pt,xt,ce,ke),this._display.endStroke())}if(F){let ft=F.pattern;ft&&(this._display.lineStyle(pt,ft,ce,ke),this._display.endStroke(),F instanceof Tp&&F.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(cs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(cs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Gc.classNames.concat([cs.className])});class dc extends cs{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}}function rh(_,e){_.get("reverseChildren",!1)?_.children.eachReverse(e):_.children.each(e)}Object.defineProperty(dc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(dc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([dc.className])});class oh extends kl{}Object.defineProperty(oh,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(oh,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([oh.className])});class Mp extends oh{updateContainer(e){let t=e.get("paddingLeft",0),r=e.innerWidth(),h=0;rh(e,D=>{if(D.isVisible()&&"relative"==D.get("position")){let F=D.get("width");if(F instanceof Or){h+=F.value;let G=r*F.value,W=D.get("minWidth",D.getPrivate("minWidth",-1/0));W>G&&(r-=W,h-=F.value);let ge=D.get("maxWidth",D.getPrivate("maxWidth",1/0));G>ge&&(r-=ge,h-=F.value)}else un(F)||(F=D.width()),r-=F+D.get("marginLeft",0)+D.get("marginRight",0)}}),(r<=0||r==1/0)&&(r=.1),rh(e,D=>{if(D.isVisible()&&"relative"==D.get("position")){let F=D.get("width");if(F instanceof Or){let G=r*F.value/h-D.get("marginLeft",0)-D.get("marginRight",0),W=D.get("minWidth",D.getPrivate("minWidth",-1/0)),ge=D.get("maxWidth",D.getPrivate("maxWidth",1/0));G=Math.min(Math.max(W,G),ge),D.setPrivate("width",G)}else D._prevSettings.width instanceof Or&&D.setPrivate("width",void 0)}});let y=t;rh(e,D=>{if("relative"==D.get("position"))if(D.isVisible()){let F=D.adjustedLocalBounds(),G=D.get("marginLeft",0),W=D.get("marginRight",0),ge=D.get("maxWidth"),ae=F.left,be=F.right;ge&&be-ae>ge&&(be=ae+ge);let ce=y+G-ae;D.setPrivate("x",ce),y=ce+be+W}else D.setPrivate("x",void 0)})}}Object.defineProperty(Mp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(Mp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oh.classNames.concat([Mp.className])});class df extends oh{updateContainer(e){let t=e.get("paddingTop",0),r=e.innerHeight(),h=0;rh(e,D=>{if(D.isVisible()&&"relative"==D.get("position")){let F=D.get("height");if(F instanceof Or){h+=F.value;let G=r*F.value,W=D.get("minHeight",D.getPrivate("minHeight",-1/0));W>G&&(r-=W,h-=F.value);let ge=D.get("maxHeight",D.getPrivate("maxHeight",1/0));G>ge&&(r-=ge,h-=F.value)}else un(F)||(F=D.height()),r-=F+D.get("marginTop",0)+D.get("marginBottom",0)}}),(r<=0||r==1/0)&&(r=.1),rh(e,D=>{if(D.isVisible()&&"relative"==D.get("position")){let F=D.get("height");if(F instanceof Or){let G=r*F.value/h-D.get("marginTop",0)-D.get("marginBottom",0),W=D.get("minHeight",D.getPrivate("minHeight",-1/0)),ge=D.get("maxHeight",D.getPrivate("maxHeight",1/0));G=Math.min(Math.max(W,G),ge),D.setPrivate("height",G)}else D._prevSettings.height instanceof Or&&D.setPrivate("height",void 0)}});let y=t;rh(e,D=>{if("relative"==D.get("position"))if(D.isVisible()){let F=D.adjustedLocalBounds(),G=D.get("marginTop",0),W=F.top,ge=F.bottom,ae=D.get("maxHeight");ae&&ge-W>ae&&(ge=W+ae);let be=D.get("marginBottom",0),ce=y+G-W;D.setPrivate("y",ce),y=ce+ge+be}else D.setPrivate("y",void 0)})}}Object.defineProperty(df,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(df,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oh.classNames.concat([df.className])});class hf extends oh{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let t=e.get("paddingLeft",0),r=e.get("paddingRight",0),h=e.get("paddingTop",0),y=e.maxWidth()-t-r,D=y,F=1;rh(e,pt=>{if(pt.get("visible")&&pt.getPrivate("visible")&&!pt.get("forceHidden")&&"absolute"!=pt.get("position")){let ke=pt.width();ke<D&&(D=ke),ke>F&&(F=ke)}}),D=Rl(D,1,y),F=Rl(F,1,y);let G=1;G=this.get("fixedWidthGrid")?y/F:y/D,G=Math.max(1,Math.floor(G)),G=Math.min(this.get("maxColumns",Number.MAX_VALUE),G);let W=this.getColumnWidths(e,G,F,y),ge=h,ae=0,be=0;G=W.length;let ce=t;rh(e,pt=>{if("relative"==pt.get("position")&&pt.isVisible()){const ke=pt.get("marginTop",0),ft=pt.get("marginBottom",0);let xt=pt.adjustedLocalBounds(),Gt=pt.get("marginLeft",0),Ht=pt.get("marginRight",0),Cn=ge+ke-xt.top;pt.setPrivate("x",ce+Gt-xt.left),pt.setPrivate("y",Cn),ce+=W[ae]+Ht,be=Math.max(be,pt.height()+ke+ft),ae++,ae>=G&&(ae=0,ce=t,ge+=be)}})}getColumnWidths(e,t,r,h){let y=0,D=[],F=0;return rh(e,G=>{let W=G.adjustedLocalBounds();"absolute"!=G.get("position")&&G.isVisible()&&(D[F]=this.get("fixedWidthGrid")?r:Math.max(0|D[F],W.right-W.left+G.get("marginLeft",0)+G.get("marginRight",0)),F<e.children.length-1&&(F++,F==t&&(F=0)))}),Oe(D,G=>{y+=G}),y>h?t>2?this.getColumnWidths(e,t-=1,r,h):[h]:D}}Object.defineProperty(hf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(hf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oh.classNames.concat([hf.className])});class gd{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,t=!1,r=!1){let h=[];e=this.escape(e);let y=t?e.split("'"):[e];for(let D=0;D<y.length;D++){let F=y[D];if(""!==F)if(D%2==0){F=F.replace(/\]\[/g,"]"+qo+"["),F=F.replace(/\[\]/g,"[ ]");let G=F.split(/[\[\]]+/);for(let W=0;W<G.length;W++){let ge=this.cleanUp(this.unescape(G[W]));ge!==qo&&""!==ge&&h.push(W%2==0?{type:"value",text:ge}:{type:r?"value":"format",text:"["+ge+"]"})}}else{let G=F.split(/[\[\]]+/);for(let W=0;W<G.length;W++){let ge=this.cleanUp(this.unescape(G[W]));""!==ge&&(W%2==0?h.push({type:"text",text:ge}):this.isImage(ge)?h.push({type:"image",text:"["+ge+"]"}):h.push({type:"format",text:"["+ge+"]"}))}}}return h}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let t={};if(""==e||"[ ]"==e)return{};const r=e.match(/('[^']*')|("[^"]*")/gi);if(r)for(let y=0;y<r.length;y++)e=e.replace(r[y],r[y].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let h=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!h)return{};for(let y=0;y<h.length;y++)if(h[y].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=h[y];else if(h[y].match(/^(underline|line-through)$/i))t.textDecoration=h[y];else if("/"!=h[y])if(h[y].match(/:/)){const D=h[y].replace("+"," ").split(/:[ ]*/);t[D[0]]=D[1]}else t.fill=ti.fromString(h[y]);return t}}function sm(_,e){if(null!=e){let r,t=(e=gd.escape(e=""+e)).match(/\{([^}]+)\}/g);if(t)for(r=0;r<t.length;r++){let y=Wg(_,t[r].replace(/\{([^}]+)\}/,"$1"),"");null==y&&(y=""),e=e.split(t[r]).join(y)}e=gd.unescape(e)}else e="";return e}function Wg(_,e,t){let r;const h=_.dataItem;let F,y=[],D=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;F=D.exec(e),null!==F;)if(F[3]){y.push({prop:F[3]});const G=_.getDateFormatter().get("dateFields",[]),W=_.getNumberFormatter().get("numericFields",[]),ge=_.getDurationFormatter().get("durationFields",[]);-1!==G.indexOf(F[3])?y.push({method:"formatDate",params:[]}):-1!==W.indexOf(F[3])?y.push({method:"formatNumber",params:[]}):-1!==ge.indexOf(F[3])&&y.push({method:"formatDuration",params:[]})}else{let G=[];if(""!=zu(F[2])){let ge,W=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;ge=W.exec(F[2]),null!==ge;)G.push(ge[1]||ge[2]||ge[3])}y.push({method:F[1],params:G})}if(h){r=pf(_,y,h._settings),(null==r||Mu(r))&&(r=pf(_,y,h));let G=h.dataContext;null==r&&G&&(r=pf(_,y,G),null==r&&(r=pf(_,[{prop:e}],G)),null==r&&G.dataContext&&(r=pf(_,y,G.dataContext))),null==r&&h.component&&h.component.dataItem!==h&&(r=Wg(h.component,e,t))}return null==r&&(r=pf(_,y,_)),null==r&&_.parent&&(r=Wg(_.parent,e,t)),r}function Oy(_,e){const t=_.getPrivate("customData");if(Mu(t))return t[e]}function pf(_,e,t,r){let h=t,y=!1;for(let D=0,F=e.length;D<F;D++){let G=e[D];if(G.prop){if(h instanceof Gc){let W=h.get(G.prop);null==W&&(W=h.getPrivate(G.prop)),null==W&&(W=Oy(h,G.prop)),null==W&&(W=h[G.prop]),h=W}else if(h.get){let W=h.get(G.prop);null==W&&(W=h[G.prop]),h=W}else h=h[G.prop];if(null==h)return}else switch(G.method){case"formatNumber":let W=Ho(h);null!=W&&(h=_.getNumberFormatter().format(W,r||G.params[0]||void 0),y=!0);break;case"formatDate":let ge=Il(h);if(!el(ge)||ro(ge.getTime()))return;null!=ge&&(h=_.getDateFormatter().format(ge,r||G.params[0]||void 0),y=!0);break;case"formatDuration":let ae=Ho(h);null!=ae&&(h=_.getDurationFormatter().format(ae,r||G.params[0]||void 0,G.params[1]||void 0),y=!0);break;case"urlEncode":case"encodeURIComponent":h=encodeURIComponent(h);break;default:h[G.method]&&h[G.method].apply(t,G.params)}}if(!y){let D=[{method:"",params:r}];if(null==r)un(h)?(D[0].method="formatNumber",D[0].params=""):el(h)&&(D[0].method="formatDate",D[0].params="");else{let F=function Su(_){if(typeof _>"u")return"string";let e=(_=(_=(_=_.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:"number"===_?"number":"date"===_?"date":"duration"===_?"duration":_.match(/[#0]/)?"number":_.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(r);"number"===F?D[0].method="formatNumber":"date"===F?D[0].method="formatDate":"duration"===F&&(D[0].method="formatDuration")}D[0].method&&(h=pf(_,D,h))}return h}Object.defineProperty(gd,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});class br extends Gc{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new Qp(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){yt(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let t=this._contentMask;this.get("maskContent")?t||(t=dc.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=t,e.addChildAt(t._display,0),e.mask=t._display):t&&(e.removeChild(t._display),e.mask=null,t.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),Oe(this._percentageSizeChildren,e=>{e._updateSize()}),Oe(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let t=this._localBounds;if(t&&!this.isHidden()){let r=t.left,h=t.top,y=t.right-r,D=t.bottom-h,F=this.get("maxWidth"),G=this.get("maxHeight");G&&D>G&&(D=G),F&&y>F&&(y=F);let W=this.width(),ge=this.height();e&&(e.setAll({width:y,height:D,x:r,y:h}),this._display.interactive&&(e._display.interactive=!0));const ae=this._contentMask;ae&&ae.setAll({width:W+1,height:ge+1});const be=this.get("verticalScrollbar");if(be){be.set("height",ge),be.set("x",W-be.width()-be.get("marginRight",0)),be.set("end",be.get("start",0)+ge/this._contentHeight);const ce=be.get("background");ce&&ce.setAll({width:be.width(),height:ge});let pt=!0;this._contentHeight<=ge&&(pt=!1),be.setPrivate("visible",pt)}}}_applyThemes(e=!1){return!!super._applyThemes(e)&&(this.eachChildren(t=>{t._applyThemes(e)}),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(t=>{t.states.apply(e)})}_applyStateAnimated(e,t){super._applyStateAnimated(e,t),this.get("setStateOnChildren")&&this.eachChildren(r=>{r.states.applyAnimate(e,t)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let e=this.get("width"),t=this.get("height"),r=this.getPrivate("width"),h=this.getPrivate("height"),y={left:0,top:0,right:this.width(),bottom:this.height()},D=this.get("layout"),F=!1,G=!1;if((D instanceof Mp||D instanceof hf)&&(F=!0),D instanceof df&&(G=!0),null==e&&null==r||null==t&&null==h||this.get("verticalScrollbar")){let W=Number.MAX_VALUE,ge=W,ae=-W,be=W,ce=-W;const pt=this.get("paddingLeft",0),ke=this.get("paddingTop",0),ft=this.get("paddingRight",0),xt=this.get("paddingBottom",0);this.children.each(Gt=>{if("absolute"!=Gt.get("position")&&Gt.get("isMeasured")){let Ht=Gt.adjustedLocalBounds(),Ut=Gt.x(),Cn=Gt.y(),Jn=Ut+Ht.left,fi=Ut+Ht.right,jn=Cn+Ht.top,or=Cn+Ht.bottom;F&&(Jn-=Gt.get("marginLeft",0),fi+=Gt.get("marginRight",0)),G&&(jn-=Gt.get("marginTop",0),or+=Gt.get("marginBottom",0)),Jn<ge&&(ge=Jn),fi>ae&&(ae=fi),jn<be&&(be=jn),or>ce&&(ce=or)}}),ge==W&&(ge=0),ae==-W&&(ae=0),be==W&&(be=0),ce==-W&&(ce=0),y.left=ge-pt,y.top=be-ke,y.right=ae+ft,y.bottom=ce+xt}this._contentWidth=y.right-y.left,this._contentHeight=y.bottom-y.top,un(e)&&(y.left=0,y.right=e),un(r)&&(y.left=0,y.right=r),un(t)&&(y.top=0,y.bottom=t),un(h)&&(y.top=0,y.bottom=h),this._localBounds=y}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),t=this.innerHeight();if(e!=this._prevWidth||t!=this._prevHeight){let r=this.get("layout"),h=!1,y=!1;r&&((r instanceof Mp||r instanceof hf)&&(h=!0),r instanceof df&&(y=!0)),Oe(this._percentageSizeChildren,D=>{if(!h){let F=D.get("width");F instanceof Or&&D.setPrivate("width",F.value*e)}if(!y){let F=D.get("height");F instanceof Or&&D.setPrivate("height",F.value*t)}}),Oe(this._percentagePositionChildren,D=>{D.markDirtyPosition(),D.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=t,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){const e=this.get("html");e&&""!==e?this._root._setHTMLContent(this,sm(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.startGrip.setPrivate("visible",!1),e.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let t=this.get("background");t||(t=this.set("background",dc.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",r=>{const h=r.originalEvent;if(!Mc(h,this))return;h.preventDefault();let y=h.deltaY/5e3;const D=e.get("start",0),F=e.get("end",1);D+y<=0&&(y=-D),F+y>=1&&(y=1-F),D+y>=0&&F+y<=1&&(e.set("start",D+y),e.set("end",F+y))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let r=this._contentHeight;const h=this._childrenDisplay,y=this._contentMask;h.y=-e.get("start")*r,h.markDirtyLayer(),y&&(y._display.y=-h.y,h.mask=y._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const t=this._prevSettings.verticalScrollbar;t&&(this._display.removeChild(t._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const t=this.get("background");t instanceof Gc&&(t.set("isMeasured",!1),t._setParent(this),this._display.addChildAt(t._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),t=this._prevSettings.mask;if(t&&(this._display.removeChild(t._display),t!=e&&t.dispose()),e){const r=e.parent;r&&r.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(t=>{t instanceof br&&t.walkChildren(e),e(t)})}eachChildren(e){const t=this.get("background");t&&e(t);const r=this.get("verticalScrollbar");r&&e(r);const h=this.get("mask");h&&e(h),this.children.values.forEach(y=>{e(y)})}allChildren(){const e=[];return this.eachChildren(t=>{e.push(t)}),e}_setDataItem(e){const t=e!==this._dataItem;super._setDataItem(e);const r=this.get("html","");r&&""!==r&&t&&this._root._setHTMLContent(this,sm(this,r))}}Object.defineProperty(br,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(br,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Gc.classNames.concat([br.className])});class Sp extends Gc{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){this.get("text")?super._updateBounds():this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let t=this.get("opacity",1);this._display.alpha=t}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new fo(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){let t=this.get("fill");t&&(e.fill=t)}if(this.isDirty("fillOpacity")){let t=this.get("fillOpacity",1);t&&(e.fillOpacity=t)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Oe(this._textStyles,t=>{this._dirty[t]&&(e[t]=this.get(t),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){const e=this.get("text","");return this.get("populateText")?sm(this,e):e}markDirtyText(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(Sp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(Sp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Gc.classNames.concat([Sp.className])});class Z_{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{Oe(e,t=>{Oe(this._targets,r=>{r.target===t.target&&r.callback()})})})}addTarget(e,t){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:t})}removeTarget(e){this._observer.unobserve(e),ta(this._targets,t=>t.target!==e)}}class ff{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,t){if(null===this._timer){let h=null;const y=()=>{const D=Date.now();(null===h||D>h+ff.delay)&&(h=D,Oe(this._targets,F=>{let G=F.target.getBoundingClientRect();(G.width!==F.size.width||G.height!==F.size.height)&&(F.size=G,F.callback())})),this._timer=0===this._targets.length?null:requestAnimationFrame(y)};this._timer=requestAnimationFrame(y)}this._targets.push({target:e,callback:t,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(e){ta(this._targets,t=>t.target!==e),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(ff,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let hg=null;class ky{constructor(e,t){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=function Py(){return null===hg&&(hg=typeof ResizeObserver<"u"?new Z_:new ff),hg}(),this._element=e,this._listener=Wf(t),this._sensor.addTarget(e,t)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class pg extends kl{}Object.defineProperty(pg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(pg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([pg.className])});class hc extends br{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),Oe(this._textKeys,e=>{const t=this.get(e);null!=t&&this._text.set(e,t)}),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(Sp.new(this._root,{}))}_updateChildren(){if(super._updateChildren(),Oe(this._textKeys,e=>{this._text.set(e,this.get(e))}),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),""!==this.get("html","")?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let t;null!=this.get("width")?t="right"==e?vi:"center"==e?Er:0:"left"==e||"start"==e?t=this.get("paddingLeft"):("right"==e||"end"==e)&&(t=-this.get("paddingRight")),this.text.set("x",t)}}_setMaxDimentions(){const e=this.get("rotation"),t=90==e||270==e||-90==e,r=this.get("maxWidth",this.getPrivate("maxWidth",1/0));un(r)?this.text.set(t?"maxHeight":"maxWidth",r-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(t?"maxHeight":"maxWidth",void 0);const h=this.get("maxHeight",this.getPrivate("maxHeight",1/0));un(h)?this.text.set(t?"maxWidth":"maxHeight",h-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(t?"maxWidth":"maxHeight",void 0)}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}getText(){return this._text._getText()}}Object.defineProperty(hc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(hc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([hc.className])});class mf extends cs{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),t=this.height();if(e>0&&t>0){let r=this.get("cornerRadius",8);r=Rl(r,0,Math.min(e/2,t/2));let h=this.get("pointerX",0),y=this.get("pointerY",0),D=this.get("pointerBaseWidth",15)/2,F=0,G=0,ce=0,ke=(h-F)*(t-G)-(y-G)*(e-F),ft=(h-ce)*(0-t)-(y-t)*(e-ce);const xt=this._display;if(xt.moveTo(r,0),ke>0&&ft>0){let Gt=Math.round(Rl(h,r+D,e-D-r));y=Rl(y,-1/0,0),xt.lineTo(Gt-D,0),xt.lineTo(h,y),xt.lineTo(Gt+D,0)}if(xt.lineTo(e-r,0),xt.arcTo(e,0,e,r,r),ke>0&&ft<0){let Gt=Math.round(Rl(y,r+D,t-D-r));h=Rl(h,e,1/0),xt.lineTo(e,r),xt.lineTo(e,Math.max(Gt-D,r)),xt.lineTo(h,y),xt.lineTo(e,Gt+D)}if(xt.lineTo(e,t-r),xt.arcTo(e,t,e-r,t,r),ke<0&&ft<0){let Gt=Math.round(Rl(h,r+D,e-D-r));y=Rl(y,t,1/0),xt.lineTo(e-r,t),xt.lineTo(Gt+D,t),xt.lineTo(h,y),xt.lineTo(Gt-D,t)}if(xt.lineTo(r,t),xt.arcTo(0,t,0,t-r,r),ke<0&&ft>0){let Gt=Math.round(Rl(y,r+D,t-r-D));h=Rl(h,-1/0,0),xt.lineTo(0,t-r),xt.lineTo(0,Gt+D),xt.lineTo(h,y),xt.lineTo(0,Math.max(Gt-D,r))}xt.lineTo(0,r),xt.arcTo(0,0,r,0,r),xt.closePath()}}}}Object.defineProperty(mf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(mf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([mf.className])});class Zc extends br{constructor(e,t,r,h=[]){super(e,t,r,h),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",mf.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(hc.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(As(e,"pointerover",t=>{this._htmlContentHovered=!0}),As(e,"pointerout",t=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),Fn(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const t=this.get("background");this._keepHoverDp=new yo([t.events.on("pointerover",r=>{let h=this.get("tooltipTarget");h&&(h.parent&&h.parent.getPrivate("tooltipTarget")==h&&(h=h.parent),h.hover())}),t.events.on("pointerout",r=>{let h=this.get("tooltipTarget");h&&(h.parent&&h.parent.getPrivate("tooltipTarget")==h&&(h=h.parent),this._htmlContentHovered||h.unhover())})]),this.label.onPrivate("htmlElement",r=>{this._keepHoverDp&&r&&this._keepHoverDp.disposers.push(As(r,"pointerleave",h=>{const y=this.root._renderer.getEvent(h);t.events.dispatch("pointerout",{type:"pointerout",originalEvent:y.event,point:y.point,simulated:!1,target:t})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const t=this.get("background");let r,h;e&&t&&(r=e.get("fill"),h=e.get("stroke"),null==r&&(r=h),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=r&&t.set("fill",r),this._fillDp=e.on("fill",y=>{null!=y&&(t.set("fill",y),this._updateTextColor(y))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=r&&t.set("stroke",r),this._strokeDp=e.on("fill",y=>{null!=y&&t.set("stroke",y)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=r&&this.label.set("fill",r),this._labelDp=e.on("fill",y=>{null!=y&&this.label.set("fill",y)}),this._disposers.push(this._labelDp))),this._updateTextColor(r)}_updateTextColor(e){this.get("autoTextColor")&&(null==e&&(e=this.get("background").get("fill")),null==e&&(e=this._root.interfaceColors.get("background")),e instanceof ti&&this.label.set("fill",ti.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let t=.5,r=.5,h=this.get("centerX");h instanceof Or&&(t=h.value);let y=this.get("centerY");y instanceof Or&&(r=y.value);let D=e.width(),F=e.height(),G=this.parent,W=0,ge=0;if(G){W=G.x(),ge=G.y();const Ti=G.get("layerMargin");Ti&&(W+=Ti.left||0,ge+=Ti.top||0,D+=(Ti.left||0)+(Ti.right||0),F+=(Ti.top||0)+(Ti.bottom||0))}const ae=this.get("bounds",{left:-W,top:-ge,right:D-W,bottom:F-ge});this._updateBounds();let be=this.width(),ce=this.height();0===be&&(be=this._w),0===ce&&(ce=this._h);let pt=this.get("pointTo",{x:D/2,y:F/2}),ke=pt.x,ft=pt.y,xt=this.get("pointerOrientation"),Gt=this.get("background"),Ht=0,Ut=0,Cn=0;Gt instanceof mf&&(Ht=Gt.get("pointerLength",0),Ut=Gt.get("strokeWidth",0)/2,Cn=Ut,Gt.set("width",be),Gt.set("height",ce));let Jn=0,fi=0,jn=ae.right-ae.left,or=ae.bottom-ae.top;"horizontal"==xt||"left"==xt||"right"==xt?(Ut=0,"horizontal"==xt?ke>ae.left+jn/2?(ke-=be*(1-t)+Ht,Cn*=-1):ke+=be*t+Ht:"left"==xt?ke+=be*(1-t)+Ht:(ke-=be*t+Ht,Cn*=-1)):(Cn=0,"vertical"==xt?ft>ae.top+ce/2+Ht?ft-=ce*(1-r)+Ht:(ft+=ce*r+Ht,Ut*=-1):"down"==xt?ft-=ce*(1-r)+Ht:(ft+=ce*r+Ht,Ut*=-1)),ke=Rl(ke,ae.left+be*t,ae.left+jn-be*(1-t))+Cn,ft=Rl(ft,ae.top+ce*r,ae.top+or-ce*(1-r))-Ut,Jn=pt.x-ke+be*t+Cn,fi=pt.y-ft+ce*r-Ut,this._fx=ke,this._fy=ft;const Ci=this.get("animationDuration",0);if(Ci>0&&this.get("visible")&&this.get("opacity")>.1){const Ti=this.get("animationEasing");this.animate({key:"x",to:ke,duration:Ci,easing:Ti}),this.animate({key:"y",to:ft,duration:Ci,easing:Ti})}else this.set("x",ke),this.set("y",ft);Gt instanceof mf&&(Gt.set("pointerX",Jn),Gt.set("pointerY",fi)),be>0&&(this._w=be),ce>0&&(this._h=ce)}}}Object.defineProperty(Zc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(Zc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([Zc.className])});class Ry extends kl{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",t="_small_number_suffix_",r="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(t+"24")},{number:1e-21,suffix:this._t(t+"21")},{number:1e-18,suffix:this._t(t+"18")},{number:1e-15,suffix:this._t(t+"15")},{number:1e-12,suffix:this._t(t+"12")},{number:1e-9,suffix:this._t(t+"9")},{number:1e-6,suffix:this._t(t+"6")},{number:.001,suffix:this._t(t+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(r+"B")},{number:1024,suffix:this._t(r+"KB")},{number:1048576,suffix:this._t(r+"MB")},{number:1073741824,suffix:this._t(r+"GB")},{number:1099511627776,suffix:this._t(r+"TB")},{number:0x4000000000000,suffix:this._t(r+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,r){(null==t||Qr(t)&&"number"===t.toLowerCase())&&(t=this.get("numberFormat",""));let h,y=Number(e);if(Mu(t))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),t).format(y):new Intl.NumberFormat(void 0,t).format(y)}catch{return"Invalid"}else{t=th(t);let F,D=this.parseFormat(t,this._root.language);F=y>this.get("negativeBase")?D.positive:y<this.get("negativeBase")?D.negative:D.zero,null!=r&&!F.mod&&(F=gp(F),F.decimals.active=0==y?0:r),h=F.template.split(qo).join(this.applyFormat(y,F))}return!0===this.get("forceLTR")&&(h="\u200e"+h),h}parseFormat(e,t){const r=t.translateEmpty("_thousandSeparator"),h=t.translateEmpty("_decimalSeparator");let y={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:h},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:h},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:r},decimals:{active:-1,passive:-1,separator:h},template:"",source:"",parsed:!1}},D=(e=e.replace("||",Ku)).split("|");return y.positive.source=D[0],typeof D[2]>"u"?y.zero=y.positive:y.zero.source=D[2],typeof D[1]>"u"?y.negative=y.positive:y.negative.source=D[1],es(y,(F,G)=>{if(G.parsed)return;let W=G.source;"number"===W.toLowerCase()&&(W=this.get("numberFormat","#,###.#####"));let ge=gd.chunk(W,!0);for(let ae=0;ae<ge.length;ae++){let be=ge[ae];if(be.text=be.text.replace(Ku,"|"),"value"===be.type){let ce=be.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(ce)if(null===ce||""===ce[0])G.template+=be.text;else{let pt=ce[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);pt&&(G.mod=pt[0].toLowerCase(),G.modSpacing=!!ce[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));let ke=ce[0].split(".");if(""!==ke[0]){G.thousands.active=(ke[0].match(/0/g)||[]).length,G.thousands.passive=(ke[0].match(/\#/g)||[]).length+G.thousands.active;let ft=ke[0].split(",");1===ft.length||(G.thousands.interval=(ft.pop()||"").length,0===G.thousands.interval&&(G.thousands.interval=-1))}typeof ke[1]>"u"||(G.decimals.active=(ke[1].match(/0/g)||[]).length,G.decimals.passive=(ke[1].match(/\#/g)||[]).length+G.decimals.active),G.template+=be.text.split(ce[0]).join(qo)}}else G.template+=be.text}G.parsed=!0}),y}applyFormat(e,t){let r=e<0;e=Math.abs(e);let h="",y="",D=t.mod?t.mod.split(""):[];if(-1!==D.indexOf("b")){let ae=this.applyPrefix(e,this.get("bytePrefixes"),-1!==D.indexOf("!"));e=ae[0],h=ae[1],y=ae[2],t.modSpacing&&(y=" "+y)}else if(-1!==D.indexOf("a")){let ae=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==D.indexOf("!"));e=ae[0],h=ae[1],y=ae[2],t.modSpacing&&(y=" "+y)}else if(-1!==D.indexOf("p")){let ae=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(ae)),h=this._root.language.translate("_percentPrefix"),y=this._root.language.translate("_percentSuffix"),""==h&&""==y&&(y="%")}else if(-1!==D.indexOf("%")){let ae=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(ae)),y="%"}else if(-1!==D.indexOf("\u2030")){let ae=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(ae)),y="\u2030"}if(-1!==D.indexOf("e")){let ae;ae=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(ae[0]),y="e"+ae[1],t.modSpacing&&(y=" "+y)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){let ae=Math.pow(10,t.decimals.passive);e=Math.round(e*ae)/ae}let F="",G=function Xo(_){if(ro(_))return"NaN";if(_===1/0)return"Infinity";if(_===-1/0)return"-Infinity";if(0===_&&1/_==-1/0)return"-0";let e=_<0;_=Math.abs(_);let y,t=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+_),r=t[1],h=t[2]||"";if(void 0===t[3])y=""===h?r:r+"."+h;else{let D=+t[3];if(_<1)y="0."+Ns("0",D-1)+r+h;else{let F=D-h.length;y=0===F?r+h:F<0?r+h.slice(0,F)+"."+h.slice(F):r+h+Ns("0",F)}}return e?"-"+y:y}(e).split("."),W=G[0];if(W.length<t.thousands.active&&(W=Array(t.thousands.active-W.length+1).join("0")+W),t.thousands.interval>0){let ae=[],be=W.split("").reverse().join("");for(let ce=0,pt=W.length;ce<=pt;ce+=t.thousands.interval){let ke=be.substr(ce,t.thousands.interval).split("").reverse().join("");""!==ke&&ae.unshift(ke)}W=ae.join(t.thousands.separator)}F+=W,1===G.length&&G.push("");let ge=G[1];return ge.length<t.decimals.active&&(ge+=Array(t.decimals.active-ge.length+1).join("0")),""!==ge&&(F+=t.decimals.separator+ge),""===F&&(F="0"),0!==e&&r&&-1===D.indexOf("s")&&(F="-"+F),h&&(F=h+F),y&&(F+=y),F}applyPrefix(e,t,r=!1){let h=e,y="",D="",F=!1,G=1;for(let W=0,ge=t.length;W<ge;W++)t[W].number<=e&&(0===t[W].number?h=0:(h=e/t[W].number,G=t[W].number),y=t[W].prefix,D=t[W].suffix,F=!0);return!F&&r&&t.length&&0!=e&&(h=e/t[0].number,y=t[0].prefix,D=t[0].suffix,F=!0),F&&(h=parseFloat(h.toPrecision(Math.min(G.toString().length+Math.floor(h).toString().replace(/[^0-9]*/g,"").length,21)))),[h,y,D]}escape(e){return e.replace("||",Ku)}unescape(e){return e.replace(Ku,"|")}}function fg(_,e){let t=0,r=0,h=1,y=0,D=0,F=0,G=0,W=0;return _.formatToParts(e).forEach(ge=>{switch(ge.type){case"year":t=+ge.value;break;case"month":r=+ge.value-1;break;case"day":h=+ge.value;break;case"hour":y=+ge.value;break;case"minute":D=+ge.value;break;case"second":F=+ge.value;break;case"fractionalSecond":G=+ge.value;break;case"weekday":switch(ge.value){case"Sun":W=0;break;case"Mon":W=1;break;case"Tue":W=2;break;case"Wed":W=3;break;case"Thu":W=4;break;case"Fri":W=5;break;case"Sat":W=6}}}),24===y&&(y=0),{year:t,month:r,day:h,hour:y,minute:D,second:F,millisecond:G,weekday:W}}function Lh(_,e){const{year:t,month:r,day:h,hour:y,minute:D,second:F,millisecond:G}=fg(_,e);return Date.UTC(t,r,h,y,D,F,G)}class qv{constructor(e,t){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const t=this.offsetUTC(e),r=e.getTimezoneOffset(),h=new Date(e);h.setUTCMinutes(h.getUTCMinutes()-(t-r));const y=h.getTimezoneOffset();return r!=y&&h.setUTCMinutes(h.getUTCMinutes()+y-r),h}offsetUTC(e){return(Lh(this._utc,e)-Lh(this._dtf,e))/6e4}parseDate(e){return fg(this._dtf,e)}}class Jv extends kl{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t){(typeof t>"u"||""===t)&&(t=this.get("dateFormat","yyyy-MM-dd"));let r,h=e;if(Mu(t))try{const F=this.get("intlLocales");return F?new Intl.DateTimeFormat(F,t).format(h):new Intl.DateTimeFormat(void 0,t).format(h)}catch{return"Invalid"}let y=this.parseFormat(t);const D=this._root.timezone;return D&&!this._root.utc&&(h=D.convertLocal(h)),un(h.getTime())?(r=this.applyFormat(h,y),this.get("capitalize")&&(r=r.replace(/^.{1}/,r.substr(0,1).toUpperCase())),r):"Invalid date"}applyFormat(e,t){let h,y,D,F,G,W,ge,ae,r=t.template,be=e.getTime();this._root.utc?(h=e.getUTCFullYear(),y=e.getUTCMonth(),D=e.getUTCDay(),F=e.getUTCDate(),G=e.getUTCHours(),W=e.getUTCMinutes(),ge=e.getUTCSeconds(),ae=e.getUTCMilliseconds()):(h=e.getFullYear(),y=e.getMonth(),D=e.getDay(),F=e.getDate(),G=e.getHours(),W=e.getMinutes(),ge=e.getSeconds(),ae=e.getMilliseconds());for(let ce=0,pt=t.parts.length;ce<pt;ce++){let ke="";switch(t.parts[ce]){case"G":ke=this._t(h<0?"_era_bc":"_era_ad");break;case"yyyy":ke=Math.abs(h).toString(),h<0&&(ke+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":ke=Math.abs(h).toString().substr(-t.parts[ce].length),h<0&&(ke+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let ft=Ug(e,this._root.utc);ke="YYYY"==t.parts[ce]?Math.abs(ft).toString():Math.abs(ft).toString().substr(-t.parts[ce].length),ft<0&&(ke+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":ke=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":ke=this._t(this._getMonth(y)).substr(0,1);break;case"MMMM":ke=this._t(this._getMonth(y));break;case"MMM":ke=this._t(this._getShortMonth(y));break;case"MM":ke=ba(y+1,2,"0");break;case"M":ke=(y+1).toString();break;case"ww":ke=ba(tf(e,this._root.utc),2,"0");break;case"w":ke=tf(e,this._root.utc).toString();break;case"W":ke=eg(e,this._root.utc).toString();break;case"dd":ke=ba(F,2,"0");break;case"d":ke=F.toString();break;case"DD":case"DDD":ke=ba(mp(e,this._root.utc).toString(),t.parts[ce].length,"0");break;case"D":ke=mp(e,this._root.utc).toString();break;case"t":ke=this._root.language.translateFunc("_dateOrd").call(this,F);break;case"E":ke=(D||7).toString();break;case"EE":ke=ba((D||7).toString(),2,"0");break;case"EEE":case"eee":ke=this._t(this._getShortWeekday(D));break;case"EEEE":case"eeee":ke=this._t(this._getWeekday(D));break;case"EEEEE":case"eeeee":ke=this._t(this._getShortWeekday(D)).substr(0,1);break;case"e":case"ee":ke=(D-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==t.parts[ce]&&(ke=ba(ke,2,"0"));break;case"a":ke=this._t(G>=12?"PM":"AM");break;case"aa":ke=this._t(G>=12?"P.M.":"A.M.");break;case"aaa":ke=this._t(G>=12?"P":"A");break;case"h":ke=nf(G).toString();break;case"hh":ke=ba(nf(G),2,"0");break;case"H":ke=G.toString();break;case"HH":ke=ba(G,2,"0");break;case"K":ke=nf(G,0).toString();break;case"KK":ke=ba(nf(G,0),2,"0");break;case"k":ke=(G+1).toString();break;case"kk":ke=ba(G+1,2,"0");break;case"m":ke=W.toString();break;case"mm":ke=ba(W,2,"0");break;case"s":ke=ge.toString();break;case"ss":ke=ba(ge,2,"0");break;case"S":case"SS":case"SSS":ke=Math.round(ae/1e3*Math.pow(10,t.parts[ce].length)).toString();break;case"x":ke=be.toString();break;case"n":case"nn":case"nnn":ke=ba(ae,t.parts[ce].length,"0");break;case"z":ke=Ol(e,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":ke=Ol(e,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":ke=Ol(e,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":ke=Ol(e,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let xt=this._root.utc?"UTC":this._root.timezone;xt instanceof qv&&(xt=xt.name);const Gt=xt?Xf(xt):e.getTimezoneOffset();let Ht=Math.abs(Gt)/60,Ut=Math.floor(Ht),Cn=60*Ht-60*Ut;this._root.utc&&(Ut=0,Cn=0),"Z"==t.parts[ce]?(ke="GMT",ke+=Gt>0?"-":"+",ke+=ba(Ut,2)+":"+ba(Cn,2)):(ke=Gt>0?"-":"+",ke+=ba(Ut,2)+ba(Cn,2));break;case"i":ke=e.toISOString();break;case"I":ke=e.toUTCString()}r=r.replace(qo,ke)}return r}parseFormat(e){let t={template:"",parts:[]},r=gd.chunk(e,!0);for(let h=0;h<r.length;h++){let y=r[h];if("value"===y.type){if(y.text.match(/^date$/i)){let F=this.get("dateFormat","yyyy-MM-dd");Qr(F)||(F="yyyy-MM-dd"),y.text=F}let D=y.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(D)for(let F=0;F<D.length;F++)t.parts.push(D[F]),y.text=y.text.replace(D[F],qo)}t.template+=y.text}return t}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,t){if(e instanceof Date)return e;if(un(e))return new Date(e);if("x"==t)return new Date(parseInt(e));Qr(e)||(e=e.toString());let r,h="";t=(t=th(t)).substr(0,e.length);let y=this.parseFormat(t),D={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},F={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},G=0,W=0;for(let be=0;be<y.parts.length;be++){switch(W=be+G+1,y.parts[be]){case"yyyy":case"YYYY":h+="([0-9]{4})",D.year=W;break;case"yyy":case"YYY":h+="([0-9]{3})",D.year3=W;break;case"yy":case"YY":h+="([0-9]{2})",D.year2=W;break;case"y":case"Y":h+="([0-9]{1})",D.year1=W;break;case"MMMM":h+="("+this.getStringList(this._months()).join("|")+")",D.monthLong=W;break;case"MMM":h+="("+this.getStringList(this._shortMonths()).join("|")+")",D.monthShort=W;break;case"MM":case"M":h+="([0-9]{2}|[0-9]{1})",D.month=W;break;case"ww":case"w":h+="([0-9]{2}|[0-9]{1})",D.week=W;break;case"dd":case"d":h+="([0-9]{2}|[0-9]{1})",D.day=W;break;case"DDD":case"DD":case"D":h+="([0-9]{3}|[0-9]{2}|[0-9]{1})",D.yearDay=W;break;case"dddd":h+="("+this.getStringList(this._weekdays()).join("|")+")",D.weekdayLong=W;break;case"ddd":h+="("+this.getStringList(this._shortWeekdays()).join("|")+")",D.weekdayShort=W;break;case"aaa":case"aa":case"a":h+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",D.am=W;break;case"hh":case"h":h+="([0-9]{2}|[0-9]{1})",D.hour12Base1=W;break;case"HH":case"H":h+="([0-9]{2}|[0-9]{1})",D.hourBase0=W;break;case"KK":case"K":h+="([0-9]{2}|[0-9]{1})",D.hour12Base0=W;break;case"kk":case"k":h+="([0-9]{2}|[0-9]{1})",D.hourBase1=W;break;case"mm":case"m":h+="([0-9]{2}|[0-9]{1})",D.minute=W;break;case"ss":case"s":h+="([0-9]{2}|[0-9]{1})",D.second=W;break;case"SSS":case"SS":case"S":h+="([0-9]{3}|[0-9]{2}|[0-9]{1})",D.millisecond=W,D.millisecondDigits=y.parts[be].length;break;case"nnn":case"nn":case"n":h+="([0-9]{3}|[0-9]{2}|[0-9]{1})",D.millisecond=W;break;case"x":h+="([0-9]{1,})",D.timestamp=W;break;case"Z":h+="GMT([-+]+[0-9]{2}:[0-9]{2})",D.zone=W;break;case"ZZ":h+="([\\-+]+[0-9]{2}[0-9]{2})",D.zone=W;break;case"i":h+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",D.iso=W,G+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":G--}h+="[^0-9]*"}let ge=new RegExp(h),ae=e.match(ge);if(ae){if(D.year>-1&&(F.year=parseInt(ae[D.year])),D.year3>-1){let be=parseInt(ae[D.year3]);be+=1e3,F.year=be}if(D.year2>-1){let be=parseInt(ae[D.year2]);be+=be>50?1e3:2e3,F.year=be}if(D.year1>-1){let be=parseInt(ae[D.year1]);be=10*Math.floor((new Date).getFullYear()/10)+be,F.year=be}if(D.monthLong>-1&&(F.month=this.resolveMonth(ae[D.monthLong])),D.monthShort>-1&&(F.month=this.resolveShortMonth(ae[D.monthShort])),D.month>-1&&(F.month=parseInt(ae[D.month])-1),D.week>-1&&-1===D.day&&(F.month=0,F.day=function zg(_,e,t=1,r=!1){let h=new Date(e,0,4,0,0,0,0);return r&&h.setUTCFullYear(e),7*_+t-((h.getDay()||7)+3)}(parseInt(ae[D.week]),F.year,1,this._root.utc)),D.day>-1&&(F.day=parseInt(ae[D.day])),D.yearDay>-1&&(F.month=0,F.day=parseInt(ae[D.yearDay])),D.hourBase0>-1&&(F.hour=parseInt(ae[D.hourBase0])),D.hourBase1>-1&&(F.hour=parseInt(ae[D.hourBase1])-1),D.hour12Base0>-1){let be=parseInt(ae[D.hour12Base0]);11==be&&(be=0),D.am>-1&&!this.isAm(ae[D.am])&&(be+=12),F.hour=be}if(D.hour12Base1>-1){let be=parseInt(ae[D.hour12Base1]);12==be&&(be=0),D.am>-1&&!this.isAm(ae[D.am])&&(be+=12),F.hour=be}if(D.minute>-1&&(F.minute=parseInt(ae[D.minute])),D.second>-1&&(F.second=parseInt(ae[D.second])),D.millisecond>-1){let be=parseInt(ae[D.millisecond]);2==D.millisecondDigits?be*=10:1==D.millisecondDigits&&(be*=100),F.millisecond=be}if(D.timestamp>-1){F.timestamp=parseInt(ae[D.timestamp]);const be=new Date(F.timestamp);F.year=be.getUTCFullYear(),F.month=be.getUTCMonth(),F.day=be.getUTCDate(),F.hour=be.getUTCHours(),F.minute=be.getUTCMinutes(),F.second=be.getUTCSeconds(),F.millisecond=be.getUTCMilliseconds()}D.zone>-1&&(F.offset=this.resolveTimezoneOffset(new Date(F.year,F.month,F.day),ae[D.zone])),D.iso>-1&&(F.year=Ho(ae[D.iso+0]),F.month=Ho(ae[D.iso+1])-1,F.day=Ho(ae[D.iso+2]),F.hour=Ho(ae[D.iso+3]),F.minute=Ho(ae[D.iso+4]),F.second=Ho(ae[D.iso+5]),F.millisecond=Ho(ae[D.iso+6]),"Z"==ae[D.iso+7]||"z"==ae[D.iso+7]?F.utc=!0:""!=ae[D.iso+7]&&(F.offset=this.resolveTimezoneOffset(new Date(F.year,F.month,F.day),ae[D.iso+7]))),r=F.utc?new Date(Date.UTC(F.year,F.month,F.day,F.hour,F.minute,F.second,F.millisecond)):new Date(F.year,F.month,F.day,F.hour,F.minute+F.offset,F.second,F.millisecond)}else r=new Date(e);return r}resolveTimezoneOffset(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let h=t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),y=h[1],F=h[3],G=60*parseInt(h[2])+parseInt(F);return"+"==y&&(G*=-1),G-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let t=this._months().indexOf(e);return t>-1||!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._months()).indexOf(e),t>-1)?t:0}resolveShortMonth(e){let t=this._shortMonths().indexOf(e);return t>-1||(t=this._months().indexOf(e),t>-1)||this._root.language&&!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._shortMonths()).indexOf(e),t>-1)?t:0}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let t=[];for(let r=0;r<e.length;r++)t.push((this._root.language?this._t(e[r]):e[r]).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return t}}class $_ extends kl{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",t="_duration_second",r="_duration_minute",h="_duration_hour",y="_duration_day",D="_duration_week",F="_duration_month",ge="_minute",ae="_hour",be="_day",ce="_week",pt="_week",ke="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+"_second"),minute:this._t(e+ge),hour:this._t(e+ae),day:this._t(e+be),week:this._t(e+ce),month:this._t(e+pt),year:this._t(e+ke)},second:{second:this._t(t),minute:this._t(t+ge),hour:this._t(t+ae),day:this._t(t+be),week:this._t(t+ce),month:this._t(t+pt),year:this._t(t+ke)},minute:{minute:this._t(r),hour:this._t(r+ae),day:this._t(r+be),week:this._t(r+ce),month:this._t(r+pt),year:this._t(r+ke)},hour:{hour:this._t(h),day:this._t(h+be),week:this._t(h+ce),month:this._t(h+pt),year:this._t(h+ke)},day:{day:this._t(y),week:this._t(y+ce),month:this._t(y+pt),year:this._t(y+ke)},week:{week:this._t(D),month:this._t(D+pt),year:this._t(D+ke)},month:{month:this._t(F),year:this._t(F+ke)},year:{year:this._t("_duration_year")}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,r){let h=r||this.get("baseUnit");(typeof t>"u"||""===t)&&(t=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(Ho(e),void 0,h)),t=th(t);let F,y=this.parseFormat(t,h),D=Number(e);F=D>this.get("negativeBase")?y.positive:D<this.get("negativeBase")?y.negative:y.zero;let G=this.applyFormat(D,F);return""!==F.color&&(G="["+F.color+"]"+G+"[/]"),G}parseFormat(e,t){let r=t||this.get("baseUnit"),h={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},y=(e=e.replace("||",Ku)).split("|");return h.positive.source=y[0],typeof y[2]>"u"?h.zero=h.positive:h.zero.source=y[2],typeof y[1]>"u"?h.negative=h.positive:h.negative.source=y[1],es(h,(D,F)=>{if(F.parsed)return;let G=F.source,W=[];W=F.source.match(/^\[([^\]]*)\]/),W&&W.length&&""!==W[0]&&(G=F.source.substr(W[0].length),F.color=W[1]);let ge=gd.chunk(G,!0);for(let ae=0;ae<ge.length;ae++){let be=ge[ae];if(be.text=be.text.replace(Ku,"|"),"value"===be.type){be.text.match(/[yYMdDwhHKkmsSn]+a/)&&(F.absolute=!0,be.text=be.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let ce=be.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(ce)for(let pt=0;pt<ce.length;pt++)null==ce[pt]&&(ce[pt]=this._unitAliases[ce[pt]]),F.parts.push(ce[pt]),be.text=be.text.replace(ce[pt],qo)}F.template+=be.text}F.parsed=!0}),h}applyFormat(e,t){let r=!t.absolute&&e<this.get("negativeBase");e=Math.abs(e);let h=this.toTimeStamp(e,t.baseUnit),y=t.template;for(let D=0,F=t.parts.length;D<F;D++){let G=t.parts[D],W=this._toTimeUnit(G.substr(0,1)),ge=G.length,ae=Math.floor(h/this._getUnitValue(W));y=y.replace(qo,ba(ae,ge,"0")),h-=ae*this._getUnitValue(W)}return r&&(y="-"+y),y}toTimeStamp(e,t){return e*this._getUnitValue(t)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,t,r){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(r||(r=this.get("baseUnit")),null!=t&&e!=t){e=Math.abs(e),t=Math.abs(t);let h=this.getValueUnit(Math.max(e,t),r);return this.get("durationFormats")[r][h]}{let h=this.getValueUnit(e,r);return this.get("durationFormats")[r][h]}}getValueUnit(e,t){t||(t=this.get("baseUnit"));let r,h=this.getMilliseconds(e,t);return function Gg(_,e){for(let t in _)if(rg(_,t)&&!e(t,_[t]))break}(this._getUnitValues(),(y,D)=>{if(y==t||r){if(h/D<=1)return r||(r=y),!1;r=y}return!0}),r}getMilliseconds(e,t){return t||(t=this.get("baseUnit")),e*this._getUnitValue(t)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const Ep={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(_){let e="th";if(_<11||_>13)switch(_%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class Y_ extends kl{_setDefaults(){this.setPrivate("defaultLocale",Ep),super._setDefaults()}translate(e,t,...r){t||(t=this._root.locale||this.getPrivate("defaultLocale"));let h=e,y=t[e];if(null===y)h="";else if(null!=y)y&&(h=y);else if(t!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...r);if(r.length)for(let D=r.length,F=0;F<D;++F)h=h.split("%"+(F+1)).join(r[F]);return h}translateAny(e,t,...r){return this.translate(e,t,...r)}setTranslationAny(e,t,r){(r||this._root.locale)[e]=t}setTranslationsAny(e,t){es(e,(r,h)=>{this.setTranslationAny(r,h,t)})}translateEmpty(e,t,...r){let h=this.translate(e,t,...r);return h==e?"":h}translateFunc(e,t){return this._root.locale[e]?this._root.locale[e]:t!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,t){return this.isDefault()?e:$e(e,r=>this.translate(r,t))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class gf{constructor(e,t){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const t=new this(e,!0);return t.setupDefaultRules(),t}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,t=[]){let r=this._rules[e];r||(r=this._rules[e]=[]),t.sort(lf);const{index:h,found:y}=function Fs(_,e){let t=0,r=_.length,h=!1;for(;t<r;){const y=t+r>>1,D=e(_[y]);D<0?t=y+1:0===D?(h=!0,t=y+1):r=y}return{found:h,index:h?t-1:t}}(r,D=>{const F=lf(D.tags.length,t.length);return 0===F?My(D.tags,t,lf):F});if(y)return r[h].template;{const D=us.new({});return r.splice(h,0,{tags:t,template:D}),D}}rule(e,t=[]){return this.ruleRaw(e,t)}}function ir(_,e,t,r){_.set(e,t.get(r)),t.on(r,h=>{_.set(e,h)})}class cb extends gf{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,t=this._root.interfaceColors,r=this._root.horizontalLayout,h=this._root.verticalLayout,y=this.rule.bind(this);y("InterfaceColors").setAll({stroke:ti.fromHex(15066597),fill:ti.fromHex(15987699),primaryButton:ti.fromHex(6788316),primaryButtonHover:ti.fromHex(6779356),primaryButtonDown:ti.fromHex(6872182),primaryButtonActive:ti.fromHex(6872182),primaryButtonText:ti.fromHex(16777215),primaryButtonStroke:ti.fromHex(16777215),secondaryButton:ti.fromHex(14277081),secondaryButtonHover:ti.fromHex(10724259),secondaryButtonDown:ti.fromHex(9276813),secondaryButtonActive:ti.fromHex(15132390),secondaryButtonText:ti.fromHex(0),secondaryButtonStroke:ti.fromHex(16777215),grid:ti.fromHex(0),background:ti.fromHex(16777215),alternativeBackground:ti.fromHex(0),text:ti.fromHex(0),alternativeText:ti.fromHex(16777215),disabled:ti.fromHex(11382189),positive:ti.fromHex(5288704),negative:ti.fromHex(11730944)});{const D=y("ColorSet");D.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[ti.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),D.setPrivate("currentStep",0),D.setPrivate("currentPass",0)}y("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:bp(vp)}),y("Component").setAll({interpolationDuration:0,interpolationEasing:bp(vp)}),y("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:Er,tooltipY:Er,tooltipPosition:"fixed",isMeasured:!0}),y("Sprite").states.create("default",{visible:!0,opacity:1}),y("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),y("Graphics").setAll({strokeWidth:1}),y("Chart").setAll({width:vi,height:vi,interactiveChildren:!1}),y("Sprite",["horizontal","center"]).setAll({centerX:Er,x:Er}),y("Sprite",["vertical","center"]).setAll({centerY:Er,y:Er}),y("Container",["horizontal","layout"]).setAll({layout:r}),y("Container",["vertical","layout"]).setAll({layout:h}),y("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),y("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),y("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),y("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),y("GrainPattern").setAll({width:200,height:200,colors:[ti.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2}),y("LinearGradient").setAll({rotation:90}),y("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:hf.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),y("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const D=y("Rectangle",["legend","item","background"]);D.setAll({fillOpacity:0}),ir(D,"fill",t,"background")}y("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:Er,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),y("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:vi,height:vi,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const D=y("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});ir(D,"fill",t,"disabled"),ir(D,"stroke",t,"disabled")}y("Label",["legend","label"]).setAll({centerY:Er,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),ir(y("Label",["legend","label"]).states.create("disabled",{}),"fill",t,"disabled"),y("Label",["legend","value","label"]).setAll({centerY:Er,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:vi,populateText:!0}),ir(y("Label",["legend","value","label"]).states.create("disabled",{}),"fill",t,"disabled"),y("HeatLegend").setAll({stepCount:1}),y("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),y("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:vi,width:15}),y("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:vi,height:15}),y("HeatLegend",["vertical"]).setAll({height:vi}),y("HeatLegend",["horizontal"]).setAll({width:vi}),y("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),y("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const D=y("Label");D.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),ir(D,"fill",t,"text")}y("RadialLabel").setAll({textType:"regular",centerY:Er,centerX:Er,inside:!1,radius:0,baseRadius:vi,orientation:"auto",textAlign:"center"}),y("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),y("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),y("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const D=y("Tick");D.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),ir(D,"stroke",t,"grid")}y("Bullet").setAll({locationX:.5,locationY:.5}),y("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:Er,centerY:Er,animationEasing:bp(vp),exportable:!1}),y("Polygon").setAll({animationEasing:bp(vp)}),y("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:ti.fromHex(16777215)});{const D=y("Label",["tooltip"]);D.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),ir(D,"fill",t,"alternativeText")}y("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),y("Button").states.create("hover",{}),y("Button").states.create("down",{stateAnimationDuration:0}),y("Button").states.create("active",{});{const D=y("RoundedRectangle",["button","background"]);ir(D,"fill",t,"primaryButton"),ir(D,"stroke",t,"primaryButtonStroke")}ir(y("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),ir(y("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown"),ir(y("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",t,"primaryButtonActive"),ir(y("Graphics",["button","icon"]),"stroke",t,"primaryButtonText"),ir(y("Label",["button"]),"fill",t,"primaryButtonText"),y("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:vi,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const D=y("RoundedRectangle",["background","button","zoom"]);D.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),ir(D,"fill",t,"primaryButton")}ir(y("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),ir(y("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown");{const D=y("Graphics",["icon","button","zoom"]);D.setAll({crisp:!0,strokeOpacity:.7,draw:F=>{F.moveTo(0,0),F.lineTo(12,0)}}),ir(D,"stroke",t,"primaryButtonText")}y("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:Er,centerY:Er,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const D=y("RoundedRectangle",["background","resize","button"]);D.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),ir(D,"fill",t,"secondaryButton"),ir(D,"stroke",t,"secondaryButtonStroke")}ir(y("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),ir(y("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown");{const D=y("Graphics",["resize","button","icon"]);D.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:F=>{F.moveTo(0,.5),F.lineTo(0,12.5),F.moveTo(4,.5),F.lineTo(4,12.5)}}),ir(D,"stroke",t,"secondaryButtonText")}y("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),y("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),y("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const D=y("RoundedRectangle",["play","background"]);D.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),ir(D,"fill",t,"primaryButton")}{const D=y("Graphics",["play","icon"]);D.setAll({stateAnimationDuration:0,dx:1,draw:F=>{F.moveTo(0,-5),F.lineTo(8,0),F.lineTo(0,5),F.lineTo(0,-5)}}),ir(D,"fill",t,"primaryButtonText")}y("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),y("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:D=>{D.moveTo(-4,-5),D.lineTo(-1,-5),D.lineTo(-1,5),D.lineTo(-4,5),D.lineTo(-4,-5),D.moveTo(4,-5),D.lineTo(1,-5),D.lineTo(1,5),D.lineTo(4,5),D.lineTo(4,-5)}}),y("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const D=y("RoundedRectangle",["switch","background"]);D.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),ir(D,"fill",t,"primaryButton")}{const D=y("Circle",["switch","icon"]);D.setAll({radius:8,centerY:0,centerX:0,dx:0}),ir(D,"fill",t,"primaryButtonText")}y("Graphics",["switch","icon"]).states.create("active",{dx:16}),y("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:bp(vp)}),y("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:vi}),y("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:vi}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const D=y("RoundedRectangle",["scrollbar","main","background"]);D.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),ir(D,"fill",t,"fill")}{const D=y("RoundedRectangle",["scrollbar","thumb"]);D.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),ir(D,"fill",t,"secondaryButton")}ir(y("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),ir(y("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown"),y("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:Er,width:vi,centerX:Er,ariaLabel:e.translate("Use up and down arrows to move selection")}),y("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:Er,centerY:Er,height:vi,ariaLabel:e.translate("Use left and right arrows to move selection")});{const D=y("PointedRectangle",["axis","tooltip","background"]);D.setAll({cornerRadius:0}),ir(D,"fill",t,"alternativeBackground")}y("Label",["axis","tooltip"]).setAll({role:void 0}),y("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),y("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),y("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),y("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),y("Star").setAll({spikes:5,innerRadius:5,radius:10}),y("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),y("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),y("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),y("SpriteResizer").setAll({rotationStep:10}),y("Container",["resizer","grip"]).states.create("hover",{});{const D=y("RoundedRectangle",["resizer","grip"]);D.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),ir(D,"fill",t,"background"),ir(D,"stroke",t,"alternativeBackground")}{const D=y("RoundedRectangle",["resizer","grip","outline"]);D.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),D.states.create("hover",{fillOpacity:.3}),ir(D,"fill",t,"alternativeBackground")}y("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),y("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const D=y("Rectangle",["resizer","rectangle"]);D.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),ir(D,"stroke",t,"alternativeBackground")}}}class Fy{constructor(e=1,t=0,r=0,h=1,y=0,D=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=t,this.c=r,this.d=h,this.tx=y,this.ty=D}setTransform(e,t,r,h,y,D=1){this.a=Math.cos(y)*D,this.b=Math.sin(y)*D,this.c=-Math.sin(y)*D,this.d=Math.cos(y)*D,this.tx=e-(r*this.a+h*this.c),this.ty=t-(r*this.b+h*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const t=1/(this.a*this.d+this.c*-this.b);return{x:this.d*t*e.x+-this.c*t*e.y+(this.ty*this.c-this.tx*this.d)*t,y:this.a*t*e.y+-this.b*t*e.x+(-this.ty*this.a+this.tx*this.b)*t}}append(e){const t=this.a,r=this.b,h=this.c,y=this.d;this.a=e.a*t+e.b*h,this.b=e.a*r+e.b*y,this.c=e.c*t+e.d*h,this.d=e.c*r+e.d*y,this.tx=e.tx*t+e.ty*h+this.tx,this.ty=e.tx*r+e.ty*y+this.ty}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const r=this.a,h=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=h*e.a+this.d*e.c,this.d=h*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var mg=2*Math.PI,Qg=function(e,t,r,h,y,D,F){var G=e.x,W=e.y;return{x:h*(G*=t)-y*(W*=r)+D,y:y*G+h*W+F}},Qv=function(e,t){var r=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),h=Math.cos(e),y=Math.sin(e),D=Math.cos(e+t),F=Math.sin(e+t);return[{x:h-y*r,y:y+h*r},{x:D+F*r,y:F-D*r},{x:D,y:F}]},$l=function(e,t,r,h){var D=e*r+t*h;return D>1&&(D=1),D<-1&&(D=-1),(e*h-t*r<0?-1:1)*Math.acos(D)};const Xv=function(e){var t=e.px,r=e.py,h=e.cx,y=e.cy,D=e.rx,F=e.ry,G=e.xAxisRotation,W=void 0===G?0:G,ge=e.largeArcFlag,ae=void 0===ge?0:ge,be=e.sweepFlag,ce=void 0===be?0:be,pt=[];if(0===D||0===F)return[];var ke=Math.sin(W*mg/360),ft=Math.cos(W*mg/360),xt=ft*(t-h)/2+ke*(r-y)/2,Gt=-ke*(t-h)/2+ft*(r-y)/2;if(0===xt&&0===Gt)return[];D=Math.abs(D),F=Math.abs(F);var Ht=Math.pow(xt,2)/Math.pow(D,2)+Math.pow(Gt,2)/Math.pow(F,2);Ht>1&&(D*=Math.sqrt(Ht),F*=Math.sqrt(Ht));var Ut=function(e,t,r,h,y,D,F,G,W,ge,ae,be){var ce=Math.pow(y,2),pt=Math.pow(D,2),ke=Math.pow(ae,2),ft=Math.pow(be,2),xt=ce*pt-ce*ft-pt*ke;xt<0&&(xt=0),xt/=ce*ft+pt*ke;var Gt=(xt=Math.sqrt(xt)*(F===G?-1:1))*y/D*be,Ht=xt*-D/y*ae,Ut=ge*Gt-W*Ht+(e+r)/2,Cn=W*Gt+ge*Ht+(t+h)/2,Jn=(ae-Gt)/y,fi=(be-Ht)/D,jn=(-ae-Gt)/y,or=(-be-Ht)/D,Ci=$l(1,0,Jn,fi),Ti=$l(Jn,fi,jn,or);return 0===G&&Ti>0&&(Ti-=mg),1===G&&Ti<0&&(Ti+=mg),[Ut,Cn,Ci,Ti]}(t,r,h,y,D,F,ae,ce,ke,ft,xt,Gt),Cn=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function _(e,t){var r=[],h=!0,y=!1,D=void 0;try{for(var G,F=e[Symbol.iterator]();!(h=(G=F.next()).done)&&(r.push(G.value),!t||r.length!==t);h=!0);}catch(W){y=!0,D=W}finally{try{!h&&F.return&&F.return()}finally{if(y)throw D}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(Ut,4),Jn=Cn[0],fi=Cn[1],jn=Cn[2],or=Cn[3],Ci=Math.abs(or)/(mg/4);Math.abs(1-Ci)<1e-7&&(Ci=1);var Ti=Math.max(Math.ceil(Ci),1);or/=Ti;for(var Do=0;Do<Ti;Do++)pt.push(Qv(jn,or)),jn+=or;return pt.map(function(Qi){var eo=Qg(Qi[0],D,F,ft,ke,Jn,fi),rs=eo.x,fc=eo.y,Ar=Qg(Qi[1],D,F,ft,ke,Jn,fi),Io=Ar.x,Sr=Ar.y,Au=Qg(Qi[2],D,F,ft,ke,Jn,fi);return{x1:rs,y1:fc,x2:Io,y2:Sr,x:Au.x,y:Au.y}})};function Ly(_,e,t){if(e!==t)throw new Error("Required "+t+" arguments for "+_+" but got "+e)}function gg(_,e,t){if(e<t)throw new Error("Required at least "+t+" arguments for "+_+" but got "+e)}function Sc(_,e,t){if(gg(_,e,t),e%t!=0)throw new Error("Arguments for "+_+" must be in pairs of "+t)}function By(_){for(let e=0;e<_.length;e+=7){let t=e+3,r=_[t];if(r.length>1){const h=/^([01])([01])(.*)$/.exec(r);null!==h&&(_.splice(t,0,h[1]),++t,_.splice(t,0,h[2]),++t,h[3].length>0?_[t]=h[3]:_.splice(t,1))}if(++t,r=_[t],r.length>1){const h=/^([01])(.+)$/.exec(r);null!==h&&(_.splice(t,0,h[1]),++t,_[t]=h[2])}}}function _f(_){if(0===_||1===_)return _;throw new Error("Flag must be 0 or 1")}function Kg(_,e){for(;(!_.interactive||e(_))&&_._parent;)_=_._parent}function Uy(_,e,t){return As(_,Qd(e),r=>{const h=Xp(r);let y=r.touches;y?(0==y.length&&(y=r.changedTouches),t(yi(y),h)):t([r],h)})}function zy(_){const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d",{willReadFrequently:!0});t.drawImage(_,0,0,1,1);try{return t.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+_.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function am(_){_.width=0,_.height=0,_.style.width="0px",_.style.height="0px"}function t0(_){return Math.floor(_)+.5}class q_{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class lm extends ul{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new q_}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new Fy}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new Fy}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new Fy}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}subStatus(e){return{inactive:null==this.inactive?e.inactive:this.inactive,layer:this._layer||e.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,t){null==e?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=t,t&&Xu(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(e){return!e.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(e){return this._isInteractive(e)}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const t=this.getLocalMatrix(),r=t.apply({x:e.left,y:e.top}),h=t.apply({x:e.right,y:e.top}),y=t.apply({x:e.right,y:e.bottom}),D=t.apply({x:e.left,y:e.bottom});return{left:Math.min(r.x,h.x,y.x,D.x),top:Math.min(r.y,h.y,y.y,D.y),right:Math.max(r.x,h.x,y.x,D.x),bottom:Math.max(r.y,h.y,y.y,D.y)}}on(e,t,r){return this.interactive?this._renderer._addEvent(this,e,t,r):new fo(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,t){const r=this._matrix;let h=r.tx*t,y=r.ty*t;this.crisp&&(h=t0(h),y=t0(y)),e.setTransform(r.a*t,r.b*t,r.c*t,r.d*t,h,y)}_transformMargin(e,t,r){const h=this._matrix;e.setTransform(h.a*t,h.b*t,h.c*t,h.d*t,(h.tx+r.left)*t,(h.ty+r.top)*t)}_transformLayer(e,t,r){r.margin?this._transformMargin(e,r.scale||t,r.margin):this._transform(e,r.scale||t)}render(e){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const t=this.subStatus(e),r=this._renderer.resolution,h=this._renderer.layers,y=this._renderer._ghostLayer,D=y.context,F=this.mask;F&&F._setMatrix(),Oe(h,G=>{if(G){const W=G.context;W.save(),F&&(F._transformLayer(W,r,G),F._runPath(W),W.clip()),W.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(W,r,G),this.filter&&(W.filter=this.filter)}}),D.save(),F&&this._isInteractiveMask(t)&&(F._transformMargin(D,r,y.margin),F._runPath(D),D.clip()),this._transformMargin(D,r,y.margin),this._render(t),D.restore(),Oe(h,G=>{G&&G.context.restore()})}}_render(e){!1===this.exportable&&(e.layer.tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class Rd extends lm{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(e){return this.interactiveChildren||super._isInteractiveMask(e)}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,Vn(this._children,e)}_render(e){super._render(e);const t=this._renderer;this.interactive&&this.interactiveChildren&&++t._forceInteractive,Oe(this._children,r=>{r.compoundAlpha=this.compoundAlpha*this.alpha,r.render(e)}),this.interactive&&this.interactiveChildren&&--t._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),Oi(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&Oe(this._childLayers,t=>t.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&Oe(this._childLayers,e=>{e.dirty=!0})}}function Fl(_,e){_.left=Math.min(_.left,e.x),_.top=Math.min(_.top,e.y),_.right=Math.max(_.right,e.x),_.bottom=Math.max(_.bottom,e.y)}class Yl{colorize(e,t){}path(e){}addBounds(e){}}class sh extends Yl{colorize(e,t){e.beginPath()}}class $c extends Yl{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fillStyle=void 0!==t?t:this.color}}class Fd extends Yl{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class jy extends Yl{colorize(e,t){e.stroke()}}class Xg extends Yl{constructor(e,t,r){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r})}colorize(e,t){e.strokeStyle=void 0!==t?t:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class n0 extends Yl{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.setLineDash(this.dash)}}class r0 extends Yl{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.lineDashOffset=this.dashOffset}}class o0 extends Yl{constructor(e,t,r,h){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:h})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const t=this.x,r=this.y,h=t+this.width,y=r+this.height;Fl(e,{x:t,y:r}),Fl(e,{x:h,y:r}),Fl(e,{x:t,y}),Fl(e,{x:h,y})}}class s0 extends Yl{constructor(e,t,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){Fl(e,{x:this.x-this.radius,y:this.y-this.radius}),Fl(e,{x:this.x+this.radius,y:this.y+this.radius})}}class J_ extends Yl{constructor(e,t,r,h){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:h})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){Fl(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),Fl(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class _g extends Yl{constructor(e,t,r,h,y,D){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:D})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let t=qg(this.cx,this.cy,this.startAngle*Vc,this.endAngle*Vc,this.radius);Fl(e,{x:t.left,y:t.top}),Fl(e,{x:t.right,y:t.bottom})}}class a0 extends Yl{constructor(e,t,r,h,y){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:y})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class Vy extends Yl{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.lineTo(this.x,this.y)}addBounds(e){Fl(e,{x:this.x,y:this.y})}}class l0 extends Yl{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.moveTo(this.x,this.y)}addBounds(e){Fl(e,{x:this.x,y:this.y})}}class Hy extends Yl{path(e){e.closePath()}}class Gy extends Yl{constructor(e,t,r,h,y,D){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:D})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){Fl(e,{x:this.cpX,y:this.cpY}),Fl(e,{x:this.cpX2,y:this.cpY2}),Fl(e,{x:this.toX,y:this.toY})}}class e_ extends Yl{constructor(e,t,r,h){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:h})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){Fl(e,{x:this.cpX,y:this.cpY}),Fl(e,{x:this.toX,y:this.toY})}}class u0 extends Yl{constructor(e,t,r,h,y){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:y})}colorize(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}class Zy extends Yl{constructor(e,t,r,h,y){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:y})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){Fl(e,{x:this.x,y:this.y}),Fl(e,{x:this.width,y:this.height})}}class $y extends lm{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:Dp.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,t=1){this._fillAlpha=t,e?e instanceof ti?this._pushOp(new $c(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new $c(e))):this._pushOp(new $c("rgba(0, 0, 0, "+t+")"))}endFill(){this._pushOp(new Fd(this._hasShadows))}endStroke(){this._pushOp(new jy)}beginPath(){this._pushOp(new sh)}lineStyle(e=0,t,r=1,h){this._strokeAlpha=r,this._pushOp(new Xg(e,t?t instanceof ti?t.toCSS(r):t:"rgba(0, 0, 0, "+r+")",h))}setLineDash(e){this._pushOp(new n0(e||[]))}setLineDashOffset(e=0){this._pushOp(new r0(e))}drawRect(e,t,r,h){this._pushOp(new o0(e,t,r,h))}drawCircle(e,t,r){this._pushOp(new s0(e,t,r))}drawEllipse(e,t,r,h){this._pushOp(new J_(e,t,r,h))}arc(e,t,r,h,y,D=!1){this._pushOp(new _g(e,t,r,h,y,D))}arcTo(e,t,r,h,y){this._pushOp(new a0(e,t,r,h,y))}lineTo(e,t){this._pushOp(new Vy(e,t))}moveTo(e,t){this._pushOp(new l0(e,t))}bezierCurveTo(e,t,r,h,y,D){this._pushOp(new Gy(e,t,r,h,y,D))}quadraticCurveTo(e,t,r,h){this._pushOp(new e_(e,t,r,h))}closePath(){this._pushOp(new Hy)}shadow(e,t=0,r=0,h=0,y){this._hasShadows=!0,this._pushOp(new u0(e.toCSS(y||this._fillAlpha||this._strokeAlpha),t,r,h))}image(e,t,r,h,y){this._pushOp(new Zy(e,t,r,h,y))}svgPath(e){let t=0,r=0,h=null,y=null,D=null,F=null;const G=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,W=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let ge;for(;null!==(ge=G.exec(e));){const ae=ge[1],be=ge[2],ce=[];for(;null!==(ge=W.exec(be));)ce.push(ge[1]);switch("S"!==ae&&"s"!==ae&&"C"!==ae&&"c"!==ae&&(h=null,y=null),"Q"!==ae&&"q"!==ae&&"T"!==ae&&"t"!==ae&&(D=null,F=null),ae){case"M":Sc(ae,ce.length,2),t=+ce[0],r=+ce[1],this.moveTo(t,r);for(let ke=2;ke<ce.length;ke+=2)t=+ce[ke],r=+ce[ke+1],this.lineTo(t,r);break;case"m":Sc(ae,ce.length,2),t+=+ce[0],r+=+ce[1],this.moveTo(t,r);for(let ke=2;ke<ce.length;ke+=2)t+=+ce[ke],r+=+ce[ke+1],this.lineTo(t,r);break;case"L":Sc(ae,ce.length,2);for(let ke=0;ke<ce.length;ke+=2)t=+ce[ke],r=+ce[ke+1],this.lineTo(t,r);break;case"l":Sc(ae,ce.length,2);for(let ke=0;ke<ce.length;ke+=2)t+=+ce[ke],r+=+ce[ke+1],this.lineTo(t,r);break;case"H":gg(ae,ce.length,1);for(let ke=0;ke<ce.length;++ke)t=+ce[ke],this.lineTo(t,r);break;case"h":gg(ae,ce.length,1);for(let ke=0;ke<ce.length;++ke)t+=+ce[ke],this.lineTo(t,r);break;case"V":gg(ae,ce.length,1);for(let ke=0;ke<ce.length;++ke)r=+ce[ke],this.lineTo(t,r);break;case"v":gg(ae,ce.length,1);for(let ke=0;ke<ce.length;++ke)r+=+ce[ke],this.lineTo(t,r);break;case"C":Sc(ae,ce.length,6);for(let ke=0;ke<ce.length;ke+=6)h=+ce[ke+2],y=+ce[ke+3],t=+ce[ke+4],r=+ce[ke+5],this.bezierCurveTo(+ce[ke],+ce[ke+1],h,y,t,r);break;case"c":Sc(ae,ce.length,6);for(let ke=0;ke<ce.length;ke+=6){const ft=+ce[ke]+t,xt=+ce[ke+1]+r;h=+ce[ke+2]+t,y=+ce[ke+3]+r,t+=+ce[ke+4],r+=+ce[ke+5],this.bezierCurveTo(ft,xt,h,y,t,r)}break;case"S":Sc(ae,ce.length,4),(null===h||null===y)&&(h=t,y=r);for(let ke=0;ke<ce.length;ke+=4){const ft=2*t-h,xt=2*r-y;h=+ce[ke],y=+ce[ke+1],t=+ce[ke+2],r=+ce[ke+3],this.bezierCurveTo(ft,xt,h,y,t,r)}break;case"s":Sc(ae,ce.length,4),(null===h||null===y)&&(h=t,y=r);for(let ke=0;ke<ce.length;ke+=4){const ft=2*t-h,xt=2*r-y;h=+ce[ke]+t,y=+ce[ke+1]+r,t+=+ce[ke+2],r+=+ce[ke+3],this.bezierCurveTo(ft,xt,h,y,t,r)}break;case"Q":Sc(ae,ce.length,4);for(let ke=0;ke<ce.length;ke+=4)D=+ce[ke],F=+ce[ke+1],t=+ce[ke+2],r=+ce[ke+3],this.quadraticCurveTo(D,F,t,r);break;case"q":Sc(ae,ce.length,4);for(let ke=0;ke<ce.length;ke+=4)D=+ce[ke]+t,F=+ce[ke+1]+r,t+=+ce[ke+2],r+=+ce[ke+3],this.quadraticCurveTo(D,F,t,r);break;case"T":Sc(ae,ce.length,2),(null===D||null===F)&&(D=t,F=r);for(let ke=0;ke<ce.length;ke+=2)D=2*t-D,F=2*r-F,t=+ce[ke],r=+ce[ke+1],this.quadraticCurveTo(D,F,t,r);break;case"t":Sc(ae,ce.length,2),(null===D||null===F)&&(D=t,F=r);for(let ke=0;ke<ce.length;ke+=2)D=2*t-D,F=2*r-F,t+=+ce[ke],r+=+ce[ke+1],this.quadraticCurveTo(D,F,t,r);break;case"A":case"a":const pt="a"===ae;By(ce),Sc(ae,ce.length,7);for(let ke=0;ke<ce.length;ke+=7){let ft=+ce[ke+5],xt=+ce[ke+6];pt&&(ft+=t,xt+=r),Oe(Xv({px:t,py:r,rx:+ce[ke],ry:+ce[ke+1],xAxisRotation:+ce[ke+2],largeArcFlag:_f(+ce[ke+3]),sweepFlag:_f(+ce[ke+4]),cx:ft,cy:xt}),Ht=>{this.bezierCurveTo(Ht.x1,Ht.y1,Ht.x2,Ht.y2,Ht.x,Ht.y),t=Ht.x,r=Ht.y})}break;case"Z":case"z":Ly(ae,ce.length,0),this.closePath()}}}_runPath(e){e.beginPath(),Oe(this._operations,t=>{t.path(e)})}_render(e){super._render(e);const t=e.layer.dirty,r=this._isInteractive(e);if(t||r){const h=e.layer.context,y=this._renderer._ghostLayer.context;let D;t&&(h.globalCompositeOperation=this.blendMode,h.beginPath()),r&&(y.beginPath(),D=this._getColorId()),Oe(this._operations,F=>{t&&(F.path(h),F.colorize(h,void 0)),r&&(F.path(y),F.colorize(y,D))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Oe(this._operations,r=>{r.path(e),r.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&Oe(this._operations,t=>{t.addBounds(e)})}}class t_ extends lm{constructor(e,t,r){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=t,this.style=r}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,t=!1,r=!1){super._render(e);const h=e.layer.context,y=this._renderer._ghostLayer.context,D=this.style;let F=this._getFontStyle(void 0,r);h.font=F,this._isInteractive(e)&&!t&&(y.font=F),D.fill&&(h.fillStyle=D.fill instanceof ti?D.fill.toCSS(null!=D.fillOpacity?D.fillOpacity:1):D.fill),D.shadowColor&&(e.layer.context.shadowColor=D.shadowColor.toCSS(D.shadowOpacity||1)),D.shadowBlur&&(e.layer.context.shadowBlur=D.shadowBlur),D.shadowOffsetX&&(e.layer.context.shadowOffsetX=D.shadowOffsetX),D.shadowOffsetY&&(e.layer.context.shadowOffsetY=D.shadowOffsetY),this._shared(h),this._isInteractive(e)&&!t&&(y.fillStyle=this._getColorId(),this._shared(y))}_getFontStyle(e,t=!1){const r=this.style;let h=[];return e&&e.fontVariant?h.push(e.fontVariant):r.fontVariant&&h.push(r.fontVariant),t||(e&&e.fontWeight?h.push(e.fontWeight):r.fontWeight&&h.push(r.fontWeight)),e&&e.fontStyle?h.push(e.fontStyle):r.fontStyle&&h.push(r.fontStyle),e&&e.fontSize?(un(e.fontSize)&&(e.fontSize=e.fontSize+"px"),h.push(e.fontSize)):r.fontSize&&(un(r.fontSize)&&(r.fontSize=r.fontSize+"px"),h.push(r.fontSize)),e&&e.fontFamily?h.push(e.fontFamily):r.fontFamily?h.push(r.fontFamily):h.length&&h.push("Arial"),h.join(" ")}_render(e){if(this._textInfo||this._measure(e),this.textVisible){const t=this._isInteractive(e),r=e.layer.context,h=e.layer.dirty,y=this._renderer._ghostLayer.context;r.save(),y.save(),this._prerender(e),Oe(this._textInfo,(D,F)=>{Oe(D.textChunks,(G,W)=>{if(G.style&&(r.save(),y.save(),r.font=G.style,this._isInteractive(e)&&(y.font=G.style)),G.fill&&(r.save(),r.fillStyle=G.fill.toCSS()),h&&r.fillText(G.text,G.offsetX,D.offsetY+G.offsetY),"underline"==G.textDecoration||"line-through"==G.textDecoration){let pt,ge=1,ae=1,be=G.height,ce=G.offsetX;switch(this.style.textAlign){case"right":case"end":ce-=G.width;break;case"center":ce-=G.width/2}if(G.style)switch(gd.getTextStyle(G.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":ge=2}be&&(ae=be/20),pt="line-through"==G.textDecoration?ge+D.offsetY+G.offsetY-G.height/2:ge+1.5*ae+D.offsetY+G.offsetY,r.save(),r.beginPath(),G.fill?r.strokeStyle=G.fill.toCSS():this.style.fill&&this.style.fill instanceof ti&&(r.strokeStyle=this.style.fill.toCSS()),r.lineWidth=ge*ae,r.moveTo(ce,pt),r.lineTo(ce+G.width,pt),r.stroke(),r.restore()}t&&this.interactive&&y.fillText(G.text,G.offsetX,D.offsetY+G.offsetY),G.fill&&r.restore(),G.style&&(r.restore(),y.restore())})}),r.restore(),y.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const t=this._measure({inactive:this.inactive,layer:this.getLayer()});Fl(e,{x:t.left,y:t.top}),Fl(e,{x:t.right,y:t.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const t=e.layer.context,r=this._renderer._ghostLayer.context,h="rtl"==this.style.direction;this._textInfo=[];const y=this.style.oversizedBehavior,D=this.style.maxWidth,F=un(D)&&"truncate"==y,G=un(D)&&("wrap"==y||"wrap-no-break"==y);t.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());const W="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",ge=this.text.toString().replace(/\r/g,"").split(/\n/);let ke,ae=!0,be=0,ce=0,pt=0;Oe(ge,(xt,Gt)=>{let Ht;for(Ht=""==xt?[{type:"value",text:""}]:gd.chunk(xt,!1,this.style.ignoreFormatting);Ht.length>0;){let Ut={offsetY:pt,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const Cn=this._measureText(W,t);Ut.height=Cn.actualBoundingBoxAscent+Cn.actualBoundingBoxDescent,Ut.ascent=Cn.actualBoundingBoxAscent;let fi,or,Ci,eo,jn=this.style.textDecoration,Ti=!1,Do=!0,Qi=[];Et(Ht,(rs,fc)=>{if("format"==rs.type)if("[/]"==rs.text)ae||(t.restore(),r.restore(),ae=!0),or=void 0,ke=void 0,Ci=void 0,jn=this.style.textDecoration,eo=void 0,fi=rs.text;else{ae||(t.restore(),r.restore());let Ar=gd.getTextStyle(rs.text);const Io=this._getFontStyle(Ar);t.save(),r.save(),t.font=Io,ke=Io,fi=rs.text,Ar.textDecoration&&(jn=Ar.textDecoration),Ar.fill&&(or=Ar.fill),Ar.width&&(Ci=Ho(Ar.width)),Ar.verticalAlign&&(eo=Ar.verticalAlign),ae=!1;const Sr=this._measureText(W,t),Au=Sr.actualBoundingBoxAscent+Sr.actualBoundingBoxDescent;Au>Ut.height&&(Ut.height=Au),Sr.actualBoundingBoxAscent>Ut.ascent&&(Ut.ascent=Sr.actualBoundingBoxAscent)}else if("value"==rs.type&&!Ti){const Ar=this._measureText(rs.text,t);let Io=Ar.actualBoundingBoxLeft+Ar.actualBoundingBoxRight;if(F){let Nl=Do||this.style.breakWords||!1;const hl=this.style.ellipsis||"",Jc=this._measureText(hl,t);Ut.width+Io>D&&(rs.text=this._truncateText(t,rs.text,D-Ut.width-(Jc.actualBoundingBoxLeft+Jc.actualBoundingBoxRight),Nl),rs.text+=hl,Ti=!0)}else if(G&&Ut.width+Io>D){const hl=this._truncateText(t,rs.text,D-Ut.width,!1,Do&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==hl)return this.textVisible=!0,!1;Qi=Ht.slice(fc+1),zu(hl)!=zu(rs.text)&&(Qi.unshift({type:"value",text:rs.text.substr(hl.length)}),fi&&Qi.unshift({type:"format",text:fi})),rs.text=zu(hl),Ht=[],Ti=!0}let Sr=1,Au=1;if(ke&&Ci&&Ci>Io){const Nl=Io/Ci;switch(this.style.textAlign){case"right":case"end":Sr=Nl;break;case"center":Sr=Nl,Au=Nl;break;default:Au=Nl}Io=Ci}const mc=Ar.actualBoundingBoxAscent+Ar.actualBoundingBoxDescent;mc>Ut.height&&(Ut.height=mc),Ar.actualBoundingBoxAscent>Ut.ascent&&(Ut.ascent=Ar.actualBoundingBoxAscent),Ut.width+=Io,Ut.left+=Ar.actualBoundingBoxLeft/Sr,Ut.right+=Ar.actualBoundingBoxRight/Au,Ut.textChunks.push({style:ke,fill:or,text:rs.text,width:Io,height:mc,left:Ar.actualBoundingBoxLeft,right:Ar.actualBoundingBoxRight,ascent:Ar.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:jn,verticalAlign:eo}),Do=!1}return!0}),this.style.lineHeight instanceof Or?(Ut.height*=this.style.lineHeight.value,Ut.ascent*=this.style.lineHeight.value):(Ut.height*=this.style.lineHeight||1.2,Ut.ascent*=this.style.lineHeight||1.2),be<Ut.left&&(be=Ut.left),ce<Ut.right&&(ce=Ut.right),this._textInfo.push(Ut),pt+=Ut.height,Ht=Qi||[]}}),ae||(t.restore(),r.restore()),Oe(this._textInfo,(xt,Gt)=>{let Ht=0;Oe(xt.textChunks,Ut=>{if(Ut.offsetX=Ht+Ut.left-xt.left,Ut.offsetY+=xt.height-xt.height*(this.style.baselineRatio||.19),Ht+=Ut.width,Ut.verticalAlign)switch(Ut.verticalAlign){case"super":Ut.offsetY-=xt.height/2-Ut.height/2;break;case"sub":Ut.offsetY+=Ut.height/2}})});const ft={left:h?-ce:-be,top:0,right:h?be:ce,bottom:pt};if("none"!==y){const xt=this._fitRatio(ft);if(xt<1)if("fit"==y)un(this.style.minScale)&&xt<this.style.minScale?(this.textVisible=!1,ft.left=0,ft.top=0,ft.right=0,ft.bottom=0):((!this._originalScale||1==this._originalScale)&&(this._originalScale=this.scale),this.scale=xt,this.textVisible=!0);else if("hide"==y)this.textVisible=!1,ft.left=0,ft.top=0,ft.right=0,ft.bottom=0;else{switch(this.style.textAlign){case"right":case"end":ft.left=-D,ft.right=0;break;case"center":ft.left=-D/2,ft.right=D/2;break;default:ft.left=0,ft.right=D}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return t.restore(),r.restore(),ft}_fitRatio(e){const t=this.style.maxWidth,r=this.style.maxHeight;return un(t)||un(r)?Math.min(t/(e.right-e.left)||1,r/(e.bottom-e.top)||1):1}_truncateText(e,t,r,h=!1,y=!0){let D;do{if(h)t=t.slice(0,-1);else{let G=t.replace(/[^,;:!?\\\/\s\u200b]+[,;:!?\\\/\s\u200b]*$/g,"");if(""!=G&&G!==t||!y){if(""==G)return t;t=G}else h=!0}const F=this._measureText(t,e);D=F.actualBoundingBoxLeft+F.actualBoundingBoxRight}while(D>r&&""!=t);return t}_measureText(e,t){let r=t.measureText(e),h={};if(null==r.actualBoundingBoxAscent){const D=document.createElement("div");D.innerText=e,D.style.visibility="hidden",D.style.position="absolute",D.style.top="-1000000px;",D.style.fontFamily=this.style.fontFamily||"",D.style.fontSize=this.style.fontSize+"",document.body.appendChild(D);const F=D.getBoundingClientRect();document.body.removeChild(D);const G=F.height,W=r.width;h={actualBoundingBoxAscent:G,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:W,fontBoundingBoxAscent:G,fontBoundingBoxDescent:0,width:W}}else h={actualBoundingBoxAscent:r.actualBoundingBoxAscent,actualBoundingBoxDescent:r.actualBoundingBoxDescent,actualBoundingBoxLeft:r.actualBoundingBoxLeft,actualBoundingBoxRight:r.actualBoundingBoxRight,fontBoundingBoxAscent:r.actualBoundingBoxAscent,fontBoundingBoxDescent:r.actualBoundingBoxDescent,width:r.width};const y=r.width;switch(this.style.textAlign){case"right":case"end":h.actualBoundingBoxLeft=y,h.actualBoundingBoxRight=0;break;case"center":h.actualBoundingBoxLeft=y/2,h.actualBoundingBoxRight=y/2;break;default:h.actualBoundingBoxLeft=0,h.actualBoundingBoxRight=y}return h}}class n_{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:Ha(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class W_ extends t_{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){"circular"===this.textType?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){this._prerender(e);const t=this._isInteractive(e),r=e.layer.context,h=e.layer.dirty,y=this._renderer._ghostLayer.context;r.save(),t&&y.save(),this._textInfo||this._measure(e);let D=this.radius||0,F=this.startAngle||0,G=0,W=this.orientation,ge="auto"==W?"auto":"inward"==W;const ae=this.inside,be=this.style.textAlign||"left",ce=this.kerning||0;let pt="left"==be?1:-1;const ke=!this._textReversed;if("auto"==ge){let ft=0,xt=0;Oe(this._textInfo,(Gt,Ht)=>{const Ut=F+Gt.width/(D-Gt.height)/2*-pt;Ut>ft&&(ft=Ut)}),xt="left"==be?(ft+G/2)*Vc:"right"==be?(ft-G/2)*Vc:F*Vc,xt=uf(xt),ge=xt>=270||xt<=90}1==ge&&ke&&(this._textInfo.reverse(),this._textReversed=!0),Oe(this._textInfo,(ft,xt)=>{const Gt=ft.height;ae||(D+=Gt),(-1==pt&&ge||1==pt&&!ge)&&ke&&ft.textChunks.reverse();let Ht=F;G=0,"center"==be&&(Ht+=ft.width/(D-Gt)/2*-pt,G=Ht-F),Ht+=Math.PI*(ge?0:1),r.save(),t&&y.save(),r.rotate(Ht),t&&y.rotate(Ht);let Ut=0;Oe(ft.textChunks,(Cn,Jn)=>{const fi=Cn.text,jn=Cn.width;Ut=jn/2/(D-Gt)*pt,r.rotate(Ut),t&&y.rotate(Ut),Cn.style&&(r.save(),y.save(),r.font=Cn.style,t&&(y.font=Cn.style)),Cn.fill&&(r.save(),r.fillStyle=Cn.fill.toCSS()),r.textBaseline="middle",r.textAlign="center",t&&(y.textBaseline="middle",y.textAlign="center"),h&&r.fillText(fi,0,(ge?1:-1)*(0-D+Gt/2)),t&&y.fillText(fi,0,(ge?1:-1)*(0-D+Gt/2)),Cn.fill&&r.restore(),Cn.style&&(r.restore(),y.restore()),Ut=(jn/2+ce)/(D-Gt)*pt,r.rotate(Ut),t&&y.rotate(Ut)}),r.restore(),t&&y.restore(),ae&&(D-=Gt)}),r.restore(),t&&y.restore()}}_measure(e){return"circular"===this.textType?this._measureCircular(e):super._measure(e)}_measureCircular(e){const t=e.layer.context,r=this._renderer._ghostLayer.context,h="rtl"==this.style.direction,y=this.style.oversizedBehavior,D=this.style.maxWidth,F=un(D)&&"truncate"==y,G=this.style.ellipsis||"";let W;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,t.save(),r.save(),this._prerender(e,!0);const ge=this.text.toString().replace(/\r/g,"").split(/\n/);let ae=!0,be=0,ce=0;return Oe(ge,(pt,ke)=>{let Gt,Ht,Ut,ft=gd.chunk(pt,!1,this.style.ignoreFormatting),xt={offsetY:ce,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Oe(ft,(Cn,Jn)=>{if("format"==Cn.type){if("[/]"==Cn.text)ae||(t.restore(),r.restore(),ae=!0),Ht=void 0,Gt=void 0,Ut=void 0;else{let fi=gd.getTextStyle(Cn.text);const jn=this._getFontStyle(fi);t.save(),r.save(),t.font=jn,Gt=jn,fi.fill&&(Ht=fi.fill),fi.width&&(Ut=Ho(fi.width)),ae=!1}F&&(W=this._measureText(G,t))}else if("value"==Cn.type){const fi=Cn.text.match(/./gu)||[];h&&fi.reverse();for(let jn=0;jn<fi.length;jn++){const or=fi[jn],Ci=this._measureText(or,t);let Ti=Ci.width;Gt&&Ut&&Ut>Ti&&(Ti=Ut);const Do=Ci.actualBoundingBoxAscent+Ci.actualBoundingBoxDescent;if(Do>xt.height&&(xt.height=Do),Ci.actualBoundingBoxAscent>xt.ascent&&(xt.ascent=Ci.actualBoundingBoxAscent),be+=Ti,F){W||(W=this._measureText(G,t));const Qi=W.actualBoundingBoxLeft+W.actualBoundingBoxRight;if(be+Qi>D){1==xt.textChunks.length?this.textVisible=!1:(xt.width+=Qi,xt.left+=W.actualBoundingBoxLeft,xt.right+=W.actualBoundingBoxRight,xt.textChunks.push({style:Gt,fill:Ht,text:G,width:Qi,height:Do+W.actualBoundingBoxDescent,left:W.actualBoundingBoxLeft,right:W.actualBoundingBoxRight,ascent:W.actualBoundingBoxAscent,offsetX:0,offsetY:Do,textDecoration:void 0}));break}}if(xt.width+=Ti,xt.left+=Ci.actualBoundingBoxLeft,xt.right+=Ci.actualBoundingBoxRight,xt.textChunks.push({style:Gt,fill:Ht,text:or,width:Ti,height:Do+Ci.actualBoundingBoxDescent,left:Ci.actualBoundingBoxLeft,right:Ci.actualBoundingBoxRight,ascent:Ci.actualBoundingBoxAscent,offsetX:0,offsetY:Do,textDecoration:void 0}),h)break}}}),xt.height*=this.style.lineHeight instanceof Or?this.style.lineHeight.value:this.style.lineHeight||1.2,this._textInfo.push(xt),ce+=xt.height}),ae||(t.restore(),r.restore()),"hide"==y&&be>D&&(this.textVisible=!1),Oe(this._textInfo,pt=>{Oe(pt.textChunks,ke=>{ke.offsetY+=Math.round((pt.height-ke.height+(pt.ascent-ke.ascent))/2)})}),t.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class Q_ extends lm{constructor(e,t){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=t}_dispose(){super._dispose(),this._imageMask&&am(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){if(void 0===this.tainted&&(this.tainted=zy(this.image),e.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(e.layer.dirty&&(this.shadowColor&&(e.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(e.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(e.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(e.layer.context.shadowOffsetY=this.shadowOffsetY),e.layer.context.drawImage(this.image,0,0,this.width||this.image.naturalWidth,this.height||this.image.naturalHeight)),this.interactive&&this._isInteractive(e)){const t=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(t,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(void 0===this._imageMask){const t=this.width||e.naturalWidth,r=this.height||e.naturalHeight,h=document.createElement("canvas");h.width=t,h.height=r;const y=h.getContext("2d");y.imageSmoothingEnabled=!1,y.fillStyle=this._getColorId(),y.fillRect(0,0,t,r),zy(e)||(y.globalCompositeOperation="destination-in",y.drawImage(e,0,0,t,r)),this._imageMask=h}return this._imageMask}}class Yy{constructor(e,t,r,h){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.id=Uu("touchevents")&&e instanceof Touch?e.identifier:null}}class qy extends Gl{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Jy}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=null==e?window.devicePixelRatio:e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new fo(()=>{es(this._events,(t,r)=>{r.disposer.dispose()}),Oe(this.layers,t=>{am(t.view),t.exportableView&&am(t.exportableView)}),am(this._ghostLayer.view),am(this._patternCanvas)})),this._disposers.push(Wf(()=>{null==e&&(this.resolution=window.devicePixelRatio)})),Uu("touchevents")){const t=r=>{0!==this._dragging.length&&Et(this._dragging,h=>!h.value.shouldCancelTouch()||(r.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(As(window,"touchstart",t,{passive:!1})),this._disposers.push(As(this.view,"touchstart",t,{passive:!1})),this._disposers.push(As(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(As(window,"click",r=>{this._touchActive=!1},{passive:!0})),this._disposers.push(As(this.view,"click",r=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}Uu("wheelevents")&&this._disposers.push(As(this.view,"wheel",t=>{let r=!1;this._hovering.forEach(h=>{if(h.wheelable)return r=!0,!1}),r&&t.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,t,r,h){return this.defaultLayer.context.createLinearGradient(e,t,r,h)}createRadialGradient(e,t,r,h,y,D){return this.defaultLayer.context.createRadialGradient(e,t,r,h,y,D)}createPattern(e,t,r,h,y){return this._patternCanvas.width=h,this._patternCanvas.height=y,this._patternContext.clearRect(0,0,h,y),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,r)}makeContainer(){return new Rd(this)}makeGraphics(){return new $y(this)}makeText(e,t){return new t_(this,e,t)}makeTextStyle(){return new n_}makeRadialText(e,t){return new W_(this,e,t)}makePicture(e){return new Q_(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,t,r,h){this._realWidth=e,this._realHeight=t,this._calculatedWidth=r,this._calculatedHeight=h,Oe(this.layers,y=>{y&&(y.dirty=!0,this.resizeLayer(y))}),this.resizeGhost(),this.view.style.width=r+"px",this.view.style.height=h+"px"}createDetachedLayer(e=!1){const t=document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:e}),h=new Wy(t,r);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",h}getLayerByOrder(e){const t=this.layers,r=t.length;for(let h=0;h<r;h++){const y=t[h];if(y.order==e)return y}}getLayer(e,t=!0){let r=this.getLayerByOrder(e);if(r)return r;const h=this.createDetachedLayer(99==e);h.order=e,h.visible=t,h.view.className="am5-layer-"+e,h.visible&&this.resizeLayer(h);const y=this.layers;y.push(h),y.sort((W,ge)=>W.order>ge.order?1:W.order<ge.order?-1:0);const D=y.length;let G;for(let W=Ie(y,h)+1;W<D;W++)if(y[W].visible){G=y[W];break}return h.visible&&(void 0===G?this._layerDom.appendChild(h.view):this._layerDom.insertBefore(h.view,G.view)),h}render(e){if(this._dirtyLayers.length=0,Oe(this.layers,t=>{t&&t.dirty&&t.visible&&(this._dirtyLayers.push(t),t.clear())}),this._ghostLayer.clear(),e.render({inactive:null,layer:this.defaultLayer}),this._ghostLayer.context.restore(),Oe(this.layers,t=>{if(t){const r=t.context;r.beginPath(),r.moveTo(0,0),r.stroke()}}),Oe(this._dirtyLayers,t=>{t.context.restore(),t.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:t,target:r,native:h}=this._lastPointerMoveEvent;Oe(t,y=>{this._dispatchGlobalMousemove(y,r,h)})}}paintId(e){const t=function e0(_){const e=[0,0,0];for(let t=0;t<24;t++)e[t%3]<<=1,e[t%3]|=1&_,_>>=1;return(0|e[0])+(e[1]<<8)+(e[2]<<16)}(++this._colorId),r=ti.fromHex(t).toCSS();return this._colorMap[r]=e,r}_removeObject(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const t=this._ghostLayer.margin;return new DOMRect(-t.left,-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}getEvent(e,t=!0){const r=this.view.getBoundingClientRect(),h=e.clientX||0,y=e.clientY||0;return new Yy(e,{x:h-r.left,y:y-r.top},{x:this._calculatedWidth/this._realWidth*(h-(t?r.left:0)),y:this._calculatedHeight/this._realHeight*(y-(t?r.top:0))},this._adjustBoundingBox(r))}_getHitTarget(e,t,r){if(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom||!r||!this._layerDom.contains(r))return;const h=this._ghostLayer.getImageData(e,t);if(0===h.data[0]&&0===h.data[1]&&0===h.data[2])return!1;const y=ti.fromRGB(h.data[0],h.data[1],h.data[2]).toCSS();return this._colorMap[y]}_withEvents(e,t){const r=this._events[e];if(void 0!==r){r.dispatching=!0;try{t(r)}finally{r.dispatching=!1,r.cleanup&&(r.cleanup=!1,ta(r.callbacks,h=>!h.disposed),0===r.callbacks.length&&(r.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,t){this.interactionsEnabled&&this._withEvents(e,r=>{Oe(r.callbacks,h=>{h.disposed||h.callback.call(h.context,t)})})}_dispatchEvent(e,t,r){if(!this.interactionsEnabled)return!1;let h=!1;return this._withEvents(e,y=>{Oe(y.callbacks,D=>{!D.disposed&&D.object===t&&(D.callback.call(D.context,r),h=!0)})}),h}_dispatchMousedown(e,t){const r=e.button;if(0!=r&&2!=r&&1!=r&&void 0!==r)return;const h=this.getEvent(e),y=this._getHitTarget(h.originalPoint,h.bbox,t);if(y){const D=h.id;let F=!1;Kg(y,G=>{const W={id:D,value:G};return this._mousedown.push(W),!F&&this._dispatchEvent("pointerdown",G,h)&&(F=!0,this._dragging.some(ae=>ae.value===G&&ae.id===D)||this._dragging.push(W)),!0})}}_dispatchGlobalMousemove(e,t,r){const h=this.getEvent(e),y=this._getHitTarget(h.originalPoint,h.bbox,t);h.native=r,y?(this._hovering.forEach(D=>{D.contains(y)||(this._hovering.delete(D),D.cursorOverStyle&&Kd(document.body,"cursor",D._replacedCursorStyle),this._dispatchEvent("pointerout",D,h))}),h.native&&Kg(y,D=>(this._hovering.has(D)||(this._hovering.add(D),D.cursorOverStyle&&(D._replacedCursorStyle=function cp(_,e){return _.style[e]}(document.body,"cursor"),Kd(document.body,"cursor",D.cursorOverStyle)),this._dispatchEvent("pointerover",D,h)),!0))):(this._hovering.forEach(D=>{D.cursorOverStyle&&Kd(document.body,"cursor",D._replacedCursorStyle),this._dispatchEvent("pointerout",D,h)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",h)}removeHovering(e){this._hovering.delete(e),e.cursorOverStyle&&Kd(document.body,"cursor",e._replacedCursorStyle)}_dispatchGlobalMouseup(e,t){const r=this.getEvent(e);r.native=t,this._dispatchEventAll("globalpointerup",r)}_dispatchDragMove(e){if(0!==this._dragging.length){const t=this.getEvent(e),r=t.id;this._dragging.forEach(h=>{h.id===r&&this._dispatchEvent("pointermove",h.value,t)})}}_dispatchDragEnd(e,t){const r=e.button;let h;if(0==r||void 0===r)h="click";else if(2==r)h="rightclick";else{if(1!=r)return;h="middleclick"}const y=this.getEvent(e),D=y.id;if(0!==this._mousedown.length){const F=this._getHitTarget(y.originalPoint,y.bbox,t);F&&this._mousedown.forEach(G=>{G.id===D&&G.value.contains(F)&&this._dispatchEvent(h,G.value,y)}),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(F=>{F.id===D&&this._dispatchEvent("pointerup",F.value,y)}),this._dragging.length=0)}_dispatchDoubleClick(e,t){const r=this.getEvent(e),h=this._getHitTarget(r.originalPoint,r.bbox,t);h&&Kg(h,y=>!this._dispatchEvent("dblclick",y,r))}_dispatchWheel(e,t){const r=this.getEvent(e),h=this._getHitTarget(r.originalPoint,r.bbox,t);h&&Kg(h,y=>!this._dispatchEvent("wheel",y,r))}_makeSharedEvent(e,t){if(void 0===this._listeners[e]){const r=t();this._listeners[e]=new Ur(()=>{delete this._listeners[e],r.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,t){let r=!1,h=null;function y(){h=null,r=!1}return new yo([new fo(()=>{null!==h&&clearTimeout(h),y()}),As(this.view,Qd(e),D=>{r=!0,null!==h&&clearTimeout(h),h=window.setTimeout(y,0)}),Uy(window,e,(D,F)=>{null!==h&&(clearTimeout(h),h=null),t(D,F,r),r=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const t=(r,h,y)=>{this._lastPointerMoveEvent={events:r,target:h,native:y},Oe(r,D=>{this._dispatchGlobalMousemove(D,h,y)})};return new yo([this._onPointerEvent("pointerdown",t),this._onPointerEvent("pointermove",t)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const t=this._onPointerEvent("pointerup",(h,y,D)=>{Oe(h,F=>{this._dispatchGlobalMouseup(F,D)}),this._lastPointerMoveEvent={events:h,target:y,native:D}}),r=this._onPointerEvent("pointercancel",(h,y,D)=>{Oe(h,F=>{this._dispatchGlobalMouseup(F,D)}),this._lastPointerMoveEvent={events:h,target:y,native:D}});return new fo(()=>{t.dispose(),r.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const t=this._onPointerEvent("pointerdown",(D,F)=>{Oe(D,G=>{this._dispatchMousedown(G,F)})}),r=this._onPointerEvent("pointermove",D=>{Oe(D,F=>{this._dispatchDragMove(F)})}),h=this._onPointerEvent("pointerup",(D,F)=>{Oe(D,G=>{this._dispatchDragEnd(G,F)})}),y=this._onPointerEvent("pointercancel",(D,F)=>{Oe(D,G=>{this._dispatchDragEnd(G,F)})});return new fo(()=>{t.dispose(),r.dispose(),h.dispose(),y.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(t,r)=>{Oe(t,h=>{this._dispatchDoubleClick(h,r)})}));case"wheel":return this._makeSharedEvent("wheel",()=>As(window,Qd("wheel"),t=>{this._dispatchWheel(t,Xp(t))},{passive:!1}))}}_addEvent(e,t,r,h){let y=this._events[t];void 0===y&&(y=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});const D={object:e,context:h,callback:r,disposed:!1};return y.callbacks.push(D),new fo(()=>{D.disposed=!0,y.dispatching?y.cleanup=!0:(Vn(y.callbacks,D),0===y.callbacks.length&&(y.disposer.dispose(),delete this._events[t]))})}getCanvas(e,t){this.render(e),t||(t={});let r=this.resolution,h=Math.floor(this._calculatedWidth*this.resolution),y=Math.floor(this._calculatedHeight*this.resolution);if(t.minWidth&&t.minWidth>h){let ce=t.minWidth/h;ce>r&&(r=ce*this.resolution)}if(t.minHeight&&t.minHeight>y){let ce=t.minHeight/y;ce>r&&(r=ce*this.resolution)}if(t.maxWidth&&t.maxWidth<h){let ce=t.maxWidth/h;ce<r&&(r=ce*this.resolution)}if(t.maxHeight&&t.maxHeight>y){let ce=t.maxHeight/y;ce<r&&(r=ce*this.resolution)}t.maintainPixelRatio&&(r/=this.resolution);const D=[];let F=!1;const G=document.createElement("canvas");r!=this.resolution&&(F=!0,h=h*r/this.resolution,y=y*r/this.resolution),G.width=h,G.height=y,G.style.position="fixed",G.style.top="-10000px",this.view.appendChild(G),D.push(G);const W=G.getContext("2d");let ge=0,ae=0,be=!1;return Oe(this.layers,ce=>{if(ce&&ce.visible&&(ce.tainted||F)){be=!0,ce.exportableView=ce.view,ce.exportableContext=ce.context,ce.view=document.createElement("canvas"),ce.view.style.position="fixed",ce.view.style.top="-10000px",this.view.appendChild(ce.view),D.push(ce.view);let pt=0,ke=0;ce.margin&&(pt+=ce.margin.left||0+ce.margin.right||0,ke+=ce.margin.top||0+ce.margin.bottom||0),ce.view.width=h+pt,ce.view.height=y+ke,ce.context=ce.view.getContext("2d"),ce.dirty=!0,ce.scale=r}}),be&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Oe(this.layers,ce=>{if(ce&&ce.visible){let pt=0,ke=0;ce.margin&&(pt=-(ce.margin.left||0)*this.resolution,ke=-(ce.margin.top||0)*this.resolution),W.drawImage(ce.view,pt,ke),ce.exportableView&&(ce.view=ce.exportableView,ce.exportableView=void 0),ce.exportableContext&&(ce.context=ce.exportableContext,ce.exportableContext=void 0),ge<ce.view.clientWidth&&(ge=ce.view.clientWidth),ae<ce.view.clientHeight&&(ae=ce.view.clientHeight),ce.scale=void 0}}),G.style.width=ge+"px",G.style.height=ae+"px",Oe(D,ce=>{ce.style.position="",ce.style.top="",this.view.removeChild(ce)}),G}}class Jy{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,t,r,h,y){e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,h+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*y),this._height=Math.floor(t*y),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=h+"px"}getImageData(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,Oe(e,t=>{t.margin&&(this.margin.left=Math.max(this.margin.left,t.margin.left),this.margin.right=Math.max(this.margin.right,t.margin.right),this.margin.top=Math.max(this.margin.top,t.margin.top),this.margin.bottom=Math.max(this.margin.bottom,t.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class Wy{constructor(e,t){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=t}resize(e,t,r,h,y){null!=this.width&&(e=this.width,r=this.width),null!=this.height&&(t=this.height,h=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,r+=this.margin.left+this.margin.right,h+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*y),this._height=Math.floor(t*y),this.view.width=this._width,this.view.style.width=r+"px",this.view.height=this._height,this.view.style.height=h+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function K_(_,e){null==_?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/_)}class yf{constructor(e,t={},r){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new uu}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:Y_.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Ep}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Ry.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Jv.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:$_.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:df.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:Mp.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:hf.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!r)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let h,y;if(this._settings=t,0==t.accessible&&(this._a11yD=!0),null==t.useSafeResolution&&(t.useSafeResolution=!0),t.useSafeResolution&&(h=function zc(){return function ia(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}()?1:void 0}()),this._renderer=new qy(h),y=e instanceof HTMLElement?e:document.getElementById(e),Oe(Eu.rootElements,G=>{if(G.dom===y)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=pg.new(this,{}),null===y)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=y;let D=document.createElement("div");D.style.position="relative",D.style.width="100%",D.style.height="100%",y.appendChild(D);const F=t.tooltipContainerBounds;F&&(this._tooltipContainerSettings=F),this._inner=D,this._updateComputedStyles(),Eu.rootElements.push(this)}static new(e,t){const r=new yf(e,t,!0);return r._init(),r}moveDOM(e){let t;if(t=e instanceof HTMLElement?e:document.getElementById(e),t){for(;this.dom.childNodes.length>0;)t.appendChild(this.dom.childNodes[0]);this.dom=t,this._initResizeSensor(),this.resize()}}_handleLogo(){this._logo&&(this.dom.offsetWidth<=150||this.dom.offsetHeight<=60?this._logo.hide():this._logo.show())}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(br.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Ha(100),centerY:vi,tooltipText:"Created using amCharts 5",tooltipX:vi,cursorOverStyle:"pointer",background:dc.new(this,{fill:ec(4671320),fillOpacity:0,tooltipY:5})})),t=Zc.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});t.label.setAll({fontSize:12}),t.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",t),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(cs.new(this,{stroke:ec(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:ec(3976191)}),e.children.push(cs.new(this,{stroke:ec(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:ec(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._settings;!1!==e.accessible&&(e.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),e.ariaLabel&&this._inner.setAttribute("aria-label",e.ariaLabel),e.role&&this._inner.setAttribute("role",e.role));const t=this._renderer,r=this._getRealSize(),h=this._getCalculatedSize(r),y=Math.floor(h.width),D=Math.floor(h.height),F=Math.floor(r.width),G=Math.floor(r.height),W=br.new(this,{visible:!0,width:y,height:D});this._rootContainer=W,this._rootContainer._defaultThemes.push(cb.new(this));const ge=W.children.push(br.new(this,{visible:!0,width:vi,height:vi}));this.container=ge,t.resize(F,G,y,D),this._inner.appendChild(t.view),this._initResizeSensor();const ae=document.createElement("div");if(this._htmlElementContainer=ae,ae.className="am5-html-container",ae.style.position="absolute",ae.style.pointerEvents="none",this._tooltipContainerSettings||(ae.style.overflow="hidden"),this._inner.appendChild(ae),!0!==this._a11yD){const be=document.createElement("div");be.className="am5-reader-container",be.setAttribute("role","alert"),be.style.position="absolute",be.style.width="1px",be.style.height="1px",be.style.overflow="hidden",be.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=be,this._inner.appendChild(this._readerAlertElement);const ce=document.createElement("div");ce.className="am5-focus-container",ce.style.position="absolute",ce.style.pointerEvents="none",ce.style.top="0px",ce.style.left="0px",ce.style.overflow="hidden",ce.style.width=y+"px",ce.style.height=D+"px",ce.setAttribute("role","graphics-document"),Xu(ce,!1),this._focusElementContainer=ce,this._inner.appendChild(this._focusElementContainer);const pt=document.createElement("div");this._tooltipElementContainer=pt,pt.className="am5-tooltip-container",this._inner.appendChild(pt),Uu("keyboardevents")&&(this._disposers.push(As(window,"keydown",ke=>{16==ke.keyCode?this._isShift=!0:9==ke.keyCode&&(this._isShift=ke.shiftKey)})),this._disposers.push(As(window,"keyup",ke=>{16==ke.keyCode&&(this._isShift=!1)})),this._disposers.push(As(ce,"click",()=>{const ke=this._focusedSprite;if(ke){const ft=t.getEvent(new MouseEvent("click"));ke.events.dispatch("click",{type:"click",originalEvent:ft.event,point:ft.point,simulated:!0,target:ke})}})),this._disposers.push(As(ce,"keydown",ke=>{const ft=this._focusedSprite;if(ft){27==ke.keyCode&&(function Wm(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let _=document.createElement("button");_.style.position="fixed",_.style.top="0px",_.style.left="-10000px",document.body.appendChild(_),_.focus(),_.blur(),document.body.removeChild(_)}}(),this._focusedSprite=void 0);let xt=0,Gt=0;switch(ke.keyCode){case 13:ke.preventDefault();const Ht=t.getEvent(new MouseEvent("click"));return void ft.events.dispatch("click",{type:"click",originalEvent:Ht.event,point:Ht.point,simulated:!0,target:ft});case 37:xt=-6;break;case 39:xt=6;break;case 38:Gt=-6;break;case 40:Gt=6;break;default:return}if(0!=xt||0!=Gt){if(ke.preventDefault(),!ft.isDragging()){this._keyboardDragPoint={x:0,y:0};const Cn=t.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));ft.events.isEnabled("pointerdown")&&ft.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:Cn.event,point:Cn.point,simulated:!0,target:ft})}const Ht=this._keyboardDragPoint;Ht.x+=xt,Ht.y+=Gt;const Ut=t.getEvent(new MouseEvent("mousemove",{clientX:Ht.x,clientY:Ht.y}),!1);ft.events.isEnabled("globalpointermove")&&ft.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:Ut.event,point:Ut.point,simulated:!0,target:ft})}}})),this._disposers.push(As(ce,"keyup",ke=>{if(this._focusedSprite){const ft=this._focusedSprite,xt=ke.keyCode;switch(xt){case 37:case 39:case 38:case 40:if(ft.isDragging()){const Gt=this._keyboardDragPoint,Ht=t.getEvent(new MouseEvent("mouseup",{clientX:Gt.x,clientY:Gt.y}));return ft.events.isEnabled("globalpointerup")&&ft.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:Ht.event,point:Ht.point,simulated:!0,target:ft}),void(this._keyboardDragPoint=void 0)}if(ft.get("focusableGroup")){const Gt=ft.get("focusableGroup"),Ht=this._tabindexes.filter(Jn=>Jn.get("focusableGroup")==Gt&&!1!==Jn.getPrivate("focusable"));let Ut=Ht.indexOf(ft);const Cn=Ht.length-1;Ut+=39==xt||40==xt?1:-1,Ut<0?Ut=Cn:Ut>Cn&&(Ut=0),function hd(_){_&&_.focus()}(Ht[Ut].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new ky(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),t=this._getCalculatedSize(e),r=Math.floor(t.width),h=Math.floor(t.height);if(r>0&&h>0){const y=Math.floor(e.width),D=Math.floor(e.height),F=this._htmlElementContainer;if(F.style.width=r+"px",F.style.height=h+"px",!0!==this._a11yD){const W=this._focusElementContainer;W.style.width=r+"px",W.style.height=h+"px"}this._renderer.resize(y,D,r,h);const G=this._rootContainer;G.setPrivate("width",r),G.setPrivate("height",h),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){Oe(this._tickers,t=>{t(e)})}_runAnimations(e){ta(this._animations,t=>t._runAnimation(e))}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,Aa(this._dirtyParents).forEach(D=>{const F=this._dirtyParents[D];delete this._dirtyParents[D],F.isDisposed()||(e[F.uid]=F,F._prepareChildren())});Aa(e).forEach(D=>{e[D]._updateChildren()});const t=[];Aa(this._dirty).forEach(D=>{const F=this._dirty[D];F.isDisposed()?delete this._dirty[F.uid]:(t.push(F),F._beforeChanged())}),t.forEach(D=>{D._changed(),delete this._dirty[D.uid],D._clearDirty()}),this._isDirty=!1;const r={},h=[];Aa(this._dirtyBounds).forEach(D=>{const F=this._dirtyBounds[D];delete this._dirtyBounds[D],F.isDisposed()||(r[F.uid]=F.depth(),h.push(F))}),this._positionHTMLElements(),h.sort((D,F)=>lf(r[F.uid],r[D.uid])),h.forEach(D=>{D._updateBounds()});const y=this._dirtyPositions;Aa(y).forEach(D=>{const F=y[D];delete y[D],F.isDisposed()||F._updatePosition()}),t.forEach(D=>{D._afterChanged()})}_renderFrame(e){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),0===this._tickers.length&&0===this._animations.length&&!this._isDirty)}_runTicker(e,t){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||t||K_(this.fps,this._ticker))}_runTickerNow(e=1e4){if(!this.isDisposed()){const t=performance.now()+e;for(;;){const r=performance.now();if(r>=t){this.animationTime=null;break}if(this.animationTime=r,this._renderFrame(r)){this.animationTime=null;break}}}}_startTicker(){null===this._ticker&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},K_(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){void 0===this._dirty[e.uid]&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}_addDirtyParent(e){void 0===this._dirtyParents[e.uid]&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}_addDirtyBounds(e){void 0===this._dirtyBounds[e.uid]&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}_addDirtyPosition(e){void 0===this._dirtyPositions[e.uid]&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}_addAnimation(e){-1===this._animations.indexOf(e)&&(this._animations.push(e),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new fo(()=>{Vn(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(t=>{t instanceof br&&this.markDirtyGlobal(t),t.markDirty(),t.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Oe(this._disposers,e=>{e.dispose()}),this._inner&&function Ih(_){_.parentNode&&_.parentNode.removeChild(_)}(this._inner),Fn(Eu.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=pp(e))}setThemes(e){this._rootContainer.set("themes",e);const t=this.tooltipContainer;t&&t._applyThemes();const r=this.interfaceColors;r&&r._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,t=this._rootContainer.children.push(br.new(this,{position:"absolute",isMeasured:!1,width:vi,height:vi,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=t;const r=Zc.new(this,{});this.container.set("tooltip",r),r.hide(0),this._tooltip=r}}_registerTabindexOrder(e){1!=this._a11yD&&(e.get("focusable")?Oi(this._tabindexes,e):Fn(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){1!=this._a11yD&&(Fn(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(1==this._a11yD)return;this._tabindexes.sort((t,r)=>{const h=t.get("tabindexOrder",0),y=r.get("tabindexOrder",0);return h==y?0:h>y?1:-1});const e=[];Oe(this._tabindexes,(t,r)=>{t.getPrivate("focusElement")?this._moveFocusElement(r,t):this._makeFocusElement(r,t);const h=t.get("focusableGroup");h&&!1!==t.getPrivate("focusable")&&(-1!==e.indexOf(h)?t.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(h))})}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,t){if(1==this._a11yD||(t||(t=e.getPrivate("focusElement").dom),!t))return;const r=e.get("role");r?t.setAttribute("role",r):t.removeAttribute("role");const h=e.get("ariaLabel");if(h){const ce=sm(e,h);t.setAttribute("aria-label",ce)}else t.removeAttribute("aria-label");const y=e.get("ariaLive");y?t.setAttribute("aria-live",y):t.removeAttribute("aria-live");const D=e.get("ariaChecked");null!=D?t.setAttribute("aria-checked",D?"true":"false"):t.removeAttribute("aria-checked"),e.get("ariaHidden")?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden");const F=e.get("ariaOrientation");F?t.setAttribute("aria-orientation",F):t.removeAttribute("aria-orientation");const G=e.get("ariaValueNow");G?t.setAttribute("aria-valuenow",G):t.removeAttribute("aria-valuenow");const W=e.get("ariaValueMin");W?t.setAttribute("aria-valuemin",W):t.removeAttribute("aria-valuemin");const ge=e.get("ariaValueMax");ge?t.setAttribute("aria-valuemax",ge):t.removeAttribute("aria-valuemax");const ae=e.get("ariaValueText");ae?t.setAttribute("aria-valuetext",ae):t.removeAttribute("aria-valuetext");const be=e.get("ariaControls");be?t.setAttribute("aria-controls",be):t.removeAttribute("aria-controls"),e.get("visible")&&0!==e.get("opacity")&&"tooltip"!=e.get("role")&&!e.isHidden()&&!1!==e.getPrivate("focusable")?("-1"!=t.getAttribute("tabindex")&&t.setAttribute("tabindex",""+this.tabindex),t.removeAttribute("aria-hidden")):(t.removeAttribute("tabindex"),t.setAttribute("aria-hidden","true"))}_makeFocusElement(e,t){if(t.getPrivate("focusElement")||1==this._a11yD)return;const r=document.createElement("div");"tooltip"!=t.get("role")&&(r.tabIndex=this.tabindex),r.style.position="absolute",Xu(r,!1);const h=[];t.setPrivate("focusElement",{dom:r,disposers:h}),this._decorateFocusElement(t),h.push(As(r,"focus",y=>{this._handleFocus(y,e)})),h.push(As(r,"blur",y=>{this._handleBlur(y,e)})),this._moveFocusElement(e,t)}_removeFocusElement(e){if(1==this._a11yD)return;Fn(this._tabindexes,e);const t=e.getPrivate("focusElement");t&&(this._focusElementContainer.removeChild(t.dom),Oe(t.disposers,h=>{h.dispose()}))}_hideFocusElement(e){1!=this._a11yD&&(e.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(e,t){if(1==this._a11yD)return;const r=this._focusElementContainer,h=t.getPrivate("focusElement").dom;if(h===this._focusElementContainer.children[e])return;const y=this._focusElementContainer.children[e+1];y?r.insertBefore(h,y):r.append(h)}_positionFocusElement(e){if(1==this._a11yD||null==e)return;const t=e.globalBounds();let r=t.right==t.left?e.width():t.right-t.left,h=t.top==t.bottom?e.height():t.bottom-t.top;const y=void 0!==this._settings.focusPadding?this._settings.focusPadding:2;let D=t.left-y,F=t.top-y;r<0&&(D+=r,r=Math.abs(r)),h<0&&(F+=h,h=Math.abs(h));const G=e.getPrivate("focusElement").dom;G.style.top=F+"px",G.style.left=D+"px",G.style.width=r+2*y+"px",G.style.height=h+2*y+"px"}_handleFocus(e,t){if(1==this._a11yD)return;const r=this._tabindexes[t];r.isVisibleDeep()?(this._positionFocusElement(r),this._focusedSprite=r,r.events.isEnabled("focus")&&r.events.dispatch("focus",{type:"focus",originalEvent:e,target:r})):this._focusNext(e.target,this._isShift?-1:1)}_focusNext(e,t){if(1==this._a11yD)return;const r=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let h=r.indexOf(e)+t;h<0?h=r.length-1:h>=r.length&&(h=0),r[h].focus()}_handleBlur(e,t){if(1==this._a11yD)return;const r=this._focusedSprite;r&&!r.isDisposed()&&r.events.isEnabled("blur")&&r.events.dispatch("blur",{type:"blur",originalEvent:e,target:r}),this._focusedSprite=void 0}updateTooltip(e){if(1==this._a11yD)return;const t=pp(e._getText());let r=e.getPrivate("tooltipElement");"tooltip"==e.get("role")&&""!=t?(r||(r=this._makeTooltipElement(e)),r.innerHTML!=t&&(r.innerHTML=t)):r&&(r.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const t=this._tooltipElementContainer,r=document.createElement("div");return r.style.position="absolute",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",r.style.clip="rect(1px, 1px, 1px, 1px)",Xu(r,!1),this._decorateFocusElement(e,r),t.append(r),e.setPrivate("tooltipElement",r),r}_removeTooltipElement(e){if(1==this._a11yD)return;const t=e.getPrivate("tooltipElement");if(t){const r=t.parentElement;r&&r.removeChild(t)}}_invalidateAccessibility(e){if(1==this._a11yD)return;this._focusElementDirty=!0;const t=e.getPrivate("focusElement");e.get("focusable")?t&&(this._decorateFocusElement(e),this._positionFocusElement(e)):t&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const t=this._getRealSize(),r=this._getCalculatedSize(t);return{x:r.width/t.width*(e.x-t.left),y:r.height/t.height*(e.y-t.top)}}rootPointToDocument(e){const t=this._getRealSize(),r=this._getCalculatedSize(t);return{x:e.x/(r.width/t.width)+t.left,y:e.y/(r.height/t.height)+t.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let t="";es(e,(h,y)=>{Qr(h)&&h.match(/^font/)&&(t+=y)});const r=t!=this._fontHash;return r&&(this._fontHash=t),r}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof br?e.children.each(t=>{this._invalidateLabelBounds(t)}):e instanceof Sp&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<Eu.licenses.length;e++)if(Eu.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const t=this._htmlElementContainer,r=document.createElement("div");return e.setPrivate("htmlElement",r),r.style.position="absolute",r.style.overflow="auto",r.style.boxSizing="border-box",Xu(r,e.get("interactive",!1)),e.events.isEnabled("click")&&(Xu(r,!0),this._disposers.push(As(r,"click",h=>{const y=this._renderer.getEvent(h);e.events.dispatch("click",{type:"click",originalEvent:y.event,point:y.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),t.append(r),Oi(this._htmlEnabledContainers,e),r}_positionHTMLElements(){Oe(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const t=e.getPrivate("htmlElement");if(t){Oe(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],ae=>{const be=e.get(ae);t.style[ae]=be?be+"px":""});const h=e.compositeOpacity();setTimeout(()=>{t.style.opacity=h+""},10);const y=e.isVisibleDeep();y&&(t.style.display="block");const D=e.globalBounds();t.style.top=D.top+"px",t.style.left=D.left+"px";const F=e.get("width"),G=e.get("height");let W=0,ge=0;if(F&&(W=e.width()),G&&(ge=e.height()),F&&G)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{t.style.position="fixed",t.style.width="",t.style.height="";const ae=t.getBoundingClientRect();t.style.position="absolute",W=ae.width,ge=ae.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",W),e.setPrivate("minHeight",ge)}W>0&&(t.style.minWidth=W+"px"),ge>0&&(t.style.minHeight=ge+"px"),(!y||0==h)&&(t.style.display="none")}}_setHTMLContent(e,t){let r=e.getPrivate("htmlElement");r||(r=this._makeHTMLElement(e)),r.innerHTML!=t&&(r.innerHTML=t)}_removeHTMLContent(e){let t=e.getPrivate("htmlElement");t&&(this._htmlElementContainer.removeChild(t),e.removePrivate("htmlElement")),Fn(this._htmlEnabledContainers,e)}}class yg extends br{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{width:vi,height:vi,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:vi,height:vi})})}}Object.defineProperty(yg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(yg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([yg.className])});class Ap extends yg{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{width:vi,height:vi,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new Bu})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const e=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(t=>{if("clear"===t.type){Oe(t.oldValues,h=>{this._removeSeries(h)});const r=this.get("colors");r&&r.reset()}else if("push"===t.type)e.moveValue(t.newValue),this._processSeries(t.newValue);else if("setIndex"===t.type)e.setIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("insertIndex"===t.type)e.insertIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("removeIndex"===t.type)this._removeSeries(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");e.moveValue(t.value,t.newIndex),this._processSeries(t.value)}}))}_processSeries(e){e.chart=this,e._placeBulletsContainer(this)}_removeSeries(e){e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}Object.defineProperty(Ap,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(Ap,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yg.classNames.concat([Ap.className])});class um extends kl{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const e=this.getPrivate("currentPass"),t=this.get("colors",[this.get("baseColor",ti.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",t.length);const r=this.getPrivate("numColors"),y=this.get("passOptions"),D=this.get("reuse");for(let F=0;F<r;F++)if(D)t.push(t[F]);else{const G=t[F].toHSL();let W=G.h+(y.hue||0)*e;for(;W>1;)W-=1;let ge=G.s+(y.saturation||0)*e;ge>1&&(ge=1),ge<0&&(ge=0);let ae=G.l+(y.lightness||0)*e;for(;ae>1;)ae-=1;t.push(ti.fromHSL(W,ge,ae))}}getIndex(e){const t=this.get("colors",[]),r=this.get("saturation");return e>=t.length?(this.generateColors(),this.getIndex(e)):null!=r?ti.saturate(t[e],r):t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(um,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(um,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([um.className])});class c0 extends gf{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this.rule.bind(this);t("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:um.new(this._root,{}),width:vi,height:vi}),t("PieChart").setAll({radius:Ha(80),startAngle:-90,endAngle:270}),t("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),t("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),t("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),t("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),t("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),t("Slice",["pie"]).states.create("hover",{scale:1.04}),t("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),t("Tick",["pie"]).setAll({location:1}),t("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),t("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),t("FunnelSlice").setAll({interactive:!0,expandDistance:0}),t("FunnelSlice").states.create("hover",{expandDistance:.15}),t("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:Er}),t("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:Er,rotation:-90}),t("Label",["funnel","vertical"]).setAll({centerY:Er,centerX:0}),t("Tick",["funnel"]).setAll({location:1}),t("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),t("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),t("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),t("PyramidSeries").setAll({valueIs:"area"}),t("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),t("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),t("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),t("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),t("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),t("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:Er}),t("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:Er,rotation:-90}),t("Label",["pyramid","vertical"]).setAll({centerY:Er,centerX:0}),t("Tick",["pyramid"]).setAll({location:1}),t("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),t("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:Er}),t("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:Er,rotation:-90}),t("Label",["pictorial","vertical"]).setAll({centerY:Er,centerX:0}),t("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),t("Tick",["pictorial"]).setAll({location:.5});{const r=t("Graphics",["pictorial","background"]);r.setAll({fillOpacity:.2}),ir(r,"fill",e,"alternativeBackground")}}}class vg extends Ap{_afterNew(){this._defaultThemes.push(c0.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(e){super._processSeries(e),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(vg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"}),Object.defineProperty(vg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ap.classNames.concat([vg.className])});class bg extends vg{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:Er,y:Er})}_prepareChildren(){super._prepareChildren();const e=this.chartContainer,t=e.innerWidth(),r=e.innerHeight(),h=this.get("startAngle",0),y=this.get("endAngle",0),D=this.get("innerRadius");let F=qg(0,0,h,y,1);const G=t/(F.right-F.left),W=r/(F.bottom-F.top);let ge={left:0,right:0,top:0,bottom:0};if(D instanceof Or){let ce=D.value,pt=Math.min(G,W);ce=Math.max(pt*ce,pt-Math.min(r,t))/pt,ge=qg(0,0,h,y,ce),this.setPrivateRaw("irModifyer",ce/D.value)}F=function Ay(_){const e=_.length;if(e>0){let t=_[0],r=t.left,h=t.top,y=t.right,D=t.bottom;if(e>1)for(let F=1;F<e;F++)t=_[F],r=Math.min(t.left,r),y=Math.max(t.right,y),h=Math.min(t.top,h),D=Math.max(t.bottom,D);return{left:r,right:y,top:h,bottom:D}}return{left:0,right:0,top:0,bottom:0}}([F,ge]);const ae=this._maxRadius;this._maxRadius=Math.min(G,W);const be=va(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-be*(F.bottom+F.top)/2,dx:-be*(F.right+F.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||ae!=this._maxRadius)&&this.series.each(ce=>{ce._markDirtyKey("startAngle")}),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each(ce=>{ce._markDirtyKey("innerRadius")})}radius(e){let t=va(this.get("radius",0),this._maxRadius),r=va(this.get("innerRadius",0),t);if(e){let h=this.series.indexOf(e),y=this.series.length,D=e.get("radius");return null!=D?r+va(D,t-r):r+(t-r)/y*(h+1)}return t}innerRadius(e){const t=this.radius();let r=va(this.get("innerRadius",0),t);if(r<0&&(r=t+r),e){let h=this.series.indexOf(e),y=this.series.length,D=e.get("innerRadius");return null!=D?r+va(D,t-r):r+(t-r)/y*h}return r}}Object.defineProperty(bg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"}),Object.defineProperty(bg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:vg.classNames.concat([bg.className])});class d0 extends Dc{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(e){this.processor&&this.processor.processRow(e),super._onPush(e)}_onInsertIndex(e,t){this.processor&&this.processor.processRow(t),super._onInsertIndex(e,t)}_onSetIndex(e,t,r){this.processor&&this.processor.processRow(r),super._onSetIndex(e,t,r)}}class Ip extends wp{constructor(e,t,r){super(r),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=t,this.component=e,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}hide(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}isHidden(){return!this.get("visible")}}class vf extends br{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new d0}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(e){e.incrementRef(),this._data.decrementRef(),this._data=e}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(e=>{const t=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,"clear"===e.type)Oe(t,r=>{r.dispose()}),t.length=0,this._onDataClear();else if("push"===e.type){const r=new Ip(this,e.newValue,this._makeDataItem(e.newValue));t.push(r),this.processDataItem(r)}else if("setIndex"===e.type){const r=t[e.index],h=this._makeDataItem(e.newValue);r.bullets&&0==r.bullets.length&&(r.bullets=void 0),Aa(h).forEach(y=>{r.animate({key:y,to:h[y],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),r.dataContext=e.newValue}else if("insertIndex"===e.type){const r=new Ip(this,e.newValue,this._makeDataItem(e.newValue));t.splice(e.index,0,r),this.processDataItem(r)}else if("removeIndex"===e.type)t[e.index].dispose(),t.splice(e.index,1);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");{const r=t[e.oldIndex];t.splice(e.oldIndex,1),t.splice(e.newIndex,0,r)}}this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},Oe(this.valueFields,e=>{this.get(e+"Field")&&(this._valueFields.push(e),this._valueFieldsF[e]={fieldKey:e+"Field",workingKey:e+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},Oe(this.fields,e=>{this.get(e+"Field")&&(this._fields.push(e),this._fieldsF[e]=e+"Field")}))}get dataItems(){return this._dataItems}processDataItem(e){}_makeDataItem(e){const t={};return this._valueFields&&Oe(this._valueFields,r=>{const h=this.get(this._valueFieldsF[r].fieldKey);t[r]=e[h],t[this._valueFieldsF[r].workingKey]=t[r]}),this._fields&&Oe(this._fields,r=>{const h=this.get(this._fieldsF[r]);t[r]=e[h]}),t}makeDataItem(e){let t=new Ip(this,void 0,e);return this.processDataItem(t),t}pushDataItem(e){const t=this.makeDataItem(e);return this._mainDataItems.push(t),t}disposeDataItem(e){}showDataItem(e,t){return(0,na.mG)(this,void 0,void 0,function*(){e.set("visible",!0)})}hideDataItem(e,t){return(0,na.mG)(this,void 0,void 0,function*(){e.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const e="datavalidated";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this._dataChanged=!1}this.inited=!0}markDirtyValues(e){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}}Object.defineProperty(vf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(vf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([vf.className])});let X_={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2629742400,year:31536e6};function bf(_,e){return null==e&&(e=1),X_[_]*e}function cm(_,e,t,r,h,y,D){if(!D||h){let F=0;switch(!h&&"millisecond"!=e&&(F=_.getTimezoneOffset(),_.setUTCMinutes(_.getUTCMinutes()-F)),e){case"day":let G=_.getUTCDate();if(t>1){if(y){y=cm(y,"day",1);let xt=_.getTime()-y.getTime(),Gt=Math.floor(xt/bf("day")/t),Ht=bf("day",Gt*t);_.setTime(y.getTime()+Ht-F*bf("minute"))}}else _.setUTCDate(G);_.setUTCHours(0,0,0,0);break;case"second":let W=_.getUTCSeconds();t>1&&(W=Math.floor(W/t)*t),_.setUTCSeconds(W,0);break;case"millisecond":if(1==t)return _;let ge=_.getUTCMilliseconds();ge=Math.floor(ge/t)*t,_.setUTCMilliseconds(ge);break;case"hour":let ae=_.getUTCHours();t>1&&(ae=Math.floor(ae/t)*t),_.setUTCHours(ae,0,0,0);break;case"minute":let be=_.getUTCMinutes();t>1&&(be=Math.floor(be/t)*t),_.setUTCMinutes(be,0,0);break;case"month":let ce=_.getUTCMonth();t>1&&(ce=Math.floor(ce/t)*t),_.setUTCMonth(ce,1),_.setUTCHours(0,0,0,0);break;case"year":let pt=_.getUTCFullYear();t>1&&(pt=Math.floor(pt/t)*t),_.setUTCFullYear(pt,0,1),_.setUTCHours(0,0,0,0);break;case"week":let ke=_.getUTCDate(),ft=_.getUTCDay();un(r)||(r=1),ke=ft>=r?ke-ft+r:ke-(7+ft)+r,_.setUTCDate(ke),_.setUTCHours(0,0,0,0)}if(!h&&"millisecond"!=e&&(_.setUTCMinutes(_.getUTCMinutes()+F),"day"==e||"week"==e||"month"==e||"year"==e)){let G=_.getTimezoneOffset();if(G!=F){let W=G-F;_.setUTCMinutes(_.getUTCMinutes()+W)}}return _}{if(isNaN(_.getTime()))return _;let F=D.offsetUTC(_),G=_.getTimezoneOffset(),W=D.parseDate(_),ge=W.year,ae=W.month,be=W.day,ce=W.hour,pt=W.minute,ke=W.second,ft=W.millisecond,xt=W.weekday,Gt=F-G;switch(e){case"day":if(t>1&&y){y=cm(y,"day",1,r,h,void 0,D);let Jn=_.getTime()-y.getTime(),fi=Math.floor(Jn/bf("day")/t),jn=bf("day",fi*t);_.setTime(y.getTime()+jn),W=D.parseDate(_),ge=W.year,ae=W.month,be=W.day}ce=0,pt=Gt,ke=0,ft=0;break;case"second":pt+=Gt,t>1&&(ke=Math.floor(ke/t)*t),ft=0;break;case"millisecond":pt+=Gt,t>1&&(ft=Math.floor(ft/t)*t);break;case"hour":t>1&&(ce=Math.floor(ce/t)*t),pt=Gt,ke=0,ft=0;break;case"minute":t>1&&(pt=Math.floor(pt/t)*t),pt+=Gt,ke=0,ft=0;break;case"month":t>1&&(ae=Math.floor(ae/t)*t),be=1,ce=0,pt=Gt,ke=0,ft=0;break;case"year":t>1&&(ge=Math.floor(ge/t)*t),ae=0,be=1,ce=0,pt=Gt,ke=0,ft=0;break;case"week":un(r)||(r=1),be=xt>=r?be-xt+r:be-(7+xt)+r,ce=0,pt=Gt,ke=0,ft=0}let Ht=(_=new Date(ge,ae,be,ce,pt,ke,ft)).getTimezoneOffset(),Cn=D.offsetUTC(_)-Ht;return Cn!=Gt&&_.setTime(_.getTime()+6e4*(Cn-Gt)),_}}class ah extends vf{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new Dc}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{width:vi,height:vi,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(e=>{if("clear"===e.type)this._handleBullets(this.dataItems);else if("push"===e.type)this._handleBullets(this.dataItems);else if("setIndex"===e.type)this._handleBullets(this.dataItems);else if("insertIndex"===e.type)this._handleBullets(this.dataItems);else if("removeIndex"===e.type)this._handleBullets(this.dataItems);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");this._handleBullets(this.dataItems)}}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}endIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("endIndex",e),e)}_handleBullets(e){Oe(e,t=>{const r=t.bullets;r&&(Oe(r,h=>{h.dispose()}),t.bullets=void 0)}),this.markDirtyValues()}getDataItemById(e){return ls(this.dataItems,t=>t.get("id")==e)}_makeBullets(e){this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each(t=>{this._makeBullet(e,t)}))}_shouldMakeBullet(e){return!0}_makeBullet(e,t,r){const h=t(this._root,this,e);return h&&(h._index=r,this._makeBulletReal(e,h)),h}_makeBulletReal(e,t){let r=t.get("sprite");r&&(r._setDataItem(e),r.setRaw("position","absolute"),this.bulletsContainer.children.push(r)),t.series=this,e.bullets.push(t)}addBullet(e,t){e.bullets||(e.bullets=[]),t&&this._makeBulletReal(e,t)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let e=this.startIndex(),t=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const h=this.getPrivate("baseValueSeries");h&&this._disposers.push(h.onPrivate("startIndex",()=>{this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0)),(this._psi!=e||this._pei!=t)&&!this._selectionAggregatesCalculated&&(0===e&&t===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(e,t),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let h=this.get("tooltip");h&&(h.hide(0),h.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let h;const y=this.get("legendDataItem");if(y&&(h=y.get("markerRectangle"),h&&this.isVisible())){if(this.isDirty("stroke")){let D=this.get("stroke");h.set("stroke",D)}if(this.isDirty("fill")){let D=this.get("fill");h.set("fill",D)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let h=this.startIndex(),y=this.endIndex();y<this.dataItems.length&&y++;for(let D=h;D<y;D++){let F=this.dataItems[D];F.bullets||this._makeBullets(F)}}}_calculateAggregates(e,t){let r=this._valueFields;if(!r)throw new Error("No value fields are set for the series.");const h={},y={},D={},F={},G={},W={},ge={},ae={},be={};Oe(r,ce=>{h[ce]=0,y[ce]=0,D[ce]=0}),Oe(r,ce=>{let pt=ce+"Change",ke=ce+"ChangePercent",ft=ce+"ChangePrevious",xt=ce+"ChangePreviousPercent",Gt=ce+"ChangeSelection",Ht=ce+"ChangeSelectionPercent",Ut="valueY";("valueX"==ce||"openValueX"==ce||"lowValueX"==ce||"highValueX"==ce)&&(Ut="valueX");const Cn=this.getPrivate("baseValueSeries");for(let Jn=e;Jn<t;Jn++){const fi=this.dataItems[Jn];let jn=fi.get(ce);null!=jn&&(D[ce]++,h[ce]+=jn,y[ce]+=Math.abs(jn),ae[ce]=h[ce]/D[ce],(F[ce]>jn||null==F[ce])&&(F[ce]=jn),(G[ce]<jn||null==G[ce])&&(G[ce]=jn),ge[ce]=jn,null==W[ce]&&(W[ce]=jn,be[ce]=jn,Cn&&(W[Ut]=Cn._getBase(Ut))),0===e&&(fi.setRaw(pt,jn-W[Ut]),fi.setRaw(ke,(jn-W[Ut])/W[Ut]*100)),fi.setRaw(ft,jn-be[Ut]),fi.setRaw(xt,(jn-be[Ut])/be[Ut]*100),fi.setRaw(Gt,jn-W[Ut]),fi.setRaw(Ht,(jn-W[Ut])/W[Ut]*100),be[ce]=jn)}}),Oe(r,ce=>{this.setPrivate(ce+"AverageSelection",ae[ce]),this.setPrivate(ce+"CountSelection",D[ce]),this.setPrivate(ce+"SumSelection",h[ce]),this.setPrivate(ce+"AbsoluteSumSelection",y[ce]),this.setPrivate(ce+"LowSelection",F[ce]),this.setPrivate(ce+"HighSelection",G[ce]),this.setPrivate(ce+"OpenSelection",W[ce]),this.setPrivate(ce+"CloseSelection",ge[ce])}),0===e&&t===this.dataItems.length&&Oe(r,ce=>{this.setPrivate(ce+"Average",ae[ce]),this.setPrivate(ce+"Count",D[ce]),this.setPrivate(ce+"Sum",h[ce]),this.setPrivate(ce+"AbsoluteSum",y[ce]),this.setPrivate(ce+"Low",F[ce]),this.setPrivate(ce+"High",G[ce]),this.setPrivate(ce+"Open",W[ce]),this.setPrivate(ce+"Close",ge[ce])})}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const e=this.get("heatRules");if(this._valuesDirty&&e&&e.length>0&&Oe(e,t=>{const r=t.minValue||this.getPrivate(t.dataField+"Low")||0,h=t.maxValue||this.getPrivate(t.dataField+"High")||0;Oe(t.target._entities,y=>{const D=y.dataItem.get(t.dataField);if(un(D))if(t.customFunction)t.customFunction.call(this,y,r,h,D);else{let F,G;F=t.logarithmic?(Math.log(D)*Math.LOG10E-Math.log(r)*Math.LOG10E)/(Math.log(h)*Math.LOG10E-Math.log(r)*Math.LOG10E):(D-r)/(h-r),un(D)&&(!un(F)||Math.abs(F)==1/0)&&(F=.5),un(t.min)?G=t.min+(t.max-t.min)*F:t.min instanceof ti?G=ti.interpolate(F,t.min,t.max):t.min instanceof Or&&(G=af(F,t.min,t.max)),y.set(t.key,G)}else t.neutral&&y.set(t.key,t.neutral)})}),this.get("visible")){let t=this.dataItems.length,r=this.startIndex(),h=this.endIndex();h<t&&h++,r>0&&r--;for(let y=0;y<r;y++)this._hideBullets(this.dataItems[y]);for(let y=r;y<h;y++)this._positionBullets(this.dataItems[y]);for(let y=h;y<t;y++)this._hideBullets(this.dataItems[y])}}_positionBullets(e){e.bullets&&Oe(e.bullets,t=>{this._positionBullet(t);const r=t.get("sprite");t.get("dynamic")&&(r&&(r._markDirtyKey("fill"),r.markDirtySize()),r instanceof br&&r.walkChildren(h=>{h._markDirtyKey("fill"),h.markDirtySize(),h instanceof hc&&h.text.markDirtyText()})),r instanceof hc&&r.get("populateText")&&r.text.markDirtyText()})}_hideBullets(e){e.bullets&&Oe(e.bullets,t=>{let r=t.get("sprite");r&&r.setPrivate("visible",!1)})}_positionBullet(e){}_placeBulletsContainer(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}disposeDataItem(e){const t=e.bullets;t&&Oe(t,r=>{r.dispose()})}_getItemReaderLabel(){return""}showDataItem(e,t){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.showDataItem.call(this,e,t)],y=e.bullets;y&&Oe(y,D=>{const F=D.get("sprite");F&&h.push(F.show(t))}),yield Promise.all(h)})}hideDataItem(e,t){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.hideDataItem.call(this,e,t)],y=e.bullets;y&&Oe(y,D=>{const F=D.get("sprite");F&&h.push(F.hide(t))}),yield Promise.all(h)})}_sequencedShowHide(e,t){return(0,na.mG)(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(un(t)||(t=this.get("interpolationDuration",0)),t>0){const r=this.startIndex(),h=this.endIndex();yield Promise.all($e(this.dataItems,(y,D)=>(0,na.mG)(this,void 0,void 0,function*(){let F=t||0;(D<r-10||D>h+10)&&(F=0);let G=this.get("sequencedDelay",0)+F/(h-r);yield function h0(_){return new Promise((e,t)=>{setTimeout(e,_)})}(G*(D-r)),e?yield this.showDataItem(y,F):yield this.hideDataItem(y,F)})))}else yield Promise.all($e(this.dataItems,r=>e?this.showDataItem(r,0):this.hideDataItem(r,0)))})}updateLegendValue(e){if(e){const t=e.get("legendDataItem");if(t){const r=t.get("valueLabel");if(r){const y=r.text;let D="";r._setDataItem(e),D=this.get("legendValueText",y.get("text","")),r.set("text",D),y.markDirtyText()}const h=t.get("label");if(h){const y=h.text;let D="";h._setDataItem(e),D=this.get("legendLabelText",y.get("text","")),h.set("text",D),y.markDirtyText()}}}}updateLegendMarker(e){}_onHide(){super._onHide();const e=this.getTooltip();e&&e.hide()}hoverDataItem(e){}unhoverDataItem(e){}_getBase(e){const t=this.dataItems[this.startIndex()];return t?t.get(e):0}}Object.defineProperty(ah,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(ah,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:vf.classNames.concat([ah.className])});class dm extends ah{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this._makeSlices()}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this._makeLabels()}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this._makeTicks()})}makeSlice(e){const t=this.slicesContainer.children.push(this.slices.make());return t.on("fill",()=>{this.updateLegendMarker(e)}),t.on("stroke",()=>{this.updateLegendMarker(e)}),t._setDataItem(e),e.set("slice",t),this.slices.push(t),t}makeLabel(e){const t=this.labelsContainer.children.push(this.labels.make());return t._setDataItem(e),e.set("label",t),this.labels.push(t),t}_shouldMakeBullet(e){return null!=e.get("value")}makeTick(e){const t=this.ticksContainer.children.push(this.ticks.make());return t._setDataItem(e),e.set("tick",t),this.ticks.push(t),t}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const e=this.get("colors");e&&e.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let e=0,t=0,r=0,h=1/0,y=0;Oe(this._dataItems,D=>{let F=D.get("valueWorking",0);e+=F,t+=Math.abs(F)}),Oe(this._dataItems,D=>{let F=D.get("valueWorking",0);F>r&&(r=F),F<h&&(h=F),y++;let G=F/t;0==t&&(G=0),D.setRaw("valuePercentTotal",100*G)}),this.setPrivateRaw("valueLow",h),this.setPrivateRaw("valueHigh",r),this.setPrivateRaw("valueSum",e),this.setPrivateRaw("valueAverage",e/y),this.setPrivateRaw("valueAbsoluteSum",t)}}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return(0,na.mG)(this,void 0,void 0,function*(){let r=[];r.push(t.show.call(this,e)),r.push(this._sequencedShowHide(!0,e)),yield Promise.all(r)})}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return(0,na.mG)(this,void 0,void 0,function*(){let r=[];r.push(t.hide.call(this,e)),r.push(this._sequencedShowHide(!1,e)),yield Promise.all(r)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&Oe(this._dataItems,e=>{e.get("label").text.markDirtyText()}),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&Oe(this._dataItems,e=>{this.updateLegendValue(e)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),Oe(this.dataItems,e=>{this._updateTick(e)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(e){if(super.processDataItem(e),null==e.get("fill")){let t=this.get("colors");t&&e.setRaw("fill",t.next())}}showDataItem(e,t){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.showDataItem.call(this,e,t)];un(t)||(t=this.get("stateAnimationDuration",0));const y=this.get("stateAnimationEasing");let D=e.get("value");const F=e.animate({key:"valueWorking",to:D,duration:t,easing:y});F&&h.push(F.waitForStop());const G=e.get("tick");G&&h.push(G.show(t));const W=e.get("label");W&&h.push(W.show(t));const ge=e.get("slice");ge&&h.push(ge.show(t)),ge.get("active")&&ge.states.applyAnimate("active"),yield Promise.all(h)})}hideDataItem(e,t){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.hideDataItem.call(this,e,t)],y=this.states.create("hidden",{});un(t)||(t=y.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const D=y.get("stateAnimationEasing",this.get("stateAnimationEasing")),F=e.animate({key:"valueWorking",to:0,duration:t,easing:D});F&&h.push(F.waitForStop());const G=e.get("tick");G&&h.push(G.hide(t));const W=e.get("label");W&&h.push(W.hide(t));const ge=e.get("slice");ge.hideTooltip(),ge&&h.push(ge.hide(t)),yield Promise.all(h)})}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("label");t&&(this.labels.removeValue(t),t.dispose());let r=e.get("tick");r&&(this.ticks.removeValue(r),r.dispose());let h=e.get("slice");h&&(this.slices.removeValue(h),h.dispose())}hoverDataItem(e){const t=e.get("slice");t&&!t.isHidden()&&t.hover()}unhoverDataItem(e){const t=e.get("slice");t&&t.unhover()}updateLegendMarker(e){if(e){const t=e.get("slice");if(t){const r=e.get("legendDataItem");if(r){const h=r.get("markerRectangle");Oe(dg,y=>{null!=t.get(y)&&h.set(y,t.get(y))})}}}}_arrangeDown(e){if(e){let t=this._getNextDown();e.sort((r,h)=>r.y>h.y?1:r.y<h.y?-1:0),Oe(e,r=>{const h=r.label.adjustedLocalBounds();let y=h.top;r.y+y<t&&(r.y=t-y),r.label.set("y",r.y),t=r.y+h.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(e){if(e){let t=this._getNextUp();e.sort((r,h)=>r.y<h.y?1:r.y>h.y?-1:0),Oe(e,r=>{const h=r.label.adjustedLocalBounds();let y=h.bottom;r.y+y>t&&(r.y=t-y),r.label.set("y",r.y),t=r.y+h.top})}}_arrangeRight(e){if(e){let t=0;e.sort((r,h)=>r.y>h.y?1:r.y<h.y?-1:0),Oe(e,r=>{const h=r.label.adjustedLocalBounds();let y=h.left;r.y+y<t&&(r.y=t-y),r.label.set("x",r.y),t=r.y+h.right})}}_arrangeLeft(e){if(e){let t=this.labelsContainer.maxWidth();e.sort((r,h)=>r.y<h.y?1:r.y>h.y?-1:0),Oe(e,r=>{const h=r.label.adjustedLocalBounds();let y=h.right;r.y+y>t&&(r.y=t-y),r.label.set("x",r.y),t=r.y+h.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(e){}_dispose(){super._dispose();const e=this.chart;e&&e.series.removeValue(this)}}function ra(_){return function(){return _}}Object.defineProperty(dm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"}),Object.defineProperty(dm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ah.classNames.concat([dm.className])});const i_=Math.abs,ju=Math.atan2,Yc=Math.cos,v0=Math.max,ey=Math.min,pc=Math.sin,xg=Math.sqrt,nc=1e-12,r_=Math.PI,wg=r_/2,Xy=2*r_;function fb(_){return _>1?0:_<-1?r_:Math.acos(_)}function Mr(_){return _>=1?wg:_<=-1?-wg:Math.asin(_)}const ty=Math.PI,ny=2*ty,xf=1e-6,hm=ny-xf;function ev(_){this._+=_[0];for(let e=1,t=_.length;e<t;++e)this._+=arguments[e]+_[e]}class wf{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?ev:function o_(_){let e=Math.floor(_);if(!(e>=0))throw new Error(`invalid digits: ${_}`);if(e>15)return ev;const t=10**e;return function(r){this._+=r[0];for(let h=1,y=r.length;h<y;++h)this._+=Math.round(arguments[h]*t)/t+r[h]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,h){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+h}`}bezierCurveTo(e,t,r,h,y,D){this._append`C${+e},${+t},${+r},${+h},${this._x1=+y},${this._y1=+D}`}arcTo(e,t,r,h,y){if(e=+e,t=+t,r=+r,h=+h,(y=+y)<0)throw new Error(`negative radius: ${y}`);let D=this._x1,F=this._y1,G=r-e,W=h-t,ge=D-e,ae=F-t,be=ge*ge+ae*ae;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(be>xf)if(Math.abs(ae*G-W*ge)>xf&&y){let ce=r-D,pt=h-F,ke=G*G+W*W,ft=ce*ce+pt*pt,xt=Math.sqrt(ke),Gt=Math.sqrt(be),Ht=y*Math.tan((ty-Math.acos((ke+be-ft)/(2*xt*Gt)))/2),Ut=Ht/Gt,Cn=Ht/xt;Math.abs(Ut-1)>xf&&this._append`L${e+Ut*ge},${t+Ut*ae}`,this._append`A${y},${y},0,0,${+(ae*ce>ge*pt)},${this._x1=e+Cn*G},${this._y1=t+Cn*W}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,h,y,D){if(e=+e,t=+t,D=!!D,(r=+r)<0)throw new Error(`negative radius: ${r}`);let F=r*Math.cos(h),G=r*Math.sin(h),W=e+F,ge=t+G,ae=1^D,be=D?h-y:y-h;null===this._x1?this._append`M${W},${ge}`:(Math.abs(this._x1-W)>xf||Math.abs(this._y1-ge)>xf)&&this._append`L${W},${ge}`,r&&(be<0&&(be=be%ny+ny),be>hm?this._append`A${r},${r},0,1,${ae},${e-F},${t-G}A${r},${r},0,1,${ae},${this._x1=W},${this._y1=ge}`:be>xf&&this._append`A${r},${r},0,${+(be>=ty)},${ae},${this._x1=e+r*Math.cos(y)},${this._y1=t+r*Math.sin(y)}`)}rect(e,t,r,h){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+h}h${-r}Z`}toString(){return this._}}function s_(_){let e=3;return _.digits=function(t){if(!arguments.length)return e;if(null==t)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return _},()=>new wf(e)}function tv(_){return _.innerRadius}function b0(_){return _.outerRadius}function nv(_){return _.startAngle}function iv(_){return _.endAngle}function rv(_){return _&&_.padAngle}function ov(_,e,t,r,h,y,D,F){var G=t-_,W=r-e,ge=D-h,ae=F-y,be=ae*G-ge*W;if(!(be*be<nc))return[_+(be=(ge*(e-y)-ae*(_-h))/be)*G,e+be*W]}function a_(_,e,t,r,h,y,D){var F=_-t,G=e-r,W=(D?y:-y)/xg(F*F+G*G),ge=W*G,ae=-W*F,be=_+ge,ce=e+ae,pt=t+ge,ke=r+ae,ft=(be+pt)/2,xt=(ce+ke)/2,Gt=pt-be,Ht=ke-ce,Ut=Gt*Gt+Ht*Ht,Cn=h-y,Jn=be*ke-pt*ce,fi=(Ht<0?-1:1)*xg(v0(0,Cn*Cn*Ut-Jn*Jn)),jn=(Jn*Ht-Gt*fi)/Ut,or=(-Jn*Gt-Ht*fi)/Ut,Ci=(Jn*Ht+Gt*fi)/Ut,Ti=(-Jn*Gt+Ht*fi)/Ut,Do=jn-ft,Qi=or-xt,eo=Ci-ft,rs=Ti-xt;return Do*Do+Qi*Qi>eo*eo+rs*rs&&(jn=Ci,or=Ti),{cx:jn,cy:or,x01:-ge,y01:-ae,x11:jn*(h/Cn-1),y11:or*(h/Cn-1)}}function x0(){var _=tv,e=b0,t=ra(0),r=null,h=nv,y=iv,D=rv,F=null,G=s_(W);function W(){var ge,ae,be=+_.apply(this,arguments),ce=+e.apply(this,arguments),pt=h.apply(this,arguments)-wg,ke=y.apply(this,arguments)-wg,ft=i_(ke-pt),xt=ke>pt;if(F||(F=ge=G()),ce<be&&(ae=ce,ce=be,be=ae),ce>nc)if(ft>Xy-nc)F.moveTo(ce*Yc(pt),ce*pc(pt)),F.arc(0,0,ce,pt,ke,!xt),be>nc&&(F.moveTo(be*Yc(ke),be*pc(ke)),F.arc(0,0,be,ke,pt,xt));else{var Qi,eo,Gt=pt,Ht=ke,Ut=pt,Cn=ke,Jn=ft,fi=ft,jn=D.apply(this,arguments)/2,or=jn>nc&&(r?+r.apply(this,arguments):xg(be*be+ce*ce)),Ci=ey(i_(ce-be)/2,+t.apply(this,arguments)),Ti=Ci,Do=Ci;if(or>nc){var rs=Mr(or/be*pc(jn)),fc=Mr(or/ce*pc(jn));(Jn-=2*rs)>nc?(Ut+=rs*=xt?1:-1,Cn-=rs):(Jn=0,Ut=Cn=(pt+ke)/2),(fi-=2*fc)>nc?(Gt+=fc*=xt?1:-1,Ht-=fc):(fi=0,Gt=Ht=(pt+ke)/2)}var Ar=ce*Yc(Gt),Io=ce*pc(Gt),Sr=be*Yc(Cn),Au=be*pc(Cn);if(Ci>nc){var gc,mc=ce*Yc(Ht),Nl=ce*pc(Ht),hl=be*Yc(Ut),Jc=be*pc(Ut);if(ft<r_)if(gc=ov(Ar,Io,hl,Jc,mc,Nl,Sr,Au)){var oa=Ar-gc[0],Em=Io-gc[1],uh=mc-gc[0],M_=Nl-gc[1],yy=1/pc(fb((oa*uh+Em*M_)/(xg(oa*oa+Em*Em)*xg(uh*uh+M_*M_)))/2),vy=xg(gc[0]*gc[0]+gc[1]*gc[1]);Ti=ey(Ci,(be-vy)/(yy-1)),Do=ey(Ci,(ce-vy)/(yy+1))}else Ti=Do=0}fi>nc?Do>nc?(Qi=a_(hl,Jc,Ar,Io,ce,Do,xt),eo=a_(mc,Nl,Sr,Au,ce,Do,xt),F.moveTo(Qi.cx+Qi.x01,Qi.cy+Qi.y01),Do<Ci?F.arc(Qi.cx,Qi.cy,Do,ju(Qi.y01,Qi.x01),ju(eo.y01,eo.x01),!xt):(F.arc(Qi.cx,Qi.cy,Do,ju(Qi.y01,Qi.x01),ju(Qi.y11,Qi.x11),!xt),F.arc(0,0,ce,ju(Qi.cy+Qi.y11,Qi.cx+Qi.x11),ju(eo.cy+eo.y11,eo.cx+eo.x11),!xt),F.arc(eo.cx,eo.cy,Do,ju(eo.y11,eo.x11),ju(eo.y01,eo.x01),!xt))):(F.moveTo(Ar,Io),F.arc(0,0,ce,Gt,Ht,!xt)):F.moveTo(Ar,Io),be>nc&&Jn>nc?Ti>nc?(Qi=a_(Sr,Au,mc,Nl,be,-Ti,xt),eo=a_(Ar,Io,hl,Jc,be,-Ti,xt),F.lineTo(Qi.cx+Qi.x01,Qi.cy+Qi.y01),Ti<Ci?F.arc(Qi.cx,Qi.cy,Ti,ju(Qi.y01,Qi.x01),ju(eo.y01,eo.x01),!xt):(F.arc(Qi.cx,Qi.cy,Ti,ju(Qi.y01,Qi.x01),ju(Qi.y11,Qi.x11),!xt),F.arc(0,0,be,ju(Qi.cy+Qi.y11,Qi.cx+Qi.x11),ju(eo.cy+eo.y11,eo.cx+eo.x11),xt),F.arc(eo.cx,eo.cy,Ti,ju(eo.y11,eo.x11),ju(eo.y01,eo.x01),!xt))):F.arc(0,0,be,Cn,Ut,xt):F.lineTo(Sr,Au)}else F.moveTo(0,0);if(F.closePath(),ge)return F=null,ge+""||null}return W.centroid=function(){var ge=(+_.apply(this,arguments)+ +e.apply(this,arguments))/2,ae=(+h.apply(this,arguments)+ +y.apply(this,arguments))/2-r_/2;return[Yc(ae)*ge,pc(ae)*ge]},W.innerRadius=function(ge){return arguments.length?(_="function"==typeof ge?ge:ra(+ge),W):_},W.outerRadius=function(ge){return arguments.length?(e="function"==typeof ge?ge:ra(+ge),W):e},W.cornerRadius=function(ge){return arguments.length?(t="function"==typeof ge?ge:ra(+ge),W):t},W.padRadius=function(ge){return arguments.length?(r=null==ge?null:"function"==typeof ge?ge:ra(+ge),W):r},W.startAngle=function(ge){return arguments.length?(h="function"==typeof ge?ge:ra(+ge),W):h},W.endAngle=function(ge){return arguments.length?(y="function"==typeof ge?ge:ra(+ge),W):y},W.padAngle=function(ge){return arguments.length?(D="function"==typeof ge?ge:ra(+ge),W):D},W.context=function(ge){return arguments.length?(F=ge??null,W):F},W}class l_ extends cs{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:x0()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),r=0,h=0;un(e)&&(r=e),un(t)&&(h=t);let y=this.get("radius",0),D=this.get("innerRadius",0);return y+=this.get("dRadius",0),D+=this.get("dInnerRadius",0),D<0&&(D=y+D),e instanceof Or&&(r=this.ix*(D+(y-D)*e.value)),t instanceof Or&&(h=this.iy*(D+(y-D)*t.value)),this.get("arc")>=360&&0==D&&(r=0,h=0),{x:r,y:h}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0);const r=this._generator;t<0&&(e+=t,t*=-1),t>.1&&r.cornerRadius(this.get("cornerRadius",0)),r.context(this._display);let h=this.get("radius",0),y=this.get("innerRadius",0);h+=this.get("dRadius",0),y+=this.get("dInnerRadius",0),y<0&&(y=h+y),r({innerRadius:y,outerRadius:h,startAngle:(e+90)*md,endAngle:(e+t+90)*md});let G=e+t/2;this.ix=kd(G),this.iy=Hc(G);const W=this.get("shiftRadius",0);this.setRaw("dx",this.ix*W),this.setRaw("dy",this.iy*W),this.markDirtyPosition()}}}function pm(_,e){for(let t=0,r=e.length;t<r;t++){const h=e[t];if(h.length>0){let y=h[0];if(y.length>0){let D=y[0];_.moveTo(D.x,D.y);for(let F=0,G=h.length;F<G;F++)sv(_,h[F])}}}}function sv(_,e){for(let t=0,r=e.length;t<r;t++){const h=e[t];_.lineTo(h.x,h.y)}}Object.defineProperty(l_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty(l_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([l_.className])});class fm extends cs{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),t=this.get("segments");if(e&&e.length>0){let r=e[0];this._display.moveTo(r.x,r.y),pm(this._display,[[e]])}else if(t)pm(this._display,t);else if(!this.get("draw")){let r=this.width(),h=this.height();this._display.moveTo(0,0),this._display.lineTo(r,h)}}}}Object.defineProperty(fm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(fm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([fm.className])});class Cf extends fm{}Object.defineProperty(Cf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(Cf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fm.classNames.concat([Cf.className])});class u_ extends Sp{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*md,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(u_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(u_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sp.classNames.concat([u_.className])});class Op extends hc{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(u_.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0);return t+va(this.get("baseRadius",0),e-t)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),t=this.get("inside",!1),r=this.get("orientation");let h=uf(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);const y=Hc(h),D=kd(h);let F=this.baseRadius(),G=this.radius();if(this._display.angle=0,"circular"==e)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this._text.set("orientation",r),this._text.set("radius",G);else{0==F&&(h=0,G=0);let W=G*D,ge=G*y;"radial"==e?(this.setRaw("x",W),this.setRaw("y",ge),h<90||h>270||"auto"!=r?(this._display.angle=h,this._flipped=!1):(this._display.angle=h+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==e?(this.setRaw("centerX",Er),this.setRaw("centerY",Er),this.setRaw("x",W),this.setRaw("y",ge)):"regular"==e&&(this.setRaw("x",W),this.setRaw("y",ge))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),t=this.get("inside",!1);let r=0,h=0,y=this.get("labelAngle",0),D=this.localBounds(),F=D.right-D.left,G=D.bottom-D.top;if("radial"==e){if(this._flipped){let W=this.get("centerX");W instanceof Or&&(F*=1-2*W.value),r=F*kd(y),h=F*Hc(y)}}else!t&&"adjusted"==e&&(r=F/2*kd(y),h=G/2*Hc(y));this.setRaw("dx",r),this.setRaw("dy",h),super._updatePosition()}get text(){return this._text}}Object.defineProperty(Op,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(Op,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hc.classNames.concat([Op.className])});class Bh extends dm{_makeSlices(){return new Ea(us.new({}),()=>l_._new(this._root,{themeTags:vo(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template]))}_makeLabels(){return new Ea(us.new({}),()=>Op._new(this._root,{themeTags:vo(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template]))}_makeTicks(){return new Ea(us.new({}),()=>Cf._new(this._root,{themeTags:vo(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template]))}processDataItem(e){super.processDataItem(e);const t=this.makeSlice(e);t.on("scale",()=>{this._updateTick(e)}),t.on("shiftRadius",()=>{this._updateTick(e)}),t.events.on("positionchanged",()=>{this._updateTick(e)});const r=this.makeLabel(e);r.events.on("positionchanged",()=>{this._updateTick(e)}),this.makeTick(e),t.events.on("positionchanged",()=>{r.markDirty()})}_getNextUp(){const e=this.chart;return e?e._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const e=this.chart;return e?-e._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const e=this.chart;if(e){if(this.isDirty("alignLabels")){let t=this.labels.template;if(this.get("alignLabels"))t.set("textType","aligned");else{let r=t.get("textType");(null==r||"aligned"==r)&&t.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const t=this.get("startAngle",e.get("startAngle",-90)),h=this.get("endAngle",e.get("endAngle",270))-t;let y=t;const D=e.radius(this);this.setPrivateRaw("radius",D);let F=e.innerRadius(this)*e.getPrivate("irModifyer",1);F<0&&(F=D+F),Oe(this._dataItems,G=>{this.updateLegendValue(G);let W=h*G.get("valuePercentTotal")/100;const ge=G.get("slice");if(ge){ge.set("radius",D),ge.set("innerRadius",F),ge.set("startAngle",y),ge.set("arc",W);const ce=G.get("fill");ge._setDefault("fill",ce),ge._setDefault("stroke",ce)}let ae=uf(y+W/2);const be=G.get("label");if(be&&(be.setPrivate("radius",D),be.setPrivate("innerRadius",F),be.set("labelAngle",ae),"aligned"==be.get("textType"))){let ce=D+be.get("radius",0),pt=D*Hc(ae);ae>90&&ae<=270?(!be.isHidden()&&!be.isHiding()&&this._lLabels.push({label:be,y:pt}),ce*=-1,ce-=this.labelsContainer.get("paddingLeft",0),be.set("centerX",vi),be.setPrivateRaw("left",!0)):(!be.isHidden()&&!be.isHiding()&&this._rLabels.push({label:be,y:pt}),ce+=this.labelsContainer.get("paddingRight",0),be.set("centerX",0),be.setPrivateRaw("left",!1)),be.set("x",ce),be.set("y",D*Hc(ae))}y+=W,this._updateTick(G)})}}}_updateTick(e){const t=e.get("tick"),r=e.get("label"),h=e.get("slice"),y=t.get("location",1);if(t&&r&&h){const D=(h.get("shiftRadius",0)+h.get("radius",0))*h.get("scale",1)*y,F=r.get("labelAngle",0),G=kd(F),W=Hc(F),ge=this.labelsContainer,ae=ge.get("paddingLeft",0),be=ge.get("paddingRight",0);let ce=0,pt=0;ce=r.x(),pt=r.y();let ke=[];if(0!=ce&&0!=pt){if("circular"==r.get("textType")){const xt=r.radius()-r.get("paddingBottom",0),Gt=r.get("labelAngle",0);ce=xt*kd(Gt),pt=xt*Hc(Gt)}let ft=-be;r.getPrivate("left")&&(ft=ae),ke=[{x:h.x()+D*G,y:h.y()+D*W},{x:ce+ft,y:pt},{x:ce,y:pt}]}t.set("points",ke)}}_positionBullet(e){const t=e.get("sprite");if(t){const h=t.dataItem.get("slice");if(h){const y=h.get("innerRadius",0),D=h.get("radius",0),ae=h.get("startAngle",0)+h.get("arc",0)*e.get("locationX",.5),be=y+(D-y)*e.get("locationY",.5);t.setAll({x:kd(ae)*be,y:Hc(ae)*be})}}}}Object.defineProperty(Bh,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"}),Object.defineProperty(Bh,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dm.classNames.concat([Bh.className])});const ry=class w0 extends gf{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}},C0=["id",""];class c_{constructor(e,t){this.platformId=e,this.zone=t}browserOnly(e){(0,gn.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngAfterViewInit(){this.browserOnly(()=>{const e=yf.new(this.id);e.setThemes([ry.new(e)]);const r=e.container.children.push(bg.new(e,{innerRadius:12,layout:e.horizontalLayout})).series.push(Bh.new(e,{valueField:"size",categoryField:"sector",alignLabels:!1}));r.get("colors")?.set("colors",[ec(628869),ec(15656922)]),r.data.setAll([{sector:"",size:this.value,backgraound:"#eee"},{sector:"",size:100-this.value}]),r.slices.template.set("tooltipText",""),r.labels.template.setAll({text:"",textType:"circular",inside:!0,radius:38,direction:"rtl"}),r.appear(1e3,100),e.tooltipContainer.children.push(hc.new(e,{x:Er,y:Er,centerX:Er,centerY:Er,fill:ec(0),fontSize:16,direction:"rtl",fontFamily:"IRANSans"})).set("text",`% ${this.value}`),this.root=e})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}static#e=this.\u0275fac=function(t){return new(t||c_)(i.Y36(i.Lbi),i.Y36(i.R0b))};static#t=this.\u0275cmp=i.Xpm({type:c_,selectors:[["pfo-doughnut-chart","id",""]],inputs:{id:"id",value:"value",chartStyle:"chartStyle"},standalone:!0,features:[i.jDz],attrs:C0,decls:1,vars:3,consts:[[3,"id"]],template:function(t,r){1&t&&i._UZ(0,"div",0),2&t&&(i.Akn(r.chartStyle),i.Q6J("id",r.id))},dependencies:[gn.ez]})}class mm extends cs{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),this.isDirty("radius")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawCircle(0,0,this.get("radius",10))}}Object.defineProperty(mm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Circle"}),Object.defineProperty(mm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([mm.className])});class Tf extends kl{constructor(){super(...arguments),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}_beforeChanged(){if(super._beforeChanged(),this.isDirty("sprite")){const e=this.get("sprite");e&&(e.setAll({position:"absolute",role:"figure"}),this._disposers.push(e))}(this.isDirty("locationX")||this.isDirty("locationY"))&&this.series&&this.series._positionBullet(this)}}Object.defineProperty(Tf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Bullet"}),Object.defineProperty(Tf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kl.classNames.concat([Tf.className])});class lh extends dc{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let e=this.width(),t=this.height(),r=e,h=t,y=r/Math.abs(e),D=h/Math.abs(t);if(un(r)&&un(h)){let F=Math.min(r,h)/2,G=va(this.get("cornerRadiusTL",8),F),W=va(this.get("cornerRadiusTR",8),F),ge=va(this.get("cornerRadiusBR",8),F),ae=va(this.get("cornerRadiusBL",8),F),be=Math.min(Math.abs(r/2),Math.abs(h/2));G=Rl(G,0,be),W=Rl(W,0,be),ge=Rl(ge,0,be),ae=Rl(ae,0,be);const ce=this._display;ce.moveTo(G*y,0),ce.lineTo(r-W*y,0),W>0&&ce.arcTo(r,0,r,W*D,W),ce.lineTo(r,h-ge*D),ge>0&&ce.arcTo(r,h,r-ge*y,h,ge),ce.lineTo(ae*y,h),ae>0&&ce.arcTo(0,h,0,h-ae*D,ae),ce.lineTo(0,G*D),G>0&&ce.arcTo(0,0,G*y,0,G),ce.closePath()}}}Object.defineProperty(lh,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(lh,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dc.classNames.concat([lh.className])});class gm extends br{_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",lh.new(this._root,{themeTags:vo(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const e=this._prevSettings.icon,t=this.get("icon");t!==e&&(this._disposeProperty("icon"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.icon=t)}if(this.isDirty("label")){const e=this._prevSettings.label,t=this.get("label");t!==e&&(this._disposeProperty("label"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.label=t)}}}Object.defineProperty(gm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(gm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([gm.className])});class d_ extends br{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=vo(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=lh.new(this._root,{themeTags:vo(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(gm.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:cs.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(lh.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(e){e&&this._disposers.push(e.events.on("stopped",()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1}))}_afterNew(){this._addOrientationClass(),super._afterNew();const e=this.startGrip,t=this.endGrip,r=this.thumb,h=this.get("background");h&&this._disposers.push(h.events.on("click",y=>{this.setPrivateRaw("isBusy",!0);const D=this._display.toLocal(y.point),F=this.width(),G=this.height(),W=this.get("orientation");let ge,ae,be;ge="vertical"==W?(D.y-r.height()/2)/G:(D.x-r.width()/2)/F,"vertical"==W?(ae=ge*G,be="y"):(ae=ge*F,be="x");const ce=this.get("animationDuration",0);ce>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:be,to:ae,duration:ce,easing:this.get("animationEasing")}))):(this.thumb.set(be,ae),this._root.events.once("frameended",()=>{this.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(r.events.on("dblclick",y=>{if(!Mc(y.originalEvent,this))return;const D=this.get("animationDuration",0),F=this.get("animationEasing");this.animate({key:"start",to:0,duration:D,easing:F}),this.animate({key:"end",to:1,duration:D,easing:F})})),this._disposers.push(e.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"})),this._disposers.push(t.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"})),this._disposers.push(r.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0})),this._disposers.push(e.events.on("globalpointerup",()=>{this._startDown&&this.setPrivateRaw("isBusy",!1),this._startDown=!1})),this._disposers.push(t.events.on("globalpointerup",()=>{this._endDown&&this.setPrivateRaw("isBusy",!1),this._endDown=!1})),this._disposers.push(r.events.on("globalpointerup",()=>{this._thumbDown&&this.setPrivateRaw("isBusy",!1),this._thumbDown=!1})),this._disposers.push(e.on("x",()=>{this._updateThumb()})),this._disposers.push(t.on("x",()=>{this._updateThumb()})),this._disposers.push(e.on("y",()=>{this._updateThumb()})),this._disposers.push(t.on("y",()=>{this._updateThumb()})),this._disposers.push(r.events.on("positionchanged",()=>{this._updateGripsByThumb()})),"vertical"==this.get("orientation")?(e.set("x",0),t.set("x",0),this._disposers.push(r.adapters.add("y",y=>Math.max(Math.min(Number(y),this.height()-r.height()),0))),this._disposers.push(r.adapters.add("x",y=>this.width()/2)),this._disposers.push(e.adapters.add("x",y=>this.width()/2)),this._disposers.push(t.adapters.add("x",y=>this.width()/2)),this._disposers.push(e.adapters.add("y",y=>Math.max(Math.min(Number(y),this.height()),0))),this._disposers.push(t.adapters.add("y",y=>Math.max(Math.min(Number(y),this.height()),0)))):(e.set("y",0),t.set("y",0),this._disposers.push(r.adapters.add("x",y=>Math.max(Math.min(Number(y),this.width()-r.width()),0))),this._disposers.push(r.adapters.add("y",y=>this.height()/2)),this._disposers.push(e.adapters.add("y",y=>this.height()/2)),this._disposers.push(t.adapters.add("y",y=>this.height()/2)),this._disposers.push(e.adapters.add("x",y=>Math.max(Math.min(Number(y),this.width()),0))),this._disposers.push(t.adapters.add("x",y=>Math.max(Math.min(Number(y),this.width()),0))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){const e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}updateGrips(){const e=this.startGrip,t=this.endGrip,r=this.get("orientation"),h=this.height(),y=this.width();"vertical"==r?(e.set("y",h*this.get("start",0)),t.set("y",h*this.get("end",1))):(e.set("x",y*this.get("start",0)),t.set("x",y*this.get("end",1)));const D=this.getPrivate("positionTextFunction"),F=Math.round(100*this.get("start",0)),G=Math.round(100*this.get("end",0));let W,ge;D?(W=D.call(this,this.get("start",0)),ge=D.call(this,this.get("end",0))):(W=F+"%",ge=G+"%"),e.set("ariaLabel",this._t("From %1",void 0,W)),e.set("ariaValueNow",""+F),e.set("ariaValueText",F+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,ge)),t.set("ariaValueNow",""+G),t.set("ariaValueText",G+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}_updateThumb(){const e=this.thumb,t=this.startGrip,r=this.endGrip,h=this.height(),y=this.width();let D=t.x(),F=r.x(),G=t.y(),W=r.y(),ge=0,ae=1;"vertical"==this.get("orientation")?un(G)&&un(W)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("height",W-G),e.set("y",G)),ge=G/h,ae=W/h):un(D)&&un(F)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("width",F-D),e.set("x",D)),ge=D/y,ae=F/y),this.getPrivate("isBusy")&&(this.get("start")!=ge||this.get("end")!=ae)&&(this.set("start",ge),this.set("end",ae));const be=this.getPrivate("positionTextFunction"),ce=Math.round(100*this.get("start",0)),pt=Math.round(100*this.get("end",0));let ke,ft;be?(ke=be.call(this,this.get("start",0)),ft=be.call(this,this.get("end",0))):(ke=ce+"%",ft=pt+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,ke,ft)),e.set("ariaValueNow",""+ce),e.set("ariaValueText",ce+"%")}_updateGripsByThumb(){const e=this.thumb,t=this.startGrip,r=this.endGrip;if("vertical"==this.get("orientation")){const h=e.height();t.set("y",e.y()),r.set("y",e.y()+h)}else{const h=e.width();t.set("x",e.x()),r.set("x",e.x()+h)}}}Object.defineProperty(d_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"}),Object.defineProperty(d_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([d_.className])});class T0 extends gf{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this._root.language,r=this.rule.bind(this);r("XYChart").setAll({colors:um.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),r("XYSeries").setAll({legendLabelText:"{name}"}),r("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:um.new(this._root,{saturation:0})});{const G=r("Graphics",["scrollbar","overlay"]);G.setAll({fillOpacity:.5}),ir(G,"fill",e,"background")}r("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),r("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4}),r("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),r("RoundedRectangle",["xy","scrollbar","chart","background","resize","button"]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),r("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0}),r("AxisRendererY",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),r("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:vi,minPosition:.01,maxPosition:.99,fontSize:"0.8em"}),r("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0}),r("AxisLabel",["x"]).setAll({centerY:0}),r("AxisLabel",["x","inside"]).setAll({centerY:vi}),r("AxisLabel",["x","inside","opposite"]).setAll({centerY:0}),r("AxisLabel",["x","opposite"]).setAll({centerY:vi}),r("AxisLabel",["y"]).setAll({centerX:vi}),r("AxisLabel",["y","inside"]).setAll({centerX:0}),r("AxisLabel",["y","inside","opposite"]).setAll({centerX:vi}),r("AxisLabel",["y","opposite"]).setAll({centerX:0}),r("AxisLabel",["minor"]).setAll({fontSize:"0.6em"}),r("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","x"]).setAll({opacity:.5}),r("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy",moveThreshold:1});{const G=r("Grid",["cursor","x"]);G.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:t.translate("Use left and right arrows to move selection")}),ir(G,"stroke",e,"alternativeBackground")}{const G=r("Grid",["cursor","y"]);G.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:t.translate("Use up and down arrows to move selection")}),ir(G,"stroke",e,"alternativeBackground")}{const G=r("Graphics",["cursor","selection"]);G.setAll({fillOpacity:.15}),ir(G,"fill",e,"alternativeBackground")}r("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),r("AxisLabel").setAll({location:.5,multiLocation:0,centerX:Er,centerY:Er,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),r("Container",["axis","header"]).setAll({layer:30}),r("Rectangle",["axis","header","background"]).setAll({crisp:!0});{const G=r("AxisRenderer");G.setAll({crisp:!0,strokeOpacity:0}),ir(G,"stroke",e,"grid")}r("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:vi}),r("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:vi});{const G=r("Rectangle",["axis","thumb"]);G.setAll({fillOpacity:0}),ir(G,"fill",e,"alternativeBackground"),G.states.create("hover",{fillOpacity:.1})}r("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"}),r("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"});{const G=r("Grid");G.setAll({location:0,strokeOpacity:.15,crisp:!0}),ir(G,"stroke",e,"grid")}{const G=r("Grid",["minor"]);G.setAll({location:0,strokeOpacity:.07,crisp:!0}),ir(G,"stroke",e,"grid")}r("Grid",["base"]).setAll({strokeOpacity:.3});{const G=r("Graphics",["axis","fill"]);G.setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05}),ir(G,"fill",e,"alternativeBackground")}r("Graphics",["axis","fill","range"]).setAll({isMeasured:!0}),r("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0}),r("Grid",["series","range"]).setAll({visible:!1}),r("AxisTick",["series","range"]).setAll({visible:!1}),r("AxisLabel",["series","range"]).setAll({visible:!1});{const G=r("AxisTick");G.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1}),ir(G,"stroke",e,"grid")}r("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:(G,W)=>{const ge=G.get("axisFill");ge&&(un(W)&&W%2!=0?ge.setPrivate("visible",!1):ge.setPrivate("visible",!0))}});const h=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}],y={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_hour"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month"),year:t.translate("_date_year")},D={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_day"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month")+" "+t.translate("_date_year"),year:t.translate("_date_year")},F={millisecond:t.translate("_date_millisecond_full"),second:t.translate("_date_second_full"),minute:t.translate("_date_minute_full"),hour:t.translate("_date_hour_full"),day:t.translate("_date_day_full"),week:t.translate("_date_week_full"),month:t.translate("_date_month_full"),year:t.translate("_date_year")};r("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:yi(h),dateFormats:gp(y),periodChangeDateFormats:gp(D)}),r("DateAxis").setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:yi(h),dateFormats:gp(y),periodChangeDateFormats:gp(D),tooltipDateFormats:F,groupIntervals:[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:G=>{const W=G.get("axisFill");if(W){const ge=G.component,ae=G.get("value"),be=G.get("endValue"),ce=ge.intervalDuration(),pt=ge.getPrivate("baseInterval"),ke=ge.getPrivate("gridInterval",pt);let ft=ge.getPrivate("min",0);if(ft=cm(new Date(ft),ke.timeUnit,ke.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),null!=ae&&null!=be){const xt=Math.round(Math.round((ae-ft)/ce))/2;xt==Math.round(xt)?W.setPrivate("visible",!0):W.setPrivate("visible",!1)}}}}),r("GaplessDateAxis").setAll({fillRule:G=>{const W=G.get("axisFill");if(W){const ge=G.get("index");let ae=!1;(!un(ge)||ge%2==0)&&(ae=!0),W.setPrivate("visible",ae)}}}),r("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,autoZoom:!0,fillRule:G=>{const W=G.get("axisFill");if(W){const ge=G.component,ae=G.get("value"),be=ge.getPrivate("step");un(ae)&&un(be)&&(tl(ae/be/2,5)==Math.round(ae/be/2)?W.setPrivate("visible",!1):W.setPrivate("visible",!0))}}}),r("DurationAxis").setAll({baseUnit:"second"}),r("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"}),r("BaseColumnSeries").setAll({adjustBulletPosition:!0}),r("ColumnSeries").setAll({clustered:!0}),r("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:Ha(70),height:Ha(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),r("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,isMeasured:!1}),r("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1}),r("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:(G,W)=>{const ge=W.parent;if(ge){const ae=ge.height(),be=ge.width();G.moveTo(0,ae/2),G.lineTo(be,ae/2)}}}),ir(r("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{}),"stroke",e,"disabled"),r("Graphics",["line","series","legend","marker","fill"]).setAll({draw:(G,W)=>{const ge=W.parent;if(ge){const ae=ge.height(),be=ge.width();G.moveTo(0,0),G.lineTo(be,0),G.lineTo(be,ae),G.lineTo(0,ae),G.lineTo(0,0)}}}),ir(r("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{}),"stroke",e,"disabled"),r("SmoothedXYLineSeries").setAll({tension:.5}),r("SmoothedXLineSeries").setAll({tension:.5}),r("SmoothedYLineSeries").setAll({tension:.5}),r("Candlestick").setAll({position:"absolute",isMeasured:!1,width:Ha(50),height:Ha(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("OHLC").setAll({width:Ha(80),height:Ha(80)}),r("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"});{const G=r("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{});ir(G,"fill",e,"positive"),ir(G,"stroke",e,"positive")}{const G=r("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{});ir(G,"fill",e,"negative"),ir(G,"stroke",e,"negative")}r("Rectangle",["column","autocolor","pro"]).states.create("riseFromOpen",{fillOpacity:0}),r("Rectangle",["column","autocolor","pro"]).states.create("dropFromOpen",{fillOpacity:1});{const G=r("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{});ir(G,"fill",e,"positive"),ir(G,"stroke",e,"positive")}{const G=r("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{});ir(G,"fill",e,"negative"),ir(G,"stroke",e,"negative")}r("RoundedRectangle",["rangegrip"]).setAll({strokeOpacity:0,fillOpacity:0,strokeWidth:1,width:12,height:12});{const G=r("Graphics",["rangegrip","button","icon"]);G.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:W=>{W.moveTo(0,.5),W.lineTo(0,12.5),W.moveTo(2,.5),W.lineTo(2,12.5),W.moveTo(4,.5),W.lineTo(4,12.5)}}),ir(G,"stroke",e,"secondaryButtonText")}r("Button",["rangegrip"]).setAll({draggable:!0,paddingTop:0,paddingBottom:0}),r("Button",["rangegrip","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize",centerX:Er}),r("Button",["rangegrip","horizontal"]).setAll({cursorOverStyle:"ew-resize",centerX:Er}),r("Button",["rangegrip","vertical","left"]).setAll({centerY:vi}),r("Button",["rangegrip","vertical","right"]).setAll({centerY:0}),r("Button",["rangegrip","horizontal","top"]).setAll({centerY:0}),r("Button",["rangegrip","horizontal","bottom"]).setAll({centerY:vi})}}class h_ extends Ap{constructor(){super(...arguments),Object.defineProperty(this,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Bu}),Object.defineProperty(this,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Bu}),Object.defineProperty(this,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(br.new(this._root,{width:vi,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(br.new(this._root,{width:vi,height:vi,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(br.new(this._root,{width:vi,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"leftAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(br.new(this._root,{height:vi,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(br.new(this._root,{width:vi,height:vi,maskContent:!1}))}),Object.defineProperty(this,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(br.new(this._root,{width:vi,height:vi}))}),Object.defineProperty(this,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(br.new(this._root,{width:vi,height:vi}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(br.new(this._root,{width:vi,height:vi,isMeasured:!1}))}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{width:vi,height:vi,isMeasured:!1})}),Object.defineProperty(this,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(br.new(this._root,{height:vi,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(br.new(this._root,{}))}),Object.defineProperty(this,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(gm.new(this._root,{themeTags:["zoom"],icon:cs.new(this._root,{themeTags:["button","icon"]})}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(T0.new(this._root)),super._afterNew(),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);const e=this._root;let t=this._root.verticalLayout;const r=this.zoomOutButton;r.events.on("click",()=>{this.zoomOut()}),r.hide(0),r.states.lookup("default").set("opacity",1),this.chartContainer.set("layout",t);const h=this.plotContainer;h.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),h.children.push(this.topGridContainer),h.children.push(this.bulletsContainer),h.set("interactive",!0),h.set("interactiveChildren",!1),h.set("background",dc.new(e,{themeTags:["xy","background"],fill:ti.fromHex(0),fillOpacity:0})),this._disposers.push(h.events.on("pointerdown",y=>{this._handlePlotDown(y)})),this._disposers.push(h.events.on("globalpointerup",y=>{this._handlePlotUp(y)})),this._disposers.push(h.events.on("globalpointermove",y=>{this._handlePlotMove(y)})),this._maskGrid(),this._setUpTouch()}_beforeChanged(){super._beforeChanged(),(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")))}_maskGrid(){this.gridContainer.set("maskContent",!0),this.topGridContainer.set("maskContent",!0)}_removeSeries(e){e._unstack(),e._posXDp&&e._posXDp.dispose(),e._posYDp&&e._posYDp.dispose(),e.set("baseAxis",void 0);const t=e.get("xAxis");t&&(Fn(t.series,e),t.markDirtyExtremes());const r=e.get("yAxis");r&&(Fn(r.series,e),r.markDirtyExtremes());const h=this.get("cursor");if(h){const y=h.get("snapToSeries");y&&Fn(y,e)}super._removeSeries(e)}handleWheel(e){const t=this.get("wheelX"),r=this.get("wheelY"),h=this.plotContainer,y=e.originalEvent;if(!Mc(y,this))return;y.preventDefault();const D=h.toLocal(e.point),F=this.get("wheelStep",.2),G=y.deltaY/100,W=y.deltaX/100,ge=this.get("wheelZoomPositionX"),ae=this.get("wheelZoomPositionY");("zoomX"===t||"zoomXY"===t)&&0!=W&&this.xAxes.each(be=>{if(be.get("zoomX")){let ce=be.get("start"),pt=be.get("end"),ke=be.fixPosition(D.x/h.width());null!=ge&&(ke=ge);let ft=ce-F*(pt-ce)*W*ke,xt=pt+F*(pt-ce)*W*(1-ke);1/(xt-ft)<be.getPrivate("maxZoomFactor",1/0)/be.get("minZoomCount",1)&&this._handleWheelAnimation(be.zoom(ft,xt))}}),("zoomX"===r||"zoomXY"===r)&&0!=G&&this.xAxes.each(be=>{if(be.get("zoomX")){let ce=be.get("start"),pt=be.get("end"),ke=be.fixPosition(D.x/h.width());null!=ge&&(ke=ge);let ft=ce-F*(pt-ce)*G*ke,xt=pt+F*(pt-ce)*G*(1-ke);1/(xt-ft)<be.getPrivate("maxZoomFactor",1/0)/be.get("minZoomCount",1)&&this._handleWheelAnimation(be.zoom(ft,xt))}}),("zoomY"===t||"zoomXY"===t)&&0!=W&&this.yAxes.each(be=>{if(be.get("zoomY")){let ce=be.get("start"),pt=be.get("end"),ke=be.fixPosition(D.y/h.height());null!=ae&&(ke=ae);let ft=ce-F*(pt-ce)*W*ke,xt=pt+F*(pt-ce)*W*(1-ke);1/(xt-ft)<be.getPrivate("maxZoomFactor",1/0)/be.get("minZoomCount",1)&&this._handleWheelAnimation(be.zoom(ft,xt))}}),("zoomY"===r||"zoomXY"===r)&&0!=G&&this.yAxes.each(be=>{if(be.get("zoomY")){let ce=be.get("start"),pt=be.get("end"),ke=be.fixPosition(D.y/h.height());null!=ae&&(ke=ae);let ft=ce-F*(pt-ce)*G*ke,xt=pt+F*(pt-ce)*G*(1-ke);1/(xt-ft)<be.getPrivate("maxZoomFactor",1/0)/be.get("minZoomCount",1)&&this._handleWheelAnimation(be.zoom(ft,xt))}}),("panX"===t||"panXY"===t)&&0!=W&&this.xAxes.each(be=>{if(be.get("panX")){let ce=be.get("start"),pt=be.get("end"),ke=this._getWheelSign(be)*F*(pt-ce)*W,ft=ce+ke,xt=pt+ke,Gt=this._fixWheel(ft,xt);ft=Gt[0],xt=Gt[1],this._handleWheelAnimation(be.zoom(ft,xt))}}),("panX"===r||"panXY"===r)&&0!=G&&this.xAxes.each(be=>{if(be.get("panX")){let ce=be.get("start"),pt=be.get("end"),ke=this._getWheelSign(be)*F*(pt-ce)*G,ft=ce+ke,xt=pt+ke,Gt=this._fixWheel(ft,xt);ft=Gt[0],xt=Gt[1],this._handleWheelAnimation(be.zoom(ft,xt))}}),("panY"===t||"panXY"===t)&&0!=W&&this.yAxes.each(be=>{if(be.get("panY")){let ce=be.get("start"),pt=be.get("end"),ke=this._getWheelSign(be)*F*(pt-ce)*W,ft=ce+ke,xt=pt+ke,Gt=this._fixWheel(ft,xt);ft=Gt[0],xt=Gt[1],this._handleWheelAnimation(be.zoom(ft,xt))}}),("panY"===r||"panXY"===r)&&0!=G&&this.yAxes.each(be=>{if(be.get("panY")){let ce=be.get("start"),pt=be.get("end"),ke=this._getWheelSign(be)*F*(pt-ce)*G,ft=ce-ke,xt=pt-ke,Gt=this._fixWheel(ft,xt);ft=Gt[0],xt=Gt[1],this._handleWheelAnimation(be.zoom(ft,xt))}})}_handleSetWheel(){const e=this.get("wheelX"),t=this.get("wheelY");"none"!==e||"none"!==t?(this._wheelDp=this.plotContainer.events.on("wheel",h=>{const y=h.originalEvent;("none"!==e&&0!=Math.abs(y.deltaX)||"none"!==t&&0!=Math.abs(y.deltaY))&&this.handleWheel(h)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(e){let t=1;return e.get("renderer").get("inversed")&&(t=-1),t}_fixWheel(e,t){const r=t-e;return e<0&&(t=(e=0)+r),t>1&&(e=(t=1)-r),[e,t]}_handlePlotDown(e){const t=e.originalEvent;if(2==t.button)return;const r=this.plotContainer;let h=r.toLocal(e.point);if((this.get("pinchZoomX")||this.get("pinchZoomY"))&&t.pointerId&&Aa(r._downPoints).length>0){const D=this.xAxes.getIndex(0),F=this.yAxes.getIndex(0);D&&(this._downStartX=D.get("start",0),this._downEndX=D.get("end",1)),F&&(this._downStartY=F.get("start",0),this._downEndY=F.get("end",1))}if((this.get("panX")||this.get("panY"))&&h.x>=0&&h.y>=0&&h.x<=r.width()&&h.y<=this.height()){this._downPoint={x:t.clientX,y:t.clientY};const y=this.get("panX"),D=this.get("panY");y&&this.xAxes.each(G=>{G._panStart=G.get("start"),G._panEnd=G.get("end")}),D&&this.yAxes.each(G=>{G._panStart=G.get("start"),G._panEnd=G.get("end")});const F="panstarted";this.events.isEnabled(F)&&this.events.dispatch(F,{type:F,target:this,originalEvent:e.originalEvent})}}_handleWheelAnimation(e){e?e.events.on("stopped",()=>{this._dispatchWheelAnimation()}):this._dispatchWheelAnimation()}_dispatchWheelAnimation(){const e="wheelended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}_handlePlotUp(e){const t=this._downPoint;if(t&&(this.get("panX")||this.get("panY"))){let r=this.plotContainer.toLocal(e.point);if(r.x==t.x&&r.y==t.y){const y="pancancelled";this.events.isEnabled(y)&&this.events.dispatch(y,{type:y,target:this,originalEvent:e.originalEvent})}const h="panended";this.events.isEnabled(h)&&this.events.dispatch(h,{type:h,target:this,originalEvent:e.originalEvent})}this._downPoint=void 0,this.xAxes.each(r=>{r._isPanning=!1}),this.yAxes.each(r=>{r._isPanning=!1})}_handlePlotMove(e){const t=this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){const y=e.originalEvent.pointerId;if(y&&(this._movePoints[y]=e.point,Aa(t._downPoints).length>1))return void this._handlePinch()}let r=this._downPoint;if(r){r=t.toLocal(this._root.documentPointToRoot(r));let h=t.toLocal(e.point);const y=this.get("panX"),D=this.get("panY");if(y){let F=this.get("scrollbarX");F&&F.events.disableType("rangechanged"),this.xAxes.each(G=>{if(G.get("panX")){G._isPanning=!0;let W=G._panStart,ge=G._panEnd,be=(ge-W)*(r.x-h.x)/t.width();G.get("renderer").get("inversed")&&(be*=-1);let ce=W+be,pt=ge+be;pt-ce<1+2*G.get("maxDeviation",1)&&(G.set("start",ce),G.set("end",pt))}}),F&&F.events.enableType("rangechanged")}if(D){let F=this.get("scrollbarY");F&&F.events.disableType("rangechanged"),this.yAxes.each(G=>{if(G.get("panY")){G._isPanning=!0;let W=G._panStart,ge=G._panEnd,be=(ge-W)*(r.y-h.y)/t.height();G.get("renderer").get("inversed")&&(be*=-1);let ce=W-be,pt=ge-be;pt-ce<1+2*G.get("maxDeviation",1)&&(G.set("start",ce),G.set("end",pt))}}),F&&F.events.enableType("rangechanged")}}}_handlePinch(){const e=this.plotContainer;let t=0,r=[],h=[];if(es(e._downPoints,(y,D)=>{r[t]=D;let F=this._movePoints[y];F&&(h[t]=F),t++}),r.length>1&&h.length>1){const y=e.width(),D=e.height();let F=r[0],G=r[1],W=h[0],ge=h[1];if(F&&G&&W&&ge){if(W=e.toLocal(W),ge=e.toLocal(ge),F=e.toLocal(F),G=e.toLocal(G),this.get("pinchZoomX")){const ae=this._downStartX,be=this._downEndX;if(null!=ae&&null!=be){F.x>G.x&&([F,G]=[G,F],[W,ge]=[ge,W]);let ce=ae+F.x/y*(be-ae),pt=ae+G.x/y*(be-ae),ke=ae+W.x/y*(be-ae),ft=ae+ge.x/y*(be-ae),Ht=Math.max(.001,pt-ce)/Math.max(.001,ft-ke),Ut=ae*Ht+ce-ke*Ht,Cn=be*Ht+pt-ft*Ht;this.xAxes.each(Jn=>{let fi=Jn.fixPosition(Ut),jn=Jn.fixPosition(Cn);Jn.zoom(fi,jn,0)})}}if(this.get("pinchZoomY")){const ae=this._downStartY,be=this._downEndY;if(null!=ae&&null!=be){F.y<G.y&&([F,G]=[G,F],[W,ge]=[ge,W]);let ce=ae+(1-F.y/D)*(be-ae),pt=ae+(1-G.y/D)*(be-ae),ke=ae+(1-W.y/D)*(be-ae),ft=ae+(1-ge.y/D)*(be-ae),Ht=Math.max(.001,pt-ce)/Math.max(.001,ft-ke),Ut=ae*Ht+ce-ke*Ht,Cn=be*Ht+pt-ft*Ht;this.yAxes.each(Jn=>{let fi=Jn.fixPosition(Ut),jn=Jn.fixPosition(Cn);Jn.zoom(fi,jn,0)})}}}}}_handleCursorPosition(){const e=this.get("cursor");if(e){const t=e.getPrivate("point");let r=e.get("snapToSeries");if(e._downPoint&&(r=void 0),r&&t){const h=e.get("snapToSeriesBy"),y=[];Oe(r,G=>{if(!G.isHidden()&&!G.isHiding())if("x!"!=h&&"y!"!=h){const W=G.startIndex(),ge=G.endIndex();for(let ae=W;ae<ge;ae++){const be=G.dataItems[ae];be&&!be.isHidden()&&y.push(be)}}else{const W=G.get("tooltipDataItem");W&&y.push(W)}});let F,D=1/0;if(Oe(y,G=>{const W=G.get("point");if(W){let ge=0;ge="x"==h||"x!"==h?Math.abs(t.x-W.x):"y"==h||"y!"==h?Math.abs(t.y-W.y):Math.hypot(t.x-W.x,t.y-W.y),ge<D&&(D=ge,F=G)}}),Oe(r,G=>{const W=G.get("tooltip");W&&W._setDataItem(void 0)}),F){let G=F.component;G.showDataItemTooltip(F);const W=F.get("point");W&&e.handleMove(G.toGlobal({x:W.x-G.x(),y:W.y-G.y()}),!0)}}}}_updateCursor(){let e=this.get("cursor");e&&e.updateCursor()}_addCursor(e){this.plotContainer.children.push(e)}_prepareChildren(){if(super._prepareChildren(),this.series.each(e=>{this._colorize(e)}),(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this.isDirty("cursor")){const e=this._prevSettings.cursor,t=this.get("cursor");t!==e&&(this._disposeProperty("cursor"),e&&e.dispose(),t&&(t._setChart(this),this._addCursor(t),this._pushPropertyDisposer("cursor",t.events.on("selectended",()=>{this._handleCursorSelectEnd()}))),this._prevSettings.cursor=t)}if(this.isDirty("scrollbarX")){const e=this._prevSettings.scrollbarX,t=this.get("scrollbarX");t!==e&&(this._disposeProperty("scrollbarX"),e&&e.dispose(),t&&(t.parent||this.topAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarX",t.events.on("rangechanged",r=>{this._handleScrollbar(this.xAxes,r.start,r.end,r.grip)})),t.setPrivate("positionTextFunction",r=>{const h=this.xAxes.getIndex(0);return h&&h.getTooltipText(r,!1)||""})),this._prevSettings.scrollbarX=t)}if(this.isDirty("scrollbarY")){const e=this._prevSettings.scrollbarY,t=this.get("scrollbarY");t!==e&&(this._disposeProperty("scrollbarY"),e&&e.dispose(),t&&(t.parent||this.rightAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarY",t.events.on("rangechanged",r=>{this._handleScrollbar(this.yAxes,r.start,r.end,r.grip)})),t.setPrivate("positionTextFunction",r=>{const h=this.yAxes.getIndex(0);return h&&h.getTooltipText(r,!1)||""})),this._prevSettings.scrollbarY=t)}this._handleZoomOut()}_processSeries(e){super._processSeries(e);const t=e.get("xAxis"),r=e.get("yAxis");Ai(t.series,e),Ai(r.series,e),e._posXDp=e.addDisposer(t.events.on("positionchanged",()=>{e._fixPosition()})),e._posXDp=e.addDisposer(r.events.on("positionchanged",()=>{e._fixPosition()})),e.get("baseAxis")||(r.isType("CategoryAxis")||r.isType("DateAxis")?e.set("baseAxis",r):e.set("baseAxis",t)),e.get("stacked")&&(e._markDirtyKey("stacked"),Oe(e.dataItems,h=>{h.set("stackToItemY",void 0),h.set("stackToItemX",void 0)})),e._markDirtyAxes(),r.markDirtyExtremes(),t.markDirtyExtremes(),this._colorize(e)}_colorize(e){const t=this.get("colors");if(t&&null==e.get("fill")){const r=t.next();e._setSoft("stroke",r),e._setSoft("fill",r)}}_handleCursorSelectEnd(){const e=this.get("cursor"),t=e.get("behavior"),r=e.getPrivate("downPositionX",0),h=e.getPrivate("downPositionY",0),y=Math.min(1,Math.max(0,e.getPrivate("positionX",.5))),D=Math.min(1,Math.max(0,e.getPrivate("positionY",.5)));this.xAxes.each(F=>{if("zoomX"===t||"zoomXY"===t){let G=F.toAxisPosition(r),W=F.toAxisPosition(y);F.zoom(G,W)}F.setPrivate("updateScrollbar",!0)}),this.yAxes.each(F=>{if("zoomY"===t||"zoomXY"===t){let G=F.toAxisPosition(h),W=F.toAxisPosition(D);F.zoom(G,W)}F.setPrivate("updateScrollbar",!0)})}_handleScrollbar(e,t,r,h){e.each(y=>{let D=y.fixPosition(t),F=y.fixPosition(r),G=y.zoom(D,F,void 0,h);const W="updateScrollbar";y.setPrivateRaw(W,!1),G?G.events.on("stopped",()=>{y.setPrivateRaw(W,!0)}):y.setPrivateRaw(W,!0)})}_processAxis(e,t){return e.events.onAll(r=>{if("clear"===r.type)Oe(r.oldValues,h=>{this._removeAxis(h)});else if("push"===r.type)t.children.push(r.newValue),r.newValue.processChart(this);else if("setIndex"===r.type)t.children.setIndex(r.index,r.newValue),r.newValue.processChart(this);else if("insertIndex"===r.type)t.children.insertIndex(r.index,r.newValue),r.newValue.processChart(this);else if("removeIndex"===r.type)this._removeAxis(r.oldValue);else{if("moveIndex"!==r.type)throw new Error("Unknown IListEvent type");t.children.moveValue(r.value,r.newIndex),r.value.processChart(this)}})}_removeAxis(e){if(!e.isDisposed()){const t=e.parent;t&&t.children.removeValue(e);const r=e.gridContainer,h=r.parent;h&&h.children.removeValue(r);const y=e.topGridContainer,D=y.parent;D&&D.children.removeValue(y)}}_updateChartLayout(){const e=this.leftAxesContainer.width(),t=this.rightAxesContainer.width(),r=this.bottomAxesContainer;r.set("paddingLeft",e),r.set("paddingRight",t);const h=this.topAxesContainer;h.set("paddingLeft",e),h.set("paddingRight",t)}processAxis(e){this.get("cursor")&&(this.addDisposer(e.on("start",()=>{this._updateCursor()})),this.addDisposer(e.on("end",()=>{this._updateCursor()})))}_handleAxisSelection(e,t){let r=e.fixPosition(e.get("start",0)),h=e.fixPosition(e.get("end",1));if(r>h&&([r,h]=[h,r]),-1!=this.xAxes.indexOf(e)){if(t||e.getPrivate("updateScrollbar")){let y=this.get("scrollbarX");y&&(!y.getPrivate("isBusy")||t)&&(y.setRaw("start",r),y.setRaw("end",h),y.updateGrips())}}else if(-1!=this.yAxes.indexOf(e)&&(t||e.getPrivate("updateScrollbar"))){let y=this.get("scrollbarY");y&&(!y.getPrivate("isBusy")||t)&&(y.setRaw("start",r),y.setRaw("end",h),y.updateGrips())}this._handleZoomOut()}_handleZoomOut(){let e=this.zoomOutButton;if(e&&e.parent){let t=!1;this.xAxes.each(r=>{(0!=r.get("start")||1!=r.get("end"))&&(t=!0)}),this.yAxes.each(r=>{(0!=r.get("start")||1!=r.get("end"))&&(t=!0)}),t?e.isHidden()&&e.show():e.hide()}}inPlot(e){const t=this.plotContainer,r=this.getPrivate("otherCharts",this._otherCharts),h=t.toGlobal(e);if(e.x>=-.5&&e.y>=-.5&&e.x<=t.width()+.5&&e.y<=t.height()+.5)return!0;if(r)for(let y=r.length-1;y>=0;y--){const D=r[y];if(D!=this){const F=D.plotContainer,G=this._root.rootPointToDocument(h),W=D._root.documentPointToRoot(G),ge=F.toLocal(W);if(ge.x>=-.1&&ge.y>=-.1&&ge.x<=F.width()+.1&&ge.y<=F.height()+.1)return!0}}return!1}arrangeTooltips(){const e=this.plotContainer,t=e.width(),r=e.height(),h=this.height();let y=e._display.toGlobal({x:0,y:0}),D=e._display.toGlobal({x:t,y:r});const F=[];let ce,pt,G=0,W=1/0,ge=this._movePoint,ae=this.get("maxTooltipDistance"),be=this.get("maxTooltipDistanceBy","xy");un(ae)&&this.series.each(ft=>{if(!ft.isHidden()){const xt=ft.get("tooltip");if(xt){let Gt=xt.get("pointTo");if(Gt){let Ht=Math.hypot(ge.x-Gt.x,ge.y-Gt.y);"x"==be?Ht=Math.abs(ge.x-Gt.x):"y"==be&&(Ht=Math.abs(ge.y-Gt.y)),Ht<W&&(W=Ht,ce=ft,pt=Gt)}}}});const ke=[];if(this.series.each(ft=>{const xt=ft.get("tooltip");if(xt&&!xt.get("forceHidden")){let Gt=!1,Ht=xt.get("pointTo");if(Ht){if(ae>=0){let Ut=xt.get("pointTo");if(Ut&&pt&&ft!=ce){let Cn=Math.hypot(pt.x-Ut.x,pt.y-Ut.y);"x"==be?Cn=Math.abs(pt.x-Ut.x):"y"==be&&(Cn=Math.abs(pt.y-Ut.y)),Cn>ae&&(Gt=!0)}}else-1==ae&&ft!=ce&&(Gt=!0);this.inPlot(this._tooltipToLocal(Ht))&&xt.dataItem?Gt||(G+=Ht.y):Gt=!0,Gt||ft.isHidden()||ft.isHiding()?xt.hide(0):(xt.show(),F.push(xt),ke.push(ft))}}}),this.setPrivate("tooltipSeries",ke),this.get("arrangeTooltips")){const ft=this._root.tooltipContainer;if(G/F.length>r/2+y.y){F.sort((Ut,Cn)=>Ey(Cn.get("pointTo").y,Ut.get("pointTo").y));let Ht=D.y;if(Oe(F,Ut=>{let Cn=Ut.height(),Jn=Ut.get("centerY");Jn instanceof Or&&(Cn*=Jn.value),Cn+=Ut.get("marginBottom",0),Ut.set("bounds",{left:y.x,top:y.y,right:D.x,bottom:Ht}),Ut.setPrivate("customData",{left:y.x,top:y.y,right:D.x,bottom:Ht}),Ht=Math.min(Ht-Cn,Ut._fy-Cn),Ut.parent==ft&&ft.children.moveValue(Ut,0)}),Ht<0){F.reverse();let Ut=Ht;Oe(F,Cn=>{let Jn=Cn.get("bounds");if(Jn){let fi=Jn.top-Ht,jn=Jn.bottom-Ht;fi<Ut&&(fi=Ut,jn=fi+Cn.height()),Cn.set("bounds",{left:Jn.left,top:fi,right:Jn.right,bottom:jn}),Ut=Jn.bottom-Ht+Cn.get("marginBottom",0)}})}}else{F.reverse(),F.sort((Ut,Cn)=>Ey(Ut.get("pointTo").y,Cn.get("pointTo").y));let Ht=0;if(Oe(F,Ut=>{let Cn=Ut.height(),Jn=Ut.get("centerY");Jn instanceof Or&&(Cn*=Jn.value),Cn+=Ut.get("marginBottom",0),Ut.set("bounds",{left:y.x,top:Ht,right:D.x,bottom:Math.max(y.y+h,Ht+Cn)}),Ut.parent==ft&&ft.children.moveValue(Ut,0),Ht=Math.max(Ht+Cn,Ut._fy+Cn)}),Ht>h){F.reverse();let Ut=h;Oe(F,Cn=>{let Jn=Cn.get("bounds");if(Jn){let fi=Jn.top-(h-Ht),jn=Jn.bottom-(h-Ht);jn>Ut&&(jn=Ut,fi=jn-Cn.height()),Cn.set("bounds",{left:Jn.left,top:fi,right:Jn.right,bottom:jn}),Ut=jn-Cn.height()-Cn.get("marginBottom",0)}})}}}}_tooltipToLocal(e){return this.plotContainer.toLocal(e)}zoomOut(){this.xAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)}),this.yAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)})}}Object.defineProperty(h_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"}),Object.defineProperty(h_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ap.classNames.concat([h_.className])});class Cg extends cs{_beforeChanged(){super._beforeChanged(),(this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}Object.defineProperty(Cg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"}),Object.defineProperty(Cg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([Cg.className])});class p_ extends br{constructor(){super(...arguments),Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Cg.new(this._root,{themeTags:["x"]}))}),Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Cg.new(this._root,{themeTags:["y"]}))}),Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(cs.new(this._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["xy","cursor"]),super._afterNew(),this.setAll({width:vi,height:vi,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout(()=>{this.setPrivate("visible",!0)},500)),this._disposers.push(this.lineX.events.on("positionchanged",()=>{this._handleXLine()})),this._disposers.push(this.lineY.events.on("positionchanged",()=>{this._handleYLine()})),this._disposers.push(this.lineX.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineX.events.on("blur",e=>this._handleLineBlur(e.target))),this._disposers.push(this.lineY.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineY.events.on("blur",e=>this._handleLineBlur(e.target))),Uu("keyboardevents")&&this._disposers.push(As(document,"keydown",e=>{this._handleLineMove(e.keyCode)}))}_setUpTouch(){const e=this.chart;e&&(e.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}_handleXLine(){let e=this.lineX.x(),t=!0;(e<0||e>this.width())&&(t=!1),this.lineX.setPrivate("visible",t)}_handleYLine(){let e=this.lineY.y(),t=!0;(e<0||e>this.height())&&(t=!1),this.lineY.setPrivate("visible",t)}_handleLineMove(e){let t="",r=0,h=.1;const y=this.chart;this._root.focused(this.lineX)?(y&&y.xAxes.length&&(h=y.xAxes.getIndex(0).getCellWidthPosition()),r=this.getPrivate("positionX",0),t="positionX",37==e?r-=h:39==e&&(r+=h)):this._root.focused(this.lineY)&&(y&&y.yAxes.length&&(h=y.yAxes.getIndex(0).getCellWidthPosition()),r=this.getPrivate("positionY",0),t="positionY",38==e?r-=h:40==e&&(r+=h)),r<0?r=0:r>1&&(r=1),""!=t&&this.set(t,r)}_handleLineFocus(e){this.setAll({positionX:this.getPrivate("positionX"),positionY:this.getPrivate("positionY"),alwaysShow:!0})}_handleLineBlur(e){this.setAll({positionX:void 0,positionY:void 0,alwaysShow:!1})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("xAxis")){this._tooltipX=!1;const e=this.get("xAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipX=!0,this._disposers.push(t.on("pointTo",()=>{this._updateXLine(t)})))}}if(this.isDirty("yAxis")){this._tooltipY=!1;const e=this.get("yAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipY=!0,this._disposers.push(t.on("pointTo",()=>{this._updateYLine(t)})))}}}_handleSyncWith(){const e=this.chart;if(e){const t=this.get("syncWith"),r=[];t&&Oe(t,h=>{const y=h.chart;y&&r.push(y)}),e._otherCharts=r}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){const e=this.get("positionX"),t=this.get("positionY");null==e&&null==t?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(e){let t=tl(this._display.toLocal(e.get("pointTo",{x:0,y:0})).x,2);this._toX!=t&&(this.lineX.animate({key:"x",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toX=t)}_updateYLine(e){let t=tl(this._display.toLocal(e.get("pointTo",{x:0,y:0})).y,2);this._toY!=t&&(this.lineY.animate({key:"y",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toY=t)}_drawLines(){this.lineX.set("draw",e=>{e.moveTo(0,0),e.lineTo(0,this.height())}),this.lineY.set("draw",e=>{e.moveTo(0,0),e.lineTo(this.width(),0)})}updateCursor(){this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0)))),this.handleMove()}_setChart(e){this.chart=e,this._handleSyncWith();const t=e.plotContainer;this.events.on("boundschanged",()=>{this._disposers.push(this.setTimeout(()=>{this.updateCursor()},50))}),Uu("touchevents")&&(this._disposers.push(t.events.on("click",h=>{Ph(h.originalEvent)&&this._handleMove(h)})),this._setUpTouch()),this._disposers.push(t.events.on("pointerdown",h=>{this._handleCursorDown(h)})),this._disposers.push(t.events.on("globalpointerup",h=>{this._handleCursorUp(h),!h.native&&!this.isHidden()&&this._handleMove(h)})),this._disposers.push(t.events.on("globalpointermove",h=>{!this.get("syncWith")&&0==Aa(t._downPoints).length&&!h.native&&this.isHidden()||this._handleMove(h)}));const r=this.parent;r&&r.children.moveValue(this.selection)}_inPlot(e){const t=this.chart;return!!t&&t.inPlot(e)}_handleCursorDown(e){if(2==e.originalEvent.button)return;let r=this._display.toLocal(e.point);const h=this.chart;if(this.selection.set("draw",()=>{}),h&&this._inPlot(r)){if(this._downPoint=r,"none"!=this.get("behavior")){this.selection.show();const F="selectstarted";this.events.isEnabled(F)&&this.events.dispatch(F,{type:F,target:this,originalEvent:e.originalEvent})}let y=this._getPosition(r).x,D=this._getPosition(r).y;this.setPrivate("downPositionX",y),this.setPrivate("downPositionY",D)}}_handleCursorUp(e){if(this._downPoint){const t=this.get("behavior","none");if("none"!=t){"z"===t.charAt(0)&&this.selection.hide();let h=this._display.toLocal(e.point);const y=this._downPoint,D=this.get("moveThreshold",1);if(h&&y){let F=!1;if(("zoomX"===t||"zoomXY"===t||"selectX"===t||"selectXY"===t)&&Math.abs(h.x-y.x)>D&&(F=!0),("zoomY"===t||"zoomXY"===t||"selectY"===t||"selectXY"===t)&&Math.abs(h.y-y.y)>D&&(F=!0),F){const G="selectended";this.events.isEnabled(G)&&this.events.dispatch(G,{type:G,target:this,originalEvent:e.originalEvent})}else{const G="selectcancelled";this.events.isEnabled(G)&&this.events.dispatch(G,{type:G,target:this,originalEvent:e.originalEvent})}}}}this._downPoint=void 0}_handleMove(e){if(this.getPrivate("visible")){const t=this.chart;if(t&&Aa(t.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);const r=e.point,h=this._lastPoint;if(Math.round(h.x)===Math.round(r.x)&&Math.round(h.y)===Math.round(r.y))return;this._lastPoint=r,this.setPrivate("lastPoint",r),this.handleMove({x:r.x,y:r.y},!1,e.originalEvent)}}_getPosition(e){return{x:e.x/this.width(),y:e.y/this.height()}}handleMove(e,t,r){e||(e=this._movePoint);const h=this.get("alwaysShow");if(!e)return void this.hide(0);this._movePoint=e;let y=this._display.toLocal(e),D=this.chart;if(D&&(this._inPlot(y)||this._downPoint)){D._movePoint=e,this.isHidden()&&(this.show(),"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",()=>{}));let F=y.x,G=y.y,W=this._getPosition(y);this.setPrivate("point",y);let ge=this.get("snapToSeries");this._downPoint&&(ge=void 0);let ae=this.get("positionX"),be=W.x;un(ae)&&(be=ae);let ce=this.get("positionY"),pt=W.y;un(ce)&&(pt=ce),this.setPrivate("positionX",be),this.setPrivate("positionY",pt);const ke=this._getPoint(be,pt);if(F=ke.x,G=ke.y,D.xAxes.each(ft=>{ft._handleCursorPosition(be,ge),h&&ft.handleCursorShow()}),D.yAxes.each(ft=>{ft._handleCursorPosition(pt,ge),h&&ft.handleCursorShow()}),!t){D._handleCursorPosition();const ft="cursormoved";this.events.isEnabled(ft)&&this.events.dispatch(ft,{type:ft,target:this,point:e,originalEvent:r})}this._updateLines(F,G),D.arrangeTooltips()}else if(!this._downPoint&&!h){this.hide(0);const F="cursorhidden";this.events.isEnabled(F)&&this.events.dispatch(F,{type:F,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(y)}_getPoint(e,t){return{x:this.width()*e,y:this.height()*t}}_updateLines(e,t){this._tooltipX||this.lineX.set("x",e),this._tooltipY||this.lineY.set("y",t),this._drawLines()}_updateSelection(e){const t=this.selection,r=this.get("behavior"),h=this.width(),y=this.height();e.x<0&&(e.x=0),e.x>h&&(e.x=h),e.y<0&&(e.y=0),e.y>y&&(e.y=y),t.set("draw",D=>{const F=this._downPoint;F&&("zoomXY"===r||"selectXY"===r?(D.moveTo(F.x,F.y),D.lineTo(F.x,e.y),D.lineTo(e.x,e.y),D.lineTo(e.x,F.y),D.lineTo(F.x,F.y)):"zoomX"===r||"selectX"===r?(D.moveTo(F.x,0),D.lineTo(F.x,y),D.lineTo(e.x,y),D.lineTo(e.x,0),D.lineTo(F.x,0)):("zoomY"===r||"selectY"===r)&&(D.moveTo(0,F.y),D.lineTo(h,F.y),D.lineTo(h,e.y),D.lineTo(0,e.y),D.lineTo(0,F.y)))})}_onHide(){if(this.isHidden()){let e=this.chart;e&&(e.xAxes.each(t=>{t.handleCursorHide()}),e.yAxes.each(t=>{t.handleCursorHide()}),e.series.each(t=>{t.handleCursorHide()}))}super._onHide()}_onShow(){if(!this.isHidden()){let e=this.chart;e&&(e.xAxes.each(t=>{t.handleCursorShow()}),e.yAxes.each(t=>{t.handleCursorShow()}))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}}Object.defineProperty(p_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(p_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:br.classNames.concat([p_.className])});class _m extends vf{constructor(){super(...arguments),Object.defineProperty(this,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"minorDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{width:vi,height:vi})}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:br.new(this._root,{width:vi,height:vi})}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{isMeasured:!1,width:vi,height:vi,position:"absolute"}))}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_eAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Dc}),Object.defineProperty(this,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{themeTags:["axis","header"],position:"absolute",background:dc.new(this._root,{themeTags:["header","background"],fill:this._root.interfaceColors.get("background")})}))}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),super._dispose()}_afterNew(){super._afterNew(),this.setPrivate("updateScrollbar",!0),this._disposers.push(this.axisRanges.events.onAll(t=>{if("clear"===t.type)Oe(t.oldValues,r=>{this.disposeDataItem(r)});else if("push"===t.type)this._processAxisRange(t.newValue,["range"]);else if("setIndex"===t.type)this._processAxisRange(t.newValue,["range"]);else if("insertIndex"===t.type)this._processAxisRange(t.newValue,["range"]);else if("removeIndex"===t.type)this.disposeDataItem(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(t.value,["range"])}}));const e=this.get("renderer");e&&(e.axis=this,e.processAxis()),this.children.push(e),this.ghostLabel=e.makeLabel(new Ip(this,void 0,{}),[]),this.ghostLabel.adapters.disable("text"),this.ghostLabel.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1}),this.ghostLabel.events.disable()}_updateFinals(e,t){}zoom(e,t,r,h){if(this._updateFinals(e,t),this.get("start")!==e||this.get("end")!=t){let y=this._sAnimation,D=this._eAnimation,F=this.get("maxDeviation",.5)*Math.min(1,t-e);e<-F&&(e=-F),t>1+F&&(t=1+F),e>t&&([e,t]=[t,e]),un(r)||(r=this.get("interpolationDuration",0)),h||(h="end");let G=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100)),W=G;1===t&&0!==e&&(h=e<this.get("start")?"start":"end"),0===e&&1!==t&&(h=t>this.get("end")?"end":"start");let ge=this.get("minZoomCount"),ae=this.get("maxZoomCount");un(ge)&&(G=W/ge);let be=1;if(un(ae)&&(be=W/ae),"start"===h?(ae>0&&1/(t-e)<be&&(t=e+1/be),1/(t-e)>G&&(t=e+1/G),t>1&&t-e<1/G&&(e=t-1/G)):(ae>0&&1/(t-e)<be&&(e=t-1/be),1/(t-e)>G&&(e=t-1/G),e<0&&t-e<1/G&&(t=e+1/G)),1/(t-e)>G&&(t=e+1/G),1/(t-e)>G&&(e=t-1/G),null!=ae&&null!=ge&&e==this.get("start")&&t==this.get("end")){const ce=this.chart;ce&&ce._handleAxisSelection(this,!0)}if((y&&y.playing&&y.to==e||this.get("start")==e)&&(D&&D.playing&&D.to==t||this.get("end")==t))return;if(r>0){let pt,ke,ce=this.get("interpolationEasing");if(this.get("start")!=e&&(pt=this.animate({key:"start",to:e,duration:r,easing:ce})),this.get("end")!=t&&(ke=this.animate({key:"end",to:t,duration:r,easing:ce})),this._sAnimation=pt,this._eAnimation=ke,pt)return pt;if(ke)return ke}else this.set("start",e),this.set("end",t),this._root.events.once("frameended",()=>{this._markDirtyKey("start"),this._root._markDirty()})}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(e,t){e.setRaw("isRange",!0),this._createAssets(e,t),this._rangesDirty=!0,this._prepareDataItem(e);const r=e.get("above"),h=this.topGridContainer,y=e.get("grid");r&&y&&h.children.moveValue(y);const D=e.get("axisFill");r&&D&&h.children.moveValue(D)}_prepareDataItem(e,t){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets={},this.axisRanges.each(e=>{this._prepareDataItem(e)}),Oe(this._seriesAxisRanges,e=>{this._prepareDataItem(e)})}_prepareChildren(){if(super._prepareChildren(),this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1),this.isDirty("start")||this.isDirty("end")){const t=this.chart;t&&t._updateCursor();let r=this.get("start",0),h=this.get("end",1),y=this.get("maxDeviation",.5)*Math.min(1,h-r);if(r<-y){let D=r+y;r=-y,this.setRaw("start",r),this.isDirty("end")&&this.setRaw("end",h-D)}if(h>1+y){let D=h-1-y;h=1+y,this.setRaw("end",h),this.isDirty("start")&&this.setRaw("start",r-D)}}const e=this.get("renderer");if(e._start=this.get("start"),e._end=this.get("end"),e._inversed=e.get("inversed",!1),e._axisLength=e.axisLength()/(e._end-e._start),e._updateLC(),this.isDirty("tooltip")){const t=this.get("tooltip");if(t){const r=e.get("themeTags");t.addTag("axis"),t.addTag(this.className.toLowerCase()),t._applyThemes(),r&&(t.set("themeTags",vo(t.get("themeTags"),r)),t.label._applyThemes())}}}_updateTooltipBounds(){const e=this.get("tooltip");e&&this.get("renderer").updateTooltipBounds(e)}_updateBounds(){super._updateBounds(),this._updateTooltipBounds()}processChart(e){this.chart=e,this.get("renderer").chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on("start",()=>{e._handleAxisSelection(this)}),this.on("end",()=>{e._handleAxisSelection(this)}),e.plotContainer.onPrivate("width",()=>{this.markDirtySize()}),e.plotContainer.onPrivate("height",()=>{this.markDirtySize()}),e.processAxis(this)}hideDataItem(e){return this._toggleFHDataItem(e,!0),super.hideDataItem(e)}showDataItem(e){return this._toggleFHDataItem(e,!1),super.showDataItem(e)}_toggleFHDataItem(e,t){const r="forceHidden",h=e.get("label");h&&h.set(r,t);const y=e.get("grid");y&&y.set(r,t);const D=e.get("tick");D&&D.set(r,t);const F=e.get("axisFill");F&&F.set(r,t);const G=e.get("bullet");if(G){const W=G.get("sprite");W&&W.set(r,t)}}_toggleDataItem(e,t){const r=e.get("label"),h="visible";r&&r.setPrivate(h,t);const y=e.get("grid");y&&y.setPrivate(h,t);const D=e.get("tick");D&&D.setPrivate(h,t);const F=e.get("axisFill");F&&F.setPrivate(h,t);const G=e.get("bullet");if(G){const W=G.get("sprite");W&&W.setPrivate(h,t)}}_createAssets(e,t,r){var h,y,D;const F=this.get("renderer");let G="minor";const W=e.get("label");if(W){let be=W.get("themeTags"),ce=!1;r?-1==be?.indexOf(G)&&(ce=!0):-1!=be?.indexOf(G)&&(ce=!0),ce&&(null===(h=W.parent)||void 0===h||h.children.removeValue(W),F.makeLabel(e,t),W.dispose(),F.labels.removeValue(W))}else F.makeLabel(e,t);const ge=e.get("grid");if(ge){let be=ge.get("themeTags"),ce=!1;r?-1==be?.indexOf(G)&&(ce=!0):-1!=be?.indexOf(G)&&(ce=!0),ce&&(null===(y=ge.parent)||void 0===y||y.children.removeValue(ge),F.makeGrid(e,t),ge.dispose(),F.grid.removeValue(ge))}else F.makeGrid(e,t);const ae=e.get("tick");if(ae){let be=!1,ce=ae.get("themeTags");r?-1==ce?.indexOf(G)&&(be=!0):-1!=ce?.indexOf(G)&&(be=!0),be&&(null===(D=ae.parent)||void 0===D||D.children.removeValue(ae),F.makeTick(e,t),ae.dispose(),F.ticks.removeValue(ae))}else F.makeTick(e,t);!r&&!e.get("axisFill")&&F.makeAxisFill(e,t),this._processBullet(e)}_processBullet(e){let t=e.get("bullet"),r=this.get("bullet");if(!t&&r&&!e.get("isRange")&&(t=r(this._root,this,e)),t){t.axis=this;const h=t.get("sprite");h&&(h._setDataItem(e),e.setRaw("bullet",t),h.parent||this.bulletsContainer.children.push(h))}}_afterChanged(){super._afterChanged();const e=this.chart;e&&(e._updateChartLayout(),e.axisHeadersContainer.markDirtySize()),this.get("renderer")._updatePositions()}disposeDataItem(e){super.disposeDataItem(e);const t=this.get("renderer"),r=e.get("label");r&&(t.labels.removeValue(r),r.dispose());const h=e.get("tick");h&&(t.ticks.removeValue(h),h.dispose());const y=e.get("grid");y&&(t.grid.removeValue(y),y.dispose());const D=e.get("axisFill");D&&(t.axisFills.removeValue(D),D.dispose());const F=e.get("bullet");F&&F.dispose()}_updateGhost(){this.setPrivate("cellWidth",this.getCellWidthPosition()*this.get("renderer").axisLength());const e=this.ghostLabel;if(!e.isHidden()){const h=e.localBounds(),y=Math.ceil(h.right-h.left);let D=e.get("text");Oe(this.dataItems,F=>{const G=F.get("label");if(G&&!G.isHidden()){const W=G.localBounds();Math.ceil(W.right-W.left)>y&&(D=G.text._getText())}}),e.set("text",D)}let t=this.get("start",0),r=this.get("end",1);this.get("renderer").updateLabel(e,t+.5*(r-t))}_handleCursorPosition(e,t){e=this.get("renderer").toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=t,this.updateTooltip()}updateTooltip(){const e=this._snapToSeries;let t=this._cursorPosition;const r=this.get("tooltip"),h=this.get("renderer");un(t)&&(Oe(this.series,y=>{if(y.get("baseAxis")===this){const D=this.getSeriesItem(y,t,this.get("tooltipLocation"));y.setRaw("tooltipDataItem",D),e&&-1!=e.indexOf(y)?(y.updateLegendMarker(D),y.updateLegendValue(D)):y.showDataItemTooltip(D)}}),r&&(h.updateTooltipBounds(r),this.get("snapTooltip")&&(t=this.roundAxisPosition(t,this.get("tooltipLocation",.5))),ro(t)?r.hide(0):(this.setPrivateRaw("tooltipPosition",t),this._updateTooltipText(r,t),h.positionTooltip(r,t),t<this.get("start")||t>this.get("end")?r.hide(0):r.show(0))))}_updateTooltipText(e,t){e.label.set("text",this.getTooltipText(t))}roundAxisPosition(e,t){return e}handleCursorShow(){let e=this.get("tooltip");e&&e.show()}handleCursorHide(){let e=this.get("tooltip");e&&e.hide()}processSeriesDataItem(e,t){}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._rangesDirty=!1}coordinateToPosition(e){const t=this.get("renderer");return t.toAxisPosition(e/t.axisLength())}toAxisPosition(e){return this.get("renderer").toAxisPosition(e)}toGlobalPosition(e){return this.get("renderer").toGlobalPosition(e)}fixPosition(e){return this.get("renderer").fixPosition(e)}shouldGap(e,t,r,h){return!1}createAxisRange(e){return this.axisRanges.push(e)}_groupSeriesData(e){}getCellWidthPosition(){return.05}}Object.defineProperty(_m,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"}),Object.defineProperty(_m,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:vf.classNames.concat([_m.className])});class Uh extends _m{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["axis"]),this.fields.push("category"),this.setPrivateRaw("name","category"),this.addTag("category"),super._afterNew()}_prepareChildren(){super._prepareChildren();const e=this.dataItems.length;let t=0;this._valuesDirty&&(this._itemMap={},Oe(this.dataItems,r=>{r.setRaw("index",t),this._itemMap[r.get("category")]=r,t++}),this.setPrivateRaw("maxZoomFactor",e)),this.setPrivateRaw("startIndex",Math.max(Math.round(this.get("start",0)*e),0)),this.setPrivateRaw("endIndex",Math.min(Math.round(this.get("end",1)*e),e)),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}_handleRangeChange(){Oe(this.series,e=>{let t=this.dataItems[this.startIndex()].get("category"),r=this.dataItems[this.endIndex()-1].get("category"),h=e.get("baseAxis"),y=e.get("xAxis"),D=e.get("yAxis");if(y instanceof Uh&&D instanceof Uh)e._markDirtyAxes();else if(h===this){let F,G,W=D;if(y===h?(e.get("categoryXField")&&(F="categoryX"),e.get("openCategoryXField")&&(G="openCategoryX")):D===h&&(e.get("categoryYField")&&(F="categoryY"),e.get("openCategoryYField")&&(G="openCategoryY"),W=y),"ValueAxis"==W.className&&(F||G)){let ge,ae;for(let ke=0,ft=e.dataItems.length;ke<ft;ke++){let xt=e.dataItems[ke];if(F&&xt.get(F)===t){ge=xt;break}if(G&&xt.get(G)===t){ge=xt;break}}for(let ke=e.dataItems.length-1;ke>=0;ke--){let ft=e.dataItems[ke];if(F&&ft.get(F)===r){ae=ft;break}if(G&&ft.get(G)===r){ae=ft;break}}let be=0,ce=e.dataItems.length;ge&&(be=e.dataItems.indexOf(ge)),ae&&(ce=e.dataItems.indexOf(ae)+1),e.setPrivate("startIndex",be),e.setPrivate("endIndex",ce);let pt=!1;for(let ke=be;ke<ce;ke++){const ft=e.dataItems[ke];if(Oe(e.__valueXShowFields,xt=>{null!=ft.get(xt)&&(pt=!0)}),Oe(e.__valueYShowFields,xt=>{null!=ft.get(xt)&&(pt=!0)}),pt)break}e.setPrivate("outOfSelection",!pt)}e._markDirtyAxes()}})}_prepareAxisItems(){var e;const t=this.get("renderer"),r=this.dataItems.length;let h=this.startIndex();h>0&&h--;let y=this.endIndex();y<r&&y++;const D=t.get("minorLabelsEnabled"),F=t.get("minorGridEnabled",D);let G=t.axisLength()/Math.max(t.get("minGridDistance"),1),W=Math.max(1,Math.min(r,Math.ceil((y-h)/G)));h=Math.floor(h/W)*W,this._frequency=W;for(let ae=0;ae<r;ae++)this._toggleDataItem(this.dataItems[ae],!1);let ge=this.dataItems[h].get("index",0);for(let ae=h;ae<y;ae+=W){let be=this.dataItems[ae];this._createAssets(be,[]),this._toggleDataItem(be,!0);let ce=W;F&&(ce=1),this._prepareDataItem(be,ge,ce),ge++}if(t.get("minorGridEnabled"))for(let ae=h;ae<y;ae++){let be=this.dataItems[ae];ae%W!=0&&(this._createAssets(be,["minor"],!0),this._toggleDataItem(be,!0),this._prepareDataItem(be,0,1),D||null===(e=be.get("label"))||void 0===e||e.setPrivate("visible",!1))}this._updateGhost()}_prepareDataItem(e,t,r){let h=this.get("renderer"),y=e.get("categoryLocation",0),D=e.get("endCategoryLocation",1),F=e.get("index");un(F)||(F=this.categoryToIndex(e.get("category")));let ge,G=this.indexToPosition(F,y),W=e.get("endCategory");W?(ge=this.categoryToIndex(W),un(ge)||(ge=F)):ge=F;let be,ce,ae=this.indexToPosition(ge,D);be=e.get("isRange")?ge:F+this._frequency-1,ce=this.indexToPosition(be,D),h.updateLabel(e.get("label"),G,ae,r),h.updateGrid(e.get("grid"),G,ae),h.updateTick(e.get("tick"),G,ae,r),h.updateFill(e.get("axisFill"),G,ce),this._processBullet(e),h.updateBullet(e.get("bullet"),G,ae);const pt=this.get("fillRule");pt&&pt(e,t)}startIndex(){let e=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),e-1)}endIndex(){let e=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",e),e))}baseValue(){}basePosition(){return 0}getX(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}getY(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}getDataItemPositionX(e,t,r,h){const y=e.get(t),D=this._itemMap[y];return D?this.indexToPosition(D.get("index",0),r):NaN}getDataItemCoordinateX(e,t,r,h){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,r,h))}getDataItemPositionY(e,t,r,h){const y=e.get(t),D=this._itemMap[y];return D?this.indexToPosition(D.get("index",0),r):NaN}getDataItemCoordinateY(e,t,r,h){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,r,h))}indexToPosition(e,t){un(t)||(t=.5);let r=this.dataItems.length,h=this.get("startLocation",0);r-=h,r-=1-this.get("endLocation",1);let D=(e+t-h)/r,F=this.dataItems[e];return F&&(D+=F.get("deltaPosition",0)),D}categoryToIndex(e){let t=this._itemMap[e];return t?t.get("index"):NaN}dataItemToPosition(e){return this.indexToPosition(e.get("index"))}roundAxisPosition(e,t){return this.indexToPosition(this.axisPositionToIndex(e+=(.5-t)/this.dataItems.length),t)}axisPositionToIndex(e){let t=this.dataItems.length;return Rl(Math.floor(e*t),0,t-1)}getTooltipText(e,t){const r=this.dataItems[this.axisPositionToIndex(e)];if(r){const h=r.get("label");if(h)return sm(h,this.get("tooltipText",""))}}_updateTooltipText(e,t){e._setDataItem(this.dataItems[this.axisPositionToIndex(t)]),e.label.text.markDirtyText()}getSeriesItem(e,t){if(this.dataItems.length>0){let r=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),h=this.axisPositionToIndex(t),y=e.dataItems[h],D=this.dataItems[h],F=D.get("category");if(y&&D&&y.get(r)===F)return y;for(let G=0,W=e.dataItems.length;G<W;G++){let ge=e.dataItems[G];if(ge.get(r)===F)return ge}}}zoomToIndexes(e,t,r){let h=this.dataItems.length;this.zoom(e/h,t/h,r)}zoomToCategories(e,t,r){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(t)+1,r)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get("end",1)-this.get("start",0))}}Object.defineProperty(Uh,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"}),Object.defineProperty(Uh,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_m.classNames.concat([Uh.className])});class Df extends Cf{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(Df,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"}),Object.defineProperty(Df,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Cf.classNames.concat([Df.className])});class f_ extends hc{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(f_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"}),Object.defineProperty(f_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hc.classNames.concat([f_.className])});class Mf extends cs{constructor(){super(...arguments),Object.defineProperty(this,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_thumbDownPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>Df._new(this._root,{themeTags:vo(this.ticks.template.get("themeTags",[]),this.get("themeTags",[]))},[this.ticks.template]))}),Object.defineProperty(this,"grid",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>Cg._new(this._root,{themeTags:vo(this.grid.template.get("themeTags",[]),this.get("themeTags",[]))},[this.grid.template]))}),Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>cs._new(this._root,{themeTags:vo(this.axisFills.template.get("themeTags",["axis","fill"]),this.get("themeTags",[]))},[this.axisFills.template]))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>f_._new(this._root,{themeTags:vo(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template]))}),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeTick(e,t){const r=this.ticks.make();return r._setDataItem(e),e.setRaw("tick",r),r.set("themeTags",vo(r.get("themeTags"),t)),this.axis.labelsContainer.children.push(r),this.ticks.push(r),r}makeGrid(e,t){const r=this.grid.make();return r._setDataItem(e),e.setRaw("grid",r),r.set("themeTags",vo(r.get("themeTags"),t)),this.axis.gridContainer.children.push(r),this.grid.push(r),r}makeAxisFill(e,t){const r=this.axisFills.make();return r._setDataItem(e),r.set("themeTags",vo(r.get("themeTags"),t)),this.axis.gridContainer.children.push(r),e.setRaw("axisFill",r),this.axisFills.push(r),r}makeLabel(e,t){const r=this.labels.make();return r.set("themeTags",vo(r.get("themeTags"),t)),this.axis.labelsContainer.children.moveValue(r,0),r._setDataItem(e),e.setRaw("label",r),this.labels.push(r),r}axisLength(){return 0}gridCount(){return this.axisLength()/this.get("minGridDistance",50)}_updatePositions(){}_afterNew(){super._afterNew(),this.set("isMeasured",!1);const e=this.thumb;e&&(this._disposers.push(e.events.on("pointerdown",t=>{this._handleThumbDown(t)})),this._disposers.push(e.events.on("globalpointerup",t=>{this._handleThumbUp(t)})),this._disposers.push(e.events.on("globalpointermove",t=>{this._handleThumbMove(t)})))}_beforeChanged(){super._beforeChanged(),this.isDirty("minGridDistance")&&this.root.events.once("frameended",()=>{this.axis.markDirtySize()})}_changed(){if(super._changed(),this.isDirty("pan")){const e=this.thumb;if(e){const t=this.axis.labelsContainer,r=this.get("pan");"zoom"==r?t.children.push(e):"none"==r&&t.children.removeValue(e)}}}_handleThumbDown(e){this._thumbDownPoint=this.toLocal(e.point);const t=this.axis;this._downStart=t.get("start"),this._downEnd=t.get("end")}_handleThumbUp(e){this._thumbDownPoint=void 0}_handleThumbMove(e){const t=this._thumbDownPoint;if(t){const r=this.toLocal(e.point),h=this._downStart,y=this._downEnd,D=this._getPan(r,t)*Math.min(1,y-h)/2;this.axis.zoom(h-D,y+D,0)}}_getPan(e,t){return 0}positionToCoordinate(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}updateTooltipBounds(e){}_updateSize(){this.markDirty(),this._clear=!0}toAxisPosition(e){const t=this._start||0,r=this._end||1;return e*=r-t,this.get("inversed")?r-e:t+e}toGlobalPosition(e){const t=this._start||0,r=this._end||1;return this.get("inversed")?e=r-e:e-=t,e/(r-t)}fixPosition(e){return this.get("inversed")?1-e:e}_updateLC(){}toggleVisibility(e,t,r,h){let y=this.axis;const D=y.get("start",0),F=y.get("end",1);e.setPrivate("visible",!(t<D+(F-D)*(r-1e-4)||t>D+(F-D)*(h+1e-4)))}_positionTooltip(e,t){const r=this.chart;r&&(r.inPlot(t)?e.set("pointTo",this._display.toGlobal(t)):e.hide())}processAxis(){}}Object.defineProperty(Mf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"}),Object.defineProperty(Mf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:cs.classNames.concat([Mf.className])});class ym extends Mf{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:dc.new(this._root,{width:vi,isMeasured:!1,themeTags:["axis","x","thumb"]})})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["renderer","x"]),super._afterNew(),this.setPrivateRaw("letter","X");const e=this.grid.template;e.set("height",vi),e.set("width",0),e.set("draw",(t,r)=>{t.moveTo(0,0),t.lineTo(0,r.height())}),this.set("draw",(t,r)=>{t.moveTo(0,0),t.lineTo(r.width(),0)})}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("x",-1e3);const t="opposite",r="inside";if(this.isDirty(t)||this.isDirty(r)){const h=this.chart,y=e.children;if(this.get(r)?e.addTag(r):e.removeTag(r),h){if(this.get(t)){const D=h.topAxesContainer.children;-1==D.indexOf(e)&&D.insertIndex(0,e),e.addTag(t),y.moveValue(this)}else{const D=h.bottomAxesContainer.children;-1==D.indexOf(e)&&D.moveValue(e),e.removeTag(t),y.moveValue(this,0)}e.ghostLabel._applyThemes(),this.labels.each(D=>{D._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}this.thumb.setPrivate("height",e.labelsContainer.height())}_getPan(e,t){return(t.x-e.x)/this.width()}toAxisPosition(e){const t=this._start||0,r=this._end||1;return e=(e-=this._ls)*(r-t)/this._lc,this.get("inversed")?r-e:t+e}toGlobalPosition(e){const t=this._start||0,r=this._end||1;return this.get("inversed")?e=r-e:e-=t,(e=e/(r-t)*this._lc)+this._ls}_updateLC(){const e=this.axis,t=e.parent;if(t){const r=t.innerWidth();this._lc=this.axisLength()/r,this._ls=(e.x()-t.get("paddingLeft",0))/r}}_updatePositions(){const e=this.axis,t=e.x()-va(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0);e.gridContainer.set("x",t),e.topGridContainer.set("x",t),e.bulletsContainer.set("y",this.y());const r=e.chart;if(r){const h=r.plotContainer,y=e.axisHeader;let D=e.get("marginLeft",0),F=e.x()-D;const G=e.parent;G&&(F-=G.get("paddingLeft",0)),y.children.length>0?(D=e.axisHeader.width(),e.set("marginLeft",D+1)):y.set("width",D),y.setAll({x:F,y:-1,height:h.height()+2})}}processAxis(){super.processAxis();const e=this.axis;e.set("width",vi);const t=this._root.verticalLayout;e.set("layout",t),e.labelsContainer.set("width",vi),e.axisHeader.setAll({layout:t})}axisLength(){return this.axis.width()}positionToPoint(e){return{x:this.positionToCoordinate(e),y:0}}updateTick(e,t,r,h){if(e){un(t)||(t=0);let y=.5;y=un(h)&&h>1?e.get("multiLocation",y):e.get("location",y),un(r)&&r!=t&&(t+=(r-t)*y),e.set("x",this.positionToCoordinate(t));let D=e.get("length",0);const F=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("y",vi),F||(D*=-1)):(e.set("y",0),F&&(D*=-1)),e.set("draw",G=>{G.moveTo(0,0),G.lineTo(0,D)}),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateLabel(e,t,r,h){if(e){let y=.5;y=un(h)&&h>1?e.get("multiLocation",y):e.get("location",y),un(t)||(t=0);const D=e.get("inside",this.get("inside",!1));this.get("opposite")?D?(e.set("position","absolute"),e.set("y",0)):(e.set("position","relative"),e.set("y",vi)):D?(e.set("y",0),e.set("position","absolute")):(e.set("y",void 0),e.set("position","relative")),un(r)&&r!=t&&(t+=(r-t)*y),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,r){if(e){un(t)||(t=0);let h=e.get("location",.5);un(r)&&r!=t&&(t+=(r-t)*h),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateBullet(e,t,r){if(e){const h=e.get("sprite");if(h){un(t)||(t=0);let y=e.get("location",.5);un(r)&&r!=t&&(t+=(r-t)*y);let D=this.axis.roundAxisPosition(t,y),F=this.axis._bullets[D],G=-1;if(this.get("opposite")&&(G=1),e.get("stacked"))if(F){let W=F.get("sprite");W&&h.set("y",W.y()+W.height()*G)}else h.set("y",0);this.axis._bullets[D]=e,h.set("x",this.positionToCoordinate(t)),this.toggleVisibility(h,t,0,1)}}}updateFill(e,t,r){if(e){un(t)||(t=0),un(r)||(r=1);let h=this.positionToCoordinate(t),y=this.positionToCoordinate(r);this.fillDrawMethod(e,h,y)}}fillDrawMethod(e,t,r){e.set("draw",h=>{const y=this.axis.gridContainer.height(),D=this.width();r<t&&([r,t]=[t,r]),!(t>D||r<0)&&(h.moveTo(t,0),h.lineTo(r,0),h.lineTo(r,y),h.lineTo(t,y),h.lineTo(t,0))})}positionTooltip(e,t){this._positionTooltip(e,{x:this.positionToCoordinate(t),y:0})}updateTooltipBounds(e){const t=this.get("inside"),r=1e5;let h=this._display.toGlobal({x:0,y:0}),y=h.x,D=0,F=this.axisLength(),G=r,W="up";this.get("opposite")?t?(W="up",D=h.y,G=r):(W="down",D=h.y-r,G=r):t?(W="down",D=h.y-r,G=r):(W="up",D=h.y,G=r);const ge={left:y,right:y+F,top:D,bottom:D+G};ng(ge,e.get("bounds"))||(e.set("bounds",ge),e.set("pointerOrientation",W))}}Object.defineProperty(ym,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"}),Object.defineProperty(ym,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mf.classNames.concat([ym.className])});class qc extends _m{constructor(){super(...arguments),Object.defineProperty(this,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0,this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0,this.markDirty()}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["axis"]),this.setPrivateRaw("name","value"),this.addTag("value"),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();let r=this.get("syncWithAxis");r&&(this._syncDp=new yo([r.onPrivate("selectionMinFinal",()=>{this._dirtySelectionExtremes=!0}),r.onPrivate("selectionMaxFinal",()=>{this._dirtySelectionExtremes=!0})]))}let e=!1;(this.isDirty("min")||this.isDirty("max")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))&&(e=!0,this.ghostLabel.set("text","")),(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||e||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection"))&&(this._getMinMax(),this._dirtyExtremes=!1),this._dirtySelectionExtremes&&!this._isPanning&&this.get("autoZoom",!0)&&(this._getSelectionMinMax(),this._dirtySelectionExtremes=!1),this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("logarithmic"))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}_groupData(){}_formatText(e){const t=this.get("numberFormat"),r=this.getNumberFormatter();let h="";return h=t?r.format(e,t):r.format(e,void 0,this.getPrivate("stepDecimalPlaces")),h}_prepareAxisItems(){const e=this.getPrivate("min"),t=this.getPrivate("max");if(un(e)&&un(t)){const r=this.get("logarithmic"),h=this.getPrivate("step"),y=this.getPrivate("selectionMin"),D=this.getPrivate("selectionMax")+h;let F=y-h,G=1,W=e;if(r){if(F=this._minLogAdjusted,F<y)for(;F<y;)F+=h;W=F,W<=0&&(W=1,h<1&&(W=h)),G=Math.log(D-h)*Math.LOG10E-Math.log(W)*Math.LOG10E,G>2&&(F=Math.pow(10,Math.log(W)*Math.LOG10E-5))}const ge=this.get("renderer"),ae=ge.get("minorLabelsEnabled"),be=ge.get("minorGridEnabled",ae);let ce=Math.pow(10,Math.floor(Math.log(Math.abs(h))*Math.LOG10E));const pt=Math.round(h/ce);let ke=2;tl(pt/5,10)%1==0&&(ke=5),tl(pt/10,10)%1==0&&(ke=10);let ft=h/ke,xt=0,Gt=0,Ht=-1/0;for(;F<D;){let Ut;this.dataItems.length<xt+1?(Ut=new Ip(this,void 0,{}),this._dataItems.push(Ut),this.processDataItem(Ut)):Ut=this.dataItems[xt],this._createAssets(Ut,[]),this._toggleDataItem(Ut,!0),Ut.setRaw("value",F);const Cn=Ut.get("label");Cn&&Cn.set("text",this._formatText(F)),this._prepareDataItem(Ut);let Jn=F;if(r&&G>2?Jn=Math.pow(10,Math.log(W)*Math.LOG10E+xt-5):Jn+=h,be){let jn=F+ft;for(r&&(G>2&&(ft=this._adjustMinMax(F,Jn,10).step),jn=F+ft);jn<Jn-1e-11*h;){let or;this.minorDataItems.length<Gt+1?(or=new Ip(this,void 0,{}),this.minorDataItems.push(or),this.processDataItem(or)):or=this.minorDataItems[Gt],this._createAssets(or,["minor"],!0),this._toggleDataItem(or,!0),or.setRaw("value",jn);const Ci=or.get("label");Ci&&(ae?Ci.set("text",this._formatText(jn)):Ci.setPrivate("visible",!1)),this._prepareDataItem(or),jn+=ft,Gt++}}if(F=Jn,Ht==F)break;let fi=Math.pow(10,Math.floor(Math.log(Math.abs(h))*Math.LOG10E));fi<1&&(F=tl(F,Math.round(Math.abs(Math.log(Math.abs(fi))*Math.LOG10E))+2)),xt++,Ht=F}for(let Ut=xt;Ut<this.dataItems.length;Ut++)this._toggleDataItem(this.dataItems[Ut],!1);for(let Ut=Gt;Ut<this.minorDataItems.length;Ut++)this._toggleDataItem(this.minorDataItems[Ut],!1);Oe(this.series,Ut=>{Ut.inited&&Ut._markDirtyAxes()}),this._updateGhost()}}_prepareDataItem(e,t){let r=this.get("renderer"),h=e.get("value"),y=e.get("endValue"),D=this.valueToPosition(h),F=D,G=this.valueToPosition(h+this.getPrivate("step"));un(y)&&(F=this.valueToPosition(y),G=F),e.get("isRange")&&null==y&&(G=D);let W=F,ge=e.get("labelEndValue");null!=ge&&(W=this.valueToPosition(ge)),r.updateLabel(e.get("label"),D,W,t);const ae=e.get("grid");if(r.updateGrid(ae,D,F),ae&&(h==this.get("baseValue",0)?(ae.addTag("base"),ae._applyThemes()):ae.hasTag("base")&&(ae.removeTag("base"),ae._applyThemes())),r.updateTick(e.get("tick"),D,W,t),r.updateFill(e.get("axisFill"),D,G),this._processBullet(e),r.updateBullet(e.get("bullet"),D,F),!e.get("isRange")){const be=this.get("fillRule");be&&be(e)}}_handleRangeChange(){let e=this.positionToValue(this.get("start",0)),t=this.positionToValue(this.get("end",1));const r=this.get("renderer").gridCount();let h=this._adjustMinMax(e,t,r,!0),y=function eh(_){let e=(""+_).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(h.step);this.setPrivateRaw("stepDecimalPlaces",y),e=tl(e,y),t=tl(t,y),h=this._adjustMinMax(e,t,r,!0);let D=h.step;e=h.min,t=h.max,(this.getPrivate("selectionMin")!==e||this.getPrivate("selectionMax")!==t||this.getPrivate("step")!==D)&&(this.setPrivateRaw("selectionMin",e),this.setPrivateRaw("selectionMax",t),this.setPrivateRaw("step",D))}positionToValue(e){const t=this.getPrivate("min"),r=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(e*(Math.log(r)*Math.LOG10E-Math.log(t)*Math.LOG10E)+Math.log(t)*Math.LOG10E)/Math.LOG10E):e*(r-t)+t}valueToPosition(e){const t=this.getPrivate("min"),r=this.getPrivate("max");if(this.get("logarithmic")){if(e<=0){let h=this.get("treatZeroAs");un(h)&&(e=h)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(r)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(r-t)}valueToFinalPosition(e){const t=this.getPrivate("minFinal"),r=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(e<=0){let h=this.get("treatZeroAs");un(h)&&(e=h)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(r)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(r-t)}getX(e,t,r){const h=this.valueToPosition(e=r+(e-r)*t);return this._settings.renderer.positionToCoordinate(h)}getY(e,t,r){const h=this.valueToPosition(e=r+(e-r)*t);return this._settings.renderer.positionToCoordinate(h)}getDataItemCoordinateX(e,t,r,h){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,r,h))}getDataItemPositionX(e,t,r,h){let y=e.get(t);return y=e.get("stackToItemX")?y*h+e.component.getStackedXValueWorking(e,t):this._baseValue+(y-this._baseValue)*h,this.valueToPosition(y)}getDataItemCoordinateY(e,t,r,h){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,r,h))}getDataItemPositionY(e,t,r,h){let y=e.get(t);return y=e.get("stackToItemY")?y*h+e.component.getStackedYValueWorking(e,t):this._baseValue+(y-this._baseValue)*h,this.valueToPosition(y)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){const e=Math.min(this.getPrivate("minFinal",-1/0),this.getPrivate("selectionMin",-1/0)),t=Math.max(this.getPrivate("maxFinal",1/0),this.getPrivate("selectionMax",1/0));let r=this.get("baseValue",0);return r<e&&(r=e),r>t&&(r=t),r}cellEndValue(e){return e}fixSmallStep(e){return 1+e===1?this.fixSmallStep(e*=2):e}_fixMin(e){return e}_fixMax(e){return e}_calculateTotals(){if(this.get("calculateTotals")){let e=this.series[0];if(e){let t=e.startIndex();if(e.dataItems.length>0){t>0&&t--;let h,y,r=e.endIndex();r<e.dataItems.length&&r++,e.get("yAxis")==this?(h="valueY",y="vcy"):e.get("xAxis")==this&&(h="valueX",y="vcx");let D=h+"Working";if(h)for(let F=t;F<r;F++){let G=0,W=0;Oe(this.series,ge=>{if(!ge.get("excludeFromTotal")){let ae=ge.dataItems[F];if(ae){let be=ae.get(D)*ge.get(y);ro(be)||(G+=be,W+=Math.abs(be))}}}),Oe(this.series,ge=>{if(!ge.get("excludeFromTotal")){let ae=ge.dataItems[F];if(ae){let be=ae.get(D)*ge.get(y);ro(be)||(ae.set(h+"Total",W),ae.set(h+"Sum",G),ae.set(h+"TotalPercent",be/W*100))}}})}}}}}_getSelectionMinMax(){const e=this.getPrivate("minFinal"),t=this.getPrivate("maxFinal"),r=this.get("min"),h=this.get("max");let y=this.get("extraMin",0),D=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(y=.1),null==this.get("extraMax")&&(D=.2));const F=this.get("renderer").gridCount(),G=this.get("strictMinMaxSelection"),W=this.get("strictMinMax");if(un(e)&&un(t)){let ge=t,ae=e;if(Oe(this.series,Ht=>{if(!Ht.get("ignoreMinMax")){let Ut,Cn;const Jn=Ht.getPrivate("outOfSelection");if(Ht.get("xAxis")===this){if(!Jn){let fi=Ht.getPrivate("minX"),jn=Ht.getPrivate("maxX");(0!=Ht.startIndex()||Ht.endIndex()!=Ht.dataItems.length)&&(fi=void 0,jn=void 0),Ut=Ht.getPrivate("selectionMinX",fi),Cn=Ht.getPrivate("selectionMaxX",jn)}}else if(Ht.get("yAxis")===this&&!Jn){let fi=Ht.getPrivate("minY"),jn=Ht.getPrivate("maxY");(0!=Ht.startIndex()||Ht.endIndex()!=Ht.dataItems.length)&&(fi=void 0,jn=void 0),Ut=Ht.getPrivate("selectionMinY",fi),Cn=Ht.getPrivate("selectionMaxY",jn)}!Ht.isHidden()&&!Ht.isShowing()&&(un(Ut)&&(ge=Math.min(ge,Ut)),un(Cn)&&(ae=Math.max(ae,Cn)))}}),this.axisRanges.each(Ht=>{if(Ht.get("affectsMinMax")){let Ut=Ht.get("value");null!=Ut&&(ge=Math.min(ge,Ut),ae=Math.max(ae,Ut)),Ut=Ht.get("endValue"),null!=Ut&&(ge=Math.min(ge,Ut),ae=Math.max(ae,Ut))}}),ge>ae&&([ge,ae]=[ae,ge]),un(r)?ge=W?r:e:W&&un(this._minReal)&&(ge=this._minReal),un(h)?ae=W?h:t:W&&un(this._maxReal)&&(ae=this._maxReal),ge===ae){ge-=this._deltaMinMax,ae+=this._deltaMinMax;let Ht=this._adjustMinMax(ge,ae,F,W);ge=Ht.min,ae=Ht.max}let be=ge,ce=ae;ge-=(ae-ge)*y,ae+=(ae-ge)*D;let pt=this._adjustMinMax(ge,ae,F);ge=pt.min,ae=pt.max,ge=Rl(ge,e,t),ae=Rl(ae,e,t),pt=this._adjustMinMax(ge,ae,F,!0),W||(ge=pt.min,ae=pt.max);const ke=this.get("syncWithAxis");ke&&(pt=this._syncAxes(ge,ae,pt.step,ke.getPrivate("selectionMinFinal",ke.getPrivate("minFinal",0)),ke.getPrivate("selectionMaxFinal",ke.getPrivate("maxFinal",1)),ke.getPrivate("selectionStepFinal",ke.getPrivate("step",1))),ge=pt.min,ae=pt.max),W&&(un(r)&&(ge=Math.max(ge,r)),un(h)&&(ae=Math.min(ae,h))),G&&(ge=be-(ae-ge)*y,ae=ce+(ae-ge)*D),this.get("logarithmic")&&(ge<=0&&(ge=be*(1-Math.min(y,.99))),ge<e&&(ge=e),ae>t&&(ae=t));let ft=Math.min(20,Math.ceil(Math.log(this.getPrivate("maxZoomFactor",100)+1)/Math.LN10)+2),xt=tl(this.valueToFinalPosition(ge),ft),Gt=tl(this.valueToFinalPosition(ae),ft);this.setPrivateRaw("selectionMinFinal",ge),this.setPrivateRaw("selectionMaxFinal",ae),this.setPrivateRaw("selectionStepFinal",pt.step),this.zoom(xt,Gt)}}_getMinMax(){let e=this.get("min"),t=this.get("max"),r=1/0,h=-1/0,y=this.get("extraMin",0),D=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(y=.1),null==this.get("extraMax")&&(D=.2));let F=1/0;if(Oe(this.series,Ht=>{if(!Ht.get("ignoreMinMax")){let Ut,Cn;if(Ht.get("xAxis")===this?(Ut=Ht.getPrivate("minX"),Cn=Ht.getPrivate("maxX")):Ht.get("yAxis")===this&&(Ut=Ht.getPrivate("minY"),Cn=Ht.getPrivate("maxY")),un(Ut)&&un(Cn)){r=Math.min(r,Ut),h=Math.max(h,Cn);let Jn=Cn-Ut;Jn<=0&&(Jn=Math.abs(Cn/100)),Jn<F&&(F=Jn)}}}),this.axisRanges.each(Ht=>{if(Ht.get("affectsMinMax")){let Ut=Ht.get("value");null!=Ut&&(r=Math.min(r,Ut),h=Math.max(h,Ut)),Ut=Ht.get("endValue"),null!=Ut&&(r=Math.min(r,Ut),h=Math.max(h,Ut))}}),this.get("logarithmic")){let Ht=this.get("treatZeroAs");un(Ht)&&r<=0&&(r=Ht),r<=0&&new Error("Logarithmic value axis can not have values <= 0.")}if(0===r&&0===h&&(h=.9,r=-.9),un(e)&&(r=e),un(t)&&(h=t),r===1/0||h===-1/0)return this.setPrivate("minFinal",void 0),void this.setPrivate("maxFinal",void 0);const G=r,W=h;let ge=this.adapters.fold("min",r),ae=this.adapters.fold("max",h);un(ge)&&(r=ge),un(ae)&&(h=ae),r=this._fixMin(r),h=this._fixMax(h),h-r<=1/Math.pow(10,15)&&(h-r!=0?this._deltaMinMax=(h-r)/2:this._getDelta(h),r-=this._deltaMinMax,h+=this._deltaMinMax),r-=(h-r)*y,h+=(h-r)*D,this.get("logarithmic")&&(r<0&&G>=0&&(r=0),h>0&&W<=0&&(h=0)),this._minReal=r,this._maxReal=h;let be=this.get("strictMinMax"),ce=this.get("strictMinMaxSelection",!1);ce&&(be=ce);let pt=be;un(t)&&(pt=!0);let ke=this.get("renderer").gridCount(),ft=this._adjustMinMax(r,h,ke,pt);r=ft.min,h=ft.max,ft=this._adjustMinMax(r,h,ke,!0),r=ft.min,h=ft.max,be&&(r=un(e)?e:this._minReal,h=un(t)?t:this._maxReal,h-r<=1e-8&&(r-=this._deltaMinMax,h+=this._deltaMinMax),r-=(h-r)*y,h+=(h-r)*D),ge=this.adapters.fold("min",r),ae=this.adapters.fold("max",h),un(ge)&&(r=ge),un(ae)&&(h=ae),F==1/0&&(F=h-r);let xt=Math.round(Math.abs(Math.log(Math.abs(h-r))*Math.LOG10E))+5;r=tl(r,xt),h=tl(h,xt);const Gt=this.get("syncWithAxis");if(Gt&&(ft=this._syncAxes(r,h,ft.step,Gt.getPrivate("minFinal",Gt.getPrivate("min",0)),Gt.getPrivate("maxFinal",Gt.getPrivate("max",1)),Gt.getPrivate("step",1)),r=ft.min,h=ft.max),this.setPrivateRaw("maxZoomFactor",Math.max(1,Math.ceil((h-r)/F*this.get("maxZoomFactor",100)))),this._fixZoomFactor(),this.get("logarithmic")&&(this._minLogAdjusted=r,r=this._minReal,h=this._maxReal,r<=0&&(r=G*(1-Math.min(y,.99)))),un(r)&&un(h)&&(this.getPrivate("minFinal")!==r||this.getPrivate("maxFinal")!==h)){this.setPrivate("minFinal",r),this.setPrivate("maxFinal",h),this._saveMinMax(r,h);const Ht=this.get("interpolationDuration",0),Ut=this.get("interpolationEasing");this.animatePrivate({key:"min",to:r,duration:Ht,easing:Ut}),this.animatePrivate({key:"max",to:h,duration:Ht,easing:Ut})}}_fixZoomFactor(){}_getDelta(e){let t=Math.log(Math.abs(e))*Math.LOG10E,r=Math.pow(10,Math.floor(t));r/=10,this._deltaMinMax=r}_saveMinMax(e,t){}_adjustMinMax(e,t,r,h){r<=1&&(r=1),r=Math.round(r);let y=e,D=t,F=t-e;0===F&&(F=Math.abs(t));let G=Math.log(Math.abs(F))*Math.LOG10E,W=Math.pow(10,Math.floor(G));W/=10;let ge=W;h&&(ge=0),h?(e=Math.floor(e/W)*W,t=Math.ceil(t/W)*W):(e=Math.ceil(e/W)*W-ge,t=Math.floor(t/W)*W+ge),e<0&&y>=0&&(e=0),t>0&&D<=0&&(t=0),G=Math.log(Math.abs(F))*Math.LOG10E,W=Math.pow(10,Math.floor(G)),W/=100;let ae=Math.ceil(F/r/W)*W,be=Math.pow(10,Math.floor(Math.log(Math.abs(ae))*Math.LOG10E)),ce=Math.ceil(ae/be);ce>5?ce=10:ce<=5&&ce>2&&(ce=5),ae=Math.ceil(ae/(be*ce))*be*ce;let pt=this.get("maxPrecision");if(un(pt)){let Gt=function om(_,e){if(!un(e)||e<=0)return Math.ceil(_);{let t=Math.pow(10,e);return Math.ceil(_*t)/t}}(ae,pt);pt<Number.MAX_VALUE&&ae!==Gt&&(ae=Gt)}let ke=0;be<1&&(ke=Math.round(Math.abs(Math.log(Math.abs(be))*Math.LOG10E))+1,ae=tl(ae,ke));let xt,ft=Math.floor(e/ae);return e=tl(ae*ft,ke),xt=h?Math.floor(t/ae):Math.ceil(t/ae),xt===ft&&xt++,(t=tl(ae*xt,ke))<D&&(t+=ae),e>y&&(e-=ae),ae=this.fixSmallStep(ae),{min:e,max:t,step:ae}}getTooltipText(e,t){const r=this.get("tooltipNumberFormat",this.get("numberFormat")),h=this.getNumberFormatter(),y=this.get("extraTooltipPrecision",0),D=this.getPrivate("stepDecimalPlaces",0)+y,F=tl(this.positionToValue(e),D);return r?h.format(F,r):h.format(F,void 0,D)}getSeriesItem(e,t){let y,D,r=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),h=this.positionToValue(t);if(Oe(e.dataItems,(F,G)=>{const W=Math.abs(F.get(r)-h);(void 0===y||W<D)&&(y=G,D=W)}),null!=y)return e.dataItems[y]}zoomToValues(e,t,r){const h=this.getPrivate("minFinal",0),y=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((e-h)/(y-h),(t-h)/(y-h),r)}_syncAxes(e,t,r,h,y,D){if(this.get("syncWithAxis")){let G=Math.round(y-h)/D,W=Math.round((t-e)/r),ge=this.get("renderer").gridCount();if(un(G)&&un(W)){let ae=!1,be=0,ce=.01*(t-e),pt=e,ke=t,ft=r;for(;1!=ae;)if(ae=this._checkSync(pt,ke,ft,G),be++,be>500&&(ae=!0),ae)e=pt,t=ke,r=ft;else{be/3==Math.round(be/3)?(pt=e-ce*be,e>=0&&pt<0&&(pt=0)):(ke=t+ce*be,ke<=0&&ke>0&&(ke=0));let xt=this._adjustMinMax(pt,ke,ge,!0);pt=xt.min,ke=xt.max,ft=xt.step}}}return{min:e,max:t,step:r}}_checkSync(e,t,r,h){let y=(t-e)/r;for(let D=1;D<h;D++)if(tl(y/D,1)==h||y*D==h)return!0;return!1}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),t=this.getPrivate("selectionMin",this.getPrivate("min"));return un(e)&&un(t)?this.getPrivate("step",1)/(e-t):.05}}Object.defineProperty(qc,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"}),Object.defineProperty(qc,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_m.classNames.concat([qc.className])});class Pp extends Mf{constructor(){super(...arguments),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:dc.new(this._root,{height:vi,isMeasured:!1,themeTags:["axis","y","thumb"]})})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["renderer","y"]),this._settings.opposite&&this._settings.themeTags.push("opposite"),super._afterNew(),this.setPrivateRaw("letter","Y");const e=this.grid.template;e.set("width",vi),e.set("height",0),e.set("draw",(t,r)=>{t.moveTo(0,0),t.lineTo(r.width(),0)}),this.set("draw",(t,r)=>{t.moveTo(0,0),t.lineTo(0,r.height())})}_getPan(e,t){return(e.y-t.y)/this.height()}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("y",-1e3);const t=this.thumb,r="opposite",h="inside",y=this.chart;if(this.isDirty(r)||this.isDirty(h)){const F=e.children;if(this.get(h)?e.addTag(h):e.removeTag(h),y){if(this.get(r)){const G=y.rightAxesContainer.children;-1==G.indexOf(e)&&G.moveValue(e,0),e.addTag(r),F.moveValue(this,0)}else{const G=y.leftAxesContainer.children;-1==G.indexOf(e)&&G.moveValue(e),e.removeTag(r),F.moveValue(this)}e.ghostLabel._applyThemes(),this.labels.each(G=>{G._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}const D=e.labelsContainer.width();y&&(this.get(r)?t.set("centerX",0):t.set("centerX",D)),t.setPrivate("width",D)}processAxis(){super.processAxis();const e=this.axis;null==e.get("height")&&e.set("height",vi);const t=this._root.horizontalLayout;e.set("layout",t),e.labelsContainer.set("height",vi),e.axisHeader.set("layout",t)}_updatePositions(){const e=this.axis,t=e.y()-va(e.get("centerY",0),e.height());e.gridContainer.set("y",t),e.topGridContainer.set("y",t),e.bulletsContainer.set("x",this.x());const r=e.chart;if(r){const h=r.plotContainer,y=e.axisHeader;let D=e.get("marginTop",0);y.children.length>0?(D=e.axisHeader.height(),e.set("marginTop",D+1)):y.set("height",D),y.setAll({y:e.y()-D,x:-1,width:h.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(e){return{x:0,y:this.positionToCoordinate(e)}}updateLabel(e,t,r,h){if(e){un(t)||(t=0);let y=.5;y=un(h)&&h>1?e.get("multiLocation",y):e.get("location",y);const D=this.get("opposite"),F=e.get("inside",this.get("inside",!1));D?(e.set("x",0),e.set("position",F?"absolute":"relative")):F?(e.set("x",0),e.set("position","absolute")):(e.set("x",void 0),e.set("position","relative")),un(r)&&r!=t&&(t+=(r-t)*y),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,r){if(e){un(t)||(t=0);let h=e.get("location",.5);un(r)&&r!=t&&(t+=(r-t)*h),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateTick(e,t,r,h){if(e){un(t)||(t=0);let y=.5;y=un(h)&&h>1?e.get("multiLocation",y):e.get("location",y),un(r)&&r!=t&&(t+=(r-t)*y),e.set("y",this.positionToCoordinate(t));let D=e.get("length",0);const F=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("x",0),F&&(D*=-1)):F||(D*=-1),e.set("draw",G=>{G.moveTo(0,0),G.lineTo(D,0)}),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateBullet(e,t,r){if(e){const h=e.get("sprite");if(h){un(t)||(t=0);let y=e.get("location",.5);un(r)&&r!=t&&(t+=(r-t)*y);let D=this.axis.roundAxisPosition(t,y),F=this.axis._bullets[D],G=1;if(this.get("opposite")&&(G=-1),e.get("stacked"))if(F){let W=F.get("sprite");W&&h.set("x",W.x()+W.width()*G)}else h.set("x",0);this.axis._bullets[D]=e,h.set("y",this.positionToCoordinate(t)),this.toggleVisibility(h,t,0,1)}}}updateFill(e,t,r){if(e){un(t)||(t=0),un(r)||(r=1);let h=this.positionToCoordinate(t),y=this.positionToCoordinate(r);this.fillDrawMethod(e,h,y)}}fillDrawMethod(e,t,r){e.set("draw",h=>{const y=this.axis.gridContainer.width(),D=this.height();r<t&&([r,t]=[t,r]),!(t>D||r<0)&&(h.moveTo(0,t),h.lineTo(y,t),h.lineTo(y,r),h.lineTo(0,r),h.lineTo(0,t))})}positionToCoordinate(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}positionTooltip(e,t){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(t)})}updateTooltipBounds(e){const t=this.get("inside"),r=1e5;let h=this._display.toGlobal({x:0,y:0}),y=h.y,D=0,F=this.axisLength(),G=r,W="right";this.get("opposite")?t?(W="right",D=h.x-r,G=r):(W="left",D=h.x,G=r):t?(W="left",D=h.x,G=r):(W="right",D=h.x-r,G=r);const ge={left:D,right:D+G,top:y,bottom:y+F};ng(ge,e.get("bounds"))||(e.set("bounds",ge),e.set("pointerOrientation",W))}_updateLC(){const e=this.axis,t=e.parent;if(t){const r=t.innerHeight();this._lc=this.axisLength()/r,this._ls=e.y()/r}}toAxisPosition(e){const t=this._start||0,r=this._end||1;return e=(e-=this._ls)*(r-t)/this._lc,this.get("inversed")?t+e:r-e}toGlobalPosition(e){const t=this._start||0,r=this._end||1;return this.get("inversed")?e-=t:e=r-e,(e=e/(r-t)*this._lc)+this._ls}fixPosition(e){return this.get("inversed")?e:1-e}}Object.defineProperty(Pp,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"}),Object.defineProperty(Pp,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mf.classNames.concat([Pp.className])});class Sf extends ah{constructor(){super(...arguments),Object.defineProperty(this,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_stackDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(br.new(this._root,{}))}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Dc}),Object.defineProperty(this,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_couldStackTo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]}),Object.defineProperty(this,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]}),Object.defineProperty(this,"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new Ip(this,void 0,{})}),Object.defineProperty(this,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posXDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posYDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY"),this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY"),this._setRawDefault("vcx",1),this._setRawDefault("vcy",1),this._setRawDefault("valueXShow","valueXWorking"),this._setRawDefault("valueYShow","valueYWorking"),this._setRawDefault("openValueXShow","openValueXWorking"),this._setRawDefault("openValueYShow","openValueYWorking"),this._setRawDefault("lowValueXShow","lowValueXWorking"),this._setRawDefault("lowValueYShow","lowValueYWorking"),this._setRawDefault("highValueXShow","highValueXWorking"),this._setRawDefault("highValueYShow","highValueYWorking"),this._setRawDefault("lowValueXGrouped","low"),this._setRawDefault("lowValueYGrouped","low"),this._setRawDefault("highValueXGrouped","high"),this._setRawDefault("highValueYGrouped","high"),super._afterNew(),this.set("maskContent",!0),this._disposers.push(this.axisRanges.events.onAll(e=>{if("clear"===e.type)Oe(e.oldValues,t=>{this._removeAxisRange(t)});else if("push"===e.type)this._processAxisRange(e.newValue);else if("setIndex"===e.type)this._processAxisRange(e.newValue);else if("insertIndex"===e.type)this._processAxisRange(e.newValue);else if("removeIndex"===e.type)this._removeAxisRange(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(e.value)}})),this.states.create("hidden",{opacity:1,visible:!1}),this._makeFieldNames()}_processAxisRange(e){const t=br.new(this._root,{});e.container=t,this.children.push(t),e.series=this;const r=e.axisDataItem;r.setRaw("isRange",!0);const h=r.component;if(h){h._processAxisRange(r,["range","series"]);const y=r.get("bullet");if(y){const F=y.get("sprite");F&&F.setPrivate("visible",!1)}const D=r.get("axisFill");D&&t.set("mask",D),h._seriesAxisRanges.push(r)}}_removeAxisRange(e){const t=e.axisDataItem,r=t.component;r.disposeDataItem(t),Fn(r._seriesAxisRanges,t);const h=e.container;h&&h.dispose()}_updateFields(){super._updateFields(),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&Oe(this.valueXFields,e=>{if(this.get(e+"Field")){this._valueXFields.push(e);let r=this.get(e+"Show");this.__valueXShowFields.push(r),-1!=r.indexOf("Working")?this._valueXShowFields.push(r.split("Working")[0]):this._valueXShowFields.push(r)}}),this.valueYFields&&Oe(this.valueYFields,e=>{if(this.get(e+"Field")){this._valueYFields.push(e);let r=this.get(e+"Show");this.__valueYShowFields.push(r),-1!=r.indexOf("Working")?this._valueYShowFields.push(r.split("Working")[0]):this._valueYShowFields.push(r)}})}_dispose(){super._dispose(),this._bullets={};const e=this.chart;e&&e.series.removeValue(this),Vn(this.get("xAxis").series,this),Vn(this.get("yAxis").series,this)}_min(e,t){let r=function D0(_,e){return null==_?e:null==e?_:e<_?e:_}(this.getPrivate(e),t);this.setPrivate(e,r)}_max(e,t){let r=function M0(_,e){return null==_?e:null==e?_:e>_?e:_}(this.getPrivate(e),t);this.setPrivate(e,r)}_shouldMakeBullet(e){const t=this.get("xAxis"),r=this.get("yAxis"),h=this.get("baseAxis");if(!t.inited||!r.inited)return!1;const y=this.get("minBulletDistance",0);if(y>0){let D=this.startIndex(),G=this.endIndex()-D;if(t==h){if(t.get("renderer").axisLength()/G<y/5)return!1}else if(r==h&&r.get("renderer").axisLength()/G<y/5)return!1}return null!=e.get(this._xField)&&null!=e.get(this._yField)}_makeFieldNames(){const e=this.get("xAxis"),t=this.get("yAxis"),r=e.getPrivate("name"),h=tg(r),y=t.getPrivate("name"),D=tg(y),F=e.get("renderer").getPrivate("letter"),G=t.get("renderer").getPrivate("letter"),W="open",ge="low",ae="high",be="Show";"ValueAxis"===e.className?(this._xField=this.get(r+F+be),this._xOpenField=this.get(W+h+F+be),this._xLowField=this.get(ge+h+F+be),this._xHighField=this.get(ae+h+F+be)):(this._xField=r+F,this._xOpenField=W+h+F,this._xLowField=ge+h+F,this._xHighField=ae+h+F),"ValueAxis"===t.className?(this._yField=this.get(y+G+be),this._yOpenField=this.get(W+D+G+be),this._yLowField=this.get(ge+D+G+be),this._yHighField=this.get(ae+D+G+be)):(this._yField=y+G,this._yOpenField=W+D+G,this._yLowField=ge+D+G,this._yHighField=ae+D+G)}_fixVC(){const e=this.get("xAxis"),t=this.get("yAxis"),r=this.get("baseAxis"),h=this.states.lookup("hidden"),y=this.get("sequencedInterpolation");if(h){let D=0;y&&(D=.999999999999),e===r?h.set("vcy",D):(t===r||h.set("vcy",D),h.set("vcx",D))}}_handleMaskBullets(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}_fixPosition(){const e=this.get("xAxis"),t=this.get("yAxis");this.set("x",e.x()-va(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0)),this.set("y",t.y()-va(t.get("centerY",0),t.height())-t.parent.get("paddingTop",0)),this.bulletsContainer.set("y",this.y()),this.bulletsContainer.set("x",this.x())}_prepareChildren(){super._prepareChildren(),this._bullets={},(this.isDirty("valueYShow")||this.isDirty("valueXShow")||this.isDirty("openValueYShow")||this.isDirty("openValueXShow")||this.isDirty("lowValueYShow")||this.isDirty("lowValueXShow")||this.isDirty("highValueYShow")||this.isDirty("highValueXShow"))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),(this.isDirty("xAxis")||this.isDirty("yAxis"))&&(this._valuesDirty=!0),this.set("width",this.get("xAxis").width()),this.set("height",this.get("yAxis").height()),this._handleMaskBullets();const e=this.get("xAxis"),t=this.get("yAxis"),r=this.get("baseAxis");let y,F;switch(this.get("tooltipPositionX")){case"open":y=this._xOpenField;break;case"low":y=this._xLowField;break;case"high":y=this._xHighField;break;default:y=this._xField}switch(this._tooltipFieldX=y,this.get("tooltipPositionY")){case"open":F=this._yOpenField;break;case"low":F=this._yLowField;break;case"high":F=this._yHighField;break;default:F=this._yField}this._tooltipFieldY=F,this.isDirty("baseAxis")&&this._fixVC(),this._fixPosition();const G=this.get("stacked");if(this.isDirty("stacked")&&(G?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,G&&this._stack(),Oe(this.dataItems,W=>{Oe(this._valueXShowFields,ge=>{let ae=W.get(ge);null!=ae&&(G&&(ae+=this.getStackedXValue(W,ge)),this._min("minX",ae),this._max("maxX",ae))}),Oe(this._valueYShowFields,ge=>{let ae=W.get(ge);null!=ae&&(G&&(ae+=this.getStackedYValue(W,ge)),this._min("minY",ae),this._max("maxY",ae))}),e.processSeriesDataItem(W,this._valueXFields),t.processSeriesDataItem(W,this._valueYFields)}),e._seriesValuesDirty=!0,t._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&e.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&t.markDirtyExtremes()),this._markStakedDirtyStack(),this.get("tooltipDataItem")||this.updateLegendValue(void 0)),(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack(),this._dataGrouped||(e._groupSeriesData(this),t._groupSeriesData(this),this._dataGrouped=!0),this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty){let W=this.startIndex(),ge=this.endIndex(),ae=this.get("minBulletDistance",0);if(ae>0&&r&&(this._showBullets=r.get("renderer").axisLength()/(ge-W)>ae),(this._psi!=W||this._pei!=ge||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;const be=this.get("vcx",1),ce=this.get("vcy",1),pt=this.get("stacked",!1),ke=this.getPrivate("outOfSelection");if(r===e||!r)if(t._calculateTotals(),this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),ke)t.markDirtySelectionExtremes();else for(let ft=W;ft<ge;ft++)this.processYSelectionDataItem(this.dataItems[ft],ce,pt);if(r===t||!r)if(e._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),ke)t.markDirtySelectionExtremes();else for(let ft=W;ft<ge;ft++)this.processXSelectionDataItem(this.dataItems[ft],be,pt);if((r===e||!r)&&"valueYWorking"!==this.get("valueYShow")){const ft=this.getPrivate("selectionMinY");null!=ft&&(this.setPrivateRaw("minY",ft),t.markDirtyExtremes());const xt=this.getPrivate("selectionMaxY");null!=xt&&(this.setPrivateRaw("maxY",xt),t.markDirtyExtremes())}if((r===t||!r)&&"valueXWorking"!==this.get("valueXShow")){const ft=this.getPrivate("selectionMinX");null!=ft&&(this.setPrivateRaw("minX",ft),t.markDirtyExtremes());const xt=this.getPrivate("selectionMaxX");null!=xt&&(this.setPrivateRaw("maxX",xt),e.markDirtyExtremes())}(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&e.markDirtySelectionExtremes(),(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&t.markDirtySelectionExtremes()}}}_makeRangeMask(){if(this.axisRanges.length>0){let e=this._mainContainerMask;null==e&&(e=this.children.push(cs.new(this._root,{})),this._mainContainerMask=e,e.set("draw",(t,r)=>{const h=this.parent;if(h){const y=this._root.container.width(),D=this._root.container.height();t.moveTo(-y,-D),t.lineTo(-y,2*D),t.lineTo(2*y,2*D),t.lineTo(2*y,-D),t.lineTo(-y,-D),this.axisRanges.each(F=>{const G=F.axisDataItem.get("axisFill");if(h&&G){let W=G.get("draw");W&&W(t,r)}})}this.mainContainer._display.mask=e._display})),e.markDirty(),e._markDirtyKey("fill")}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren(),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}_stack(){const e=this.chart;if(e){const t=e.series.indexOf(this);if(this._couldStackTo=[],t>0){let r;for(let h=t-1;h>=0&&(r=e.series.getIndex(h),r.get("xAxis")!==this.get("xAxis")||r.get("yAxis")!==this.get("yAxis")||r.className!==this.className||(this._couldStackTo.push(r),r.get("stacked")));h--);}this._stackDataItems()}}_unstack(){es(this._reallyStackedTo,(e,t)=>{delete t._stackedSeries[this.uid]}),this._reallyStackedTo={},Oe(this.dataItems,e=>{e.setRaw("stackToItemY",void 0),e.setRaw("stackToItemX",void 0)})}_stackDataItems(){const e=this.get("baseAxis"),t=this.get("xAxis"),r=this.get("yAxis");let h,y;e===t?(h="valueY",y="stackToItemY"):e===r&&(h="valueX",y="stackToItemX");let D=this._couldStackTo.length,F=0;const G=this.get("stackToNegative");this._reallyStackedTo={},Oe(this.dataItems,W=>{for(let ge=0;ge<D;ge++){let ae=this._couldStackTo[ge],be=ae.dataItems[F],ce=W.get(h);if(be){let pt=be.get(h);if(G){if(!un(ce))break;if(un(pt)){if(ce>=0&&pt>=0){W.setRaw(y,be),this._reallyStackedTo[ae.uid]=ae,ae._stackedSeries[this.uid]=this;break}if(ce<0&&pt<0){W.setRaw(y,be),this._reallyStackedTo[ae.uid]=ae,ae._stackedSeries[this.uid]=this;break}}}else if(un(ce)&&un(pt)){W.setRaw(y,be),this._reallyStackedTo[ae.uid]=ae,ae._stackedSeries[this.uid]=this;break}}}F++})}processXSelectionDataItem(e,t,r){Oe(this.__valueXShowFields,h=>{let y=e.get(h);null!=y&&(r&&(y+=this.getStackedXValueWorking(e,h)),this._min("selectionMinX",y),this._max("selectionMaxX",y*t))})}processYSelectionDataItem(e,t,r){Oe(this.__valueYShowFields,h=>{let y=e.get(h);null!=y&&(r&&(y+=this.getStackedYValueWorking(e,h)),this._min("selectionMinY",y),this._max("selectionMaxY",y*t))})}getStackedYValueWorking(e,t){const r=e.get("stackToItemY");if(r){const h=r.component;return r.get(t,0)*h.get("vcy",1)+this.getStackedYValueWorking(r,t)}return 0}getStackedXValueWorking(e,t){const r=e.get("stackToItemX");if(r){const h=r.component;return r.get(t,0)*h.get("vcx",1)+this.getStackedXValueWorking(r,t)}return 0}getStackedYValue(e,t){const r=e.get("stackToItemY");return r?r.get(t,0)+this.getStackedYValue(r,t):0}getStackedXValue(e,t){const r=e.get("stackToItemX");return r?r.get(t,0)+this.getStackedXValue(r,t):0}createLegendMarker(e){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0,this.markDirty()}_markDataSetDirty(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}_clearDirty(){super._clearDirty(),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}_positionBullet(e){let t=e.get("sprite");if(t){let r=t.dataItem,h=e.get("locationX",r.get("locationX",.5)),y=e.get("locationY",r.get("locationY",.5)),D=this.get("xAxis"),F=this.get("yAxis"),G=D.getDataItemPositionX(r,this._xField,h,this.get("vcx",1)),W=F.getDataItemPositionY(r,this._yField,y,this.get("vcy",1)),ge=this.getPoint(G,W),ae=r.get("left",ge.x),be=r.get("right",ge.x),ce=r.get("top",ge.y),pt=r.get("bottom",ge.y),ke=0,ft=0,xt=be-ae,Gt=pt-ce;if(this._shouldShowBullet(G,W)){t.setPrivate("visible",!e.getPrivate("hidden"));let Ht=e.get("field");const Ut=this.get("baseAxis"),Cn=this.get("xAxis"),Jn=this.get("yAxis");if(null!=Ht){let jn;Ut==Cn?("value"==Ht?jn=this._yField:"open"==Ht?jn=this._yOpenField:"high"==Ht?jn=this._yHighField:"low"==Ht&&(jn=this._yLowField),jn&&(W=Jn.getDataItemPositionY(r,jn,0,this.get("vcy",1)),ge=Jn.get("renderer").positionToPoint(W),ft=ge.y,ke=ae+xt*h)):("value"==Ht?jn=this._xField:"open"==Ht?jn=this._xOpenField:"high"==Ht?jn=this._xHighField:"low"==Ht&&(jn=this._xLowField),jn&&(G=Cn.getDataItemPositionX(r,jn,0,this.get("vcx",1)),ge=Cn.get("renderer").positionToPoint(G),ke=ge.x,ft=pt-Gt*y))}else ke=ae+xt*h,ft=pt-Gt*y;const fi=e.get("stacked");if(fi){const jn=this.chart;if(Ut==Cn){let or=this._bullets[G+"_"+W];if(or){let Ci=or.bounds(),Ti=t.localBounds(),Do=ft;ft=Ci.top,"down"==fi?ft=Ci.bottom-Ti.top:"auto"==fi?jn&&(Do<jn.plotContainer.height()/2?ft=Ci.bottom-Ti.top:ft+=Ti.bottom):ft+=Ti.bottom}this._bullets[G+"_"+W]=t}else{let or=this._bullets[G+"_"+W];if(or){let Ci=or.bounds(),Ti=t.localBounds(),Do=ke;ke=Ci.right,"down"==fi?ke=Ci.left-Ti.right:"auto"==fi?jn&&(Do<jn.plotContainer.width()/2?ke=Ci.left-Ti.right:ke-=Ti.left):ke-=Ti.left}this._bullets[G+"_"+W]=t}}t.isType("Label")&&(t.setPrivate("maxWidth",Math.abs(xt)),t.setPrivate("maxHeight",Math.abs(Gt))),t.setAll({x:ke,y:ft})}else t.setPrivate("visible",!1)}}_shouldShowBullet(e,t){return this._showBullets}setDataSet(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;const t="datasetchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,id:e})}}resetGrouping(){es(this._dataSets,(e,t)=>{t!=this._mainDataItems&&Oe(t,r=>{this.disposeDataItem(r)})}),this._dataSets={},this._dataItems=this.mainDataItems}_handleDataSetChange(){Oe(this._dataItems,e=>{let t=e.bullets;t&&Oe(t,r=>{if(r){let h=r.get("sprite");h&&h.setPrivate("visible",!1)}})}),this._selectionProcessed=!1}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return(0,na.mG)(this,void 0,void 0,function*(){this._fixVC();let r=[];r.push(t.show.call(this,e).then(()=>{this._isShowing=!1;let h=this.get("xAxis"),y=this.get("yAxis"),D=this.get("baseAxis");y!==D&&y.markDirtySelectionExtremes(),h!==D&&h.markDirtySelectionExtremes()})),r.push(this.bulletsContainer.show(e)),r.push(this._sequencedShowHide(!0,e)),yield Promise.all(r)})}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return(0,na.mG)(this,void 0,void 0,function*(){this._fixVC();let r=[];r.push(t.hide.call(this,e).then(()=>{this._isHiding=!1})),r.push(this.bulletsContainer.hide(e)),r.push(this._sequencedShowHide(!1,e)),yield Promise.all(r)})}showDataItem(e,t){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.showDataItem.call(this,e,t)];un(t)||(t=this.get("stateAnimationDuration",0));const y=this.get("stateAnimationEasing");Oe(this._valueFields,D=>{h.push(e.animate({key:D+"Working",to:e.get(D),duration:t,easing:y}).waitForStop())}),yield Promise.all(h)})}hideDataItem(e,t){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.hideDataItem.call(this,e,t)],y=this.states.create("hidden",{});un(t)||(t=y.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const D=y.get("stateAnimationEasing",this.get("stateAnimationEasing")),F=this.get("xAxis"),G=this.get("yAxis"),W=this.get("baseAxis"),ge=this.get("stacked");if((W===F||!W)&&Oe(this._valueYFields,ae=>{let be=G.getPrivate("min"),ce=G.baseValue();un(be)&&be>ce&&(ce=be),ge&&(ce=0),null!=e.get(ae)&&h.push(e.animate({key:ae+"Working",to:ce,duration:t,easing:D}).waitForStop())}),W===G||!W){let ae=F.getPrivate("min"),be=F.baseValue();un(ae)&&ae>be&&(be=ae),ge&&(be=0),Oe(this._valueXFields,ce=>{null!=e.get(ce)&&h.push(e.animate({key:ce+"Working",to:be,duration:t,easing:D}).waitForStop())})}yield Promise.all(h)})}_markDirtyStack(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}_markStakedDirtyStack(){const e=this._stackedSeries;e&&es(e,(t,r)=>{r._stackDirty||r._markDirtyStack()})}_afterChanged(){super._afterChanged(),this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}showDataItemTooltip(e){this.updateLegendMarker(e),this.updateLegendValue(e);const t=this.get("tooltip");if(t)if(this.isHidden())this.hideTooltip();else if(t._setDataItem(e),e){let r=this.get("locationX",0),h=this.get("locationY",1),y=e.get("locationX",r),D=e.get("locationY",h);const F=this.get("xAxis"),G=this.get("yAxis"),W=this.get("vcx",1),ge=this.get("vcy",1),ae=F.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*y,W),be=G.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*D,ge),ce=this.getPoint(ae,be);let pt=!0;if(Oe(this._valueFields,ke=>{null==e.get(ke)&&(pt=!1)}),pt){const ke=this.chart;ke&&ke.inPlot(ce)?(t.label.text.markDirtyText(),t.set("tooltipTarget",this._getTooltipTarget(e)),t.set("pointTo",this._display.toGlobal({x:ce.x,y:ce.y}))):t._setDataItem(void 0)}else t._setDataItem(void 0)}}hideTooltip(){const e=this.get("tooltip");return e&&e.set("tooltipTarget",this),super.hideTooltip()}_getTooltipTarget(e){if("bullet"==this.get("seriesTooltipTarget")){const t=e.bullets;if(t&&t.length>0){const h=t[0].get("sprite");if(h)return h}}return this}updateLegendValue(e){const t=this.get("legendDataItem");if(t){const r=t.get("label");if(r){let y="";e?(r._setDataItem(e),y=this.get("legendLabelText",r.get("text",this.get("name","")))):(r._setDataItem(this._emptyDataItem),y=this.get("legendRangeLabelText",this.get("legendLabelText",r.get("text",this.get("name",""))))),r.set("text",y)}const h=t.get("valueLabel");if(h){let y="";e?(h._setDataItem(e),y=this.get("legendValueText",h.get("text",""))):(h._setDataItem(this._emptyDataItem),y=this.get("legendRangeValueText",h.get("text",""))),h.set("text",y)}}}_getItemReaderLabel(){let e="X: {"+this._xField;return this.get("xAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}; Y: {"+this._yField,this.get("yAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}",e}getPoint(e,t){let r=this.get("xAxis").get("renderer").positionToCoordinate(e),h=this.get("yAxis").get("renderer").positionToCoordinate(t),y=999999999;return h<-y&&(h=-y),h>y&&(h=y),r<-y&&(r=-y),r>y&&(r=y),{x:r,y:h}}_shouldInclude(e){return!0}handleCursorHide(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange(),this.get("xAxis")._markDirtyKey("start"),this.get("yAxis")._markDirtyKey("start"),this.resetExtremes()}resetExtremes(){this.setPrivate("selectionMinX",void 0),this.setPrivate("selectionMaxX",void 0),this.setPrivate("selectionMinY",void 0),this.setPrivate("selectionMaxY",void 0),this.setPrivate("minX",void 0),this.setPrivate("minY",void 0),this.setPrivate("maxX",void 0),this.setPrivate("maxY",void 0)}createAxisRange(e){return this.axisRanges.push({axisDataItem:e})}get mainDataItems(){return this._mainDataItems}}function lv(_){return"object"==typeof _&&"length"in _?_:Array.from(_)}function oy(_){this._context=_}function uv(_){return new oy(_)}function cv(_){return _[0]}function vm(_){return _[1]}function dv(_,e){var t=ra(!0),r=null,h=uv,y=null,D=s_(F);function F(G){var W,ae,ce,ge=(G=lv(G)).length,be=!1;for(null==r&&(y=h(ce=D())),W=0;W<=ge;++W)!(W<ge&&t(ae=G[W],W,G))===be&&((be=!be)?y.lineStart():y.lineEnd()),be&&y.point(+_(ae,W,G),+e(ae,W,G));if(ce)return y=null,ce+""||null}return _="function"==typeof _?_:void 0===_?cv:ra(_),e="function"==typeof e?e:void 0===e?vm:ra(e),F.x=function(G){return arguments.length?(_="function"==typeof G?G:ra(+G),F):_},F.y=function(G){return arguments.length?(e="function"==typeof G?G:ra(+G),F):e},F.defined=function(G){return arguments.length?(t="function"==typeof G?G:ra(!!G),F):t},F.curve=function(G){return arguments.length?(h=G,null!=r&&(y=h(r)),F):h},F.context=function(G){return arguments.length?(null==G?r=y=null:y=h(r=G),F):r},F}function hv(_,e,t){var r=null,h=ra(!0),y=null,D=uv,F=null,G=s_(W);function W(ae){var be,ce,pt,ft,Gt,ke=(ae=lv(ae)).length,xt=!1,Ht=new Array(ke),Ut=new Array(ke);for(null==y&&(F=D(Gt=G())),be=0;be<=ke;++be){if(!(be<ke&&h(ft=ae[be],be,ae))===xt)if(xt=!xt)ce=be,F.areaStart(),F.lineStart();else{for(F.lineEnd(),F.lineStart(),pt=be-1;pt>=ce;--pt)F.point(Ht[pt],Ut[pt]);F.lineEnd(),F.areaEnd()}xt&&(Ht[be]=+_(ft,be,ae),Ut[be]=+e(ft,be,ae),F.point(r?+r(ft,be,ae):Ht[be],t?+t(ft,be,ae):Ut[be]))}if(Gt)return F=null,Gt+""||null}function ge(){return dv().defined(h).curve(D).context(y)}return _="function"==typeof _?_:void 0===_?cv:ra(+_),e="function"==typeof e?e:ra(void 0===e?0:+e),t="function"==typeof t?t:void 0===t?vm:ra(+t),W.x=function(ae){return arguments.length?(_="function"==typeof ae?ae:ra(+ae),r=null,W):_},W.x0=function(ae){return arguments.length?(_="function"==typeof ae?ae:ra(+ae),W):_},W.x1=function(ae){return arguments.length?(r=null==ae?null:"function"==typeof ae?ae:ra(+ae),W):r},W.y=function(ae){return arguments.length?(e="function"==typeof ae?ae:ra(+ae),t=null,W):e},W.y0=function(ae){return arguments.length?(e="function"==typeof ae?ae:ra(+ae),W):e},W.y1=function(ae){return arguments.length?(t=null==ae?null:"function"==typeof ae?ae:ra(+ae),W):t},W.lineX0=W.lineY0=function(){return ge().x(_).y(e)},W.lineY1=function(){return ge().x(_).y(t)},W.lineX1=function(){return ge().x(r).y(e)},W.defined=function(ae){return arguments.length?(h="function"==typeof ae?ae:ra(!!ae),W):h},W.curve=function(ae){return arguments.length?(D=ae,null!=y&&(F=D(y)),W):D},W.context=function(ae){return arguments.length?(null==ae?y=F=null:F=D(y=ae),W):y},W}Object.defineProperty(Sf,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"}),Object.defineProperty(Sf,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ah.classNames.concat([Sf.className])}),oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_,e){switch(_=+_,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,e):this._context.moveTo(_,e);break;case 1:this._point=2;default:this._context.lineTo(_,e)}}};class Tg extends Sf{constructor(){super(...arguments),Object.defineProperty(this,"_endIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:dv()}),Object.defineProperty(this,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:hv()}),Object.defineProperty(this,"_legendStroke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_legendFill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"strokes",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>cs._new(this._root,{themeTags:vo(this.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template]))}),Object.defineProperty(this,"fills",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>cs._new(this._root,{themeTags:vo(this.strokes.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template]))}),Object.defineProperty(this,"_fillTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousPoint",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]}),Object.defineProperty(this,"_dindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_sindex",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this._fillGenerator.y0(function(e){return e[3]}),this._fillGenerator.x0(function(e){return e[2]}),this._fillGenerator.y1(function(e){return e[1]}),this._fillGenerator.x1(function(e){return e[0]}),super._afterNew()}makeStroke(e){const t=this.mainContainer.children.push(e.make());return e.push(t),t}makeFill(e){const t=this.mainContainer.children.push(e.make());return e.push(t),t}_updateChildren(){this._strokeTemplate=void 0,this._fillTemplate=void 0;let e=this.get("xAxis"),t=this.get("yAxis");if(this.isDirty("stroke")){const r=this.get("stroke");this.strokes.template.set("stroke",r);const h=this._legendStroke;h&&h.states.lookup("default").set("stroke",r)}if(this.isDirty("fill")){const r=this.get("fill");this.fills.template.set("fill",r);const h=this._legendFill;h&&h.states.lookup("default").set("fill",r)}if(this.isDirty("curveFactory")){const r=this.get("curveFactory");r&&(this._strokeGenerator.curve(r),this._fillGenerator.curve(r))}if(e.inited&&t.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty||this.isDirty("connect")||this.isDirty("curveFactory")){this.fills.each(ge=>{ge.setPrivate("visible",!1)}),this.strokes.each(ge=>{ge.setPrivate("visible",!1)}),this.axisRanges.each(ge=>{let ae=ge.fills;ae&&ae.each(ce=>{ce.setPrivate("visible",!1)});let be=ge.strokes;be&&be.each(ce=>{ce.setPrivate("visible",!1)})});let r=this.startIndex(),h=this.strokes.template.get("templateField"),y=this.fills.template.get("templateField"),D=!0,F=!0;h&&(D=!1),y&&(F=!1);for(let ge=r-1;ge>=0;ge--){let ae=this.dataItems[ge],be=!0,ce=ae.dataContext;if(h&&ce[h]&&(D=!0),y&&ce[y]&&(F=!0),Oe(this._valueFields,pt=>{un(ae.get(pt))||(be=!1)}),be&&D&&F){r=ge;break}}let G=this.dataItems.length,W=this.endIndex();if(W<G){W++;for(let ge=W;ge<G;ge++){let ae=this.dataItems[ge],be=!0;if(Oe(this._valueFields,ce=>{un(ae.get(ce))||(be=!1)}),be){W=ge+1;break}}}if(r>0&&r--,this._endIndex=W,this._clearGraphics(),this._sindex=0,this._dindex=r,1==this.dataItems.length)this._startSegment(0);else for(;this._dindex<W-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;super._updateChildren()}_clearGraphics(){this.strokes.clear(),this.fills.clear()}_startSegment(e){let t=this._endIndex,r=t;const h=this.get("autoGapCount"),y=this.get("connect"),D=this.makeFill(this.fills),F=this._fillTemplate;F&&F!=this.fills.template&&(D.template=F),D.setPrivate("visible",!0);const W=this.makeStroke(this.strokes),ge=this._strokeTemplate;ge&&ge!=this.strokes.template&&(W.template=ge),W.setPrivate("visible",!0);let ae=this.get("xAxis"),be=this.get("yAxis"),ce=this.get("baseAxis"),pt=this.get("vcx",1),ke=this.get("vcy",1),ft=this._xField,xt=this._yField,Gt=this._xOpenField,Ht=this._yOpenField;const Ut=this.get("openValueXField"),Cn=this.get("openValueYField");Ut||(Gt=this._xField),Cn||(Ht=this._yField);const Jn=this.get("stacked"),fi=ae.basePosition(),jn=be.basePosition();let or;or=ce===be?this._yField:this._xField;const Ci=[];let Ti=[];Ci.push(Ti);const Do=this.strokes.template.get("templateField"),Qi=this.fills.template.get("templateField");let eo=this.get("locationX",.5),rs=this.get("locationY",.5),fc=this.get("openLocationX",eo),Ar=this.get("openLocationY",rs);const Io=this.get("minDistance",0);let Sr,Au=this.fills.template.get("visible");this.axisRanges.length>0&&(Au=!0);let mc=!1;(Jn||Ut||Cn)&&(mc=!0);const Nl={points:Ti,segments:Ci,stacked:Jn,getOpen:mc,basePosX:fi,basePosY:jn,fillVisible:Au,xField:ft,yField:xt,xOpenField:Gt,yOpenField:Ht,vcx:pt,vcy:ke,baseAxis:ce,xAxis:ae,yAxis:be,locationX:eo,locationY:rs,openLocationX:fc,openLocationY:Ar,minDistance:Io};for(Sr=e;Sr<r;Sr++){this._dindex=Sr;const hl=this._dataItems[Sr];let Jc=hl.get(ft),gc=hl.get(xt);if(null==Jc||null==gc?y||(Ti=[],Ci.push(Ti),Nl.points=Ti):this._getPoints(hl,Nl),Do){let oa=hl.dataContext[Do];if(oa){if(oa instanceof us||(oa=us.new(oa)),this._strokeTemplate=oa,Sr>e){r=Sr;break}W.template=oa}}if(Qi){let oa=hl.dataContext[Qi];if(oa){if(oa instanceof us||(oa=us.new(oa)),this._fillTemplate=oa,Sr>e){r=Sr;break}D.template=oa}}if(!y){let oa=this.dataItems[Sr+1];oa&&ce.shouldGap(hl,oa,h,or)&&(Ti=[],Ci.push(Ti),Nl.points=Ti)}}D.setRaw("userData",[e,Sr]),W.setRaw("userData",[e,Sr]),Sr===t&&this._endLine(Ti,Ci[0][0]),W&&this._drawStroke(W,Ci),D&&this._drawFill(D,Ci),this.axisRanges.each(hl=>{const Jc=hl.container,oa=this.makeFill(hl.fills);Jc&&Jc.children.push(oa),oa.setPrivate("visible",!0),this._drawFill(oa,Ci);const uh=this.makeStroke(hl.strokes);Jc&&Jc.children.push(uh),uh.setPrivate("visible",!0),this._drawStroke(uh,Ci),oa.setRaw("userData",[e,Sr]),uh.setRaw("userData",[e,Sr])})}_getPoints(e,t){let r=t.points,h=e.get("locationX",t.locationX),y=e.get("locationY",t.locationY),D=t.xAxis.getDataItemPositionX(e,t.xField,h,t.vcx),F=t.yAxis.getDataItemPositionY(e,t.yField,y,t.vcy);if(this._shouldInclude(D)){const G=this.getPoint(D,F),W=[G.x,G.y];if(G.x+=this._x,G.y+=this._y,e.set("point",G),t.fillVisible){let ge=D,ae=F;if(t.baseAxis===t.xAxis?ae=t.basePosY:t.baseAxis===t.yAxis&&(ge=t.basePosX),t.getOpen){let ce=e.get(t.xOpenField),pt=e.get(t.yOpenField);if(null!=ce&&null!=pt){let ke=e.get("openLocationX",t.openLocationX),ft=e.get("openLocationY",t.openLocationY);if(t.stacked){let xt=e.get("stackToItemX"),Gt=e.get("stackToItemY");xt?(ge=t.xAxis.getDataItemPositionX(xt,t.xField,ke,xt.component.get("vcx")),ro(ge)&&(ge=t.basePosX)):ge=t.yAxis===t.baseAxis?t.basePosX:t.xAxis.getDataItemPositionX(e,t.xOpenField,ke,t.vcx),Gt?(ae=t.yAxis.getDataItemPositionY(Gt,t.yField,ft,Gt.component.get("vcy")),ro(ae)&&(ae=t.basePosY)):ae=t.xAxis===t.baseAxis?t.basePosY:t.yAxis.getDataItemPositionY(e,t.yOpenField,ft,t.vcy)}else ge=t.xAxis.getDataItemPositionX(e,t.xOpenField,ke,t.vcx),ae=t.yAxis.getDataItemPositionY(e,t.yOpenField,ft,t.vcy)}}let be=this.getPoint(ge,ae);W[2]=be.x,W[3]=be.y}if(t.minDistance>0){const be=W[2],ce=W[3],pt=this._previousPoint,xt=pt[2],Gt=pt[3];(Math.hypot(W[0]-pt[0],W[1]-pt[1])>t.minDistance||be&&ce&&Math.hypot(be-xt,ce-Gt)>t.minDistance)&&(r.push(W),this._previousPoint=W)}else r.push(W)}}_endLine(e,t){}_drawStroke(e,t){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",r=>{Oe(t,h=>{this._strokeGenerator.context(r),this._strokeGenerator(h)})})}_drawFill(e,t){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",r=>{Oe(t,h=>{this._fillGenerator.context(r),this._fillGenerator(h)})})}_processAxisRange(e){super._processAxisRange(e),e.fills=new Ea(us.new({}),()=>cs._new(this._root,{themeTags:vo(e.fills.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template,e.fills.template])),e.strokes=new Ea(us.new({}),()=>cs._new(this._root,{themeTags:vo(e.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template,e.strokes.template]))}createLegendMarker(e){const t=this.get("legendDataItem");if(t){const r=t.get("marker"),h=t.get("markerRectangle");h&&h.setPrivate("visible",!1),r.set("background",dc.new(r._root,{fillOpacity:0,fill:ec(0)}));const y=r.children.push(cs._new(r._root,{themeTags:["line","series","legend","marker","stroke"],interactive:!1},[this.strokes.template]));this._legendStroke=y;const D=r.children.push(cs._new(r._root,{themeTags:["line","series","legend","marker","fill"]},[this.fills.template]));this._legendFill=D;const F=this._root.interfaceColors.get("disabled");if(y.states.create("disabled",{fill:F,stroke:F}),D.states.create("disabled",{fill:F,stroke:F}),this.bullets.length>0){const G=this.bullets.getIndex(0);if(G){const W=G(r._root,this,new Ip(this,{legend:!0},{}));if(W){const ge=W.get("sprite");ge instanceof cs&&ge.states.create("disabled",{fill:F,stroke:F}),ge&&(ge.set("tooltipText",void 0),ge.set("tooltipHTML",void 0),r.children.push(ge),ge.setAll({x:r.width()/2,y:r.height()/2}),r.events.on("boundschanged",()=>{ge.setAll({x:r.width()/2,y:r.height()/2})}))}}}}}}Object.defineProperty(Tg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineSeries"}),Object.defineProperty(Tg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sf.classNames.concat([Tg.className])});class m_{constructor(e,t,r){this.platformId=e,this.zone=t,this.indexInfoService=r}ngOnInit(){}browserOnly(e){(0,gn.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{const e=yf.new(this.id),t=gf.new(e);t.rule("AxisLabel",["minor"]).setAll({direction:"rtl"}),t.rule("Grid",["minor"]).setAll({strokeOpacity:.08}),e.setThemes([ry.new(e),t]);const r=e.container.children.push(h_.new(e,{panX:!1,panY:!1,wheelX:"panX",wheelY:"zoomX",paddingLeft:85,paddingRight:45}));r.set("cursor",p_.new(e,{behavior:"zoomX"})).lineY.set("visible",!1);const y=r.xAxes.push(Uh.new(e,{categoryField:"date",renderer:ym.new(e,{tooltip:Zc.new(e,{})})})),D=r.yAxes.push(qc.new(e,{renderer:Pp.new(e,{})}));y.data.setAll(this.dataSource);const F=y.get("renderer"),G=D.get("renderer");F.labels.template.setAll({fontFamily:"IranSans",textAlign:"center"}),G.labels.template.setAll({fontFamily:"IranSans"});const W=r.series.push(Tg.new(e,{name:"Series",xAxis:y,yAxis:D,valueYField:"value",categoryXField:"date",tooltip:Zc.new(e,{labelHTML:"<small>{valueY}</small>"})}));W.bullets.push(function(){const ae=mm.new(e,{radius:5,fill:W.get("fill")});return Tf.new(e,{sprite:ae})}),r.set("scrollbarX",d_.new(e,{orientation:"horizontal"})),W.data.setAll(this.dataSource),W.appear(1e3),r.appear(1e3,100),this.root=e})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}static#e=this.\u0275fac=function(t){return new(t||m_)(i.Y36(i.Lbi),i.Y36(i.R0b),i.Y36(Bo))};static#t=this.\u0275cmp=i.Xpm({type:m_,selectors:[["pfo-line-chart"]],inputs:{id:"id",value:"value",chartStyle:"chartStyle",dataSource:"dataSource"},standalone:!0,features:[i.jDz],decls:1,vars:3,consts:[[1,"chart",3,"id"]],template:function(t,r){1&t&&i._UZ(0,"div",0),2&t&&(i.Akn(r.chartStyle),i.Q6J("id",r.id))},dependencies:[gn.ez],styles:[".chart[_ngcontent-%COMP%]{padding:20px;overflow:hidden}"]})}class Dg extends ah{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>br._new(this._root,{themeTags:vo(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:vo(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:lh.new(this._root,{themeTags:vo(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:vo(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template]))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>br._new(this._root,{themeTags:vo(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template]))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>hc._new(this._root,{themeTags:vo(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template]))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>hc._new(this._root,{themeTags:vo(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template]))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>lh._new(this._root,{themeTags:vo(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template]))})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(e){const t=this.children.push(this.itemContainers.make());return t._setDataItem(e),this.itemContainers.push(t),t.states.create("disabled",{}),t}makeMarker(){const e=this.markers.make();return this.markers.push(e),e.states.create("disabled",{}),e}makeLabel(){const e=this.labels.make();return e.states.create("disabled",{}),e}makeValueLabel(){const e=this.valueLabels.make();return e.states.create("disabled",{}),e}makeMarkerRectangle(){const e=this.markerRectangles.make();return e.states.create("disabled",{}),e}processDataItem(e){super.processDataItem(e);const t=this.makeItemContainer(e),r=this.get("nameField"),h=this.get("fillField"),y=this.get("strokeField");if(t){const D=this.get("clickTarget","itemContainer"),F=e.dataContext;F&&F.set&&F.set("legendDataItem",e),t._setDataItem(e),e.set("itemContainer",t);const G=this.makeMarker();if(G){t.children.push(G),G._setDataItem(e),e.set("marker",G);const ae=this.get("useDefaultMarker"),be=G.children.push(this.makeMarkerRectangle());let ce=e.get("fill"),pt=e.get("stroke");e.set("markerRectangle",be),F&&F.get&&(ce=F.get(h,ce),pt=F.get(y,pt)),pt||(pt=ce),ae?F.on&&(F.on(h,()=>{be.set("fill",F.get(h))}),F.on(y,()=>{be.set("stroke",F.get(y))})):F&&F.createLegendMarker&&F.createLegendMarker(),be.setAll({fill:ce,stroke:pt});const ke=F.component;ke&&ke.updateLegendMarker&&ke.updateLegendMarker(F)}const W=this.makeLabel();if(W){t.children.push(W),W._setDataItem(e),e.set("label",W),W.text.on("text",()=>{t.setRaw("ariaLabel",W.text._getText()+("none"!==this.get("clickTarget")?"; "+this._t("Press ENTER to toggle"):"")),t.markDirtyAccessibility()}),F&&F.get&&e.set("name",F.get(r));let ae=e.get("name");ae&&W.set("text",ae)}const ge=this.makeValueLabel();if(ge&&(t.children.push(ge),ge._setDataItem(e),e.set("valueLabel",ge)),F&&F.show&&(F.on("visible",ae=>{t.set("disabled",!ae)}),F.get("visible")||t.set("disabled",!0),"none"!=D)){let ae=t;"marker"==D&&(ae=G),this._addClickEvents(ae,F,e)}this.children.values.sort((ae,be)=>{const ce=ae.dataItem.dataContext,pt=be.dataItem.dataContext;if(ce&&pt){const ke=this.data.indexOf(ce),ft=this.data.indexOf(pt);if(ke>ft)return 1;if(ke<ft)return-1}return 0}),F&&F.updateLegendValue&&F.updateLegendValue()}}_addClickEvents(e,t,r){e.set("cursorOverStyle","pointer"),e.events.on("pointerover",()=>{const h=t.component;h&&h.hoverDataItem&&h.hoverDataItem(t)}),e.events.on("pointerout",()=>{const h=t.component;h&&h.hoverDataItem&&h.unhoverDataItem(t)}),e.events.on("click",()=>{const h=r.get("label").text._getText();t.show&&t.isHidden&&(t.isHidden()||!1===t.get("visible"))?(t.show(),e.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,h))):t.hide&&(t.hide(),e.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,h)))})}disposeDataItem(e){super.disposeDataItem(e);const t=e.dataContext;t&&t.get&&t.get("legendDataItem")==e&&t.set("legendDataItem",void 0);let r=e.get("itemContainer");r&&(this.itemContainers.removeValue(r),r.dispose());let h=e.get("marker");h&&(this.markers.removeValue(h),h.dispose());let y=e.get("markerRectangle");y&&(this.markerRectangles.removeValue(y),y.dispose());let D=e.get("label");D&&(this.labels.removeValue(D),D.dispose());let F=e.get("valueLabel");F&&(this.valueLabels.removeValue(F),F.dispose())}}Object.defineProperty(Dg,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"}),Object.defineProperty(Dg,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ah.classNames.concat([Dg.className])});const S0=class pv extends gf{setupDefaultRules(){super.setupDefaultRules(),this.rule("ColorSet").setAll({colors:[ti.fromHex(2634320),ti.fromHex(9448493),ti.fromHex(13976381),ti.fromHex(15750208)],reuse:!1,passOptions:{lightness:.05,hue:0}})}},E0=class sy extends gf{setupDefaultRules(){super.setupDefaultRules(),this.rule("ColorSet").setAll({colors:[ti.fromHex(15975168),ti.fromHex(8869522),ti.fromHex(15959040),ti.fromHex(10603249),ti.fromHex(12451890),ti.fromHex(12759680),ti.fromHex(8684674),ti.fromHex(34902),ti.fromHex(15110060),ti.fromHex(26533),ti.fromHex(16356217),ti.fromHex(6311575),ti.fromHex(16164352),ti.fromHex(11748460),ti.fromHex(14471936),ti.fromHex(8924439),ti.fromHex(9287168),ti.fromHex(6636834),ti.fromHex(14833698),ti.fromHex(2833702),ti.fromHex(15922164),ti.fromHex(2236962)],reuse:!0})}},fv=["id",""];class g_{constructor(e,t,r){this.platformId=e,this.zone=t,this.renderer=r,this.theme="kelly",this.dataSource=[]}ngOnChanges(e){console.log(e.dataSource),e.dataSource&&this.root&&(this.root.dispose(),this.ngAfterViewInit())}browserOnly(e){(0,gn.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngAfterViewInit(){this.renderer.parentNode(this.renderer.selectRootElement("pfo-donut-chart",!0)),this.browserOnly(()=>{const h=yf.new(this.id);h.setThemes("dataviz"===this.theme?[S0.new(h)]:[E0.new(h)]);const y=h.container.children.push(bg.new(h,{layout:h.verticalLayout,innerRadius:Ha(50)})),D=y.series.push(Bh.new(h,{valueField:"percent",categoryField:"securitySymbol",alignLabels:!1,legendLabelText:"{securitySymbol}",legendValueText:"{percent}%"}));D.labels.template.setAll({text:"{percent}%",textType:"circular",centerX:0,centerY:0}),D.data.setAll(this.dataSource),D.slices.template.set("tooltipText","[bold]{percent}% : {securitySymbol}");const F=y.children.push(Dg.new(h,{centerX:Ha(40),x:Ha(40),paddingLeft:25,paddingTop:25,paddingBottom:25}));F.labels.template.setAll({maxWidth:60,width:60}),F.valueLabels.template.setAll({textAlign:"right"}),F.data.setAll(D.dataItems),D.appear(2e3,100),this.root=h})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}static#e=this.\u0275fac=function(t){return new(t||g_)(i.Y36(i.Lbi),i.Y36(i.R0b),i.Y36(i.Qsj))};static#t=this.\u0275cmp=i.Xpm({type:g_,selectors:[["pfo-donut-chart","id",""]],inputs:{id:"id",value:"value",chartStyle:"chartStyle",theme:"theme",dataSource:"dataSource"},standalone:!0,features:[i.TTD,i.jDz],attrs:fv,decls:2,vars:3,consts:[["dir","ltr",2,"width","100%","height","100%",3,"id"]],template:function(t,r){1&t&&(i.TgZ(0,"div"),i._UZ(1,"div",0),i.qZA()),2&t&&(i.Akn(r.chartStyle),i.xp6(1),i.Q6J("id",r.id))},dependencies:[gn.ez]})}class __ extends qc{constructor(){super(...arguments),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){this._settings.themeTags=vo(this._settings.themeTags,["axis"]),super._afterNew()}_adjustMinMax(e,t,r,h){let y;const D=this.getDurationFormatter(),F=this.get("baseUnit");if(this.setRaw("maxPrecision",0),"millisecond"==F||"second"==F||"minute"==F||"hour"==F){r<=1&&(r=1),r=Math.round(r);let G=t-e;0===G&&(G=Math.abs(t));let W=G/r,ge=[60,30,20,15,10,2,1],ae=1;"hour"==F&&(ge=[24,12,6,4,2,1]);for(let xt of ge)if(G/xt>r){ae=xt;break}let be=Math.ceil((t-e)/ae/r),ce=Math.log(Math.abs(be))*Math.LOG10E,pt=Math.pow(10,Math.floor(ce))/10;be=function H_(_,e){return _.reduce(function(t,r){return Math.abs(r-e)<Math.abs(t-e)?r:t})}(ge,be/pt)*pt,W=ae*be,y={min:e=Math.floor(e/W)*W,max:t=Math.ceil(t/W)*W,step:W}}else y=super._adjustMinMax(e,t,r,h);return this.setPrivateRaw("durationFormat",D.getFormat(y.step,y.max,F)),y}_formatText(e){return this.getDurationFormatter().format(e,this.getPrivate("durationFormat"),this.get("baseUnit"))}getTooltipText(e,t){const r=this.getDurationFormatter(),h=this.get("extraTooltipPrecision",0),y=this.getPrivate("stepDecimalPlaces",0)+h,D=tl(this.positionToValue(e),y);return r.format(D,this.getPrivate("durationFormat"),this.get("baseUnit"))}}Object.defineProperty(__,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DurationAxis"}),Object.defineProperty(__,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:qc.classNames.concat([__.className])});class Ef extends Sf{constructor(){super(...arguments),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGraphics(e,t){return this.makeColumn(t,e)}_makeFieldNames(){super._makeFieldNames();const e=this.get("xAxis"),t=this.get("yAxis"),r="CategoryAxis",h="ValueAxis";e.isType(r)&&(this.get("openCategoryXField")||(this._xOpenField=this._xField)),e.isType(h)&&(this.get("openValueXField")||(this._xOpenField=this._xField)),t.isType(r)&&(this.get("openCategoryYField")||(this._yOpenField=this._yField)),t.isType(h)&&(this.get("openValueYField")||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();const e=this.get("xAxis"),t=this.get("yAxis"),r=this.dataItems.length,h=Math.max(0,this.startIndex()-2),y=Math.min(this.endIndex()+2,r-1);if(e.inited&&t.inited)for(let D=h;D<=y;D++)this._createGraphics(this.dataItems[D])}_updateChildren(){const e=this.chart;e&&(this._ph=e.plotContainer.height(),this._pw=e.plotContainer.width());const t=this.get("xAxis"),r=this.get("yAxis"),h=this.get("baseAxis"),y=this.columns.template;this.isDirty("fill")&&null==y.get("fill")&&y.set("fill",this.get("fill")),this.isDirty("stroke")&&null==y.get("stroke")&&y.set("stroke",this.get("stroke"));let D=0,F=0,G=0;Oe(h.series,xt=>{if(xt instanceof Ef){const Gt=xt.get("stacked");Gt&&0==G&&F++,!Gt&&xt.get("clustered")&&F++}xt===this&&(D=F-1),G++}),this.get("clustered")||(D=0,F=1),0===F&&(F=1,D=0);const W=t.get("renderer"),ge=r.get("renderer"),ae="cellStartLocation",be="cellEndLocation",ce=W.get(ae,0),pt=W.get(be,1),ke=ge.get(ae,0),ft=ge.get(be,1);if(this._aLocationX0=ce+D/F*(pt-ce),this._aLocationX1=ce+(D+1)/F*(pt-ce),this._aLocationY0=ke+D/F*(ft-ke),this._aLocationY1=ke+(D+1)/F*(ft-ke),t.inited&&r.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty){const xt=this.dataItems.length;let Gt=Math.max(0,this.startIndex()-2),Ht=Math.min(this.endIndex()+2,xt-1);for(let Cn=0;Cn<Gt;Cn++)this._toggleColumn(this.dataItems[Cn],!1);let Ut=this.dataItems[Gt];for(let Cn=Gt;Cn<=Ht;Cn++){let Jn=this.dataItems[Cn];if(null!=Jn.get("valueX")&&null!=Jn.get("valueY")){if(Ut=Jn,Cn>0&&Gt>0)for(let fi=Cn-1;fi>=0;fi--){let jn=this.dataItems[fi];if(null!=jn.get("valueX")&&null!=jn.get("valueY")){Ut=jn;break}}break}this._toggleColumn(Jn,!1)}for(let Cn=Gt;Cn<=Ht;Cn++){let Jn=this.dataItems[Cn];this._updateGraphics(Jn,Ut),null!=Jn.get("valueX")&&null!=Jn.get("valueY")&&(Ut=Jn)}for(let Cn=Ht+1;Cn<xt;Cn++)this._toggleColumn(this.dataItems[Cn],!1)}}else this._skipped=!0;this.updateLegendMarker(this.get("tooltipDataItem")),super._updateChildren()}_createGraphics(e){let t=e.get("graphics");if(!t){t=this._makeGraphics(this.columns,e),e.set("graphics",t),t._setDataItem(e);const r=e.get("legendDataItem");if(r){const y=r.get("markerRectangle");if(y){const D=y.states.lookup("default");Oe(dg,F=>{const G=t.get(F,this.get(F));y.set(F,G),D.set(F,G)})}}let h=e.get("rangeGraphics");h&&Oe(h,y=>{y.dispose()}),h=[],e.setRaw("rangeGraphics",h),this.axisRanges.each(y=>{const D=y.container,F=this._makeGraphics(y.columns,e);h&&h.push(F),F.setPrivate("list",y.columns),D.children.push(F)})}}createAxisRange(e){return Oe(this.dataItems,t=>{const r=t.get("graphics");r&&(r.dispose(),t.set("graphics",void 0))}),super.createAxisRange(e)}_updateGraphics(e,t){let r=e.get("graphics");const h=this._xField,y=this._yField,D=e.get(h),F=e.get(y);if(null!=D&&null!=F){const G=this._xOpenField,W=this._yOpenField,ge=this.get("locationX",e.get("locationX",.5)),ae=this.get("locationY",e.get("locationY",.5)),be=this.get("openLocationX",e.get("openLocationX",ge)),ce=this.get("openLocationY",e.get("openLocationY",ae)),pt=r.get("width"),ke=r.get("height"),ft=this.get("stacked"),xt=this.get("xAxis"),Gt=this.get("yAxis"),Ht=this.get("baseAxis"),Ut=xt.get("start"),Cn=xt.get("end"),Jn=Gt.get("start"),fi=Gt.get("end");let jn,or,Ci,Ti,Do=this.get("vcy",1),Qi=this.get("vcx",1),eo=!1,rs=!1;if(Gt.isType("CategoryAxis")&&xt.isType("CategoryAxis")){let Ar=this._aLocationX0+be-.5,Io=this._aLocationX1+ge-.5;if(pt instanceof Or){let Sr=(Io-Ar)*(1-pt.value)/2;Ar+=Sr,Io-=Sr}if(jn=xt.getDataItemPositionX(e,G,Ar,Qi),or=xt.getDataItemPositionX(e,h,Io,Qi),Ar=this._aLocationY0+ce-.5,Io=this._aLocationY1+ae-.5,ke instanceof Or){let Sr=(Io-Ar)*(1-ke.value)/2;Ar+=Sr,Io-=Sr}Ci=Gt.getDataItemPositionY(e,W,Ar,Do),Ti=Gt.getDataItemPositionY(e,y,Io,Do),e.setRaw("point",{x:jn+(or-jn)/2,y:Ci+(Ti-Ci)/2})}else if(xt===Ht){let Ar=this._aLocationX0+be-.5,Io=this._aLocationX1+ge-.5;if(pt instanceof Or){let Sr=(Io-Ar)*(1-pt.value)/2;Ar+=Sr,Io-=Sr}if(jn=xt.getDataItemPositionX(e,G,Ar,Qi),or=xt.getDataItemPositionX(e,h,Io,Qi),Ci=Gt.getDataItemPositionY(e,y,ae,Do),this._yOpenField!==this._yField)Ti=Gt.getDataItemPositionY(e,W,ce,Do);else if(ft){let Sr=e.get("stackToItemY");Ti=Sr?Gt.getDataItemPositionY(Sr,y,ce,Sr.component.get("vcy")):Gt.basePosition()}else Ti=Gt.basePosition();e.setRaw("point",{x:jn+(or-jn)/2,y:Ci}),rs=!0}else if(Gt===Ht){let Ar=this._aLocationY0+ce-.5,Io=this._aLocationY1+ae-.5;if(ke instanceof Or){let Sr=(Io-Ar)*(1-ke.value)/2;Ar+=Sr,Io-=Sr}if(Ci=Gt.getDataItemPositionY(e,W,Ar,Do),Ti=Gt.getDataItemPositionY(e,y,Io,Do),or=xt.getDataItemPositionX(e,h,ge,Qi),this._xOpenField!==this._xField)jn=xt.getDataItemPositionX(e,G,be,Qi);else if(ft){let Sr=e.get("stackToItemX");jn=Sr?xt.getDataItemPositionX(Sr,h,be,Sr.component.get("vcx")):xt.basePosition()}else jn=xt.basePosition();eo=!0,e.setRaw("point",{x:or,y:Ci+(Ti-Ci)/2})}this._updateSeriesGraphics(e,r,jn,or,Ci,Ti,eo,rs),jn<Ut&&or<Ut||jn>Cn&&or>Cn||Ci<Jn&&Ti<=Jn||Ci>=fi&&Ti>fi||ro(jn)||ro(Ci)?this._toggleColumn(e,!1):this._toggleColumn(e,!0);let fc=e.get("rangeGraphics");fc&&Oe(fc,Ar=>{this._updateSeriesGraphics(e,Ar,jn,or,Ci,Ti,eo,rs)}),this._applyGraphicsStates(e,t)}}_updateSeriesGraphics(e,t,r,h,y,D,F,G){const W=t.get("width"),ge=t.get("height"),ae=t.get("maxWidth"),be=t.get("maxHeight"),ce=this.getPoint(r,y),pt=this.getPoint(h,D),ke=e.get("point");if(ke){const ft=this.getPoint(ke.x,ke.y);ke.x=ft.x+this._x,ke.y=ft.y+this._y}if(r=ce.x,h=pt.x,y=ce.y,D=pt.y,un(W)){const ft=(h-r-W)/2;r+=ft,h-=ft}if(un(ae)&&ae<Math.abs(h-r)){const ft=(h-r-ae)/2;r+=ft,h-=ft}if(un(ge)){const ft=(D-y-ge)/2;y+=ft,D-=ft}if(un(be)&&be<Math.abs(D-y)){const ft=(D-y-be)/2;y+=ft,D-=ft}this.get("adjustBulletPosition")&&(F&&(h=Math.min(Math.max(0,h),this._pw),r=Math.min(Math.max(0,r),this._pw)),G&&(y=Math.min(Math.max(0,y),this._ph),D=Math.min(Math.max(0,D),this._ph))),e.setRaw("left",r),e.setRaw("right",h),e.setRaw("top",y),e.setRaw("bottom",D),t.setPrivate("width",h-r),t.setPrivate("height",D-y),t.set("x",r),t.set("y",D-(D-y))}_handleDataSetChange(){super._handleDataSetChange(),Oe(this._dataItems,e=>{this._toggleColumn(e,!1)})}_applyGraphicsStates(e,t){const r=e.get("graphics"),h=r.states.lookup("dropFromOpen"),y=r.states.lookup("riseFromOpen"),D=r.states.lookup("dropFromPrevious"),F=r.states.lookup("riseFromPrevious");if(h||D||y||F){const G=this.get("xAxis"),W=this.get("yAxis"),ge=this.get("baseAxis");let ae,be,ce;ge===G&&W.isType("ValueAxis")?(ae=e.get(this._yOpenField),be=e.get(this._yField),ce=t.get(this._yField)):ge===W&&G.isType("ValueAxis")&&(ae=e.get(this._xOpenField),be=e.get(this._xField),ce=t.get(this._xField)),un(ae)&&un(be)&&(be<ae?h&&h.apply():y&&y.apply(),un(ce)&&(be<ce?D&&D.apply():F&&F.apply()))}}disposeDataItem(e){super.disposeDataItem(e);const t=e.get("graphics");t&&(this.columns.removeValue(t),t.dispose());const r=e.get("rangeGraphics");r&&Oe(r,h=>{const y=h.getPrivate("list");y&&y.removeValue(h),h.dispose()})}hideDataItem(e,t){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.hideDataItem.call(this,e,t)],y=e.get("graphics");y&&h.push(y.hide(t));const D=e.get("rangeGraphics");D&&Oe(D,F=>{h.push(F.hide(t))}),yield Promise.all(h)})}_toggleColumn(e,t){const r=e.get("graphics");r&&r.setPrivate("visible",t);const h=e.get("rangeGraphics");h&&Oe(h,D=>{D.setPrivate("visible",t)});const y=e.bullets;y&&Oe(y,D=>{D.setPrivate("hidden",!t)})}showDataItem(e,t){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,na.mG)(this,void 0,void 0,function*(){const h=[r.showDataItem.call(this,e,t)],y=e.get("graphics");y&&h.push(y.show(t));const D=e.get("rangeGraphics");D&&Oe(D,F=>{h.push(F.show(t))}),yield Promise.all(h)})}updateLegendMarker(e){let t=this.get("legendDataItem");if(this.get("useLastColorForLegendMarker")&&!e){const r=this.dataItems[this.endIndex()-1];r&&(e=r)}if(t){let r=this.columns.template;if(e){let y=e.get("graphics");y&&(r=y)}const h=t.get("markerRectangle");if(h&&!t.get("itemContainer").get("disabled")){const y=h.states.lookup("default");Oe(dg,D=>{const F=r.get(D,this.get(D));h.set(D,F),y.set(D,F)})}}}_getTooltipTarget(e){return"bullet"==this.get("seriesTooltipTarget")?super._getTooltipTarget(e):e.get("graphics")||this}}Object.defineProperty(Ef,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BaseColumnSeries"}),Object.defineProperty(Ef,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Sf.classNames.concat([Ef.className])});class bm extends Ef{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:new Ea(us.new({}),()=>lh._new(this._root,{position:"absolute",themeTags:vo(this.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template]))})}makeColumn(e,t){const r=this.mainContainer.children.push(t.make());return r._setDataItem(e),t.push(r),r}_processAxisRange(e){super._processAxisRange(e),e.columns=new Ea(us.new({}),()=>lh._new(this._root,{position:"absolute",themeTags:vo(e.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template,e.columns.template]))}}Object.defineProperty(bm,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColumnSeries"}),Object.defineProperty(bm,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ef.classNames.concat([bm.className])});class Mg{constructor(e,t){this.platformId=e,this.zone=t}browserOnly(e){(0,gn.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{const e=yf.new(this.id);new p.K,e.setThemes([ry.new(e)]);const r=e.container.children.push(h_.new(e,{panX:!1,panY:!1,wheelY:"none",layout:e.verticalLayout}));r.zoomOutButton.set("forceHidden",!0),r.get("colors")?.set("step",2);const h=r.xAxes.push(Uh.new(e,{categoryField:"date",renderer:ym.new(e,{tooltip:Zc.new(e,{})})})),y=r.yAxes.push(qc.new(e,{renderer:Pp.new(e,{})}));h.data.setAll(this.dataSource);const D=h.get("renderer"),F=y.get("renderer");D.labels.template.setAll({fontFamily:"IranSans",textAlign:"center"}),F.labels.template.setAll({fontFamily:"IranSans"});const G=Pp.new(e,{});G.grid.template.set("forceHidden",!0);const W=r.yAxes.push(qc.new(e,{renderer:G,tooltip:Zc.new(e,{})})),ge=Pp.new(e,{opposite:!0});ge.grid.template.set("forceHidden",!0),r.yAxes.push(__.new(e,{baseUnit:"minute",renderer:ge,extraMax:.3}));const be=Pp.new(e,{});be.grid.template.set("forceHidden",!0);const ce=r.yAxes.push(qc.new(e,{renderer:be,forceHidden:!0})),pt=r.series.push(bm.new(e,{fill:ec(16733525),name:"\u062e\u0631\u0648\u062c \u0633\u0631\u0645\u0627\u06cc\u0647",xAxis:h,yAxis:W,valueYField:"outCapital",categoryXField:"date",tooltip:Zc.new(e,{labelText:"{valueY}"})})),ke=r.series.push(bm.new(e,{fill:ec(7389842),name:"\u0648\u0631\u0648\u062f \u0633\u0631\u0645\u0627\u06cc\u0647",xAxis:h,yAxis:W,valueYField:"inCapital",categoryXField:"date",tooltip:Zc.new(e,{labelText:"{valueY}"})})),ft=r.series.push(Tg.new(e,{stroke:ec(6160507),name:"\u0627\u0631\u0632\u0634 \u062e\u0627\u0644\u0635",xAxis:h,yAxis:ce,valueYField:"netAssetValue",categoryXField:"date",tooltip:Zc.new(e,{labelText:"{valueY}"})}));ft.strokes.template.setAll({strokeWidth:2}),ft.bullets.push(function(){const Gt=mm.new(e,{strokeWidth:2,radius:5,stroke:ft.get("stroke"),fill:e.interfaceColors.get("background")});return Tf.new(e,{sprite:Gt})}),pt.columns.template.events.on("click",function(Gt){console.log("Clicked on a column",Gt.target)}),pt.data.setAll(this.dataSource),ke.data.setAll(this.dataSource),ft.data.setAll(this.dataSource),r.set("cursor",p_.new(e,{xAxis:h,yAxis:ce})),r.children.push(Dg.new(e,{centerX:Ha(50),x:Ha(50),marginTop:15,marginBottom:35})).data.setAll(r.series.values),r.appear(1e3,100),this.root=e})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}makeSeries(e,t,r,h,y,D,F,G){const W=t.series.push(bm.new(e,{name:F,xAxis:y,yAxis:D,valueYField:G,categoryXField:"year"}));W.columns.template.setAll({tooltipText:"{name}, {categoryX}:{valueY}",width:Ha(90),tooltipY:0,strokeOpacity:0}),W.data.setAll(r),W.appear(),W.bullets.push(function(){return Tf.new(e,{locationY:0,sprite:hc.new(e,{text:"{valueY}",fill:e.interfaceColors.get("alternativeText"),centerY:0,centerX:Er,populateText:!0})})}),h.data.push(W)}static#e=this.\u0275fac=function(t){return new(t||Mg)(i.Y36(i.Lbi),i.Y36(i.R0b))};static#t=this.\u0275cmp=i.Xpm({type:Mg,selectors:[["pfo-column-line"]],inputs:{id:"id",chartStyle:"chartStyle",dataSource:"dataSource"},standalone:!0,features:[i.jDz],decls:2,vars:3,consts:[["dir","ltr",2,"width","100%","height","100%",3,"id"]],template:function(t,r){1&t&&(i.TgZ(0,"div"),i._UZ(1,"div",0),i.qZA()),2&t&&(i.Akn(r.chartStyle),i.xp6(1),i.Q6J("id",r.id))},dependencies:[gn.ez]})}Y.zl.extend({dictionary:{},enum:{BourseExperience:{LOW:"\u06a9\u0645",MEDIUM:"\u0645\u062a\u0648\u0633\u0637",HIGH:"\u0632\u06cc\u0627\u062f"},TransactionType:{WITHDRAW:"\u0628\u0631\u062f\u0627\u0634\u062a",DEPOSIT:"\u0648\u0627\u0631\u06cc\u0632"},OccupationStatus:{EMPLOYED:"\u0634\u0627\u063a\u0644",UNEMPLOYED:"\u0628\u06cc\u06a9\u0627\u0631"},MaritalStatus:{SINGLE:"\u0645\u062c\u0631\u062f",MARRIED:"\u0645\u062a\u0627\u0647\u0644"},ChangeStatusType:{CANCELLATION_OF_COOPERATION:"\u0644\u063a\u0648 \u0647\u0645\u06a9\u0627\u0631\u06cc",CANCELLATION_OF_LICENSE:"\u0644\u063a\u0648 \u0645\u062c\u0648\u0632",OTHER:"\u062f\u06cc\u06af\u0631"},PaymentPeriodType:{MONTHLY:"\u0645\u0627\u0647\u0627\u0646\u0647",YEARLY:"\u0633\u0627\u0644\u0627\u0646\u0647"},PillarType:{PORTFOLIO_MANAGER:"\u0645\u062f\u06cc\u0631 \u0633\u0628\u062f",BASKET_TRUSTEE:"\u0627\u0645\u06cc\u0646 \u0633\u0628\u062f \u06af\u0631\u062f\u0627\u0646"},PersonType:{INDIVIDUAL:"\u062d\u0642\u06cc\u0642\u06cc",LEGAL:"\u062d\u0642\u0648\u0642\u06cc"},CustomerType:{INDIVIDUAL:"\u0634\u062e\u0635 \u062d\u0642\u06cc\u0642\u06cc",LEGAL:"\u0634\u062e\u0635 \u062d\u0642\u0648\u0642\u06cc"},ProfitLossTypes:{PROFIT:"\u0633\u0648\u062f",LOSS:"\u0636\u0631\u0631"},EntryReason:{ENTRY_AT_BEGINNING:"\u0622\u0648\u0631\u062f\u0647 \u0633\u0631\u0645\u0627\u06cc\u0647 \u0627\u0628\u062a\u062f\u0627\u06cc \u062f\u0648\u0631\u0647",ENTRY_AT_DURING:"\u0648\u0631\u0648\u062f \u0633\u0631\u0645\u0627\u06cc\u0647 \u0637\u06cc \u062f\u0648\u0631\u0647"}},errorTranslators:{iranianMobileNumber:_=>"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",iranianNationalCode:_=>"\u06a9\u062f\u0645\u0644\u06cc \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",password:_=>"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0646\u0627\u062f\u0631\u0633\u062a \u0627\u0633\u062a.",noSpace:_=>"\u0641\u0636\u0627\u06cc \u062e\u0627\u0644\u06cc \u0645\u062c\u0627\u0632 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f",noUppercase:_=>"\u0628\u0627\u06cc\u062f \u062f\u0627\u0631\u0627\u06cc \u062d\u062f\u0627\u0642\u0644 1 \u062f\u0631 \u062d\u0631\u0641 \u0628\u0632\u0631\u06af \u0628\u0627\u0634\u062f",noLowercase:_=>"\u0628\u0627\u06cc\u062f \u062f\u0627\u0631\u0627\u06cc \u062d\u062f\u0627\u0642\u0644 1 \u062f\u0631 \u062d\u0631\u0641 \u06a9\u0648\u0686\u06a9 \u0628\u0627\u0634\u062f",noNumber:_=>"\u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 1 \u0639\u062f\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f",noSymbol:_=>"\u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 1 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u062e\u0627\u0635 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f",invalidLength:_=>"\u062a\u0639\u062f\u0627\u062f \u0646\u0627\u062f\u0631\u0633\u062a \u0627\u0633\u062a",passwordMismatch:_=>"\u0645\u0637\u0627\u0628\u0642\u062a \u0646\u062f\u0627\u0631\u062f",onlyNumber:_=>"\u062a\u0646\u0647\u0627 \u0639\u062f\u062f \u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",invalidRange:_=>"\u0639\u062f\u062f \u0648\u0627\u0631\u062f \u0634\u062f\u0647 \u0628\u0627\u06cc\u062f \u0628\u06cc\u0646 \u062d\u062f\u0627\u0642\u0644 \u0648 \u062d\u062f\u0627\u06a9\u062b\u0631 \u0628\u0627\u0634\u062f"}});class y_{static#e=this.\u0275fac=function(t){return new(t||y_)};static#t=this.\u0275mod=i.oAB({type:y_});static#n=this.\u0275inj=i.cJS({imports:[ku,js,Jo]})}class v_{validate(e){return bu(e.value)?null:(Rt(e.value,ya(e.value,"AMT[1-9]|TITLE[1-9]|DTL[1-9]")),ya(e.value,"AMT[1-9]|TITLE[1-9]|DTL[1-9]")?null:{invalidExpression:!0})}static#e=this.\u0275fac=function(t){return new(t||v_)};static#t=this.\u0275dir=i.lG2({type:v_,selectors:[["","pfoMathExpressionValidator",""]],features:[i._Bn([{provide:de.Cf,useExisting:(0,i.Gpc)(()=>v_),multi:!0}])]})}class ay{static#e=this.\u0275fac=function(t){return new(t||ay)};static#t=this.\u0275mod=i.oAB({type:ay});static#n=this.\u0275inj=i.cJS({imports:[gn.ez]})}class ly{constructor(){}validate(e){return(_=>{let e=_?.value;return/[+-]?([0-9]*[.])?[0-9]+/g.test(e)||!e?null:{onlyNumber:!0}})(e)}static#e=this.\u0275fac=function(t){return new(t||ly)};static#t=this.\u0275dir=i.lG2({type:ly,selectors:[["","pfoOnlyNumberWithFloat",""]],standalone:!0})}class b_{constructor(){}validate(e){return function I0(){let _=new RegExp(/^[A-Za-z_0-9]+$/);return e=>_.test(e.value)||!e.value?null:{englishCharacter:!0}}()(e)}static#e=this.\u0275fac=function(t){return new(t||b_)};static#t=this.\u0275dir=i.lG2({type:b_,selectors:[["","pfoEnglishCharacter",""]],exportAs:["pfoEnglishCharacter"],standalone:!0,features:[i._Bn([{provide:de.Cf,useExisting:b_,multi:!0}])]})}class x_{constructor(e,t){this.baseService=e,this.childService=t,this.nextTitle=o.o.dictionary.searchButtonTitle,this.backTitle=o.o.dictionary.clearButtonTitle,this.defaultSelection=o.o.dictionary.defaultSelectOption,this.pleaseSelect=o.o.dictionary.pleaseSelect,this.permision=Ve.y,this.filter=[],this._subscription=new fe.w0,this.toggleSearchBox=!0,this._dataSource=new Y.P3([]),this.sucessDeleteObserver={next:r=>{this.toastService.show(kt.SUCCESSFUL_DELETING,{style:"success"}),this.search()},error:r=>{},complete:()=>{}},this.searchModel={}}ngOnDestroy(){this.resetSubscriptions()}removeAndPushToFilterArr(e){if(console.log(e),e.value){const t=this.filter.findIndex(r=>r.fieldName===e.fieldName&&r.operator===e.operator);-1!==t&&this.filter.splice(t,1),this.filter.push({fieldName:e.fieldName,value:e.value,operator:e.operator})}}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(e){this._subscription.add(e)}set dataSource(e){this._dataSource=e}get dataSource(){return this._dataSource}set searchModel(e){this._searchModel=e}get searchModel(){return this._searchModel}clearSearchForm(){this.searchModel={}}clearAndRefreshSearchForm(){this.searchModel={},this.search()}clearDataSource(){this.dataSource=new Y.P3([])}reload(){this.search()}cleanData(e){for(const t in e)"undefined"===e[t]&&delete e[t];return e}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}static#e=this.\u0275fac=function(t){i.$Z()};static#t=this.\u0275prov=i.Yz7({token:x_,factory:x_.\u0275fac})}const O0=(_,e)=>e.id;class xm{constructor(e){this.baseService=e,this.nextTitle=o.o.dictionary.submitButtonTitle,this.backTitle=o.o.dictionary.backButtonTitle,this.defaultSelection=o.o.dictionary.defaultSelectOption,this.pleaseSelect=o.o.dictionary.pleaseSelect,this._subscription=new fe.w0,this.sucessObserver={next:t=>{this.toastService.show(u.SUCCESSFUL_CREATING,{style:"success"}),this.back()},error:t=>{},complete:()=>{}},this.trackByFn=O0,this.formModel={}}ngOnDestroy(){this.resetSubscriptions()}findMode(){const e=history.state;e&&e.mode&&(this.mode=e.mode)}get isAddMode(){return"add"===this.mode}get isEditMode(){return"edit"===this.mode}get isShowMode(){return"show"===this.mode}setPropertyValue(e,t,r){e[t]=r}areAllPropsUndefined(e){return Object.values(e).every(t=>void 0===t)}areAllRequiredKeysAssigned(e,t){return t.every(r=>null!=e[r])}getRequiredKeys(e){return Object.keys(e).filter(t=>null!=e[t])}filterObjectByKeyList(e,t){return Object.keys(e).reduce((r,h)=>(t.includes(h)&&(r[h]=e[h]),r),{})}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(e){this._subscription.add(e)}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}get formBuilderService(){return this.baseService.formBuilderService}static#e=this.\u0275fac=function(t){return new(t||xm)(i.LFG(we))};static#t=this.\u0275prov=i.Yz7({token:xm,factory:xm.\u0275fac})}class mv{}class gv{constructor(){this.role=new mv,this.provinces=[],this.mines=[]}}class _v{}class uy{constructor(){this.roles=[]}}class k0{}class R0{constructor(){this.cities=[]}}var cy=N(2017);class vv{constructor(){this.balance=0,this.availableBalance=0}}class F0{}class w_{constructor(){this.location=new _v,this.materialIds=[]}}class xv{}class dy{}class wm{constructor(){this.autoModel=new xv,this.person=new dy,this.mine=new w_}}class bb{}var hy=N(9287);class Af{constructor(e,t,r){this.securityService=e,this.identityManager=t,this.router=r}resolve(e,t){return localStorage.getItem("token")?this.securityService.getUserIdentity().pipe((0,fn.U)(r=>(r&&(console.log(r),this.identityManager.set(new cy.O(r.personCode,r.token,r.displayName,r.roles,r.permissions))),!0))):(this.router.navigate(["access/signin"]),!1)}static#e=this.\u0275fac=function(t){return new(t||Af)(i.LFG(hy.I),i.LFG(Y.cq),i.LFG(q.F0))};static#t=this.\u0275prov=i.Yz7({token:Af,factory:Af.\u0275fac,providedIn:"root"})}var Nd=N(8702);class C_ extends Nd.e{constructor(e){super(e,"permission")}getCheckedItems(e){const t=[];return e.filter(r=>r.isChecked).forEach(r=>{r.permisionId&&t.push(r.permisionId)}),t}static#e=this.\u0275fac=function(t){return new(t||C_)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:C_,factory:C_.\u0275fac,providedIn:"root"})}var wv=N(3739);const Cm="person";class Tm extends Nd.e{constructor(e){super(e,Cm)}editPersonRole(e){return this.http.put(Cm+"/change-role",e)}profile(){return this.http.get(Cm+"/profile")}editProfile(e){return this.http.put(Cm+"/edit-profile",e)}static#e=this.\u0275fac=function(t){return new(t||Tm)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Tm,factory:Tm.\u0275fac})}class Dm extends Nd.e{constructor(e){super(e,"province")}getCheckedItems(e){const t=[];return e.filter(r=>r.isChecked).forEach(r=>{r.id&&t.push(r)}),t}static#e=this.\u0275fac=function(t){return new(t||Dm)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Dm,factory:Dm.\u0275fac,providedIn:"root"})}class Sg extends Nd.e{constructor(e){super(e,"city")}static#e=this.\u0275fac=function(t){return new(t||Sg)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Sg,factory:Sg.\u0275fac,providedIn:"root"})}class T_ extends Nd.e{constructor(e){super(e,"report")}static#e=this.\u0275fac=function(t){return new(t||T_)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:T_,factory:T_.\u0275fac})}N(4853);const fy="payment";class my extends Nd.e{constructor(e){super(e,fy)}getPayment(e){return this.http.get(fy+`/${e}/payment-item`)}static#e=this.\u0275fac=function(t){return new(t||my)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:my,factory:my.\u0275fac,providedIn:"root"})}const gy="purches";class D_ extends Nd.e{constructor(e){super(e,gy)}uploadDocument(e){return this.http.post(`${gy}/receipt-image`,e,{contentType:"multipart/form-data",reportProgress:!0,observe:"events"})}static#e=this.\u0275fac=function(t){return new(t||D_)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:D_,factory:D_.\u0275fac,providedIn:"root"})}class _y extends Nd.e{constructor(e){super(e,"subscription")}static#e=this.\u0275fac=function(t){return new(t||_y)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:_y,factory:_y.\u0275fac,providedIn:"root"})}var U0=N(871);class Mm extends Nd.e{constructor(e){super(e,"auto-brand")}static#e=this.\u0275fac=function(t){return new(t||Mm)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Mm,factory:Mm.\u0275fac,providedIn:"root"})}class Sm extends Nd.e{constructor(e){super(e,"auto-model")}static#e=this.\u0275fac=function(t){return new(t||Sm)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Sm,factory:Sm.\u0275fac,providedIn:"root"})}var Mv=N(686);const Eg="auto";class Ag extends Nd.e{constructor(e){super(e,Eg)}getAutosList(e,t){return this.http.getPagable(`${Eg}/autos-list`,this.filter(e,t))}getAutosHistory(e,t){return this.http.getPagable(`${Eg}/autos-history`,this.filter(e,t))}getByIdAutoTransport(e,t,r="",h){return this.http.get(`${Eg}/${e}/autos-history-details`)}getByIdAutoOnline(e,t,r="",h){return this.http.get(`${Eg}/${e}/auto-online`)}static#e=this.\u0275fac=function(t){return new(t||Ag)(i.LFG(Y.OE))};static#t=this.\u0275prov=i.Yz7({token:Ag,factory:Ag.\u0275fac,providedIn:"root"})}N(1968),N(107)},1968:(tn,nt,N)=>{"use strict";N.d(nt,{b:()=>O});var o=N(1571);class O{intercept(fe,Y){const i=this.getToken();if(""!==i){const q=fe.clone({headers:fe.headers.append("Authorization","Bearer "+i)});return Y.handle(q)}return Y.handle(fe)}getToken(){return localStorage.getItem("token")||""}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275prov=o.Yz7({token:O,factory:O.\u0275fac})}},945:(tn,nt,N)=>{"use strict";N.d(nt,{o:()=>O});const O=N(3959).zl.extend({dictionary:{},enum:{AllowedUserCountEnum:{SingleUser:"\u062a\u06a9 \u06a9\u0627\u0631\u0628\u0631\u0647",TwoUser:"\u062f\u0648 \u06a9\u0627\u0631\u0628\u0631\u0647 ",NoLimited:"\u0628\u062f\u0648\u0646 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a"},DocumentTypeEnum:{ReceiptPicture:"\u062a\u0635\u0648\u06cc\u0631 \u0631\u0648\u06cc \u06a9\u0627\u0631\u062a \u0645\u0644\u06cc"},PaymentStatusEnum:{Pending:"\u062f\u0631 \u0627\u0646\u062a\u0638\u0627\u0631",Success:"\u0645\u0648\u0641\u0642\u06cc\u062a",Failed:"\u062e\u0637\u0627",Rejected:"\u0631\u062f \u0634\u062f\u0647"}},errorTranslators:{}})},8702:(tn,nt,N)=>{"use strict";N.d(nt,{e:()=>u}),N(3959);var O=N(1571);class u{constructor(Y,i){this.http=Y,this.baseUrl=i}set setBaseUrl(Y){this.baseUrl=Y}get getBaseUrl(){return this.baseUrl}save(Y,i="",q,de){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(i)}`,Y,{...q,query:de})}getById(Y,i="",q="",de,we){return this.http.get(`${this.baseUrl}${i}/${Y}${this.makeConcatUrl(q)}`,{...de,query:we})}post(Y,i="",q,de){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(i)}`,Y,{...q,query:de})}get(Y,i,q="",de){return this.http.getPagable(`${this.baseUrl}${this.makeConcatUrl(q)}`,Y,{...de,query:i})}read(Y,i="",q){return this.http.get(`${this.baseUrl}${this.makeConcatUrl(i)}`,{...q,query:Y})}put(Y,i,q="",de,we){const Ve=i?`${this.baseUrl}/${i}${this.makeConcatUrl(q)}`:`${this.baseUrl}${this.makeConcatUrl(q)}`;return this.http.put(Ve,Y,{...de,query:we})}patch(Y,i,q="",de,we){const Ve=i?`${this.baseUrl}/${i}${this.makeConcatUrl(q)}`:`${this.baseUrl}${this.makeConcatUrl(q)}`;return this.http.patch(Ve,Y,{...we,query:de})}delete(Y,i="",q,de){return this.http.delete(`${this.baseUrl}/${Y}${this.makeConcatUrl(i)}`,{...q,query:de})}makeConcatUrl(Y){return Y?`/${Y}`:""}filter(Y,i){return Y.filters=[],i&&i.length>0&&i.forEach(q=>Y.addFilter(q.fieldName,q.value,q.operator)),Y.page&&(Y.page.size=10),Y}static#e=this.\u0275fac=function(i){O.$Z()};static#t=this.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}},9287:(tn,nt,N)=>{"use strict";N.d(nt,{I:()=>Y});var o=N(3959),O=N(2017),u=N(1571),fe=N(529);class Y{constructor(q,de,we){this.http=q,this.httpClient=de,this.identityStore=we,this.baseUrl="security",this.UserbaseUrl="user",this.personbaseUrl="person"}signUp(q){return this.httpClient.post(`api/${this.baseUrl}/user-register`,q)}activate(q){return this.http.post(`${this.baseUrl}/user-register-active`,q)}signIn(q){return this.httpClient.post(`api/${this.baseUrl}/login`,q)}signout(){this.clearUser()}getUserIdentity(){return this.http.get(`${this.baseUrl}/identity`)}setAuthenticateUser(){localStorage.setItem(O.S,"true")}isAuthenticateUser(){return!!localStorage.getItem(O.S)}clearUser(){this.identityStore.set(void 0),localStorage.clear()}setUserToken(q){localStorage.setItem("token",q)}getCaptcha(){return this.http.get(`${this.baseUrl}/get-captcha`,{responseType:"blob"})}sendOtpForgetPassword(q){return this.httpClient.post(`api/${this.baseUrl}/forget-pass`,q)}onChangeForgetPassword(q){return this.http.post(`${this.baseUrl}/forget-pass-validate`,q)}resetPassword(q){return this.http.put(`api/${this.personbaseUrl}/reset-pass`,q)}static#e=this.\u0275fac=function(de){return new(de||Y)(u.LFG(o.OE),u.LFG(fe.eN),u.LFG(o.cq))};static#t=this.\u0275prov=u.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}},4853:(tn,nt,N)=>{"use strict";N.d(nt,{B:()=>Y});var o=N(8702),O=N(3959),u=N(1571);const fe="account";class Y extends o.e{constructor(q){super(q,fe)}getBalance(){return this.http.get(`/${fe}/sum-accounts`)}static#e=this.\u0275fac=function(de){return new(de||Y)(u.LFG(O.OE))};static#t=this.\u0275prov=u.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}},686:(tn,nt,N)=>{"use strict";N.d(nt,{F:()=>Y});var o=N(3959),O=N(8702),u=N(1571);class Y extends O.e{constructor(q){super(q,"driver")}static#e=this.\u0275fac=function(de){return new(de||Y)(u.LFG(o.OE))};static#t=this.\u0275prov=u.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}},871:(tn,nt,N)=>{"use strict";N.d(nt,{C:()=>Y});var o=N(8702),O=N(3959),u=N(1571);class Y extends o.e{constructor(q){super(q,"mine")}getCheckedItems(q){const de=[];return q.filter(we=>we.isChecked).forEach(we=>{we&&de.push(we)}),de}static#e=this.\u0275fac=function(de){return new(de||Y)(u.LFG(O.OE))};static#t=this.\u0275prov=u.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}},3739:(tn,nt,N)=>{"use strict";N.d(nt,{N:()=>Y});var o=N(8702),O=N(3959),u=N(1571);class Y extends o.e{constructor(q){super(q,"role")}getCheckedItems(q){const de=[];return q.filter(we=>we.isChecked).forEach(we=>{we.id&&de.push(we.id)}),de}static#e=this.\u0275fac=function(de){return new(de||Y)(u.LFG(O.OE))};static#t=this.\u0275prov=u.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}},1067:(tn,nt,N)=>{"use strict";var o=N(1481),O=N(3959),u=N(1716),fe=N(1571),Y=N(7109);class i{constructor(Ke,je,Be,Je){this.router=Ke,this.toast=je,this.httpErrorService=Be,this.securityService=Je,this.title="driver",this.httpErrorService.error.subscribe(gt=>{console.log(gt),gt.message&&this.toast.show(gt.message,{title:"\u062e\u0637\u0627",style:"error"}),(gt.status===O.VY.Unauthorized||gt.status===O.VY.InvalidAccessToken)&&(console.log(gt.status),this.securityService.clearUser(),this.router.navigate(["access/signin"]))})}static#e=this.\u0275fac=function(je){return new(je||i)(fe.Y36(Y.F0),fe.Y36(O.kl),fe.Y36(O.BN),fe.Y36(u.Il))};static#t=this.\u0275cmp=fe.Xpm({type:i,selectors:[["moneyon-root"]],decls:1,vars:0,template:function(je,Be){1&je&&fe._UZ(0,"router-outlet")},dependencies:[Y.lC],styles:["body[_ngcontent-%COMP%]{direction:rtl}"]})}const q=[{path:"",loadChildren:()=>N.e(296).then(N.bind(N,8856)).then(it=>it.SubsystemModule)}];var de=N(529),we=N(1968),Ve=N(6601);class De{static#e=this.\u0275fac=function(je){return new(je||De)};static#t=this.\u0275mod=fe.oAB({type:De,bootstrap:[i]});static#n=this.\u0275inj=fe.cJS({providers:[O.cq,O.NX,{provide:O.p4,useValue:"/api/"},{provide:de.TP,useClass:we.b,multi:!0},{provide:de.TP,useClass:O.n_,multi:!0}],imports:[o.b2,Ve.Wm,de.JF,Y.Bz.forRoot(q,{initialNavigation:"enabledBlocking"})]})}o.q6().bootstrapModule(De).catch(it=>console.error(it))},3959:(tn,nt,N)=>{"use strict";N.d(nt,{zt:()=>zs,Rm:()=>qa,U8:()=>pa,jn:()=>fa,P3:()=>Gn,NX:()=>pr,xk:()=>Xn.x,Jk:()=>Mn,dT:()=>Da,i8:()=>qt.i8,dU:()=>qt.dU,Td:()=>qt.Td,I$:()=>wo,tM:()=>Ue.t,zl:()=>Tr.zl,iK:()=>gt.iK,kx:()=>te.k,lv:()=>mn,n_:()=>mi.n_,BN:()=>mi.BN,OE:()=>mi.OE,p4:()=>mi.p4,VY:()=>mi.VY,G8:()=>ms.G8,SK:()=>zr,L$:()=>Se,iB:()=>On.i,in:()=>Yn,v:()=>Tr.v,rt:()=>Ts,kO:()=>Bs,Je:()=>X.Je,P7:()=>jl,n0:()=>ss.n,uO:()=>$s,u3:()=>X.u3,rL:()=>Yo.r,lX:()=>Yo.l,fv:()=>kn,EV:()=>uo,kl:()=>Us.k,Ah:()=>Tr.Qp,s1:()=>Vt.s,cq:()=>_r.c,As:()=>gt.As,n4:()=>Ot,N5:()=>ut.N,_I:()=>Ko._,OR:()=>Fu.OR,c4:()=>Ue.c,Yk:()=>gt.Yk});var o=N(4006),u=N(1571);class fe{constructor(){this.mtsEqualWith="",this.inequalityMessage=""}validate(me){return function O(Ge,me){return J=>J.value===Ge?null:{equalWith:{value:J.value,message:me}}}(this.mtsEqualWith,this.inequalityMessage)(me)}static#e=this.\u0275fac=function(J){return new(J||fe)};static#t=this.\u0275dir=u.lG2({type:fe,selectors:[["","mtsEqualWith",""]],inputs:{mtsEqualWith:"mtsEqualWith",inequalityMessage:"inequalityMessage"},exportAs:["mtsEqualWith"],features:[u._Bn([{provide:o.Cf,useExisting:fe,multi:!0}])]})}N(9789),N(8975);class we{validate(me){return function q(){return Ge=>function de(Ge){if(Ge){if(Ge?.length<11||0===parseInt(Ge,10)||0===parseInt(Ge.substr(3,6),10))return!1;const J=parseInt(Ge.substr(10,1),10),He=parseInt(Ge.substr(9,1),10)+2,zt=new Array(29,27,23,19,17);let hn=0;for(let Ii=0;Ii<10;Ii++)hn+=(He+parseInt(Ge.substr(Ii,1),10))*zt[Ii%5];return hn%=11,10===hn&&(hn=0),J===hn}return!1}(Ge.value)||!Ge.value?null:{iranianNationalId:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||we)};static#t=this.\u0275dir=u.lG2({type:we,selectors:[["","mtsNationalId",""]],exportAs:["mtsNationalId"],features:[u._Bn([{provide:o.Cf,useExisting:we,multi:!0}])]})}N(4148),N(6089);class Ke{constructor(){}validate(me){return function it(){const Ge=new RegExp("^[a-zA-Z0-9$@-_.]+$");return me=>Ge.test(me.value)||!me.value?null:{password:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||Ke)};static#t=this.\u0275dir=u.lG2({type:Ke,selectors:[["","mtsPassword",""]],exportAs:["mtsPassword"],features:[u._Bn([{provide:o.Cf,useExisting:Ke,multi:!0}])]})}class Be{constructor(){this.maxSize=5120}validate(me){return function je(Ge){return me=>{let J=me?.value;return J instanceof File&&J.size>1024*Ge?{maxFileSize:{maxSize:Ge,value:J}}:null}}(this.maxSize)(me)}static#e=this.\u0275fac=function(J){return new(J||Be)};static#t=this.\u0275dir=u.lG2({type:Be,selectors:[["","mtsMaxFileSize",""]],inputs:{maxSize:"maxSize"},exportAs:["mtsMaxFileSize"],features:[u._Bn([{provide:o.Cf,useExisting:Be,multi:!0}])]})}var gt=N(8196);class lt{constructor(){this.fileExtensions=gt.RY.ordinaries}validate(me){return function Je(Ge){return me=>{let J=me?.value;if(J instanceof File&&Ge&&Ge?.length>0){const He=J.name,zt=He.split("."),hn=zt[zt.length-1].toLowerCase();return Ge.find(Li=>Li===hn)?null:{fileExtension:{fileName:He,fileExtensions:Ge}}}return null}}(this.fileExtensions)(me)}static#e=this.\u0275fac=function(J){return new(J||lt)};static#t=this.\u0275dir=u.lG2({type:lt,selectors:[["","mtsFileExtension",""]],inputs:{fileExtensions:["fileExtension","fileExtensions"]},exportAs:["mtsFileExtension"],features:[u._Bn([{provide:o.Cf,useExisting:lt,multi:!0}])]})}N(1726);class ct{constructor(){this.mtsMinDate=""}validate(me){return function dt(Ge){const me=new Date(Ge);return J=>{const He=new Date(J.value);let zt=!0;return zt=null==J.value||null==J.value||!J.value||null==Ge||null==Ge||!Ge||me<He,zt?null:{invalidDate:!0}}}(this.mtsMinDate)(me)}static#e=this.\u0275fac=function(J){return new(J||ct)};static#t=this.\u0275dir=u.lG2({type:ct,selectors:[["","mtsMinDate",""]],inputs:{mtsMinDate:"mtsMinDate"},exportAs:["mtsMinDate"],features:[u._Bn([{provide:o.Cf,useExisting:ct,multi:!0}])]})}class Qe{validate(me){return function at(){let Ge=new RegExp("\\b(?!(\\d)\\1{3})[13-9]{4}[1346-9][013-9]{5}\\b");return me=>Ge.test(me.value)||!me.value?null:{postalCode:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||Qe)};static#t=this.\u0275dir=u.lG2({type:Qe,selectors:[["","mtsPostalCode",""]],exportAs:["mtsPostalCode"],features:[u._Bn([{provide:o.Cf,useExisting:Qe,multi:!0}])]})}N(5665);const Bt=new RegExp("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?");class kt{validate(me){return function Ft(Ge){return me=>{const J=me.value;return null==J||Bt.test(J)?null:{url:{value:J}}}}()(me)}static#e=this.\u0275fac=function(J){return new(J||kt)};static#t=this.\u0275dir=u.lG2({type:kt,selectors:[["","mtsUrl",""]],exportAs:["mtsUrl"],features:[u._Bn([{provide:o.Cf,useExisting:kt,multi:!0}])]})}class Kt{constructor(){this.hasIR=!0}validate(me){return function bn(Ge){const me=new RegExp(`^${Ge?"IR":""}[0-9]{24}$`);return J=>me.test(J.value)||!J.value?null:{sheba:!0}}(this.hasIR)(me)}static#e=this.\u0275fac=function(J){return new(J||Kt)};static#t=this.\u0275dir=u.lG2({type:Kt,selectors:[["","mtsSheba",""]],inputs:{hasIR:"hasIR"},exportAs:["mtsSheba"],features:[u._Bn([{provide:o.Cf,useExisting:Kt,multi:!0}])]})}class wn{constructor(){}validate(me){return function Zn(){let Ge=new RegExp(/^[\u0600-\u06FF\s]+$/);return me=>Ge.test(me.value)||!me.value?null:{persianCharacter:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||wn)};static#t=this.\u0275dir=u.lG2({type:wn,selectors:[["","mtsPersianCharacter",""]],exportAs:["mtsPersianCharacter"],features:[u._Bn([{provide:o.Cf,useExisting:wn,multi:!0}])]})}class Hi{validate(me){return function Vr(){let Ge=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$");return me=>Ge.test(me.value)||!me.value?null:{email:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||Hi)};static#t=this.\u0275dir=u.lG2({type:Hi,selectors:[["","mtsEmail",""]],exportAs:["mtsEmail"],features:[u._Bn([{provide:o.Cf,useExisting:Hi,multi:!0}])]})}class Hr{validate(me){return function Vi(){const Ge=new RegExp("((http|https)://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?");return me=>Ge.test(me.value)||!me.value?null:{website:!0}}()(me)}static#e=this.\u0275fac=function(J){return new(J||Hr)};static#t=this.\u0275dir=u.lG2({type:Hr,selectors:[["","mtsWebsite",""]],exportAs:["mtsWebsite"],features:[u._Bn([{provide:o.Cf,useExisting:Hr,multi:!0}])]})}class Ot{static#e=this.\u0275fac=function(J){return new(J||Ot)};static#t=this.\u0275mod=u.oAB({type:Ot});static#n=this.\u0275inj=u.cJS({})}N(8838);class fn{static#e=this.\u0275fac=function(J){return new(J||fn)};static#t=this.\u0275mod=u.oAB({type:fn});static#n=this.\u0275inj=u.cJS({})}var qt=N(1343),On=N(8122),Nn=N(7579);class Ui{constructor(){this._isSupportedDownload=!1,this._loading=!1,this.changeSubject=new Nn.x,this.change=this.changeSubject.asObservable()}get isSupportedDownload(){return this._isSupportedDownload}set isSupportedDownload(me){this._isSupportedDownload=me}get loading(){return this._loading}set loading(me){this._loading=me}get data(){return this._data}set data(me){this._data=me}get totalRecords(){return this._totalRecords}set totalRecords(me){this._totalRecords=me}remove(me){var J=this._data.findIndex(He=>He===me);J>-1&&(this._data?.splice(J,1),this.changeSubject.next(new On.i(this._data,this._totalRecords)))}}class Yn extends Ui{constructor(me){if(super(),this.isSupportedDownload=!0,"function"!=typeof me)throw"Invalid data loader";this._loader=me}load(me){this._lastRequest=me,this.loading=!0,this._loader(me).subscribe({next:J=>{let He=J;this.loading=!1,this.data=He.data,this.totalRecords=He.total,this.changeSubject.next(J)},error:J=>{this.loading=!1}})}downloadFile(me){this._loader(me).subscribe({next:J=>{this.changeSubject.next(J)},error:J=>{}})}reload(){this.load(this._lastRequest)}}class Gn extends Ui{constructor(me){super(),this.allData=me,this.isSupportedDownload=!1}load(me){this._lastRequest=me,this.data=this.allData,this.totalRecords=this.allData.length,this.changeSubject.next(new On.i(this.allData,this.totalRecords))}reload(){this.changeSubject.next(new On.i(this.allData,this.totalRecords))}add(me){me&&(this.allData?.push(me),this.totalRecords=this.allData?.length,this.changeSubject.next(new On.i(this.allData,this.totalRecords)))}downloadFile(me){throw new Error("download in arrayDataSource is not supported.")}}var Xn=N(9515),mi=N(6816);class pi{constructor(me){this.text=me?.text,this.icon=me?.icon,this.show=me?.show,this.disabled=me?.disabled,this.style=me?.style,this.click=me?.click}}class Mn extends pi{constructor(me){super(me)}}class Pn{constructor(me){this.id=me?.id,this.parent=me?.parent,this.disabled=Boolean(me?.disabled),this.active=Boolean(me?.active),this.show=null==me?.show||1==me.show,this.showCondition=me?.showCondition,this.data=me?.data}get depth(){if(typeof this._depth>"u"){this._depth=0;let me=this.parent;for(;null!=me;)me=me.parent,this._depth++}return this._depth}}class mn extends Pn{constructor(me){super(me),this.text=me.text,this.icon=me?.icon,this.children=me.children,this.expanded=Boolean(me.expanded),this.children.forEach(J=>J.parent=this)}}class kn extends Pn{constructor(me){super(me),this.text=me?.text,this.icon=me?.icon,this.routerLink=me?.routerLink}}class ii extends Pn{constructor(me){super(me)}}var $n=N(6895);const mr=[[["","card-content",""]],[["","presentation-content",""]]],gr=["[card-content]","[presentation-content]"];class Mo{constructor(){this.bgPresentation={"background-image":"linear-gradient(to bottom , #006564 , #004E4F, #003738 , #001215)"}}static#e=this.\u0275fac=function(J){return new(J||Mo)};static#t=this.\u0275cmp=u.Xpm({type:Mo,selectors:[["mts-access-layout-1"]],inputs:{cssStyle:"cssStyle"},ngContentSelectors:gr,decls:12,vars:1,consts:[[1,"container-fluid"],[1,"row","no-gutter"],[1,"d-flex","flex-column","justify-content-center","align-items-xl-end","col-lg-12","col-xl-2","min-vh-100","bg-light"],[1,"register-form"],[1,"container"],[1,"row","d-flex","flex-column","align-items-center"],[1,"card","col-12","col-sm-8","col-md-6","col-lg-6","col-xl-12","h-100","p-0"],[1,"card-body"],[1,"d-none","d-xl-block","col-xl-10","p-0","min-vh-100",3,"ngStyle"],[1,"d-lg-flex","flex-column","justify-content-center","text-center","h-100"]],template:function(J,He){1&J&&(u.F$t(mr),u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),u.Hsn(8),u.qZA()()()()()(),u.TgZ(9,"div",8)(10,"div",9),u.Hsn(11,1),u.qZA()()()()),2&J&&(u.xp6(9),u.Q6J("ngStyle",He.cssStyle?He.cssStyle:He.bgPresentation))},dependencies:[$n.PC],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow-y:auto}.card[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #b5b5b54d;border:none}@media (min-width: 1200px){.register-form[_ngcontent-%COMP%]{min-width:370px;transform:translate(-53%)}}"]})}class qi{static#e=this.\u0275fac=function(J){return new(J||qi)};static#t=this.\u0275mod=u.oAB({type:qi});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}N(8710),N(8989);class Yt{static#e=this.\u0275fac=function(J){return new(J||Yt)};static#t=this.\u0275mod=u.oAB({type:Yt});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}var ut=N(8326),It=N(3139),rt=N(7109),Vt=N(8152);class di{constructor(me,J,He){this.templateRef=me,this.viewContainer=J,this.userStore=He,this._viewCreated=!1,this._subscription=He?.userChange.subscribe(zt=>this._decide())}set show(me){this._condition=me,this._decide()}_decide(){let me;const J=this.userStore?.get(),{user:He,permission:zt}=this._condition;me="any"===He||("set"===He?null!=J&&(null==zt||J.hasCriteria(zt)):null==J),me&&!this._viewCreated?(this.viewContainer.createEmbeddedView(this.templateRef),this._viewCreated=!0):!me&&this._viewCreated&&(this.viewContainer.clear(),this._viewCreated=!1)}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(J){return new(J||di)(u.Y36(u.Rgc),u.Y36(u.s_b),u.Y36(_r.c,8))};static#t=this.\u0275dir=u.lG2({type:di,selectors:[["","mtsShow",""]],inputs:{show:["mtsShow","show"]},exportAs:["mtsShow"]})}N(535);class bi{static#e=this.\u0275fac=function(J){return new(J||bi)};static#t=this.\u0275mod=u.oAB({type:bi});static#n=this.\u0275inj=u.cJS({})}var _r=N(9433);class pr{constructor(me){this.userStore=me}canActivateChild(me,J){return this._canActivate(me)}canActivate(me,J){return this._canActivate(me)}_canActivate(me){let J=me;do{const zt=J.routeConfig?.data?.claim;let hn=this.userStore?.get();if(!hn)return!1;if(zt)return hn.hasCriteria(zt);J=J?.children[0]}while(J);return!0}static#e=this.\u0275fac=function(J){return new(J||pr)(u.LFG(_r.c,8))};static#t=this.\u0275prov=u.Yz7({token:pr,factory:pr.\u0275fac})}function ao(Ge,me){1&Ge&&u.GkF(0)}function Zr(Ge,me){1&Ge&&u.GkF(0)}function Qt(Ge,me){if(1&Ge&&(u.TgZ(0,"h5",17),u._uU(1),u.qZA()),2&Ge){const J=u.oxw(2);u.xp6(1),u.Oqu(J.secondAsideMenuItem.text)}}function K(Ge,me){1&Ge&&u.GkF(0)}N(8036),N(4663),N(5516),N(3302);const se=function(Ge){return{$implicit:Ge}};function he(Ge,me){if(1&Ge&&(u.TgZ(0,"div",11)(1,"ul",12),u.YNc(2,Qt,2,1,"h5",13),u.TgZ(3,"div",14),u.YNc(4,K,1,0,"ng-container",6),u.qZA()(),u.TgZ(5,"div",15)(6,"div",16),u._uU(7),u.qZA()()()),2&Ge){const J=u.oxw(),He=u.MAs(13);u.xp6(2),u.Q6J("ngIf",null==J.secondAsideMenuItem?null:J.secondAsideMenuItem.text),u.xp6(2),u.Q6J("ngTemplateOutlet",He)("ngTemplateOutletContext",u.VKq(4,se,J.secondAsideMenuItem.children)),u.xp6(3),u.hij("\u0622\u062e\u0631\u06cc\u0646 \u0646\u0633\u062e\u0647: ",null==J.config||null==J.config.asideMenu?null:J.config.asideMenu.latestVersion,"")}}const re=function(Ge){return{active:Ge}};function _e(Ge,me){if(1&Ge&&(u.TgZ(0,"a",27),u._uU(1),u.qZA()),2&Ge){const J=u.oxw(4).$implicit,He=u.oxw(2);u.Q6J("ngClass",u.VKq(2,re,J.id===He.selectedGroupItemId)),u.xp6(1),u.Oqu(J.text)}}function Le(Ge,me){1&Ge&&u.GkF(0)}function Ze(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Le,1,0,"ng-container",6),u.BQk()),2&Ge){const J=u.oxw(4).$implicit,He=u.oxw(2);u.xp6(1),u.Q6J("ngTemplateOutlet",He._groupTemplateFirstMenu.templateRef)("ngTemplateOutletContext",u.VKq(2,se,J))}}function Pe(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"li",24),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(3).$implicit,Ii=u.oxw(2);return u.KtG(Ii.onGroupItemClick(hn,zt))}),u.TgZ(1,"a",25),u._UZ(2,"i"),u.qZA(),u.YNc(3,_e,2,4,"a",26),u.YNc(4,Ze,2,4,"ng-container",19),u.qZA()}if(2&Ge){const J=u.oxw(3).$implicit,He=u.oxw(2);u.xp6(2),u.Tol(J.icon),u.xp6(1),u.Q6J("ngIf",!He._groupTemplateFirstMenu&&J.text),u.xp6(1),u.Q6J("ngIf",He._groupTemplateFirstMenu)}}function ot(Ge,me){if(1&Ge&&(u.TgZ(0,"a",30),u._uU(1),u.qZA()),2&Ge){const J=u.oxw(4).$implicit;u.xp6(1),u.Oqu(J.text)}}function Nt(Ge,me){1&Ge&&u.GkF(0)}function rn(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Nt,1,0,"ng-container",6),u.BQk()),2&Ge){const J=u.oxw(4).$implicit,He=u.oxw(2);u.xp6(1),u.Q6J("ngTemplateOutlet",He._textTemplateFirstMenu.templateRef)("ngTemplateOutletContext",u.VKq(2,se,J))}}function dn(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"li",28),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(3).$implicit,Ii=u.oxw(2);return u.KtG(Ii.onTextMenuItemClick(hn,zt))}),u.YNc(1,ot,2,1,"a",29),u.YNc(2,rn,2,4,"ng-container",19),u.qZA()}if(2&Ge){const J=u.oxw(3).$implicit,He=u.oxw(2);u.Q6J("routerLink",J.routerLink),u.xp6(1),u.Q6J("ngIf",!He._textTemplateFirstMenu),u.xp6(1),u.Q6J("ngIf",He._textTemplateFirstMenu)}}function et(Ge,me){1&Ge&&(u.TgZ(0,"li",31),u._UZ(1,"hr"),u.qZA())}function tt(Ge,me){if(1&Ge&&(u.YNc(0,Pe,5,4,"li",21),u.YNc(1,dn,3,3,"li",22),u.YNc(2,et,2,0,"li",23)),2&Ge){const J=u.oxw(2).$implicit,He=u.oxw(2);u.Q6J("ngIf",He.isGroupMenuItem(J)),u.xp6(1),u.Q6J("ngIf",He.isTextMenuItem(J)),u.xp6(1),u.Q6J("ngIf",He.isDividerMenuItem(J))}}const Ye=function(Ge,me){return{user:Ge,permission:me}};function bt(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,tt,3,3,"ng-template",20),u.BQk()),2&Ge){const J=u.oxw().$implicit;u.xp6(1),u.Q6J("mtsShow",u.WLB(1,Ye,null!=(null==J||null==J.showCondition?null:J.showCondition.user)?null==J||null==J.showCondition?null:J.showCondition.user:"any",null==J.showCondition?null:J.showCondition.permission))}}function mt(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,bt,2,4,"ng-container",19),u.BQk()),2&Ge){const J=me.$implicit;u.xp6(1),u.Q6J("ngIf",null==(null==J?null:J.show)||1==(null==J?null:J.show))}}function cn(Ge,me){1&Ge&&u.YNc(0,mt,2,1,"ng-container",18),2&Ge&&u.Q6J("ngForOf",me.$implicit)}function xn(Ge,me){if(1&Ge&&(u.TgZ(0,"a",38),u._uU(1),u.qZA()),2&Ge){const J=u.oxw(4).$implicit;u.xp6(1),u.Oqu(J.text)}}function In(Ge,me){1&Ge&&u.GkF(0)}function ai(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,In,1,0,"ng-container",6),u.BQk()),2&Ge){const J=u.oxw(4).$implicit,He=u.oxw(2);u.xp6(1),u.Q6J("ngTemplateOutlet",He._groupTemplateSecondMenu.templateRef)("ngTemplateOutletContext",u.VKq(2,se,J))}}function Bn(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"li",34),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(3).$implicit,Ii=u.oxw(2);return u.KtG(Ii.onGroupItemClick(hn,zt))}),u.TgZ(1,"span",35),u._UZ(2,"span",36),u.qZA(),u.YNc(3,xn,2,1,"a",37),u.YNc(4,ai,2,4,"ng-container",19),u.qZA()}if(2&Ge){const J=u.oxw(3).$implicit,He=u.oxw(2);u.xp6(2),u.Q6J("ngClass",u.VKq(3,re,J.id===He.selectedMenuItemId)),u.xp6(1),u.Q6J("ngIf",!He._groupTemplateSecondMenu&&J.text),u.xp6(1),u.Q6J("ngIf",He._groupTemplateSecondMenu)}}function Ni(Ge,me){if(1&Ge&&(u.TgZ(0,"a",42),u._uU(1),u.qZA()),2&Ge){const J=u.oxw(4).$implicit;u.xp6(1),u.hij(" ",J.text," ")}}function ur(Ge,me){1&Ge&&u.GkF(0)}function Gi(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,ur,1,0,"ng-container",6),u.BQk()),2&Ge){const J=u.oxw(4).$implicit,He=u.oxw(2);u.xp6(1),u.Q6J("ngTemplateOutlet",He._textTemplateSecondMenu.templateRef)("ngTemplateOutletContext",u.VKq(2,se,J))}}function cr(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"li",39),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(3).$implicit,Ii=u.oxw(2);return u.KtG(Ii.onSecondMenuItemClick(hn,zt))}),u.TgZ(1,"span",35),u._UZ(2,"span",40),u.qZA(),u.YNc(3,Ni,2,1,"a",41),u.YNc(4,Gi,2,4,"ng-container",19),u.qZA()}if(2&Ge){const J=u.oxw(3).$implicit,He=u.oxw(2);u.Q6J("ngClass",u.VKq(4,re,J.id===He.selectedMenuItemId))("routerLink",J.routerLink),u.xp6(3),u.Q6J("ngIf",!He._textTemplateSecondMenu&&J.text),u.xp6(1),u.Q6J("ngIf",He._textTemplateSecondMenu)}}function Wi(Ge,me){1&Ge&&(u.TgZ(0,"li",31),u._UZ(1,"hr"),u.qZA())}function xo(Ge,me){if(1&Ge&&(u.YNc(0,Bn,5,5,"li",32),u.YNc(1,cr,5,6,"li",33),u.YNc(2,Wi,2,0,"li",23)),2&Ge){const J=u.oxw(2).$implicit,He=u.oxw(2);u.Q6J("ngIf",He.isGroupMenuItem(J)),u.xp6(1),u.Q6J("ngIf",He.isTextMenuItem(J)),u.xp6(1),u.Q6J("ngIf",He.isDividerMenuItem(J))}}function At(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,xo,3,3,"ng-template",20),u.BQk()),2&Ge){const J=u.oxw().$implicit;u.xp6(1),u.Q6J("mtsShow",u.WLB(1,Ye,null!=(null==J||null==J.showCondition?null:J.showCondition.user)?null==J||null==J.showCondition?null:J.showCondition.user:"any",null==J.showCondition?null:J.showCondition.permission))}}function Ae(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,At,2,4,"ng-container",19),u.BQk()),2&Ge){const J=me.$implicit;u.xp6(1),u.Q6J("ngIf",null==(null==J?null:J.show)||1==(null==J?null:J.show))}}function Te(Ge,me){1&Ge&&u.YNc(0,Ae,2,1,"ng-container",18),2&Ge&&u.Q6J("ngForOf",me.$implicit)}const Xe=function(Ge){return{width:Ge}};class Ct{constructor(me,J){this.router=me,this.userStore=J,this.menuItemClick=new u.vpe,this.isSecondaryAsideMenu=new u.vpe,this.selectedMenuItemId="",this.selectedGroupItemId=""}get secondAsideMenuItem(){return this._secondAsideMenuItem}isGroupMenuItem(me){return me instanceof mn}isTextMenuItem(me){return me instanceof kn}isDividerMenuItem(me){return me instanceof ii}onTextMenuItemClick(me,J){J.stopPropagation(),this.hasChildrenMenuItem(me)||(this.showSecondAsideMenu=!1,this.isSecondaryAsideMenu.emit(!1)),this.menuItemClick.emit(me)}onGroupItemClick(me,J){J.stopPropagation(),this.routeToFirstMenuItem(me),this._secondAsideMenuItem=this.config?.asideMenu?.first?.start?.find(He=>He===me),this.isSecondaryAsideMenu.emit(!0),this.menuItemClick.emit(me)}onSecondMenuItemClick(me,J){this.selectedMenuItemId=me.id,this.selectedGroupItemId=me.parent?.id,this.isSecondaryAsideMenu.emit(!0),this.menuItemClick.emit(me)}hasChildrenMenuItem(me){return me instanceof mn&&me.children.length}lookupFirstMenuItem(me){let J=this.userStore.get();return me.children.find(zt=>zt.showCondition?.permission?J?.hasCriteria(zt.showCondition?.permission):me.children)}routeToFirstMenuItem(me){if(this.hasChildrenMenuItem(me)){let J=this.lookupFirstMenuItem(me);const He=J.routerLink;this.selectedMenuItemId=J.id,He&&this.router.navigate(He),this.showSecondAsideMenu=!0}}static#e=this.\u0275fac=function(J){return new(J||Ct)(u.Y36(rt.F0),u.Y36(_r.c))};static#t=this.\u0275cmp=u.Xpm({type:Ct,selectors:[["mts-aside"]],inputs:{config:"config",_textTemplateFirstMenu:"_textTemplateFirstMenu",_groupTemplateFirstMenu:"_groupTemplateFirstMenu",_textTemplateSecondMenu:"_textTemplateSecondMenu",_groupTemplateSecondMenu:"_groupTemplateSecondMenu"},outputs:{menuItemClick:"menuItemClick",isSecondaryAsideMenu:"isSecondaryAsideMenu"},decls:14,vars:13,consts:[[1,"d-flex","h-100","w-100"],[1,"first-aside-wrapper","d-flex","flex-column"],[1,"aside-logo","d-flex","flex-column","align-items-center","justify-content-center"],["routerLink","/",1,"text-center"],["alt","","height","auto",1,"d-inline-block",3,"src","ngStyle"],[1,"first-aside-nav-start","text-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"first-aside-nav-end","text-center","mt-auto"],["class","second-aside-wrapper",4,"ngIf"],["firstAsideMenuTemplate",""],["secondAsideMenuTemplate",""],[1,"second-aside-wrapper"],[1,"second-aside-nav-start","px-2"],["class","ms-3",4,"ngIf"],[1,"mt-4"],[1,"second-aside-nav-end","mt-auto","p-2","me-4"],[1,"latest-version","p-2"],[1,"ms-3"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"mtsShow"],["class","cursor-pointer group-menu-item d-flex flex-column align-items-center p-2",3,"click",4,"ngIf"],["class","cursor-pointer text-menu-item d-flex flex-column align-items-center p-2",3,"routerLink","click",4,"ngIf"],["class","divider-menu-item",4,"ngIf"],[1,"cursor-pointer","group-menu-item","d-flex","flex-column","align-items-center","p-2",3,"click"],[1,"menu-item-link","d-inline-flex","justify-content-center","align-items-center"],["class","menu-item-link-text mt-2 text-muted",3,"ngClass",4,"ngIf"],[1,"menu-item-link-text","mt-2","text-muted",3,"ngClass"],[1,"cursor-pointer","text-menu-item","d-flex","flex-column","align-items-center","p-2",3,"routerLink","click"],["class","mt-2","routerLinkActive","active",4,"ngIf"],["routerLinkActive","active",1,"mt-2"],[1,"divider-menu-item"],["class","cursor-pointer group-menu-item d-flex flex-column",3,"click",4,"ngIf"],["class","text-menu-item cursor-pointer d-flex py-2",3,"ngClass","routerLink","click",4,"ngIf"],[1,"cursor-pointer","group-menu-item","d-flex","flex-column",3,"click"],[1,"menu-bullet"],[1,"bullet-dot",3,"ngClass"],["class","group-text",4,"ngIf"],[1,"group-text"],[1,"text-menu-item","cursor-pointer","d-flex","py-2",3,"ngClass","routerLink","click"],[1,"bullet-dot"],["class","py-1 px-2",4,"ngIf"],[1,"py-1","px-2"]],template:function(J,He){if(1&J&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),u._UZ(4,"img",4),u.qZA()(),u.TgZ(5,"ul",5),u.YNc(6,ao,1,0,"ng-container",6),u.qZA(),u.TgZ(7,"ul",7),u.YNc(8,Zr,1,0,"ng-container",6),u.qZA()(),u.YNc(9,he,8,6,"div",8),u.qZA(),u.YNc(10,cn,1,1,"ng-template",null,9,u.W1O),u.YNc(12,Te,1,1,"ng-template",null,10,u.W1O)),2&J){const zt=u.MAs(11);let hn;u.xp6(4),u.Q6J("src",null==He.config||null==He.config.general||null==He.config.general.logo?null:He.config.general.logo.url,u.LSH)("ngStyle",u.VKq(7,Xe,null!==(hn=null==He.config||null==He.config.general||null==He.config.general.logo?null:He.config.general.logo.width)&&void 0!==hn?hn:"45px")),u.xp6(2),u.Q6J("ngTemplateOutlet",zt)("ngTemplateOutletContext",u.VKq(9,se,null==He.config||null==He.config.asideMenu||null==He.config.asideMenu.first?null:He.config.asideMenu.first.start)),u.xp6(2),u.Q6J("ngTemplateOutlet",zt)("ngTemplateOutletContext",u.VKq(11,se,null==He.config||null==He.config.asideMenu||null==He.config.asideMenu.first?null:He.config.asideMenu.first.end)),u.xp6(1),u.Q6J("ngIf",He.showSecondAsideMenu)}},styles:["[_nghost-%COMP%]{overflow:hidden}.first-aside-wrapper[_ngcontent-%COMP%]{width:8.1rem;border-left:1px dashed #cecece}.first-aside-wrapper[_ngcontent-%COMP%]   .aside-logo[_ngcontent-%COMP%]{border-bottom:1px dashed #cecece;height:85px}.first-aside-wrapper[_ngcontent-%COMP%]   .first-aside-nav-start[_ngcontent-%COMP%]{height:calc(100% - 5.2rem);overflow-y:scroll;font-size:.75rem}.first-aside-wrapper[_ngcontent-%COMP%]   .first-aside-nav-end[_ngcontent-%COMP%]{height:5.2rem}.second-aside-wrapper[_ngcontent-%COMP%]{padding:2rem 0;border-left:1px dashed #cecece}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]{width:16rem;height:calc(100% - 2rem);overflow-y:scroll}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]   .text-menu-item.active[_ngcontent-%COMP%]{background-color:var(--bs-soft-primary);border-radius:7px}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]   .text-menu-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)!important}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-end[_ngcontent-%COMP%]   .latest-version[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#999cae;border-radius:7px}button[_ngcontent-%COMP%]{transform:translate(120%,-50%)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cecece}.menu-bullet[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:1.25rem;margin-right:.5rem}.menu-bullet[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%]{width:5px;height:5px;border-radius:100%!important;background-color:var(--bs-gray-500);font-size:.6rem}.group-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .text-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:gray!important}.group-menu-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .group-menu-item.active[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%], .text-menu-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .text-menu-item.active[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%]{color:var(--bs-primary)!important}"]})}var St=N(4004),Tn=N(1135);class Hn{constructor(me,J){this.activatedRoute=me,this.data=J}}class ri{constructor(me){this.pathFromRoot=me}}class gi{constructor(me){this._router=me,this._navigateSubject=new Tn.X(this._createNavigationEvent()),this.navigation=this._navigateSubject.asObservable(),this._subscription=this._router.events.subscribe({next:J=>{J instanceof rt.m2&&this._navigateSubject.next(this._createNavigationEvent())}})}_createNavigationEvent(){const me=new Array;let{root:J}=this._router.routerState.snapshot;do{J=J?.children[0];const He=J?.routeConfig?.data,zt=new Hn(J,{title:He?.title,description:He?.description,keywords:He?.keywords,resolvedTitle:He?.title,resolvedDescription:He?.description,resolvedKeywords:He?.keywords});me.push(zt)}while(J?.children.length>0);return new ri(me)}static#e=this.\u0275fac=function(J){return new(J||gi)(u.LFG(rt.F0))};static#t=this.\u0275prov=u.Yz7({token:gi,factory:gi.\u0275fac,providedIn:"root"})}function xi(Ge,me){if(1&Ge&&(u.TgZ(0,"button",9),u._UZ(1,"i"),u._uU(2),u.qZA()),2&Ge){const J=me.$implicit,He=u.oxw();u.Tol(He.displayBtnStyle(J)),u.xp6(1),u.Tol(J.icon),u.xp6(1),u.hij(" ",J.text," ")}}function Sn(Ge,me){1&Ge&&u.GkF(0)}const ci=function(Ge){return{$implicit:Ge}};function Ri(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Sn,1,0,"ng-container",10),u.BQk()),2&Ge){const J=u.oxw(),He=u.MAs(13);u.xp6(1),u.Q6J("ngTemplateOutlet",He)("ngTemplateOutletContext",u.VKq(2,ci,null==J.config||null==J.config.header||null==J.config.header.menuItems?null:J.config.header.menuItems.end))}}function Pi(Ge,me){1&Ge&&u.GkF(0)}function yr(Ge,me){if(1&Ge&&u.YNc(0,Pi,1,0,"ng-container",10),2&Ge){const J=u.oxw(3).$implicit;u.oxw(3);const He=u.MAs(15);u.Q6J("ngTemplateOutlet",He)("ngTemplateOutletContext",u.VKq(2,ci,J))}}function Xi(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"li",16),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(3).$implicit,Ii=u.oxw(3);return u.KtG(Ii.onMenuItemClick(hn,zt))}),u.TgZ(1,"a",17),u._uU(2),u.qZA()()}if(2&Ge){const J=u.oxw(3).$implicit;u.xp6(1),u.Q6J("routerLink",J.routerLink),u.xp6(1),u.Oqu(J.text)}}function Bo(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,yr,1,4,"ng-template",14),u.YNc(2,Xi,3,2,"ng-template",null,15,u.W1O),u.BQk()),2&Ge){const J=u.MAs(3),He=u.oxw(2).$implicit,zt=u.oxw(3);u.xp6(1),u.Q6J("ngIf",zt.isGroupMenuItem(He))("ngIfElse",J)}}const Rr=function(Ge,me){return{user:Ge,permission:me}};function Ga(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Bo,4,2,"ng-container",13),u.BQk()),2&Ge){const J=u.oxw().$implicit;u.xp6(1),u.Q6J("mtsShow",u.WLB(1,Rr,null!=(null==J||null==J.showCondition?null:J.showCondition.user)?null==J||null==J.showCondition?null:J.showCondition.user:"any",null==J.showCondition?null:J.showCondition.permission))}}function ds(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Ga,2,4,"ng-container",6),u.BQk()),2&Ge){const J=me.$implicit;u.xp6(1),u.Q6J("ngIf",null===(null==J?null:J.show)||!0===(null==J?null:J.show))}}function ar(Ge,me){if(1&Ge&&(u.TgZ(0,"ul",4),u.YNc(1,ds,2,1,"ng-container",12),u.qZA()),2&Ge){const J=u.oxw().$implicit;u.xp6(1),u.Q6J("ngForOf",J)}}function xa(Ge,me){1&Ge&&u.YNc(0,ar,2,1,"ul",11),2&Ge&&u.Q6J("ngIf",me.$implicit)}function Oo(Ge,me){1&Ge&&u.GkF(0)}function sa(Ge,me){1&Ge&&u._UZ(0,"div",23)}function mo(Ge,me){1&Ge&&u.GkF(0)}function Po(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,mo,1,0,"ng-container",10),u.BQk()),2&Ge){const J=me.$implicit;u.oxw(3);const He=u.MAs(6);u.xp6(1),u.Q6J("ngTemplateOutlet",He)("ngTemplateOutletContext",u.VKq(2,ci,J))}}function wa(Ge,me){if(1&Ge&&(u.ynx(0),u.TgZ(1,"h6",24),u._uU(2),u.qZA(),u.YNc(3,Po,2,4,"ng-container",12),u.BQk()),2&Ge){const J=u.oxw().$implicit;u.xp6(2),u.Oqu(J.text),u.xp6(1),u.Q6J("ngForOf",J.children)}}function Za(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Oo,1,0,"ng-container",10),u.YNc(2,sa,1,0,"div",22),u.YNc(3,wa,4,2,"ng-container",6),u.BQk()),2&Ge){const J=me.$implicit;u.oxw();const He=u.MAs(6),zt=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",He)("ngTemplateOutletContext",u.VKq(4,ci,J)),u.xp6(1),u.Q6J("ngIf",zt.isDividerMenuItem(J)&&J.show),u.xp6(1),u.Q6J("ngIf",zt.isGroupMenuItem(J)&&J.show)}}function Uo(Ge,me){if(1&Ge&&u._UZ(0,"i",28),2&Ge){const J=u.oxw(2).$implicit;u.Q6J("ngClass",J.icon)}}function Ia(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"a",26),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw().$implicit,Ii=u.oxw(2);return u.KtG(Ii.onMenuItemClick(hn,zt))}),u.YNc(1,Uo,1,1,"i",27),u._uU(2),u.qZA()}if(2&Ge){const J=u.oxw().$implicit;u.ekj("active",J.active),u.Q6J("routerLink",J.routerLink),u.xp6(1),u.Q6J("ngIf",J.icon),u.xp6(1),u.hij(" ",J.text," ")}}function Iu(Ge,me){if(1&Ge&&u.YNc(0,Ia,3,5,"a",25),2&Ge){const J=me.$implicit,He=u.oxw(2);u.Q6J("ngIf",He.isTextMenuItem(J)&&J.show)}}function lo(Ge,me){if(1&Ge&&(u.TgZ(0,"div",18)(1,"button",19),u._uU(2),u.qZA(),u.TgZ(3,"div",20),u.YNc(4,Za,4,6,"ng-container",12),u.qZA()(),u.YNc(5,Iu,1,1,"ng-template",null,21,u.W1O)),2&Ge){const J=me.$implicit,He=u.oxw();u.xp6(1),u.Q6J("ngClass",He.displayBtnStyle(J)),u.xp6(1),u.hij(" ",J.text," "),u.xp6(2),u.Q6J("ngForOf",J.children)}}class fl{constructor(me,J){this.routerService=me,this.layoutService=J,this.menuItemClick=new u.vpe,this.expanderClick=new u.vpe,this.pageActions$=this.layoutService.pageActionsChange,this.pageTitle$=this.layoutService.pageTitleSubject,this.page$=this.routerService.navigation.pipe((0,St.U)(He=>({routeTitle:He.pathFromRoot[He.pathFromRoot?.length-1].data.title,breadcrumbItems:He.pathFromRoot.filter(zt=>zt.data.resolvedTitle).map(zt=>zt.data.resolvedTitle)})))}displayBtnStyle(me){return me instanceof Mn?`btn btn-${me.style}`:`btn btn-${me.data.style}`}isDividerMenuItem(me){return me instanceof ii}isTextMenuItem(me){return me instanceof kn}isGroupMenuItem(me){return me instanceof mn}onMenuItemClick(me,J){J.stopPropagation(),this.menuItemClick.emit(me)}static#e=this.\u0275fac=function(J){return new(J||fl)(u.Y36(gi),u.Y36(ut.N))};static#t=this.\u0275cmp=u.Xpm({type:fl,selectors:[["mts-header"]],inputs:{config:"config"},outputs:{menuItemClick:"menuItemClick",expanderClick:"expanderClick"},decls:16,vars:11,consts:[[1,"d-flex","justify-content-between"],[1,"align-self-center","fw-bolder","my-0","d-none","d-lg-block"],[1,"d-block","d-lg-none",3,"click"],[1,"fa-solid","fa-bars"],[1,"d-flex"],["class","ms-2",3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],["headerMenuItemTemplate",""],["dropdownMenuTemplate",""],[1,"ms-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","d-flex",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"mtsShow"],[3,"ngIf","ngIfElse"],["leafMenuItem",""],[1,"nav-item",3,"click"],["routerLinkActive","active",1,"nav-link","cursor-pointer",3,"routerLink"],["ngbDropdown","","placement","bottom-start",1,"nav-item","dropdown","ms-2"],["type","button","ngbDropdownToggle","",1,"dropdown-toggle",3,"ngClass"],["ngbDropdownMenu",""],["dropdownMenuItemTemplate",""],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-divider"],[1,"dropdown-header"],["ngbDropdownItem","","class","cursor-pointer",3,"routerLink","active","click",4,"ngIf"],["ngbDropdownItem","",1,"cursor-pointer",3,"routerLink","click"],["class","me-1",3,"ngClass",4,"ngIf"],[1,"me-1",3,"ngClass"]],template:function(J,He){if(1&J&&(u.TgZ(0,"div",0)(1,"h5",1),u._uU(2),u.ALo(3,"async"),u.ALo(4,"async"),u.ALo(5,"async"),u.qZA(),u.TgZ(6,"span",2),u.NdJ("click",function(){return He.expanderClick.emit(!0)}),u._UZ(7,"i",3),u.qZA(),u.TgZ(8,"div",4),u.YNc(9,xi,3,5,"button",5),u.ALo(10,"async"),u.YNc(11,Ri,2,4,"ng-container",6),u.qZA()(),u.YNc(12,xa,1,1,"ng-template",null,7,u.W1O),u.YNc(14,lo,7,3,"ng-template",null,8,u.W1O)),2&J){let zt;u.xp6(2),u.hij(" ",null!=(zt=u.lcZ(3,3,He.page$))&&zt.routeTitle?null==(zt=u.lcZ(4,5,He.page$))?null:zt.routeTitle:u.lcZ(5,7,He.pageTitle$)," "),u.xp6(7),u.Q6J("ngForOf",u.lcZ(10,9,He.pageActions$)),u.xp6(2),u.Q6J("ngIf",null==He.config||null==He.config.header||null==He.config.header.menuItems?null:He.config.header.menuItems.end)}},styles:[".close[_ngcontent-%COMP%]{font-size:1.6rem!important}.dropdown-toggle[_ngcontent-%COMP%]{line-height:28px}"]})}var zo=N(1366);class Ls{static#e=this.\u0275fac=function(J){return new(J||Ls)};static#t=this.\u0275mod=u.oAB({type:Ls});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,rt.Bz,bi,zo.XC]})}u.B6R(fl,[$n.mk,$n.sg,$n.O5,$n.tP,rt.rH,rt.Od,di,zo.jt,zo.iD,zo.Vi,zo.TH],[$n.Ov]),u.B6R(Ct,[$n.mk,$n.sg,$n.O5,$n.tP,$n.PC,rt.rH,rt.Od,di],[]),u.B6R(It.F,[$n.O5,fl,Ct],[$n.Ov]);class Bs{static#e=this.\u0275fac=function(J){return new(J||Bs)};static#t=this.\u0275mod=u.oAB({type:Bs});static#n=this.\u0275inj=u.cJS({imports:[qi,Yt,Ls]})}var Yo=N(2821),Us=(N(5779),N(7390));class uo{static#e=this.\u0275fac=function(J){return new(J||uo)};static#t=this.\u0275mod=u.oAB({type:uo});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}class go{constructor(me){this.templateRef=me}static#e=this.\u0275fac=function(J){return new(J||go)(u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:go,selectors:[["","mtsTreeNodeTemplate",""]]})}var vs=N(9751),bs=N(576);function xs(Ge){return!!Ge&&(Ge instanceof vs.y||(0,bs.m)(Ge.lift)&&(0,bs.m)(Ge.subscribe))}var ko=N(5017),Zo=N(9646),to=N(2722),hs=N(1281),Ll=N(445);class ml{constructor(){this.expansionModel=new ko.Ov(!0)}toggle(me){this.expansionModel.toggle(this._trackByValue(me))}expand(me){this.expansionModel.select(this._trackByValue(me))}collapse(me){this.expansionModel.deselect(this._trackByValue(me))}isExpanded(me){return this.expansionModel.isSelected(this._trackByValue(me))}toggleDescendants(me){this.expansionModel.isSelected(this._trackByValue(me))?this.collapseDescendants(me):this.expandDescendants(me)}collapseAll(){this.expansionModel.clear()}expandDescendants(me){let J=[me];J.push(...this.getDescendants(me)),this.expansionModel.select(...J.map(He=>this._trackByValue(He)))}collapseDescendants(me){let J=[me];J.push(...this.getDescendants(me)),this.expansionModel.deselect(...J.map(He=>this._trackByValue(He)))}_trackByValue(me){return this.trackBy?this.trackBy(me):me}}class aa extends ml{constructor(me,J,He){super(),this.getLevel=me,this.isExpandable=J,this.options=He,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(me){const He=[];for(let zt=this.dataNodes.indexOf(me)+1;zt<this.dataNodes.length&&this.getLevel(me)<this.getLevel(this.dataNodes[zt]);zt++)He.push(this.dataNodes[zt]);return He}expandAll(){this.expansionModel.select(...this.dataNodes.map(me=>this._trackByValue(me)))}}const ql=new u.OlP("CDK_TREE_NODE_OUTLET_NODE");let Ou=(()=>{class Ge{constructor(J,He){this.viewContainer=J,this._node=He}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(u.s_b),u.Y36(ql,8))},Ge.\u0275dir=u.lG2({type:Ge,selectors:[["","cdkTreeNodeOutlet",""]]}),Ge})();class du{constructor(me){this.$implicit=me}}let hu=(()=>{class Ge{constructor(J){this.template=J}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(u.Rgc))},Ge.\u0275dir=u.lG2({type:Ge,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),Ge})(),qr=(()=>{class Ge{get dataSource(){return this._dataSource}set dataSource(J){this._dataSource!==J&&this._switchDataSource(J)}constructor(J,He){this._differs=J,this._changeDetectorRef=He,this._onDestroy=new Nn.x,this._levels=new Map,this.viewChange=new Tn.X({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const J=this._nodeDefs.filter(He=>!He.when);this._defaultNodeDef=J[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(J){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),J||this._nodeOutlet.viewContainer.clear(),this._dataSource=J,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let J;(0,ko.Z9)(this._dataSource)?J=this._dataSource.connect(this):xs(this._dataSource)?J=this._dataSource:Array.isArray(this._dataSource)&&(J=(0,Zo.of)(this._dataSource)),J&&(this._dataSubscription=J.pipe((0,to.R)(this._onDestroy)).subscribe(He=>this.renderNodeChanges(He)))}renderNodeChanges(J,He=this._dataDiffer,zt=this._nodeOutlet.viewContainer,hn){const Ii=He.diff(J);Ii&&(Ii.forEachOperation((Li,Co,gs)=>{if(null==Li.previousIndex)this.insertNode(J[gs],gs,zt,hn);else if(null==gs)zt.remove(Co),this._levels.delete(Li.item);else{const iu=zt.get(Co);zt.move(iu,gs)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(J,He){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(hn=>hn.when&&hn.when(He,J))||this._defaultNodeDef}insertNode(J,He,zt,hn){const Ii=this._getNodeDef(J,He),Li=new du(J);Li.level=this.treeControl.getLevel?this.treeControl.getLevel(J):typeof hn<"u"&&this._levels.has(hn)?this._levels.get(hn)+1:0,this._levels.set(J,Li.level),(zt||this._nodeOutlet.viewContainer).createEmbeddedView(Ii.template,Li,He),ua.mostRecentTreeNode&&(ua.mostRecentTreeNode.data=J)}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(u.ZZ4),u.Y36(u.sBO))},Ge.\u0275cmp=u.Xpm({type:Ge,selectors:[["cdk-tree"]],contentQueries:function(J,He,zt){if(1&J&&u.Suo(zt,hu,5),2&J){let hn;u.iGM(hn=u.CRH())&&(He._nodeDefs=hn)}},viewQuery:function(J,He){if(1&J&&u.Gf(Ou,7),2&J){let zt;u.iGM(zt=u.CRH())&&(He._nodeOutlet=zt.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(J,He){1&J&&u.GkF(0,0)},dependencies:[Ou],encapsulation:2}),Ge})(),ua=(()=>{class Ge{get role(){return"treeitem"}set role(J){this._elementRef.nativeElement.setAttribute("role",J)}get data(){return this._data}set data(J){J!==this._data&&(this._data=J,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(J,He){this._elementRef=J,this._tree=He,this._destroyed=new Nn.x,this._dataChanges=new Nn.x,Ge.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=function gl(Ge){let me=Ge.parentElement;for(;me&&!Wl(me);)me=me.parentElement;return me?me.classList.contains("cdk-nested-tree-node")?(0,hs.su)(me.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){Ge.mostRecentTreeNode===this&&(Ge.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return Ge.mostRecentTreeNode=null,Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(u.SBq),u.Y36(qr))},Ge.\u0275dir=u.lG2({type:Ge,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(J,He){2&J&&u.uIk("aria-expanded",He.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),Ge})();function Wl(Ge){const me=Ge.classList;return!(!me?.contains("cdk-nested-tree-node")&&!me?.contains("cdk-tree"))}const Js=/([A-Za-z%]+)$/;let Pa=(()=>{class Ge{get level(){return this._level}set level(J){this._setLevelInput(J)}get indent(){return this._indent}set indent(J){this._setIndentInput(J)}constructor(J,He,zt,hn){this._treeNode=J,this._tree=He,this._element=zt,this._dir=hn,this._destroyed=new Nn.x,this.indentUnits="px",this._indent=40,this._setPadding(),hn&&hn.change.pipe((0,to.R)(this._destroyed)).subscribe(()=>this._setPadding(!0)),J._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const J=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,He=null==this._level?J:this._level;return"number"==typeof He?`${He*this._indent}${this.indentUnits}`:null}_setPadding(J=!1){const He=this._paddingIndent();if(He!==this._currentPadding||J){const zt=this._element.nativeElement,hn=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",Ii="paddingLeft"===hn?"paddingRight":"paddingLeft";zt.style[hn]=He||"",zt.style[Ii]="",this._currentPadding=He}}_setLevelInput(J){this._level=(0,hs.su)(J,null),this._setPadding()}_setIndentInput(J){let He=J,zt="px";if("string"==typeof J){const hn=J.split(Js);He=hn[0],zt=hn[1]||zt}this.indentUnits=zt,this._indent=(0,hs.su)(He),this._setPadding()}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(ua),u.Y36(qr),u.Y36(u.SBq),u.Y36(Ll.Is,8))},Ge.\u0275dir=u.lG2({type:Ge,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),Ge})(),Ta=(()=>{class Ge{get recursive(){return this._recursive}set recursive(J){this._recursive=(0,hs.Ig)(J)}constructor(J,He){this._tree=J,this._treeNode=He,this._recursive=!1}_toggle(J){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),J.stopPropagation()}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(qr),u.Y36(ua))},Ge.\u0275dir=u.lG2({type:Ge,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(J,He){1&J&&u.NdJ("click",function(hn){return He._toggle(hn)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),Ge})(),yl=(()=>{class Ge{}return Ge.\u0275fac=function(J){return new(J||Ge)},Ge.\u0275mod=u.oAB({type:Ge}),Ge.\u0275inj=u.cJS({}),Ge})();function Ql(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"div",8)(1,"input",9),u.NdJ("change",function(){u.CHM(J);const zt=u.oxw().$implicit,hn=u.oxw();return u.KtG(hn.checklistSelection.toggle(zt))}),u.qZA()()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.MGl("name","node-",J.level,""),u.Q6J("checked",He.checklistSelection.isSelected(J))}}function Kl(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"a",10),u.NdJ("contextmenu",function(){u.CHM(J);const zt=u.oxw().$implicit,hn=u.oxw();return u.KtG(hn.nodeClick.emit(zt))}),u._uU(1),u.qZA()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.Oqu(He.titleFieldFunc(J.data))}}function $r(Ge,me){1&Ge&&u.GkF(0)}const rc=function(Ge){return{$implicit:Ge}};function $a(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"div",10),u.NdJ("contextmenu",function(){u.CHM(J);const zt=u.oxw().$implicit,hn=u.oxw();return u.KtG(hn.nodeClick.emit(zt))}),u.YNc(1,$r,1,0,"ng-container",11),u.qZA()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",He._treeNodeTemplate.templateRef)("ngTemplateOutletContext",u.VKq(2,rc,J))}}function ca(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"cdk-tree-node",3),u.NdJ("click",function(zt){const Ii=u.CHM(J).$implicit,Li=u.oxw();return u.KtG(Li._lazyLoadTreeNode(Ii,zt))}),u.TgZ(1,"button",4),u._UZ(2,"i",5),u.qZA(),u._uU(3,"\xa0 "),u.YNc(4,Ql,2,2,"div",6),u.YNc(5,Kl,2,1,"a",7),u.YNc(6,$a,2,4,"div",7),u.qZA()}if(2&Ge){const J=me.$implicit,He=u.oxw();u.Udp("display",He.shouldRender(J)?"flex":"none"),u.xp6(4),u.Q6J("ngIf",He.selectable),u.xp6(1),u.Q6J("ngIf",!He._treeNodeTemplate),u.xp6(1),u.Q6J("ngIf",He._treeNodeTemplate)}}function ws(Ge,me){if(1&Ge&&(u.TgZ(0,"div",8),u._UZ(1,"input",15),u.qZA()),2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.MGl("name","node-",J.level,""),u.Q6J("checked",He.descendantsAllSelected(J))}}function vl(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"a",10),u.NdJ("contextmenu",function(){u.CHM(J);const zt=u.oxw().$implicit,hn=u.oxw();return u.KtG(hn.nodeClick.emit(zt))}),u._uU(1),u.qZA()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.Oqu(He.titleFieldFunc(J.data))}}function Bl(Ge,me){1&Ge&&u.GkF(0)}function So(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"div",10),u.NdJ("contextmenu",function(){u.CHM(J);const zt=u.oxw().$implicit,hn=u.oxw();return u.KtG(hn.nodeClick.emit(zt))}),u.YNc(1,Bl,1,0,"ng-container",11),u.qZA()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",He._treeNodeTemplate.templateRef)("ngTemplateOutletContext",u.VKq(2,rc,J))}}function Ws(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"cdk-tree-node",12)(1,"button",13),u.NdJ("click",function(zt){const Ii=u.CHM(J).$implicit;return u.oxw()._lazyLoadTreeNode(Ii,zt),u.KtG(Ii.isExpanded=!Ii.isExpanded)}),u._UZ(2,"i",14),u.qZA(),u.YNc(3,ws,2,2,"div",6),u.YNc(4,vl,2,1,"a",7),u.YNc(5,So,2,4,"div",7),u.qZA()}if(2&Ge){const J=me.$implicit,He=u.oxw();u.Udp("display",He.shouldRender(J)?"flex":"none"),u.xp6(1),u.Udp("visibility",J.expandable?"visible":"hidden"),u.uIk("aria-label","Toggle "+J.name),u.xp6(1),u.Udp("transform",He._transformSort(J)),u.xp6(1),u.Q6J("ngIf",He.selectable),u.xp6(1),u.Q6J("ngIf",!He._treeNodeTemplate),u.xp6(1),u.Q6J("ngIf",He._treeNodeTemplate)}}class Is{constructor(){this.dataSource=[],this.treeControl=new aa(me=>me.level,me=>me.expandable),this.selectable=!1,this.nodeClick=new u.vpe,this.checklistSelection=new ko.Ov(!0),this.hasChild=(me,J)=>J.expandable}set loader(me){if("function"!=typeof me)throw"Invalid data loader";this._loader=me}_transformSort(me){return`rotate(${this.treeControl.isExpanded(me)?-90:0}deg)`}ngOnInit(){if(!this.titleFieldFunc)throw"titleFieldFunc is required";if(!this.expandableNode)throw"expandableNode is required";let me=this._loader(null);me instanceof vs.y&&me.subscribe(J=>{let He=[];He=[...J],this.dataSource.push(...this._mapDataToTreeControlFormat(He,null)),this.dataSource=[...this.dataSource]})}_lazyLoadTreeNode(me,J){if(J.stopPropagation(),me.children&&!me.isLoadedChild){const He=this._loader(me);xs(He)&&He.subscribe(zt=>{this.addChildren(zt,me)})}}addChildren(me,J){const He=this.dataSource.findIndex(zt=>zt===J);this.nodeClick.emit(J.data),J.children=this._mapDataToTreeControlFormat(me,J),J.isLoadedChild||this.dataSource.splice(He+1,0,...J.children),J.isLoadedChild=!0,this.dataSource=[...this.dataSource]}_mapDataToTreeControlFormat(me,J){const He=[];for(let zt of me){let hn=Object.assign(new oc,zt);hn.parent=J,hn.data=zt,hn.expandable=this.expandableNode?.(zt),He.push(hn)}return He}getParentNode(me){for(let He=this.dataSource.indexOf(me)-1;He>=0;He--)if(this.dataSource[He].level===me.level-1)return this.dataSource[He];return null}shouldRender(me){let J=this.getParentNode(me);for(;J;){if(!J.isExpanded)return!1;J=this.getParentNode(J)}return!0}descendantsAllSelected(me){}static#e=this.\u0275fac=function(J){return new(J||Is)};static#t=this.\u0275cmp=u.Xpm({type:Is,selectors:[["mts-tree"]],contentQueries:function(J,He,zt){if(1&J&&u.Suo(zt,go,5),2&J){let hn;u.iGM(hn=u.CRH())&&(He._treeNodeTemplate=hn.first)}},inputs:{selectable:"selectable",titleFieldFunc:"titleFieldFunc",expandableNode:"expandableNode",loader:"loader"},outputs:{nodeClick:"nodeClick"},decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["class","example-tree-node","cdkTreeNodePadding","",3,"display","click",4,"cdkTreeNodeDef"],["cdkTreeNodePadding","","class","example-tree-node",3,"display",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkTreeNodePadding","",1,"example-tree-node",3,"click"],["disabled","",1,"btn","btn-light"],[1,"fa-solid","fa-period"],["class","form-check",4,"ngIf"],[3,"contextmenu",4,"ngIf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"name","checked","change"],[3,"contextmenu"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkTreeNodePadding","",1,"example-tree-node"],["cdkTreeNodeToggle","",1,"btn","me-2",3,"click"],[1,"fa-solid","fa-chevron-left","d-inline-block"],["type","checkbox",1,"form-check-input",3,"name","checked"]],template:function(J,He){1&J&&(u.TgZ(0,"cdk-tree",0),u.YNc(1,ca,7,5,"cdk-tree-node",1),u.YNc(2,Ws,6,10,"cdk-tree-node",2),u.qZA()),2&J&&(u.Q6J("dataSource",He.dataSource)("treeControl",He.treeControl),u.xp6(2),u.Q6J("cdkTreeNodeDefWhen",He.hasChild))},dependencies:[$n.O5,$n.tP,hu,Pa,Ta,qr,ua],styles:[".example-tree-node[_ngcontent-%COMP%]{display:flex;align-items:center}.example-tree-node[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:baseline}"]})}class gn{static#e=this.\u0275fac=function(J){return new(J||gn)};static#t=this.\u0275mod=u.oAB({type:gn});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,yl,o.u5]})}class oc{constructor(me){this.id=me?.id,this.parent=me?.parent,this.children=me?.children?.length?me?.children:[],this.expanded=null==me?.expanded||0==me.expanded,this.expandable=null==me?.expandable||1==me.expandable,this.data=me?.data,this.isLoadedChild=me?.isLoadedChild}get level(){if(typeof this._level>"u"){this._level=0;let me=this.parent;for(;null!=me;)me=me.parent,this._level++}return this._level}}N(9541);var Cs=N(8658),da=N(5795);class Da{static#e=this.\u0275fac=function(J){return new(J||Da)};static#t=this.\u0275mod=u.oAB({type:Da});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}const zs=new u.OlP("APP_DIALOG_DATA");class ka{constructor(){this.size="md"}}var Jo=N(3948),ye=N(4567),ve=N(3353),ne=N(4080),We=N(9521),_n=N(9770),ki=N(8675);function Wo(Ge,me){}class Nr{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let js=(()=>{class Ge extends ne.en{constructor(J,He,zt,hn,Ii,Li,Co,gs){super(),this._elementRef=J,this._focusTrapFactory=He,this._config=hn,this._interactivityChecker=Ii,this._ngZone=Li,this._overlayRef=Co,this._focusMonitor=gs,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=iu=>{this._portalOutlet.hasAttached();const Hu=this._portalOutlet.attachDomPortal(iu);return this._contentAttached(),Hu},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=zt}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(J){this._portalOutlet.hasAttached();const He=this._portalOutlet.attachComponentPortal(J);return this._contentAttached(),He}attachTemplatePortal(J){this._portalOutlet.hasAttached();const He=this._portalOutlet.attachTemplatePortal(J);return this._contentAttached(),He}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(J,He){this._interactivityChecker.isFocusable(J)||(J.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const zt=()=>{J.removeEventListener("blur",zt),J.removeEventListener("mousedown",zt),J.removeAttribute("tabindex")};J.addEventListener("blur",zt),J.addEventListener("mousedown",zt)})),J.focus(He)}_focusByCssSelector(J,He){let zt=this._elementRef.nativeElement.querySelector(J);zt&&this._forceFocus(zt,He)}_trapFocus(){const J=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||J.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(He=>{He||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const J=this._config.restoreFocus;let He=null;if("string"==typeof J?He=this._document.querySelector(J):"boolean"==typeof J?He=J?this._elementFocusedBeforeDialogWasOpened:null:J&&(He=J),this._config.restoreFocus&&He&&"function"==typeof He.focus){const zt=(0,ve.ht)(),hn=this._elementRef.nativeElement;(!zt||zt===this._document.body||zt===hn||hn.contains(zt))&&(this._focusMonitor?(this._focusMonitor.focusVia(He,this._closeInteractionType),this._closeInteractionType=null):He.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const J=this._elementRef.nativeElement,He=(0,ve.ht)();return J===He||J.contains(He)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,ve.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.Y36(u.SBq),u.Y36(Jo.qV),u.Y36($n.K0,8),u.Y36(Nr),u.Y36(Jo.ic),u.Y36(u.R0b),u.Y36(ye.Iu),u.Y36(Jo.tE))},Ge.\u0275cmp=u.Xpm({type:Ge,selectors:[["cdk-dialog-container"]],viewQuery:function(J,He){if(1&J&&u.Gf(ne.Pl,7),2&J){let zt;u.iGM(zt=u.CRH())&&(He._portalOutlet=zt.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(J,He){2&J&&u.uIk("id",He._config.id||null)("role",He._config.role)("aria-modal",He._config.ariaModal)("aria-labelledby",He._config.ariaLabel?null:He._ariaLabelledBy)("aria-label",He._config.ariaLabel)("aria-describedby",He._config.ariaDescribedBy||null)},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(J,He){1&J&&u.YNc(0,Wo,0,0,"ng-template",0)},dependencies:[ne.Pl],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),Ge})();class Xl{constructor(me,J){this.overlayRef=me,this.config=J,this.closed=new Nn.x,this.disableClose=J.disableClose,this.backdropClick=me.backdropClick(),this.keydownEvents=me.keydownEvents(),this.outsidePointerEvents=me.outsidePointerEvents(),this.id=J.id,this.keydownEvents.subscribe(He=>{He.keyCode===We.hY&&!this.disableClose&&!(0,We.Vb)(He)&&(He.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(me,J){if(this.containerInstance){const He=this.closed;this.containerInstance._closeInteractionType=J?.focusOrigin||"program",this.overlayRef.dispose(),He.next(me),He.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(me="",J=""){return this.overlayRef.updateSize({width:me,height:J}),this}addPanelClass(me){return this.overlayRef.addPanelClass(me),this}removePanelClass(me){return this.overlayRef.removePanelClass(me),this}}const Un=new u.OlP("DialogScrollStrategy"),vr=new u.OlP("DialogData"),ku=new u.OlP("DefaultDialogConfig"),Ro={provide:Un,deps:[ye.aV],useFactory:function Ra(Ge){return()=>Ge.scrollStrategies.block()}};let fu=0,eu=(()=>{class Ge{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(J,He,zt,hn,Ii,Li){this._overlay=J,this._injector=He,this._defaultOptions=zt,this._parentDialog=hn,this._overlayContainer=Ii,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Nn.x,this._afterOpenedAtThisLevel=new Nn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,_n.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,ki.O)(void 0))),this._scrollStrategy=Li}open(J,He){(He={...this._defaultOptions||new Nr,...He}).id=He.id||"cdk-dialog-"+fu++,He.id&&this.getDialogById(He.id);const hn=this._getOverlayConfig(He),Ii=this._overlay.create(hn),Li=new Xl(Ii,He),Co=this._attachContainer(Ii,Li,He);return Li.containerInstance=Co,this._attachDialogContent(J,Li,Co,He),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Li),Li.closed.subscribe(()=>this._removeOpenDialog(Li,!0)),this.afterOpened.next(Li),Li}closeAll(){ha(this.openDialogs,J=>J.close())}getDialogById(J){return this.openDialogs.find(He=>He.id===J)}ngOnDestroy(){ha(this._openDialogsAtThisLevel,J=>{!1===J.config.closeOnDestroy&&this._removeOpenDialog(J,!1)}),ha(this._openDialogsAtThisLevel,J=>J.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(J){const He=new ye.X_({positionStrategy:J.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:J.scrollStrategy||this._scrollStrategy(),panelClass:J.panelClass,hasBackdrop:J.hasBackdrop,direction:J.direction,minWidth:J.minWidth,minHeight:J.minHeight,maxWidth:J.maxWidth,maxHeight:J.maxHeight,width:J.width,height:J.height,disposeOnNavigation:J.closeOnNavigation});return J.backdropClass&&(He.backdropClass=J.backdropClass),He}_attachContainer(J,He,zt){const hn=zt.injector||zt.viewContainerRef?.injector,Ii=[{provide:Nr,useValue:zt},{provide:Xl,useValue:He},{provide:ye.Iu,useValue:J}];let Li;zt.container?"function"==typeof zt.container?Li=zt.container:(Li=zt.container.type,Ii.push(...zt.container.providers(zt))):Li=js;const Co=new ne.C5(Li,zt.viewContainerRef,u.zs3.create({parent:hn||this._injector,providers:Ii}),zt.componentFactoryResolver);return J.attach(Co).instance}_attachDialogContent(J,He,zt,hn){if(J instanceof u.Rgc){const Ii=this._createInjector(hn,He,zt,void 0);let Li={$implicit:hn.data,dialogRef:He};hn.templateContext&&(Li={...Li,..."function"==typeof hn.templateContext?hn.templateContext():hn.templateContext}),zt.attachTemplatePortal(new ne.UE(J,null,Li,Ii))}else{const Ii=this._createInjector(hn,He,zt,this._injector),Li=zt.attachComponentPortal(new ne.C5(J,hn.viewContainerRef,Ii,hn.componentFactoryResolver));He.componentInstance=Li.instance}}_createInjector(J,He,zt,hn){const Ii=J.injector||J.viewContainerRef?.injector,Li=[{provide:vr,useValue:J.data},{provide:Xl,useValue:He}];return J.providers&&("function"==typeof J.providers?Li.push(...J.providers(He,J,zt)):Li.push(...J.providers)),J.direction&&(!Ii||!Ii.get(Ll.Is,null,{optional:!0}))&&Li.push({provide:Ll.Is,useValue:{value:J.direction,change:(0,Zo.of)()}}),u.zs3.create({parent:Ii||hn,providers:Li})}_removeOpenDialog(J,He){const zt=this.openDialogs.indexOf(J);zt>-1&&(this.openDialogs.splice(zt,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((hn,Ii)=>{hn?Ii.setAttribute("aria-hidden",hn):Ii.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),He&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const J=this._overlayContainer.getContainerElement();if(J.parentElement){const He=J.parentElement.children;for(let zt=He.length-1;zt>-1;zt--){const hn=He[zt];hn!==J&&"SCRIPT"!==hn.nodeName&&"STYLE"!==hn.nodeName&&!hn.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(hn,hn.getAttribute("aria-hidden")),hn.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const J=this._parentDialog;return J?J._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return Ge.\u0275fac=function(J){return new(J||Ge)(u.LFG(ye.aV),u.LFG(u.zs3),u.LFG(ku,8),u.LFG(Ge,12),u.LFG(ye.Xj),u.LFG(Un))},Ge.\u0275prov=u.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();function ha(Ge,me){let J=Ge.length;for(;J--;)me(Ge[J])}let nl=(()=>{class Ge{}return Ge.\u0275fac=function(J){return new(J||Ge)},Ge.\u0275mod=u.oAB({type:Ge}),Ge.\u0275inj=u.cJS({providers:[eu,Ro],imports:[ye.U8,ne.eL,Jo.rt,ne.eL]}),Ge})();class pa{constructor(me,J){this.ref=me,this.config=J,this.afterClosedSubject=new Nn.x,this.dialogConfig=J}close(me){this.afterClosedSubject?.next(me),this.afterClosedSubject.complete(),this.ref.close(me)}cancel(){this.ref.close()}get data(){return this.ref.config.data}static#e=this.\u0275fac=function(J){return new(J||pa)(u.LFG(Xl),u.LFG(ka,8))};static#t=this.\u0275prov=u.Yz7({token:pa,factory:pa.\u0275fac})}class Fa{constructor(me){this.viewContainerRef=me}static#e=this.\u0275fac=function(J){return new(J||Fa)(u.Y36(u.s_b))};static#t=this.\u0275dir=u.lG2({type:Fa,selectors:[["","app-dialog-container-host",""]]})}function tu(Ge,me){1&Ge&&u.GkF(0)}function mu(Ge,me){if(1&Ge&&(u.TgZ(0,"div",4)(1,"h5"),u._uU(2),u.qZA(),u.YNc(3,tu,1,0,"ng-container",5),u.qZA()),2&Ge){const J=u.oxw(2),He=u.MAs(4);u.xp6(2),u.Oqu(null==J.dialogConfig?null:J.dialogConfig.headerTitle),u.xp6(1),u.Q6J("ngTemplateOutlet",He)}}function Os(Ge,me){1&Ge&&(u.ynx(0),u.YNc(1,mu,4,2,"ng-template",3),u.BQk())}function Na(Ge,me){}function Ru(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){u.CHM(J);const zt=u.oxw();return u.KtG(zt.close())}),u._UZ(1,"i",7),u.qZA()}if(2&Ge){const J=u.oxw();u.Q6J("disabled",null==J.dialogConfig?null:J.dialogConfig.disableClose)}}class bl{constructor(me){this.ref=me}ngOnInit(){const me=this.host.viewContainerRef;me.clear(),this.ref.data.component instanceof u.Rgc?me.createEmbeddedView(this.ref.data.component):me.createComponent(this.ref.data.component),this.dialogConfig=this.ref.dialogConfig}close(){this.ref.cancel()}static#e=this.\u0275fac=function(J){return new(J||bl)(u.Y36(pa))};static#t=this.\u0275cmp=u.Xpm({type:bl,selectors:[["mts-dialog-container"]],viewQuery:function(J,He){if(1&J&&u.Gf(Fa,7),2&J){let zt;u.iGM(zt=u.CRH())&&(He.host=zt.first)}},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["app-dialog-container-host",""],["closeBtn",""],["mts-card-header",""],[1,"d-flex","align-items-end"],[4,"ngTemplateOutlet"],["type","button",1,"btn","btn-light","ms-auto",3,"disabled","click"],[1,"fa-solid","fa-xmark"]],template:function(J,He){if(1&J&&(u.TgZ(0,"mts-card"),u.YNc(1,Os,2,0,"ng-container",0),u.YNc(2,Na,0,0,"ng-template",1),u.qZA(),u.YNc(3,Ru,2,1,"ng-template",null,2,u.W1O)),2&J){const zt=u.MAs(4);u.xp6(1),u.Q6J("ngIf",null==He.dialogConfig?null:He.dialogConfig.headerTitle)("ngIfElse",zt)}},dependencies:[$n.O5,$n.tP,da.A,Cs.v,Fa],styles:["[_nghost-%COMP%]{display:block;background:#FFFFFF;border-radius:8px}"]})}class fa{constructor(me,J){this.dialog=me,this.injector=J}open(me,J){return this.dialogRef=this.dialog.open(bl,{injector:J?.injector?J.injector:this.injector,disableClose:J?.disableClose,width:this.calculateSize(J?.size),data:{component:me},providers:(He,zt,hn)=>[{provide:pa,useValue:this.appDialogRef=new pa(He,J)},{provide:zs,useValue:J?.data}]}),this.appDialogRef}close(){this.dialogRef?.close()}calculateSize(me="md"){let J="";switch(me){case"sm":J="500px";break;case"md":J="700px";break;case"lg":J="992px";break;case"xl":J="1200px"}return J}static#e=this.\u0275fac=function(J){return new(J||fa)(u.LFG(eu),u.LFG(u.zs3))};static#t=this.\u0275prov=u.Yz7({token:fa,factory:fa.\u0275fac})}class qa{static#e=this.\u0275fac=function(J){return new(J||qa)};static#t=this.\u0275mod=u.oAB({type:qa});static#n=this.\u0275inj=u.cJS({providers:[fa],imports:[$n.ez,Da,nl]})}const gu=new u.OlP("LOOKUP_DATA");class Ts{constructor(me){this.ref=me,this.closed=new Nn.x}close(me,J,He){this.closed?.next({value:me,text:J,hint:He}),this.closed.complete(),this.ref.close(me)}cancel(){this.ref.close()}get data(){return this.ref.config.data}static#e=this.\u0275fac=function(J){return new(J||Ts)(u.LFG(Xl))};static#t=this.\u0275prov=u.Yz7({token:Ts,factory:Ts.\u0275fac})}class ts{constructor(me,J){this.dialog=me,this.injector=J}open(me,J){return this.dialogRef=this.dialog.open(me,{injector:J?.injector?J.injector:this.injector,width:this.calculateSize(J?.size),disableClose:J?.disableClose,providers:(He,zt,hn)=>[{provide:Ts,useValue:this.appDialogRef=new Ts(He)},{provide:gu,useValue:J?.data}]}),this.appDialogRef}close(){this.dialogRef?.close()}calculateSize(me="md"){let J="";switch(me){case"sm":J="576px";break;case"md":J="700px";break;case"lg":J="992px";break;case"xl":J="1200px"}return J}static#e=this.\u0275fac=function(J){return new(J||ts)(u.LFG(eu),u.LFG(u.zs3))};static#t=this.\u0275prov=u.Yz7({token:ts,factory:ts.\u0275fac})}class ma{constructor(me){this.template=me}static#e=this.\u0275fac=function(J){return new(J||ma)(u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:ma,selectors:[["","mts-lookup-template",""]]})}function Eo(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){u.CHM(J);const zt=u.oxw();return u.KtG(zt._onClear())}),u._UZ(1,"i",6),u.qZA()}if(2&Ge){const J=u.oxw();u.Q6J("disabled",J.disabled)}}function dr(Ge,me){if(1&Ge&&(u.TgZ(0,"small",7),u._uU(1),u.qZA()),2&Ge){const J=u.oxw();u.xp6(1),u.Oqu(J._hint)}}class _u{constructor(me){this.dialog=me,this.placeholder="",this.size="md",this.disableClose=!0,this.hintChange=new u.vpe,this.textChange=new u.vpe,this.clear=new u.vpe,this.selectedItem=new u.vpe,this._onChangeCallback=J=>{},this._onTouchedCallback=()=>{}}writeValue(me){if(null==me||null==me)return this._value=null,void(this._hint=this._text="");"string"==typeof this.text&&(this._text=this.text),"string"==typeof this.hint&&(this._hint=this.hint)}registerOnChange(me){this._onChangeCallback=me}registerOnTouched(me){this._onTouchedCallback=me}setDisabledState(me){this.disabled=me}_onSearch(){this.dialog.open(this._component.template,{size:this.size,disableClose:this.disableClose})?.closed.subscribe(J=>{this._onSelectItem(J)})}_onSelectItem(me){this._value=me?.value,this._text=me?.text,this._hint=me?.hint,this.hintChange.emit(this._hint),this.textChange.emit(this._text),this.selectedItem.emit(me),this._onTouchedCallback(),this._onChangeCallback(this._value)}_onKeyup(){this._text||this._onClear()}_onClear(){this._value=null,this._text=this._hint="",this.clear.emit(),this._onChangeCallback(this._value)}static#e=this.\u0275fac=function(J){return new(J||_u)(u.Y36(ts))};static#t=this.\u0275cmp=u.Xpm({type:_u,selectors:[["mts-lookup"]],contentQueries:function(J,He,zt){if(1&J&&u.Suo(zt,ma,5),2&J){let hn;u.iGM(hn=u.CRH())&&(He._component=hn.first)}},inputs:{disabled:"disabled",required:"required",name:"name",placeholder:"placeholder",size:"size",disableClose:"disableClose",text:"text",hint:"hint"},outputs:{hintChange:"hintChange",textChange:"textChange",clear:"clear",selectedItem:"selectedItem"},features:[u._Bn([{provide:o.JU,useExisting:(0,u.Gpc)(()=>_u),multi:!0}])],decls:6,vars:7,consts:[[1,"input-group"],["name","lookup",1,"form-control",3,"ngModel","disabled","readOnly","required","ngModelChange","keyup"],["type","button","class","input-group-text cursor-pointer",3,"disabled","click",4,"ngIf"],["type","button",1,"input-group-text","cursor-pointer",3,"disabled","click"],[1,"fa-solid","fa-magnifying-glass"],["class","text-primary",4,"ngIf"],[1,"fa-solid","fa-xmark"],[1,"text-primary"]],template:function(J,He){1&J&&(u.TgZ(0,"div",0)(1,"input",1),u.NdJ("ngModelChange",function(hn){return He._text=hn})("keyup",function(){return He._onKeyup()}),u.qZA(),u.YNc(2,Eo,2,1,"button",2),u.TgZ(3,"button",3),u.NdJ("click",function(){return He._onSearch()}),u._UZ(4,"i",4),u.qZA()(),u.YNc(5,dr,2,1,"small",5)),2&J&&(u.xp6(1),u.Q6J("ngModel",He._text)("disabled",He.disabled)("readOnly",!0)("required",He.required),u.xp6(1),u.Q6J("ngIf",He._value||He._text),u.xp6(1),u.Q6J("disabled",He.disabled),u.xp6(2),u.Q6J("ngIf",He._hint))},dependencies:[$n.O5,o.Fj,o.JJ,o.Q7,o.On],styles:["button[_ngcontent-%COMP%]{border:none}"]})}class La{static#e=this.\u0275fac=function(J){return new(J||La)};static#t=this.\u0275mod=u.oAB({type:La});static#n=this.\u0275inj=u.cJS({providers:[ts],imports:[$n.ez,o.u5]})}const Ja=["id",""];function Cr(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"div",3)(1,"label",4),u._uU(2),u.qZA(),u.TgZ(3,"input",5),u.NdJ("click",function(zt){u.CHM(J);const hn=u.oxw(2);return u.KtG(hn.onInputClick(zt))})("blur",function(zt){u.CHM(J);const hn=u.oxw(2);return u.KtG(hn.onInputBlur(zt))})("ngModelChange",function(zt){u.CHM(J);const hn=u.oxw(2);return u.KtG(hn.value=zt)}),u.qZA()()}if(2&Ge){const J=u.oxw().$implicit,He=u.oxw();u.Tol(null==J?null:J.classes),u.Udp("property",null==J?null:J.styles),u.xp6(1),u.Q6J("for",He.id+J.value),u.xp6(1),u.Oqu(J.title),u.xp6(1),u.Q6J("disabled",He.disabled)("id",He.id+J.value)("name",He.id+J.value)("value",J.value)("ngModel",He.value)("required",He.required)}}function co(Ge,me){if(1&Ge&&(u.ynx(0),u.YNc(1,Cr,4,12,"div",2),u.BQk()),2&Ge){const J=me.$implicit;let He;u.xp6(1),u.Q6J("ngIf",null===(He=null==J?null:J.condition)||void 0===He||He)}}const ps={provide:o.JU,useExisting:(0,u.Gpc)(()=>ga),multi:!0};class ga{constructor(){this.items=[{title:"\u0628\u0644\u0647",value:!0},{title:"\u062e\u06cc\u0631",value:!1}],this.inputOnBlur=new u.vpe,this.inputOnClick=new u.vpe}get value(){return this.innerValue}set value(me){this.innerValue!==me&&(this.innerValue=me,this.onChange&&this.onChange(me))}writeValue(me){this.innerValue=me}registerOnChange(me){this.onChange=me}registerOnTouched(me){this.onTouched=me}setDisabledState(me){this.disabled=me}onInputBlur(me){this.inputOnBlur.emit(me),this.onTouched&&this.onTouched()}onInputClick(me){this.inputOnClick.emit(me),this.onTouched&&this.onTouched()}static#e=this.\u0275fac=function(J){return new(J||ga)};static#t=this.\u0275cmp=u.Xpm({type:ga,selectors:[["mts-radio-button","id",""]],inputs:{items:"items",id:"id",disabled:"disabled",required:"required"},outputs:{inputOnBlur:"inputOnBlur",inputOnClick:"inputOnClick"},features:[u._Bn([ps])],attrs:Ja,decls:2,vars:1,consts:[[1,"form-check"],[4,"ngFor","ngForOf"],["class","form-check form-check-inline",3,"class","property",4,"ngIf"],[1,"form-check","form-check-inline"],[1,"form-check-label",3,"for"],["type","radio",1,"form-check-input",3,"disabled","id","name","value","ngModel","required","click","blur","ngModelChange"]],template:function(J,He){1&J&&(u.TgZ(0,"div",0),u.YNc(1,co,2,1,"ng-container",1),u.qZA()),2&J&&(u.xp6(1),u.Q6J("ngForOf",He.items))},dependencies:[$n.sg,$n.O5,o.Fj,o._,o.JJ,o.Q7,o.On],changeDetection:0})}class Wa{static#e=this.\u0275fac=function(J){return new(J||Wa)};static#t=this.\u0275mod=u.oAB({type:Wa});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5]})}N(4572),N(273),N(8071);class no{static#e=this.\u0275fac=function(J){return new(J||no)};static#t=this.\u0275mod=u.oAB({type:no});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}N(3263);class Qo{static#e=this.\u0275fac=function(J){return new(J||Qo)};static#t=this.\u0275mod=u.oAB({type:Qo});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5]})}N(8680);var te=N(4588);class Se{static#e=this.\u0275fac=function(J){return new(J||Se)};static#t=this.\u0275mod=u.oAB({type:Se});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5,te.k,gt.As]})}var X=N(2766),Ue=N(546),En=(N(4376),N(408),N(1079));const oi=["\u062f","\u0633","\u0686","\u067e","\u062c","\u0634","\u06cc"],Jr=["\u0641\u0631\u0648\u0631\u062f\u06cc\u0646","\u0627\u0631\u062f\u06cc\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"];class Dn extends zo.wf{getWeekdayLabel(me){return oi[me-1]}getMonthShortName(me){return Jr[me-1]}getMonthFullName(me){return Jr[me-1]}getDayAriaLabel(me){return`${me.year}-${this.getMonthFullName(me.month)}-${me.day}`}static#e=this.\u0275fac=function(){let me;return function(He){return(me||(me=u.n5z(Dn)))(He||Dn)}}();static#t=this.\u0275prov=u.Yz7({token:Dn,factory:Dn.\u0275fac})}var Tr=N(6854);class er extends zo.NG{constructor(){super(...arguments),this.DELIMITER="/"}parse(me){try{const J=me.split(this.DELIMITER),He=new zo.qj(+J[0],+J[1],+J[2]);return(0,Tr.xD)(He)?He:null}catch{return null}}format(me){return me?me.year+this.DELIMITER+me.month+this.DELIMITER+me.day:""}static#e=this.\u0275fac=function(){let me;return function(He){return(me||(me=u.n5z(er)))(He||er)}}();static#t=this.\u0275prov=u.Yz7({token:er,factory:er.\u0275fac,providedIn:"root"})}class wo{static#e=this.\u0275fac=function(J){return new(J||wo)};static#t=this.\u0275mod=u.oAB({type:wo});static#n=this.\u0275inj=u.cJS({providers:[{provide:zo.vL,useClass:zo.jn},{provide:zo.wf,useClass:Dn},{provide:zo.NG,useClass:er}],imports:[$n.ez,o.u5,zo.M,o.u5,En.k]})}var hr=N(8017),Pr=N(8580),Ko=(N(2508),N(7140),N(4086),N(6521));class Ma{static#e=this.\u0275fac=function(J){return new(J||Ma)};static#t=this.\u0275mod=u.oAB({type:Ma});static#n=this.\u0275inj=u.cJS({providers:[X.Je],imports:[$n.ez,o.u5,gt.As,Ot,X.u3,Tr.v,zo.XC,wo,te.k,hr.F1,Pr.XD,Se]})}var zl=N(529);const yu=["fileInput"];function Ks(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){u.CHM(J);const zt=u.oxw();return u.KtG(zt._onInputClick())}),u._UZ(1,"i",7),u.qZA()}}function Gs(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){u.CHM(J);const zt=u.oxw();return u.KtG(zt._onClearFile())}),u._UZ(1,"i",9),u.qZA()}if(2&Ge){const J=u.oxw();u.Q6J("disabled",J._disabled)}}function rr(Ge,me){if(1&Ge){const J=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){u.CHM(J);const zt=u.oxw();return u.KtG(zt._onDownloadFile())}),u._UZ(1,"i",10),u.qZA()}if(2&Ge){const J=u.oxw();u.Q6J("disabled",J._disabled)}}class Ba{constructor(me,J){this._http=me,this.toast=J,this._onChangeCallback=He=>{},this._onTouchedCallback=()=>{}}writeValue(me){if(this._fileName=this.fileName??"",!(null==this._value||this._value instanceof File))throw Error("Invalid file value");this._value=this._value}registerOnChange(me){this._onChangeCallback=me}registerOnTouched(me){this._onTouchedCallback=me}setDisabledState(me){this._disabled=me}_onFileChange(me){const J=me.target?.files[0];J&&(this._value=J,this._fileName=J.name,this._onChangeCallback(this._value))}_onInputClick(){this._onTouchedCallback&&this._onTouchedCallback(),this._fileInput?.nativeElement.click()}_onClearFile(){this._value=null,this._fileName=null,this._onChangeCallback(this._value)}_onDownloadFile(){if(this.downloadUrl){let me;me=this._http.get(this.downloadUrl,{responseType:"blob"}),this._disabled=!0,me.subscribe(J=>{gt.iK.saveBlob(J,"file"),this._disabled=!1},J=>{this._disabled=!1,this.toast.show("\u0647\u0646\u06af\u0627\u0645 \u062f\u0627\u0646\u0644\u0648\u062f \u0641\u0627\u06cc\u0644 \u062e\u0637\u0627\u06cc\u06cc \u0631\u062e \u062f\u0627\u062f",{style:"error"})})}}static#e=this.\u0275fac=function(J){return new(J||Ba)(u.Y36(zl.eN),u.Y36(Us.k))};static#t=this.\u0275cmp=u.Xpm({type:Ba,selectors:[["mts-file-input"]],viewQuery:function(J,He){if(1&J&&u.Gf(yu,5,u.SBq),2&J){let zt;u.iGM(zt=u.CRH())&&(He._fileInput=zt.first)}},inputs:{accept:"accept",required:"required",downloadUrl:"downloadUrl",fileName:"fileName"},features:[u._Bn([{provide:o.JU,useExisting:(0,u.Gpc)(()=>Ba),multi:!0}])],decls:7,vars:7,consts:[["type","file","ngModel","","name","fileInput",1,"d-none",3,"accept","change"],["fileInput",""],[1,"mts-file-upload-wrapper","input-group"],["name","fileInput","readonly","",1,"form-control","cursor-pointer",3,"ngModel","disabled","required","click"],["type","button","class","input-group-text cursor-pointer",3,"click",4,"ngIf"],["type","button","class","input-group-text cursor-pointer pe-3",3,"disabled","click",4,"ngIf"],["type","button",1,"input-group-text","cursor-pointer",3,"click"],[1,"fa-regular","fa-paperclip-vertical"],["type","button",1,"input-group-text","cursor-pointer","pe-3",3,"disabled","click"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-download"]],template:function(J,He){1&J&&(u.TgZ(0,"input",0,1),u.NdJ("change",function(hn){return He._onFileChange(hn)}),u.qZA(),u.TgZ(2,"div",2)(3,"input",3),u.NdJ("click",function(){return He._onInputClick()}),u.qZA(),u.YNc(4,Ks,2,0,"button",4),u.YNc(5,Gs,2,1,"button",5),u.YNc(6,rr,2,1,"button",5),u.qZA()),2&J&&(u.Q6J("accept",He.accept),u.xp6(3),u.Q6J("ngModel",He._fileName)("disabled",He._disabled)("required",He.required),u.xp6(1),u.Q6J("ngIf",!He._value),u.xp6(1),u.Q6J("ngIf",He._value),u.xp6(1),u.Q6J("ngIf",He.downloadUrl))},dependencies:[$n.O5,o.Fj,o.JJ,o.Q7,o.On],styles:[".mts-file-upload-wrapper[_ngcontent-%COMP%]{position:relative}button[_ngcontent-%COMP%]{border:none}"]})}class ns{static#e=this.\u0275fac=function(J){return new(J||ns)};static#t=this.\u0275mod=u.oAB({type:ns});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5,Ot]})}N(5624);class Ua{static#e=this.\u0275fac=function(J){return new(J||Ua)};static#t=this.\u0275mod=u.oAB({type:Ua});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}var Fu=N(7856);N(2608);N(9391);class li{static#e=this.\u0275fac=function(J){return new(J||li)};static#t=this.\u0275mod=u.oAB({type:li});static#n=this.\u0275inj=u.cJS({imports:[$n.ez]})}N(8557);class jl{static#e=this.\u0275fac=function(J){return new(J||jl)};static#t=this.\u0275mod=u.oAB({type:jl});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,fn]})}var ss=N(1260);class $s{static#e=this.\u0275fac=function(J){return new(J||$s)};static#t=this.\u0275mod=u.oAB({type:$s});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5]})}var ms=N(8362);N(3279);class xl{static#e=this.\u0275fac=function(J){return new(J||xl)};static#t=this.\u0275mod=u.oAB({type:xl});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,o.u5,o.UX,te.k,Ot]})}class nu{static#e=this.\u0275fac=function(J){return new(J||nu)};static#t=this.\u0275mod=u.oAB({type:nu});static#n=this.\u0275inj=u.cJS({imports:[gn,Da,uo,La,no,te.k,wo,Wa,Ua,ns,qa,Ma,Se,Qo,jl,$s,li,ms.G8,xl]})}class zr{static#e=this.\u0275fac=function(J){return new(J||zr)};static#t=this.\u0275mod=u.oAB({type:zr});static#n=this.\u0275inj=u.cJS({imports:[$n.ez,rt.Bz,o.u5,Bs,nu,Tr.v,gt.As,bi,fn,Ot,zo.XC,zo.bz]})}},3263:(tn,nt,N)=>{"use strict";N.d(nt,{Y:()=>Bt});var o=N(1571),O=N(4006),u=N(9751),fe=N(4968),Y=N(9300),i=N(8372),q=N(1884),de=N(8505),we=N(3900),Ve=N(9646);class De{constructor(kt){this.templateRef=kt}static#e=this.\u0275fac=function(bn){return new(bn||De)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:De,selectors:[["","mtsAutocompleteOption",""]]})}var it=N(6895);const Ke=["searchInput"];function je(Ft,kt){1&Ft&&(o.TgZ(0,"li",6)(1,"div",7)(2,"span",8),o._uU(3,"Loading..."),o.qZA()(),o.TgZ(4,"span"),o._uU(5,"\u062f\u0631 \u062d\u0627\u0644 \u062c\u0633\u062a\u062c\u0648..."),o.qZA()())}const Be=function(Ft,kt){return{active:Ft,"fw-bold":kt}};function Je(Ft,kt){if(1&Ft&&(o.TgZ(0,"a",14),o._uU(1),o.qZA()),2&Ft){const bn=o.oxw(),Kt=bn.index,Zn=bn.$implicit,wn=o.oxw(3);o.Q6J("ngClass",o.WLB(2,Be,wn.selectedOptionIndex===Kt,wn.selectedOptionIndex===Kt)),o.xp6(1),o.hij(" ",wn.getItemText(Zn)," ")}}function gt(Ft,kt){1&Ft&&o._UZ(0,"i",15)}function lt(Ft,kt){1&Ft&&o.GkF(0)}const wt=function(Ft){return{$implicit:Ft}};function dt(Ft,kt){if(1&Ft&&(o.ynx(0),o.YNc(1,lt,1,0,"ng-container",16),o.BQk()),2&Ft){const bn=o.oxw().$implicit,Kt=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",Kt._textTemplate.templateRef)("ngTemplateOutletContext",o.VKq(2,wt,bn))}}function ct(Ft,kt){if(1&Ft){const bn=o.EpF();o.TgZ(0,"li",11),o.NdJ("click",function(){const wn=o.CHM(bn).$implicit,Vr=o.oxw(3);return o.KtG(Vr._onSelectOption(wn))}),o.YNc(1,Je,2,5,"a",12),o.YNc(2,gt,1,0,"i",13),o.YNc(3,dt,2,4,"ng-container",4),o.qZA()}if(2&Ft){const bn=kt.index,Kt=o.oxw(3);o.xp6(1),o.Q6J("ngIf",!Kt._textTemplate),o.xp6(1),o.Q6J("ngIf",Kt.selectedOptionIndex===bn),o.xp6(1),o.Q6J("ngIf",Kt._textTemplate)}}function at(Ft,kt){if(1&Ft&&(o.ynx(0),o.YNc(1,ct,4,3,"li",10),o.BQk()),2&Ft){const bn=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",bn._dataResult)}}function Qe(Ft,kt){if(1&Ft&&(o.ynx(0),o.YNc(1,at,2,1,"ng-container",9),o.BQk()),2&Ft){const bn=o.oxw(),Kt=o.MAs(6);o.xp6(1),o.Q6J("ngIf",bn._dataResult.length>0)("ngIfElse",Kt)}}function ht(Ft,kt){1&Ft&&(o.TgZ(0,"li",17),o._uU(1,"\u0645\u0642\u062f\u0627\u0631\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),o.qZA())}class Bt{constructor(kt,bn){this.el=kt,this.renderer=bn,this.placeholder="\u062c\u0633\u062a\u062c\u0648 \u06a9\u0646\u06cc\u062f....",this.minLength=2,this.optionSelect=new o.vpe,this._dataResult=[],this._loading=!1,this._showData=!1,this.error=!1,this.selectedOptionIndex=null,this._onChangeCallback=Zn=>{},this._onTouchedCallback=()=>{},this._validateCallback=Zn=>{};const Kt=this.el.nativeElement;this.renderer.addClass(Kt,"dropdown-menu"),this.renderer.addClass(Kt,"d-block")}set dataProvider(kt){if("function"!=typeof kt)throw"Invalid data provider";this._dataProvider=kt}ngOnInit(){this._onSearch()}writeValue(kt){this._value=kt,this.text instanceof u.y?this.text.subscribe(bn=>{this._text=bn}):this._text=this.text}registerOnChange(kt){this._onChangeCallback=kt}registerOnTouched(kt){this._onTouchedCallback=kt}registerOnValidatorChange(kt){this._validateCallback=kt}setDisabledState(kt){this.disabled=kt}validate(kt){let bn={};return this._value?(this.error&&(bn={defaultMessage:!0}),bn):null}_onSearch(){this._checkDataProvider();let kt=this.searchInput?.nativeElement;const bn=(0,fe.R)(kt,"keyup").pipe((0,Y.h)(Kt=>kt.value.length>=this.minLength),(0,i.b)(1e3),(0,q.x)(),(0,de.b)(()=>this._loading=!0),(0,we.w)(Kt=>this._dataProvider(kt)instanceof u.y?this._dataProvider(kt.value):(0,Ve.of)([])));this._onTouchedCallback(),this._subscription=bn.subscribe({next:Kt=>{this.selectedOptionIndex=null,this._showData=!0,this._loading=!1,this._dataResult=Kt},error:Kt=>{this._dataResult=[],this._loading=!1,this.error=!0}})}_onSelectOption(kt){this._text=this.getItemText(kt),this.getItemValue(kt),this.selectedOptionIndex=this._dataResult.indexOf(kt),this._showData=!1,this._onChangeCallback(this._value),this.optionSelect.emit(kt)}getItemText(kt){let bn="";return"string"==typeof this.textField?bn=kt[this.textField]:"function"==typeof this.textField&&(bn=this.textField(kt)),bn}getItemValue(kt){"string"==typeof this.valueField?this._value=kt[this.valueField]:"function"==typeof this.valueField&&(this._value=this.valueField(kt))}_onInput(kt){""===kt.target.value&&this._resetValue()}_onBlur(){this._onTouchedCallback()}_onFocusIn(){this._showData=!!this._dataResult.length}_checkDataProvider(){if(!this._dataProvider)throw new Error("dataProvider is not defined")}_resetValue(){this._dataResult=[],this._value=this.selectedOptionIndex=null,this._showData=this._loading=this.error=!1,this._onChangeCallback(this._value)}_onDocumentClicked(kt){this.el.nativeElement.contains(kt.target)||(this._showData=!1)}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(bn){return new(bn||Bt)(o.Y36(o.SBq),o.Y36(o.Qsj))};static#t=this.\u0275cmp=o.Xpm({type:Bt,selectors:[["mts-autocomplete"]],contentQueries:function(bn,Kt,Zn){if(1&bn&&o.Suo(Zn,De,5),2&bn){let wn;o.iGM(wn=o.CRH())&&(Kt._textTemplate=wn.first)}},viewQuery:function(bn,Kt){if(1&bn&&o.Gf(Ke,7,o.SBq),2&bn){let Zn;o.iGM(Zn=o.CRH())&&(Kt.searchInput=Zn.first)}},hostBindings:function(bn,Kt){1&bn&&o.NdJ("click",function(wn){return Kt._onDocumentClicked(wn,wn.target)},!1,o.evT)},inputs:{placeholder:"placeholder",required:"required",disabled:"disabled",textField:"textField",valueField:"valueField",text:"text",minLength:"minLength",dataProvider:"dataProvider"},outputs:{optionSelect:"optionSelect"},features:[o._Bn([{provide:O.JU,useExisting:(0,o.Gpc)(()=>Bt),multi:!0},{provide:O.Cf,useExisting:(0,o.Gpc)(()=>Bt),multi:!0}])],decls:7,vars:7,consts:[["name","autocomplete","type","text","aria-autocomplete","list","autocomplete","off",1,"form-control","dropdown-toggle",3,"placeholder","required","disabled","ngModel","blur","input","focus","ngModelChange"],["searchInput",""],[1,"mt-1"],["class","dropdown-item p-2",4,"ngIf"],[4,"ngIf"],["noResult",""],[1,"dropdown-item","p-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"visually-hidden"],[4,"ngIf","ngIfElse"],["class","dropdown-item d-flex p-1",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","d-flex","p-1",3,"click"],[3,"ngClass",4,"ngIf"],["class","fa-solid fa-check ms-auto me-2 text-primary fw-bold",4,"ngIf"],[3,"ngClass"],[1,"fa-solid","fa-check","ms-auto","me-2","text-primary","fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-item","d-flex","p-1"]],template:function(bn,Kt){1&bn&&(o.TgZ(0,"input",0,1),o.NdJ("blur",function(){return Kt._onBlur()})("input",function(wn){return Kt._onInput(wn)})("focus",function(){return Kt._onFocusIn()})("ngModelChange",function(wn){return Kt._text=wn}),o.qZA(),o.TgZ(2,"ul",2),o.YNc(3,je,6,0,"li",3),o.YNc(4,Qe,2,2,"ng-container",4),o.qZA(),o.YNc(5,ht,2,0,"ng-template",null,5,o.W1O)),2&bn&&(o.Q6J("placeholder",Kt.placeholder)("required",Kt.required)("disabled",Kt.disabled)("ngModel",Kt._text),o.uIk("aria-expanded",Kt._dataResult.length>0),o.xp6(3),o.Q6J("ngIf",Kt._loading),o.xp6(1),o.Q6J("ngIf",Kt._showData))},dependencies:[it.mk,it.sg,it.O5,it.tP,O.Fj,O.JJ,O.Q7,O.On],styles:["[_nghost-%COMP%]{position:relative;padding:0;border:none}ul[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #b5b5b54d}li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(181,181,181,.3)}"]})}},9541:(tn,nt,N)=>{"use strict";N.d(nt,{Q:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mts-card-footer",""]],exportAs:["mts-card-footer"]})}},8658:(tn,nt,N)=>{"use strict";N.d(nt,{v:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mts-card-header",""]],exportAs:["mts-card-header"]})}},5795:(tn,nt,N)=>{"use strict";N.d(nt,{A:()=>de});var o=N(8658),O=N(9541),u=N(1571),fe=N(6895);function Y(we,Ve){if(1&we&&(u.TgZ(0,"div",3),u.GkF(1,4),u.qZA()),2&we){const De=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",De._header.templateRef)}}function i(we,Ve){if(1&we&&(u.TgZ(0,"div",5),u.GkF(1,4),u.qZA()),2&we){const De=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",De._footer.templateRef)}}const q=["*"];class de{constructor(Ve,De){this._element=Ve,this._renderer=De}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"card")}static#e=this.\u0275fac=function(De){return new(De||de)(u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:de,selectors:[["mts-card"]],contentQueries:function(De,it,Ke){if(1&De&&(u.Suo(Ke,o.v,5),u.Suo(Ke,O.Q,5)),2&De){let je;u.iGM(je=u.CRH())&&(it._header=je.first),u.iGM(je=u.CRH())&&(it._footer=je.first)}},ngContentSelectors:q,decls:4,vars:2,consts:[["class","card-header",4,"ngIf"],[1,"card-body"],["class","card-footer",4,"ngIf"],[1,"card-header"],[3,"ngTemplateOutlet"],[1,"card-footer"]],template:function(De,it){1&De&&(u.F$t(),u.YNc(0,Y,2,1,"div",0),u.TgZ(1,"div",1),u.Hsn(2),u.qZA(),u.YNc(3,i,2,1,"div",2)),2&De&&(u.Q6J("ngIf",it._header),u.xp6(3),u.Q6J("ngIf",it._footer))},dependencies:[fe.O5,fe.tP]})}},9391:(tn,nt,N)=>{"use strict";N.d(nt,{z:()=>Y});var o=N(1571),O=N(1366),u=N(6895);function fe(i,q){if(1&i){const de=o.EpF();o.ynx(0),o.TgZ(1,"div",1)(2,"h5"),o._UZ(3,"i",2),o._uU(4),o.qZA(),o.TgZ(5,"button",3),o.NdJ("click",function(){o.CHM(de);const Ve=o.oxw();return o.KtG(Ve.reject())}),o.qZA()(),o.TgZ(6,"div",4)(7,"div",5),o._uU(8),o.qZA()(),o.TgZ(9,"div",6)(10,"button",7),o.NdJ("click",function(){o.CHM(de);const Ve=o.oxw();return o.KtG(Ve.reject())}),o._uU(11),o.qZA(),o.TgZ(12,"button",8),o.NdJ("click",function(){o.CHM(de);const Ve=o.oxw();return o.KtG(Ve.accept())}),o._uU(13),o.qZA()(),o.BQk()}if(2&i){const de=o.oxw();o.xp6(4),o.hij("\xa0 ",de.dialogProps.title," "),o.xp6(4),o.Oqu(de.dialogProps.content),o.xp6(3),o.Oqu(de.dialogProps.rejectTitle),o.xp6(2),o.Oqu(de.dialogProps.acceptTitle)}}class Y{constructor(q){this.activeModal=q}ngOnInit(){}accept(){this.activeModal.close("accept")}reject(){this.activeModal.close("close")}static#e=this.\u0275fac=function(de){return new(de||Y)(o.Y36(O.Kz))};static#t=this.\u0275cmp=o.Xpm({type:Y,selectors:[["rbc-confirmation-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"modal-header"],[1,"bi","bi-info-circle","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"ms-2"],[1,"modal-footer"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-primary","ms-1",3,"click"]],template:function(de,we){1&de&&o.YNc(0,fe,14,4,"ng-container",0),2&de&&o.Q6J("ngIf",we.dialogProps)},dependencies:[u.O5],styles:["button[_ngcontent-%COMP%]{width:75px}.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:.8rem!important}.modal-footer[_ngcontent-%COMP%]{padding:.6rem!important}"]})}},2608:(tn,nt,N)=>{"use strict";N.d(nt,{Z:()=>Y});var o=N(1571),O=N(9391);class u{}var fe=N(1366);class Y{constructor(q){this.modalService=q,this._confirmationPropsConfig=new u,this.confirm=new o.vpe,this.reject=new o.vpe}set appConfirmation(q){this._confirmationPropsConfig.title=q.title?q.title:"\u062a\u0627\u06cc\u06cc\u062f",this._confirmationPropsConfig.content=q.content?q.content:"\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f",this._confirmationPropsConfig.acceptTitle=q.acceptTitle?q.acceptTitle:"\u0628\u0644\u06cc",this._confirmationPropsConfig.rejectTitle=q.rejectTitle?q.rejectTitle:"\u062e\u06cc\u0631",this._confirmationPropsConfig.centered=!q.centered||q.centered,this._confirmationPropsConfig.size=q.size?q.size:"500"}onClick(){const q=this.modalService.open(O.z,{size:this._confirmationPropsConfig.size,centered:this._confirmationPropsConfig.centered});q.componentInstance.dialogProps=this._confirmationPropsConfig,q.result.then(de=>{"accept"===de?this.confirm.emit():this.reject.emit()},de=>{})}static#e=this.\u0275fac=function(de){return new(de||Y)(o.Y36(fe.FF))};static#t=this.\u0275dir=o.lG2({type:Y,selectors:[["","appConfirmation",""]],hostBindings:function(de,we){1&de&&o.NdJ("click",function(De){return we.onClick(De)})},inputs:{appConfirmation:"appConfirmation"},outputs:{confirm:"confirm",reject:"reject"},exportAs:["appConfirmation"]})}},7140:(tn,nt,N)=>{"use strict";N.d(nt,{v:()=>O});var o=N(1571);class O{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mts-action-data-table",""]]})}},2508:(tn,nt,N)=>{"use strict";N.d(nt,{U:()=>u});var o=N(1571),O=N(6521);class u{constructor(){this.filterComponentModel=new O._,this.filterValue=null,this.type="text",this.shrink=!1,this.bold=!1}static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275dir=o.lG2({type:u,selectors:[["mts-data-table-col"]],contentQueries:function(i,q,de){if(1&i&&(o.Suo(de,o.Rgc,5),o.Suo(de,O.U,5)),2&i){let we;o.iGM(we=o.CRH())&&(q.template=we.first),o.iGM(we=o.CRH())&&(q.externalFilterColumn=we.first)}},inputs:{filterValue:"filterValue",name:"name",fieldName:"fieldName",title:"title",type:"type",option:"option",filter:"filter",sort:"sort",cellClass:"cellClass",shrink:"shrink",bold:"bold"}})}},6521:(tn,nt,N)=>{"use strict";N.d(nt,{U:()=>u,_:()=>O});var o=N(1571);class O{}class u{constructor(Y){this.componentFilterTemplate=Y}static#e=this.\u0275fac=function(i){return new(i||u)(o.Y36(o.Rgc,8))};static#t=this.\u0275dir=o.lG2({type:u,selectors:[["data-table-filter-column"],["","data-table-filter-column",""]]})}},4086:(tn,nt,N)=>{"use strict";N.d(nt,{o:()=>ct});var o=N(1571),O=N(6854);class u{constructor(Qe){this.filterValue=null,this.filterValue=Qe?.filterValue,this.name=Qe?.name,this.fieldName=Qe?.fieldName,this.title=Qe?.title,this.type=Qe?.type??"text",this.option=Qe?.option,this.filter=Qe?.filter,this.translatedEnumFilter=Qe?.translatedEnumFilter,this.externalFilterColumn=Qe?.externalFilterColumn,this.filterComponentModel=Qe?.filterComponentModel,Qe?.name&&!Qe?.fieldName&&(this.fieldName=Qe?.name?.charAt(0).toUpperCase()+Qe?.name?.slice(1))}get required(){return this.filter.required}get min(){return this.filter.min}get max(){return this.filter.max}get minLength(){return this.filter.minLength}get maxLength(){return this.filter.maxLength}get minDate(){return this.filter.minDate}get maxDate(){return this.filter.maxDate}}var fe=N(1343),Y=N(6895),i=N(4006),q=N(4148),de=N(408),we=N(8008),Ve=N(1250);function De(at,Qe){1&at&&o.GkF(0)}const it=function(at){return{$implicit:at}};function Ke(at,Qe){if(1&at&&(o.TgZ(0,"div",13),o.YNc(1,De,1,0,"ng-container",14),o.qZA()),2&at){const ht=o.oxw().$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",ht.externalFilterColumn.componentFilterTemplate)("ngTemplateOutletContext",o.VKq(2,it,ht.filterComponentModel))}}function je(at,Qe){if(1&at){const ht=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"input",18),o.NdJ("ngModelChange",function(Ft){o.CHM(ht);const kt=o.oxw(2).$implicit;return o.KtG(kt.filterValue=Ft)}),o.qZA()(),o.BQk()}if(2&at){const ht=o.oxw(2).$implicit,Bt=o.oxw();o.xp6(1),o.Q6J("label",ht.title),o.xp6(1),o.Q6J("name",Bt.columnName(ht))("ngModel",ht.filterValue)("minlength",ht.minLength)("maxlength",ht.maxLength)("required",ht.required)}}function Be(at,Qe){if(1&at){const ht=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"input",19),o.NdJ("ngModelChange",function(Ft){o.CHM(ht);const kt=o.oxw(2).$implicit;return o.KtG(kt.filterValue=Ft)}),o.qZA()(),o.BQk()}if(2&at){const ht=o.oxw(2).$implicit,Bt=o.oxw();o.xp6(1),o.Q6J("label",ht.title),o.xp6(1),o.Q6J("name",Bt.columnName(ht))("ngModel",ht.filterValue)("min",ht.min)("max",ht.max)("required",ht.required)}}function Je(at,Qe){if(1&at&&(o.TgZ(0,"option",23),o._uU(1),o.qZA()),2&at){const ht=Qe.$implicit;o.Q6J("ngValue",ht.key),o.xp6(1),o.hij(" ",ht.value," ")}}function gt(at,Qe){if(1&at){const ht=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"select",20),o.NdJ("ngModelChange",function(Ft){o.CHM(ht);const kt=o.oxw(2).$implicit;return o.KtG(kt.filterValue=Ft)}),o.TgZ(3,"option",21),o._uU(4,"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),o.qZA(),o.YNc(5,Je,2,2,"option",22),o.ALo(6,"enumKeyValue"),o.qZA()(),o.BQk()}if(2&at){const ht=o.oxw(2).$implicit,Bt=o.oxw();o.xp6(1),o.Q6J("label",ht.title),o.xp6(1),o.Q6J("name",Bt.columnName(ht))("ngModel",ht.filterValue)("required",ht.required),o.xp6(1),o.Q6J("ngValue",null),o.xp6(2),o.Q6J("ngForOf",o.lcZ(6,6,ht.translatedEnumFilter))}}function lt(at,Qe){if(1&at){const ht=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"mts-date-picker",24),o.NdJ("ngModelChange",function(Ft){o.CHM(ht);const kt=o.oxw(2).$implicit;return o.KtG(kt.filterValue=Ft)})("ngModelChange",function(){o.CHM(ht);const Ft=o.oxw(2).$implicit,kt=o.oxw();return o.KtG(kt._changeDateValue(Ft))}),o.qZA()(),o.BQk()}if(2&at){const ht=o.oxw(2).$implicit,Bt=o.oxw();o.xp6(1),o.Q6J("label",ht.title),o.xp6(1),o.Q6J("name",Bt.columnName(ht))("ngModel",ht.filterValue)("minDate",ht.minDate)("maxDate",ht.maxDate)("required",ht.required)}}function wt(at,Qe){if(1&at&&(o.ynx(0,15),o.YNc(1,je,3,6,"ng-container",16),o.YNc(2,Be,3,6,"ng-container",16),o.YNc(3,gt,7,8,"ng-container",16),o.YNc(4,lt,3,6,"ng-container",16),o.BQk()),2&at){const ht=o.oxw().$implicit;o.Q6J("ngSwitch",ht.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","number"),o.xp6(1),o.Q6J("ngSwitchCase","enum"),o.xp6(1),o.Q6J("ngSwitchCase","date")}}function dt(at,Qe){if(1&at&&(o.ynx(0),o.YNc(1,Ke,2,4,"div",11),o.YNc(2,wt,5,5,"ng-template",12),o.BQk()),2&at){const ht=Qe.$implicit;o.xp6(1),o.Q6J("ngIf",ht.externalFilterColumn&&ht.externalFilterColumn.componentFilterTemplate),o.xp6(1),o.Q6J("ngIf",!(null!=ht.externalFilterColumn&&ht.externalFilterColumn.componentFilterTemplate))}}class ct{constructor(Qe){this.translatorService=Qe,this.header="\u0641\u06cc\u0644\u062a\u0631\u0647\u0627\u06cc \u062c\u0633\u062a\u062c\u0648",this.search=new o.vpe,this.clear=new o.vpe,this._filterDescriptors=[],this._filterableColumns=[]}columnName(Qe){return Qe.fieldName??Qe.name}ngAfterContentInit(){[...this.columns].filter(ht=>ht.filter).map(ht=>{this._mapFilterToFilterDescriptor(ht)}),this._translationEnumKeys()}_mapFilterToFilterDescriptor(Qe){if("boolean"==typeof Qe.filter)this._filterDescriptors.push(new u({filterValue:null,name:Qe.name,fieldName:Qe.fieldName,title:Qe.title,type:Qe.type,option:Qe.option,externalFilterColumn:Qe.externalFilterColumn,filterComponentModel:Qe.filterComponentModel,filter:{min:Qe.min,max:Qe.max,minLength:Qe.minLength,maxLength:Qe.maxLength,operator:"text"===Qe.type?fe.Td.LI:Qe.filter.operator}}));else if(Qe.filter?.operator===fe.Td.BT){let ht=new u({filterValue:null,name:Qe.name,fieldName:Qe.fieldName,title:Qe.title+" (\u0627\u0632 \u062a\u0627\u0631\u06cc\u062e)",type:Qe.type,option:Qe.option,externalFilterColumn:Qe.externalFilterColumn,filterComponentModel:Qe.filterComponentModel,filter:{operator:fe.Td.GEQ,minDate:Qe.filter.minDate,isBetween:!0}}),Bt=new u({filterValue:null,name:Qe.name,fieldName:Qe.fieldName,title:Qe.title+" (\u062a\u0627 \u062a\u0627\u0631\u06cc\u062e)",type:Qe.type,option:Qe.option,externalFilterColumn:Qe.externalFilterColumn,filterComponentModel:Qe.filterComponentModel,filter:{operator:fe.Td.LEQ,maxDate:Qe.filter.maxDate,required:ht.filterValue,isBetween:!0}});this._filterDescriptors.push(ht,Bt)}}_translationEnumKeys(){this._filterDescriptors.map(Qe=>{"enum"===Qe.type&&Qe.option&&(Qe.translatedEnumFilter=this.translatorService.lookupEnumKeyValueByEnumClass(Qe.option.enum))})}_changeDateValue(Qe){if(Qe.filter.isBetween&&Qe.filterValue){let ht=this._filterDescriptors.find(Bt=>Bt.name===Qe.name&&Bt.filter.operator===fe.Td.LEQ);ht&&(ht.filter.required=!0)}}_onSearch(){this.search.emit(this._filterDescriptors)}_clear(){this._filterDescriptors.map(Qe=>Qe.filterValue=null),this.clear.emit(this.columns)}static#e=this.\u0275fac=function(ht){return new(ht||ct)(o.Y36(O.Qp))};static#t=this.\u0275cmp=o.Xpm({type:ct,selectors:[["mts-data-table-filter"]],inputs:{columns:"columns",header:"header",collapseFilter:"collapseFilter"},outputs:{search:"search",clear:"clear"},decls:16,vars:4,consts:[["form","ngForm"],["id","accordionFilters",1,"accordion","accordion-flush"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed","border-bottom","border-primary","fw-bold"],["id","flush-collapseOne","data-bs-parent","#accordionFilters",1,"accordion-collapse","collapse","p-3",3,"ngClass"],[1,"row"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"fa-solid","fa-magnifying-glass"],[1,"btn","btn-light","ms-2",3,"click"],["class","col-md-3",4,"ngIf"],[3,"ngIf"],[1,"col-md-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-md-3",3,"label"],["type","text",1,"form-control",3,"name","ngModel","minlength","maxlength","required","ngModelChange"],["type","number","mtsOnlyNumber","",1,"form-control",3,"name","ngModel","min","max","required","ngModelChange"],[1,"form-select",3,"name","ngModel","required","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"name","ngModel","minDate","maxDate","required","ngModelChange"]],template:function(ht,Bt){if(1&ht&&(o.TgZ(0,"form",null,0)(2,"div",1)(3,"div",2)(4,"h2",3)(5,"button",4),o._uU(6),o.qZA()(),o.TgZ(7,"div",5)(8,"div",6),o.YNc(9,dt,3,2,"ng-container",7),o.TgZ(10,"div")(11,"button",8),o.NdJ("click",function(){return Bt._onSearch()}),o._UZ(12,"i",9),o._uU(13,"\xa0\u062c\u0633\u062a\u062c\u0648"),o.qZA(),o.TgZ(14,"button",10),o.NdJ("click",function(){return Bt._clear()}),o._uU(15,"\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc"),o.qZA()()()()()()()),2&ht){const Ft=o.MAs(1);o.xp6(6),o.hij(" ",Bt.header," "),o.xp6(1),o.Q6J("ngClass",Bt.collapseFilter?"show":""),o.xp6(2),o.Q6J("ngForOf",Bt._filterDescriptors),o.xp6(2),o.Q6J("disabled",Ft.invalid)}},dependencies:[Y.mk,Y.sg,Y.O5,Y.tP,Y.RF,Y.n9,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.Q7,i.wO,i.nD,i.qQ,i.Fd,i.On,i.F,q.p,de.L,we.h,Ve.u]})}},4376:(tn,nt,N)=>{"use strict";N.d(nt,{Q:()=>pi});var o=N(8196),O=N(2766),u=N(8122),fe=N(2508),Y=N(7140),i=N(1343),q=N(1571),de=N(6854),we=N(546),Ve=N(6521),De=N(6895),it=N(6556),Ke=N(1366),je=N(4086),Be=N(5556),Je=N(5064);function gt(Mn,Pn){if(1&Mn){const mn=q.EpF();q.TgZ(0,"div",8)(1,"mts-data-table-filter",9),q.NdJ("search",function(ii){q.CHM(mn);const $n=q.oxw();return q.KtG($n._onSearch(ii))})("clear",function(){q.CHM(mn);const ii=q.oxw();return q.KtG(ii._onClear())}),q.qZA()()}if(2&Mn){const mn=q.oxw();q.xp6(1),q.Q6J("columns",mn._columns)}}function lt(Mn,Pn){1&Mn&&q.GkF(0)}function wt(Mn,Pn){if(1&Mn&&(q.TgZ(0,"div"),q.YNc(1,lt,1,0,"ng-container",10),q.qZA()),2&Mn){const mn=q.oxw();q.xp6(1),q.Q6J("ngTemplateOutlet",mn._action.template)}}function dt(Mn,Pn){1&Mn&&q._UZ(0,"i",17)}function ct(Mn,Pn){1&Mn&&(q.TgZ(0,"div",18)(1,"span",19),q._uU(2,"Loading..."),q.qZA()())}function at(Mn,Pn){1&Mn&&(q.ynx(0),q._UZ(1,"i",23),q._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),q.BQk())}function Qe(Mn,Pn){1&Mn&&(q.ynx(0),q._UZ(1,"i",24),q._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a "),q.BQk())}function ht(Mn,Pn){1&Mn&&(q.ynx(0),q._UZ(1,"i",25),q._uU(2," \u062e\u0631\u0648\u062c\u06cc PDF \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),q.BQk())}function Bt(Mn,Pn){1&Mn&&(q.ynx(0),q._UZ(1,"i",26),q._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a PDF "),q.BQk())}function Ft(Mn,Pn){if(1&Mn){const mn=q.EpF();q.TgZ(0,"button",20),q.NdJ("click",function(){const $n=q.CHM(mn).$implicit,mr=q.oxw(2);return q.KtG(mr._downloadFile($n))}),q.ynx(1,21),q.YNc(2,at,3,0,"ng-container",22),q.YNc(3,Qe,3,0,"ng-container",22),q.YNc(4,ht,3,0,"ng-container",22),q.YNc(5,Bt,3,0,"ng-container",22),q.BQk(),q.qZA()}if(2&Mn){const mn=Pn.$implicit,kn=q.oxw(2);q.xp6(1),q.Q6J("ngSwitch",mn),q.xp6(1),q.Q6J("ngSwitchCase",kn.exportTypeEnum.excel),q.xp6(1),q.Q6J("ngSwitchCase",kn.exportTypeEnum.excelAllPage),q.xp6(1),q.Q6J("ngSwitchCase",kn.exportTypeEnum.pdf),q.xp6(1),q.Q6J("ngSwitchCase",kn.exportTypeEnum.pdfAllPage)}}function kt(Mn,Pn){if(1&Mn&&(q.TgZ(0,"div",11)(1,"button",12),q.YNc(2,dt,1,0,"i",13),q._uU(3,"\xa0 "),q.YNc(4,ct,3,0,"ng-template",null,14,q.W1O),q._uU(6," \u062f\u0627\u0646\u0644\u0648\u062f "),q.qZA(),q.TgZ(7,"div",15),q.YNc(8,Ft,6,5,"button",16),q.qZA()()),2&Mn){const mn=q.MAs(5),kn=q.oxw();q.xp6(2),q.Q6J("ngIf",!kn._loadingFile)("ngIfElse",mn),q.xp6(6),q.Q6J("ngForOf",kn.exportTypes)}}function bn(Mn,Pn){1&Mn&&(q.TgZ(0,"th",29),q._uU(1,"#"),q.qZA())}function Kt(Mn,Pn){if(1&Mn&&q._UZ(0,"i",32),2&Mn){const mn=q.oxw().$implicit,kn=q.oxw(2);q.Udp("transform",kn._transformSort(mn))}}const Zn=function(){return{cursor:"pointer"}};function wn(Mn,Pn){if(1&Mn){const mn=q.EpF();q.TgZ(0,"th",30),q.NdJ("click",function(){const $n=q.CHM(mn).$implicit,mr=q.oxw(2);return q.KtG(mr._onHeaderClick($n))}),q._uU(1),q.YNc(2,Kt,1,2,"i",31),q.qZA()}if(2&Mn){const mn=Pn.$implicit,kn=q.oxw(2);q.Akn(kn._isSortable(mn)?q.DdM(4,Zn):""),q.xp6(1),q.hij(" ",mn.title," "),q.xp6(1),q.Q6J("ngIf",kn._isSortable(mn)&&kn._hasSortDirection(mn))}}function Vr(Mn,Pn){if(1&Mn&&(q.TgZ(0,"thead")(1,"tr"),q.YNc(2,bn,2,0,"th",27),q.YNc(3,wn,3,5,"th",28),q.qZA()()),2&Mn){const mn=q.oxw();q.xp6(2),q.Q6J("ngIf",mn.showRowNumber),q.xp6(1),q.Q6J("ngForOf",mn._columns)}}function Hi(Mn,Pn){if(1&Mn&&(q.TgZ(0,"td",29),q._uU(1),q.qZA()),2&Mn){const mn=q.oxw().index,kn=q.oxw(2);q.xp6(1),q.hij("",kn.activeIndex*kn.pageSize+(mn+1)," ")}}function Vi(Mn,Pn){if(1&Mn&&(q.ynx(0),q._uU(1),q.BQk()),2&Mn){const mn=q.oxw(2).$implicit,kn=q.oxw().$implicit,ii=q.oxw(2);q.xp6(1),q.hij(" ",ii._getCellValue(kn,mn)," ")}}function Hr(Mn,Pn){if(1&Mn&&(q.ynx(0),q._uU(1),q.ALo(2,"jalaliDate"),q.BQk()),2&Mn){const mn=q.oxw(2).$implicit,kn=q.oxw().$implicit,ii=q.oxw(2);q.xp6(1),q.hij(" ",q.lcZ(2,1,ii._getCellValue(kn,mn))," ")}}function en(Mn,Pn){if(1&Mn&&(q.ynx(0),q._uU(1),q.ALo(2,"number"),q.BQk()),2&Mn){const mn=q.oxw(2).$implicit,kn=q.oxw().$implicit,ii=q.oxw(2);q.xp6(1),q.hij(" ",q.lcZ(2,1,ii._getCellValue(kn,mn))," ")}}function Ot(Mn,Pn){if(1&Mn&&(q.ynx(0),q._uU(1),q.ALo(2,"mtsTranslateEnum"),q.BQk()),2&Mn){const mn=q.oxw(2).$implicit,kn=q.oxw().$implicit,ii=q.oxw(2);q.xp6(1),q.hij(" ",q.xi3(2,1,ii._getCellValue(kn,mn),mn.option.enum)," ")}}function Jt(Mn,Pn){if(1&Mn&&(q.TgZ(0,"span",36),q.YNc(1,Vi,2,1,"ng-container",2),q.YNc(2,Hr,3,3,"ng-container",2),q.YNc(3,en,3,3,"ng-container",2),q.YNc(4,Ot,3,4,"ng-container",2),q.qZA()),2&Mn){const mn=q.oxw().$implicit;q.xp6(1),q.Q6J("ngIf","text"==mn.type),q.xp6(1),q.Q6J("ngIf","date"==mn.type),q.xp6(1),q.Q6J("ngIf","number"==mn.type),q.xp6(1),q.Q6J("ngIf","enum"==mn.type&&mn.option)}}function ln(Mn,Pn){1&Mn&&q.GkF(0)}const fn=function(Mn,Pn){return{$implicit:Mn,index:Pn}};function qt(Mn,Pn){if(1&Mn&&q.YNc(0,ln,1,0,"ng-container",37),2&Mn){const mn=q.oxw().$implicit,kn=q.oxw(),ii=kn.$implicit,$n=kn.index;q.Q6J("ngTemplateOutlet",mn.template)("ngTemplateOutletContext",q.WLB(2,fn,ii,$n))}}function On(Mn,Pn){if(1&Mn&&(q.TgZ(0,"td"),q.YNc(1,Jt,5,4,"ng-template",35),q.YNc(2,qt,1,5,"ng-template",35),q.qZA()),2&Mn){const mn=Pn.$implicit;q.Tol(mn.cellClass),q.ekj("shrinked",mn.shrink)("fw-bold",mn.bold),q.xp6(1),q.Q6J("ngIf",mn.name),q.xp6(1),q.Q6J("ngIf",mn.template&&!(null!=mn.externalFilterColumn&&mn.externalFilterColumn.componentFilterTemplate))}}function Nn(Mn,Pn){if(1&Mn&&(q.TgZ(0,"tr"),q.YNc(1,Hi,2,1,"td",27),q.YNc(2,On,3,8,"td",34),q.qZA()),2&Mn){const mn=q.oxw(2);q.xp6(1),q.Q6J("ngIf",mn.showRowNumber),q.xp6(1),q.Q6J("ngForOf",mn._columns)}}function Ui(Mn,Pn){if(1&Mn&&(q.ynx(0),q.YNc(1,Nn,3,2,"tr",33),q.BQk()),2&Mn){const mn=q.oxw();q.xp6(1),q.Q6J("ngForOf",mn.data)}}function Yn(Mn,Pn){if(1&Mn&&(q.TgZ(0,"tr")(1,"td",38),q._uU(2," \u0631\u06a9\u0648\u0631\u062f\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f. "),q.qZA()()),2&Mn){const mn=q.oxw();q.xp6(1),q.Q6J("colSpan",mn._columns.length+(mn.showRowNumber?1:0))}}function Gn(Mn,Pn){if(1&Mn&&(q.TgZ(0,"tr",39)(1,"td",40),q._UZ(2,"div",41),q.qZA()()),2&Mn){const mn=q.oxw();q.xp6(1),q.Q6J("colSpan",mn._columns.length+(mn.showRowNumber?1:0))}}function Xn(Mn,Pn){if(1&Mn){const mn=q.EpF();q.TgZ(0,"mts-pagination",42),q.NdJ("pageChange",function(){q.CHM(mn);const ii=q.oxw();return q.KtG(ii._pageChange())}),q.qZA()}if(2&Mn){const mn=q.oxw();q.Q6J("totalRecords",mn.totalRecords)}}const mi=function(Mn,Pn,mn){return{border:Mn,"table-bordered":Pn,"table-striped":mn}};class pi{constructor(Pn,mn){this.paginationConfig=Pn,this.translatorService=mn,this.showRowNumber=!0,this.showExportBtn=!1,this.showHeader=!0,this.pagable=!0,this.borderless=!1,this.tableBordered=!1,this.tableStripped=!0,this.small=!1,this.filterable=!1,this.sortable=!1,this.exportTypes=[we.t.excel,we.t.excelAllPage],this.collapsedFilter=!1,this.pageChange=new q.vpe,this.filterEnumOptions=[],this.exportTypeEnum=we.t,this._request=i.i8.page(this.activeIndex,this.pageSize)}get data(){return this._data}get filters(){return this._request?.filters}get totalRecords(){return this._totalRecords}get pageSize(){return this.paginationConfig.pageSize}get activeIndex(){return this.paginationConfig.activeIndex}getColumnName(Pn){return Pn.fieldName??Pn.name}ngOnChanges(Pn){Pn.dataSource&&this.dataSource&&(this.load(),this._data=this.dataSource.data,this._totalRecords=this.dataSource.totalRecords,this._changeSubscription=this.dataSource.change.subscribe(mn=>{mn instanceof u.i&&(this._data=mn.data,this._totalRecords=mn.total)}))}ngOnInit(){}get _showDownloadFile(){return this.data?.length&&this.dataSource.isSupportedDownload&&this.showExportBtn}_isSortable(Pn){return this.sortable&&Pn.sort}_isFilterable(Pn){return this.filterable&&Pn.filter}_hasSortDirection(Pn){return"asc"===Pn.sort||"desc"===Pn.sort}_transformSort(Pn){return`rotate(${"asc"===Pn.sort?180:0}deg)`}_onHeaderClick(Pn){let mn=this.getColumnName(Pn);this._isSortable(Pn)&&mn&&(this._hasSortDirection(Pn)?"asc"===Pn.sort?(Pn.sort="desc",this._request?.sortDescending(mn)):"desc"===Pn.sort&&(Pn.sort=!0,this._request?.resetSort()):(Pn.sort="asc",this._request?.sortAscending(mn)),this.load())}_onSearch(Pn){this._request?.page&&(this._request.page.index=0),Pn.map(kn=>{let ii=this.getColumnName(kn);this._request?.filters.map($n=>{"date"==kn.type&&kn.filter.isBetween||($n.field===kn.fieldName&&(kn.filterValue||kn.filterComponentModel?.value)||0===kn.filterValue||0===kn.filterComponentModel?.value)&&this._request?.removeFilter(ii)}),(kn.filterValue??kn.filterComponentModel?.value)||0===kn.filterValue||0===kn.filterComponentModel?.value?this._request?.addFilter(ii,kn.filterValue??kn.filterComponentModel?.value,kn.filter?.operator):this._request?.removeFilter(ii)}),this.load()}_onClear(){this._request?.removeAllFilters(),this.load()}load(){this.dataSource.load(this._request)}_getCellValue(Pn,mn){var kn=mn.name.split(".");let ii=Pn[kn[0]];for(let $n=1;$n<kn.length;$n++){if(null==ii)return;ii=ii[kn[$n]]}return ii}_pageChange(){this._request?.page&&(this._request.page.size=this.pageSize,this._request.page.index=this.activeIndex),this.pageChange.emit({activeIndex:this.activeIndex,pageSize:this.pageSize}),this.load()}_downloadFile(Pn){this._loadingFile=!0,this._constructBinaryDataRequest(Pn),this.dataSource.downloadFile(this._binaryDataRequest),this._changeSubscription=this.dataSource.change.subscribe(mn=>{mn.data&&this._loadingFile&&(o.iK.saveBlob(mn.data,mn.fileName),this._loadingFile=!1)})}_constructBinaryDataRequest(Pn){(Pn===we.t.excelAllPage||Pn===we.t.pdfAllPage)&&(this._binaryDataRequest=i.i8.page(this.activeIndex,2e6)),(Pn===we.t.excel||Pn===we.t.pdf)&&(this._binaryDataRequest=i.i8.page(this.activeIndex,this.pageSize)),this._binaryDataRequest?.exportType(i.dU.excel)}ngOnDestroy(){this._changeSubscription?.unsubscribe()}static#e=this.\u0275fac=function(mn){return new(mn||pi)(q.Y36(O.Je),q.Y36(de.Qp))};static#t=this.\u0275cmp=q.Xpm({type:pi,selectors:[["mts-data-table"]],contentQueries:function(mn,kn,ii){if(1&mn&&(q.Suo(ii,Y.v,5),q.Suo(ii,fe.U,4),q.Suo(ii,Ve.U,4)),2&mn){let $n;q.iGM($n=q.CRH())&&(kn._action=$n.first),q.iGM($n=q.CRH())&&(kn._columns=$n),q.iGM($n=q.CRH())&&(kn._externalFilters=$n)}},inputs:{dataSource:"dataSource",showRowNumber:"showRowNumber",showExportBtn:"showExportBtn",showHeader:"showHeader",pagable:"pagable",borderless:"borderless",tableBordered:"tableBordered",tableStripped:"tableStripped",small:"small",filterable:"filterable",sortable:"sortable",exportTypes:"exportTypes",collapsedFilter:"collapsedFilter"},outputs:{pageChange:"pageChange"},features:[q.TTD],decls:12,vars:17,consts:[["class","mb-2",4,"ngIf"],[1,"d-flex","my-2"],[4,"ngIf"],["ngbDropdown","","class","ms-auto",4,"ngIf"],[1,"table-responsive"],[1,"table","m-0",3,"ngClass"],["class","loading-row",4,"ngIf"],["class","mt-3",3,"totalRecords","pageChange",4,"ngIf"],[1,"mb-2"],[3,"columns","search","clear"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"ms-auto"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["class","fa-solid fa-download",4,"ngIf","ngIfElse"],["downloadTemplate",""],["ngbDropdownMenu","","aria-labelledby","exportType","name","type"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"fa-solid","fa-download"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["ngbDropdownItem","",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa-regular","fa-file-excel"],[1,"fa-solid","fa-file-excel"],[1,"fa-regular","fa-file-pdf"],[1,"fa-solid","fa-file-pdf"],["class","row-number text-muted",4,"ngIf"],[3,"style","click",4,"ngFor","ngForOf"],[1,"row-number","text-muted"],[3,"click"],["class","fa-solid fa-arrow-down ms-2 d-inline-block text-primary",3,"transform",4,"ngIf"],[1,"fa-solid","fa-arrow-down","ms-2","d-inline-block","text-primary"],[4,"ngFor","ngForOf"],[3,"class","shrinked","fw-bold",4,"ngFor","ngForOf"],[3,"ngIf"],[1,"text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-center","text-muted","small","p-3",3,"colSpan"],[1,"loading-row"],[1,"text-center",3,"colSpan"],["role","status",1,"spinner-border","text-primary"],[1,"mt-3",3,"totalRecords","pageChange"]],template:function(mn,kn){1&mn&&(q.YNc(0,gt,2,1,"div",0),q.TgZ(1,"div",1),q.YNc(2,wt,2,1,"div",2),q.YNc(3,kt,9,3,"div",3),q.qZA(),q.TgZ(4,"div",4)(5,"table",5),q.YNc(6,Vr,4,2,"thead",2),q.TgZ(7,"tbody"),q.YNc(8,Ui,2,1,"ng-container",2),q.YNc(9,Yn,3,1,"tr",2),q.YNc(10,Gn,3,1,"tr",6),q.qZA()()(),q.YNc(11,Xn,1,1,"mts-pagination",7)),2&mn&&(q.Q6J("ngIf",kn.filterable),q.xp6(2),q.Q6J("ngIf",kn._action),q.xp6(1),q.Q6J("ngIf",kn._showDownloadFile),q.xp6(2),q.ekj("table-borderless",kn.borderless)("table-sm",kn.small),q.Q6J("ngClass",q.kEZ(13,mi,!kn.borderless,kn.tableBordered,kn.tableStripped)),q.xp6(1),q.Q6J("ngIf",kn.showHeader),q.xp6(2),q.Q6J("ngIf",kn.data),q.xp6(1),q.Q6J("ngIf",!kn.data||0==kn.data.length),q.xp6(1),q.Q6J("ngIf",kn.dataSource&&kn.dataSource.loading),q.xp6(1),q.Q6J("ngIf",kn.pagable&&kn.totalRecords))},dependencies:[De.mk,De.sg,De.O5,De.tP,De.RF,De.n9,it.Q,Ke.jt,Ke.iD,Ke.Vi,Ke.TH,je.o,De.JJ,Be.K,Je.E],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;border-color:#e4e6ef}i[_ngcontent-%COMP%]{font-size:var(--bs-body-font-size)!important}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}td[_ngcontent-%COMP%]{min-width:50px}td.row-number[_ngcontent-%COMP%]{width:0;min-width:0}td.shrinked[_ngcontent-%COMP%]{width:0}tr.loading-row[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000014;transition:background-color 1s;z-index:1000}tr.loading-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;height:100%;display:flex;justify-content:center;align-items:center}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(161,165,183,.3)!important}"]})}},546:(tn,nt,N)=>{"use strict";N.d(nt,{c:()=>O,t:()=>o});var o=(()=>{return(u=o||(o={})).excel="Excel",u.excelAllPage="ExcelAllPage",u.pdf="PDF",u.pdfAllPage="PDFAllPage",o;var u})();const O=[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,name:"fff",percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,name:"fff",percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,name:"fff",lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,name:"fff",lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[]}]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[]}]}]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[]}]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,name:"fff",preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[{assetTypeId:55,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:17,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:6,lastClosePrice:6e3,lastDayBuyVolume:4e3,lastDayCapitalInCost:55e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,name:"fff",lastDayTotalPaidTax:0,lastDayTotalPaidWage:39696,lastDayTotalReceivedDiscount:0,lastVolume:4e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:46,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885864",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 2",expanded:!1,children:[]},{assetTypeId:56,blockedVolume:0,bonusShareCount:0,businessDate:"2023-12-27T00:00:00.000+00:00",byOrganizationId:"1",contractId:18,createdBy:"0059818905",createdOn:"2023-12-27T06:22:36.992+00:00",customerSsn:"0017726115",id:7,lastClosePrice:7e3,lastDayBuyVolume:5e3,lastDayCapitalInCost:65e3,lastDayCapitalInVolume:0,lastDayCapitalOutNetAsset:0,lastDayCapitalOutVolume:0,lastDaySellVolume:0,lastDayTotalPaidTax:0,name:"fff",lastDayTotalPaidWage:49696,lastDayTotalReceivedDiscount:0,lastVolume:5e3,modifiedBy:"0059818905",modifiedOn:"2023-12-27T06:22:36.992+00:00",netAssetValue:0,percentPerAllAssets:null,percentPerAllStock:null,portfolioName:"\u0633\u0628\u062f 2 \u0631\u0633\u0648\u0644 \u0639\u0628\u062f\u06cc \u0645\u0646\u062a\u0647\u06cc \u0628\u0647 \u06f1\u06f4\u06f0\u06f3/\u06f9/\u06f2\u06f1",preClosePrice:0,preTotalBuy:null,preTotalSell:null,preVolume:0,preemptiveRightCount:0,securityAssetId:47,securityIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u06a9\u0627\u0646\u0647 \u0647\u0627\u06cc \u0641\u0644\u0632\u06cc",securityInternalCode:"35700344742885865",securityMarket:"BOURSE",securityMarketTitle:"\u0628\u0648\u0631\u0633",securityName:"\u0645\u0639\u062f\u0646\u06cc \u0648 \u0635\u0646\u0639\u062a\u06cc \u06af\u0644 \u06af\u0647\u0631",securitySubIndustryName:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0622\u0647\u0646",securitySymbol:"\u06a9\u0627\u0646\u0647 3",expanded:!1,children:[]}]}]},408:(tn,nt,N)=>{"use strict";N.d(nt,{L:()=>we});var o=N(1366),O=N(1571),u=N(6854),fe=N(4006);const Y=["ngbInput"],i=["datepicker"],q=["toggleBtn"];function de(Ve,De){if(1&Ve){const it=O.EpF();O.TgZ(0,"div",7)(1,"button",8),O.NdJ("click",function(){O.CHM(it);const je=O.oxw();return O.KtG(je._onTodayClick())}),O._uU(2,"\u0627\u0645\u0631\u0648\u0632"),O.qZA()()}}class we{constructor(De,it,Ke){this.el=De,this.renderer=it,this.ngbCalendar=Ke,this.minDate={year:1300,month:1,day:1},this.transparent=!1,this.closed=new O.vpe,this.selectDate=new O.vpe,this._controlValue=null,this._onChangeCallback=je=>{},this._onTouchedCallback=()=>{},this._validateCallback=je=>{}}ngAfterViewInit(){this.transparent&&this.renderer.addClass(this.datepicker.nativeElement,"transparent"),this.transparent&&this.renderer.addClass(this.toggleBtn.nativeElement,"transparent")}writeValue(De){if(null==De||""===De)this._controlValue=null,this._datePickerValue=null;else{if("string"!=typeof De)throw this._onChangeCallback("invalid_date"),new Error("invalid date value");{const it=(0,u.bI)(De);this._datePickerValue=(0,u.PX)(it),this._controlValue=De}}}registerOnChange(De){this._onChangeCallback=De}registerOnTouched(De){this._onTouchedCallback=De}registerOnValidatorChange(De){this._validateCallback=De}setDisabledState(De){this.disabled=De}validate(De){let it={};return this._datePickerValue?(this._datePickerValue&&!(0,u.xD)(this._datePickerValue)&&(it={invalidDate:!0}),it):null}_onDateSelect(De){this._onChangeValue(De),this._closeCalendar()}_onTodayClick(){this._onDateSelect(this.ngbCalendar.getToday())}_updateValueToIso(De){this._controlValue=(0,u.HA)(De)}_onInput(){this._datePickerValue instanceof Object&&(this._datePickerValue=new o.qj(this._datePickerValue.year,this._datePickerValue.month,this._datePickerValue.day)),this._datePickerValue instanceof o.qj?this._onDateSelect(this._datePickerValue):this._onChangeValue(this._datePickerValue)}_onToggleCalendar(De){De.cancelBubble=!0,this.ngbInput.toggle()}_openCalendar(){this.ngbInput.open()}_closeCalendar(){this.ngbInput.close(),this.closed.emit()}_onChangeValue(De){if(De)if(De instanceof o.qj&&(0,u.xD)(De)){this._onTouchedCallback(),this._datePickerValue=De;const it=(0,u.$C)(De);this._updateValueToIso(it),this.selectDate.emit(De),this._onChangeCallback(this._controlValue)}else this._onChangeCallback("invalid_date");else this._onChangeCallback(null),this.selectDate.emit(null)}_onDocumentClicked(De){this.el.nativeElement.contains(De.target)||this._closeCalendar()}static#e=this.\u0275fac=function(it){return new(it||we)(O.Y36(O.SBq),O.Y36(O.Qsj),O.Y36(o.vL))};static#t=this.\u0275cmp=O.Xpm({type:we,selectors:[["mts-date-picker"]],viewQuery:function(it,Ke){if(1&it&&(O.Gf(Y,5),O.Gf(i,5),O.Gf(q,5)),2&it){let je;O.iGM(je=O.CRH())&&(Ke.ngbInput=je.first),O.iGM(je=O.CRH())&&(Ke.datepicker=je.first),O.iGM(je=O.CRH())&&(Ke.toggleBtn=je.first)}},hostBindings:function(it,Ke){1&it&&O.NdJ("click",function(Be){return Ke._onDocumentClicked(Be,Be.target)},!1,O.evT)},inputs:{disabled:"disabled",readonly:"readonly",required:"required",minDate:"minDate",maxDate:"maxDate",open:"open",transparent:"transparent"},outputs:{closed:"closed",selectDate:"selectDate"},features:[O._Bn([{provide:fe.JU,useExisting:(0,O.Gpc)(()=>we),multi:!0},{provide:fe.Cf,useExisting:(0,O.Gpc)(()=>we),multi:!0}])],decls:9,vars:9,consts:[[1,"input-group"],["type","text","placeholder","\u0631\u0648\u0632/\u0645\u0627\u0647/\u0633\u0627\u0644","id","mtsDate","name","dp","maxlength","10","ngbDatepicker","",1,"form-control",3,"firstDayOfWeek","footerTemplate","ngModel","minDate","maxDate","disabled","readOnly","required","ngModelChange","dateSelect","input"],["ngbInput","ngbDatepicker","datepicker",""],["role","button","type","button",1,"input-group-text",3,"disabled","click"],["toggleBtn",""],[1,"fa-solid","fa-calendar-days","text-primary"],["footerTemplate",""],[1,"mts-date-picker-footer","text-center","p-2"],["type","button","type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(it,Ke){if(1&it&&(O.TgZ(0,"div",0)(1,"input",1,2),O.NdJ("ngModelChange",function(Be){return Ke._datePickerValue=Be})("dateSelect",function(Be){return Ke._onDateSelect(Be)})("input",function(){return Ke._onInput()}),O.qZA(),O.TgZ(4,"button",3,4),O.NdJ("click",function(Be){return Ke._onToggleCalendar(Be)}),O._UZ(6,"i",5),O.qZA(),O.YNc(7,de,3,0,"ng-template",null,6,O.W1O),O.qZA()),2&it){const je=O.MAs(8);O.xp6(1),O.Q6J("firstDayOfWeek",6)("footerTemplate",je)("ngModel",Ke._datePickerValue)("minDate",Ke.minDate)("maxDate",Ke.maxDate)("disabled",Ke.disabled)("readOnly",Ke.readonly)("required",Ke.required),O.xp6(3),O.Q6J("disabled",Ke.disabled)}},dependencies:[fe.Fj,fe.JJ,fe.Q7,fe.nD,fe.On,o.J4],styles:[".mts-date-picker-toggle-btn[_ngcontent-%COMP%]{height:100%;width:1em;background:transparent;border:none;padding:0;top:0;left:.8rem;position:absolute}button[_ngcontent-%COMP%]{border:none}.transparent[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(161,165,183,.3)!important}"]})}},5624:(tn,nt,N)=>{"use strict";N.d(nt,{Y:()=>Je});var o=N(9751),O=N(8362),u=N(7856),fe=N(1571),Y=N(6895);const i=["fileInput"];function q(gt,lt){if(1&gt){const wt=fe.EpF();fe.TgZ(0,"img",14),fe.NdJ("click",function(){fe.CHM(wt);const ct=fe.oxw();return fe.KtG(ct._openFullScreenImage())}),fe.qZA()}if(2&gt){const wt=fe.oxw();fe.Q6J("src",wt.thumbnailUrl,fe.LSH)}}function de(gt,lt){if(1&gt&&(fe.TgZ(0,"h6",15),fe._uU(1),fe.qZA()),2&gt){const wt=fe.oxw();fe.Q6J("ngClass",wt.star?"card-title-star":""),fe.xp6(1),fe.hij(" ",wt.header," ")}}function we(gt,lt){if(1&gt&&(fe.TgZ(0,"p",16),fe._uU(1),fe.qZA()),2&gt){const wt=fe.oxw();fe.xp6(1),fe.hij(" ",wt.footer," ")}}function Ve(gt,lt){if(1&gt&&(fe.TgZ(0,"span",19),fe._uU(1),fe.qZA()),2&gt){const wt=fe.oxw(2);fe.xp6(1),fe.hij("",wt._getUploadPercentage(),"%")}}function De(gt,lt){if(1&gt&&(fe.ynx(0),fe.YNc(1,Ve,2,1,"span",17),fe._UZ(2,"div",18),fe.BQk()),2&gt){const wt=fe.oxw();fe.xp6(1),fe.Q6J("ngIf",wt._lastProgress)}}function it(gt,lt){1&gt&&(fe.ynx(0),fe._UZ(1,"i",20),fe.BQk())}function Ke(gt,lt){1&gt&&(fe.ynx(0),fe._UZ(1,"i",21),fe.BQk())}function je(gt,lt){if(1&gt){const wt=fe.EpF();fe.TgZ(0,"button",22),fe.NdJ("click",function(){fe.CHM(wt);const ct=fe.oxw();return fe.KtG(ct.showDialog())}),fe._uU(1," \u0627\u0646\u062a\u062e\u0627\u0628 \u0641\u0627\u06cc\u0644 "),fe.qZA()}if(2&gt){const wt=fe.oxw();fe.Q6J("disabled",wt.uploading||wt.disabled)}}function Be(gt,lt){if(1&gt&&(fe.TgZ(0,"a",23),fe._UZ(1,"i",24),fe.qZA()),2&gt){const wt=fe.oxw();fe.Q6J("href",wt.downloadUrl,fe.LSH)}}class Je{constructor(lt){this.imageViewerService=lt,this.disabled=!1,this.autoUpload=!1,this.fullScreenThumbnail=!0,this.star=!1,this.uploadStart=new fe.vpe,this.uploadProgress=new fe.vpe,this.uploadComplete=new fe.vpe,this.uploadError=new fe.vpe}get uploading(){return"uploading"===this._status}showDialog(){this._fileInput.nativeElement.click()}uploadFile(){if("function"!=typeof this.uploader)throw Error("No uploader function is set.");if(!(this._file instanceof File))throw Error("No File object is selected to upload.");let lt;try{lt=this.uploader(this._file,this.uploaderData)}catch{throw Error("upload error.")}if(!(lt instanceof o.y))throw Error("Uploader function should return an Observable.");this.uploadStart.emit(),this._status="uploading",this._uploaderSubscription=lt.subscribe({next:wt=>{wt instanceof u.md?(this._lastProgress=wt,this.uploadProgress.emit(wt)):wt instanceof u.D3&&(this.uploadComplete.emit(wt),this._status="uploadComplete")},complete:()=>{},error:wt=>{this.uploadError.emit(wt),this._status="error"}})}_onFileChange(lt){var wt=lt.target.files[0];wt&&(this._file=wt,this._status=void 0,this._lastProgress=void 0,this.uploader&&this.autoUpload&&this.uploadFile())}_getUploadPercentage(){if(this._lastProgress){const{uploaded:lt,total:wt}=this._lastProgress;return Math.floor(lt/wt*100)}return 0}_openFullScreenImage(){this.fullScreenThumbnail&&this.imageViewerService.show(this.thumbnailUrl)}ngOnDestroy(){this._uploaderSubscription?.unsubscribe()}static#e=this.\u0275fac=function(wt){return new(wt||Je)(fe.Y36(O.OX))};static#t=this.\u0275cmp=fe.Xpm({type:Je,selectors:[["app-file-upload"]],viewQuery:function(wt,dt){if(1&wt&&fe.Gf(i,5,fe.SBq),2&wt){let ct;fe.iGM(ct=fe.CRH())&&(dt._fileInput=ct.first)}},hostVars:2,hostBindings:function(wt,dt){2&wt&&fe.ekj("uploading",dt.uploading)},inputs:{disabled:"disabled",autoUpload:"autoUpload",uploader:"uploader",uploaderData:"uploaderData",accept:"accept",header:"header",footer:"footer",thumbnailUrl:"thumbnailUrl",downloadUrl:"downloadUrl",fullScreenThumbnail:"fullScreenThumbnail",star:"star"},outputs:{uploadStart:"uploadStart",uploadProgress:"uploadProgress",uploadComplete:"uploadComplete",uploadError:"uploadError"},decls:16,vars:9,consts:[["type","file",3,"accept","input"],["fileInput",""],[1,"card","h-100"],[1,"image-holder"],["class","card-img-top",3,"src","click",4,"ngIf"],[1,"card-body"],["class","card-title",3,"ngClass",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"ms-auto"],[4,"ngIf"],[1,"card-footer","d-flex"],["type","button","class","btn btn-sm btn-light flex-fill",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-light ms-2","title","\u062f\u0627\u0646\u0644\u0648\u062f",3,"href",4,"ngIf"],[1,"card-img-top",3,"src","click"],[1,"card-title",3,"ngClass"],[1,"text-muted"],["class","text-sucess",4,"ngIf"],[1,"spinner-grow","text-success","ms-2"],[1,"text-sucess"],[1,"bi","bi-check-circle","text-success"],[1,"bi","bi-exclamation-triangle-fill","text-danger"],["type","button",1,"btn","btn-sm","btn-light","flex-fill",3,"disabled","click"],["title","\u062f\u0627\u0646\u0644\u0648\u062f",1,"btn","btn-sm","btn-light","ms-2",3,"href"],[1,"fa-solid","fa-download"]],template:function(wt,dt){1&wt&&(fe.TgZ(0,"input",0,1),fe.NdJ("input",function(at){return dt._onFileChange(at)}),fe.qZA(),fe.TgZ(2,"div",2)(3,"div",3),fe.YNc(4,q,1,1,"img",4),fe.qZA(),fe.TgZ(5,"div",5),fe.YNc(6,de,2,2,"h6",6),fe.YNc(7,we,2,1,"p",7),fe.TgZ(8,"div",8)(9,"div",9),fe.YNc(10,De,3,1,"ng-container",10),fe.YNc(11,it,2,0,"ng-container",10),fe.YNc(12,Ke,2,0,"ng-container",10),fe.qZA()()(),fe.TgZ(13,"div",11),fe.YNc(14,je,2,1,"button",12),fe.YNc(15,Be,2,1,"a",13),fe.qZA()()),2&wt&&(fe.Q6J("accept",dt.accept),fe.xp6(4),fe.Q6J("ngIf",dt.thumbnailUrl),fe.xp6(2),fe.Q6J("ngIf",dt.header),fe.xp6(1),fe.Q6J("ngIf",dt.footer),fe.xp6(3),fe.Q6J("ngIf",dt.uploading),fe.xp6(1),fe.Q6J("ngIf","uploadComplete"===dt._status),fe.xp6(1),fe.Q6J("ngIf","error"===dt._status),fe.xp6(2),fe.Q6J("ngIf",dt.uploader),fe.xp6(1),fe.Q6J("ngIf",dt.downloadUrl))},dependencies:[Y.mk,Y.O5],styles:['[_nghost-%COMP%]{display:block}.uploading[_nghost-%COMP%]   img[_ngcontent-%COMP%]{cursor:wait}[_nghost-%COMP%]:not(.uploading)   img[_ngcontent-%COMP%]{cursor:pointer}input[type=file][_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #E4E6EF!important}.card[_ngcontent-%COMP%]   .image-holder[_ngcontent-%COMP%]{height:150px;overflow:hidden;text-align:center}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:70%;margin-top:20px;background-size:cover}.thumbnail-col[_ngcontent-%COMP%]{background:repeating-conic-gradient(rgba(169,227,227,.2823529412) 0% 25%,transparent 0% 50%) 50%/20px 20px;display:flex;align-items:center}.spinner-grow[_ngcontent-%COMP%]{width:.7rem;height:.7rem}.card-title-star[_ngcontent-%COMP%]:after{content:"*";color:var(--bs-danger)}']})}},7856:(tn,nt,N)=>{"use strict";N.d(nt,{D3:()=>Y,OR:()=>i,md:()=>fe});var o=N(529),O=N(9751);class u{}class fe extends u{constructor(de,we){super(),this.total=de,this.uploaded=we}}class Y extends u{constructor(de){super(),this.response=de}}function i(){return function(q){return new O.y(de=>{q.subscribe({next(we){we.type==o.dt.UploadProgress?de.next(new fe(we.total,we.loaded)):we.type===o.dt.Response&&de.next(new Y(we))},error(we){de.error(we)},complete(){de.complete()}})})}}},8008:(tn,nt,N)=>{"use strict";N.d(nt,{h:()=>De});var o=N(4006),O=N(6854),u=N(1571),fe=N(6895);function Y(it,Ke){1&it&&(u.TgZ(0,"span",5),u._uU(1,"*"),u.qZA())}function i(it,Ke){if(1&it&&(u.TgZ(0,"label",3),u._uU(1),u.YNc(2,Y,2,0,"span",4),u.qZA()),2&it){const je=u.oxw();u.xp6(1),u.hij(" ",je.label," "),u.xp6(1),u.Q6J("ngIf",je.isRequiredField||je.showRequiredMarker)}}function q(it,Ke){if(1&it&&(u.TgZ(0,"small",6),u._uU(1),u.qZA()),2&it){const je=u.oxw();u.xp6(1),u.hij(" ",null==je.firstError?null:je.firstError.text,"\n")}}function de(it,Ke){if(1&it&&(u.TgZ(0,"small",8),u._uU(1),u.qZA()),2&it){const je=u.oxw(2);u.xp6(1),u.Oqu(je.hint)}}function we(it,Ke){if(1&it&&u.YNc(0,de,2,1,"small",7),2&it){const je=u.oxw();u.Q6J("ngIf",je.hint)}}const Ve=["*"];class De{constructor(Ke,je){this.renderer=Ke,this.translatorService=je,this.showError=!0,this.showRequiredMarker=!1}get firstError(){return this._firstError}get touched(){return this._ngControl?.touched}get dirty(){return this._ngControl?.dirty}get isRequiredField(){return this._isRequiredField()}ngOnChanges(){this._onChangeLabel()}ngOnInit(){if(!this._ngControl)throw Error("FormFieldComponent requires a NgControl");this._subscription=this._ngControl.statusChanges?.subscribe(Ke=>this._onChangeState())}_onFocus(){this._onChangeState()}_onFocusout(){this._onChangeState()}_onChangeLabel(){return this.labelKey&&(this.label=this.translatorService.translate(this.labelKey)),this.label}_onChangeState(){const Ke="INVALID"===this._ngControl?.status;if(Ke&&this.touched){const je=this._ngControl.errors,Be=Object.keys(je)[0],Je=je?this.translatorService.translateFirstError(je):"";this._firstError={key:Be,text:Je}}else this._firstError=null;return this.touched&&(this.renderer.addClass(this._ngControlElement.nativeElement,Ke?"is-invalid":"is-valid"),this.renderer.removeClass(this._ngControlElement.nativeElement,Ke?"is-valid":"is-invalid")),this._firstError}_isRequiredField(){const Ke=this._ngControl?.control?.validator,je=Ke&&Ke(new o.NI(null));return null!=je&&!0===je?.required}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(je){return new(je||De)(u.Y36(u.Qsj),u.Y36(O.Qp))};static#t=this.\u0275cmp=u.Xpm({type:De,selectors:[["mts-form-field"]],contentQueries:function(je,Be,Je){if(1&je&&(u.Suo(Je,o.a5,7),u.Suo(Je,o.a5,7,u.SBq)),2&je){let gt;u.iGM(gt=u.CRH())&&(Be._ngControl=gt.first),u.iGM(gt=u.CRH())&&(Be._ngControlElement=gt.first)}},hostBindings:function(je,Be){1&je&&u.NdJ("focusin",function(){return Be._onFocus()})("focusout",function(){return Be._onFocusout()})},inputs:{label:"label",titleFieldFunc:"titleFieldFunc",labelKey:"labelKey",hint:"hint",showError:"showError",showRequiredMarker:"showRequiredMarker"},features:[u.TTD],ngContentSelectors:Ve,decls:5,vars:3,consts:[["class","form-label",4,"ngIf"],["class","text-danger",4,"ngIf","ngIfElse"],["hintRef",""],[1,"form-label"],["class","text-danger form-field-required",4,"ngIf"],[1,"text-danger","form-field-required"],[1,"text-danger"],["class","form-field-hint text-muted",4,"ngIf"],[1,"form-field-hint","text-muted"]],template:function(je,Be){if(1&je&&(u.F$t(),u.YNc(0,i,3,2,"label",0),u.Hsn(1),u.YNc(2,q,2,1,"small",1),u.YNc(3,we,1,1,"ng-template",null,2,u.W1O)),2&je){const Je=u.MAs(4);u.Q6J("ngIf",Be.label),u.xp6(2),u.Q6J("ngIf",Be.showError&&Be.touched&&(null==Be.firstError?null:Be.firstError.text))("ngIfElse",Je)}},dependencies:[fe.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:6rem}.form-field-hint[_ngcontent-%COMP%]{font-size:.7rem}[_nghost-%COMP%]:has(textarea){height:auto}"]})}},1079:(tn,nt,N)=>{"use strict";N.d(nt,{k:()=>u});var o=N(6895),O=N(1571);class u{static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275mod=O.oAB({type:u});static#n=this.\u0275inj=O.cJS({imports:[o.ez]})}},4588:(tn,nt,N)=>{"use strict";N.d(nt,{k:()=>O.k}),N(8008);var O=N(1079)},4934:(tn,nt,N)=>{"use strict";N.d(nt,{X:()=>Y});var o=N(1442),O=N(1571),u=N(6895);const fe=function(i){return{display:i}};class Y{constructor(q){this.imageViewerService=q,this.thumbnailUrl="",this.showFullImage="none"}ngOnInit(){this.imageViewerService.showImageEventChange.subscribe(q=>{q&&(this.showFullImage="block",this.thumbnailUrl=q)})}static#e=this.\u0275fac=function(de){return new(de||Y)(O.Y36(o.O))};static#t=this.\u0275cmp=O.Xpm({type:Y,selectors:[["mts-image-thumbnail-viewer"]],decls:4,vars:4,consts:[[1,"fullPageImgModal",3,"ngStyle"],[1,"text-light","close",3,"click"],[1,"modal-content",3,"src"]],template:function(de,we){1&de&&(O.TgZ(0,"div",0)(1,"span",1),O.NdJ("click",function(){return we.showFullImage="none"}),O._uU(2,"\xd7"),O.qZA(),O._UZ(3,"img",2),O.qZA()),2&de&&(O.Q6J("ngStyle",O.VKq(2,fe,we.showFullImage)),O.xp6(3),O.Q6J("src",we.thumbnailUrl,O.LSH))},dependencies:[u.PC],styles:[".fullPageImgModal[_ngcontent-%COMP%]{display:none;position:fixed;padding-top:5rem;inset:0;width:100%;height:100%;overflow:auto;background-color:#4c4c4ce6;z-index:1200}.fullPageImgModal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:auto;display:block;width:80%;max-width:40rem}.modal-content[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_zoom;-webkit-animation-duration:.6s;animation-name:_ngcontent-%COMP%_zoom;animation-duration:.6s}@keyframes _ngcontent-%COMP%_zoom{0%{transform:scale(0)}to{transform:scale(1)}}.close[_ngcontent-%COMP%]{position:absolute;top:1rem;left:3rem;font-size:3rem;font-weight:700;transition:.3s}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{text-decoration:none;cursor:pointer}"]})}},1442:(tn,nt,N)=>{"use strict";N.d(nt,{O:()=>u});var o=N(7579),O=N(1571);class u{constructor(){this._showImageEventSubject=new o.x,this.showImageEventChange=this._showImageEventSubject.asObservable()}show(Y){this._showImageEventSubject.next(Y)}static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}},8362:(tn,nt,N)=>{"use strict";N.d(nt,{G8:()=>fe,OX:()=>Y.O}),N(4934);var O=N(6895),u=N(1571);class fe{static#e=this.\u0275fac=function(de){return new(de||fe)};static#t=this.\u0275mod=u.oAB({type:fe});static#n=this.\u0275inj=u.cJS({imports:[O.ez]})}var Y=N(1442)},8680:(tn,nt,N)=>{"use strict";N.d(nt,{l:()=>we});var o=N(1571),O=N(4006),u=N(2522),fe=N(6895),Y=N(9251);const i=["input"];function q(Ve,De){if(1&Ve&&(o.TgZ(0,"span",4),o._uU(1),o.qZA()),2&Ve){const it=o.oxw();o.xp6(1),o.Oqu(it.currency)}}function de(Ve,De){if(1&Ve&&(o.TgZ(0,"span",5),o._uU(1),o.ALo(2,"numberToPersian"),o.qZA()),2&Ve){const it=o.oxw();o.xp6(1),o.Oqu(o.lcZ(2,1,it.value))}}class we{constructor(De){this.inj=De,this.inputVal="",this.showCurrency=!0,this.showHint=!0,this.currency="\u0631\u06cc\u0627\u0644",this.important=!1,this.propagateChange=it=>{},this.onTouch=()=>{}}ngAfterViewInit(){this.ngControl=this.inj.get(O.a5)}writeValue(De){typeof De<"u"&&""!==De&&null!==De?this.formater(De):this.inputVal="",setTimeout(()=>{this.propagateChange(De)})}registerOnChange(De){this.propagateChange=De}registerOnTouched(De){this.onTouch=De}preventNonNumeric(De){const it=De.which;(it<48||it>57)&&De.preventDefault()}onChanged(De){this.formater(De.target.value),this.onTouch()}addComma(De){let it="",Ke=0;if(De){const je=De.split("").reverse();for(const Be in je)Ke++,it=Ke%3==1&&1!==Ke?je[Be]+","+it:je[Be]+it}return it}formater(De){if(this.value=De,"number"==typeof this.value&&(this.value=this.value.toString()),this.value=this.value.replace(/,/g,""),/^[\u06F0-\u06F90-9]+$/.test(this.value)){if(void 0!==this.maxValue&&this.value>this.maxValue)setTimeout(()=>{const it=this.createErrorObject("maxValue",this.maxValue);this.setControlErrors(it)},0);else if(void 0!==this.minValue&&this.value<this.minValue){const it=this.createErrorObject("minValue",this.minValue);this.setControlErrors(it)}this.inputVal=this.addComma(this.value),this.value=(0,u.Y)(this.value)}this.value||(this.inputVal=""),this.propagateChange(this.value)}createErrorObject(De,it){return{[De]:{requiredValue:it,currency:this.currency}}}setControlErrors(De){this.control?.setErrors(De)}get showPersianChar(){return(this.control?.valid||this.control?.disabled)&&this.showHint}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(it){return new(it||we)(o.Y36(o.zs3))};static#t=this.\u0275cmp=o.Xpm({type:we,selectors:[["mts-input-number"]],viewQuery:function(it,Ke){if(1&it&&o.Gf(i,5),2&it){let je;o.iGM(je=o.CRH())&&(Ke.input=je.first)}},hostBindings:function(it,Ke){1&it&&o.NdJ("keypress",function(Be){return Ke.preventNonNumeric(Be)})},inputs:{inputVal:"inputVal",name:"name",label:"label",disabled:"disabled",required:"required",showCurrency:"showCurrency",showHint:"showHint",currency:"currency",maxValue:"maxValue",minValue:"minValue",important:"important"},features:[o._Bn([{provide:O.JU,useExisting:(0,o.Gpc)(()=>we),multi:!0}])],decls:4,vars:8,consts:[[1,"input-group"],["type","text","ngModel","","dir","ltr",1,"form-control","text-start",3,"name","value","disabled","required","input"],["class","input-group-text",4,"ngIf"],["class","mt-3 text-primary","style","font-size: 11px",4,"ngIf"],[1,"input-group-text"],[1,"mt-3","text-primary",2,"font-size","11px"]],template:function(it,Ke){1&it&&(o.TgZ(0,"div",0)(1,"input",1),o.NdJ("input",function(Be){return Ke.onChanged(Be)}),o.qZA(),o.YNc(2,q,2,1,"span",2),o.qZA(),o.YNc(3,de,3,3,"span",3)),2&it&&(o.xp6(1),o.Tol(Ke.important?"bg-warning bg-opacity-50":""),o.Q6J("name",Ke.name)("value",Ke.inputVal)("disabled",Ke.disabled)("required",Ke.required),o.xp6(1),o.Q6J("ngIf",Ke.showCurrency),o.xp6(1),o.Q6J("ngIf",Ke.inputVal&&Ke.showPersianChar))},dependencies:[fe.O5,O.Fj,O.JJ,O.Q7,O.On,Y.M]})}},8557:(tn,nt,N)=>{"use strict";N.d(nt,{J:()=>Je});var o=N(1571),O=N(6895),u=N(8838);function fe(gt,lt){1&gt&&o.GkF(0)}function Y(gt,lt){if(1&gt){const wt=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(wt);const ct=o.oxw(2);return o.KtG(ct.onNext())})("disabledStatus",function(ct){o.CHM(wt);const at=o.oxw(2);return o.KtG(at._onDisabledStatus(ct))}),o.YNc(1,fe,1,0,"ng-container",7),o.qZA()}if(2&gt){const wt=o.oxw(2),dt=o.MAs(6);o.Q6J("disabled",wt.nextDisabled)("requestId",wt.requestId),o.xp6(1),o.Q6J("ngTemplateOutlet",dt)}}function i(gt,lt){if(1&gt&&(o.ynx(0),o.YNc(1,Y,2,3,"button",5),o.BQk()),2&gt){const wt=o.oxw();o.xp6(1),o.Q6J("ngIf",wt.showNext)}}function q(gt,lt){1&gt&&o.GkF(0)}function de(gt,lt){if(1&gt){const wt=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){o.CHM(wt);const ct=o.oxw(2);return o.KtG(ct.onNext())}),o.YNc(1,q,1,0,"ng-container",7),o.qZA()}if(2&gt){const wt=o.oxw(2),dt=o.MAs(6);o.Q6J("disabled",wt.nextDisabled),o.xp6(1),o.Q6J("ngTemplateOutlet",dt)}}function we(gt,lt){if(1&gt&&o.YNc(0,de,2,2,"button",8),2&gt){const wt=o.oxw();o.Q6J("ngIf",wt.showNext)}}function Ve(gt,lt){1&gt&&(o.O4$(),o.TgZ(0,"svg",13),o._UZ(1,"path",14)(2,"path",15),o.qZA())}const De=function(gt){return{"me-4":gt}};function it(gt,lt){if(1&gt){const wt=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){o.CHM(wt);const ct=o.oxw();return o.KtG(ct.onBack())}),o.YNc(1,Ve,3,0,"svg",11),o.TgZ(2,"small",12),o._uU(3),o.qZA()()}if(2&gt){const wt=o.oxw();o.Tol(o.VKq(4,De,wt.showNext)),o.xp6(1),o.Q6J("ngIf",wt.withBackArrow),o.xp6(2),o.Oqu(wt.backTitle)}}function Ke(gt,lt){1&gt&&(o.O4$(),o.TgZ(0,"svg",18),o._UZ(1,"path",19)(2,"path",20),o.qZA())}function je(gt,lt){if(1&gt&&(o.TgZ(0,"small",16),o._uU(1),o.qZA(),o.YNc(2,Ke,3,0,"svg",17)),2&gt){const wt=o.oxw();o.xp6(1),o.Oqu(wt.nextTitle),o.xp6(1),o.Q6J("ngIf",wt.withNextArrow)}}const Be=function(gt){return{"justify-content-center":gt}};class Je{constructor(){this.nextTitle="\u062b\u0628\u062a",this.backTitle="\u0628\u0627\u0632\u06af\u0634\u062a",this.btnsCenter=!1,this.withBackArrow=!0,this.withNextArrow=!0,this.nextDisabled=!1,this.showNext=!0,this.showBack=!0,this.direction="right",this.next=new o.vpe,this.back=new o.vpe}onBack(){this.back.emit(!0)}onNext(){this.next.emit(!0)}_onDisabledStatus(lt){this.withNextArrow=!lt}static#e=this.\u0275fac=function(wt){return new(wt||Je)};static#t=this.\u0275cmp=o.Xpm({type:Je,selectors:[["mts-next-back-btns"]],inputs:{requestId:"requestId",nextTitle:"nextTitle",backTitle:"backTitle",btnsCenter:"btnsCenter",withBackArrow:"withBackArrow",withNextArrow:"withNextArrow",nextDisabled:"nextDisabled",showNext:"showNext",showBack:"showBack",direction:"direction"},outputs:{next:"next",back:"back"},decls:7,vars:6,consts:[[1,"d-flex","flex-row-reverse","align-items-center","w-100",3,"ngClass"],[4,"ngIf","ngIfElse"],["generalNextBtn",""],["type","button","class","text-primary btn bg-primary bg-opacity-10 ps-3 pe-4 py-2","data-testid","back",3,"class","click",4,"ngIf"],["nextBtnContent",""],["type","submit","class","btn btn-primary py-2","data-testid","next","mtsDisabled","",3,"disabled","requestId","click","disabledStatus",4,"ngIf"],["type","submit","data-testid","next","mtsDisabled","",1,"btn","btn-primary","py-2",3,"disabled","requestId","click","disabledStatus"],[4,"ngTemplateOutlet"],["type","submit","class","btn btn-primary py-2","data-testid","next",3,"disabled","click",4,"ngIf"],["type","submit","data-testid","next",1,"btn","btn-primary","py-2",3,"disabled","click"],["type","button","data-testid","back",1,"text-primary","btn","bg-primary","bg-opacity-10","ps-3","pe-4","py-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16","class","me-2",4,"ngIf"],[1,"ps-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16",1,"me-2"],["data-name","Path 100","d","M118 419h-11.414a1 1 0 1 0 0 2H118z","transform","translate(-105.586 -412)",2,"fill","#099885"],["data-name","Path 101","d","M98 428v-16l7.293 7.293a1 1 0 0 1 0 1.414z","transform","translate(-85.586 -412)",2,"opacity","0.3","fill","#099885"],[1,"pe-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16","class","ms-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16",1,"ms-2"],["data-name","Path 100","d","M105.586 419H117a1 1 0 0 1 0 2h-11.414z","transform","translate(-98 -412)",2,"fill","#fff"],["data-name","Path 101","d","M105.586 428v-16l-7.293 7.293a1 1 0 0 0 0 1.414z","transform","translate(-98 -412)",2,"opacity","0.3","fill","#fff"]],template:function(wt,dt){if(1&wt&&(o.TgZ(0,"div",0),o.YNc(1,i,2,1,"ng-container",1),o.YNc(2,we,1,1,"ng-template",null,2,o.W1O),o.YNc(4,it,4,6,"button",3),o.qZA(),o.YNc(5,je,3,2,"ng-template",null,4,o.W1O)),2&wt){const ct=o.MAs(3);o.Q6J("ngClass",o.VKq(4,Be,dt.btnsCenter)),o.xp6(1),o.Q6J("ngIf",dt.requestId)("ngIfElse",ct),o.xp6(3),o.Q6J("ngIf",dt.showBack)}},dependencies:[O.mk,O.O5,O.tP,u.l],styles:["[_nghost-%COMP%]{width:100%}"]})}},1260:(tn,nt,N)=>{"use strict";N.d(nt,{n:()=>q});var o=N(1571),O=N(4006),u=N(6895);function fe(de,we){if(1&de){const Ve=o.EpF();o.TgZ(0,"input",5),o.NdJ("keyup",function(it){const je=o.CHM(Ve).index,Be=o.oxw();return o.KtG(Be._changeFocus(it,je))}),o.qZA()}if(2&de){const Ve=we.index;o.MGl("name","otp-",Ve,"")("id","otp-",Ve,"")}}function Y(de,we){if(1&de&&(o.TgZ(0,"p",6),o._uU(1),o.qZA()),2&de){const Ve=o.oxw();o.xp6(1),o.hij("\u0627\u0631\u0633\u0627\u0644 \u0645\u062c\u062f\u062f \u06a9\u062f \u062a\u0627 ",Ve.display," \u062f\u06cc\u06af\u0631")}}function i(de,we){if(1&de){const Ve=o.EpF();o.TgZ(0,"p",7),o.NdJ("click",function(){o.CHM(Ve);const it=o.oxw();return o.KtG(it.reSend())}),o._uU(1,"\u0627\u0631\u0633\u0627\u0644 \u0645\u062c\u062f\u062f"),o.qZA()}}class q{constructor(){this.otpLength=5,this.required=!1,this.minute=2,this.reSendOtp=new o.vpe,this.display="",this.showTimer=!1,this.showResend=!1,this._generateInputCollection=[],this._changeCallback=we=>{},this._touchedCallback=()=>{},this._validateCallback=we=>{}}ngOnInit(){this.initInputCollection(),setTimeout(()=>{this.initFocus()},0)}initInputCollection(){this._generateInputCollection=[...Array(this.otpLength).fill(0).map((we,Ve)=>({value:"",disabled:0!==Ve}))]}writeValue(we){this._value=null==we?"":we,this._changeCallback(this._value)}registerOnValidatorChange(we){this._validateCallback=we}registerOnChange(we){this._changeCallback=we}registerOnTouched(we){this._touchedCallback=we}validate(we){let Ve;return this.required&&this._value?.length!==this.otpLength&&(Ve={required:!0}),Ve}reSend(){this.clearInput(),this.reSendOtp.emit(!0),this.showResend=!1,this.start(),setTimeout(()=>{this.initFocus()},0)}timer(){let we=60*this.minute,Ve="00",De=60;const it=this.minute<10?"0":"";this.clearTimer?.(),this.display=`${it}${Math.floor(we/60)}:${Ve}`;const Ke=setInterval(()=>{we--,0!=De?De--:De=59,Ve=De<10?"0"+De:De,this.display=`${it}${Math.floor(we/60)}:${Ve}`,0==we&&(this.showTimer=!1,this.showResend=!0,this.display="")},1e3);this.clearTimer=()=>clearInterval(Ke)}start(){this.timer(),setTimeout(()=>{this.showTimer=!0},0)}getElement(we){return document.querySelector(`#otp-${we}`)}_changeFocus(we,Ve){const De=we.target.value;this._generateInputCollection[Ve].value="","Backspace"===we.key||"Delete"===we.key?this.moveBackward(Ve):De&&/^[\u06F0-\u06F90-9]+$/.test(we.target.value)&&(this._generateInputCollection[Ve].value=De,this.moveForward(Ve)),this._computeValue()}_computeValue(){let we="";this._generateInputCollection.forEach(Ve=>{Ve.value?we+=Ve.value:we=""}),this._value=we,this._changeCallback(this._value)}moveForward(we){const Ve=this.getElement(we+1);Ve&&Ve.focus()}moveBackward(we){const Ve=this.getElement(we-1);Ve&&Ve.focus(),this._validateCallback()}initFocus(){const we=this.getElement(0);we&&we.focus()}clearInput(){this.initInputCollection(),this._value="",this._changeCallback(this._value)}preventNonNumeric(we){const Ve=we.which;(Ve<48||Ve>57)&&we.preventDefault()}ngOnDestroy(){this.clearTimer?.()}static#e=this.\u0275fac=function(Ve){return new(Ve||q)};static#t=this.\u0275cmp=o.Xpm({type:q,selectors:[["mts-otp-verification"]],hostBindings:function(Ve,De){1&Ve&&o.NdJ("keypress",function(Ke){return De.preventNonNumeric(Ke)})},inputs:{otpLength:"otpLength",required:"required",minute:"minute"},outputs:{reSendOtp:"reSendOtp"},features:[o._Bn([{provide:O.JU,useExisting:(0,o.Gpc)(()=>q),multi:!0},{provide:O.Cf,useExisting:(0,o.Gpc)(()=>q),multi:!0}])],decls:5,vars:3,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row-reverse","justify-content-center","justify-content-lg-between"],["type","text","class","form-control otp text-center ms-1","min","0","max","9","maxlength","1","autocomplete","off",3,"name","id","keyup",4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],["class","text-center mt-4 fw-bold text-primary","role","button",3,"click",4,"ngIf"],["type","text","min","0","max","9","maxlength","1","autocomplete","off",1,"form-control","otp","text-center","ms-1",3,"name","id","keyup"],[1,"text-center","mt-4"],["role","button",1,"text-center","mt-4","fw-bold","text-primary",3,"click"]],template:function(Ve,De){1&Ve&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,fe,1,2,"input",2),o.qZA(),o.YNc(3,Y,2,1,"p",3),o.YNc(4,i,2,0,"p",4),o.qZA()),2&Ve&&(o.xp6(2),o.Q6J("ngForOf",De._generateInputCollection),o.xp6(1),o.Q6J("ngIf",De.showTimer),o.xp6(1),o.Q6J("ngIf",De.showResend))},dependencies:[u.sg,u.O5],styles:[".otp[_ngcontent-%COMP%]{width:3rem;font-size:1.3rem;font-weight:600}@media (max-width: 768px){.otp[_ngcontent-%COMP%]{width:2.8rem}}"]})}},2766:(tn,nt,N)=>{"use strict";N.d(nt,{Je:()=>o.J,u3:()=>q});var o=N(2306),u=(N(6556),N(4006)),fe=N(6895),Y=N(4588),i=N(1571);class q{static#e=this.\u0275fac=function(Ve){return new(Ve||q)};static#t=this.\u0275mod=i.oAB({type:q});static#n=this.\u0275inj=i.cJS({providers:[o.J],imports:[u.u5,fe.ez,Y.k]})}},2306:(tn,nt,N)=>{"use strict";N.d(nt,{J:()=>O});var o=N(1571);class O{constructor(){this.activeIndex=0,this.pageCount=0,this.pageSize=10,this.disabled=!1,this.pageSizeList=[5,10,20,30],this.navigationLinks=!0,this.boundaryLinks=!0}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275prov=o.Yz7({token:O,factory:O.\u0275fac})}},6556:(tn,nt,N)=>{"use strict";N.d(nt,{Q:()=>it});var o=N(1571),O=N(2306),u=N(4006),fe=N(6895);function Y(Ke,je){if(1&Ke){const Be=o.EpF();o.TgZ(0,"li",10)(1,"a",11),o.NdJ("click",function(){o.CHM(Be);const gt=o.oxw();return o.KtG(gt._onClickPage(1))}),o._UZ(2,"i",12)(3,"i",12),o.qZA()()}if(2&Ke){const Be=o.oxw();o.ekj("disabled",Be._previousDisabled()),o.xp6(1),o.uIk("aria-disabled",Be._previousDisabled()?"true":null)}}function i(Ke,je){if(1&Ke){const Be=o.EpF();o.TgZ(0,"li",10)(1,"a",13),o.NdJ("click",function(){o.CHM(Be);const gt=o.oxw();return o.KtG(gt._onClickPage(gt.currentPage-1))}),o._UZ(2,"i",12),o.qZA()()}if(2&Ke){const Be=o.oxw();o.ekj("disabled",Be._previousDisabled()),o.xp6(1),o.uIk("aria-disabled",Be._previousDisabled()?"true":null)}}function q(Ke,je){if(1&Ke){const Be=o.EpF();o.TgZ(0,"li",15),o.NdJ("click",function(){const lt=o.CHM(Be).$implicit,wt=o.oxw(2);return o.KtG(wt._onClickPage(lt))}),o.TgZ(1,"a",16),o._uU(2),o.qZA()()}if(2&Ke){const Be=je.$implicit,Je=o.oxw(2);o.ekj("active",Be===Je.currentPage),o.xp6(2),o.Oqu(Be)}}function de(Ke,je){if(1&Ke&&(o.ynx(0),o.YNc(1,q,3,3,"li",14),o.BQk()),2&Ke){const Be=o.oxw();o.xp6(1),o.Q6J("ngForOf",Be._pages)}}function we(Ke,je){if(1&Ke){const Be=o.EpF();o.TgZ(0,"li",10)(1,"a",17),o.NdJ("click",function(){o.CHM(Be);const gt=o.oxw();return o.KtG(gt._onClickPage(gt.currentPage+1))}),o._UZ(2,"i",18),o.qZA()()}if(2&Ke){const Be=o.oxw();o.ekj("disabled",Be._nextDisabled()),o.xp6(1),o.uIk("aria-disabled",Be._nextDisabled()?"true":null)}}function Ve(Ke,je){if(1&Ke){const Be=o.EpF();o.TgZ(0,"li",10)(1,"a",19),o.NdJ("click",function(){o.CHM(Be);const gt=o.oxw();return o.KtG(gt._onClickPage(gt._pages.length))}),o._UZ(2,"i",18)(3,"i",18),o.qZA()()}if(2&Ke){const Be=o.oxw();o.ekj("disabled",Be._nextDisabled()),o.xp6(1),o.uIk("aria-disabled",Be._nextDisabled()?"true":null)}}function De(Ke,je){if(1&Ke&&(o.TgZ(0,"option",20),o._uU(1),o.qZA()),2&Ke){const Be=je.$implicit;o.Q6J("value",Be),o.xp6(1),o.Oqu(Be)}}class it{constructor(je){this.config=je,this.currentPage=1,this.pageChange=new o.vpe(!0),this.disabled=je.disabled,this._pageCount=je.pageCount,this._pageSize=je.pageSize,this._pageSizeList=je.pageSizeList,this.navigationLinks=je.navigationLinks,this.boundaryLinks=je.boundaryLinks}ngOnChanges(je){je.totalRecords&&this._updatePagination()}_previousDisabled(){return 1===this.currentPage||this.disabled}_nextDisabled(){return this.currentPage>=this._pageCount||this.disabled}_onClickPage(je){je>=1&&je<=this._pages.length&&(this.currentPage=je,this.config.activeIndex=this.currentPage-1,this.pageChange.emit())}_pageSizeChange(je){this._pageSize=this.config.pageSize=+je.target?.value,this._updatePagination(),this.pageChange.emit()}_updatePagination(){this.totalRecords&&this.totalRecords&&this._pageSize&&(this._pageCount=Math.ceil(this.totalRecords/this._pageSize),this._pages=Array.from(Array(this._pageCount),(je,Be)=>Be+1),this.currentPage>=this._pageCount&&(this.currentPage=1,this.config.activeIndex=0))}ngOnDestroy(){this.config.activeIndex=0}static#e=this.\u0275fac=function(Be){return new(Be||it)(o.Y36(O.J))};static#t=this.\u0275cmp=o.Xpm({type:it,selectors:[["mts-pagination"]],inputs:{disabled:"disabled",currentPage:"currentPage",totalRecords:"totalRecords",navigationLinks:"navigationLinks",boundaryLinks:"boundaryLinks",size:"size"},outputs:{pageChange:"pageChange"},features:[o.TTD],decls:16,vars:12,consts:[[1,"row","d-flex","align-items-center"],[1,"col-12","col-md-7"],["class","page-item cursor-pointer",3,"disabled",4,"ngIf"],[4,"ngIf"],[1,"page-count","col-md-5","mt-2","mt-sm-0"],[1,"row"],[1,"col-4","col-sm-3"],["dir","rtl","name","pageSize",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-9","d-flex","align-items-center","mt-2","mt-sm-0"],[1,"page-item","cursor-pointer"],["aria-label","First",1,"page-link",3,"click"],[1,"fa-solid","fa-chevron-right"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item cursor-pointer px-1",3,"active","click",4,"ngFor","ngForOf"],[1,"page-item","cursor-pointer","px-1",3,"click"],[1,"page-link"],["aria-label","Next",1,"page-link",3,"click"],[1,"fa-solid","fa-chevron-left"],["aria-label","Last",1,"page-link",3,"click"],[3,"value"]],template:function(Be,Je){1&Be&&(o.TgZ(0,"div",0)(1,"div",1)(2,"ul"),o.YNc(3,Y,4,3,"li",2),o.YNc(4,i,3,3,"li",2),o.YNc(5,de,2,1,"ng-container",3),o.YNc(6,we,3,3,"li",2),o.YNc(7,Ve,4,3,"li",2),o.qZA()(),o.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"select",7),o.NdJ("ngModelChange",function(lt){return Je._pageSize=lt})("change",function(lt){return Je._pageSizeChange(lt)}),o.YNc(12,De,2,2,"option",8),o.qZA()(),o.TgZ(13,"div",9)(14,"span"),o._uU(15),o.qZA()()()()()),2&Be&&(o.xp6(2),o.Tol("pagination"+(Je.size?" pagination-"+Je.size:"")),o.xp6(1),o.Q6J("ngIf",Je.boundaryLinks),o.xp6(1),o.Q6J("ngIf",Je.navigationLinks),o.xp6(1),o.Q6J("ngIf",Je._pageCount<15),o.xp6(1),o.Q6J("ngIf",Je.navigationLinks),o.xp6(1),o.Q6J("ngIf",Je.boundaryLinks),o.xp6(4),o.Q6J("ngModel",Je._pageSize),o.xp6(1),o.Q6J("ngForOf",Je._pageSizeList),o.xp6(3),o.lnq("\u0635\u0641\u062d\u0647 ",Je.currentPage," \u0627\u0632 ",Je._pageCount," (\u0645\u062c\u0645\u0648\u0639 \u0631\u06a9\u0648\u0631\u062f\u0647\u0627 : ",Je.totalRecords,")"))},dependencies:[u.YN,u.Kr,u.EJ,u.JJ,u.On,fe.sg,fe.O5],styles:["select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--bs-gray-300)!important}i[_ngcontent-%COMP%]{font-size:.6rem!important}@media (min-width: 568px){.page-count[_ngcontent-%COMP%]{direction:ltr}}"]})}},3279:(tn,nt,N)=>{"use strict";N.d(nt,{G:()=>we});var o=N(1571),O=N(4006),u=N(727),fe=N(6895),Y=N(8008),i=N(1726),q=N(5665);const de=function(){return["password","rePassword"]};class we{constructor(De){this.fb=De,this.required=!1,this.reSendOtp=new o.vpe,this.form=this.fb.group({password:[""],rePassword:[""]}),this.showPass=!1,this.showRepass=!1,this._passStep1="",this._passStep2="",this._passStep3="",this.grabage=new u.w0,this._generateInputCollection=[],this._changeCallback=it=>{},this._touchedCallback=()=>{},this._validateCallback=it=>{},this.formListener=()=>{this.grabage.add(this.form.valueChanges.subscribe(it=>{setTimeout(()=>{this._value=this.password?.valid&&this.rePassword?.valid?this.password.value:"",this._changeCallback(this._value),this._touchedCallback()},0)}))}}ngOnInit(){this.formListener()}get password(){return this.form.get("password")}get rePassword(){return this.form.get("rePassword")}writeValue(De){null==De?this._value="":(this._value=De,this._changeCallback(De))}registerOnValidatorChange(De){this._validateCallback=De}registerOnChange(De){this._changeCallback=De}registerOnTouched(De){this._touchedCallback=De}validate(De){let it;return this.required&&!this._value?.length&&(it={required:!0}),it}coveragePersent(De){De<50&&De>10?(this._passStep1="bg-danger bg-opacity-100",this._passStep2="",this._passStep3=""):De<85&&De>50?(this._passStep1="bg-warning bg-opacity-100",this._passStep2="bg-warning bg-opacity-100",this._passStep3=""):De>85&&(this._passStep1="bg-success bg-opacity-100",this._passStep2="bg-success bg-opacity-100",this._passStep3="bg-success bg-opacity-100"),""===this.password?.value&&(this._passStep1="",this._passStep2="",this._passStep3="")}get passStep1(){return this._passStep1}get passStep2(){return this._passStep2}get passStep3(){return this._passStep3}ngOnDestroy(){this.grabage.unsubscribe()}static#e=this.\u0275fac=function(it){return new(it||we)(o.Y36(O.qu))};static#t=this.\u0275cmp=o.Xpm({type:we,selectors:[["mts-password-strength-checker"]],inputs:{required:"required"},outputs:{reSendOtp:"reSendOtp"},features:[o._Bn([{provide:O.JU,useExisting:(0,o.Gpc)(()=>we),multi:!0},{provide:O.Cf,useExisting:(0,o.Gpc)(()=>we),multi:!0}])],decls:18,vars:12,consts:[[1,"d-flex","flex-column",3,"formGroup","mtsMatchPassword"],["labelKey","password","hint","\u0627\u0632 \u062d\u062f\u0627\u0642\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627 \u062a\u0631\u06a9\u06cc\u0628\u06cc \u0627\u0632 \u062d\u0631\u0648\u0641 \u0628\u0632\u0631\u06af \u0648 \u06a9\u0648\u0686\u06a9 \u0627\u0646\u06af\u0644\u06cc\u0633\u06cc\u060c \u0627\u0639\u062f\u0627\u062f \u0648 \u0646\u0645\u0627\u062f\u0647\u0627(~+%&!@#$) \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f"],[1,"input-group"],["name","password","formControlName","password","minlength","8","mtsPasswordStrengthCheckers","","autocomplete","new-password","data-testid","password","required","",1,"form-control","direction-to-right","text-start",3,"type","coveragePersent"],["data-testid","show-password",1,"input-group-text","cursor-pointer",3,"click"],[1,"row","gx-2","mt-2"],[1,"col-4"],[1,"bg-secondary","bg-opacity-10","w-100","rounded",2,"height","5px",3,"ngClass"],["labelKey","rePassword",1,"pt-4"],["name","rePassword","formControlName","rePassword","minlength","8","autocomplete","new-password","mtsPasswordStrengthCheckers","","required","",1,"form-control","direction-to-right","text-start",3,"type"],[1,"input-group-text","cursor-pointer",3,"click"]],template:function(it,Ke){1&it&&(o.TgZ(0,"div",0)(1,"mts-form-field",1)(2,"div",2)(3,"input",3),o.NdJ("coveragePersent",function(Be){return Ke.coveragePersent(Be)}),o.qZA(),o.TgZ(4,"span",4),o.NdJ("click",function(){return Ke.showPass=!Ke.showPass}),o._UZ(5,"i"),o.qZA()(),o.TgZ(6,"ul",5)(7,"li",6),o._UZ(8,"div",7),o.qZA(),o.TgZ(9,"li",6),o._UZ(10,"div",7),o.qZA(),o.TgZ(11,"li",6),o._UZ(12,"div",7),o.qZA()()(),o.TgZ(13,"mts-form-field",8)(14,"div",2),o._UZ(15,"input",9),o.TgZ(16,"span",10),o.NdJ("click",function(){return Ke.showRepass=!Ke.showRepass}),o._UZ(17,"i"),o.qZA()()()()),2&it&&(o.Q6J("formGroup",Ke.form)("mtsMatchPassword",o.DdM(11,de)),o.xp6(3),o.Q6J("type",Ke.showPass?"text":"password"),o.xp6(2),o.Tol(Ke.showPass?"fa-solid fa-eye":"fa-solid fa-eye-slash"),o.xp6(3),o.Q6J("ngClass",Ke.passStep1),o.xp6(2),o.Q6J("ngClass",Ke.passStep2),o.xp6(2),o.Q6J("ngClass",Ke.passStep3),o.xp6(3),o.Q6J("type",Ke.showRepass?"text":"password"),o.xp6(2),o.Tol(Ke.showRepass?"fa-solid fa-eye":"fa-solid fa-eye-slash"))},dependencies:[fe.mk,O.Fj,O.JJ,O.JL,O.Q7,O.wO,O.sg,O.u,Y.h,i.A,q.e]})}},8071:(tn,nt,N)=>{"use strict";N.d(nt,{Z:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mtsTabContent",""]]})}},273:(tn,nt,N)=>{"use strict";N.d(nt,{Q:()=>wt});var o=N(1571),O=N(4572),u=N(6895);const fe=["tabList"];function Y(dt,ct){if(1&dt){const at=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(at);const ht=o.oxw();return o.KtG(ht.navigateTabs("left"))}),o._uU(1,"\u2039"),o.qZA()}if(2&dt){const at=o.oxw();o.Q6J("disabled",at.isFirstTabActive())}}const i=function(dt){return{$implicit:dt}};function q(dt,ct){if(1&dt&&(o.ynx(0),o.GkF(1,10),o.BQk()),2&dt){const at=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",at.titleTemplate)("ngTemplateOutletContext",o.VKq(2,i,at))}}function de(dt,ct){1&dt&&o._UZ(0,"i",13)}function we(dt,ct){if(1&dt&&(o.TgZ(0,"a",11),o.YNc(1,de,1,0,"i",12),o._uU(2),o.qZA()),2&dt){const at=o.oxw(2).$implicit;o.ekj("active",at.active)("disabled",at.disabled),o.xp6(1),o.Q6J("ngIf",at.icon),o.xp6(1),o.hij(" ",at.title," ")}}function Ve(dt,ct){if(1&dt){const at=o.EpF();o.TgZ(0,"li",7),o.NdJ("click",function(){o.CHM(at);const ht=o.oxw().$implicit,Bt=o.oxw();return o.KtG(Bt.selectTab(ht))}),o.YNc(1,q,2,4,"ng-container",8),o.YNc(2,we,3,6,"ng-template",null,9,o.W1O),o.qZA()}if(2&dt){const at=o.MAs(3),Qe=o.oxw().$implicit;o.ekj("active",Qe.active)("disabled",Qe.disabled),o.xp6(1),o.Q6J("ngIf",Qe.titleTemplate)("ngIfElse",at)}}function De(dt,ct){if(1&dt&&(o.ynx(0),o.YNc(1,Ve,4,6,"li",6),o.BQk()),2&dt){const at=ct.$implicit;o.xp6(1),o.Q6J("ngIf",at.show)}}function it(dt,ct){if(1&dt){const at=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(at);const ht=o.oxw();return o.KtG(ht.navigateTabs("right"))}),o._uU(1,"\u203a"),o.qZA()}if(2&dt){const at=o.oxw();o.Q6J("disabled",at.isLastTabActive())}}function Ke(dt,ct){1&dt&&o.GkF(0)}function je(dt,ct){1&dt&&o.Hsn(0,0,["*ngIf","!tab.templateContent"])}function Be(dt,ct){if(1&dt&&o.YNc(0,je,1,0,"ng-content",14),2&dt){const at=o.oxw(2).$implicit;o.Q6J("ngIf",!at.templateContent)}}function Je(dt,ct){if(1&dt&&(o.TgZ(0,"div"),o.YNc(1,Ke,1,0,"ng-container",15),o.YNc(2,Be,1,1,"ng-template",null,16,o.W1O),o.qZA()),2&dt){const at=o.MAs(3),Qe=o.oxw().$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",Qe.hasContent?Qe.templateContent:at)("ngTemplateOutletContext",o.VKq(2,i,Qe))}}function gt(dt,ct){if(1&dt&&(o.ynx(0),o.YNc(1,Je,4,4,"div",14),o.BQk()),2&dt){const at=ct.$implicit;o.xp6(1),o.Q6J("ngIf",at.active)}}const lt=["*"];class wt{constructor(){this.activeIndex=0,this.scroll=!1,this.canChange=!0,this.orientation="horizontal",this.align="start",this.activeIndexChange=new o.vpe,this.afterSelectTab=new o.vpe}ngOnChanges(ct){ct.activeIndex&&this.tabs&&this.activeTabWithIndex()}ngAfterContentInit(){0===this.tabs.filter(at=>at.active).length&&this.activeIndex>-1&&this.activeIndex<this.tabs.length&&this.selectTab(this.tabs.toArray()[this.activeIndex])}activeTabWithIndex(){this.activeIndex>-1&&this.activeIndex<this.tabs.length&&this.selectTab(this.tabs.toArray()[this.activeIndex])}selectTab(ct){if(this.change){if(this.afterSelectTab.emit(ct),ct.disabled)return;this.tabs.toArray().forEach(Qe=>Qe.setActive(Qe===ct));const at=this.tabs.toArray().findIndex(Qe=>Qe.active);this.scrollToTab(at),this.activeIndexChange.emit(at)}}navigateTabs(ct){const at=this.tabs.toArray().findIndex(ht=>ht.active);let Qe=at;"left"===ct&&at>0?Qe=at-1:"right"===ct&&at<this.tabs.length-1&&(Qe=at+1),this.change&&this.selectTab(this.tabs.toArray()[Qe]),this.scrollToTab(Qe)}scrollToTab(ct){if(this.change&&this.tabList){const at=this.tabList.nativeElement.children;if(at[ct]){const Qe=at[ct],ht=this.tabList.nativeElement,Bt=ht.getBoundingClientRect(),Ft=Qe.getBoundingClientRect();ht.scrollTo({left:Qe.offsetLeft-Bt.width/2+Ft.width/2,behavior:"smooth"})}}}get change(){return"boolean"==typeof this.canChange?this.canChange:"function"!=typeof this.canChange||this.canChange()}isFirstTabActive(){return this.tabs.first.active}isLastTabActive(){return this.tabs.last.active}get titlesStyle(){return`justify-content:${this.align?this.align:"start"};`}static#e=this.\u0275fac=function(at){return new(at||wt)};static#t=this.\u0275cmp=o.Xpm({type:wt,selectors:[["mts-tab-group"]],contentQueries:function(at,Qe,ht){if(1&at&&o.Suo(ht,O.i,4),2&at){let Bt;o.iGM(Bt=o.CRH())&&(Qe.tabs=Bt)}},viewQuery:function(at,Qe){if(1&at&&o.Gf(fe,5),2&at){let ht;o.iGM(ht=o.CRH())&&(Qe.tabList=ht.first)}},inputs:{activeIndex:"activeIndex",scroll:"scroll",canChange:"canChange",orientation:"orientation",align:"align"},outputs:{activeIndexChange:"activeIndexChange",afterSelectTab:"afterSelectTab"},features:[o.TTD],ngContentSelectors:lt,decls:7,vars:8,consts:[[1,"tab-navigation"],[3,"disabled","click",4,"ngIf"],[1,"nav","nav-tabs","w-100"],["tabList",""],[4,"ngFor","ngForOf"],[3,"disabled","click"],["class","nav-item",3,"active","disabled","click",4,"ngIf"],[1,"nav-item",3,"click"],[4,"ngIf","ngIfElse"],["defaultTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","aria-current","page",1,"nav-link"],["class","fa fa-bell",4,"ngIf"],[1,"fa","fa-bell"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["withoutLazyContent",""]],template:function(at,Qe){1&at&&(o.F$t(),o.TgZ(0,"div",0),o.YNc(1,Y,2,1,"button",1),o.TgZ(2,"ul",2,3),o.YNc(4,De,2,1,"ng-container",4),o.qZA(),o.YNc(5,it,2,1,"button",1),o.qZA(),o.YNc(6,gt,2,1,"ng-container",4)),2&at&&(o.xp6(1),o.Q6J("ngIf",Qe.scroll),o.xp6(1),o.Akn(Qe.titlesStyle),o.ekj("tabtiles",Qe.scroll),o.xp6(2),o.Q6J("ngForOf",Qe.tabs),o.xp6(1),o.Q6J("ngIf",Qe.scroll),o.xp6(1),o.Q6J("ngForOf",Qe.tabs))},dependencies:[u.sg,u.O5,u.tP],styles:[".tab-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;overflow:hidden}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;padding:5px 15px;font-size:20px}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e7e7e7}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:default;color:#ccc}.tabtiles[_ngcontent-%COMP%]{list-style:none;width:100%;display:flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;white-space:nowrap}.horizontal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.tab-titles.vertical[_ngcontent-%COMP%]{flex-direction:column}.tab-content[_ngcontent-%COMP%]{flex-grow:1}.tab-content.vertical[_ngcontent-%COMP%]{width:100%}.nav[_ngcontent-%COMP%]::-webkit-scrollbar{height:2px}.nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f0f0}.nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:silver;border-radius:8px}.tab-content[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-top:none}"]})}},4572:(tn,nt,N)=>{"use strict";N.d(nt,{i:()=>de});var o=N(1571),O=N(8071),u=N(6895);const fe=["titleTemplate"];function Y(we,Ve){1&we&&o.Hsn(0,0,["*ngIf","!hasContent"])}function i(we,Ve){if(1&we&&(o.ynx(0),o.YNc(1,Y,1,0,"ng-content",0),o.BQk()),2&we){const De=o.oxw();o.xp6(1),o.Q6J("ngIf",!De.hasContent)}}const q=["*"];class de{constructor(){this.title="",this.icon="",this.active=!1,this.disabled=!1,this.show=!0,this.activeChange=new o.vpe,this.disabledChange=new o.vpe,this.showChange=new o.vpe}ngAfterContentInit(){!this.title&&!this.hasContent&&(this.title="\u062a\u0628")}setActive(Ve){this.disabled||(this.active=Ve,this.activeChange.emit(this.active))}setDisabled(Ve){this.disabled=Ve,this.disabledChange.emit(this.disabled)}setShow(Ve){this.show=Ve,this.showChange.emit(this.show)}get templateContent(){return this.tabContent?this.tabContent.templateRef:null}get hasContent(){return!!this.tabContent}static#e=this.\u0275fac=function(De){return new(De||de)};static#t=this.\u0275cmp=o.Xpm({type:de,selectors:[["mts-tab"]],contentQueries:function(De,it,Ke){if(1&De&&(o.Suo(Ke,O.Z,7),o.Suo(Ke,fe,5,o.Rgc)),2&De){let je;o.iGM(je=o.CRH())&&(it.tabContent=je.first),o.iGM(je=o.CRH())&&(it.titleTemplate=je.first)}},inputs:{title:"title",icon:"icon",active:"active",disabled:"disabled",show:"show"},outputs:{activeChange:"activeChange",disabledChange:"disabledChange",showChange:"showChange"},ngContentSelectors:q,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(De,it){1&De&&(o.F$t(),o.YNc(0,i,2,1,"ng-container",0)),2&De&&o.Q6J("ngIf",it.active&&it.show)},dependencies:[u.O5]})}},5779:(tn,nt,N)=>{"use strict";N.d(nt,{q:()=>it});var o=N(7390),O=N(1571),u=N(6895);function fe(Ke,je){1&Ke&&O.GkF(0)}const Y=function(Ke){return{$implicit:Ke}};function i(Ke,je){if(1&Ke&&(O.TgZ(0,"div",6),O._UZ(1,"i",7),O.TgZ(2,"span"),O._uU(3),O.qZA(),O.YNc(4,fe,1,0,"ng-container",8),O.qZA()),2&Ke){const Be=O.oxw().$implicit;O.oxw();const Je=O.MAs(2);O.xp6(1),O.Q6J("ngClass",null==Be.options?null:Be.options.titleIcon),O.xp6(2),O.Oqu(null==Be.options?null:Be.options.title),O.xp6(1),O.Q6J("ngTemplateOutlet",Je)("ngTemplateOutletContext",O.VKq(4,Y,Be))}}function q(Ke,je){1&Ke&&O.GkF(0)}function de(Ke,je){if(1&Ke&&(O.ynx(0),O.YNc(1,q,1,0,"ng-container",8),O.BQk()),2&Ke){const Be=O.oxw().$implicit;O.oxw();const Je=O.MAs(2);O.xp6(1),O.Q6J("ngTemplateOutlet",Je)("ngTemplateOutletContext",O.VKq(2,Y,Be))}}function we(Ke,je){if(1&Ke&&(O.TgZ(0,"div",2),O.YNc(1,i,5,6,"div",3),O.TgZ(2,"div",4)(3,"span"),O._uU(4),O.qZA(),O.YNc(5,de,2,4,"ng-container",5),O.qZA()()),2&Ke){const Be=je.$implicit,Je=O.oxw();O.Q6J("ngClass",Je.displayToastStyle(Be)),O.xp6(1),O.Q6J("ngIf",(null==Be.options?null:Be.options.titleIcon)||(null==Be.options?null:Be.options.title)),O.xp6(3),O.Oqu(Be.text),O.xp6(1),O.Q6J("ngIf",!(null!=Be.options&&Be.options.titleIcon||null!=Be.options&&Be.options.title))}}function Ve(Ke,je){if(1&Ke){const Be=O.EpF();O.TgZ(0,"button",10),O.NdJ("click",function(){O.CHM(Be);const gt=O.oxw().$implicit,lt=O.oxw();return O.KtG(lt.close(gt))}),O.qZA()}}function De(Ke,je){if(1&Ke&&O.YNc(0,Ve,1,0,"button",9),2&Ke){const Be=je.$implicit;O.Q6J("ngIf",null==Be.options?null:Be.options.closable)}}class it{constructor(je){this.toastService=je,this._toastQueue=[],this.DEFAULT_DURATION=5e3}get toastQueue(){return this._toastQueue}ngOnInit(){this.toastService.toastEventChange.subscribe(je=>{this._toastQueue.push({text:je.text,options:this.setDefaultConfig(je)}),this.hideAfterDuration()})}setDefaultConfig(je){return{title:je.options?.title||"error"!==je.options?.style?je.options?.title:"\u062e\u0637\u0627",titleIcon:je.options?.titleIcon,style:je.options?.style?je.options.style:"success",duration:je.options?.duration?je.options.duration:this.DEFAULT_DURATION,closable:je.options?.closable??!0,autoClose:je.options?.autoClose??!0}}displayToastStyle(je){switch(je.options?.style){case"success":return"text-bg-success";case"warning":return"text-bg-warning";case"error":return"text-bg-danger";case"info":return"text-bg-info";default:return}}close(je){this._toastQueue=this._toastQueue.filter(Be=>Be!=je)}hideAfterDuration(){this._toastQueue.forEach(je=>{je.options?.closable&&je.options?.duration&&je.options.autoClose&&setTimeout(()=>this.close(je),je.options?.duration)})}static#e=this.\u0275fac=function(Be){return new(Be||it)(O.Y36(o.k))};static#t=this.\u0275cmp=O.Xpm({type:it,selectors:[["mts-toast"]],decls:3,vars:1,consts:[["class","toast align-items-center border-0 fade show m-2","role","alert",3,"ngClass",4,"ngFor","ngForOf"],["closeBtnTemplate",""],["role","alert",1,"toast","align-items-center","border-0","fade","show","m-2",3,"ngClass"],["class","toast-header fw-bold",4,"ngIf"],[1,"d-flex","toast-body"],[4,"ngIf"],[1,"toast-header","fw-bold"],[1,"me-2",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","btn-close me-2 ms-auto","aria-label","Close",3,"click",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close","me-2","ms-auto",3,"click"]],template:function(Be,Je){1&Be&&(O.YNc(0,we,6,4,"div",0),O.YNc(1,De,1,1,"ng-template",null,1,O.W1O)),2&Be&&O.Q6J("ngForOf",Je.toastQueue)},dependencies:[u.mk,u.sg,u.O5,u.tP],styles:["[_nghost-%COMP%]{position:fixed;top:1.1rem;left:1.1rem;z-index:100000;display:flex;flex-direction:column;flex-wrap:wrap;direction:ltr;height:max-content}.toast[_ngcontent-%COMP%]{direction:rtl}i[_ngcontent-%COMP%]{font-size:1rem!important}@media (min-width: 1024px){[_nghost-%COMP%]{bottom:0}}"]})}},7390:(tn,nt,N)=>{"use strict";N.d(nt,{k:()=>u});var o=N(7579),O=N(1571);class u{constructor(){this._toastEventSubject=new o.x,this.toastEventChange=this._toastEventSubject.asObservable()}show(Y,i){this._toastEventSubject.next({text:Y,options:i})}static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}},9515:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>O});var o=N(854);class O extends o.R{constructor(fe,Y){super(),this.data=fe,this.fileName=Y}}},1343:(tn,nt,N)=>{"use strict";N.d(nt,{Td:()=>q,dU:()=>i,i8:()=>o});class o{constructor(we,Ve,De=[],it=!0,Ke){this.page=we,this.sort=Ve,this.filters=De,this.computeTotal=it,this.exportAs=Ke}static page(we,Ve){return new o(new O(we,Ve))}addFilter(we,Ve,De=q.EQ){return this.filters.push(new fe(we,Ve,De)),this}removeFilter(we){return this.filters=this.filters.filter(Ve=>Ve.field!==we),this}removeFilterByIndex(we){return this.filters=this.filters.splice(we,1),this}removeAllFilters(){return this.filters=[],this}exportType(we){return this.exportAs=new Y(we),this}sortDescending(we){return this.sort=new u(we,!1),this}sortAscending(we){return this.sort=new u(we,!0),this}resetSort(){return this.sort=void 0,this}}class O{constructor(we=0,Ve=10){this.index=we,this.size=Ve}}class u{constructor(we,Ve=!0){this.field=we,this.asc=Ve}}class fe{constructor(we,Ve,De=q.EQ){this.field=we,this.value=Ve,this.operator=De}}class Y{constructor(we){this.type=we}}var i=(()=>((i||(i={})).excel="Excel",i))(),q=(()=>{return(de=q||(q={})).EQ="EQ",de.NEQ="NEQ",de.LT="LT",de.GT="GT",de.LI="LI",de.LEQ="LEQ",de.GEQ="GEQ",de.SW="SW",de.BT="BT",q;var de})()},854:(tn,nt,N)=>{"use strict";N.d(nt,{R:()=>o});class o{}},8122:(tn,nt,N)=>{"use strict";N.d(nt,{i:()=>O});var o=N(854);class O extends o.R{constructor(fe,Y){super(),this.data=fe,this.total=Y}}},8838:(tn,nt,N)=>{"use strict";N.d(nt,{l:()=>fe});var o=N(1571),O=N(6816),u=N(1005);class fe{constructor(i,q,de){this.httpService=i,this.elementRef=q,this._renderer=de,this.disabledStatus=new o.vpe,this._disabled=!1,this.requestId||(this._disabled=void 0)}ngOnInit(){this.httpService.beforeCallHttpRequest.subscribe({next:i=>{this.requestId===i?.requestId&&(this.emitState(!0),this.createSpinnerAndAppend())}}),this.httpService.afterCallHttpRequest.pipe((0,u.g)(500)).subscribe({next:i=>{this.spinner&&this._renderer.removeChild(this.elementRef.nativeElement,this.spinner),this.emitState(void 0)},error:i=>{this.emitState(void 0)}})}createSpinnerAndAppend(){this.spinner=this._renderer.createElement("span"),this._renderer.addClass(this.spinner,"spinner-border"),this._renderer.addClass(this.spinner,"spinner-border-sm"),this._renderer.appendChild(this.elementRef.nativeElement,this.spinner)}emitState(i){this._disabled=i,this.disabledStatus.emit(i)}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}static#e=this.\u0275fac=function(q){return new(q||fe)(o.Y36(O.OE),o.Y36(o.SBq),o.Y36(o.Qsj))};static#t=this.\u0275dir=o.lG2({type:fe,selectors:[["","mtsDisabled",""]],hostVars:1,hostBindings:function(q,de){2&q&&o.uIk("disabled",de._disabled)},inputs:{requestId:"requestId"},outputs:{disabledStatus:"disabledStatus"}})}},1726:(tn,nt,N)=>{"use strict";N.d(nt,{A:()=>fe});var o=N(4006),u=N(1571);class fe{constructor(){this.MatchPassword=[]}validate(i){return function O(Y,i){return q=>{const de=q.controls[Y],we=q.controls[i],Ve=de?.value,De=we?.value;return!de||!we||we.errors&&!we.errors.passwordMismatch||we.setErrors(Ve!==De?{passwordMismatch:!0}:null),null}}(this.MatchPassword[0],this.MatchPassword[1])(i)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275dir=u.lG2({type:fe,selectors:[["","mtsMatchPassword",""]],inputs:{MatchPassword:["mtsMatchPassword","MatchPassword"]},exportAs:["mtsMatchPassword"],features:[u._Bn([{provide:o.Cf,useExisting:fe,multi:!0}])]})}},9789:(tn,nt,N)=>{"use strict";N.d(nt,{s:()=>fe});var o=N(4006),u=N(1571);class fe{validate(i){return function O(){const Y=new RegExp("09([0-9]){9}$");return i=>Y.test(i.value)||!i.value?null:{iranianMobileNumber:{mobileNumber:i.value}}}()(i)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275dir=u.lG2({type:fe,selectors:[["","mtsMobileNumber",""]],exportAs:["mtsMobileNumber"],features:[u._Bn([{provide:o.Cf,useExisting:fe,multi:!0}])]})}},8975:(tn,nt,N)=>{"use strict";N.d(nt,{b:()=>Y});var o=N(4006);var fe=N(1571);class Y{validate(q){return function O(){return i=>function u(i){if(!i)return!0;if("1111111111"===i||"2222222222"===i||"3333333333"===i||"4444444444"===i||"5555555555"===i||"6666666666"===i||"7777777777"===i||"8888888888"===i||"9999999999"===i||!/^\d{10}$/.test(i))return!1;{const q=parseInt(i[9],void 0);let we,de=0;for(we=0;we<9;++we)de+=parseInt(i[we],void 0)*(10-we);return de%=11,de<2&&q===de||de>=2&&q+de===11}}(i.value)||!i.value?null:{iranianNationalCode:!0}}()(q)}static#e=this.\u0275fac=function(de){return new(de||Y)};static#t=this.\u0275dir=fe.lG2({type:Y,selectors:[["","mtsNationalCode",""]],exportAs:["mtsNationalCode"],features:[fe._Bn([{provide:o.Cf,useExisting:Y,multi:!0}])]})}},4148:(tn,nt,N)=>{"use strict";N.d(nt,{p:()=>fe});var o=N(4006),u=N(1571);class fe{constructor(){}validate(i){return(Y=>{let i=Y?.value;return/^[0-9]+$/g.test(i)||!i?null:{onlyNumber:!0}})(i)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275dir=u.lG2({type:fe,selectors:[["","mtsOnlyNumber",""]],exportAs:["mtsOnlyNumber"],features:[u._Bn([{provide:o.Cf,useExisting:fe,multi:!0}])]})}},5665:(tn,nt,N)=>{"use strict";N.d(nt,{e:()=>fe});var o=N(1571),O=N(4006);function u(){return Y=>{const i={noSpace:!1,noUppercase:!1,noLowercase:!1,noNumber:!1,noSymbol:!1,invalidLength:!1};let q=null;/^\S*$/.test(Y.value)?Y.value&&(i.noSpace=!0):(i.noSpace=!1,q={noSpace:!0}),/^(?=.*[A-Z]).*$/.test(Y.value)?Y.value&&(i.noUppercase=!0):(i.noUppercase=!1,q={noUppercase:!0}),/^(?=.*[a-z]).*$/.test(Y.value)?Y.value&&(i.noLowercase=!0):(i.noLowercase=!1,q={noLowercase:!0}),/^(?=.*[0-9]).*$/.test(Y.value)?Y.value&&(i.noNumber=!0):q={noNumber:!0},/(?=.*?[!@#$%^&*()_+={};:<>|./?,-])/.test(Y.value)?Y.value&&(i.noSymbol=!0):(i.noSymbol=!1,q={noSymbol:!0}),/^.{8,16}$/.test(Y.value)?Y.value&&(i.invalidLength=!0):(i.invalidLength=!1,q={invalidLength:!0});const je=Object.values(i),Be=je.length;let Je=0;return je.forEach(lt=>{lt&&Je++}),{validateRes:q,coveragePersent:(Je/Be*100).toFixed()}}}class fe{constructor(){this.coveragePersent=new o.vpe}validate(i){return this.coveragePersent.emit(u()(i)?.coveragePersent),u()(i)?.validateRes}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275dir=o.lG2({type:fe,selectors:[["","mtsPasswordStrengthCheckers",""]],outputs:{coveragePersent:"coveragePersent"},exportAs:["mtsPasswordStrengthCheckers"],features:[o._Bn([{provide:O.Cf,useExisting:fe,multi:!0}])]})}},6089:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>fe});var o=N(4006),u=N(1571);class fe{validate(i){return function O(){let Y=new RegExp("0([0-9]){10}$");return i=>Y.test(i.value)||!i.value?null:{iranianPhoneNumber:!0}}()(i)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275dir=u.lG2({type:fe,selectors:[["","mtsPhoneValidator",""]],exportAs:["mtsPhoneValidator"],features:[u._Bn([{provide:o.Cf,useExisting:fe,multi:!0}])]})}},6816:(tn,nt,N)=>{"use strict";N.d(nt,{n_:()=>Je,BN:()=>Ke,OE:()=>it,p4:()=>O,VY:()=>u});var o=N(1571);const O=new o.OlP("HttpServiceBaseUrl");var u=(()=>{return(gt=u||(u={}))[gt.OK=200]="OK",gt[gt.InvalidAccessToken=403]="InvalidAccessToken",gt[gt.Unauthorized=401]="Unauthorized",gt[gt.NotFound=404]="NotFound",gt[gt.InternalServerError=500]="InternalServerError",u;var gt})(),fe=N(7579),Y=N(4004),i=N(8505),q=N(8122),de=N(529),we=N(9515);class Ve{}class De{}class it{constructor(lt,wt,dt,ct){this._http=lt,this._beforeCallHttpRequest=new fe.x,this.beforeCallHttpRequest=this._beforeCallHttpRequest.asObservable(),this._afterCallHttpRequest=new fe.x,this.afterCallHttpRequest=this._afterCallHttpRequest.asObservable(),this._baseUrl="string"==typeof wt?wt:"",this._dataRequestSerializer=dt,this._dataResultSerializer=ct}get(lt,wt){const dt=this.makeUrl(lt,wt),ct=this.makeHttpClientOptions(wt);return this.mapResponse(this._http.get(dt,ct),wt)}getPagable(lt,wt,dt){const ct=this.makeUrl(lt,dt);(dt=dt||{}).responseType=wt.exportAs?.type?"blob":"json",dt.observe=wt.exportAs?.type?"response":"body";let at=this._dataRequestSerializer?this._dataRequestSerializer?.serialize(wt):this.mapDataRequestToQueryObject(wt);dt.query={...dt.query,...at};const Qe=this.makeHttpClientOptions(dt);return this._http.get(ct,Qe).pipe((0,Y.U)(ht=>this._dataResultSerializer?this._dataResultSerializer.serialize(ht):this.mapResultToDataResult(ht)))}post(lt,wt,dt){const ct=this.makeUrl(lt,dt),at=this.makeBody(wt,dt),Qe=this.makeHttpClientOptions(dt);return this.mapResponse(this._http.post(ct,at,Qe),dt)}put(lt,wt,dt){const ct=this.makeUrl(lt,dt),at=this.makeBody(wt,dt),Qe=this.makeHttpClientOptions(dt);return this.mapResponse(this._http.put(ct,at,Qe),dt)}patch(lt,wt,dt){const ct=this.makeUrl(lt,dt),at=this.makeBody(wt,dt),Qe=this.makeHttpClientOptions(dt);return this.mapResponse(this._http.patch(ct,at,Qe),dt)}delete(lt,wt){const dt=this.makeUrl(lt,wt),ct=this.makeHttpClientOptions(wt);return this.mapResponse(this._http.delete(dt,ct),wt)}makeUrl(lt,wt){return wt&&wt.pathType&&"absolute"===wt.pathType?lt:this._baseUrl+lt}makeHttpClientOptions(lt){if(!lt)return{};const wt={},dt=lt.query;if("object"==typeof dt){let ct=new de.LE;for(const at in dt)if(dt.hasOwnProperty(at)){const Qe=dt[at],ht=typeof Qe;("string"===ht||"number"===ht||"boolean"===ht)&&(ct=ct.set(at,Qe))}wt.params=ct}return"blob"===lt.responseType&&(wt.responseType="blob"),lt.requestId&&(wt.requestId=lt.requestId,this._beforeCallHttpRequest.next(lt)),wt.reportProgress=lt.reportProgress,wt.observe=lt.observe,wt}makeBody(lt,wt){if(lt=this.processBodyFields(lt),!wt||!wt.contentType||"multipart/form-data"!==wt.contentType)return lt;const dt=new FormData;for(const ct in lt)if(lt.hasOwnProperty(ct)){const at=lt[ct];let Qe;"string"==typeof at||at instanceof File?Qe=at:"number"==typeof at?Qe=at.toString():"object"==typeof at&&(Qe=JSON.stringify(at)),Qe&&dt.append(ct,Qe)}return dt}processBodyFields(lt){return lt}mapResponse(lt,wt){return lt.pipe((0,i.b)(dt=>wt?.requestId?this._afterCallHttpRequest.next(wt):dt))}mapResultToDataResult(lt){return lt.body instanceof Blob?new we.x(lt.body,"file"):new q.i(lt.data,lt.total)}mapDataRequestToQueryObject(lt){var wt={};if(lt.computeTotal&&(wt.computeTotal="true"),lt.page&&(wt["page.size"]=lt.page.size,wt["page.index"]=lt.page.index),lt.sort&&(wt["sort.field"]=lt.sort.field,wt["sort.asc"]=`${lt.sort.asc}`),lt.filters)for(let dt=0;dt<lt.filters.length;dt++){const ct=lt.filters[dt];wt[`filters[${dt}].field`]=ct.field,wt[`filters[${dt}].operator`]=ct.operator,wt[`filters[${dt}].value`]=ct.value}return lt.exportAs&&(wt["exportAs.type"]=`${lt.exportAs.type}`),wt}static#e=this.\u0275fac=function(wt){return new(wt||it)(o.LFG(de.eN),o.LFG(O,8),o.LFG(De,8),o.LFG(Ve,8))};static#t=this.\u0275prov=o.Yz7({token:it,factory:it.\u0275fac,providedIn:"root"})}class Ke{constructor(){this._errorSubject=new fe.x,this.error=this._errorSubject.asObservable()}emitError(lt){this._errorSubject.next(lt)}static#e=this.\u0275fac=function(wt){return new(wt||Ke)};static#t=this.\u0275prov=o.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}var je=N(2843),Be=N(262);class Je{constructor(lt){this.httpErrorService=lt}intercept(lt,wt){return wt.handle(lt).pipe((0,Be.K)(dt=>(this.httpErrorService.emitError({status:dt.status,message:dt.error?.message?dt.error.message:dt.message}),(0,je._)(()=>dt))))}static#e=this.\u0275fac=function(wt){return new(wt||Je)(o.LFG(Ke))};static#t=this.\u0275prov=o.Yz7({token:Je,factory:Je.\u0275fac})}},8710:(tn,nt,N)=>{"use strict";N.d(nt,{H:()=>Ve});var o=N(8989),O=N(1571),u=N(6895);function fe(De,it){1&De&&O._UZ(0,"div",10)}function Y(De,it){if(1&De&&(O.TgZ(0,"p",11),O._uU(1),O.qZA()),2&De){const Ke=O.oxw(2).ngIf;O.xp6(1),O.Oqu(Ke.text)}}function i(De,it){if(1&De&&(O.TgZ(0,"div",7),O.YNc(1,fe,1,0,"div",8),O.YNc(2,Y,2,1,"p",9),O.qZA()),2&De){const Ke=O.oxw().ngIf;O.xp6(1),O.Q6J("ngIf",Ke.spinner),O.xp6(1),O.Q6J("ngIf",Ke.text)}}function q(De,it){if(1&De&&(O.ynx(0),O.YNc(1,i,3,2,"div",6),O.BQk()),2&De){const Ke=it.ngIf;O.xp6(1),O.Q6J("ngIf",Ke.show)}}const de=[[["header"]],[["main"]],[["footer"]]],we=["header","main","footer"];class Ve{constructor(it){this._backdropChange$=it.backdropChange}ngOnDestroy(){}static#e=this.\u0275fac=function(Ke){return new(Ke||Ve)(O.Y36(o.E))};static#t=this.\u0275cmp=O.Xpm({type:Ve,selectors:[["mts-access-layout-2"]],features:[O._Bn([o.E])],ngContentSelectors:we,decls:10,vars:3,consts:[[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-12","col-sm-10","col-md-8","col-lg-6","col-xl-5","col-xxl-4"],[1,"card","shadow"],[1,"card-body","px-4"],[4,"ngIf"],["class","backdrop",4,"ngIf"],[1,"backdrop"],["class","spinner-border text-light","role","status",4,"ngIf"],["class","text-light mt-2",4,"ngIf"],["role","status",1,"spinner-border","text-light"],[1,"text-light","mt-2"]],template:function(Ke,je){1&Ke&&(O.F$t(de),O.TgZ(0,"div",0)(1,"div",1)(2,"div",2),O.Hsn(3),O.TgZ(4,"div",3)(5,"div",4),O.Hsn(6,1),O.YNc(7,q,2,1,"ng-container",5),O.ALo(8,"async"),O.qZA()(),O.Hsn(9,2),O.qZA()()()),2&Ke&&(O.xp6(7),O.Q6J("ngIf",O.lcZ(8,1,je._backdropChange$)))},dependencies:[u.O5,u.Ov],styles:["[_nghost-%COMP%]{display:block;height:100vh}.card-body[_ngcontent-%COMP%]{position:relative}.backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;animation:_ngcontent-%COMP%_fadeInAnimation ease 1s;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#0009}@keyframes _ngcontent-%COMP%_fadeInAnimation{0%{background-color:unset}to{background-color:#0009}}"]})}},8989:(tn,nt,N)=>{"use strict";N.d(nt,{E:()=>u});var o=N(1135),O=N(1571);class u{constructor(){this._backdropChangeSubject=new o.X({show:!1}),this.backdropChange=this._backdropChangeSubject.asObservable()}backdrop(Y){this._backdropChangeSubject.next(Y)}static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac})}},4663:(tn,nt,N)=>{"use strict";N.d(nt,{g:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mtsGroupMenuItemFirstTemplate",""]],exportAs:["mtsGroupMenuItemFirstTemplate"]})}},3302:(tn,nt,N)=>{"use strict";N.d(nt,{G:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mtsGroupMenuItemSecondTemplate",""]]})}},8036:(tn,nt,N)=>{"use strict";N.d(nt,{o:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mtsTextMenuItemFirstTemplate",""]],exportAs:["mtsTextMenuItemFirstTemplate"]})}},5516:(tn,nt,N)=>{"use strict";N.d(nt,{w:()=>O});var o=N(1571);class O{constructor(fe){this.templateRef=fe}static#e=this.\u0275fac=function(Y){return new(Y||O)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:O,selectors:[["","mtsTextMenuItemSecondTemplate",""]],exportAs:["mtsTextMenuItemSecondTemplate"]})}},3139:(tn,nt,N)=>{"use strict";N.d(nt,{F:()=>je});var o=(()=>{return(Be=o||(o={}))[Be.xs=0]="xs",Be.sm="576px",Be.md="768px",Be.lg="992px",Be.xl="1200px",Be.xxl="1400px",o;var Be})(),O=N(8036),u=N(1571),fe=N(8326),Y=N(4663),i=N(5516),q=N(3302),de=N(2289);const we=["asideMenu"];function Ve(Be,Je){if(1&Be){const gt=u.EpF();u.TgZ(0,"div",7),u.NdJ("click",function(){u.CHM(gt);const wt=u.oxw();return u.KtG(wt._onClickDrawerLayer())}),u.qZA()}}function De(Be,Je){if(1&Be&&(u.TgZ(0,"div",9)(1,"div",10),u._UZ(2,"div",11),u.TgZ(3,"h5",12),u._uU(4),u.qZA()()()),2&Be){const gt=u.oxw().ngIf;u.xp6(4),u.Oqu(gt.text)}}function it(Be,Je){if(1&Be&&(u.ynx(0),u.YNc(1,De,5,1,"div",8),u.BQk()),2&Be){const gt=Je.ngIf;u.xp6(1),u.Q6J("ngIf",gt.show)}}const Ke=["*"];class je{constructor(Je,gt,lt){this.renderer=Je,this.layoutService=gt,this.breakpointObserver=lt,this._smallDevice=!1,this._sidenavOpen=!0,this.asideMenuItemClick=new u.vpe,this.headerMenuItemClick=new u.vpe,this._waiting$=gt.waitingChange,this.mediaSubscription=this.breakpointObserver.observe(`(max-width: ${o.lg})`).subscribe(wt=>{this._smallDevice=wt.matches,this._sidenavOpen=!wt.matches,this._configAsideStyle(),this._handleSecondAsideMenu()})}ngAfterContentInit(){this._handleSecondAsideMenu()}_onClickDrawerLayer(){this._smallDevice&&this._sidenavOpen&&this._configAsideStyle()}_configAsideStyle(Je){this.asideMenu?.nativeElement&&(this._sidenavOpen=!1,this.renderer.removeClass(this.asideMenu.nativeElement,"aside-drawer"),this.renderer.removeClass(this.asideMenu.nativeElement,"drawer-overlay"),this.asideMenuItemClick.emit(Je))}_handleSecondAsideMenu(Je){this.asideMenu?.nativeElement&&(this._spacingContentFromAside=this._smallDevice?"0":Je?"24.1rem":"8.5rem",this.renderer.addClass(this.asideMenu?.nativeElement,Je?"wide-aside-menu":"short-aside-menu"),this.renderer.removeClass(this.asideMenu?.nativeElement,Je?"short-aside-menu":"wide-aside-menu"))}_openExpanderMenuClick(){this._sidenavOpen=!0,this.asideMenu?.nativeElement&&this.renderer.addClass(this.asideMenu?.nativeElement,"aside-drawer")}ngOnDestroy(){this.mediaSubscription.unsubscribe()}static#e=this.\u0275fac=function(gt){return new(gt||je)(u.Y36(u.Qsj),u.Y36(fe.N),u.Y36(de.Yg))};static#t=this.\u0275cmp=u.Xpm({type:je,selectors:[["mts-workspace-layout-1"]],contentQueries:function(gt,lt,wt){if(1&gt&&(u.Suo(wt,O.o,5),u.Suo(wt,Y.g,5),u.Suo(wt,i.w,5),u.Suo(wt,q.G,5)),2&gt){let dt;u.iGM(dt=u.CRH())&&(lt._textTemplateFirst=dt.first),u.iGM(dt=u.CRH())&&(lt._groupTemplateFirst=dt.first),u.iGM(dt=u.CRH())&&(lt._textTemplateSecond=dt.first),u.iGM(dt=u.CRH())&&(lt._groupTemplateSecond=dt.first)}},viewQuery:function(gt,lt){if(1&gt&&u.Gf(we,7,u.SBq),2&gt){let wt;u.iGM(wt=u.CRH())&&(lt.asideMenu=wt.first)}},hostVars:2,hostBindings:function(gt,lt){2&gt&&u.Udp("padding-right",lt._spacingContentFromAside)},inputs:{config:"config"},outputs:{asideMenuItemClick:"asideMenuItemClick",headerMenuItemClick:"headerMenuItemClick"},ngContentSelectors:Ke,decls:9,vars:10,consts:[[1,"d-none","d-lg-block","aside",3,"config","_textTemplateFirstMenu","_groupTemplateFirstMenu","_textTemplateSecondMenu","_groupTemplateSecondMenu","menuItemClick","isSecondaryAsideMenu"],["asideMenu",""],["id","content",1,"container-fluid","container-lg","my-4"],[1,"header",3,"config","expanderClick","menuItemClick"],[1,"header-underline","my-3"],["class","drawer-overlay",3,"click",4,"ngIf"],[4,"ngIf"],[1,"drawer-overlay",3,"click"],["class","wait-overlay",4,"ngIf"],[1,"wait-overlay"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],["role","status","aria-hidden","true",1,"spinner-border","text-light"],[1,"text-light","pt-2"]],template:function(gt,lt){1&gt&&(u.F$t(),u.TgZ(0,"mts-aside",0,1),u.NdJ("menuItemClick",function(dt){return lt._configAsideStyle(dt)})("isSecondaryAsideMenu",function(dt){return lt._handleSecondAsideMenu(dt)}),u.qZA(),u.TgZ(2,"div",2)(3,"mts-header",3),u.NdJ("expanderClick",function(){return lt._openExpanderMenuClick()})("menuItemClick",function(dt){return lt.headerMenuItemClick.emit(dt)}),u.qZA(),u._UZ(4,"div",4),u.Hsn(5),u.qZA(),u.YNc(6,Ve,1,0,"div",5),u.YNc(7,it,2,1,"ng-container",6),u.ALo(8,"async")),2&gt&&(u.Q6J("config",lt.config)("_textTemplateFirstMenu",lt._textTemplateFirst)("_groupTemplateFirstMenu",lt._groupTemplateFirst)("_textTemplateSecondMenu",lt._textTemplateSecond)("_groupTemplateSecondMenu",lt._groupTemplateSecond),u.xp6(3),u.Q6J("config",lt.config),u.xp6(3),u.Q6J("ngIf",lt._smallDevice&&lt._sidenavOpen),u.xp6(1),u.Q6J("ngIf",u.lcZ(8,8,lt._waiting$)))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}#content[_ngcontent-%COMP%]{min-height:100vh}#content[_ngcontent-%COMP%]   .header-underline[_ngcontent-%COMP%]{border:1px dashed #CECECE}.wide-aside-menu[_ngcontent-%COMP%]{width:24.1rem}.aside[_ngcontent-%COMP%]{background-color:#fff;position:fixed;top:0;bottom:0;right:0}.aside-drawer[_ngcontent-%COMP%]{display:flex!important;z-index:110;position:fixed;top:0;bottom:0;right:0}.drawer-overlay[_ngcontent-%COMP%]{overflow:hidden;z-index:109;background-color:#0003;animation:.3s ease-in-out 1;position:fixed;inset:0}.wait-overlay[_ngcontent-%COMP%]{background-color:#1e1c1cc7;position:fixed;inset:0;z-index:1000;opacity:.7;display:flex;flex-direction:column;align-items:center;justify-content:center}"]})}},8326:(tn,nt,N)=>{"use strict";N.d(nt,{N:()=>fe});var o=N(7579),O=N(1135),u=N(1571);class fe{constructor(){this._pageTitleSubject=new o.x,this.pageTitleSubject=this._pageTitleSubject.asObservable(),this._pageActions=[],this._pageActionsSubject=new O.X(this._pageActions),this.pageActionsChange=this._pageActionsSubject.asObservable(),this._waitingSubject=new O.X({show:!1}),this.waitingChange=this._waitingSubject.asObservable()}setPageTitle(i){this._pageTitleSubject.next(i)}setPageActions(i){this._pageActions=i,this._pageActionsSubject.next(this._pageActions)}addPageActions(i){this._pageActions=this._pageActions.concat(i).reverse(),this._pageActionsSubject.next(this._pageActions)}clearPageActions(){this.setPageActions([])}showWaiting(i){let q;q="boolean"==typeof(i=i??!0)?{show:i,text:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a"}:i,this._waitingSubject.next(q)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275prov=u.Yz7({token:fe,factory:fe.\u0275fac})}},6854:(tn,nt,N)=>{"use strict";N.d(nt,{zl:()=>je,v:()=>wt,X$:()=>Je,Qp:()=>Be.Q,xD:()=>q,bI:()=>i,$C:()=>fe,HA:()=>Y,PX:()=>u});var o=N(6775),O=N(1366);function u(dt){const ct=o.toJalaali(dt.year,dt.month,dt.day);return O.qj.from({year:ct.jy,month:ct.jm,day:ct.jd})}function fe(dt){const ct=o.toGregorian(dt.year,dt.month,dt.day);return O.qj.from({year:ct.gy,month:ct.gm,day:ct.gd})}function Y(dt){return dt.year+"-"+(dt.month<10?`0${dt.month}`:dt.month)+"-"+(dt.day<10?`0${dt.day}`:dt.day)+"T00:00:00Z"}function i(dt){const ct=new Date(Date.parse(dt));if(ct instanceof Date&&!isNaN(ct.getTime()))return new O.qj(ct.getFullYear(),ct.getMonth()+1,ct.getDate());throw Error("Invalid Date")}function q(dt){return o.isValidJalaaliDate(dt.year,dt.month,dt.day)}var Ve=N(1571);new Ve.OlP("LOCALE");var it=N(3901);new it.g({name:"enUS",rtl:!1,dictionary:{},enum:{},form:{validation:{error:{defaultMessage:"\u062e\u0637\u0627",translators:{required:dt=>"Required",min:dt=>`Minimum value: ${dt.requiredMin}`,max:dt=>`Maximum value: ${dt.requiredMax}`,minlength:dt=>`Minimum length: ${dt.minlength}`,maxlength:dt=>`Maximum length: ${dt.maxlength}`,email:dt=>"Invalid email",invalidDate:dt=>"Invalid date",pattern:dt=>"Invalid input",noSymbol:dt=>"password should contains symbols (! @ # $ % ^ & *)",noUppercase:dt=>"password should contains uppercase",noLowercase:dt=>"password should contains lowercase",noNumber:dt=>"password should contains number",noSpace:dt=>"password shouldn't contains space",passwordMismatch:dt=>"the password and password confirm should be equal"}}}}});const je=new it.g({name:"faIR",rtl:!0,dictionary:{password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631",rePassword:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631"},enum:{},form:{validation:{error:{defaultMessage:"\u062e\u0637\u0627",translators:{required:dt=>"\u0627\u0644\u0632\u0627\u0645\u06cc",min:dt=>`\u062d\u062f\u0627\u0642\u0644: ${dt.min}`,max:dt=>`\u062d\u062f\u0627\u06a9\u062b\u0631: ${dt.max}`,minlength:dt=>`\u062d\u062f\u0627\u0642\u0644 ${dt.requiredLength} \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631`,maxlength:dt=>`\u062d\u062f\u0627\u06a9\u062b\u0631 ${dt.requiredLength} \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631`,persianCharacter:dt=>"\u062a\u0646\u0647\u0627 \u062d\u0631\u0648\u0641 \u0641\u0627\u0631\u0633\u06cc \u0645\u062c\u0627\u0632 \u0645\u06cc \u0628\u0627\u0634\u062f",email:dt=>"\u0627\u06cc\u0645\u06cc\u0644 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",invalidDate:dt=>"\u062a\u0627\u0631\u06cc\u062e \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",iranianPhoneNumber:dt=>"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",postalCode:dt=>"\u06a9\u062f \u067e\u0633\u062a\u06cc \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",fileExtension:dt=>"\u0646\u0648\u0639 \u0641\u0627\u06cc\u0644 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",sheba:dt=>"\u0634\u0645\u0627\u0631\u0647 \u0634\u0628\u0627 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",maxFileSize:dt=>`\u062d\u062c\u0645 \u0641\u0627\u06cc\u0644 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ${dt.maxSize.toFixed(1)<1024?`${dt.maxSize.toFixed(1)} \u06a9\u06cc\u0644\u0648\u0628\u0627\u06cc\u062a`:dt.maxSize.toFixed(1)/1024+" \u0645\u06af\u0627\u0628\u0627\u06cc\u062a"} \u0628\u0627\u0634\u062f.`,pattern:dt=>"\u0645\u0642\u062f\u0627\u0631 \u0648\u0627\u0631\u062f \u0634\u062f\u0647 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",website:dt=>"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",noSymbol:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0639\u0644\u0627\u0645\u062a \u06cc\u0627 \u0646\u0645\u0627\u062f (\u0627\u0632 \u0642\u0628\u06cc\u0644 @ # $ \u0648...) \u0628\u0627\u0634\u062f",noUppercase:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0641 \u0628\u0632\u0631\u06af \u0628\u0627\u0634\u062f",noLowercase:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0641 \u06a9\u0648\u0686\u06a9 \u0628\u0627\u0634\u062f",noNumber:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0639\u062f\u062f \u0628\u0627\u0634\u062f",noSpace:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0646\u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0641\u0627\u0635\u0644\u0647 \u0628\u0627\u0634\u062f",passwordMismatch:dt=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u0633\u0627\u0646 \u0628\u0627\u0634\u0646\u062f",minValue:dt=>`\u062d\u062f\u0627\u0642\u0644 ${dt.requiredValue} ${dt.currency} \u0645\u062c\u0627\u0632 \u0627\u0633\u062a`,maxValue:dt=>`\u062d\u062f\u0627\u06a9\u062b\u0631 ${dt.requiredValue} ${dt.currency} \u0645\u062c\u0627\u0632 \u0627\u0633\u062a`}}}}});var Be=N(6879);class Je{constructor(ct){this.translator=ct}transform(ct,...at){return this.translator?.translate(ct)??""}static#e=this.\u0275fac=function(at){return new(at||Je)(Ve.Y36(Be.Q,16))};static#t=this.\u0275pipe=Ve.Yjl({name:"mtsTranslate",type:Je,pure:!1})}N(5064);class wt{static#e=this.\u0275fac=function(at){return new(at||wt)};static#t=this.\u0275mod=Ve.oAB({type:wt});static#n=this.\u0275inj=Ve.cJS({})}},3901:(tn,nt,N)=>{"use strict";N.d(nt,{g:()=>o});class o{constructor(u){this._data=u,Object.freeze(u),Object.freeze(u.dictionary),Object.freeze(u.enum),Object.freeze(u.form.validation.error),Object.freeze(u.form.validation.error.translators)}get name(){return this._data.name}get rtl(){return this._data.rtl}get data(){return this._data}get dictionary(){return this._data.dictionary}get enum(){return this._data.enum}get formValidationError(){return this._data.form.validation.error}clone(u){return new o({name:u?.name??this._data.name,rtl:u?.rtl??this._data.rtl,dictionary:u?.dictionary??this._data.dictionary,enum:u?.enum??this._data.enum,form:u?.form??this._data.form})}extend(u){return this.clone({dictionary:{...this._data.dictionary,...u?.dictionary},enum:{...this._data.enum,...u?.enum},form:{validation:{error:{defaultMessage:this._data.form.validation.error.defaultMessage,translators:{...this._data.form.validation.error.translators,...u.errorTranslators}}}}})}translateFirstError(u){const fe=Object.keys(u)[0],i=this._data.form.validation.error.translators[fe];return"function"==typeof i?i(u[fe]):""}lookup(u){return this._data.dictionary[u]}lookupEnumKeyValuesByEnumClass(u){return this._data.enum[u]}lookupEnum(u,fe){return void 0===this._data.enum[fe][u]||void 0===this._data.enum[fe]?"":this._data.enum[fe][u]}}},5064:(tn,nt,N)=>{"use strict";N.d(nt,{E:()=>u});var o=N(6879),O=N(1571);class u{constructor(Y){this.translator=Y}transform(Y,i){return this.translator.transalteEnum(Y,i)}static#e=this.\u0275fac=function(i){return new(i||u)(O.Y36(o.Q,16))};static#t=this.\u0275pipe=O.Yjl({name:"mtsTranslateEnum",type:u,pure:!0})}},6879:(tn,nt,N)=>{"use strict";N.d(nt,{Q:()=>fe});var o=N(3901),O=N(2821),u=N(1571);class fe{constructor(i,q){this.subsystem=i,this.parentSubsystem=q,i instanceof O.l&&i.locale?.data&&(this.injectedSubsystem=new o.g(i.locale?.data)),q instanceof O.l&&q.locale?.data&&(this.injectedParentSubsystem=new o.g(q.locale?.data))}translate(i){return this.injectedSubsystem?.lookup(i)||this.injectedParentSubsystem?.lookup(i)||i}translateFirstError(i){return this.injectedSubsystem?.translateFirstError(i)||this.injectedParentSubsystem?.translateFirstError(i)||this.injectedSubsystem?.formValidationError.defaultMessage||this.injectedParentSubsystem?.formValidationError.defaultMessage}transalteEnum(i,q){return this.injectedSubsystem.lookupEnum(i,q)||this.injectedParentSubsystem?.lookupEnum(i,q)||i}lookupEnumKeyValueByEnumClass(i){return this.injectedSubsystem.lookupEnumKeyValuesByEnumClass(i)}static#e=this.\u0275fac=function(q){return new(q||fe)(u.LFG(O.r,8),u.LFG(O.r,12))};static#t=this.\u0275prov=u.Yz7({token:fe,factory:fe.\u0275fac})}},535:(tn,nt,N)=>{"use strict";N.d(nt,{k:()=>u});var o=N(9433),O=N(1571);class u{constructor(Y,i,q){this.templateRef=Y,this.viewContainer=i,this.identity=q,this._viewCreated=!1}set claim(Y){let i=!1;const q=this.identity.get();i=null==Y||null!=q&&q.hasCriteria(Y),this._show(i)}_show(Y){Y&&!this._viewCreated?(this.viewContainer.createEmbeddedView(this.templateRef),this._viewCreated=!0):!Y&&this._viewCreated&&(this.viewContainer.clear(),this._viewCreated=!1)}static#e=this.\u0275fac=function(i){return new(i||u)(O.Y36(O.Rgc),O.Y36(O.s_b),O.Y36(o.c))};static#t=this.\u0275dir=O.lG2({type:u,selectors:[["","mtsClaim",""]],inputs:{claim:["mtsClaim","claim"]},exportAs:["mtsClaim"]})}},9433:(tn,nt,N)=>{"use strict";N.d(nt,{c:()=>fe});var o=N(7579),O=N(8152),u=N(1571);class fe{constructor(){this._userSubject=new o.x,this.userChange=this._userSubject.asObservable()}get(){return this._user}set(i){if(!(i instanceof O.s||null==i))throw Error("Invalid UserIdentity.");this._user=i,this._userSubject.next(i)}static#e=this.\u0275fac=function(q){return new(q||fe)};static#t=this.\u0275prov=u.Yz7({token:fe,factory:fe.\u0275fac})}},8152:(tn,nt,N)=>{"use strict";N.d(nt,{s:()=>o});class o{constructor(u){this._claims=new Array,Array.isArray(u)&&(this._claims=[...u])}get claims(){return[...this._claims]}hasClaim(u){return this._claims.some(fe=>fe===u)}hasAllClaims(u){return u.every(fe=>this._claims.some(Y=>fe===Y))}hasAnyClaim(u){return u.some(fe=>this._claims.some(Y=>fe===Y))}hasCriteria(u){if("string"==typeof u)return this._claims.some(fe=>fe===u);if("object"==typeof u&&u?.any&&u?.all)throw Error('Setting "any" and "all" at the same time is not valid.');if(Array.isArray(u?.any))return this.hasAnyClaim(u.any);if(Array.isArray(u?.all))return this.hasAllClaims(u.all);throw Error("Invalid criteria")}}},2821:(tn,nt,N)=>{"use strict";N.d(nt,{r:()=>O,l:()=>u});const O=new(N(1571).OlP)("Subsystem");class u{constructor(Y,i,q,de){this.key=Y,this.icon=i,this.titleKey=q,this.locale=de}}},5556:(tn,nt,N)=>{"use strict";N.d(nt,{K:()=>O});var o=N(1571);class O{transform(fe,Y=!1){return Y?fe?new Date(fe).toLocaleTimeString("fa-IR",{hour12:!1})+" - "+new Date(fe).toLocaleDateString("fa-IR"):"":fe?new Date(fe).toLocaleDateString("fa-IR"):""}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275pipe=o.Yjl({name:"jalaliDate",type:O,pure:!0})}},1250:(tn,nt,N)=>{"use strict";N.d(nt,{u:()=>O});var o=N(1571);class O{transform(fe){return Object.keys(fe).filter(q=>{const de=Number(q);return isNaN(de)}).map(q=>({key:q,value:fe[q]}))}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275pipe=o.Yjl({name:"enumKeyValue",type:O,pure:!0})}},8196:(tn,nt,N)=>{"use strict";N.d(nt,{iK:()=>it,As:()=>we,RY:()=>Ke,Yk:()=>o.Y});var o=N(2522),fe=(N(5556),N(1250),N(1571));class Y{transform(Be,Je){let gt=Object.keys(Je).filter(lt=>Je[lt]==Be);return gt.length>0?gt[0]:""}static#e=this.\u0275fac=function(Je){return new(Je||Y)};static#t=this.\u0275pipe=fe.Yjl({name:"enumKeyByValue",type:Y,pure:!0})}class i{transform(Be){return Array(Be).fill(0).map((Je,gt)=>gt)}static#e=this.\u0275fac=function(Je){return new(Je||i)};static#t=this.\u0275pipe=fe.Yjl({name:"numberToArray",type:i,pure:!0})}N(9251);class we{static#e=this.\u0275fac=function(Je){return new(Je||we)};static#t=this.\u0275mod=fe.oAB({type:we});static#n=this.\u0275inj=fe.cJS({})}var Ve=N(1135);class De{constructor(){this.previousUrl=new Ve.X(""),this.previousUrl$=this.previousUrl.asObservable()}setPreviousUrl(Be){this.previousUrl.next(Be)}static#e=this.\u0275fac=function(Je){return new(Je||De)};static#t=this.\u0275prov=fe.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"})}class it{constructor(){}static saveBlob(Be,Je){const gt=window.URL.createObjectURL(Be),lt=document.createElement("a");lt.href=gt,lt.download=Je,document.body.appendChild(lt),lt.click(),lt.remove(),window.URL.revokeObjectURL(gt)}static getBase64(Be){return new Promise((Je,gt)=>{const lt=new FileReader;lt.readAsDataURL(Be),lt.onload=()=>Je(lt.result),lt.onerror=wt=>gt(wt)})}}const Ke={photo:["jpg","png","jpeg","JPG","PNG","JPEG"],word:["doc","docx","txt","DOC","DOCX","TXT"],Excel:["xls","xlsx","XLS","XLSX"],pdf:["pdf","PDF"],compressed:["zip","rar"],ordinaries:["jpg","png","jpeg","doc","docx","txt","xls","xlsx","pdf","zip","rar","JPG","PNG","JPEG","DOC","DOCX","TXT","XLS","XLSX","PDF"]}},9251:(tn,nt,N)=>{"use strict";N.d(nt,{M:()=>O});var o=N(1571);class O{constructor(){this.spliter=" \u0648 ",this.zero="\u0635\u0641\u0631",this.Letters=[["","\u06cc\u0643","\u062f\u0648","\u0633\u0647","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c","\u0634\u0634","\u0647\u0641\u062a","\u0647\u0634\u062a","\u0646\u0647"],["\u062f\u0647","\u06cc\u0627\u0632\u062f\u0647","\u062f\u0648\u0627\u0632\u062f\u0647","\u0633\u06cc\u0632\u062f\u0647","\u0686\u0647\u0627\u0631\u062f\u0647","\u067e\u0627\u0646\u0632\u062f\u0647","\u0634\u0627\u0646\u0632\u062f\u0647","\u0647\u0641\u062f\u0647","\u0647\u062c\u062f\u0647","\u0646\u0648\u0632\u062f\u0647","\u0628\u06cc\u0633\u062a"],["","","\u0628\u06cc\u0633\u062a","\u0633\u06cc","\u0686\u0647\u0644","\u067e\u0646\u062c\u0627\u0647","\u0634\u0635\u062a","\u0647\u0641\u062a\u0627\u062f","\u0647\u0634\u062a\u0627\u062f","\u0646\u0648\u062f"],["","\u06cc\u0643\u0635\u062f","\u062f\u0648\u06cc\u0633\u062a","\u0633\u06cc\u0635\u062f","\u0686\u0647\u0627\u0631\u0635\u062f","\u067e\u0627\u0646\u0635\u062f","\u0634\u0634\u0635\u062f","\u0647\u0641\u062a\u0635\u062f","\u0647\u0634\u062a\u0635\u062f","\u0646\u0647\u0635\u062f"],[""," \u0647\u0632\u0627\u0631 "," \u0645\u06cc\u0644\u06cc\u0648\u0646 "," \u0645\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0628\u06cc\u0644\u06cc\u0648\u0646 "," \u0628\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u062a\u0631\u06cc\u0644\u06cc\u0648\u0646 "," \u062a\u0631\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u06a9\u0648\u0622\u062f\u0631\u06cc\u0644\u06cc\u0648\u0646 "," \u06a9\u0627\u062f\u0631\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u06a9\u0648\u06cc\u0646\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u06a9\u0648\u0627\u0646\u062a\u06cc\u0646\u06cc\u0627\u0631\u062f "," \u0633\u06a9\u0633\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0633\u06a9\u0633\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0633\u067e\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0633\u067e\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0627\u06a9\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0627\u06a9\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0646\u0627\u0646\u06cc\u0644\u06cc\u0648\u0646 "," \u0646\u0627\u0646\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u062f\u0633\u06cc\u0644\u06cc\u0648\u0646 "," \u062f\u0633\u06cc\u0644\u06cc\u0627\u0631\u062f "]]}ThreeNumbersToLetter(fe){if(0===parseInt(fe,0))return"";const Y=parseInt(fe,0);if(Y<10)return this.Letters[0][Y];if(Y<=20)return this.Letters[1][Y-10];if(Y<100){const De=Y%10,it=(Y-De)/10;return De>0?this.Letters[2][it]+this.spliter+this.Letters[0][De]:this.Letters[2][it]}const i=Y%10,q=(Y-Y%100)/100,de=(Y-(100*q+i))/10,we=[this.Letters[3][q]],Ve=10*de+i;return Ve>0&&(Ve<10?we.push(this.Letters[0][Ve]):Ve<=20?we.push(this.Letters[1][Ve-10]):(we.push(this.Letters[2][de]),i>0&&we.push(this.Letters[0][i]))),we.join(this.spliter)}PrepareNumber(fe){const Y=(fe=fe.slice(0,-1)).length%3;return 1===Y?fe="00"+fe:2===Y&&(fe="0"+fe),fe.replace(/\d{3}(?=\d)/g,"$&*").split("*")}transform(fe,Y){if(0===fe)return this.zero;if("number"==typeof fe&&(fe=fe.toString()),fe.length>25)return"\u062e\u0627\u0631\u062c \u0627\u0632 \u0645\u062d\u062f\u0648\u062f\u0647";const i=this.PrepareNumber(fe),q=[],de=i.length;for(let Ve=0;Ve<de;Ve++){const De=this.Letters[4][de-(Ve+1)],it=this.ThreeNumbersToLetter(i[Ve]);""!==it&&q.push(it+De)}let we=q.join(this.spliter);return fe.length>1&&(we=`${q.join(this.spliter)} \u062a\u0648\u0645\u0627\u0646`),we}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275pipe=o.Yjl({name:"numberToPersian",type:O,pure:!0})}},2522:(tn,nt,N)=>{"use strict";function o(O){return O.replace(/[\u0660-\u0669]/g,u=>u.charCodeAt(0)-1632).replace(/[\u06f0-\u06f9]/g,u=>u.charCodeAt(0)-1776)}N.d(nt,{Y:()=>o})},6775:tn=>{tn.exports={toJalaali:function N(Be,Je,gt){return"[object Date]"===Object.prototype.toString.call(Be)&&(gt=Be.getDate(),Je=Be.getMonth()+1,Be=Be.getFullYear()),de(we(Be,Je,gt))},toGregorian:o,isValidJalaaliDate:function O(Be,Je,gt){return Be>=-61&&Be<=3177&&Je>=1&&Je<=12&&gt>=1&&gt<=fe(Be,Je)},isLeapJalaaliYear:u,jalaaliMonthLength:fe,jalCal:i,j2d:q,d2j:de,g2d:we,d2g:Ve,jalaaliToDateObject:it,jalaaliWeek:function De(Be,Je,gt){var lt=it(Be,Je,gt).getDay(),wt=6==lt?0:-(lt+1),dt=6+wt;return{saturday:de(q(Be,Je,gt+wt)),friday:de(q(Be,Je,gt+dt))}}};var nt=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function o(Be,Je,gt){return Ve(q(Be,Je,gt))}function u(Be){return 0===function Y(Be){var lt,wt,dt,ct,at,Je=nt.length,gt=nt[0];if(Be<gt||Be>=nt[Je-1])throw new Error("Invalid Jalaali year "+Be);for(at=1;at<Je&&(wt=(lt=nt[at])-gt,!(Be<lt));at+=1)gt=lt;return wt-(ct=Be-gt)<6&&(ct=ct-wt+33*Ke(wt+4,33)),-1===(dt=je(je(ct+1,33)-1,4))&&(dt=4),dt}(Be)}function fe(Be,Je){return Je<=6?31:Je<=11||u(Be)?30:29}function i(Be,Je){var ct,at,Qe,Bt,Ft,kt,gt=nt.length,lt=Be+621,wt=-14,dt=nt[0];if(Be<dt||Be>=nt[gt-1])throw new Error("Invalid Jalaali year "+Be);for(kt=1;kt<gt&&(at=(ct=nt[kt])-dt,!(Be<ct));kt+=1)wt=wt+8*Ke(at,33)+Ke(je(at,33),4),dt=ct;return wt=wt+8*Ke(Ft=Be-dt,33)+Ke(je(Ft,33)+3,4),4===je(at,33)&&at-Ft==4&&(wt+=1),Bt=20+wt-(Ke(lt,4)-Ke(3*(Ke(lt,100)+1),4)-150),Je?{gy:lt,march:Bt}:(at-Ft<6&&(Ft=Ft-at+33*Ke(at+4,33)),-1===(Qe=je(je(Ft+1,33)-1,4))&&(Qe=4),{leap:Qe,gy:lt,march:Bt})}function q(Be,Je,gt){var lt=i(Be,!0);return we(lt.gy,3,lt.march)+31*(Je-1)-Ke(Je,7)*(Je-7)+gt-1}function de(Be){var at,Je=Ve(Be).gy,gt=Je-621,lt=i(gt,!1);if((at=Be-we(Je,3,lt.march))>=0){if(at<=185)return{jy:gt,jm:1+Ke(at,31),jd:je(at,31)+1};at-=186}else gt-=1,at+=179,1===lt.leap&&(at+=1);return{jy:gt,jm:7+Ke(at,30),jd:je(at,30)+1}}function we(Be,Je,gt){var lt=Ke(1461*(Be+Ke(Je-8,6)+100100),4)+Ke(153*je(Je+9,12)+2,5)+gt-34840408;return lt-Ke(3*Ke(Be+100100+Ke(Je-8,6),100),4)+752}function Ve(Be){var Je,gt,lt,wt;return Je=(Je=4*Be+139361631)+4*Ke(3*Ke(4*Be+183187720,146097),4)-3908,gt=5*Ke(je(Je,1461),4)+308,lt=Ke(je(gt,153),5)+1,wt=je(Ke(gt,153),12)+1,{gy:Ke(Je,1461)-100100+Ke(8-wt,6),gm:wt,gd:lt}}function it(Be,Je,gt,lt,wt,dt,ct){var at=o(Be,Je,gt);return new Date(at.gy,at.gm-1,at.gd,lt||0,wt||0,dt||0,ct||0)}function Ke(Be,Je){return~~(Be/Je)}function je(Be,Je){return Be-~~(Be/Je)*Je}},9898:function(tn){tn.exports=function(){"use strict";var nt,N,o;function O(u,fe){if(nt)if(N){var Y="var sharedChunk = {}; ("+nt+")(sharedChunk); ("+N+")(sharedChunk);",i={};nt(i),o=fe(i),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}else N=fe;else nt=fe}return O(0,function(u){function fe(n,a){return n(a={exports:{}},a.exports),a.exports}var Y=i;function i(n,a,d,b){this.cx=3*n,this.bx=3*(d-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(b-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=b,this.p2x=d,this.p2y=b}i.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},i.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},i.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},i.prototype.solveCurveX=function(n,a){var d,b,T,E,L;for(void 0===a&&(a=1e-6),T=n,L=0;L<8;L++){if(E=this.sampleCurveX(T)-n,Math.abs(E)<a)return T;var H=this.sampleCurveDerivativeX(T);if(Math.abs(H)<1e-6)break;T-=E/H}if((T=n)<(d=0))return d;if(T>(b=1))return b;for(;d<b;){if(E=this.sampleCurveX(T),Math.abs(E-n)<a)return T;n>E?d=T:b=T,T=.5*(b-d)+d}return T},i.prototype.solve=function(n,a){return this.sampleCurveY(this.solveCurveX(n,a))};var q=de;function de(n,a){this.x=n,this.y=a}de.prototype={clone:function(){return new de(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,a){return this.clone()._rotateAround(n,a)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var a=n.x-this.x,d=n.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,a){return Math.atan2(this.x*a-this.y*n,this.x*n+this.y*a)},_matMult:function(n){var a=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=a,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var a=Math.cos(n),d=Math.sin(n),b=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=b,this},_rotateAround:function(n,a){var d=Math.cos(n),b=Math.sin(n),T=a.y+b*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-b*(this.y-a.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},de.convert=function(n){return n instanceof de?n:Array.isArray(n)?new de(n[0],n[1]):n};var we=typeof self<"u"?self:{},Ve=Math.pow(2,53)-1;function De(n,a,d,b){var T=new Y(n,a,d,b);return function(E){return T.solve(E)}}var it=De(.25,.1,.25,1);function Ke(n,a,d){return Math.min(d,Math.max(a,n))}function je(n,a,d){var b=d-a,T=((n-a)%b+b)%b+a;return T===a?d:T}function Be(n){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];for(var b=0,T=a;b<T.length;b+=1){var E=T[b];for(var L in E)n[L]=E[L]}return n}var Je=1;function gt(){return Je++}function lt(){return function n(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function wt(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function dt(n,a){n.forEach(function(d){a[d]&&(a[d]=a[d].bind(a))})}function ct(n,a){return-1!==n.indexOf(a,n.length-a.length)}function at(n,a,d){var b={};for(var T in n)b[T]=a.call(d||this,n[T],T,n);return b}function Qe(n,a,d){var b={};for(var T in n)a.call(d||this,n[T],T,n)&&(b[T]=n[T]);return b}function ht(n){return Array.isArray(n)?n.map(ht):"object"==typeof n&&n?at(n,ht):n}var Bt={};function Ft(n){Bt[n]||(typeof console<"u"&&console.warn(n),Bt[n]=!0)}function kt(n,a,d){return(d.y-n.y)*(a.x-n.x)>(a.y-n.y)*(d.x-n.x)}function bn(n){for(var a=0,d=0,b=n.length,T=b-1,E=void 0,L=void 0;d<b;T=d++)a+=((L=n[T]).x-(E=n[d]).x)*(E.y+L.y);return a}function Kt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Zn(n){var a={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(b,T,E,L){var H=E||L;return a[T]=!H||H.toLowerCase(),""}),a["max-age"]){var d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}var wn=null;function Vr(n){if(null==wn){var a=n.navigator?n.navigator.userAgent:null;wn=!!n.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return wn}function Hi(n){try{var a=we[n];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}var Vi,Hr,en,Ot,Jt=we.performance&&we.performance.now?we.performance.now.bind(we.performance):Date.now.bind(Date),ln=we.requestAnimationFrame||we.mozRequestAnimationFrame||we.webkitRequestAnimationFrame||we.msRequestAnimationFrame,fn=we.cancelAnimationFrame||we.mozCancelAnimationFrame||we.webkitCancelAnimationFrame||we.msCancelAnimationFrame,qt={now:Jt,frame:function(n){var a=ln(n);return{cancel:function(){return fn(a)}}},getImageData:function(n,a){void 0===a&&(a=0);var d=we.document.createElement("canvas"),b=d.getContext("2d");if(!b)throw new Error("failed to create canvas 2d context");return d.width=n.width,d.height=n.height,b.drawImage(n,0,0,n.width,n.height),b.getImageData(-a,-a,n.width+2*a,n.height+2*a)},resolveURL:function(n){return Vi||(Vi=we.document.createElement("a")),Vi.href=n,Vi.href},hardwareConcurrency:we.navigator&&we.navigator.hardwareConcurrency||4,get devicePixelRatio(){return we.devicePixelRatio},get prefersReducedMotion(){return!!we.matchMedia&&(null==Hr&&(Hr=we.matchMedia("(prefers-reduced-motion: reduce)")),Hr.matches)}},On={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Nn={supported:!1,testSupport:function(n){!Ui&&Ot&&(Yn?Gn(n):en=n)}},Ui=!1,Yn=!1;function Gn(n){var a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Ot),n.isContextLost())return;Nn.supported=!0}catch{}n.deleteTexture(a),Ui=!0}we.document&&((Ot=we.document.createElement("img")).onload=function(){en&&Gn(en),en=null,Yn=!0},Ot.onerror=function(){Ui=!0,en=null},Ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Xn="01",mi=function(n,a){this._transformRequestFn=n,this._customAccessToken=a,this._createSkuToken()};function pi(n){return 0===n.indexOf("mapbox:")}mi.prototype._createSkuToken=function(){var n=function(){for(var a="",d=0;d<10;d++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Xn,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt},mi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},mi.prototype.transformRequest=function(n,a){return this._transformRequestFn&&this._transformRequestFn(n,a)||{url:n}},mi.prototype.normalizeStyleURL=function(n,a){if(!pi(n))return n;var d=kn(n);return d.path="/styles/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||a)},mi.prototype.normalizeGlyphsURL=function(n,a){if(!pi(n))return n;var d=kn(n);return d.path="/fonts/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||a)},mi.prototype.normalizeSourceURL=function(n,a){if(!pi(n))return n;var d=kn(n);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),this._makeAPIURL(d,this._customAccessToken||a)},mi.prototype.normalizeSpriteURL=function(n,a,d,b){var T=kn(n);return pi(n)?(T.path="/styles/v1"+T.path+"/sprite"+a+d,this._makeAPIURL(T,this._customAccessToken||b)):(T.path+=""+a+d,ii(T))},mi.prototype.normalizeTileURL=function(n,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!pi(n))return n;var d=kn(n);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,(qt.devicePixelRatio>=2||512===a?"@2x":"")+(Nn.supported?".webp":"$1")),d.path=d.path.replace(/^.+\/v4\//,"/"),d.path="/v4"+d.path;var b=this._customAccessToken||function(T){for(var E=0,L=T;E<L.length;E+=1){var H=L[E].match(/^access_token=(.*)$/);if(H)return H[1]}return null}(d.params)||On.ACCESS_TOKEN;return On.REQUIRE_ACCESS_TOKEN&&b&&this._skuToken&&d.params.push("sku="+this._skuToken),this._makeAPIURL(d,b)},mi.prototype.canonicalizeTileURL=function(n,a){var d=kn(n);if(!d.path.match(/(^\/v4\/)/)||!d.path.match(/\.[\w]+$/))return n;var b="mapbox://tiles/";b+=d.path.replace("/v4/","");var T=d.params;return a&&(T=T.filter(function(E){return!E.match(/^access_token=/)})),T.length&&(b+="?"+T.join("&")),b},mi.prototype.canonicalizeTileset=function(n,a){for(var d=!!a&&pi(a),b=[],T=0,E=n.tiles||[];T<E.length;T+=1){var L=E[T];Pn(L)?b.push(this.canonicalizeTileURL(L,d)):b.push(L)}return b},mi.prototype._makeAPIURL=function(n,a){var d="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",b=kn(On.API_URL);if(n.protocol=b.protocol,n.authority=b.authority,"http"===n.protocol){var T=n.params.indexOf("secure");T>=0&&n.params.splice(T,1)}if("/"!==b.path&&(n.path=""+b.path+n.path),!On.REQUIRE_ACCESS_TOKEN)return ii(n);if(!(a=a||On.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+d);if("s"===a[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+d);return n.params=n.params.filter(function(E){return-1===E.indexOf("access_token")}),n.params.push("access_token="+a),ii(n)};var Mn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Pn(n){return Mn.test(n)}var mn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kn(n){var a=n.match(mn);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function ii(n){var a=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+a}function $n(n){if(!n)return null;var a=n.split(".");if(!a||3!==a.length)return null;try{return JSON.parse(decodeURIComponent(we.atob(a[1]).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var mr=function(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};mr.prototype.getStorageKey=function(n){var a,d=$n(On.ACCESS_TOKEN);return a=d&&d.u?we.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,function(b,T){return String.fromCharCode(Number("0x"+T))})):On.ACCESS_TOKEN||"",n?"mapbox.eventData."+n+":"+a:"mapbox.eventData:"+a},mr.prototype.fetchEventData=function(){var n=Hi("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(n)try{var b=we.localStorage.getItem(a);b&&(this.eventData=JSON.parse(b));var T=we.localStorage.getItem(d);T&&(this.anonId=T)}catch{Ft("Unable to read from LocalStorage")}},mr.prototype.saveEventData=function(){var n=Hi("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(n)try{we.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&we.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Ft("Unable to write to LocalStorage")}},mr.prototype.processRequests=function(n){},mr.prototype.postEvent=function(n,a,d,b){var T=this;if(On.EVENTS_URL){var E=kn(On.EVENTS_URL);E.params.push("access_token="+(b||On.ACCESS_TOKEN||""));var L={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Xn,userId:this.anonId},H=a?Be(L,a):L,ie={url:ii(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([H])};this.pendingRequest=Qt(ie,function(xe){T.pendingRequest=null,d(xe),T.saveEventData(),T.processRequests(b)})}},mr.prototype.queueRequest=function(n,a){this.queue.push(n),this.processRequests(a)};var gr,Mo,qi=function(n){function a(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.postMapLoadEvent=function(d,b,T,E){this.skuToken=T;var L=!(!E&&!On.ACCESS_TOKEN),H=Array.isArray(d)&&d.some(function(ie){return pi(ie)||Pn(ie)});On.EVENTS_URL&&L&&H&&this.queueRequest({id:b,timestamp:Date.now()},E)},a.prototype.processRequests=function(d){var b=this;if(!this.pendingRequest&&0!==this.queue.length){var T=this.queue.shift(),E=T.id,L=T.timestamp;E&&this.success[E]||(this.anonId||this.fetchEventData(),wt(this.anonId)||(this.anonId=lt()),this.postEvent(L,{skuToken:this.skuToken},function(H){H||E&&(b.success[E]=!0)},d))}},a}(mr),j=new(function(n){function a(d){n.call(this,"appUserTurnstile"),this._customAccessToken=d}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.postTurnstileEvent=function(d,b){On.EVENTS_URL&&On.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(T){return pi(T)||Pn(T)})&&this.queueRequest(Date.now(),b)},a.prototype.processRequests=function(d){var b=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var T=$n(On.ACCESS_TOKEN),E=T?T.u:On.ACCESS_TOKEN,L=E!==this.eventData.tokenU;wt(this.anonId)||(this.anonId=lt(),L=!0);var H=this.queue.shift();if(this.eventData.lastSuccess){var ie=new Date(this.eventData.lastSuccess),xe=new Date(H),Me=(H-this.eventData.lastSuccess)/864e5;L=L||Me>=1||Me<-1||ie.getDate()!==xe.getDate()}else L=!0;if(!L)return this.processRequests();this.postEvent(H,{"enabled.telemetry":!1},function(Ie){Ie||(b.eventData.lastSuccess=H,b.eventData.tokenU=E)},d)}},a}(mr)),Fe=j.postTurnstileEvent.bind(j),Yt=new qi,ut=Yt.postMapLoadEvent.bind(Yt),It=500,rt=50;function Vt(){we.caches&&!gr&&(gr=we.caches.open("mapbox-tiles"))}function di(n){var a=n.indexOf("?");return a<0?n:n.slice(0,a)}var hi,bi=1/0;function _r(){return null==hi&&(hi=we.OffscreenCanvas&&new we.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof we.createImageBitmap),hi}var pr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(pr);var wr,Gr,bo=function(n){function a(d,b,T){401===b&&Pn(T)&&(d+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,d),this.status=b,this.url=T,this.name=this.constructor.name,this.message=d}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},a}(Error),Yi=Kt()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===we.location.protocol?we.parent:we).location.href},ao=function(n,a){if(!(/^file:/.test(d=n.url)||/^file:/.test(Yi())&&!/^\w+:/.test(d))){if(we.fetch&&we.Request&&we.AbortController&&we.Request.prototype.hasOwnProperty("signal"))return function(b,T){var E,L=new we.AbortController,H=new we.Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,referrer:Yi(),signal:L.signal}),ie=!1,xe=!1,Me=(E=H.url).indexOf("sku=")>0&&Pn(E);"json"===b.type&&H.headers.set("Accept","application/json");var Ie=function($e,Oe,yt){if(!xe){if($e&&"SecurityError"!==$e.message&&Ft($e),Oe&&yt)return ze(Oe);var Et=Date.now();we.fetch(H).then(function(Dt){if(Dt.ok){var $t=Me?Dt.clone():null;return ze(Dt,$t,Et)}return T(new bo(Dt.statusText,Dt.status,b.url))}).catch(function(Dt){20!==Dt.code&&T(new Error(Dt.message))})}},ze=function($e,Oe,yt){("arrayBuffer"===b.type?$e.arrayBuffer():"json"===b.type?$e.json():$e.text()).then(function(Et){xe||(Oe&&yt&&function(Dt,$t,Wt){if(Vt(),gr){var on={status:$t.status,statusText:$t.statusText,headers:new we.Headers};$t.headers.forEach(function(An,Fn){return on.headers.set(Fn,An)});var pn=Zn($t.headers.get("Cache-Control")||"");pn["no-store"]||(pn["max-age"]&&on.headers.set("Expires",new Date(Wt+1e3*pn["max-age"]).toUTCString()),new Date(on.headers.get("Expires")).getTime()-Wt<42e4||function(An,Fn){if(void 0===Mo)try{new Response(new ReadableStream),Mo=!0}catch{Mo=!1}Mo?Fn(An.body):An.blob().then(Fn)}($t,function(An){var Fn=new we.Response(An,on);Vt(),gr&&gr.then(function(Vn){return Vn.put(di(Dt.url),Fn)}).catch(function(Vn){return Ft(Vn.message)})}))}}(H,Oe,yt),ie=!0,T(null,Et,$e.headers.get("Cache-Control"),$e.headers.get("Expires")))}).catch(function(Et){xe||T(new Error(Et.message))})};return Me?function($e,Oe){if(Vt(),!gr)return Oe(null);var yt=di($e.url);gr.then(function(Et){Et.match(yt).then(function(Dt){var $t=function(Wt){if(!Wt)return!1;var on=new Date(Wt.headers.get("Expires")||0),pn=Zn(Wt.headers.get("Cache-Control")||"");return on>Date.now()&&!pn["no-cache"]}(Dt);Et.delete(yt),$t&&Et.put(yt,Dt.clone()),Oe(null,Dt,$t)}).catch(Oe)}).catch(Oe)}(H,Ie):Ie(null,null),{cancel:function(){xe=!0,ie||L.abort()}}}(n,a);if(Kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,a,void 0,!0)}var d;return function(b,T){var E=new we.XMLHttpRequest;for(var L in E.open(b.method||"GET",b.url,!0),"arrayBuffer"===b.type&&(E.responseType="arraybuffer"),b.headers)E.setRequestHeader(L,b.headers[L]);return"json"===b.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===b.credentials,E.onerror=function(){T(new Error(E.statusText))},E.onload=function(){if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){var H=E.response;if("json"===b.type)try{H=JSON.parse(E.response)}catch(ie){return T(ie)}T(null,H,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else T(new bo(E.statusText,E.status,b.url))},E.send(b.body),{cancel:function(){return E.abort()}}}(n,a)},Zr=function(n,a){return ao(Be(n,{type:"arrayBuffer"}),a)},Qt=function(n,a){return ao(Be(n,{method:"POST"}),a)},K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";wr=[],Gr=0;var se=function(n,a){if(Nn.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Gr>=On.MAX_PARALLEL_IMAGE_REQUESTS){var d={requestParameters:n,callback:a,cancelled:!1,cancel:function(){this.cancelled=!0}};return wr.push(d),d}Gr++;var b=!1,T=function(){if(!b)for(b=!0,Gr--;wr.length&&Gr<On.MAX_PARALLEL_IMAGE_REQUESTS;){var L=wr.shift();L.cancelled||(L.cancel=se(L.requestParameters,L.callback).cancel)}},E=Zr(n,function(L,H,ie,xe){var Ie,ze;T(),L?a(L):H&&(_r()?(Ie=a,ze=new we.Blob([new Uint8Array(H)],{type:"image/png"}),we.createImageBitmap(ze).then(function($e){Ie(null,$e)}).catch(function($e){Ie(new Error("Could not load image because of "+$e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Me,Ie,ze,$e){var Oe=new we.Image,yt=we.URL;Oe.onload=function(){Ie(null,Oe),yt.revokeObjectURL(Oe.src),Oe.onload=null,we.requestAnimationFrame(function(){Oe.src=K})},Oe.onerror=function(){return Ie(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Et=new we.Blob([new Uint8Array(Me)],{type:"image/png"});Oe.cacheControl=ze,Oe.expires=$e,Oe.src=Me.byteLength?yt.createObjectURL(Et):K}(H,a,ie,xe))});return{cancel:function(){E.cancel(),T()}}};function he(n,a,d){d[n]&&-1!==d[n].indexOf(a)||(d[n]=d[n]||[],d[n].push(a))}function re(n,a,d){if(d&&d[n]){var b=d[n].indexOf(a);-1!==b&&d[n].splice(b,1)}}var _e=function(n,a){void 0===a&&(a={}),Be(this,a),this.type=n},Le=function(n){function a(d,b){void 0===b&&(b={}),n.call(this,"error",Be({error:d},b))}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a}(_e),Ze=function(){};Ze.prototype.on=function(n,a){return this._listeners=this._listeners||{},he(n,a,this._listeners),this},Ze.prototype.off=function(n,a){return re(n,a,this._listeners),re(n,a,this._oneTimeListeners),this},Ze.prototype.once=function(n,a){return this._oneTimeListeners=this._oneTimeListeners||{},he(n,a,this._oneTimeListeners),this},Ze.prototype.fire=function(n,a){"string"==typeof n&&(n=new _e(n,a||{}));var d=n.type;if(this.listens(d)){n.target=this;for(var b=0,T=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];b<T.length;b+=1)T[b].call(this,n);for(var E=0,L=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];E<L.length;E+=1){var H=L[E];re(d,H,this._oneTimeListeners),H.call(this,n)}var ie=this._eventedParent;ie&&(Be(n,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ie.fire(n))}else n instanceof Le&&console.error(n.error);return this},Ze.prototype.listens=function(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)},Ze.prototype.setEventedParent=function(n,a){return this._eventedParent=n,this._eventedParentData=a,this};var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ot=function(n,a,d,b){this.message=(n?n+": ":"")+d,b&&(this.identifier=b),null!=a&&a.__line__&&(this.line=a.__line__)};function Nt(n){var a=n.value;return a?[new ot(n.key,a,"constants have been deprecated as of v8")]:[]}function rn(n){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];for(var b=0,T=a;b<T.length;b+=1){var E=T[b];for(var L in E)n[L]=E[L]}return n}function dn(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function et(n){if(Array.isArray(n))return n.map(et);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var a={};for(var d in n)a[d]=et(n[d]);return a}return dn(n)}var tt=function(n){function a(d,b){n.call(this,b),this.message=b,this.key=d}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a}(Error),Ye=function(n,a){void 0===a&&(a=[]),this.parent=n,this.bindings={};for(var d=0,b=a;d<b.length;d+=1){var T=b[d];this.bindings[T[0]]=T[1]}};Ye.prototype.concat=function(n){return new Ye(this,n)},Ye.prototype.get=function(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(n+" not found in scope.")},Ye.prototype.has=function(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)};var bt={kind:"null"},mt={kind:"number"},cn={kind:"string"},xn={kind:"boolean"},In={kind:"color"},ai={kind:"object"},Bn={kind:"value"},Ni={kind:"collator"},ur={kind:"formatted"},Gi={kind:"resolvedImage"};function cr(n,a){return{kind:"array",itemType:n,N:a}}function Wi(n){if("array"===n.kind){var a=Wi(n.itemType);return"number"==typeof n.N?"array<"+a+", "+n.N+">":"value"===n.itemType.kind?"array":"array<"+a+">"}return n.kind}var xo=[bt,mt,cn,xn,In,ur,ai,cr(Bn),Gi];function At(n,a){if("error"===a.kind)return null;if("array"===n.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!At(n.itemType,a.itemType))&&("number"!=typeof n.N||n.N===a.N))return null}else{if(n.kind===a.kind)return null;if("value"===n.kind)for(var d=0,b=xo;d<b.length;d+=1)if(!At(b[d],a))return null}return"Expected "+Wi(n)+" but found "+Wi(a)+" instead."}function Ae(n,a){return a.some(function(d){return d.kind===n.kind})}function Te(n,a){return a.some(function(d){return"null"===d?null===n:"array"===d?Array.isArray(n):"object"===d?n&&!Array.isArray(n)&&"object"==typeof n:d===typeof n})}var Xe=fe(function(n,a){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function b(H){return(H=Math.round(H))<0?0:H>255?255:H}function T(H){return b("%"===H[H.length-1]?parseFloat(H)/100*255:parseInt(H))}function E(H){return(ie="%"===H[H.length-1]?parseFloat(H)/100:parseFloat(H))<0?0:ie>1?1:ie;var ie}function L(H,ie,xe){return xe<0?xe+=1:xe>1&&(xe-=1),6*xe<1?H+(ie-H)*xe*6:2*xe<1?ie:3*xe<2?H+(ie-H)*(2/3-xe)*6:H}try{a.parseCSSColor=function(H){var ie,xe=H.replace(/ /g,"").toLowerCase();if(xe in d)return d[xe].slice();if("#"===xe[0])return 4===xe.length?(ie=parseInt(xe.substr(1),16))>=0&&ie<=4095?[(3840&ie)>>4|(3840&ie)>>8,240&ie|(240&ie)>>4,15&ie|(15&ie)<<4,1]:null:7===xe.length&&(ie=parseInt(xe.substr(1),16))>=0&&ie<=16777215?[(16711680&ie)>>16,(65280&ie)>>8,255&ie,1]:null;var Me=xe.indexOf("("),Ie=xe.indexOf(")");if(-1!==Me&&Ie+1===xe.length){var ze=xe.substr(0,Me),$e=xe.substr(Me+1,Ie-(Me+1)).split(","),Oe=1;switch(ze){case"rgba":if(4!==$e.length)return null;Oe=E($e.pop());case"rgb":return 3!==$e.length?null:[T($e[0]),T($e[1]),T($e[2]),Oe];case"hsla":if(4!==$e.length)return null;Oe=E($e.pop());case"hsl":if(3!==$e.length)return null;var yt=(parseFloat($e[0])%360+360)%360/360,Et=E($e[1]),Dt=E($e[2]),$t=Dt<=.5?Dt*(Et+1):Dt+Et-Dt*Et,Wt=2*Dt-$t;return[b(255*L(Wt,$t,yt+1/3)),b(255*L(Wt,$t,yt)),b(255*L(Wt,$t,yt-1/3)),Oe];default:return null}}return null}}catch{}}).parseCSSColor,Ct=function(n,a,d,b){void 0===b&&(b=1),this.r=n,this.g=a,this.b=d,this.a=b};Ct.parse=function(n){if(n){if(n instanceof Ct)return n;if("string"==typeof n){var a=Xe(n);if(a)return new Ct(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}}},Ct.prototype.toString=function(){var n=this.toArray(),a=n[1],d=n[2],b=n[3];return"rgba("+Math.round(n[0])+","+Math.round(a)+","+Math.round(d)+","+b+")"},Ct.prototype.toArray=function(){var n=this.a;return 0===n?[0,0,0,0]:[255*this.r/n,255*this.g/n,255*this.b/n,n]},Ct.black=new Ct(0,0,0,1),Ct.white=new Ct(1,1,1,1),Ct.transparent=new Ct(0,0,0,0),Ct.red=new Ct(1,0,0,1);var St=function(n,a,d){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};St.prototype.compare=function(n,a){return this.collator.compare(n,a)},St.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Tn=function(n,a,d,b,T){this.text=n,this.image=a,this.scale=d,this.fontStack=b,this.textColor=T},Hn=function(n){this.sections=n};Hn.fromString=function(n){return new Hn([new Tn(n,null,null,null,null)])},Hn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(n){return 0!==n.text.length||n.image&&0!==n.image.name.length})},Hn.factory=function(n){return n instanceof Hn?n:Hn.fromString(n)},Hn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(n){return n.text}).join("")},Hn.prototype.serialize=function(){for(var n=["format"],a=0,d=this.sections;a<d.length;a+=1){var b=d[a];if(b.image)n.push(["image",b.image.name]);else{n.push(b.text);var T={};b.fontStack&&(T["text-font"]=["literal",b.fontStack.split(",")]),b.scale&&(T["font-scale"]=b.scale),b.textColor&&(T["text-color"]=["rgba"].concat(b.textColor.toArray())),n.push(T)}}return n};var ri=function(n){this.name=n.name,this.available=n.available};function gi(n,a,d,b){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof d&&d>=0&&d<=255?void 0===b||"number"==typeof b&&b>=0&&b<=1?null:"Invalid rgba value ["+[n,a,d,b].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof b?[n,a,d,b]:[n,a,d]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function xi(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof Ct||n instanceof St||n instanceof Hn||n instanceof ri)return!0;if(Array.isArray(n)){for(var a=0,d=n;a<d.length;a+=1)if(!xi(d[a]))return!1;return!0}if("object"==typeof n){for(var b in n)if(!xi(n[b]))return!1;return!0}return!1}function Sn(n){if(null===n)return bt;if("string"==typeof n)return cn;if("boolean"==typeof n)return xn;if("number"==typeof n)return mt;if(n instanceof Ct)return In;if(n instanceof St)return Ni;if(n instanceof Hn)return ur;if(n instanceof ri)return Gi;if(Array.isArray(n)){for(var a,d=n.length,b=0,T=n;b<T.length;b+=1){var E=Sn(T[b]);if(a){if(a===E)continue;a=Bn;break}a=E}return cr(a||Bn,d)}return ai}function ci(n){var a=typeof n;return null===n?"":"string"===a||"number"===a||"boolean"===a?String(n):n instanceof Ct||n instanceof Hn||n instanceof ri?n.toString():JSON.stringify(n)}ri.prototype.toString=function(){return this.name},ri.fromString=function(n){return n?new ri({name:n,available:!1}):null},ri.prototype.serialize=function(){return["image",this.name]};var Ri=function(n,a){this.type=n,this.value=a};Ri.parse=function(n,a){if(2!==n.length)return a.error("'literal' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(!xi(n[1]))return a.error("invalid value");var d=n[1],b=Sn(d),T=a.expectedType;return"array"!==b.kind||0!==b.N||!T||"array"!==T.kind||"number"==typeof T.N&&0!==T.N||(b=T),new Ri(b,d)},Ri.prototype.evaluate=function(){return this.value},Ri.prototype.eachChild=function(){},Ri.prototype.outputDefined=function(){return!0},Ri.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ct?["rgba"].concat(this.value.toArray()):this.value instanceof Hn?this.value.serialize():this.value};var Pi=function(n){this.name="ExpressionEvaluationError",this.message=n};Pi.prototype.toJSON=function(){return this.message};var yr={string:cn,number:mt,boolean:xn,object:ai},Xi=function(n,a){this.type=n,this.args=a};Xi.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var d,b=1,T=n[0];if("array"===T){var E,L;if(n.length>2){var H=n[1];if("string"!=typeof H||!(H in yr)||"object"===H)return a.error('The item type argument of "array" must be one of string, number, boolean',1);E=yr[H],b++}else E=Bn;if(n.length>3){if(null!==n[2]&&("number"!=typeof n[2]||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);L=n[2],b++}d=cr(E,L)}else d=yr[T];for(var ie=[];b<n.length;b++){var xe=a.parse(n[b],b,Bn);if(!xe)return null;ie.push(xe)}return new Xi(d,ie)},Xi.prototype.evaluate=function(n){for(var a=0;a<this.args.length;a++){var d=this.args[a].evaluate(n);if(!At(this.type,Sn(d)))return d;if(a===this.args.length-1)throw new Pi("Expected value to be of type "+Wi(this.type)+", but found "+Wi(Sn(d))+" instead.")}return null},Xi.prototype.eachChild=function(n){this.args.forEach(n)},Xi.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Xi.prototype.serialize=function(){var n=this.type,a=[n.kind];if("array"===n.kind){var d=n.itemType;if("string"===d.kind||"number"===d.kind||"boolean"===d.kind){a.push(d.kind);var b=n.N;("number"==typeof b||this.args.length>1)&&a.push(b)}}return a.concat(this.args.map(function(T){return T.serialize()}))};var Bo=function(n){this.type=ur,this.sections=n};Bo.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var d=n[1];if(!Array.isArray(d)&&"object"==typeof d)return a.error("First argument must be an image or text section.");for(var b=[],T=!1,E=1;E<=n.length-1;++E){var L=n[E];if(T&&"object"==typeof L&&!Array.isArray(L)){T=!1;var H=null;if(L["font-scale"]&&!(H=a.parse(L["font-scale"],1,mt)))return null;var ie=null;if(L["text-font"]&&!(ie=a.parse(L["text-font"],1,cr(cn))))return null;var xe=null;if(L["text-color"]&&!(xe=a.parse(L["text-color"],1,In)))return null;var Me=b[b.length-1];Me.scale=H,Me.font=ie,Me.textColor=xe}else{var Ie=a.parse(n[E],1,Bn);if(!Ie)return null;var ze=Ie.type.kind;if("string"!==ze&&"value"!==ze&&"null"!==ze&&"resolvedImage"!==ze)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,b.push({content:Ie,scale:null,font:null,textColor:null})}}return new Bo(b)},Bo.prototype.evaluate=function(n){return new Hn(this.sections.map(function(a){var d=a.content.evaluate(n);return Sn(d)===Gi?new Tn("",d,null,null,null):new Tn(ci(d),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))},Bo.prototype.eachChild=function(n){for(var a=0,d=this.sections;a<d.length;a+=1){var b=d[a];n(b.content),b.scale&&n(b.scale),b.font&&n(b.font),b.textColor&&n(b.textColor)}},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){for(var n=["format"],a=0,d=this.sections;a<d.length;a+=1){var b=d[a];n.push(b.content.serialize());var T={};b.scale&&(T["font-scale"]=b.scale.serialize()),b.font&&(T["text-font"]=b.font.serialize()),b.textColor&&(T["text-color"]=b.textColor.serialize()),n.push(T)}return n};var Rr=function(n){this.type=Gi,this.input=n};Rr.parse=function(n,a){if(2!==n.length)return a.error("Expected two arguments.");var d=a.parse(n[1],1,cn);return d?new Rr(d):a.error("No image name provided.")},Rr.prototype.evaluate=function(n){var a=this.input.evaluate(n),d=ri.fromString(a);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(a)>-1),d},Rr.prototype.eachChild=function(n){n(this.input)},Rr.prototype.outputDefined=function(){return!1},Rr.prototype.serialize=function(){return["image",this.input.serialize()]};var Ga={"to-boolean":xn,"to-color":In,"to-number":mt,"to-string":cn},ds=function(n,a){this.type=n,this.args=a};ds.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var d=n[0];if(("to-boolean"===d||"to-string"===d)&&2!==n.length)return a.error("Expected one argument.");for(var b=Ga[d],T=[],E=1;E<n.length;E++){var L=a.parse(n[E],E,Bn);if(!L)return null;T.push(L)}return new ds(b,T)},ds.prototype.evaluate=function(n){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(n));if("color"===this.type.kind){for(var a,d,b=0,T=this.args;b<T.length;b+=1){if(d=null,(a=T[b].evaluate(n))instanceof Ct)return a;if("string"==typeof a){var E=n.parseColor(a);if(E)return E}else if(Array.isArray(a)&&!(d=a.length<3||a.length>4?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":gi(a[0],a[1],a[2],a[3])))return new Ct(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Pi(d||"Could not parse color from value '"+("string"==typeof a?a:String(JSON.stringify(a)))+"'")}if("number"===this.type.kind){for(var L=null,H=0,ie=this.args;H<ie.length;H+=1){if(null===(L=ie[H].evaluate(n)))return 0;var xe=Number(L);if(!isNaN(xe))return xe}throw new Pi("Could not convert "+JSON.stringify(L)+" to number.")}return"formatted"===this.type.kind?Hn.fromString(ci(this.args[0].evaluate(n))):"resolvedImage"===this.type.kind?ri.fromString(ci(this.args[0].evaluate(n))):ci(this.args[0].evaluate(n))},ds.prototype.eachChild=function(n){this.args.forEach(n)},ds.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},ds.prototype.serialize=function(){if("formatted"===this.type.kind)return new Bo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Rr(this.args[0]).serialize();var n=["to-"+this.type.kind];return this.eachChild(function(a){n.push(a.serialize())}),n};var ar=["Unknown","Point","LineString","Polygon"],xa=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};xa.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},xa.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ar[this.feature.type]:this.feature.type:null},xa.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},xa.prototype.canonicalID=function(){return this.canonical},xa.prototype.properties=function(){return this.feature&&this.feature.properties||{}},xa.prototype.parseColor=function(n){var a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=Ct.parse(n)),a};var Oo=function(n,a,d,b){this.name=n,this.type=a,this._evaluate=d,this.args=b};Oo.prototype.evaluate=function(n){return this._evaluate(n,this.args)},Oo.prototype.eachChild=function(n){this.args.forEach(n)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(n){return n.serialize()}))},Oo.parse=function(n,a){var d,b=n[0],T=Oo.definitions[b];if(!T)return a.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0);for(var E=Array.isArray(T)?T[0]:T.type,L=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,H=L.filter(function(Oi){var Kn=Oi[0];return!Array.isArray(Kn)||Kn.length===n.length-1}),ie=null,xe=0,Me=H;xe<Me.length;xe+=1){var Ie=Me[xe],ze=Ie[0],$e=Ie[1];ie=new xs(a.registry,a.path,null,a.scope);for(var Oe=[],yt=!1,Et=1;Et<n.length;Et++){var Dt=n[Et],$t=Array.isArray(ze)?ze[Et-1]:ze.type,Wt=ie.parse(Dt,1+Oe.length,$t);if(!Wt){yt=!0;break}Oe.push(Wt)}if(!yt)if(Array.isArray(ze)&&ze.length!==Oe.length)ie.error("Expected "+ze.length+" arguments, but found "+Oe.length+" instead.");else{for(var on=0;on<Oe.length;on++){var pn=Array.isArray(ze)?ze[on]:ze.type,An=Oe[on];ie.concat(on+1).checkSubtype(pn,An.type)}if(0===ie.errors.length)return new Oo(b,E,$e,Oe)}}if(1===H.length)(d=a.errors).push.apply(d,ie.errors);else{for(var Fn=(H.length?H:L).map(function(Oi){var Kn;return Kn=Oi[0],Array.isArray(Kn)?"("+Kn.map(Wi).join(", ")+")":"("+Wi(Kn.type)+"...)"}).join(" | "),Vn=[],Ai=1;Ai<n.length;Ai++){var si=a.parse(n[Ai],1+Vn.length);if(!si)return null;Vn.push(Wi(si.type))}a.error("Expected arguments of type "+Fn+", but found ("+Vn.join(", ")+") instead.")}return null},Oo.register=function(n,a){for(var d in Oo.definitions=a,a)n[d]=Oo};var sa=function(n,a,d){this.type=Ni,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=a};function mo(n,a){n[0]=Math.min(n[0],a[0]),n[1]=Math.min(n[1],a[1]),n[2]=Math.max(n[2],a[0]),n[3]=Math.max(n[3],a[1])}function Po(n,a){return!(n[0]<=a[0]||n[2]>=a[2]||n[1]<=a[1]||n[3]>=a[3])}function wa(n,a){var d=(180+n[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,T=Math.pow(2,a.z);return[Math.round(d*T*8192),Math.round(b*T*8192)]}function Za(n,a,d){return a[1]>n[1]!=d[1]>n[1]&&n[0]<(d[0]-a[0])*(n[1]-a[1])/(d[1]-a[1])+a[0]}function Uo(n,a){for(var d,b,T,E,L,H,ie,xe=!1,Me=0,Ie=a.length;Me<Ie;Me++)for(var ze=a[Me],$e=0,Oe=ze.length;$e<Oe-1;$e++){if((E=(d=n)[0]-(b=ze[$e])[0])*(ie=d[1]-(T=ze[$e+1])[1])-(H=d[0]-T[0])*(L=d[1]-b[1])==0&&E*H<=0&&L*ie<=0)return!1;Za(n,ze[$e],ze[$e+1])&&(xe=!xe)}return xe}function Ia(n,a){for(var d=0;d<a.length;d++)if(Uo(n,a[d]))return!0;return!1}function Iu(n,a,d,b){var T=b[0]-d[0],E=b[1]-d[1],L=(n[0]-d[0])*E-T*(n[1]-d[1]),H=(a[0]-d[0])*E-T*(a[1]-d[1]);return L>0&&H<0||L<0&&H>0}function lo(n,a,d){for(var b=0,T=d;b<T.length;b+=1)for(var E=T[b],L=0;L<E.length-1;++L)if((Ie=[(Me=E[L+1])[0]-(xe=E[L])[0],Me[1]-xe[1]])[0]*(ze=[(ie=a)[0]-(H=n)[0],ie[1]-H[1]])[1]-Ie[1]*ze[0]!=0&&Iu(H,ie,xe,Me)&&Iu(xe,Me,H,ie))return!0;var H,ie,xe,Me,Ie,ze;return!1}function fl(n,a){for(var d=0;d<n.length;++d)if(!Uo(n[d],a))return!1;for(var b=0;b<n.length-1;++b)if(lo(n[b],n[b+1],a))return!1;return!0}function zo(n,a){for(var d=0;d<a.length;d++)if(fl(n,a[d]))return!0;return!1}function Oa(n,a,d){for(var b=[],T=0;T<n.length;T++){for(var E=[],L=0;L<n[T].length;L++){var H=wa(n[T][L],d);mo(a,H),E.push(H)}b.push(E)}return b}function Ls(n,a,d){for(var b=[],T=0;T<n.length;T++){var E=Oa(n[T],a,d);b.push(E)}return b}function Bs(n,a,d,b){if(n[0]<d[0]||n[0]>d[2]){var T=.5*b,E=n[0]-d[0]>T?-b:d[0]-n[0]>T?b:0;0===E&&(E=n[0]-d[2]>T?-b:d[2]-n[0]>T?b:0),n[0]+=E}mo(a,n)}function Yo(n,a,d,b){for(var T=8192*Math.pow(2,b.z),E=[8192*b.x,8192*b.y],L=[],H=0,ie=n;H<ie.length;H+=1)for(var xe=0,Me=ie[H];xe<Me.length;xe+=1){var Ie=Me[xe],ze=[Ie.x+E[0],Ie.y+E[1]];Bs(ze,a,d,T),L.push(ze)}return L}function Go(n,a,d,b){for(var T,E=8192*Math.pow(2,b.z),L=[8192*b.x,8192*b.y],H=[],ie=0,xe=n;ie<xe.length;ie+=1){for(var Me=[],Ie=0,ze=xe[ie];Ie<ze.length;Ie+=1){var $e=ze[Ie],Oe=[$e.x+L[0],$e.y+L[1]];mo(a,Oe),Me.push(Oe)}H.push(Me)}if(a[2]-a[0]<=E/2){(T=a)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(var yt=0,Et=H;yt<Et.length;yt+=1)for(var Dt=0,$t=Et[yt];Dt<$t.length;Dt+=1)Bs($t[Dt],a,d,E)}return H}sa.parse=function(n,a){if(2!==n.length)return a.error("Expected one argument.");var d=n[1];if("object"!=typeof d||Array.isArray(d))return a.error("Collator options argument must be an object.");var b=a.parse(void 0!==d["case-sensitive"]&&d["case-sensitive"],1,xn);if(!b)return null;var T=a.parse(void 0!==d["diacritic-sensitive"]&&d["diacritic-sensitive"],1,xn);if(!T)return null;var E=null;return d.locale&&!(E=a.parse(d.locale,1,cn))?null:new sa(b,T,E)},sa.prototype.evaluate=function(n){return new St(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)},sa.prototype.eachChild=function(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)},sa.prototype.outputDefined=function(){return!1},sa.prototype.serialize=function(){var n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]};var Us=function(n,a){this.type=xn,this.geojson=n,this.geometries=a};function uo(n){if(n instanceof Oo&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof Us)return!1;var a=!0;return n.eachChild(function(d){a&&!uo(d)&&(a=!1)}),a}function go(n){if(n instanceof Oo&&"feature-state"===n.name)return!1;var a=!0;return n.eachChild(function(d){a&&!go(d)&&(a=!1)}),a}function vs(n,a){if(n instanceof Oo&&a.indexOf(n.name)>=0)return!1;var d=!0;return n.eachChild(function(b){d&&!vs(b,a)&&(d=!1)}),d}Us.parse=function(n,a){if(2!==n.length)return a.error("'within' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(xi(n[1])){var d=n[1];if("FeatureCollection"===d.type)for(var b=0;b<d.features.length;++b){var T=d.features[b].geometry.type;if("Polygon"===T||"MultiPolygon"===T)return new Us(d,d.features[b].geometry)}else if("Feature"===d.type){var E=d.geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new Us(d,d.geometry)}else if("Polygon"===d.type||"MultiPolygon"===d.type)return new Us(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Us.prototype.evaluate=function(n){if(null!=n.geometry()&&null!=n.canonicalID()){if("Point"===n.geometryType())return function(a,d){var b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if("Polygon"===d.type){var L=Oa(d.coordinates,T,E),H=Yo(a.geometry(),b,T,E);if(!Po(b,T))return!1;for(var ie=0,xe=H;ie<xe.length;ie+=1)if(!Uo(xe[ie],L))return!1}if("MultiPolygon"===d.type){var Me=Ls(d.coordinates,T,E),Ie=Yo(a.geometry(),b,T,E);if(!Po(b,T))return!1;for(var ze=0,$e=Ie;ze<$e.length;ze+=1)if(!Ia($e[ze],Me))return!1}return!0}(n,this.geometries);if("LineString"===n.geometryType())return function(a,d){var b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if("Polygon"===d.type){var L=Oa(d.coordinates,T,E),H=Go(a.geometry(),b,T,E);if(!Po(b,T))return!1;for(var ie=0,xe=H;ie<xe.length;ie+=1)if(!fl(xe[ie],L))return!1}if("MultiPolygon"===d.type){var Me=Ls(d.coordinates,T,E),Ie=Go(a.geometry(),b,T,E);if(!Po(b,T))return!1;for(var ze=0,$e=Ie;ze<$e.length;ze+=1)if(!zo($e[ze],Me))return!1}return!0}(n,this.geometries)}return!1},Us.prototype.eachChild=function(){},Us.prototype.outputDefined=function(){return!0},Us.prototype.serialize=function(){return["within",this.geojson]};var bs=function(n,a){this.type=a.type,this.name=n,this.boundExpression=a};bs.parse=function(n,a){if(2!==n.length||"string"!=typeof n[1])return a.error("'var' expression requires exactly one string literal argument.");var d=n[1];return a.scope.has(d)?new bs(d,a.scope.get(d)):a.error('Unknown variable "'+d+'". Make sure "'+d+'" has been bound in an enclosing "let" expression before using it.',1)},bs.prototype.evaluate=function(n){return this.boundExpression.evaluate(n)},bs.prototype.eachChild=function(){},bs.prototype.outputDefined=function(){return!1},bs.prototype.serialize=function(){return["var",this.name]};var xs=function(n,a,d,b,T){void 0===a&&(a=[]),void 0===b&&(b=new Ye),void 0===T&&(T=[]),this.registry=n,this.path=a,this.key=a.map(function(E){return"["+E+"]"}).join(""),this.scope=b,this.errors=T,this.expectedType=d};function ko(n,a){for(var d,b=n.length-1,T=0,E=b,L=0;T<=E;)if((d=n[L=Math.floor((T+E)/2)])<=a){if(L===b||a<n[L+1])return L;T=L+1}else{if(!(d>a))throw new Pi("Input is not a number.");E=L-1}return 0}xs.prototype.parse=function(n,a,d,b,T){return void 0===T&&(T={}),a?this.concat(a,d,b)._parse(n,T):this._parse(n,T)},xs.prototype._parse=function(n,a){function d(xe,Me,Ie){return"assert"===Ie?new Xi(Me,[xe]):"coerce"===Ie?new ds(Me,[xe]):xe}if(null!==n&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n||(n=["literal",n]),Array.isArray(n)){if(0===n.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var b=n[0];if("string"!=typeof b)return this.error("Expression name must be a string, but found "+typeof b+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var T=this.registry[b];if(T){var E=T.parse(n,this);if(!E)return null;if(this.expectedType){var L=this.expectedType,H=E.type;if("string"!==L.kind&&"number"!==L.kind&&"boolean"!==L.kind&&"object"!==L.kind&&"array"!==L.kind||"value"!==H.kind)if("color"!==L.kind&&"formatted"!==L.kind&&"resolvedImage"!==L.kind||"value"!==H.kind&&"string"!==H.kind){if(this.checkSubtype(L,H))return null}else E=d(E,L,a.typeAnnotation||"coerce");else E=d(E,L,a.typeAnnotation||"assert")}if(!(E instanceof Ri)&&"resolvedImage"!==E.type.kind&&function xe(Me){if(Me instanceof bs)return xe(Me.boundExpression);if(Me instanceof Oo&&"error"===Me.name||Me instanceof sa||Me instanceof Us)return!1;var Ie=Me instanceof ds||Me instanceof Xi,ze=!0;return Me.eachChild(function($e){ze=Ie?ze&&xe($e):ze&&$e instanceof Ri}),!!ze&&uo(Me)&&vs(Me,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(E)){var ie=new xa;try{E=new Ri(E.type,E.evaluate(ie))}catch(xe){return this.error(xe.message),null}}return E}return this.error('Unknown expression "'+b+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===n?"'undefined' value invalid. Use null instead.":"object"==typeof n?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof n+" instead.")},xs.prototype.concat=function(n,a,d){var b="number"==typeof n?this.path.concat(n):this.path,T=d?this.scope.concat(d):this.scope;return new xs(this.registry,b,a||null,T,this.errors)},xs.prototype.error=function(n){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];var b=""+this.key+a.map(function(T){return"["+T+"]"}).join("");this.errors.push(new tt(b,n))},xs.prototype.checkSubtype=function(n,a){var d=At(n,a);return d&&this.error(d),d};var Zo=function(n,a,d){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(var b=0,T=d;b<T.length;b+=1){var E=T[b],L=E[1];this.labels.push(E[0]),this.outputs.push(L)}};function to(n,a,d){return n*(1-d)+a*d}Zo.parse=function(n,a){if(n.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");var d=a.parse(n[1],1,mt);if(!d)return null;var b=[],T=null;a.expectedType&&"value"!==a.expectedType.kind&&(T=a.expectedType);for(var E=1;E<n.length;E+=2){var L=1===E?-1/0:n[E],H=n[E+1],ie=E,xe=E+1;if("number"!=typeof L)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(b.length&&b[b.length-1][0]>=L)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);var Me=a.parse(H,xe,T);if(!Me)return null;T=T||Me.type,b.push([L,Me])}return new Zo(T,d,b)},Zo.prototype.evaluate=function(n){var a=this.labels,d=this.outputs;if(1===a.length)return d[0].evaluate(n);var b=this.input.evaluate(n);if(b<=a[0])return d[0].evaluate(n);var T=a.length;return b>=a[T-1]?d[T-1].evaluate(n):d[ko(a,b)].evaluate(n)},Zo.prototype.eachChild=function(n){n(this.input);for(var a=0,d=this.outputs;a<d.length;a+=1)n(d[a])},Zo.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},Zo.prototype.serialize=function(){for(var n=["step",this.input.serialize()],a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n};var hs=Object.freeze({__proto__:null,number:to,color:function(n,a,d){return new Ct(to(n.r,a.r,d),to(n.g,a.g,d),to(n.b,a.b,d),to(n.a,a.a,d))},array:function(n,a,d){return n.map(function(b,T){return to(b,a[T],d)})}}),Ll=6/29*3*(6/29),ml=Math.PI/180,aa=180/Math.PI;function la(n){return n>.008856451679035631?Math.pow(n,1/3):n/Ll+4/29}function ql(n){return n>6/29?n*n*n:Ll*(n-4/29)}function Ou(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function du(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function hu(n){var a=du(n.r),d=du(n.g),b=du(n.b),T=la((.4124564*a+.3575761*d+.1804375*b)/.95047),E=la((.2126729*a+.7151522*d+.072175*b)/1);return{l:116*E-16,a:500*(T-E),b:200*(E-la((.0193339*a+.119192*d+.9503041*b)/1.08883)),alpha:n.a}}function _c(n){var a=(n.l+16)/116,d=isNaN(n.a)?a:a+n.a/500,b=isNaN(n.b)?a:a-n.b/200;return a=1*ql(a),d=.95047*ql(d),b=1.08883*ql(b),new Ct(Ou(3.2404542*d-1.5371385*a-.4985314*b),Ou(-.969266*d+1.8760108*a+.041556*b),Ou(.0556434*d-.2040259*a+1.0572252*b),n.alpha)}function ic(n,a,d){var b=a-n;return n+d*(b>180||b<-180?b-360*Math.round(b/360):b)}var pu={forward:hu,reverse:_c,interpolate:function(n,a,d){return{l:to(n.l,a.l,d),a:to(n.a,a.a,d),b:to(n.b,a.b,d),alpha:to(n.alpha,a.alpha,d)}}},Pu={forward:function(n){var a=hu(n),d=a.l,b=a.a,T=a.b,E=Math.atan2(T,b)*aa;return{h:E<0?E+360:E,c:Math.sqrt(b*b+T*T),l:d,alpha:n.a}},reverse:function(n){var a=n.h*ml,d=n.c;return _c({l:n.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:n.alpha})},interpolate:function(n,a,d){return{h:ic(n.h,a.h,d),c:to(n.c,a.c,d),l:to(n.l,a.l,d),alpha:to(n.alpha,a.alpha,d)}}},Jl=Object.freeze({__proto__:null,lab:pu,hcl:Pu}),qr=function(n,a,d,b,T){this.type=n,this.operator=a,this.interpolation=d,this.input=b,this.labels=[],this.outputs=[];for(var E=0,L=T;E<L.length;E+=1){var H=L[E],ie=H[1];this.labels.push(H[0]),this.outputs.push(ie)}};function ua(n,a,d,b){var T=b-d,E=n-d;return 0===T?0:1===a?E/T:(Math.pow(a,E)-1)/(Math.pow(a,T)-1)}qr.interpolationFactor=function(n,a,d,b){var T=0;if("exponential"===n.name)T=ua(a,n.base,d,b);else if("linear"===n.name)T=ua(a,1,d,b);else if("cubic-bezier"===n.name){var E=n.controlPoints;T=new Y(E[0],E[1],E[2],E[3]).solve(ua(a,1,d,b))}return T},qr.parse=function(n,a){var d=n[0],b=n[1],T=n[2],E=n.slice(3);if(!Array.isArray(b)||0===b.length)return a.error("Expected an interpolation type expression.",1);if("linear"===b[0])b={name:"linear"};else if("exponential"===b[0]){var L=b[1];if("number"!=typeof L)return a.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:L}}else{if("cubic-bezier"!==b[0])return a.error("Unknown interpolation type "+String(b[0]),1,0);var H=b.slice(1);if(4!==H.length||H.some(function(Et){return"number"!=typeof Et||Et<0||Et>1}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:H}}if(n.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(!(T=a.parse(T,2,mt)))return null;var ie=[],xe=null;"interpolate-hcl"===d||"interpolate-lab"===d?xe=In:a.expectedType&&"value"!==a.expectedType.kind&&(xe=a.expectedType);for(var Me=0;Me<E.length;Me+=2){var Ie=E[Me],ze=E[Me+1],$e=Me+3,Oe=Me+4;if("number"!=typeof Ie)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$e);if(ie.length&&ie[ie.length-1][0]>=Ie)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$e);var yt=a.parse(ze,Oe,xe);if(!yt)return null;xe=xe||yt.type,ie.push([Ie,yt])}return"number"===xe.kind||"color"===xe.kind||"array"===xe.kind&&"number"===xe.itemType.kind&&"number"==typeof xe.N?new qr(xe,d,b,T,ie):a.error("Type "+Wi(xe)+" is not interpolatable.")},qr.prototype.evaluate=function(n){var a=this.labels,d=this.outputs;if(1===a.length)return d[0].evaluate(n);var b=this.input.evaluate(n);if(b<=a[0])return d[0].evaluate(n);var T=a.length;if(b>=a[T-1])return d[T-1].evaluate(n);var E=ko(a,b),L=qr.interpolationFactor(this.interpolation,b,a[E],a[E+1]),H=d[E].evaluate(n),ie=d[E+1].evaluate(n);return"interpolate"===this.operator?hs[this.type.kind.toLowerCase()](H,ie,L):"interpolate-hcl"===this.operator?Pu.reverse(Pu.interpolate(Pu.forward(H),Pu.forward(ie),L)):pu.reverse(pu.interpolate(pu.forward(H),pu.forward(ie),L))},qr.prototype.eachChild=function(n){n(this.input);for(var a=0,d=this.outputs;a<d.length;a+=1)n(d[a])},qr.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},qr.prototype.serialize=function(){var n;n="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var a=[this.operator,n,this.input.serialize()],d=0;d<this.labels.length;d++)a.push(this.labels[d],this.outputs[d].serialize());return a};var gl=function(n,a){this.type=n,this.args=a};gl.parse=function(n,a){if(n.length<2)return a.error("Expectected at least one argument.");var d=null,b=a.expectedType;b&&"value"!==b.kind&&(d=b);for(var T=[],E=0,L=n.slice(1);E<L.length;E+=1){var H=a.parse(L[E],1+T.length,d,void 0,{typeAnnotation:"omit"});if(!H)return null;d=d||H.type,T.push(H)}var ie=b&&T.some(function(xe){return At(b,xe.type)});return new gl(ie?Bn:d,T)},gl.prototype.evaluate=function(n){for(var a,d=null,b=0,T=0,E=this.args;T<E.length&&(b++,(d=E[T].evaluate(n))&&d instanceof ri&&!d.available&&(a||(a=d.name),d=null,b===this.args.length&&(d=a)),null===d);T+=1);return d},gl.prototype.eachChild=function(n){this.args.forEach(n)},gl.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},gl.prototype.serialize=function(){var n=["coalesce"];return this.eachChild(function(a){n.push(a.serialize())}),n};var Wl=function(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a};Wl.prototype.evaluate=function(n){return this.result.evaluate(n)},Wl.prototype.eachChild=function(n){for(var a=0,d=this.bindings;a<d.length;a+=1)n(d[a][1]);n(this.result)},Wl.parse=function(n,a){if(n.length<4)return a.error("Expected at least 3 arguments, but found "+(n.length-1)+" instead.");for(var d=[],b=1;b<n.length-1;b+=2){var T=n[b];if("string"!=typeof T)return a.error("Expected string, but found "+typeof T+" instead.",b);if(/[^a-zA-Z0-9_]/.test(T))return a.error("Variable names must contain only alphanumeric characters or '_'.",b);var E=a.parse(n[b+1],b+1);if(!E)return null;d.push([T,E])}var L=a.parse(n[n.length-1],n.length-1,a.expectedType,d);return L?new Wl(d,L):null},Wl.prototype.outputDefined=function(){return this.result.outputDefined()},Wl.prototype.serialize=function(){for(var n=["let"],a=0,d=this.bindings;a<d.length;a+=1){var b=d[a];n.push(b[0],b[1].serialize())}return n.push(this.result.serialize()),n};var Ca=function(n,a,d){this.type=n,this.index=a,this.input=d};Ca.parse=function(n,a){if(3!==n.length)return a.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var d=a.parse(n[1],1,mt),b=a.parse(n[2],2,cr(a.expectedType||Bn));return d&&b?new Ca(b.type.itemType,d,b):null},Ca.prototype.evaluate=function(n){var a=this.index.evaluate(n),d=this.input.evaluate(n);if(a<0)throw new Pi("Array index out of bounds: "+a+" < 0.");if(a>=d.length)throw new Pi("Array index out of bounds: "+a+" > "+(d.length-1)+".");if(a!==Math.floor(a))throw new Pi("Array index must be an integer, but found "+a+" instead.");return d[a]},Ca.prototype.eachChild=function(n){n(this.index),n(this.input)},Ca.prototype.outputDefined=function(){return!1},Ca.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Js=function(n,a){this.type=xn,this.needle=n,this.haystack=a};Js.parse=function(n,a){if(3!==n.length)return a.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var d=a.parse(n[1],1,Bn),b=a.parse(n[2],2,Bn);return d&&b?Ae(d.type,[xn,cn,mt,bt,Bn])?new Js(d,b):a.error("Expected first argument to be of type boolean, string, number or null, but found "+Wi(d.type)+" instead"):null},Js.prototype.evaluate=function(n){var a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!Te(a,["boolean","string","number","null"]))throw new Pi("Expected first argument to be of type boolean, string, number or null, but found "+Wi(Sn(a))+" instead.");if(!Te(d,["string","array"]))throw new Pi("Expected second argument to be of type array or string, but found "+Wi(Sn(d))+" instead.");return d.indexOf(a)>=0},Js.prototype.eachChild=function(n){n(this.needle),n(this.haystack)},Js.prototype.outputDefined=function(){return!0},Js.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Pa=function(n,a,d){this.type=mt,this.needle=n,this.haystack=a,this.fromIndex=d};Pa.parse=function(n,a){if(n.length<=2||n.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var d=a.parse(n[1],1,Bn),b=a.parse(n[2],2,Bn);if(!d||!b)return null;if(!Ae(d.type,[xn,cn,mt,bt,Bn]))return a.error("Expected first argument to be of type boolean, string, number or null, but found "+Wi(d.type)+" instead");if(4===n.length){var T=a.parse(n[3],3,mt);return T?new Pa(d,b,T):null}return new Pa(d,b)},Pa.prototype.evaluate=function(n){var a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!Te(a,["boolean","string","number","null"]))throw new Pi("Expected first argument to be of type boolean, string, number or null, but found "+Wi(Sn(a))+" instead.");if(!Te(d,["string","array"]))throw new Pi("Expected second argument to be of type array or string, but found "+Wi(Sn(d))+" instead.");if(this.fromIndex){var b=this.fromIndex.evaluate(n);return d.indexOf(a,b)}return d.indexOf(a)},Pa.prototype.eachChild=function(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)},Pa.prototype.outputDefined=function(){return!1},Pa.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ta=function(n,a,d,b,T,E){this.inputType=n,this.type=a,this.input=d,this.cases=b,this.outputs=T,this.otherwise=E};Ta.parse=function(n,a){if(n.length<5)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if(n.length%2!=1)return a.error("Expected an even number of arguments.");var d,b;a.expectedType&&"value"!==a.expectedType.kind&&(b=a.expectedType);for(var T={},E=[],L=2;L<n.length-1;L+=2){var H=n[L],ie=n[L+1];Array.isArray(H)||(H=[H]);var xe=a.concat(L);if(0===H.length)return xe.error("Expected at least one branch label.");for(var Me=0,Ie=H;Me<Ie.length;Me+=1){var ze=Ie[Me];if("number"!=typeof ze&&"string"!=typeof ze)return xe.error("Branch labels must be numbers or strings.");if("number"==typeof ze&&Math.abs(ze)>Number.MAX_SAFE_INTEGER)return xe.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof ze&&Math.floor(ze)!==ze)return xe.error("Numeric branch labels must be integer values.");if(d){if(xe.checkSubtype(d,Sn(ze)))return null}else d=Sn(ze);if(void 0!==T[String(ze)])return xe.error("Branch labels must be unique.");T[String(ze)]=E.length}var $e=a.parse(ie,L,b);if(!$e)return null;b=b||$e.type,E.push($e)}var Oe=a.parse(n[1],1,Bn);if(!Oe)return null;var yt=a.parse(n[n.length-1],n.length-1,b);return yt?"value"!==Oe.type.kind&&a.concat(1).checkSubtype(d,Oe.type)?null:new Ta(d,b,Oe,T,E,yt):null},Ta.prototype.evaluate=function(n){var a=this.input.evaluate(n);return(Sn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)},Ta.prototype.eachChild=function(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)},Ta.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})&&this.otherwise.outputDefined()},Ta.prototype.serialize=function(){for(var n=this,a=["match",this.input.serialize()],d=[],b={},T=0,E=Object.keys(this.cases).sort();T<E.length;T+=1){var L=E[T];void 0===(Ie=b[this.cases[L]])?(b[this.cases[L]]=d.length,d.push([this.cases[L],[L]])):d[Ie][1].push(L)}for(var H=function($e){return"number"===n.inputType.kind?Number($e):$e},ie=0,xe=d;ie<xe.length;ie+=1){var Me=xe[ie],Ie=Me[0],ze=Me[1];a.push(1===ze.length?H(ze[0]):ze.map(H)),a.push(this.outputs[outputIndex$1].serialize())}return a.push(this.otherwise.serialize()),a};var _l=function(n,a,d){this.type=n,this.branches=a,this.otherwise=d};_l.parse=function(n,a){if(n.length<4)return a.error("Expected at least 3 arguments, but found only "+(n.length-1)+".");if(n.length%2!=0)return a.error("Expected an odd number of arguments.");var d;a.expectedType&&"value"!==a.expectedType.kind&&(d=a.expectedType);for(var b=[],T=1;T<n.length-1;T+=2){var E=a.parse(n[T],T,xn);if(!E)return null;var L=a.parse(n[T+1],T+1,d);if(!L)return null;b.push([E,L]),d=d||L.type}var H=a.parse(n[n.length-1],n.length-1,d);return H?new _l(d,b,H):null},_l.prototype.evaluate=function(n){for(var a=0,d=this.branches;a<d.length;a+=1){var b=d[a],T=b[1];if(b[0].evaluate(n))return T.evaluate(n)}return this.otherwise.evaluate(n)},_l.prototype.eachChild=function(n){for(var a=0,d=this.branches;a<d.length;a+=1){var b=d[a],T=b[1];n(b[0]),n(T)}n(this.otherwise)},_l.prototype.outputDefined=function(){return this.branches.every(function(n){return n[1].outputDefined()})&&this.otherwise.outputDefined()},_l.prototype.serialize=function(){var n=["case"];return this.eachChild(function(a){n.push(a.serialize())}),n};var yl=function(n,a,d,b){this.type=n,this.input=a,this.beginIndex=d,this.endIndex=b};function Ql(n,a){return"=="===n||"!="===n?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function Kl(n,a,d,b){return 0===b.compare(a,d)}function $r(n,a,d){var b="=="!==n&&"!="!==n;return function(){function T(E,L,H){this.type=xn,this.lhs=E,this.rhs=L,this.collator=H,this.hasUntypedArgument="value"===E.type.kind||"value"===L.type.kind}return T.parse=function(E,L){if(3!==E.length&&4!==E.length)return L.error("Expected two or three arguments.");var H=E[0],ie=L.parse(E[1],1,Bn);if(!ie)return null;if(!Ql(H,ie.type))return L.concat(1).error('"'+H+"\" comparisons are not supported for type '"+Wi(ie.type)+"'.");var xe=L.parse(E[2],2,Bn);if(!xe)return null;if(!Ql(H,xe.type))return L.concat(2).error('"'+H+"\" comparisons are not supported for type '"+Wi(xe.type)+"'.");if(ie.type.kind!==xe.type.kind&&"value"!==ie.type.kind&&"value"!==xe.type.kind)return L.error("Cannot compare types '"+Wi(ie.type)+"' and '"+Wi(xe.type)+"'.");b&&("value"===ie.type.kind&&"value"!==xe.type.kind?ie=new Xi(xe.type,[ie]):"value"!==ie.type.kind&&"value"===xe.type.kind&&(xe=new Xi(ie.type,[xe])));var Me=null;if(4===E.length){if("string"!==ie.type.kind&&"string"!==xe.type.kind&&"value"!==ie.type.kind&&"value"!==xe.type.kind)return L.error("Cannot use collator to compare non-string types.");if(!(Me=L.parse(E[3],3,Ni)))return null}return new T(ie,xe,Me)},T.prototype.evaluate=function(E){var L=this.lhs.evaluate(E),H=this.rhs.evaluate(E);if(b&&this.hasUntypedArgument){var ie=Sn(L),xe=Sn(H);if(ie.kind!==xe.kind||"string"!==ie.kind&&"number"!==ie.kind)throw new Pi('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+ie.kind+", "+xe.kind+") instead.")}if(this.collator&&!b&&this.hasUntypedArgument){var Me=Sn(L),Ie=Sn(H);if("string"!==Me.kind||"string"!==Ie.kind)return a(E,L,H)}return this.collator?d(E,L,H,this.collator.evaluate(E)):a(E,L,H)},T.prototype.eachChild=function(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)},T.prototype.outputDefined=function(){return!0},T.prototype.serialize=function(){var E=[n];return this.eachChild(function(L){E.push(L.serialize())}),E},T}()}yl.parse=function(n,a){if(n.length<=2||n.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var d=a.parse(n[1],1,Bn),b=a.parse(n[2],2,mt);if(!d||!b)return null;if(!Ae(d.type,[cr(Bn),cn,Bn]))return a.error("Expected first argument to be of type array or string, but found "+Wi(d.type)+" instead");if(4===n.length){var T=a.parse(n[3],3,mt);return T?new yl(d.type,d,b,T):null}return new yl(d.type,d,b)},yl.prototype.evaluate=function(n){var a=this.input.evaluate(n),d=this.beginIndex.evaluate(n);if(!Te(a,["string","array"]))throw new Pi("Expected first argument to be of type array or string, but found "+Wi(Sn(a))+" instead.");if(this.endIndex){var b=this.endIndex.evaluate(n);return a.slice(d,b)}return a.slice(d)},yl.prototype.eachChild=function(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)},yl.prototype.outputDefined=function(){return!1},yl.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var rc=$r("==",function(n,a,d){return a===d},Kl),$a=$r("!=",function(n,a,d){return a!==d},function(n,a,d,b){return!Kl(0,a,d,b)}),ca=$r("<",function(n,a,d){return a<d},function(n,a,d,b){return b.compare(a,d)<0}),ws=$r(">",function(n,a,d){return a>d},function(n,a,d,b){return b.compare(a,d)>0}),vl=$r("<=",function(n,a,d){return a<=d},function(n,a,d,b){return b.compare(a,d)<=0}),Bl=$r(">=",function(n,a,d){return a>=d},function(n,a,d,b){return b.compare(a,d)>=0}),So=function(n,a,d,b,T){this.type=cn,this.number=n,this.locale=a,this.currency=d,this.minFractionDigits=b,this.maxFractionDigits=T};So.parse=function(n,a){if(3!==n.length)return a.error("Expected two arguments.");var d=a.parse(n[1],1,mt);if(!d)return null;var b=n[2];if("object"!=typeof b||Array.isArray(b))return a.error("NumberFormat options argument must be an object.");var T=null;if(b.locale&&!(T=a.parse(b.locale,1,cn)))return null;var E=null;if(b.currency&&!(E=a.parse(b.currency,1,cn)))return null;var L=null;if(b["min-fraction-digits"]&&!(L=a.parse(b["min-fraction-digits"],1,mt)))return null;var H=null;return b["max-fraction-digits"]&&!(H=a.parse(b["max-fraction-digits"],1,mt))?null:new So(d,T,E,L,H)},So.prototype.evaluate=function(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))},So.prototype.eachChild=function(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){var n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]};var Ws=function(n){this.type=mt,this.input=n};Ws.parse=function(n,a){if(2!==n.length)return a.error("Expected 1 argument, but found "+(n.length-1)+" instead.");var d=a.parse(n[1],1);return d?"array"!==d.type.kind&&"string"!==d.type.kind&&"value"!==d.type.kind?a.error("Expected argument of type string or array, but found "+Wi(d.type)+" instead."):new Ws(d):null},Ws.prototype.evaluate=function(n){var a=this.input.evaluate(n);if("string"==typeof a||Array.isArray(a))return a.length;throw new Pi("Expected value to be of type string or array, but found "+Wi(Sn(a))+" instead.")},Ws.prototype.eachChild=function(n){n(this.input)},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){var n=["length"];return this.eachChild(function(a){n.push(a.serialize())}),n};var Is={"==":rc,"!=":$a,">":ws,"<":ca,">=":Bl,"<=":vl,array:Xi,at:Ca,boolean:Xi,case:_l,coalesce:gl,collator:sa,format:Bo,image:Rr,in:Js,"index-of":Pa,interpolate:qr,"interpolate-hcl":qr,"interpolate-lab":qr,length:Ws,let:Wl,literal:Ri,match:Ta,number:Xi,"number-format":So,object:Xi,slice:yl,step:Zo,string:Xi,"to-boolean":ds,"to-color":ds,"to-number":ds,"to-string":ds,var:bs,within:Us};function gn(n,a){var d=a[0],b=a[1],T=a[2],E=a[3];d=d.evaluate(n),b=b.evaluate(n),T=T.evaluate(n);var L=E?E.evaluate(n):1,H=gi(d,b,T,L);if(H)throw new Pi(H);return new Ct(d/255*L,b/255*L,T/255*L,L)}function oc(n,a){return n in a}function Ya(n,a){var d=a[n];return void 0===d?null:d}function Cs(n){return{type:n}}function da(n){return{result:"success",value:n}}function Da(n){return{result:"error",value:n}}function zs(n){return"data-driven"===n["property-type"]||"cross-faded-data-driven"===n["property-type"]}function ka(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Jo(n){return!!n.expression&&n.expression.interpolated}function ye(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function ve(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function ne(n){return n}function We(n,a,d){return void 0!==n?n:void 0!==a?a:void 0!==d?d:void 0}function _n(n,a,d,b,T){return We(typeof d===T?b[d]:void 0,n.default,a.default)}function ki(n,a,d){if("number"!==ye(d))return We(n.default,a.default);var b=n.stops.length;if(1===b||d<=n.stops[0][0])return n.stops[0][1];if(d>=n.stops[b-1][0])return n.stops[b-1][1];var T=ko(n.stops.map(function(E){return E[0]}),d);return n.stops[T][1]}function Wo(n,a,d){var b=void 0!==n.base?n.base:1;if("number"!==ye(d))return We(n.default,a.default);var T=n.stops.length;if(1===T||d<=n.stops[0][0])return n.stops[0][1];if(d>=n.stops[T-1][0])return n.stops[T-1][1];var ze,$e,yt,Et,E=ko(n.stops.map(function(Ie){return Ie[0]}),d),L=(ze=b,Et=d-($e=n.stops[E][0]),0==(yt=n.stops[E+1][0]-$e)?0:1===ze?Et/yt:(Math.pow(ze,Et)-1)/(Math.pow(ze,yt)-1)),H=n.stops[E][1],ie=n.stops[E+1][1],xe=hs[a.type]||ne;if(n.colorSpace&&"rgb"!==n.colorSpace){var Me=Jl[n.colorSpace];xe=function(Ie,ze){return Me.reverse(Me.interpolate(Me.forward(Ie),Me.forward(ze),L))}}return"function"==typeof H.evaluate?{evaluate:function(){for(var Ie=[],ze=arguments.length;ze--;)Ie[ze]=arguments[ze];var $e=H.evaluate.apply(void 0,Ie),Oe=ie.evaluate.apply(void 0,Ie);if(void 0!==$e&&void 0!==Oe)return xe($e,Oe,L)}}:xe(H,ie,L)}function Nr(n,a,d){return"color"===a.type?d=Ct.parse(d):"formatted"===a.type?d=Hn.fromString(d.toString()):"resolvedImage"===a.type?d=ri.fromString(d.toString()):ye(d)===a.type||"enum"===a.type&&a.values[d]||(d=void 0),We(d,n.default,a.default)}Oo.register(Is,{error:[{kind:"error"},[cn],function(n,a){throw new Pi(a[0].evaluate(n))}],typeof:[cn,[Bn],function(n,a){return Wi(Sn(a[0].evaluate(n)))}],"to-rgba":[cr(mt,4),[In],function(n,a){return a[0].evaluate(n).toArray()}],rgb:[In,[mt,mt,mt],gn],rgba:[In,[mt,mt,mt,mt],gn],has:{type:xn,overloads:[[[cn],function(n,a){return oc(a[0].evaluate(n),n.properties())}],[[cn,ai],function(n,a){var d=a[1];return oc(a[0].evaluate(n),d.evaluate(n))}]]},get:{type:Bn,overloads:[[[cn],function(n,a){return Ya(a[0].evaluate(n),n.properties())}],[[cn,ai],function(n,a){var d=a[1];return Ya(a[0].evaluate(n),d.evaluate(n))}]]},"feature-state":[Bn,[cn],function(n,a){return Ya(a[0].evaluate(n),n.featureState||{})}],properties:[ai,[],function(n){return n.properties()}],"geometry-type":[cn,[],function(n){return n.geometryType()}],id:[Bn,[],function(n){return n.id()}],zoom:[mt,[],function(n){return n.globals.zoom}],"heatmap-density":[mt,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[mt,[],function(n){return n.globals.lineProgress||0}],accumulated:[Bn,[],function(n){return void 0===n.globals.accumulated?null:n.globals.accumulated}],"+":[mt,Cs(mt),function(n,a){for(var d=0,b=0,T=a;b<T.length;b+=1)d+=T[b].evaluate(n);return d}],"*":[mt,Cs(mt),function(n,a){for(var d=1,b=0,T=a;b<T.length;b+=1)d*=T[b].evaluate(n);return d}],"-":{type:mt,overloads:[[[mt,mt],function(n,a){var d=a[1];return a[0].evaluate(n)-d.evaluate(n)}],[[mt],function(n,a){return-a[0].evaluate(n)}]]},"/":[mt,[mt,mt],function(n,a){var d=a[1];return a[0].evaluate(n)/d.evaluate(n)}],"%":[mt,[mt,mt],function(n,a){var d=a[1];return a[0].evaluate(n)%d.evaluate(n)}],ln2:[mt,[],function(){return Math.LN2}],pi:[mt,[],function(){return Math.PI}],e:[mt,[],function(){return Math.E}],"^":[mt,[mt,mt],function(n,a){var d=a[1];return Math.pow(a[0].evaluate(n),d.evaluate(n))}],sqrt:[mt,[mt],function(n,a){return Math.sqrt(a[0].evaluate(n))}],log10:[mt,[mt],function(n,a){return Math.log(a[0].evaluate(n))/Math.LN10}],ln:[mt,[mt],function(n,a){return Math.log(a[0].evaluate(n))}],log2:[mt,[mt],function(n,a){return Math.log(a[0].evaluate(n))/Math.LN2}],sin:[mt,[mt],function(n,a){return Math.sin(a[0].evaluate(n))}],cos:[mt,[mt],function(n,a){return Math.cos(a[0].evaluate(n))}],tan:[mt,[mt],function(n,a){return Math.tan(a[0].evaluate(n))}],asin:[mt,[mt],function(n,a){return Math.asin(a[0].evaluate(n))}],acos:[mt,[mt],function(n,a){return Math.acos(a[0].evaluate(n))}],atan:[mt,[mt],function(n,a){return Math.atan(a[0].evaluate(n))}],min:[mt,Cs(mt),function(n,a){return Math.min.apply(Math,a.map(function(d){return d.evaluate(n)}))}],max:[mt,Cs(mt),function(n,a){return Math.max.apply(Math,a.map(function(d){return d.evaluate(n)}))}],abs:[mt,[mt],function(n,a){return Math.abs(a[0].evaluate(n))}],round:[mt,[mt],function(n,a){var d=a[0].evaluate(n);return d<0?-Math.round(-d):Math.round(d)}],floor:[mt,[mt],function(n,a){return Math.floor(a[0].evaluate(n))}],ceil:[mt,[mt],function(n,a){return Math.ceil(a[0].evaluate(n))}],"filter-==":[xn,[cn,Bn],function(n,a){var d=a[0],b=a[1];return n.properties()[d.value]===b.value}],"filter-id-==":[xn,[Bn],function(n,a){var d=a[0];return n.id()===d.value}],"filter-type-==":[xn,[cn],function(n,a){var d=a[0];return n.geometryType()===d.value}],"filter-<":[xn,[cn,Bn],function(n,a){var d=a[0],b=a[1],T=n.properties()[d.value],E=b.value;return typeof T==typeof E&&T<E}],"filter-id-<":[xn,[Bn],function(n,a){var d=a[0],b=n.id(),T=d.value;return typeof b==typeof T&&b<T}],"filter->":[xn,[cn,Bn],function(n,a){var d=a[0],b=a[1],T=n.properties()[d.value],E=b.value;return typeof T==typeof E&&T>E}],"filter-id->":[xn,[Bn],function(n,a){var d=a[0],b=n.id(),T=d.value;return typeof b==typeof T&&b>T}],"filter-<=":[xn,[cn,Bn],function(n,a){var d=a[0],b=a[1],T=n.properties()[d.value],E=b.value;return typeof T==typeof E&&T<=E}],"filter-id-<=":[xn,[Bn],function(n,a){var d=a[0],b=n.id(),T=d.value;return typeof b==typeof T&&b<=T}],"filter->=":[xn,[cn,Bn],function(n,a){var d=a[0],b=a[1],T=n.properties()[d.value],E=b.value;return typeof T==typeof E&&T>=E}],"filter-id->=":[xn,[Bn],function(n,a){var d=a[0],b=n.id(),T=d.value;return typeof b==typeof T&&b>=T}],"filter-has":[xn,[Bn],function(n,a){return a[0].value in n.properties()}],"filter-has-id":[xn,[],function(n){return null!==n.id()&&void 0!==n.id()}],"filter-type-in":[xn,[cr(cn)],function(n,a){return a[0].value.indexOf(n.geometryType())>=0}],"filter-id-in":[xn,[cr(Bn)],function(n,a){return a[0].value.indexOf(n.id())>=0}],"filter-in-small":[xn,[cn,cr(Bn)],function(n,a){var d=a[0];return a[1].value.indexOf(n.properties()[d.value])>=0}],"filter-in-large":[xn,[cn,cr(Bn)],function(n,a){var d=a[0],b=a[1];return function(T,E,L,H){for(;L<=H;){var ie=L+H>>1;if(E[ie]===T)return!0;E[ie]>T?H=ie-1:L=ie+1}return!1}(n.properties()[d.value],b.value,0,b.value.length-1)}],all:{type:xn,overloads:[[[xn,xn],function(n,a){var d=a[1];return a[0].evaluate(n)&&d.evaluate(n)}],[Cs(xn),function(n,a){for(var d=0,b=a;d<b.length;d+=1)if(!b[d].evaluate(n))return!1;return!0}]]},any:{type:xn,overloads:[[[xn,xn],function(n,a){var d=a[1];return a[0].evaluate(n)||d.evaluate(n)}],[Cs(xn),function(n,a){for(var d=0,b=a;d<b.length;d+=1)if(b[d].evaluate(n))return!0;return!1}]]},"!":[xn,[xn],function(n,a){return!a[0].evaluate(n)}],"is-supported-script":[xn,[cn],function(n,a){var d=n.globals&&n.globals.isSupportedScript;return!d||d(a[0].evaluate(n))}],upcase:[cn,[cn],function(n,a){return a[0].evaluate(n).toUpperCase()}],downcase:[cn,[cn],function(n,a){return a[0].evaluate(n).toLowerCase()}],concat:[cn,Cs(Bn),function(n,a){return a.map(function(d){return ci(d.evaluate(n))}).join("")}],"resolved-locale":[cn,[Ni],function(n,a){return a[0].evaluate(n).resolvedLocale()}]});var Qs=function(n,a){var d;this.expression=n,this._warningHistory={},this._evaluator=new xa,this._defaultValue=a?"color"===(d=a).type&&ve(d.default)?new Ct(0,0,0,0):"color"===d.type?Ct.parse(d.default)||null:void 0===d.default?null:d.default:null,this._enumValues=a&&"enum"===a.type?a.values:null};function js(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Is}function Xl(n,a){var T,E,d=new xs(Is,[],a?(E={color:In,string:cn,number:mt,enum:cn,boolean:xn,formatted:ur,resolvedImage:Gi},"array"===(T=a).type?cr(E[T.value]||Bn,T.length):E[T.type]):void 0),b=d.parse(n,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return b?da(new Qs(b,a)):Da(d.errors)}Qs.prototype.evaluateWithoutErrorHandling=function(n,a,d,b,T,E){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)},Qs.prototype.evaluate=function(n,a,d,b,T,E){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=E||null;try{var L=this.expression.evaluate(this._evaluator);if(null==L||"number"==typeof L&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Pi("Expected value to be one of "+Object.keys(this._enumValues).map(function(H){return JSON.stringify(H)}).join(", ")+", but found "+JSON.stringify(L)+" instead.");return L}catch(H){return this._warningHistory[H.message]||(this._warningHistory[H.message]=!0,typeof console<"u"&&console.warn(H.message)),this._defaultValue}};var Un=function(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent="constant"!==n&&!go(a.expression)};Un.prototype.evaluateWithoutErrorHandling=function(n,a,d,b,T,E){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,b,T,E)},Un.prototype.evaluate=function(n,a,d,b,T,E){return this._styleExpression.evaluate(n,a,d,b,T,E)};var vr=function(n,a,d,b){this.kind=n,this.zoomStops=d,this._styleExpression=a,this.isStateDependent="camera"!==n&&!go(a.expression),this.interpolationType=b};function ku(n,a){if("error"===(n=Xl(n,a)).result)return n;var d=n.value.expression,b=uo(d);if(!b&&!zs(a))return Da([new tt("","data expressions not supported")]);var T=vs(d,["zoom"]);if(!T&&!ka(a))return Da([new tt("","zoom expressions not supported")]);var E=function L(H){var ie=null;if(H instanceof Wl)ie=L(H.result);else if(H instanceof gl)for(var xe=0,Me=H.args;xe<Me.length&&!(ie=L(Me[xe]));xe+=1);else(H instanceof Zo||H instanceof qr)&&H.input instanceof Oo&&"zoom"===H.input.name&&(ie=H);return ie instanceof tt||H.eachChild(function(Ie){var ze=L(Ie);ze instanceof tt?ie=ze:!ie&&ze?ie=new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ie&&ze&&ie!==ze&&(ie=new tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ie}(d);return E||T?E instanceof tt?Da([E]):E instanceof qr&&!Jo(a)?Da([new tt("",'"interpolate" expressions cannot be used with this property')]):da(E?new vr(b?"camera":"composite",n.value,E.labels,E instanceof qr?E.interpolation:void 0):new Un(b?"constant":"source",n.value)):Da([new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vr.prototype.evaluateWithoutErrorHandling=function(n,a,d,b,T,E){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,b,T,E)},vr.prototype.evaluate=function(n,a,d,b,T,E){return this._styleExpression.evaluate(n,a,d,b,T,E)},vr.prototype.interpolationFactor=function(n,a,d){return this.interpolationType?qr.interpolationFactor(this.interpolationType,n,a,d):0};var Ra=function(n,a){this._parameters=n,this._specification=a,rn(this,function d(b,T){var E,L,H,ie="color"===T.type,xe=b.stops&&"object"==typeof b.stops[0][0],Me=xe||!(xe||void 0!==b.property),Ie=b.type||(Jo(T)?"exponential":"interval");if(ie&&((b=rn({},b)).stops&&(b.stops=b.stops.map(function(si){return[si[0],Ct.parse(si[1])]})),b.default=Ct.parse(b.default?b.default:T.default)),b.colorSpace&&"rgb"!==b.colorSpace&&!Jl[b.colorSpace])throw new Error("Unknown color space: "+b.colorSpace);if("exponential"===Ie)E=Wo;else if("interval"===Ie)E=ki;else if("categorical"===Ie){E=_n,L=Object.create(null);for(var ze=0,$e=b.stops;ze<$e.length;ze+=1){var Oe=$e[ze];L[Oe[0]]=Oe[1]}H=typeof b.stops[0][0]}else{if("identity"!==Ie)throw new Error('Unknown function type "'+Ie+'"');E=Nr}if(xe){for(var yt={},Et=[],Dt=0;Dt<b.stops.length;Dt++){var $t=b.stops[Dt],Wt=$t[0].zoom;void 0===yt[Wt]&&(yt[Wt]={zoom:Wt,type:b.type,property:b.property,default:b.default,stops:[]},Et.push(Wt)),yt[Wt].stops.push([$t[0].value,$t[1]])}for(var on=[],pn=0,An=Et;pn<An.length;pn+=1){var Fn=An[pn];on.push([yt[Fn].zoom,d(yt[Fn],T)])}var Vn={name:"linear"};return{kind:"composite",interpolationType:Vn,interpolationFactor:qr.interpolationFactor.bind(void 0,Vn),zoomStops:on.map(function(si){return si[0]}),evaluate:function(si,Oi){var Kn=si.zoom;return Wo({stops:on,base:b.base},T,Kn).evaluate(Kn,Oi)}}}if(Me){var Ai="exponential"===Ie?{name:"exponential",base:void 0!==b.base?b.base:1}:null;return{kind:"camera",interpolationType:Ai,interpolationFactor:qr.interpolationFactor.bind(void 0,Ai),zoomStops:b.stops.map(function(si){return si[0]}),evaluate:function(si){return E(b,T,si.zoom,L,H)}}}return{kind:"source",evaluate:function(si,Oi){var Kn=Oi&&Oi.properties?Oi.properties[b.property]:void 0;return void 0===Kn?We(b.default,T.default):E(b,T,Kn,L,H)}}}(this._parameters,this._specification))};function Ro(n){var a=n.key,d=n.value,b=n.valueSpec||{},T=n.objectElementValidators||{},E=n.style,L=n.styleSpec,H=[],ie=ye(d);if("object"!==ie)return[new ot(a,d,"object expected, "+ie+" found")];for(var xe in d){var Me=xe.split(".")[0],Ie=b[Me]||b["*"],ze=void 0;if(T[Me])ze=T[Me];else if(b[Me])ze=Cr;else if(T["*"])ze=T["*"];else{if(!b["*"]){H.push(new ot(a,d[xe],'unknown property "'+xe+'"'));continue}ze=Cr}H=H.concat(ze({key:(a&&a+".")+xe,value:d[xe],valueSpec:Ie,style:E,styleSpec:L,object:d,objectKey:xe},d))}for(var $e in b)T[$e]||b[$e].required&&void 0===b[$e].default&&void 0===d[$e]&&H.push(new ot(a,d,'missing required property "'+$e+'"'));return H}function fu(n){var a=n.value,d=n.valueSpec,b=n.style,T=n.styleSpec,E=n.key,L=n.arrayElementValidator||Cr;if("array"!==ye(a))return[new ot(E,a,"array expected, "+ye(a)+" found")];if(d.length&&a.length!==d.length)return[new ot(E,a,"array length "+d.length+" expected, length "+a.length+" found")];if(d["min-length"]&&a.length<d["min-length"])return[new ot(E,a,"array length at least "+d["min-length"]+" expected, length "+a.length+" found")];var H={type:d.value,values:d.values};T.$version<7&&(H.function=d.function),"object"===ye(d.value)&&(H=d.value);for(var ie=[],xe=0;xe<a.length;xe++)ie=ie.concat(L({array:a,arrayIndex:xe,value:a[xe],valueSpec:H,style:b,styleSpec:T,key:E+"["+xe+"]"}));return ie}function eu(n){var a=n.key,d=n.value,b=n.valueSpec,T=ye(d);return"number"===T&&d!=d&&(T="NaN"),"number"!==T?[new ot(a,d,"number expected, "+T+" found")]:"minimum"in b&&d<b.minimum?[new ot(a,d,d+" is less than the minimum value "+b.minimum)]:"maximum"in b&&d>b.maximum?[new ot(a,d,d+" is greater than the maximum value "+b.maximum)]:[]}function ha(n){var a,d,b,T=n.valueSpec,E=dn(n.value.type),L={},H="categorical"!==E&&void 0===n.value.property,ie=!H,xe="array"===ye(n.value.stops)&&"array"===ye(n.value.stops[0])&&"object"===ye(n.value.stops[0][0]),Me=Ro({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function($e){if("identity"===E)return[new ot($e.key,$e.value,'identity function may not have a "stops" property')];var Oe=[],yt=$e.value;return Oe=Oe.concat(fu({key:$e.key,value:yt,valueSpec:$e.valueSpec,style:$e.style,styleSpec:$e.styleSpec,arrayElementValidator:Ie})),"array"===ye(yt)&&0===yt.length&&Oe.push(new ot($e.key,yt,"array must have at least one stop")),Oe},default:function($e){return Cr({key:$e.key,value:$e.value,valueSpec:T,style:$e.style,styleSpec:$e.styleSpec})}}});return"identity"===E&&H&&Me.push(new ot(n.key,n.value,'missing required property "property"')),"identity"===E||n.value.stops||Me.push(new ot(n.key,n.value,'missing required property "stops"')),"exponential"===E&&n.valueSpec.expression&&!Jo(n.valueSpec)&&Me.push(new ot(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(ie&&!zs(n.valueSpec)?Me.push(new ot(n.key,n.value,"property functions not supported")):H&&!ka(n.valueSpec)&&Me.push(new ot(n.key,n.value,"zoom functions not supported"))),"categorical"!==E&&!xe||void 0!==n.value.property||Me.push(new ot(n.key,n.value,'"property" property is required')),Me;function Ie($e){var Oe=[],yt=$e.value,Et=$e.key;if("array"!==ye(yt))return[new ot(Et,yt,"array expected, "+ye(yt)+" found")];if(2!==yt.length)return[new ot(Et,yt,"array length 2 expected, length "+yt.length+" found")];if(xe){if("object"!==ye(yt[0]))return[new ot(Et,yt,"object expected, "+ye(yt[0])+" found")];if(void 0===yt[0].zoom)return[new ot(Et,yt,"object stop key must have zoom")];if(void 0===yt[0].value)return[new ot(Et,yt,"object stop key must have value")];if(b&&b>dn(yt[0].zoom))return[new ot(Et,yt[0].zoom,"stop zoom values must appear in ascending order")];dn(yt[0].zoom)!==b&&(b=dn(yt[0].zoom),d=void 0,L={}),Oe=Oe.concat(Ro({key:Et+"[0]",value:yt[0],valueSpec:{zoom:{}},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{zoom:eu,value:ze}}))}else Oe=Oe.concat(ze({key:Et+"[0]",value:yt[0],valueSpec:{},style:$e.style,styleSpec:$e.styleSpec},yt));return js(et(yt[1]))?Oe.concat([new ot(Et+"[1]",yt[1],"expressions are not allowed in function stops.")]):Oe.concat(Cr({key:Et+"[1]",value:yt[1],valueSpec:T,style:$e.style,styleSpec:$e.styleSpec}))}function ze($e,Oe){var yt=ye($e.value),Et=dn($e.value),Dt=null!==$e.value?$e.value:Oe;if(a){if(yt!==a)return[new ot($e.key,Dt,yt+" stop domain type must match previous stop domain type "+a)]}else a=yt;if("number"!==yt&&"string"!==yt&&"boolean"!==yt)return[new ot($e.key,Dt,"stop domain value must be a number, string, or boolean")];if("number"!==yt&&"categorical"!==E){var $t="number expected, "+yt+" found";return zs(T)&&void 0===E&&($t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ot($e.key,Dt,$t)]}return"categorical"!==E||"number"!==yt||isFinite(Et)&&Math.floor(Et)===Et?"categorical"!==E&&"number"===yt&&void 0!==d&&Et<d?[new ot($e.key,Dt,"stop domain values must appear in ascending order")]:(d=Et,"categorical"===E&&Et in L?[new ot($e.key,Dt,"stop domain values must be unique")]:(L[Et]=!0,[])):[new ot($e.key,Dt,"integer expected, found "+Et)]}}function nl(n){var a=("property"===n.expressionContext?ku:Xl)(et(n.value),n.valueSpec);if("error"===a.result)return a.value.map(function(b){return new ot(""+n.key+b.key,n.value,b.message)});var d=a.value.expression||a.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!d.outputDefined())return[new ot(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===n.expressionContext&&"layout"===n.propertyType&&!go(d))return[new ot(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext&&!go(d))return[new ot(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!vs(d,["zoom","feature-state"]))return[new ot(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!uo(d))return[new ot(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pa(n){var a=n.key,d=n.value,b=n.valueSpec,T=[];return Array.isArray(b.values)?-1===b.values.indexOf(dn(d))&&T.push(new ot(a,d,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(d)+" found")):-1===Object.keys(b.values).indexOf(dn(d))&&T.push(new ot(a,d,"expected one of ["+Object.keys(b.values).join(", ")+"], "+JSON.stringify(d)+" found")),T}function Fa(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var a=0,d=n.slice(1);a<d.length;a+=1){var b=d[a];if(!Fa(b)&&"boolean"!=typeof b)return!1}return!0;default:return!0}}Ra.deserialize=function(n){return new Ra(n._parameters,n._specification)},Ra.serialize=function(n){return{_parameters:n._parameters,_specification:n._specification}};var tu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mu(n){if(null==n)return{filter:function(){return!0},needGeometry:!1};Fa(n)||(n=Na(n));var a=Xl(n,tu);if("error"===a.result)throw new Error(a.value.map(function(d){return d.key+": "+d.message}).join(", "));return{filter:function(d,b,T){return a.value.evaluate(d,b,{},T)},needGeometry:function d(b){if(!Array.isArray(b))return!1;if("within"===b[0])return!0;for(var T=1;T<b.length;T++)if(d(b[T]))return!0;return!1}(n)}}function Os(n,a){return n<a?-1:n>a?1:0}function Na(n){if(!n)return!0;var a,d=n[0];return n.length<=1?"any"!==d:"=="===d?Ru(n[1],n[2],"=="):"!="===d?qa(Ru(n[1],n[2],"==")):"<"===d||">"===d||"<="===d||">="===d?Ru(n[1],n[2],d):"any"===d?(a=n.slice(1),["any"].concat(a.map(Na))):"all"===d?["all"].concat(n.slice(1).map(Na)):"none"===d?["all"].concat(n.slice(1).map(Na).map(qa)):"in"===d?bl(n[1],n.slice(2)):"!in"===d?qa(bl(n[1],n.slice(2))):"has"===d?fa(n[1]):"!has"===d?qa(fa(n[1])):"within"!==d||n}function Ru(n,a,d){switch(n){case"$type":return["filter-type-"+d,a];case"$id":return["filter-id-"+d,a];default:return["filter-"+d,n,a]}}function bl(n,a){if(0===a.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(function(d){return typeof d!=typeof a[0]})?["filter-in-large",n,["literal",a.sort(Os)]]:["filter-in-small",n,["literal",a]]}}function fa(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function qa(n){return["!",n]}function gu(n){return Fa(et(n.value))?nl(rn({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function a(d){var b=d.value,T=d.key;if("array"!==ye(b))return[new ot(T,b,"array expected, "+ye(b)+" found")];var E,L=d.styleSpec,H=[];if(b.length<1)return[new ot(T,b,"filter array must have at least 1 element")];switch(H=H.concat(pa({key:T+"[0]",value:b[0],valueSpec:L.filter_operator,style:d.style,styleSpec:d.styleSpec})),dn(b[0])){case"<":case"<=":case">":case">=":b.length>=2&&"$type"===dn(b[1])&&H.push(new ot(T,b,'"$type" cannot be use with operator "'+b[0]+'"'));case"==":case"!=":3!==b.length&&H.push(new ot(T,b,'filter array for operator "'+b[0]+'" must have 3 elements'));case"in":case"!in":b.length>=2&&"string"!==(E=ye(b[1]))&&H.push(new ot(T+"[1]",b[1],"string expected, "+E+" found"));for(var ie=2;ie<b.length;ie++)E=ye(b[ie]),"$type"===dn(b[1])?H=H.concat(pa({key:T+"["+ie+"]",value:b[ie],valueSpec:L.geometry_type,style:d.style,styleSpec:d.styleSpec})):"string"!==E&&"number"!==E&&"boolean"!==E&&H.push(new ot(T+"["+ie+"]",b[ie],"string, number, or boolean expected, "+E+" found"));break;case"any":case"all":case"none":for(var xe=1;xe<b.length;xe++)H=H.concat(a({key:T+"["+xe+"]",value:b[xe],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":E=ye(b[1]),2!==b.length?H.push(new ot(T,b,'filter array for "'+b[0]+'" operator must have 2 elements')):"string"!==E&&H.push(new ot(T+"[1]",b[1],"string expected, "+E+" found"));break;case"within":E=ye(b[1]),2!==b.length?H.push(new ot(T,b,'filter array for "'+b[0]+'" operator must have 2 elements')):"object"!==E&&H.push(new ot(T+"[1]",b[1],"object expected, "+E+" found"))}return H}(n)}function yc(n,a){var d=n.key,b=n.style,T=n.styleSpec,E=n.value,L=n.objectKey,H=T[a+"_"+n.layerType];if(!H)return[];var ie=L.match(/^(.*)-transition$/);if("paint"===a&&ie&&H[ie[1]]&&H[ie[1]].transition)return Cr({key:d,value:E,valueSpec:T.transition,style:b,styleSpec:T});var xe,Me=n.valueSpec||H[L];if(!Me)return[new ot(d,E,'unknown property "'+L+'"')];if("string"===ye(E)&&zs(Me)&&!Me.tokens&&(xe=/^{([^}]+)}$/.exec(E)))return[new ot(d,E,'"'+L+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(xe[1])+" }`.")];var Ie=[];return"symbol"===n.layerType&&("text-field"===L&&b&&!b.glyphs&&Ie.push(new ot(d,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===L&&ve(et(E))&&"identity"===dn(E.type)&&Ie.push(new ot(d,E,'"text-font" does not support identity functions'))),Ie.concat(Cr({key:n.key,value:E,valueSpec:Me,style:b,styleSpec:T,expressionContext:"property",propertyType:a,propertyKey:L}))}function Ts(n){return yc(n,"paint")}function ts(n){return yc(n,"layout")}function ma(n){var a=[],d=n.value,b=n.key,T=n.style,E=n.styleSpec;d.type||d.ref||a.push(new ot(b,d,'either "type" or "ref" is required'));var L,H=dn(d.type),ie=dn(d.ref);if(d.id)for(var xe=dn(d.id),Me=0;Me<n.arrayIndex;Me++){var Ie=T.layers[Me];dn(Ie.id)===xe&&a.push(new ot(b,d.id,'duplicate layer id "'+d.id+'", previously used at line '+Ie.id.__line__))}if("ref"in d)["type","source","source-layer","filter","layout"].forEach(function(Oe){Oe in d&&a.push(new ot(b,d[Oe],'"'+Oe+'" is prohibited for ref layers'))}),T.layers.forEach(function(Oe){dn(Oe.id)===ie&&(L=Oe)}),L?L.ref?a.push(new ot(b,d.ref,"ref cannot reference another ref layer")):H=dn(L.type):a.push(new ot(b,d.ref,'ref layer "'+ie+'" not found'));else if("background"!==H)if(d.source){var ze=T.sources&&T.sources[d.source],$e=ze&&dn(ze.type);ze?"vector"===$e&&"raster"===H?a.push(new ot(b,d.source,'layer "'+d.id+'" requires a raster source')):"raster"===$e&&"raster"!==H?a.push(new ot(b,d.source,'layer "'+d.id+'" requires a vector source')):"vector"!==$e||d["source-layer"]?"raster-dem"===$e&&"hillshade"!==H?a.push(new ot(b,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==H||!d.paint||!d.paint["line-gradient"]||"geojson"===$e&&ze.lineMetrics||a.push(new ot(b,d,'layer "'+d.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):a.push(new ot(b,d,'layer "'+d.id+'" must specify a "source-layer"')):a.push(new ot(b,d.source,'source "'+d.source+'" not found'))}else a.push(new ot(b,d,'missing required property "source"'));return a=a.concat(Ro({key:b,value:d,valueSpec:E.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Cr({key:b+".type",value:d.type,valueSpec:E.layer.type,style:n.style,styleSpec:n.styleSpec,object:d,objectKey:"type"})},filter:gu,layout:function(Oe){return Ro({layer:d,key:Oe.key,value:Oe.value,style:Oe.style,styleSpec:Oe.styleSpec,objectElementValidators:{"*":function(yt){return ts(rn({layerType:H},yt))}}})},paint:function(Oe){return Ro({layer:d,key:Oe.key,value:Oe.value,style:Oe.style,styleSpec:Oe.styleSpec,objectElementValidators:{"*":function(yt){return Ts(rn({layerType:H},yt))}}})}}}))}function Eo(n){var a=n.value,d=n.key,b=ye(a);return"string"!==b?[new ot(d,a,"string expected, "+b+" found")]:[]}var dr={promoteId:function(n){var a=n.key,d=n.value;if("string"===ye(d))return Eo({key:a,value:d});var b=[];for(var T in d)b.push.apply(b,Eo({key:a+"."+T,value:d[T]}));return b}};function _u(n){var a=n.value,d=n.key,b=n.styleSpec,T=n.style;if(!a.type)return[new ot(d,a,'"type" is required')];var E,L=dn(a.type);switch(L){case"vector":case"raster":case"raster-dem":return Ro({key:d,value:a,valueSpec:b["source_"+L.replace("-","_")],style:n.style,styleSpec:b,objectElementValidators:dr});case"geojson":if(E=Ro({key:d,value:a,valueSpec:b.source_geojson,style:T,styleSpec:b,objectElementValidators:dr}),a.cluster)for(var H in a.clusterProperties){var ie=a.clusterProperties[H],xe=ie[0],Me="string"==typeof xe?[xe,["accumulated"],["get",H]]:xe;E.push.apply(E,nl({key:d+"."+H+".map",value:ie[1],expressionContext:"cluster-map"})),E.push.apply(E,nl({key:d+"."+H+".reduce",value:Me,expressionContext:"cluster-reduce"}))}return E;case"video":return Ro({key:d,value:a,valueSpec:b.source_video,style:T,styleSpec:b});case"image":return Ro({key:d,value:a,valueSpec:b.source_image,style:T,styleSpec:b});case"canvas":return[new ot(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pa({key:d+".type",value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,styleSpec:b})}}function La(n){var a=n.value,d=n.styleSpec,b=d.light,T=n.style,E=[],L=ye(a);if(void 0===a)return E;if("object"!==L)return E.concat([new ot("light",a,"object expected, "+L+" found")]);for(var H in a){var ie=H.match(/^(.*)-transition$/);E=E.concat(ie&&b[ie[1]]&&b[ie[1]].transition?Cr({key:H,value:a[H],valueSpec:d.transition,style:T,styleSpec:d}):b[H]?Cr({key:H,value:a[H],valueSpec:b[H],style:T,styleSpec:d}):[new ot(H,a[H],'unknown property "'+H+'"')])}return E}var Ja={"*":function(){return[]},array:fu,boolean:function(n){var a=n.value,d=n.key,b=ye(a);return"boolean"!==b?[new ot(d,a,"boolean expected, "+b+" found")]:[]},number:eu,color:function(n){var a=n.key,d=n.value,b=ye(d);return"string"!==b?[new ot(a,d,"color expected, "+b+" found")]:null===Xe(d)?[new ot(a,d,'color expected, "'+d+'" found')]:[]},constants:Nt,enum:pa,filter:gu,function:ha,layer:ma,object:Ro,source:_u,light:La,string:Eo,formatted:function(n){return 0===Eo(n).length?[]:nl(n)},resolvedImage:function(n){return 0===Eo(n).length?[]:nl(n)}};function Cr(n){var a=n.value,d=n.valueSpec,b=n.styleSpec;return d.expression&&ve(dn(a))?ha(n):d.expression&&js(et(a))?nl(n):d.type&&Ja[d.type]?Ja[d.type](n):Ro(rn({},n,{valueSpec:d.type?b[d.type]:d}))}function co(n){var a=n.value,d=n.key,b=Eo(n);return b.length||(-1===a.indexOf("{fontstack}")&&b.push(new ot(d,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&b.push(new ot(d,a,'"glyphs" url must include a "{range}" token'))),b}function ps(n,a){void 0===a&&(a=Pe);var d=[];return d=d.concat(Cr({key:"",value:n,valueSpec:a.$root,styleSpec:a,style:n,objectElementValidators:{glyphs:co,"*":function(){return[]}}})),n.constants&&(d=d.concat(Nt({key:"constants",value:n.constants,style:n,styleSpec:a}))),ga(d)}function ga(n){return[].concat(n).sort(function(a,d){return a.line-d.line})}function Wa(n){return function(){for(var a=[],d=arguments.length;d--;)a[d]=arguments[d];return ga(n.apply(this,a))}}ps.source=Wa(_u),ps.light=Wa(La),ps.layer=Wa(ma),ps.filter=Wa(gu),ps.paintProperty=Wa(Ts),ps.layoutProperty=Wa(ts);var Vu=ps,Qc=Vu.light,_a=Vu.paintProperty,Ul=Vu.layoutProperty;function no(n,a){var d=!1;if(a&&a.length)for(var b=0,T=a;b<T.length;b+=1)n.fire(new Le(new Error(T[b].message))),d=!0;return d}var Qa=Qo;function Qo(n,a,d){var b=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var T=new Int32Array(this.arrayBuffer);n=T[0],this.d=(a=T[1])+2*(d=T[2]);for(var E=0;E<this.d*this.d;E++){var L=T[3+E],H=T[3+E+1];b.push(L===H?null:T.subarray(L,H))}var ie=T[3+b.length+1];this.keys=T.subarray(T[3+b.length],ie),this.bboxes=T.subarray(ie),this.insert=this._insertReadonly}else{this.d=a+2*d;for(var xe=0;xe<this.d*this.d;xe++)b.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=d,this.scale=a/n,this.uid=0;var Me=d/a*n;this.min=-Me,this.max=n+Me}Qo.prototype.insert=function(n,a,d,b,T){this._forEachCell(a,d,b,T,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(T)},Qo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qo.prototype._insertCell=function(n,a,d,b,T,E){this.cells[T].push(E)},Qo.prototype.query=function(n,a,d,b,T){var E=this.min,L=this.max;if(n<=E&&a<=E&&L<=d&&L<=b&&!T)return Array.prototype.slice.call(this.keys);var H=[];return this._forEachCell(n,a,d,b,this._queryCell,H,{},T),H},Qo.prototype._queryCell=function(n,a,d,b,T,E,L,H){var ie=this.cells[T];if(null!==ie)for(var xe=this.keys,Me=this.bboxes,Ie=0;Ie<ie.length;Ie++){var ze=ie[Ie];if(void 0===L[ze]){var $e=4*ze;(H?H(Me[$e+0],Me[$e+1],Me[$e+2],Me[$e+3]):n<=Me[$e+2]&&a<=Me[$e+3]&&d>=Me[$e+0]&&b>=Me[$e+1])?(L[ze]=!0,E.push(xe[ze])):L[ze]=!1}}},Qo.prototype._forEachCell=function(n,a,d,b,T,E,L,H){for(var ie=this._convertToCellCoord(n),xe=this._convertToCellCoord(a),Me=this._convertToCellCoord(d),Ie=this._convertToCellCoord(b),ze=ie;ze<=Me;ze++)for(var $e=xe;$e<=Ie;$e++){var Oe=this.d*$e+ze;if((!H||H(this._convertFromCellCoord(ze),this._convertFromCellCoord($e),this._convertFromCellCoord(ze+1),this._convertFromCellCoord($e+1)))&&T.call(this,n,a,d,b,Oe,E,L,H))return}},Qo.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},Qo.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},Qo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,a=3+this.cells.length+1+1,d=0,b=0;b<this.cells.length;b++)d+=this.cells[b].length;var T=new Int32Array(a+d+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;for(var E=a,L=0;L<n.length;L++){var H=n[L];T[3+L]=E,T.set(H,E),E+=H.length}return T[3+n.length]=E,T.set(this.keys,E),T[3+n.length+1]=E+=this.keys.length,T.set(this.bboxes,E),E+=this.bboxes.length,T.buffer};var os=we.ImageData,te=we.ImageBitmap,Se={};function X(n,a,d){void 0===d&&(d={}),Object.defineProperty(a,"_classRegistryKey",{value:n,writeable:!1}),Se[n]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}for(var Ue in X("Object",Object),Qa.serialize=function(n,a){var d=n.toArrayBuffer();return a&&a.push(d),{buffer:d}},Qa.deserialize=function(n){return new Qa(n.buffer)},X("Grid",Qa),X("Color",Ct),X("Error",Error),X("ResolvedImage",ri),X("StylePropertyFunction",Ra),X("StyleExpression",Qs,{omit:["_evaluator"]}),X("ZoomDependentExpression",vr),X("ZoomConstantExpression",Un),X("CompoundExpression",Oo,{omit:["_evaluate"]}),Is)Is[Ue]._classRegistryKey||X("Expression_"+Ue,Is[Ue]);function vt(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function an(n){return te&&n instanceof te}function En(n,a){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(vt(n)||an(n))return a&&a.push(n),n;if(ArrayBuffer.isView(n)){var d=n;return a&&a.push(d.buffer),d}if(n instanceof os)return a&&a.push(n.data.buffer),n;if(Array.isArray(n)){for(var b=[],T=0,E=n;T<E.length;T+=1)b.push(En(E[T],a));return b}if("object"==typeof n){var L=n.constructor,H=L._classRegistryKey;if(!H)throw new Error("can't serialize object of unregistered class");var ie=L.serialize?L.serialize(n,a):{};if(!L.serialize){for(var xe in n)if(n.hasOwnProperty(xe)&&!(Se[H].omit.indexOf(xe)>=0)){var Me=n[xe];ie[xe]=Se[H].shallow.indexOf(xe)>=0?Me:En(Me,a)}n instanceof Error&&(ie.message=n.message)}if(ie.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==H&&(ie.$name=H),ie}throw new Error("can't serialize object of type "+typeof n)}function oi(n){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||vt(n)||an(n)||ArrayBuffer.isView(n)||n instanceof os)return n;if(Array.isArray(n))return n.map(oi);if("object"==typeof n){var a=n.$name||"Object",d=Se[a].klass;if(!d)throw new Error("can't deserialize unregistered class "+a);if(d.deserialize)return d.deserialize(n);for(var b=Object.create(d.prototype),T=0,E=Object.keys(n);T<E.length;T+=1){var L=E[T];if("$name"!==L){var H=n[L];b[L]=Se[a].shallow.indexOf(L)>=0?H:oi(H)}}return b}throw new Error("can't deserialize object of type "+typeof n)}var Jr=function(){this.first=!0};Jr.prototype.update=function(n,a){var d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))};var Dn={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function Tr(n){for(var a=0,d=n;a<d.length;a+=1)if(er(d[a].charCodeAt(0)))return!0;return!1}function er(n){return!(746!==n&&747!==n&&(n<4352||!(Dn["Bopomofo Extended"](n)||Dn.Bopomofo(n)||Dn["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Dn["CJK Compatibility Ideographs"](n)||Dn["CJK Compatibility"](n)||Dn["CJK Radicals Supplement"](n)||Dn["CJK Strokes"](n)||!(!Dn["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||Dn["CJK Unified Ideographs Extension A"](n)||Dn["CJK Unified Ideographs"](n)||Dn["Enclosed CJK Letters and Months"](n)||Dn["Hangul Compatibility Jamo"](n)||Dn["Hangul Jamo Extended-A"](n)||Dn["Hangul Jamo Extended-B"](n)||Dn["Hangul Jamo"](n)||Dn["Hangul Syllables"](n)||Dn.Hiragana(n)||Dn["Ideographic Description Characters"](n)||Dn.Kanbun(n)||Dn["Kangxi Radicals"](n)||Dn["Katakana Phonetic Extensions"](n)||Dn.Katakana(n)&&12540!==n||!(!Dn["Halfwidth and Fullwidth Forms"](n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!Dn["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Dn["Unified Canadian Aboriginal Syllabics"](n)||Dn["Unified Canadian Aboriginal Syllabics Extended"](n)||Dn["Vertical Forms"](n)||Dn["Yijing Hexagram Symbols"](n)||Dn["Yi Syllables"](n)||Dn["Yi Radicals"](n))))}function wo(n){return!(er(n)||(a=n,Dn["Latin-1 Supplement"](a)&&(167===a||169===a||174===a||177===a||188===a||189===a||190===a||215===a||247===a)||Dn["General Punctuation"](a)&&(8214===a||8224===a||8225===a||8240===a||8241===a||8251===a||8252===a||8258===a||8263===a||8264===a||8265===a||8273===a)||Dn["Letterlike Symbols"](a)||Dn["Number Forms"](a)||Dn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||9003===a||a>=9085&&a<=9114||a>=9150&&a<=9165||9167===a||a>=9169&&a<=9179||a>=9186&&a<=9215)||Dn["Control Pictures"](a)&&9251!==a||Dn["Optical Character Recognition"](a)||Dn["Enclosed Alphanumerics"](a)||Dn["Geometric Shapes"](a)||Dn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Dn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Dn["CJK Symbols and Punctuation"](a)||Dn.Katakana(a)||Dn["Private Use Area"](a)||Dn["CJK Compatibility Forms"](a)||Dn["Small Form Variants"](a)||Dn["Halfwidth and Fullwidth Forms"](a)||8734===a||8756===a||8757===a||a>=9984&&a<=10087||a>=10102&&a<=10131||65532===a||65533===a));var a}function hr(n){return n>=1424&&n<=2303||Dn["Arabic Presentation Forms-A"](n)||Dn["Arabic Presentation Forms-B"](n)}function Pr(n,a){return!(!a&&hr(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Dn.Khmer(n))}function Vs(n){for(var a=0,d=n;a<d.length;a+=1)if(hr(d[a].charCodeAt(0)))return!0;return!1}var Hs=null,fs="unavailable",Ko=null,Fo=function(n){n&&"string"==typeof n&&n.indexOf("NetworkError")>-1&&(fs="error"),Hs&&Hs(n)};function Ma(){zl.fire(new _e("pluginStateChange",{pluginStatus:fs,pluginURL:Ko}))}var zl=new Ze,yu=function(){return fs},Ks=function(){if("deferred"!==fs||!Ko)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fs="loading",Ma(),Ko&&Zr({url:Ko},function(n){n?Fo(n):(fs="loaded",Ma())})},Gs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===fs||null!=Gs.applyArabicShaping},isLoading:function(){return"loading"===fs},setState:function(n){fs=n.pluginStatus,Ko=n.pluginURL},isParsed:function(){return null!=Gs.applyArabicShaping&&null!=Gs.processBidirectionalText&&null!=Gs.processStyledBidirectionalText},getPluginURL:function(){return Ko}},rr=function(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jr,this.transition={})};rr.prototype.isSupportedScript=function(n){return function(a,d){for(var b=0,T=a;b<T.length;b+=1)if(!Pr(T[b].charCodeAt(0),d))return!1;return!0}(n,Gs.isLoaded())},rr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},rr.prototype.getCrossfadeParameters=function(){var n=this.zoom,a=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}};var Ba=function(n,a){this.property=n,this.value=a,this.expression=function(d,b){if(ve(d))return new Ra(d,b);if(js(d)){var T=ku(d,b);if("error"===T.result)throw new Error(T.value.map(function(L){return L.key+": "+L.message}).join(", "));return T.value}var E=d;return"string"==typeof d&&"color"===b.type&&(E=Ct.parse(d)),{kind:"constant",evaluate:function(){return E}}}(void 0===a?n.specification.default:a,n.specification)};Ba.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ba.prototype.possiblyEvaluate=function(n,a,d){return this.property.possiblyEvaluate(this,n,a,d)};var ns=function(n){this.property=n,this.value=new Ba(n,void 0)};ns.prototype.transitioned=function(n,a){return new Ua(this.property,this.value,a,Be({},n.transition,this.transition),n.now)},ns.prototype.untransitioned=function(){return new Ua(this.property,this.value,null,{},0)};var Ps=function(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)};Ps.prototype.getValue=function(n){return ht(this._values[n].value.value)},Ps.prototype.setValue=function(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new ns(this._values[n].property)),this._values[n].value=new Ba(this._values[n].property,null===a?void 0:ht(a))},Ps.prototype.getTransition=function(n){return ht(this._values[n].transition)},Ps.prototype.setTransition=function(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new ns(this._values[n].property)),this._values[n].transition=ht(a)||void 0},Ps.prototype.serialize=function(){for(var n={},a=0,d=Object.keys(this._values);a<d.length;a+=1){var b=d[a],T=this.getValue(b);void 0!==T&&(n[b]=T);var E=this.getTransition(b);void 0!==E&&(n[b+"-transition"]=E)}return n},Ps.prototype.transitioned=function(n,a){for(var d=new Fu(this._properties),b=0,T=Object.keys(this._values);b<T.length;b+=1){var E=T[b];d._values[E]=this._values[E].transitioned(n,a._values[E])}return d},Ps.prototype.untransitioned=function(){for(var n=new Fu(this._properties),a=0,d=Object.keys(this._values);a<d.length;a+=1){var b=d[a];n._values[b]=this._values[b].untransitioned()}return n};var Ua=function(n,a,d,b,T){this.property=n,this.value=a,this.begin=T+b.delay||0,this.end=this.begin+b.duration||0,n.specification.transition&&(b.delay||b.duration)&&(this.prior=d)};Ua.prototype.possiblyEvaluate=function(n,a,d){var b=n.now||0,T=this.value.possiblyEvaluate(n,a,d),E=this.prior;if(E){if(b>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(b<this.begin)return E.possiblyEvaluate(n,a,d);var L=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(n,a,d),T,function(H){if(H<=0)return 0;if(H>=1)return 1;var ie=H*H,xe=ie*H;return 4*(H<.5?xe:3*(H-ie)+xe-.75)}(L))}return T};var Fu=function(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)};Fu.prototype.possiblyEvaluate=function(n,a,d){for(var b=new sc(this._properties),T=0,E=Object.keys(this._values);T<E.length;T+=1){var L=E[T];b._values[L]=this._values[L].possiblyEvaluate(n,a,d)}return b},Fu.prototype.hasTransition=function(){for(var n=0,a=Object.keys(this._values);n<a.length;n+=1)if(this._values[a[n]].prior)return!0;return!1};var il=function(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)};il.prototype.getValue=function(n){return ht(this._values[n].value)},il.prototype.setValue=function(n,a){this._values[n]=new Ba(this._values[n].property,null===a?void 0:ht(a))},il.prototype.serialize=function(){for(var n={},a=0,d=Object.keys(this._values);a<d.length;a+=1){var b=d[a],T=this.getValue(b);void 0!==T&&(n[b]=T)}return n},il.prototype.possiblyEvaluate=function(n,a,d){for(var b=new sc(this._properties),T=0,E=Object.keys(this._values);T<E.length;T+=1){var L=E[T];b._values[L]=this._values[L].possiblyEvaluate(n,a,d)}return b};var Zs=function(n,a,d){this.property=n,this.value=a,this.parameters=d};Zs.prototype.isConstant=function(){return"constant"===this.value.kind},Zs.prototype.constantOr=function(n){return"constant"===this.value.kind?this.value.value:n},Zs.prototype.evaluate=function(n,a,d,b){return this.property.evaluate(this.value,this.parameters,n,a,d,b)};var sc=function(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)};sc.prototype.get=function(n){return this._values[n]};var li=function(n){this.specification=n};li.prototype.possiblyEvaluate=function(n,a){return n.expression.evaluate(a)},li.prototype.interpolate=function(n,a,d){var b=hs[this.specification.type];return b?b(n,a,d):n};var ei=function(n,a){this.specification=n,this.overrides=a};ei.prototype.possiblyEvaluate=function(n,a,d,b){return new Zs(this,"constant"===n.expression.kind||"camera"===n.expression.kind?{kind:"constant",value:n.expression.evaluate(a,null,{},d,b)}:n.expression,a)},ei.prototype.interpolate=function(n,a,d){if("constant"!==n.value.kind||"constant"!==a.value.kind)return n;if(void 0===n.value.value||void 0===a.value.value)return new Zs(this,{kind:"constant",value:void 0},n.parameters);var b=hs[this.specification.type];return b?new Zs(this,{kind:"constant",value:b(n.value.value,a.value.value,d)},n.parameters):n},ei.prototype.evaluate=function(n,a,d,b,T,E){return"constant"===n.kind?n.value:n.evaluate(a,d,b,T,E)};var jl=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.possiblyEvaluate=function(d,b,T,E){if(void 0===d.value)return new Zs(this,{kind:"constant",value:void 0},b);if("constant"===d.expression.kind){var L=d.expression.evaluate(b,null,{},T,E),H="resolvedImage"===d.property.specification.type&&"string"!=typeof L?L.name:L,ie=this._calculate(H,H,H,b);return new Zs(this,{kind:"constant",value:ie},b)}if("camera"===d.expression.kind){var xe=this._calculate(d.expression.evaluate({zoom:b.zoom-1}),d.expression.evaluate({zoom:b.zoom}),d.expression.evaluate({zoom:b.zoom+1}),b);return new Zs(this,{kind:"constant",value:xe},b)}return new Zs(this,d.expression,b)},a.prototype.evaluate=function(d,b,T,E,L,H){if("source"===d.kind){var ie=d.evaluate(b,T,E,L,H);return this._calculate(ie,ie,ie,b)}return"composite"===d.kind?this._calculate(d.evaluate({zoom:Math.floor(b.zoom)-1},T,E),d.evaluate({zoom:Math.floor(b.zoom)},T,E),d.evaluate({zoom:Math.floor(b.zoom)+1},T,E),b):d.value},a.prototype._calculate=function(d,b,T,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:d,to:b}:{from:T,to:b}},a.prototype.interpolate=function(d){return d},a}(ei),ss=function(n){this.specification=n};ss.prototype.possiblyEvaluate=function(n,a,d,b){if(void 0!==n.value){if("constant"===n.expression.kind){var T=n.expression.evaluate(a,null,{},d,b);return this._calculate(T,T,T,a)}return this._calculate(n.expression.evaluate(new rr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new rr(Math.floor(a.zoom),a)),n.expression.evaluate(new rr(Math.floor(a.zoom+1),a)),a)}},ss.prototype._calculate=function(n,a,d,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:d,to:a}},ss.prototype.interpolate=function(n){return n};var $s=function(n){this.specification=n};$s.prototype.possiblyEvaluate=function(n,a,d,b){return!!n.expression.evaluate(a,null,{},d,b)},$s.prototype.interpolate=function(){return!1};var ms=function(n){for(var a in this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],n){var d=n[a];d.specification.overridable&&this.overridableProperties.push(a);var b=this.defaultPropertyValues[a]=new Ba(d,void 0),T=this.defaultTransitionablePropertyValues[a]=new ns(d);this.defaultTransitioningPropertyValues[a]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=b.possiblyEvaluate({})}};X("DataDrivenProperty",ei),X("DataConstantProperty",li),X("CrossFadedDataDrivenProperty",jl),X("CrossFadedProperty",ss),X("ColorRampProperty",$s);var rl=function(n){function a(d,b){if(n.call(this),this.id=d.id,this.type=d.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==d.type&&(this.metadata=d.metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,"background"!==d.type&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),b.layout&&(this._unevaluatedLayout=new il(b.layout)),b.paint)){for(var T in this._transitionablePaint=new Ps(b.paint),d.paint)this.setPaintProperty(T,d.paint[T],{validate:!1});for(var E in d.layout)this.setLayoutProperty(E,d.layout[E],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sc(b.paint)}}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},a.prototype.getLayoutProperty=function(d){return"visibility"===d?this.visibility:this._unevaluatedLayout.getValue(d)},a.prototype.setLayoutProperty=function(d,b,T){void 0===T&&(T={}),null!=b&&this._validate(Ul,"layers."+this.id+".layout."+d,d,b,T)||("visibility"!==d?this._unevaluatedLayout.setValue(d,b):this.visibility=b)},a.prototype.getPaintProperty=function(d){return ct(d,"-transition")?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)},a.prototype.setPaintProperty=function(d,b,T){if(void 0===T&&(T={}),null!=b&&this._validate(_a,"layers."+this.id+".paint."+d,d,b,T))return!1;if(ct(d,"-transition"))return this._transitionablePaint.setTransition(d.slice(0,-11),b||void 0),!1;var E=this._transitionablePaint._values[d],L="cross-faded-data-driven"===E.property.specification["property-type"],H=E.value.isDataDriven(),ie=E.value;this._transitionablePaint.setValue(d,b),this._handleSpecialPaintPropertyUpdate(d);var xe=this._transitionablePaint._values[d].value;return xe.isDataDriven()||H||L||this._handleOverridablePaintPropertyUpdate(d,ie,xe)},a.prototype._handleSpecialPaintPropertyUpdate=function(d){},a.prototype._handleOverridablePaintPropertyUpdate=function(d,b,T){return!1},a.prototype.isHidden=function(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||"none"===this.visibility},a.prototype.updateTransitions=function(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)},a.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},a.prototype.recalculate=function(d,b){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,b)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,b)},a.prototype.serialize=function(){var d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),Qe(d,function(b,T){return!(void 0===b||"layout"===T&&!Object.keys(b).length||"paint"===T&&!Object.keys(b).length)})},a.prototype._validate=function(d,b,T,E,L){return void 0===L&&(L={}),(!L||!1!==L.validate)&&no(this,d.call(Vu,{key:b,layerType:this.type,objectKey:T,value:E,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))},a.prototype.is3D=function(){return!1},a.prototype.isTileClipped=function(){return!1},a.prototype.hasOffscreenPass=function(){return!1},a.prototype.resize=function(){},a.prototype.isStateDependent=function(){for(var d in this.paint._values){var b=this.paint.get(d);if(b instanceof Zs&&zs(b.property.specification)&&("source"===b.value.kind||"composite"===b.value.kind)&&b.value.isStateDependent)return!0}return!1},a}(Ze),xl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nu=function(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},zr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ge(n,a){void 0===a&&(a=1);var d=0,b=0;return{members:n.map(function(T){var E=xl[T.type].BYTES_PER_ELEMENT,L=d=me(d,Math.max(a,E)),H=T.components||1;return b=Math.max(b,E),d+=E*H,{name:T.name,type:T.type,components:H,offset:L}}),size:me(d,Math.max(b,a)),alignment:a}}function me(n,a){return Math.ceil(n/a)*a}zr.serialize=function(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}},zr.deserialize=function(n){var a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a},zr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},zr.prototype.clear=function(){this.length=0},zr.prototype.resize=function(n){this.reserve(n),this.length=n},zr.prototype.reserve=function(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}},zr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var J=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b){var T=this.length;return this.resize(T+1),this.emplace(T,d,b)},a.prototype.emplace=function(d,b,T){var E=2*d;return this.int16[E+0]=b,this.int16[E+1]=T,d},a}(zr);J.prototype.bytesPerElement=4,X("StructArrayLayout2i4",J);var He=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E){var L=this.length;return this.resize(L+1),this.emplace(L,d,b,T,E)},a.prototype.emplace=function(d,b,T,E,L){var H=4*d;return this.int16[H+0]=b,this.int16[H+1]=T,this.int16[H+2]=E,this.int16[H+3]=L,d},a}(zr);He.prototype.bytesPerElement=8,X("StructArrayLayout4i8",He);var zt=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H){var ie=this.length;return this.resize(ie+1),this.emplace(ie,d,b,T,E,L,H)},a.prototype.emplace=function(d,b,T,E,L,H,ie){var xe=6*d;return this.int16[xe+0]=b,this.int16[xe+1]=T,this.int16[xe+2]=E,this.int16[xe+3]=L,this.int16[xe+4]=H,this.int16[xe+5]=ie,d},a}(zr);zt.prototype.bytesPerElement=12,X("StructArrayLayout2i4i12",zt);var hn=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H){var ie=this.length;return this.resize(ie+1),this.emplace(ie,d,b,T,E,L,H)},a.prototype.emplace=function(d,b,T,E,L,H,ie){var xe=4*d,Me=8*d;return this.int16[xe+0]=b,this.int16[xe+1]=T,this.uint8[Me+4]=E,this.uint8[Me+5]=L,this.uint8[Me+6]=H,this.uint8[Me+7]=ie,d},a}(zr);hn.prototype.bytesPerElement=8,X("StructArrayLayout2i4ub8",hn);var Ii=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b){var T=this.length;return this.resize(T+1),this.emplace(T,d,b)},a.prototype.emplace=function(d,b,T){var E=2*d;return this.float32[E+0]=b,this.float32[E+1]=T,d},a}(zr);Ii.prototype.bytesPerElement=8,X("StructArrayLayout2f8",Ii);var Li=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H,ie,xe,Me,Ie){var ze=this.length;return this.resize(ze+1),this.emplace(ze,d,b,T,E,L,H,ie,xe,Me,Ie)},a.prototype.emplace=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze){var $e=10*d;return this.uint16[$e+0]=b,this.uint16[$e+1]=T,this.uint16[$e+2]=E,this.uint16[$e+3]=L,this.uint16[$e+4]=H,this.uint16[$e+5]=ie,this.uint16[$e+6]=xe,this.uint16[$e+7]=Me,this.uint16[$e+8]=Ie,this.uint16[$e+9]=ze,d},a}(zr);Li.prototype.bytesPerElement=20,X("StructArrayLayout10ui20",Li);var Co=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e)},a.prototype.emplace=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe){var yt=12*d;return this.int16[yt+0]=b,this.int16[yt+1]=T,this.int16[yt+2]=E,this.int16[yt+3]=L,this.uint16[yt+4]=H,this.uint16[yt+5]=ie,this.uint16[yt+6]=xe,this.uint16[yt+7]=Me,this.int16[yt+8]=Ie,this.int16[yt+9]=ze,this.int16[yt+10]=$e,this.int16[yt+11]=Oe,d},a}(zr);Co.prototype.bytesPerElement=24,X("StructArrayLayout4i4ui4i24",Co);var gs=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T){var E=this.length;return this.resize(E+1),this.emplace(E,d,b,T)},a.prototype.emplace=function(d,b,T,E){var L=3*d;return this.float32[L+0]=b,this.float32[L+1]=T,this.float32[L+2]=E,d},a}(zr);gs.prototype.bytesPerElement=12,X("StructArrayLayout3f12",gs);var iu=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var b=this.length;return this.resize(b+1),this.emplace(b,d)},a.prototype.emplace=function(d,b){return this.uint32[1*d+0]=b,d},a}(zr);iu.prototype.bytesPerElement=4,X("StructArrayLayout1ul4",iu);var Hu=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H,ie,xe,Me){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,d,b,T,E,L,H,ie,xe,Me)},a.prototype.emplace=function(d,b,T,E,L,H,ie,xe,Me,Ie){var ze=10*d,$e=5*d;return this.int16[ze+0]=b,this.int16[ze+1]=T,this.int16[ze+2]=E,this.int16[ze+3]=L,this.int16[ze+4]=H,this.int16[ze+5]=ie,this.uint32[$e+3]=xe,this.uint16[ze+8]=Me,this.uint16[ze+9]=Ie,d},a}(zr);Hu.prototype.bytesPerElement=20,X("StructArrayLayout6i1ul2ui20",Hu);var Gu=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H){var ie=this.length;return this.resize(ie+1),this.emplace(ie,d,b,T,E,L,H)},a.prototype.emplace=function(d,b,T,E,L,H,ie){var xe=6*d;return this.int16[xe+0]=b,this.int16[xe+1]=T,this.int16[xe+2]=E,this.int16[xe+3]=L,this.int16[xe+4]=H,this.int16[xe+5]=ie,d},a}(zr);Gu.prototype.bytesPerElement=12,X("StructArrayLayout2i2i2i12",Gu);var Zu=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L){var H=this.length;return this.resize(H+1),this.emplace(H,d,b,T,E,L)},a.prototype.emplace=function(d,b,T,E,L,H){var ie=4*d,xe=8*d;return this.float32[ie+0]=b,this.float32[ie+1]=T,this.float32[ie+2]=E,this.int16[xe+6]=L,this.int16[xe+7]=H,d},a}(zr);Zu.prototype.bytesPerElement=16,X("StructArrayLayout2f1f2i16",Zu);var Ec=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E){var L=this.length;return this.resize(L+1),this.emplace(L,d,b,T,E)},a.prototype.emplace=function(d,b,T,E,L){var H=12*d,ie=3*d;return this.uint8[H+0]=b,this.uint8[H+1]=T,this.float32[ie+1]=E,this.float32[ie+2]=L,d},a}(zr);Ec.prototype.bytesPerElement=12,X("StructArrayLayout2ub2f12",Ec);var Xs=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T){var E=this.length;return this.resize(E+1),this.emplace(E,d,b,T)},a.prototype.emplace=function(d,b,T,E){var L=3*d;return this.uint16[L+0]=b,this.uint16[L+1]=T,this.uint16[L+2]=E,d},a}(zr);Xs.prototype.bytesPerElement=6,X("StructArrayLayout3ui6",Xs);var za=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t)},a.prototype.emplace=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t,Wt){var on=24*d,pn=12*d,An=48*d;return this.int16[on+0]=b,this.int16[on+1]=T,this.uint16[on+2]=E,this.uint16[on+3]=L,this.uint32[pn+2]=H,this.uint32[pn+3]=ie,this.uint32[pn+4]=xe,this.uint16[on+10]=Me,this.uint16[on+11]=Ie,this.uint16[on+12]=ze,this.float32[pn+7]=$e,this.float32[pn+8]=Oe,this.uint8[An+36]=yt,this.uint8[An+37]=Et,this.uint8[An+38]=Dt,this.uint32[pn+10]=$t,this.int16[on+22]=Wt,d},a}(zr);za.prototype.bytesPerElement=48,X("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",za);var ru=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t,Wt,on,pn,An,Fn,Vn,Ai,si,Oi,Kn,Ir){var Ki=this.length;return this.resize(Ki+1),this.emplace(Ki,d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t,Wt,on,pn,An,Fn,Vn,Ai,si,Oi,Kn,Ir)},a.prototype.emplace=function(d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt,Et,Dt,$t,Wt,on,pn,An,Fn,Vn,Ai,si,Oi,Kn,Ir,Ki){var yi=34*d,Br=17*d;return this.int16[yi+0]=b,this.int16[yi+1]=T,this.int16[yi+2]=E,this.int16[yi+3]=L,this.int16[yi+4]=H,this.int16[yi+5]=ie,this.int16[yi+6]=xe,this.int16[yi+7]=Me,this.uint16[yi+8]=Ie,this.uint16[yi+9]=ze,this.uint16[yi+10]=$e,this.uint16[yi+11]=Oe,this.uint16[yi+12]=yt,this.uint16[yi+13]=Et,this.uint16[yi+14]=Dt,this.uint16[yi+15]=$t,this.uint16[yi+16]=Wt,this.uint16[yi+17]=on,this.uint16[yi+18]=pn,this.uint16[yi+19]=An,this.uint16[yi+20]=Fn,this.uint16[yi+21]=Vn,this.uint16[yi+22]=Ai,this.uint32[Br+12]=si,this.float32[Br+13]=Oi,this.float32[Br+14]=Kn,this.float32[Br+15]=Ir,this.float32[Br+16]=Ki,d},a}(zr);ru.prototype.bytesPerElement=68,X("StructArrayLayout8i15ui1ul4f68",ru);var ho=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var b=this.length;return this.resize(b+1),this.emplace(b,d)},a.prototype.emplace=function(d,b){return this.float32[1*d+0]=b,d},a}(zr);ho.prototype.bytesPerElement=4,X("StructArrayLayout1f4",ho);var Ds=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T){var E=this.length;return this.resize(E+1),this.emplace(E,d,b,T)},a.prototype.emplace=function(d,b,T,E){var L=3*d;return this.int16[L+0]=b,this.int16[L+1]=T,this.int16[L+2]=E,d},a}(zr);Ds.prototype.bytesPerElement=6,X("StructArrayLayout3i6",Ds);var wl=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T){var E=this.length;return this.resize(E+1),this.emplace(E,d,b,T)},a.prototype.emplace=function(d,b,T,E){var L=4*d;return this.uint32[2*d+0]=b,this.uint16[L+2]=T,this.uint16[L+3]=E,d},a}(zr);wl.prototype.bytesPerElement=8,X("StructArrayLayout1ul2ui8",wl);var _d=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b){var T=this.length;return this.resize(T+1),this.emplace(T,d,b)},a.prototype.emplace=function(d,b,T){var E=2*d;return this.uint16[E+0]=b,this.uint16[E+1]=T,d},a}(zr);_d.prototype.bytesPerElement=4,X("StructArrayLayout2ui4",_d);var ac=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var b=this.length;return this.resize(b+1),this.emplace(b,d)},a.prototype.emplace=function(d,b){return this.uint16[1*d+0]=b,d},a}(zr);ac.prototype.bytesPerElement=2,X("StructArrayLayout1ui2",ac);var Kr=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,b,T,E){var L=this.length;return this.resize(L+1),this.emplace(L,d,b,T,E)},a.prototype.emplace=function(d,b,T,E,L){var H=4*d;return this.float32[H+0]=b,this.float32[H+1]=T,this.float32[H+2]=E,this.float32[H+3]=L,d},a}(zr);Kr.prototype.bytesPerElement=16,X("StructArrayLayout4f16",Kr);var p=function(n){function a(){n.apply(this,arguments)}n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a;var d={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return d.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},d.x1.get=function(){return this._structArray.int16[this._pos2+2]},d.y1.get=function(){return this._structArray.int16[this._pos2+3]},d.x2.get=function(){return this._structArray.int16[this._pos2+4]},d.y2.get=function(){return this._structArray.int16[this._pos2+5]},d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.anchorPoint.get=function(){return new q(this.anchorPointX,this.anchorPointY)},Object.defineProperties(a.prototype,d),a}(nu);p.prototype.size=20;var g=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.get=function(d){return new p(this,d)},a}(Hu);X("CollisionBoxArray",g);var f=function(n){function a(){n.apply(this,arguments)}n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},d.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},d.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},d.segment.get=function(){return this._structArray.uint16[this._pos2+10]},d.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},d.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},d.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},d.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},d.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},d.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},d.placedOrientation.set=function(b){this._structArray.uint8[this._pos1+37]=b},d.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},d.hidden.set=function(b){this._structArray.uint8[this._pos1+38]=b},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},d.crossTileID.set=function(b){this._structArray.uint32[this._pos4+10]=b},d.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(a.prototype,d),a}(nu);f.prototype.size=48;var x=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.get=function(d){return new f(this,d)},a}(za);X("PlacedSymbolArray",x);var P=function(n){function a(){n.apply(this,arguments)}n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},d.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},d.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},d.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},d.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},d.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},d.key.get=function(){return this._structArray.uint16[this._pos2+8]},d.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},d.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},d.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},d.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},d.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},d.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},d.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},d.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},d.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},d.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},d.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},d.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},d.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},d.crossTileID.set=function(b){this._structArray.uint32[this._pos4+12]=b},d.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},d.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},d.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},d.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(a.prototype,d),a}(nu);P.prototype.size=68;var B=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.get=function(d){return new P(this,d)},a}(ru);X("SymbolInstanceArray",B);var V=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.getoffsetX=function(d){return this.float32[1*d+0]},a}(ho);X("GlyphOffsetArray",V);var ee=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.getx=function(d){return this.int16[3*d+0]},a.prototype.gety=function(d){return this.int16[3*d+1]},a.prototype.gettileUnitDistanceFromAnchor=function(d){return this.int16[3*d+2]},a}(Ds);X("SymbolLineVertexArray",ee);var Ce=function(n){function a(){n.apply(this,arguments)}n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a;var d={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(a.prototype,d),a}(nu);Ce.prototype.size=8;var Re=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.get=function(d){return new Ce(this,d)},a}(wl);X("FeatureIndexArray",Re);var I=Ge([{name:"a_pos",components:2,type:"Int16"}],4).members,R=function(n){void 0===n&&(n=[]),this.segments=n};function S(n,a){return 256*(n=Ke(Math.floor(n),0,255))+Ke(Math.floor(a),0,255)}R.prototype.prepareSegment=function(n,a,d,b){var T=this.segments[this.segments.length-1];return n>R.MAX_VERTEX_ARRAY_LENGTH&&Ft("Max vertices per segment is "+R.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+n),(!T||T.vertexLength+n>R.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==b)&&(T={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},void 0!==b&&(T.sortKey=b),this.segments.push(T)),T},R.prototype.get=function(){return this.segments},R.prototype.destroy=function(){for(var n=0,a=this.segments;n<a.length;n+=1){var d=a[n];for(var b in d.vaos)d.vaos[b].destroy()}},R.simpleSegment=function(n,a,d,b){return new R([{vertexOffset:n,primitiveOffset:a,vertexLength:d,primitiveLength:b,vaos:{},sortKey:0}])},R.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,X("SegmentVector",R);var U=Ge([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),$=fe(function(n){n.exports=function(a,d){var b,T,E,L,H,ie,xe,Me;for(T=a.length-(b=3&a.length),E=d,H=3432918353,ie=461845907,Me=0;Me<T;)xe=255&a.charCodeAt(Me)|(255&a.charCodeAt(++Me))<<8|(255&a.charCodeAt(++Me))<<16|(255&a.charCodeAt(++Me))<<24,++Me,E=27492+(65535&(L=5*(65535&(E=(E^=xe=(65535&(xe=(xe=(65535&xe)*H+(((xe>>>16)*H&65535)<<16)&4294967295)<<15|xe>>>17))*ie+(((xe>>>16)*ie&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(xe=0,b){case 3:xe^=(255&a.charCodeAt(Me+2))<<16;case 2:xe^=(255&a.charCodeAt(Me+1))<<8;case 1:E^=xe=(65535&(xe=(xe=(65535&(xe^=255&a.charCodeAt(Me)))*H+(((xe>>>16)*H&65535)<<16)&4294967295)<<15|xe>>>17))*ie+(((xe>>>16)*ie&65535)<<16)&4294967295}return E^=a.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0}}),ue=fe(function(n){n.exports=function(a,d){for(var b,T=a.length,E=d^T,L=0;T>=4;)b=1540483477*(65535&(b=255&a.charCodeAt(L)|(255&a.charCodeAt(++L))<<8|(255&a.charCodeAt(++L))<<16|(255&a.charCodeAt(++L))<<24))+((1540483477*(b>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),T-=4,++L;switch(T){case 3:E^=(255&a.charCodeAt(L+2))<<16;case 2:E^=(255&a.charCodeAt(L+1))<<8;case 1:E=1540483477*(65535&(E^=255&a.charCodeAt(L)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0}}),oe=$,Ne=ue;oe.murmur3=$,oe.murmur2=Ne;var st=function(){this.ids=[],this.positions=[],this.indexed=!1};st.prototype.add=function(n,a,d,b){this.ids.push(Lt(n)),this.positions.push(a,d,b)},st.prototype.getPositions=function(n){for(var a=Lt(n),d=0,b=this.ids.length-1;d<b;){var T=d+b>>1;this.ids[T]>=a?b=T:d=T+1}for(var E=[];this.ids[d]===a;)E.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return E},st.serialize=function(n,a){var d=new Float64Array(n.ids),b=new Uint32Array(n.positions);return function T(E,L,H,ie){for(;H<ie;){for(var xe=E[H+ie>>1],Me=H-1,Ie=ie+1;;){do{Me++}while(E[Me]<xe);do{Ie--}while(E[Ie]>xe);if(Me>=Ie)break;Rt(E,Me,Ie),Rt(L,3*Me,3*Ie),Rt(L,3*Me+1,3*Ie+1),Rt(L,3*Me+2,3*Ie+2)}Ie-H<ie-Ie?(T(E,L,H,Ie),H=Ie+1):(T(E,L,Ie+1,ie),ie=Ie)}}(d,b,0,d.length-1),a&&a.push(d.buffer,b.buffer),{ids:d,positions:b}},st.deserialize=function(n){var a=new st;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a};var Mt=Math.pow(2,53)-1;function Lt(n){var a=+n;return!isNaN(a)&&a<=Mt?a:oe(String(n))}function Rt(n,a,d){var b=n[a];n[a]=n[d],n[d]=b}X("FeaturePositionMap",st);var Xt=function(n,a){this.gl=n.gl,this.location=a},yn=function(n){function a(d,b){n.call(this,d,b),this.current=0}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))},a}(Xt),zn=function(n){function a(d,b){n.call(this,d,b),this.current=0}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))},a}(Xt),Rn=function(n){function a(d,b){n.call(this,d,b),this.current=[0,0]}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))},a}(Xt),qn=function(n){function a(d,b){n.call(this,d,b),this.current=[0,0,0]}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))},a}(Xt),Mi=function(n){function a(d,b){n.call(this,d,b),this.current=[0,0,0,0]}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))},a}(Xt),Si=function(n){function a(d,b){n.call(this,d,b),this.current=Ct.transparent}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))},a}(Xt),Ei=new Float32Array(16),Lr=function(n){function a(d,b){n.call(this,d,b),this.current=Ei}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.set=function(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(var b=1;b<16;b++)if(d[b]!==this.current[b]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}},a}(Xt);function ui(n){return[S(255*n.r,255*n.g),S(255*n.b,255*n.a)]}var tr=function(n,a,d){this.value=n,this.uniformNames=a.map(function(b){return"u_"+b}),this.type=d};tr.prototype.setUniform=function(n,a,d){n.set(d.constantOr(this.value))},tr.prototype.getBinding=function(n,a,d){return"color"===this.type?new Si(n,a):new zn(n,a)};var fr=function(n,a){this.uniformNames=a.map(function(d){return"u_"+d}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};fr.prototype.setConstantPatternPositions=function(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr},fr.prototype.setUniform=function(n,a,d,b){var T="u_pattern_to"===b?this.patternTo:"u_pattern_from"===b?this.patternFrom:"u_pixel_ratio_to"===b?this.pixelRatioTo:"u_pixel_ratio_from"===b?this.pixelRatioFrom:null;T&&n.set(T)},fr.prototype.getBinding=function(n,a,d){return"u_pattern"===d.substr(0,9)?new Mi(n,a):new zn(n,a)};var Ji=function(n,a,d,b){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(function(T){return{name:"a_"+T,type:"Float32",components:"color"===d?2:1,offset:0}}),this.paintVertexArray=new b};Ji.prototype.populatePaintArray=function(n,a,d,b,T){var E=this.paintVertexArray.length,L=this.expression.evaluate(new rr(0),a,{},b,[],T);this.paintVertexArray.resize(n),this._setPaintValue(E,n,L)},Ji.prototype.updatePaintArray=function(n,a,d,b){var T=this.expression.evaluate({zoom:0},d,b);this._setPaintValue(n,a,T)},Ji.prototype._setPaintValue=function(n,a,d){if("color"===this.type)for(var b=ui(d),T=n;T<a;T++)this.paintVertexArray.emplace(T,b[0],b[1]);else{for(var E=n;E<a;E++)this.paintVertexArray.emplace(E,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}},Ji.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ji.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zi=function(n,a,d,b,T,E){this.expression=n,this.uniformNames=a.map(function(L){return"u_"+L+"_t"}),this.type=d,this.useIntegerZoom=b,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=a.map(function(L){return{name:"a_"+L,type:"Float32",components:"color"===d?4:2,offset:0}}),this.paintVertexArray=new E};zi.prototype.populatePaintArray=function(n,a,d,b,T){var E=this.expression.evaluate(new rr(this.zoom),a,{},b,[],T),L=this.expression.evaluate(new rr(this.zoom+1),a,{},b,[],T),H=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(H,n,E,L)},zi.prototype.updatePaintArray=function(n,a,d,b){var T=this.expression.evaluate({zoom:this.zoom},d,b),E=this.expression.evaluate({zoom:this.zoom+1},d,b);this._setPaintValue(n,a,T,E)},zi.prototype._setPaintValue=function(n,a,d,b){if("color"===this.type)for(var T=ui(d),E=ui(b),L=n;L<a;L++)this.paintVertexArray.emplace(L,T[0],T[1],E[0],E[1]);else{for(var H=n;H<a;H++)this.paintVertexArray.emplace(H,d,b);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(b))}},zi.prototype.upload=function(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zi.prototype.setUniform=function(n,a){var d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,b=Ke(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(b)},zi.prototype.getBinding=function(n,a,d){return new zn(n,a)};var nr=function(n,a,d,b,T,E){this.expression=n,this.type=a,this.useIntegerZoom=d,this.zoom=b,this.layerId=E,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T};nr.prototype.populatePaintArray=function(n,a,d){var b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(b,n,a.patterns&&a.patterns[this.layerId],d)},nr.prototype.updatePaintArray=function(n,a,d,b,T){this._setPaintValues(n,a,d.patterns&&d.patterns[this.layerId],T)},nr.prototype._setPaintValues=function(n,a,d,b){if(b&&d){var T=b[d.min],E=b[d.mid],L=b[d.max];if(T&&E&&L)for(var H=n;H<a;H++)this.zoomInPaintVertexArray.emplace(H,E.tl[0],E.tl[1],E.br[0],E.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],E.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,E.tl[0],E.tl[1],E.br[0],E.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],E.pixelRatio,L.pixelRatio)}},nr.prototype.upload=function(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,U.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,U.members,this.expression.isStateDependent))},nr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Bi=function(n,a,d){this.binders={},this._buffers=[];var b=[];for(var T in n.paint._values)if(d(T)){var E=n.paint.get(T);if(E instanceof Zs&&zs(E.property.specification)){var L=Ms(T,n.type),H=E.value,ie=E.property.specification.type,xe=E.property.useIntegerZoom,Me=E.property.specification["property-type"],Ie="cross-faded"===Me||"cross-faded-data-driven"===Me;if("constant"===H.kind)this.binders[T]=Ie?new fr(H.value,L):new tr(H.value,L,ie),b.push("/u_"+T);else if("source"===H.kind||Ie){var ze=Ss(T,ie,"source");this.binders[T]=Ie?new nr(H,ie,xe,a,ze,n.id):new Ji(H,L,ie,ze),b.push("/a_"+T)}else{var $e=Ss(T,ie,"composite");this.binders[T]=new zi(H,L,ie,xe,a,$e),b.push("/z_"+T)}}}this.cacheKey=b.sort().join("")};Bi.prototype.getMaxValue=function(n){var a=this.binders[n];return a instanceof Ji||a instanceof zi?a.maxValue:0},Bi.prototype.populatePaintArrays=function(n,a,d,b,T){for(var E in this.binders){var L=this.binders[E];(L instanceof Ji||L instanceof zi||L instanceof nr)&&L.populatePaintArray(n,a,d,b,T)}},Bi.prototype.setConstantPatternPositions=function(n,a){for(var d in this.binders){var b=this.binders[d];b instanceof fr&&b.setConstantPatternPositions(n,a)}},Bi.prototype.updatePaintArrays=function(n,a,d,b,T){var E=!1;for(var L in n)for(var H=0,ie=a.getPositions(L);H<ie.length;H+=1){var xe=ie[H],Me=d.feature(xe.index);for(var Ie in this.binders){var ze=this.binders[Ie];if((ze instanceof Ji||ze instanceof zi||ze instanceof nr)&&!0===ze.expression.isStateDependent){var $e=b.paint.get(Ie);ze.expression=$e.value,ze.updatePaintArray(xe.start,xe.end,Me,n[L],T),E=!0}}}return E},Bi.prototype.defines=function(){var n=[];for(var a in this.binders){var d=this.binders[a];(d instanceof tr||d instanceof fr)&&n.push.apply(n,d.uniformNames.map(function(b){return"#define HAS_UNIFORM_"+b}))}return n},Bi.prototype.getBinderAttributes=function(){var n=[];for(var a in this.binders){var d=this.binders[a];if(d instanceof Ji||d instanceof zi)for(var b=0;b<d.paintVertexAttributes.length;b++)n.push(d.paintVertexAttributes[b].name);else if(d instanceof nr)for(var T=0;T<U.members.length;T++)n.push(U.members[T].name)}return n},Bi.prototype.getBinderUniforms=function(){var n=[];for(var a in this.binders){var d=this.binders[a];if(d instanceof tr||d instanceof fr||d instanceof zi)for(var b=0,T=d.uniformNames;b<T.length;b+=1)n.push(T[b])}return n},Bi.prototype.getPaintVertexBuffers=function(){return this._buffers},Bi.prototype.getUniforms=function(n,a){var d=[];for(var b in this.binders){var T=this.binders[b];if(T instanceof tr||T instanceof fr||T instanceof zi)for(var E=0,L=T.uniformNames;E<L.length;E+=1){var H=L[E];if(a[H]){var ie=T.getBinding(n,a[H],H);d.push({name:H,property:b,binding:ie})}}}return d},Bi.prototype.setUniforms=function(n,a,d,b){for(var T=0,E=a;T<E.length;T+=1){var L=E[T],H=L.name,ie=L.property;this.binders[ie].setUniform(L.binding,b,d.get(ie),H)}},Bi.prototype.updatePaintBuffers=function(n){for(var a in this._buffers=[],this.binders){var d=this.binders[a];if(n&&d instanceof nr){var b=2===n.fromScale?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(d instanceof Ji||d instanceof zi)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}},Bi.prototype.upload=function(n){for(var a in this.binders){var d=this.binders[a];(d instanceof Ji||d instanceof zi||d instanceof nr)&&d.upload(n)}this.updatePaintBuffers()},Bi.prototype.destroy=function(){for(var n in this.binders){var a=this.binders[n];(a instanceof Ji||a instanceof zi||a instanceof nr)&&a.destroy()}};var Zi=function(n,a,d){void 0===d&&(d=function(){return!0}),this.programConfigurations={};for(var b=0,T=n;b<T.length;b+=1){var E=T[b];this.programConfigurations[E.id]=new Bi(E,a,d)}this.needsUpload=!1,this._featureMap=new st,this._bufferOffset=0};function Ms(n,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(a+"-","").replace(/-/g,"_")]}function Ss(n,a,d){var T={"line-pattern":{source:Li,composite:Li},"fill-pattern":{source:Li,composite:Li},"fill-extrusion-pattern":{source:Li,composite:Li}}[n];return T&&T[d]||{color:{source:Ii,composite:Kr},number:{source:ho,composite:Ii}}[a][d]}Zi.prototype.populatePaintArrays=function(n,a,d,b,T,E){for(var L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(n,a,b,T,E);void 0!==a.id&&this._featureMap.add(a.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0},Zi.prototype.updatePaintArrays=function(n,a,d,b){for(var T=0,E=d;T<E.length;T+=1){var L=E[T];this.needsUpload=this.programConfigurations[L.id].updatePaintArrays(n,this._featureMap,a,L,b)||this.needsUpload}},Zi.prototype.get=function(n){return this.programConfigurations[n]},Zi.prototype.upload=function(n){if(this.needsUpload){for(var a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}},Zi.prototype.destroy=function(){for(var n in this.programConfigurations)this.programConfigurations[n].destroy()},X("ConstantBinder",tr),X("CrossFadedConstantBinder",fr),X("SourceExpressionBinder",Ji),X("CrossFadedCompositeBinder",nr),X("CompositeExpressionBinder",zi),X("ProgramConfiguration",Bi,{omit:["_buffers"]}),X("ProgramConfigurationSet",Zi);var ja=Math.pow(2,14)-1,ks=-ja-1;function $o(n){for(var a=8192/n.extent,d=n.loadGeometry(),b=0;b<d.length;b++)for(var T=d[b],E=0;E<T.length;E++){var L=T[E],H=Math.round(L.x*a),ie=Math.round(L.y*a);L.x=Ke(H,ks,ja),L.y=Ke(ie,ks,ja),(H<L.x||H>L.x+1||ie<L.y||ie>L.y+1)&&Ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return d}function is(n,a){return{type:n.type,id:n.id,properties:n.properties,geometry:a?$o(n):[]}}function ol(n,a,d,b,T){n.emplaceBack(2*a+(b+1)/2,2*d+(T+1)/2)}var sl=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new J,this.indexArray=new Xs,this.segments=new R,this.programConfigurations=new Zi(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};function Cl(n,a){for(var d=0;d<n.length;d++)if(bu(a,n[d]))return!0;for(var b=0;b<a.length;b++)if(bu(n,a[b]))return!0;return!!Ac(n,a)}function Ys(n,a,d){return!!bu(n,a)||!!Oc(a,n,d)}function Tl(n,a){if(1===n.length)return Ld(a,n[0]);for(var d=0;d<a.length;d++)for(var b=a[d],T=0;T<b.length;T++)if(bu(n,b[T]))return!0;for(var E=0;E<n.length;E++)if(Ld(a,n[E]))return!0;for(var L=0;L<a.length;L++)if(Ac(n,a[L]))return!0;return!1}function vu(n,a,d){if(n.length>1){if(Ac(n,a))return!0;for(var b=0;b<a.length;b++)if(Oc(a[b],n,d))return!0}for(var T=0;T<n.length;T++)if(Oc(n[T],a,d))return!0;return!1}function Ac(n,a){if(0===n.length||0===a.length)return!1;for(var d=0;d<n.length-1;d++)for(var b=n[d],T=n[d+1],E=0;E<a.length-1;E++)if(Ic(b,T,a[E],a[E+1]))return!0;return!1}function Ic(n,a,d,b){return kt(n,d,b)!==kt(a,d,b)&&kt(n,a,d)!==kt(n,a,b)}function Oc(n,a,d){var b=d*d;if(1===a.length)return n.distSqr(a[0])<b;for(var T=1;T<a.length;T++)if(ou(n,a[T-1],a[T])<b)return!0;return!1}function ou(n,a,d){var b=a.distSqr(d);if(0===b)return n.distSqr(a);var T=((n.x-a.x)*(d.x-a.x)+(n.y-a.y)*(d.y-a.y))/b;return n.distSqr(T<0?a:T>1?d:d.sub(a)._mult(T)._add(a))}function Ld(n,a){for(var d,b,T,E=!1,L=0;L<n.length;L++)for(var H=0,ie=(d=n[L]).length-1;H<d.length;ie=H++)(b=d[H]).y>a.y!=(T=d[ie]).y>a.y&&a.x<(T.x-b.x)*(a.y-b.y)/(T.y-b.y)+b.x&&(E=!E);return E}function bu(n,a){for(var d=!1,b=0,T=n.length-1;b<n.length;T=b++){var E=n[b],L=n[T];E.y>a.y!=L.y>a.y&&a.x<(L.x-E.x)*(a.y-E.y)/(L.y-E.y)+E.x&&(d=!d)}return d}function Kc(n,a,d){var b=d[0],T=d[2];if(n.x<b.x&&a.x<b.x||n.x>T.x&&a.x>T.x||n.y<b.y&&a.y<b.y||n.y>T.y&&a.y>T.y)return!1;var E=kt(n,a,d[0]);return E!==kt(n,a,d[1])||E!==kt(n,a,d[2])||E!==kt(n,a,d[3])}function lc(n,a,d){var b=a.paint.get(n).value;return"constant"===b.kind?b.value:d.programConfigurations.get(a.id).getMaxValue(n)}function ya(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vc(n,a,d,b,T){if(!a[0]&&!a[1])return n;var E=q.convert(a)._mult(T);"viewport"===d&&E._rotate(-b);for(var L=[],H=0;H<n.length;H++)L.push(n[H].sub(E));return L}sl.prototype.populate=function(n,a,d){var b=this.layers[0],T=[],E=null;"circle"===b.type&&(E=b.layout.get("circle-sort-key"));for(var L=0,H=n;L<H.length;L+=1){var ie=H[L],xe=ie.feature,Me=ie.id,Ie=ie.index,ze=ie.sourceLayerIndex,$e=this.layers[0]._featureFilter.needGeometry,Oe=is(xe,$e);if(this.layers[0]._featureFilter.filter(new rr(this.zoom),Oe,d)){var yt=E?E.evaluate(Oe,{},d):void 0,Et={id:Me,properties:xe.properties,type:xe.type,sourceLayerIndex:ze,index:Ie,geometry:$e?Oe.geometry:$o(xe),patterns:{},sortKey:yt};T.push(Et)}}E&&T.sort(function(Vn,Ai){return Vn.sortKey-Ai.sortKey});for(var Dt=0,$t=T;Dt<$t.length;Dt+=1){var Wt=$t[Dt],on=Wt.geometry,pn=Wt.index,An=Wt.sourceLayerIndex,Fn=n[pn].feature;this.addFeature(Wt,on,pn,d),a.featureIndex.insert(Fn,on,pn,An,this.index)}},sl.prototype.update=function(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)},sl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},sl.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,I),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},sl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},sl.prototype.addFeature=function(n,a,d,b){for(var T=0,E=a;T<E.length;T+=1)for(var L=0,H=E[T];L<H.length;L+=1){var ie=H[L],xe=ie.x,Me=ie.y;if(!(xe<0||xe>=8192||Me<0||Me>=8192)){var Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),ze=Ie.vertexLength;ol(this.layoutVertexArray,xe,Me,-1,-1),ol(this.layoutVertexArray,xe,Me,1,-1),ol(this.layoutVertexArray,xe,Me,1,1),ol(this.layoutVertexArray,xe,Me,-1,1),this.indexArray.emplaceBack(ze,ze+1,ze+2),this.indexArray.emplaceBack(ze,ze+3,ze+2),Ie.vertexLength+=4,Ie.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},b)},X("CircleBucket",sl,{omit:["layers"]});var Xc=new ms({"circle-sort-key":new ei(Pe.layout_circle["circle-sort-key"])}),Pc={paint:new ms({"circle-radius":new ei(Pe.paint_circle["circle-radius"]),"circle-color":new ei(Pe.paint_circle["circle-color"]),"circle-blur":new ei(Pe.paint_circle["circle-blur"]),"circle-opacity":new ei(Pe.paint_circle["circle-opacity"]),"circle-translate":new li(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new li(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new li(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new li(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(Pe.paint_circle["circle-stroke-opacity"])}),layout:Xc},To=typeof Float32Array<"u"?Float32Array:Array;function xu(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Vl(n,a,d){var b=a[0],T=a[1],E=a[2],L=a[3],H=a[4],ie=a[5],xe=a[6],Me=a[7],Ie=a[8],ze=a[9],$e=a[10],Oe=a[11],yt=a[12],Et=a[13],Dt=a[14],$t=a[15],Wt=d[0],on=d[1],pn=d[2],An=d[3];return n[0]=Wt*b+on*H+pn*Ie+An*yt,n[1]=Wt*T+on*ie+pn*ze+An*Et,n[2]=Wt*E+on*xe+pn*$e+An*Dt,n[3]=Wt*L+on*Me+pn*Oe+An*$t,n[4]=(Wt=d[4])*b+(on=d[5])*H+(pn=d[6])*Ie+(An=d[7])*yt,n[5]=Wt*T+on*ie+pn*ze+An*Et,n[6]=Wt*E+on*xe+pn*$e+An*Dt,n[7]=Wt*L+on*Me+pn*Oe+An*$t,n[8]=(Wt=d[8])*b+(on=d[9])*H+(pn=d[10])*Ie+(An=d[11])*yt,n[9]=Wt*T+on*ie+pn*ze+An*Et,n[10]=Wt*E+on*xe+pn*$e+An*Dt,n[11]=Wt*L+on*Me+pn*Oe+An*$t,n[12]=(Wt=d[12])*b+(on=d[13])*H+(pn=d[14])*Ie+(An=d[15])*yt,n[13]=Wt*T+on*ie+pn*ze+An*Et,n[14]=Wt*E+on*xe+pn*$e+An*Dt,n[15]=Wt*L+on*Me+pn*Oe+An*$t,n}Math.hypot||(Math.hypot=function(){for(var n=arguments,a=0,d=arguments.length;d--;)a+=n[d]*n[d];return Math.sqrt(a)});var bc,n,Im=Vl;function jh(n,a,d){var b=a[0],T=a[1],E=a[2],L=a[3];return n[0]=d[0]*b+d[4]*T+d[8]*E+d[12]*L,n[1]=d[1]*b+d[5]*T+d[9]*E+d[13]*L,n[2]=d[2]*b+d[6]*T+d[10]*E+d[14]*L,n[3]=d[3]*b+d[7]*T+d[11]*E+d[15]*L,n}bc=new To(3),To!=Float32Array&&(bc[0]=0,bc[1]=0,bc[2]=0),n=new To(4),To!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0);var Vh=(function(){var n=new To(2);To!=Float32Array&&(n[0]=0,n[1]=0)}(),function(n){function a(d){n.call(this,d,Pc)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.createBucket=function(d){return new sl(d)},a.prototype.queryRadius=function(d){var b=d;return lc("circle-radius",this,b)+lc("circle-stroke-width",this,b)+ya(this.paint.get("circle-translate"))},a.prototype.queryIntersectsFeature=function(d,b,T,E,L,H,ie,xe){for(var Me=vc(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),H.angle,ie),Ie=this.paint.get("circle-radius").evaluate(b,T)+this.paint.get("circle-stroke-width").evaluate(b,T),ze="map"===this.paint.get("circle-pitch-alignment"),$e=ze?Me:function(Fn,Vn){return Fn.map(function(Ai){return yd(Ai,Vn)})}(Me,xe),Oe=ze?Ie*ie:Ie,yt=0,Et=E;yt<Et.length;yt+=1)for(var Dt=0,$t=Et[yt];Dt<$t.length;Dt+=1){var Wt=$t[Dt],on=ze?Wt:yd(Wt,xe),pn=Oe,An=jh([],[Wt.x,Wt.y,0,1],xe);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?pn*=An[3]/H.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(pn*=H.cameraToCenterDistance/An[3]),Ys($e,on,pn))return!0}return!1},a}(rl));function yd(n,a){var d=jh([],[n.x,n.y,0,1],a);return new q(d[0]/d[3],d[1]/d[3])}var Of=function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a}(sl);function kc(n,a,d,b){var T=a.width,E=a.height;if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==T*E*d)throw new RangeError("mismatched image size")}else b=new Uint8Array(T*E*d);return n.width=T,n.height=E,n.data=b,n}function kp(n,a,d){var b=a.width,T=a.height;if(b!==n.width||T!==n.height){var E=kc({},{width:b,height:T},d);Hh(n,E,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,b),height:Math.min(n.height,T)},d),n.width=b,n.height=T,n.data=E.data}}function Hh(n,a,d,b,T,E){if(0===T.width||0===T.height)return a;if(T.width>n.width||T.height>n.height||d.x>n.width-T.width||d.y>n.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>a.width||T.height>a.height||b.x>a.width-T.width||b.y>a.height-T.height)throw new RangeError("out of range destination coordinates for image copy");for(var L=n.data,H=a.data,ie=0;ie<T.height;ie++)for(var xe=((d.y+ie)*n.width+d.x)*E,Me=((b.y+ie)*a.width+b.x)*E,Ie=0;Ie<T.width*E;Ie++)H[Me+Ie]=L[xe+Ie];return a}X("HeatmapBucket",Of,{omit:["layers"]});var Bd=function(n,a){kc(this,n,1,a)};Bd.prototype.resize=function(n){kp(this,n,1)},Bd.prototype.clone=function(){return new Bd({width:this.width,height:this.height},new Uint8Array(this.data))},Bd.copy=function(n,a,d,b,T){Hh(n,a,d,b,T,1)};var Dl=function(n,a){kc(this,n,4,a)};Dl.prototype.resize=function(n){kp(this,n,4)},Dl.prototype.replace=function(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n},Dl.prototype.clone=function(){return new Dl({width:this.width,height:this.height},new Uint8Array(this.data))},Dl.copy=function(n,a,d,b,T){Hh(n,a,d,b,T,4)},X("AlphaImage",Bd),X("RGBAImage",Dl);var dh={paint:new ms({"heatmap-radius":new ei(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new li(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $s(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new li(Pe.paint_heatmap["heatmap-opacity"])})};function Rp(n){var a={},d=n.resolution||256,b=n.clips?n.clips.length:1,T=n.image||new Dl({width:d,height:b}),E=function(Oe,yt,Et){a[n.evaluationKey]=Et;var Dt=n.expression.evaluate(a);T.data[Oe+yt+0]=Math.floor(255*Dt.r/Dt.a),T.data[Oe+yt+1]=Math.floor(255*Dt.g/Dt.a),T.data[Oe+yt+2]=Math.floor(255*Dt.b/Dt.a),T.data[Oe+yt+3]=Math.floor(255*Dt.a)};if(n.clips)for(var L=0,H=0;L<b;++L,H+=4*d)for(var ie=0,xe=0;ie<d;ie++,xe+=4){var Me=ie/(d-1),Ie=n.clips[L];E(H,xe,Ie.start*(1-Me)+Ie.end*Me)}else for(var ze=0,$e=0;ze<d;ze++,$e+=4)E(0,$e,ze/(d-1));return T}var Hl=function(n){function a(d){n.call(this,d,dh),this._updateColorRamp()}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.createBucket=function(d){return new Of(d)},a.prototype._handleSpecialPaintPropertyUpdate=function(d){"heatmap-color"===d&&this._updateColorRamp()},a.prototype._updateColorRamp=function(){this.colorRamp=Rp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},a.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},a}(rl),Rs={paint:new ms({"hillshade-illumination-direction":new li(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new li(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new li(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new li(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new li(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new li(Pe.paint_hillshade["hillshade-accent-color"])})},$u=function(n){function a(d){n.call(this,d,Rs)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},a}(rl),Pf=Ge([{name:"a_pos",components:2,type:"Int16"}],4).members,hh=ph,Om=ph;function ph(n,a,d){d=d||2;var b,T,E,L,H,ie,xe,Me=a&&a.length,Ie=Me?a[0]*d:n.length,ze=Ud(n,0,Ie,d,!0),$e=[];if(!ze||ze.next===ze.prev)return $e;if(Me&&(ze=function(yt,Et,Dt,$t){var Wt,on,pn,An=[];for(Wt=0,on=Et.length;Wt<on;Wt++)(pn=Ud(yt,Et[Wt]*$t,Wt<on-1?Et[Wt+1]*$t:yt.length,$t,!1))===pn.next&&(pn.steiner=!0),An.push(Ka(pn));for(An.sort(wu),Wt=0;Wt<An.length;Wt++)kf(An[Wt],Dt),Dt=ed(Dt,Dt.next);return Dt}(n,a,ze,d)),n.length>80*d){b=E=n[0],T=L=n[1];for(var Oe=d;Oe<Ie;Oe+=d)(H=n[Oe])<b&&(b=H),(ie=n[Oe+1])<T&&(T=ie),H>E&&(E=H),ie>L&&(L=ie);xe=0!==(xe=Math.max(E-b,L-T))?1/xe:0}return Rc(ze,$e,d,b,T,xe),$e}function Ud(n,a,d,b,T){var E,L;if(T===Bp(n,a,d,b)>0)for(E=a;E<d;E+=b)L=Og(E,n[E],n[E+1],L);else for(E=d-b;E>=a;E-=b)L=Og(E,n[E],n[E+1],L);return L&&uc(L,L.next)&&(Np(L),L=L.next),L}function ed(n,a){if(!n)return n;a||(a=n);var d,b=n;do{if(d=!1,b.steiner||!uc(b,b.next)&&0!==Es(b.prev,b,b.next))b=b.next;else{if(Np(b),(b=a=b.prev)===b.next)break;d=!0}}while(d||b!==a);return a}function Rc(n,a,d,b,T,E,L){if(n){!L&&E&&function(Me,Ie,ze,$e){var Oe=Me;do{null===Oe.z&&(Oe.z=xc(Oe.x,Oe.y,Ie,ze,$e)),Oe.prevZ=Oe.prev,Oe.nextZ=Oe.next,Oe=Oe.next}while(Oe!==Me);Oe.prevZ.nextZ=null,Oe.prevZ=null,function(yt){var Et,Dt,$t,Wt,on,pn,An,Fn,Vn=1;do{for(Dt=yt,yt=null,on=null,pn=0;Dt;){for(pn++,$t=Dt,An=0,Et=0;Et<Vn&&(An++,$t=$t.nextZ);Et++);for(Fn=Vn;An>0||Fn>0&&$t;)0!==An&&(0===Fn||!$t||Dt.z<=$t.z)?(Wt=Dt,Dt=Dt.nextZ,An--):(Wt=$t,$t=$t.nextZ,Fn--),on?on.nextZ=Wt:yt=Wt,Wt.prevZ=on,on=Wt;Dt=$t}on.nextZ=null,Vn*=2}while(pn>1)}(Oe)}(n,b,T,E);for(var H,ie,xe=n;n.prev!==n.next;)if(H=n.prev,ie=n.next,E?Fp(n,b,T,E):Gh(n))a.push(H.i/d),a.push(n.i/d),a.push(ie.i/d),Np(n),n=ie.next,xe=ie.next;else if((n=ie)===xe){L?1===L?Rc(n=Pm(ed(n),a,d),a,d,b,T,E,2):2===L&&km(n,a,d,b,T,E):Rc(ed(n),a,d,b,T,E,1);break}}}function Gh(n){var a=n.prev,d=n,b=n.next;if(Es(a,d,b)>=0)return!1;for(var T=n.next.next;T!==n.prev;){if(Yu(a.x,a.y,d.x,d.y,b.x,b.y,T.x,T.y)&&Es(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function Fp(n,a,d,b){var T=n.prev,E=n,L=n.next;if(Es(T,E,L)>=0)return!1;for(var H=T.x>E.x?T.x>L.x?T.x:L.x:E.x>L.x?E.x:L.x,ie=T.y>E.y?T.y>L.y?T.y:L.y:E.y>L.y?E.y:L.y,xe=xc(T.x<E.x?T.x<L.x?T.x:L.x:E.x<L.x?E.x:L.x,T.y<E.y?T.y<L.y?T.y:L.y:E.y<L.y?E.y:L.y,a,d,b),Me=xc(H,ie,a,d,b),Ie=n.prevZ,ze=n.nextZ;Ie&&Ie.z>=xe&&ze&&ze.z<=Me;){if(Ie!==n.prev&&Ie!==n.next&&Yu(T.x,T.y,E.x,E.y,L.x,L.y,Ie.x,Ie.y)&&Es(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,ze!==n.prev&&ze!==n.next&&Yu(T.x,T.y,E.x,E.y,L.x,L.y,ze.x,ze.y)&&Es(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Ie&&Ie.z>=xe;){if(Ie!==n.prev&&Ie!==n.next&&Yu(T.x,T.y,E.x,E.y,L.x,L.y,Ie.x,Ie.y)&&Es(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;ze&&ze.z<=Me;){if(ze!==n.prev&&ze!==n.next&&Yu(T.x,T.y,E.x,E.y,L.x,L.y,ze.x,ze.y)&&Es(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function Pm(n,a,d){var b=n;do{var T=b.prev,E=b.next.next;!uc(T,E)&&fh(T,b,b.next,E)&&Yh(T,E)&&Yh(E,T)&&(a.push(T.i/d),a.push(b.i/d),a.push(E.i/d),Np(b),Np(b.next),b=n=E),b=b.next}while(b!==n);return ed(b)}function km(n,a,d,b,T,E){var L=n;do{for(var H=L.next.next;H!==L.prev;){if(L.i!==H.i&&Rf(L,H)){var ie=Rm(L,H);return L=ed(L,L.next),ie=ed(ie,ie.next),Rc(L,a,d,b,T,E),void Rc(ie,a,d,b,T,E)}H=H.next}L=L.next}while(L!==n)}function wu(n,a){return n.x-a.x}function kf(n,a){if(a=function(b,T){var E,L=T,H=b.x,ie=b.y,xe=-1/0;do{if(ie<=L.y&&ie>=L.next.y&&L.next.y!==L.y){var Me=L.x+(ie-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(Me<=H&&Me>xe){if(xe=Me,Me===H){if(ie===L.y)return L;if(ie===L.next.y)return L.next}E=L.x<L.next.x?L:L.next}}L=L.next}while(L!==T);if(!E)return null;if(H===xe)return E;var Ie,ze=E,$e=E.x,Oe=E.y,yt=1/0;L=E;do{H>=L.x&&L.x>=$e&&H!==L.x&&Yu(ie<Oe?H:xe,ie,$e,Oe,ie<Oe?xe:H,ie,L.x,L.y)&&(Ie=Math.abs(ie-L.y)/(H-L.x),Yh(L,b)&&(Ie<yt||Ie===yt&&(L.x>E.x||L.x===E.x&&zd(E,L)))&&(E=L,yt=Ie)),L=L.next}while(L!==ze);return E}(n,a)){var d=Rm(a,n);ed(a,a.next),ed(d,d.next)}}function zd(n,a){return Es(n.prev,n,a.prev)<0&&Es(a.next,n,n.next)<0}function xc(n,a,d,b,T){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-d)*T)|n<<8))|n<<4))|n<<2))|n<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-b)*T)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Ka(n){var a=n,d=n;do{(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next}while(a!==n);return d}function Yu(n,a,d,b,T,E,L,H){return(T-L)*(a-H)-(n-L)*(E-H)>=0&&(n-L)*(b-H)-(d-L)*(a-H)>=0&&(d-L)*(E-H)-(T-L)*(b-H)>=0}function Rf(n,a){return n.next.i!==a.i&&n.prev.i!==a.i&&!function(d,b){var T=d;do{if(T.i!==d.i&&T.next.i!==d.i&&T.i!==b.i&&T.next.i!==b.i&&fh(T,T.next,d,b))return!0;T=T.next}while(T!==d);return!1}(n,a)&&(Yh(n,a)&&Yh(a,n)&&function(d,b){var T=d,E=!1,L=(d.x+b.x)/2,H=(d.y+b.y)/2;do{T.y>H!=T.next.y>H&&T.next.y!==T.y&&L<(T.next.x-T.x)*(H-T.y)/(T.next.y-T.y)+T.x&&(E=!E),T=T.next}while(T!==d);return E}(n,a)&&(Es(n.prev,n,a.prev)||Es(n,a.prev,a))||uc(n,a)&&Es(n.prev,n,n.next)>0&&Es(a.prev,a,a.next)>0)}function Es(n,a,d){return(a.y-n.y)*(d.x-a.x)-(a.x-n.x)*(d.y-a.y)}function uc(n,a){return n.x===a.x&&n.y===a.y}function fh(n,a,d,b){var T=$h(Es(n,a,d)),E=$h(Es(n,a,b)),L=$h(Es(d,b,n)),H=$h(Es(d,b,a));return T!==E&&L!==H||!(0!==T||!Zh(n,d,a))||!(0!==E||!Zh(n,b,a))||!(0!==L||!Zh(d,n,b))||!(0!==H||!Zh(d,a,b))}function Zh(n,a,d){return a.x<=Math.max(n.x,d.x)&&a.x>=Math.min(n.x,d.x)&&a.y<=Math.max(n.y,d.y)&&a.y>=Math.min(n.y,d.y)}function $h(n){return n>0?1:n<0?-1:0}function Yh(n,a){return Es(n.prev,n,n.next)<0?Es(n,a,n.next)>=0&&Es(n,n.prev,a)>=0:Es(n,a,n.prev)<0||Es(n,n.next,a)<0}function Rm(n,a){var d=new Lp(n.i,n.x,n.y),b=new Lp(a.i,a.x,a.y),T=n.next,E=a.prev;return n.next=a,a.prev=n,d.next=T,T.prev=d,b.next=d,d.prev=b,E.next=b,b.prev=E,b}function Og(n,a,d,b){var T=new Lp(n,a,d);return b?(T.next=b.next,T.prev=b,b.next.prev=T,b.next=T):(T.prev=T,T.next=T),T}function Np(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Lp(n,a,d){this.i=n,this.x=a,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bp(n,a,d,b){for(var T=0,E=a,L=d-b;E<d;E+=b)T+=(n[L]-n[E])*(n[E+1]+n[L+1]),L=E;return T}function A_(n,a,d,b,T){!function E(L,H,ie,xe,Me){for(;xe>ie;){if(xe-ie>600){var Ie=xe-ie+1,ze=H-ie+1,$e=Math.log(Ie),Oe=.5*Math.exp(2*$e/3),yt=.5*Math.sqrt($e*Oe*(Ie-Oe)/Ie)*(ze-Ie/2<0?-1:1);E(L,H,Math.max(ie,Math.floor(H-ze*Oe/Ie+yt)),Math.min(xe,Math.floor(H+(Ie-ze)*Oe/Ie+yt)),Me)}var Et=L[H],Dt=ie,$t=xe;for(vd(L,ie,H),Me(L[xe],Et)>0&&vd(L,ie,xe);Dt<$t;){for(vd(L,Dt,$t),Dt++,$t--;Me(L[Dt],Et)<0;)Dt++;for(;Me(L[$t],Et)>0;)$t--}0===Me(L[ie],Et)?vd(L,ie,$t):vd(L,++$t,xe),$t<=H&&(ie=$t+1),H<=$t&&(xe=$t-1)}}(n,a,d||0,b||n.length-1,T||I_)}function vd(n,a,d){var b=n[a];n[a]=n[d],n[d]=b}function I_(n,a){return n<a?-1:n>a?1:0}function Fm(n,a){var d=n.length;if(d<=1)return[n];for(var b,T,E=[],L=0;L<d;L++){var H=bn(n[L]);0!==H&&(n[L].area=Math.abs(H),void 0===T&&(T=H<0),T===H<0?(b&&E.push(b),b=[n[L]]):b.push(n[L]))}if(b&&E.push(b),a>1)for(var ie=0;ie<E.length;ie++)E[ie].length<=a||(A_(E[ie],a,1,E[ie].length-1,Ff),E[ie]=E[ie].slice(0,a));return E}function Ff(n,a){return a.area-n.area}function qh(n,a,d){for(var b=d.patternDependencies,T=!1,E=0,L=a;E<L.length;E+=1){var H=L[E].paint.get(n+"-pattern");H.isConstant()||(T=!0);var ie=H.constantOr(null);ie&&(T=!0,b[ie.to]=!0,b[ie.from]=!0)}return T}function Up(n,a,d,b,T){for(var E=T.patternDependencies,L=0,H=a;L<H.length;L+=1){var ie=H[L],xe=ie.paint.get(n+"-pattern").value;if("constant"!==xe.kind){var Me=xe.evaluate({zoom:b-1},d,{},T.availableImages),Ie=xe.evaluate({zoom:b},d,{},T.availableImages),ze=xe.evaluate({zoom:b+1},d,{},T.availableImages);Ie=Ie&&Ie.name?Ie.name:Ie,ze=ze&&ze.name?ze.name:ze,E[Me=Me&&Me.name?Me.name:Me]=!0,E[Ie]=!0,E[ze]=!0,d.patterns[ie.id]={min:Me,mid:Ie,max:ze}}}return d}ph.deviation=function(n,a,d,b){var T=a&&a.length,E=Math.abs(Bp(n,0,T?a[0]*d:n.length,d));if(T)for(var L=0,H=a.length;L<H;L++)E-=Math.abs(Bp(n,a[L]*d,L<H-1?a[L+1]*d:n.length,d));var ie=0;for(L=0;L<b.length;L+=3){var xe=b[L]*d,Me=b[L+1]*d,Ie=b[L+2]*d;ie+=Math.abs((n[xe]-n[Ie])*(n[Me+1]-n[xe+1])-(n[xe]-n[Me])*(n[Ie+1]-n[xe+1]))}return 0===E&&0===ie?0:Math.abs((ie-E)/E)},ph.flatten=function(n){for(var a=n[0][0].length,d={vertices:[],holes:[],dimensions:a},b=0,T=0;T<n.length;T++){for(var E=0;E<n[T].length;E++)for(var L=0;L<a;L++)d.vertices.push(n[T][E][L]);T>0&&d.holes.push(b+=n[T-1].length)}return d},hh.default=Om;var su=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new J,this.indexArray=new Xs,this.indexArray2=new _d,this.programConfigurations=new Zi(n.layers,n.zoom),this.segments=new R,this.segments2=new R,this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};su.prototype.populate=function(n,a,d){this.hasPattern=qh("fill",this.layers,a);for(var b=this.layers[0].layout.get("fill-sort-key"),T=[],E=0,L=n;E<L.length;E+=1){var H=L[E],ie=H.feature,xe=H.id,Me=H.index,Ie=H.sourceLayerIndex,ze=this.layers[0]._featureFilter.needGeometry,$e=is(ie,ze);if(this.layers[0]._featureFilter.filter(new rr(this.zoom),$e,d)){var Oe=b?b.evaluate($e,{},d,a.availableImages):void 0,yt={id:xe,properties:ie.properties,type:ie.type,sourceLayerIndex:Ie,index:Me,geometry:ze?$e.geometry:$o(ie),patterns:{},sortKey:Oe};T.push(yt)}}b&&T.sort(function(Fn,Vn){return Fn.sortKey-Vn.sortKey});for(var Et=0,Dt=T;Et<Dt.length;Et+=1){var $t=Dt[Et],Wt=$t.geometry,on=$t.index,pn=$t.sourceLayerIndex;if(this.hasPattern){var An=Up("fill",this.layers,$t,this.zoom,a);this.patternFeatures.push(An)}else this.addFeature($t,Wt,on,d,{});a.featureIndex.insert(n[on].feature,Wt,on,pn,this.index)}},su.prototype.update=function(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)},su.prototype.addFeatures=function(n,a,d){for(var b=0,T=this.patternFeatures;b<T.length;b+=1){var E=T[b];this.addFeature(E,E.geometry,E.index,a,d)}},su.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},su.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},su.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Pf),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0},su.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},su.prototype.addFeature=function(n,a,d,b,T){for(var E=0,L=Fm(a,500);E<L.length;E+=1){for(var H=L[E],ie=0,xe=0,Me=H;xe<Me.length;xe+=1)ie+=Me[xe].length;for(var Ie=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray),ze=Ie.vertexLength,$e=[],Oe=[],yt=0,Et=H;yt<Et.length;yt+=1){var Dt=Et[yt];if(0!==Dt.length){Dt!==H[0]&&Oe.push($e.length/2);var $t=this.segments2.prepareSegment(Dt.length,this.layoutVertexArray,this.indexArray2),Wt=$t.vertexLength;this.layoutVertexArray.emplaceBack(Dt[0].x,Dt[0].y),this.indexArray2.emplaceBack(Wt+Dt.length-1,Wt),$e.push(Dt[0].x),$e.push(Dt[0].y);for(var on=1;on<Dt.length;on++)this.layoutVertexArray.emplaceBack(Dt[on].x,Dt[on].y),this.indexArray2.emplaceBack(Wt+on-1,Wt+on),$e.push(Dt[on].x),$e.push(Dt[on].y);$t.vertexLength+=Dt.length,$t.primitiveLength+=Dt.length}}for(var pn=hh($e,Oe),An=0;An<pn.length;An+=3)this.indexArray.emplaceBack(ze+pn[An],ze+pn[An+1],ze+pn[An+2]);Ie.vertexLength+=ie,Ie.primitiveLength+=pn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,T,b)},X("FillBucket",su,{omit:["layers","patternFeatures"]});var mh=new ms({"fill-sort-key":new ei(Pe.layout_fill["fill-sort-key"])}),bd={paint:new ms({"fill-antialias":new li(Pe.paint_fill["fill-antialias"]),"fill-opacity":new ei(Pe.paint_fill["fill-opacity"]),"fill-color":new ei(Pe.paint_fill["fill-color"]),"fill-outline-color":new ei(Pe.paint_fill["fill-outline-color"]),"fill-translate":new li(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new li(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new jl(Pe.paint_fill["fill-pattern"])}),layout:mh},O_=function(n){function a(d){n.call(this,d,bd)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.recalculate=function(d,b){n.prototype.recalculate.call(this,d,b);var T=this.paint._values["fill-outline-color"];"constant"===T.value.kind&&void 0===T.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},a.prototype.createBucket=function(d){return new su(d)},a.prototype.queryRadius=function(){return ya(this.paint.get("fill-translate"))},a.prototype.queryIntersectsFeature=function(d,b,T,E,L,H,ie){return Tl(vc(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),H.angle,ie),E)},a.prototype.isTileClipped=function(){return!0},a}(rl),gh=Ge([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,_h=td;function td(n,a,d,b,T){this.properties={},this.extent=d,this.type=0,this._pbf=n,this._geometry=-1,this._keys=b,this._values=T,n.readFields(Nm,this,a)}function Nm(n,a,d){1==n?a.id=d.readVarint():2==n?function(b,T){for(var E=b.readVarint()+b.pos;b.pos<E;){var L=T._keys[b.readVarint()],H=T._values[b.readVarint()];T.properties[L]=H}}(d,a):3==n?a.type=d.readVarint():4==n&&(a._geometry=d.pos)}function Jh(n){for(var a,d,b=0,T=0,E=n.length,L=E-1;T<E;L=T++)b+=((d=n[L]).x-(a=n[T]).x)*(a.y+d.y);return b}td.types=["Unknown","Point","LineString","Polygon"],td.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var a,d=n.readVarint()+n.pos,b=1,T=0,E=0,L=0,H=[];n.pos<d;){if(T<=0){var ie=n.readVarint();b=7&ie,T=ie>>3}if(T--,1===b||2===b)E+=n.readSVarint(),L+=n.readSVarint(),1===b&&(a&&H.push(a),a=[]),a.push(new q(E,L));else{if(7!==b)throw new Error("unknown command "+b);a&&a.push(a[0].clone())}}return a&&H.push(a),H},td.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var a=n.readVarint()+n.pos,d=1,b=0,T=0,E=0,L=1/0,H=-1/0,ie=1/0,xe=-1/0;n.pos<a;){if(b<=0){var Me=n.readVarint();d=7&Me,b=Me>>3}if(b--,1===d||2===d)(T+=n.readSVarint())<L&&(L=T),T>H&&(H=T),(E+=n.readSVarint())<ie&&(ie=E),E>xe&&(xe=E);else if(7!==d)throw new Error("unknown command "+d)}return[L,ie,H,xe]},td.prototype.toGeoJSON=function(n,a,d){var b,T,E=this.extent*Math.pow(2,d),L=this.extent*n,H=this.extent*a,ie=this.loadGeometry(),xe=td.types[this.type];function Me($e){for(var Oe=0;Oe<$e.length;Oe++){var yt=$e[Oe];$e[Oe]=[360*(yt.x+L)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(yt.y+H)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var Ie=[];for(b=0;b<ie.length;b++)Ie[b]=ie[b][0];Me(ie=Ie);break;case 2:for(b=0;b<ie.length;b++)Me(ie[b]);break;case 3:for(ie=function($e){var Oe=$e.length;if(Oe<=1)return[$e];for(var yt,Et,Dt=[],$t=0;$t<Oe;$t++){var Wt=Jh($e[$t]);0!==Wt&&(void 0===Et&&(Et=Wt<0),Et===Wt<0?(yt&&Dt.push(yt),yt=[$e[$t]]):yt.push($e[$t]))}return yt&&Dt.push(yt),Dt}(ie),b=0;b<ie.length;b++)for(T=0;T<ie[b].length;T++)Me(ie[b][T])}1===ie.length?ie=ie[0]:xe="Multi"+xe;var ze={type:"Feature",geometry:{type:xe,coordinates:ie},properties:this.properties};return"id"in this&&(ze.id=this.id),ze};var Lm=zp;function zp(n,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(nd,this,a),this.length=this._features.length}function nd(n,a,d){15===n?a.version=d.readVarint():1===n?a.name=d.readString():5===n?a.extent=d.readVarint():2===n?a._features.push(d.pos):3===n?a._keys.push(d.readString()):4===n&&a._values.push(function(b){for(var T=null,E=b.readVarint()+b.pos;b.pos<E;){var L=b.readVarint()>>3;T=1===L?b.readString():2===L?b.readFloat():3===L?b.readDouble():4===L?b.readVarint64():5===L?b.readVarint():6===L?b.readSVarint():7===L?b.readBoolean():null}return T}(d))}function Nf(n,a,d){if(3===n){var b=new Lm(d,d.readVarint()+d.pos);b.length&&(a[b.name]=b)}}zp.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var a=this._pbf.readVarint()+this._pbf.pos;return new _h(this._pbf,a,this.extent,this._keys,this._values)};var xd={VectorTile:function(n,a){this.layers=n.readFields(Nf,{},a)},VectorTileFeature:_h,VectorTileLayer:Lm},yh=xd.VectorTileFeature.types,Lf=Math.pow(2,13);function Wh(n,a,d,b,T,E,L,H){n.emplaceBack(a,d,2*Math.floor(b*Lf)+L,T*Lf*2,E*Lf*2,Math.round(H))}var cc=function(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new zt,this.indexArray=new Xs,this.programConfigurations=new Zi(n.layers,n.zoom),this.segments=new R,this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};function vh(n,a){return n.x===a.x&&(n.x<0||n.x>8192)||n.y===a.y&&(n.y<0||n.y>8192)}cc.prototype.populate=function(n,a,d){this.features=[],this.hasPattern=qh("fill-extrusion",this.layers,a);for(var b=0,T=n;b<T.length;b+=1){var E=T[b],L=E.feature,H=E.id,ie=E.index,xe=E.sourceLayerIndex,Me=this.layers[0]._featureFilter.needGeometry,Ie=is(L,Me);if(this.layers[0]._featureFilter.filter(new rr(this.zoom),Ie,d)){var ze={id:H,sourceLayerIndex:xe,index:ie,geometry:Me?Ie.geometry:$o(L),properties:L.properties,type:L.type,patterns:{}};this.hasPattern?this.features.push(Up("fill-extrusion",this.layers,ze,this.zoom,a)):this.addFeature(ze,ze.geometry,ie,d,{}),a.featureIndex.insert(L,ze.geometry,ie,xe,this.index,!0)}}},cc.prototype.addFeatures=function(n,a,d){for(var b=0,T=this.features;b<T.length;b+=1){var E=T[b];this.addFeature(E,E.geometry,E.index,a,d)}},cc.prototype.update=function(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)},cc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},cc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cc.prototype.upload=function(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gh),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},cc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cc.prototype.addFeature=function(n,a,d,b,T){for(var E=0,L=Fm(a,500);E<L.length;E+=1){for(var H=L[E],ie=0,xe=0,Me=H;xe<Me.length;xe+=1)ie+=Me[xe].length;for(var Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ze=0,$e=H;ze<$e.length;ze+=1){var Oe=$e[ze];if(0!==Oe.length&&!((Br=Oe).every(function(lr){return lr.x<0})||Br.every(function(lr){return lr.x>8192})||Br.every(function(lr){return lr.y<0})||Br.every(function(lr){return lr.y>8192})))for(var yt=0,Et=0;Et<Oe.length;Et++){var Dt=Oe[Et];if(Et>=1){var $t=Oe[Et-1];if(!vh(Dt,$t)){Ie.vertexLength+4>R.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Wt=Dt.sub($t)._perp()._unit(),on=$t.dist(Dt);yt+on>32768&&(yt=0),Wh(this.layoutVertexArray,Dt.x,Dt.y,Wt.x,Wt.y,0,0,yt),Wh(this.layoutVertexArray,Dt.x,Dt.y,Wt.x,Wt.y,0,1,yt),Wh(this.layoutVertexArray,$t.x,$t.y,Wt.x,Wt.y,0,0,yt+=on),Wh(this.layoutVertexArray,$t.x,$t.y,Wt.x,Wt.y,0,1,yt);var pn=Ie.vertexLength;this.indexArray.emplaceBack(pn,pn+2,pn+1),this.indexArray.emplaceBack(pn+1,pn+2,pn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2}}}}if(Ie.vertexLength+ie>R.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray)),"Polygon"===yh[n.type]){for(var An=[],Fn=[],Vn=Ie.vertexLength,Ai=0,si=H;Ai<si.length;Ai+=1){var Oi=si[Ai];if(0!==Oi.length){Oi!==H[0]&&Fn.push(An.length/2);for(var Kn=0;Kn<Oi.length;Kn++){var Ir=Oi[Kn];Wh(this.layoutVertexArray,Ir.x,Ir.y,0,0,1,1,0),An.push(Ir.x),An.push(Ir.y)}}}for(var Ki=hh(An,Fn),yi=0;yi<Ki.length;yi+=3)this.indexArray.emplaceBack(Vn+Ki[yi],Vn+Ki[yi+2],Vn+Ki[yi+1]);Ie.primitiveLength+=Ki.length/3,Ie.vertexLength+=ie}}var Br;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,T,b)},X("FillExtrusionBucket",cc,{omit:["layers","features"]});var jd={paint:new ms({"fill-extrusion-opacity":new li(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new li(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new li(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jl(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new li(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bm=function(n){function a(d){n.call(this,d,jd)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.createBucket=function(d){return new cc(d)},a.prototype.queryRadius=function(){return ya(this.paint.get("fill-extrusion-translate"))},a.prototype.is3D=function(){return!0},a.prototype.queryIntersectsFeature=function(d,b,T,E,L,H,ie,xe){var Me=vc(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),H.angle,ie),Ie=this.paint.get("fill-extrusion-height").evaluate(b,T),ze=this.paint.get("fill-extrusion-base").evaluate(b,T),$e=function(yt,Et,Dt,$t){for(var Wt=[],on=0,pn=yt;on<pn.length;on+=1){var An=pn[on],Fn=[An.x,An.y,0,1];jh(Fn,Fn,Et),Wt.push(new q(Fn[0]/Fn[3],Fn[1]/Fn[3]))}return Wt}(Me,xe),Oe=function(yt,Et,Dt,$t){for(var Wt=[],on=[],pn=$t[8]*Et,An=$t[9]*Et,Fn=$t[10]*Et,Vn=$t[11]*Et,Ai=$t[8]*Dt,si=$t[9]*Dt,Oi=$t[10]*Dt,Kn=$t[11]*Dt,Ir=0,Ki=yt;Ir<Ki.length;Ir+=1){for(var yi=[],Br=[],lr=0,Yr=Ki[Ir];lr<Yr.length;lr+=1){var Fi=Yr[lr],_o=Fi.x,ls=Fi.y,qs=$t[0]*_o+$t[4]*ls+$t[12],ji=$t[1]*_o+$t[5]*ls+$t[13],ys=$t[2]*_o+$t[6]*ls+$t[14],Fs=$t[3]*_o+$t[7]*ls+$t[15],Sa=ys+Fn,ta=Fs+Vn,ul=qs+Ai,fo=ji+si,Gl=ys+Oi,yo=Fs+Kn,cl=new q((qs+pn)/ta,(ji+An)/ta);cl.z=Sa/ta,yi.push(cl);var Ur=new q(ul/yo,fo/yo);Ur.z=Gl/yo,Br.push(Ur)}Wt.push(yi),on.push(Br)}return[Wt,on]}(E,ze,Ie,xe);return function(yt,Et,Dt){var $t=1/0;Tl(Dt,Et)&&($t=Um(Dt,Et[0]));for(var Wt=0;Wt<Et.length;Wt++)for(var on=Et[Wt],pn=yt[Wt],An=0;An<on.length-1;An++){var Fn=on[An],Vn=[Fn,on[An+1],pn[An+1],pn[An],Fn];Cl(Dt,Vn)&&($t=Math.min($t,Um(Dt,Vn)))}return $t!==1/0&&$t}(Oe[0],Oe[1],$e)},a}(rl);function bh(n,a){return n.x*a.x+n.y*a.y}function Um(n,a){if(1===n.length){for(var d,b=0,T=a[b++];!d||T.equals(d);)if(!(d=a[b++]))return 1/0;for(;b<a.length;b++){var E=a[b],L=n[0],H=d.sub(T),ie=E.sub(T),xe=L.sub(T),Me=bh(H,H),Ie=bh(H,ie),ze=bh(ie,ie),$e=bh(xe,H),Oe=bh(xe,ie),yt=Me*ze-Ie*Ie,Et=(ze*$e-Ie*Oe)/yt,Dt=(Me*Oe-Ie*$e)/yt,$t=T.z*(1-Et-Dt)+d.z*Et+E.z*Dt;if(isFinite($t))return $t}return 1/0}for(var Wt=1/0,on=0,pn=a;on<pn.length;on+=1)Wt=Math.min(Wt,pn[on].z);return Wt}var Pg=Ge([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Qh=Ge([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,kg=xd.VectorTileFeature.types,Bf=Math.cos(Math.PI/180*37.5),Uf=Math.pow(2,14)/.5,al=function(n){var a=this;this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(d){a.gradients[d.id]={}}),this.layoutVertexArray=new hn,this.layoutVertexArray2=new Ii,this.indexArray=new Xs,this.programConfigurations=new Zi(n.layers,n.zoom),this.segments=new R,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};al.prototype.populate=function(n,a,d){this.hasPattern=qh("line",this.layers,a);for(var b=this.layers[0].layout.get("line-sort-key"),T=[],E=0,L=n;E<L.length;E+=1){var H=L[E],ie=H.feature,xe=H.id,Me=H.index,Ie=H.sourceLayerIndex,ze=this.layers[0]._featureFilter.needGeometry,$e=is(ie,ze);if(this.layers[0]._featureFilter.filter(new rr(this.zoom),$e,d)){var Oe=b?b.evaluate($e,{},d):void 0,yt={id:xe,properties:ie.properties,type:ie.type,sourceLayerIndex:Ie,index:Me,geometry:ze?$e.geometry:$o(ie),patterns:{},sortKey:Oe};T.push(yt)}}b&&T.sort(function(Fn,Vn){return Fn.sortKey-Vn.sortKey});for(var Et=0,Dt=T;Et<Dt.length;Et+=1){var $t=Dt[Et],Wt=$t.geometry,on=$t.index,pn=$t.sourceLayerIndex;if(this.hasPattern){var An=Up("line",this.layers,$t,this.zoom,a);this.patternFeatures.push(An)}else this.addFeature($t,Wt,on,d,{});a.featureIndex.insert(n[on].feature,Wt,on,pn,this.index)}},al.prototype.update=function(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)},al.prototype.addFeatures=function(n,a,d){for(var b=0,T=this.patternFeatures;b<T.length;b+=1){var E=T[b];this.addFeature(E,E.geometry,E.index,a,d)}},al.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},al.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},al.prototype.upload=function(n){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Qh)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Pg),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0},al.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},al.prototype.lineFeatureClips=function(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}},al.prototype.addFeature=function(n,a,d,b,T){var E=this.layers[0].layout,L=E.get("line-join").evaluate(n,{}),H=E.get("line-cap"),ie=E.get("line-miter-limit"),xe=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(var Me=0,Ie=a;Me<Ie.length;Me+=1)this.addLine(Ie[Me],n,L,H,ie,xe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,T,b)},al.prototype.addLine=function(n,a,d,b,T,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var L=0;L<n.length-1;L++)this.totalDistance+=n[L].dist(n[L+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var H="Polygon"===kg[a.type],ie=n.length;ie>=2&&n[ie-1].equals(n[ie-2]);)ie--;for(var xe=0;xe<ie-1&&n[xe].equals(n[xe+1]);)xe++;if(!(ie<(H?3:2))){"bevel"===d&&(T=1.05);var Me,Ie=this.overscaling<=16?122880/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray),$e=void 0,Oe=void 0,yt=void 0,Et=void 0;this.e1=this.e2=-1,H&&(Et=n[xe].sub(Me=n[ie-2])._unit()._perp());for(var Dt=xe;Dt<ie;Dt++)if(!(Oe=Dt===ie-1?H?n[xe+1]:void 0:n[Dt+1])||!n[Dt].equals(Oe)){Et&&(yt=Et),Me&&($e=Me),Me=n[Dt],Et=Oe?Oe.sub(Me)._unit()._perp():yt;var $t=(yt=yt||Et).add(Et);0===$t.x&&0===$t.y||$t._unit();var Wt=yt.x*Et.x+yt.y*Et.y,on=$t.x*Et.x+$t.y*Et.y,pn=0!==on?1/on:1/0,An=2*Math.sqrt(2-2*on),Fn=on<Bf&&$e&&Oe,Vn=yt.x*Et.y-yt.y*Et.x>0;if(Fn&&Dt>xe){var Ai=Me.dist($e);if(Ai>2*Ie){var si=Me.sub(Me.sub($e)._mult(Ie/Ai)._round());this.updateDistance($e,si),this.addCurrentVertex(si,yt,0,0,ze),$e=si}}var Oi=$e&&Oe,Kn=Oi?d:H?"butt":b;if(Oi&&"round"===Kn&&(pn<E?Kn="miter":pn<=2&&(Kn="fakeround")),"miter"===Kn&&pn>T&&(Kn="bevel"),"bevel"===Kn&&(pn>2&&(Kn="flipbevel"),pn<T&&(Kn="miter")),$e&&this.updateDistance($e,Me),"miter"===Kn)$t._mult(pn),this.addCurrentVertex(Me,$t,0,0,ze);else if("flipbevel"===Kn){if(pn>100)$t=Et.mult(-1);else{var Ir=pn*yt.add(Et).mag()/yt.sub(Et).mag();$t._perp()._mult(Ir*(Vn?-1:1))}this.addCurrentVertex(Me,$t,0,0,ze),this.addCurrentVertex(Me,$t.mult(-1),0,0,ze)}else if("bevel"===Kn||"fakeround"===Kn){var Ki=-Math.sqrt(pn*pn-1),yi=Vn?Ki:0,Br=Vn?0:Ki;if($e&&this.addCurrentVertex(Me,yt,yi,Br,ze),"fakeround"===Kn)for(var lr=Math.round(180*An/Math.PI/20),Yr=1;Yr<lr;Yr++){var Fi=Yr/lr;if(.5!==Fi){var _o=Fi-.5;Fi+=Fi*_o*(Fi-1)*((1.0904+Wt*(Wt*(3.55645-1.43519*Wt)-3.2452))*_o*_o+(.848013+Wt*(.215638*Wt-1.06021)))}var ls=Et.sub(yt)._mult(Fi)._add(yt)._unit()._mult(Vn?-1:1);this.addHalfVertex(Me,ls.x,ls.y,!1,Vn,0,ze)}Oe&&this.addCurrentVertex(Me,Et,-yi,-Br,ze)}else if("butt"===Kn)this.addCurrentVertex(Me,$t,0,0,ze);else if("square"===Kn){var qs=$e?1:-1;this.addCurrentVertex(Me,$t,qs,qs,ze)}else"round"===Kn&&($e&&(this.addCurrentVertex(Me,yt,0,0,ze),this.addCurrentVertex(Me,yt,1,1,ze,!0)),Oe&&(this.addCurrentVertex(Me,Et,-1,-1,ze,!0),this.addCurrentVertex(Me,Et,0,0,ze)));if(Fn&&Dt<ie-1){var ji=Me.dist(Oe);if(ji>2*Ie){var ys=Me.add(Oe.sub(Me)._mult(Ie/ji)._round());this.updateDistance(Me,ys),this.addCurrentVertex(ys,Et,0,0,ze),Me=ys}}}}},al.prototype.addCurrentVertex=function(n,a,d,b,T,E){void 0===E&&(E=!1);var L=a.y*b-a.x,H=-a.y-a.x*b;this.addHalfVertex(n,a.x+a.y*d,a.y-a.x*d,E,!1,d,T),this.addHalfVertex(n,L,H,E,!0,-b,T),this.distance>Uf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(n,a,d,b,T,E))},al.prototype.addHalfVertex=function(n,a,d,b,T,E,L){var H=.5*(this.lineClips?this.scaledDistance*(Uf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n.x<<1)+(b?1:0),(n.y<<1)+(T?1:0),Math.round(63*a)+128,Math.round(63*d)+128,1+(0===E?0:E<0?-1:1)|(63&H)<<2,H>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var ie=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ie),L.primitiveLength++),T?this.e2=ie:this.e1=ie},al.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},al.prototype.updateDistance=function(n,a){this.distance+=n.dist(a),this.updateScaledDistance()},X("LineBucket",al,{omit:["layers","patternFeatures"]});var wd=new ms({"line-cap":new li(Pe.layout_line["line-cap"]),"line-join":new ei(Pe.layout_line["line-join"]),"line-miter-limit":new li(Pe.layout_line["line-miter-limit"]),"line-round-limit":new li(Pe.layout_line["line-round-limit"]),"line-sort-key":new ei(Pe.layout_line["line-sort-key"])}),Fc={paint:new ms({"line-opacity":new ei(Pe.paint_line["line-opacity"]),"line-color":new ei(Pe.paint_line["line-color"]),"line-translate":new li(Pe.paint_line["line-translate"]),"line-translate-anchor":new li(Pe.paint_line["line-translate-anchor"]),"line-width":new ei(Pe.paint_line["line-width"]),"line-gap-width":new ei(Pe.paint_line["line-gap-width"]),"line-offset":new ei(Pe.paint_line["line-offset"]),"line-blur":new ei(Pe.paint_line["line-blur"]),"line-dasharray":new ss(Pe.paint_line["line-dasharray"]),"line-pattern":new jl(Pe.paint_line["line-pattern"]),"line-gradient":new $s(Pe.paint_line["line-gradient"])}),layout:wd},wc=new(function(n){function a(){n.apply(this,arguments)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.possiblyEvaluate=function(d,b){return b=new rr(Math.floor(b.zoom),{now:b.now,fadeDuration:b.fadeDuration,zoomHistory:b.zoomHistory,transition:b.transition}),n.prototype.possiblyEvaluate.call(this,d,b)},a.prototype.evaluate=function(d,b,T,E){return b=Be({},b,{zoom:Math.floor(b.zoom)}),n.prototype.evaluate.call(this,d,b,T,E)},a}(ei))(Fc.paint.properties["line-width"].specification);wc.useIntegerZoom=!0;var Cd=function(n){function a(d){n.call(this,d,Fc),this.gradientVersion=0}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype._handleSpecialPaintPropertyUpdate=function(d){"line-gradient"===d&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Zo,this.gradientVersion=(this.gradientVersion+1)%Ve)},a.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},a.prototype.recalculate=function(d,b){n.prototype.recalculate.call(this,d,b),this.paint._values["line-floorwidth"]=wc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)},a.prototype.createBucket=function(d){return new al(d)},a.prototype.queryRadius=function(d){var b=d,T=xh(lc("line-width",this,b),lc("line-gap-width",this,b)),E=lc("line-offset",this,b);return T/2+Math.abs(E)+ya(this.paint.get("line-translate"))},a.prototype.queryIntersectsFeature=function(d,b,T,E,L,H,ie){var xe=vc(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),H.angle,ie),Me=ie/2*xh(this.paint.get("line-width").evaluate(b,T),this.paint.get("line-gap-width").evaluate(b,T)),Ie=this.paint.get("line-offset").evaluate(b,T);return Ie&&(E=function(ze,$e){for(var Oe=[],yt=new q(0,0),Et=0;Et<ze.length;Et++){for(var Dt=ze[Et],$t=[],Wt=0;Wt<Dt.length;Wt++){var on=Dt[Wt],pn=Dt[Wt+1],An=0===Wt?yt:on.sub(Dt[Wt-1])._unit()._perp(),Fn=Wt===Dt.length-1?yt:pn.sub(on)._unit()._perp(),Vn=An._add(Fn)._unit();Vn._mult(1/(Vn.x*Fn.x+Vn.y*Fn.y)),$t.push(Vn._mult($e)._add(on))}Oe.push($t)}return Oe}(E,Ie*ie)),function(ze,$e,Oe){for(var yt=0;yt<$e.length;yt++){var Et=$e[yt];if(ze.length>=3)for(var Dt=0;Dt<Et.length;Dt++)if(bu(ze,Et[Dt]))return!0;if(vu(ze,Et,Oe))return!0}return!1}(xe,E,Me)},a.prototype.isTileClipped=function(){return!0},a}(rl);function xh(n,a){return a>0?a+2*n:n}var wh=Ge([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jp=Ge([{name:"a_projected_pos",components:3,type:"Float32"}],4),id=(Ge([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ge([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Nc=(Ge([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ge([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Vp=Ge([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zm(n,a,d){return n.sections.forEach(function(b){var T,L,H;b.text=(T=b.text,L=d,"uppercase"===(H=a.layout.get("text-transform").evaluate(L,{}))?T=T.toLocaleUpperCase():"lowercase"===H&&(T=T.toLocaleLowerCase()),Gs.applyArabicShaping&&(T=Gs.applyArabicShaping(T)),T)}),n}Ge([{name:"triangle",components:3,type:"Uint16"}]),Ge([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ge([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ge([{type:"Float32",name:"offsetX"}]),Ge([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ch={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Kh=function(n,a,d,b,T){var E,L,H=8*T-b-1,ie=(1<<H)-1,xe=ie>>1,Me=-7,Ie=d?T-1:0,ze=d?-1:1,$e=n[a+Ie];for(Ie+=ze,E=$e&(1<<-Me)-1,$e>>=-Me,Me+=H;Me>0;E=256*E+n[a+Ie],Ie+=ze,Me-=8);for(L=E&(1<<-Me)-1,E>>=-Me,Me+=b;Me>0;L=256*L+n[a+Ie],Ie+=ze,Me-=8);if(0===E)E=1-xe;else{if(E===ie)return L?NaN:1/0*($e?-1:1);L+=Math.pow(2,b),E-=xe}return($e?-1:1)*L*Math.pow(2,E-b)},Th=function(n,a,d,b,T,E){var L,H,ie,xe=8*E-T-1,Me=(1<<xe)-1,Ie=Me>>1,ze=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,$e=b?0:E-1,Oe=b?1:-1,yt=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(H=isNaN(a)?1:0,L=Me):(L=Math.floor(Math.log(a)/Math.LN2),a*(ie=Math.pow(2,-L))<1&&(L--,ie*=2),(a+=L+Ie>=1?ze/ie:ze*Math.pow(2,1-Ie))*ie>=2&&(L++,ie/=2),L+Ie>=Me?(H=0,L=Me):L+Ie>=1?(H=(a*ie-1)*Math.pow(2,T),L+=Ie):(H=a*Math.pow(2,Ie-1)*Math.pow(2,T),L=0));T>=8;n[d+$e]=255&H,$e+=Oe,H/=256,T-=8);for(L=L<<T|H,xe+=T;xe>0;n[d+$e]=255&L,$e+=Oe,L/=256,xe-=8);n[d+$e-Oe]|=128*yt},rd=jo;function jo(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}jo.Varint=0,jo.Fixed64=1,jo.Bytes=2,jo.Fixed32=5;var Vd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function qu(n){return n.type===jo.Bytes?n.readVarint()+n.pos:n.pos+1}function Dh(n,a,d){var b=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));d.realloc(b);for(var T=d.pos-1;T>=n;T--)d.buf[T+b]=d.buf[T]}function zf(n,a){for(var d=0;d<n.length;d++)a.writeVarint(n[d])}function P_(n,a){for(var d=0;d<n.length;d++)a.writeSVarint(n[d])}function jm(n,a){for(var d=0;d<n.length;d++)a.writeFloat(n[d])}function Hp(n,a){for(var d=0;d<n.length;d++)a.writeDouble(n[d])}function Vm(n,a){for(var d=0;d<n.length;d++)a.writeBoolean(n[d])}function jf(n,a){for(var d=0;d<n.length;d++)a.writeFixed32(n[d])}function Xh(n,a){for(var d=0;d<n.length;d++)a.writeSFixed32(n[d])}function Hd(n,a){for(var d=0;d<n.length;d++)a.writeFixed64(n[d])}function Vf(n,a){for(var d=0;d<n.length;d++)a.writeSFixed64(n[d])}function ep(n,a){return(n[a]|n[a+1]<<8|n[a+2]<<16)+16777216*n[a+3]}function Gd(n,a,d){n[d]=a,n[d+1]=a>>>8,n[d+2]=a>>>16,n[d+3]=a>>>24}function Td(n,a){return(n[a]|n[a+1]<<8|n[a+2]<<16)+(n[a+3]<<24)}function Rg(n,a,d){1===n&&d.readMessage(Hf,a)}function Hf(n,a,d){if(3===n){var b=d.readMessage(Gp,{}),T=b.width,E=b.height,L=b.left,H=b.top,ie=b.advance;a.push({id:b.id,bitmap:new Bd({width:T+6,height:E+6},b.bitmap),metrics:{width:T,height:E,left:L,top:H,advance:ie}})}}function Gp(n,a,d){1===n?a.id=d.readVarint():2===n?a.bitmap=d.readBytes():3===n?a.width=d.readVarint():4===n?a.height=d.readVarint():5===n?a.left=d.readSVarint():6===n?a.top=d.readSVarint():7===n&&(a.advance=d.readVarint())}function tp(n){for(var a=0,d=0,b=0,T=n;b<T.length;b+=1){var E=T[b];a+=E.w*E.h,d=Math.max(d,E.w)}n.sort(function(yt,Et){return Et.h-yt.h});for(var L=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}],H=0,ie=0,xe=0,Me=n;xe<Me.length;xe+=1)for(var Ie=Me[xe],ze=L.length-1;ze>=0;ze--){var $e=L[ze];if(!(Ie.w>$e.w||Ie.h>$e.h)){if(Ie.x=$e.x,Ie.y=$e.y,ie=Math.max(ie,Ie.y+Ie.h),H=Math.max(H,Ie.x+Ie.w),Ie.w===$e.w&&Ie.h===$e.h){var Oe=L.pop();ze<L.length&&(L[ze]=Oe)}else Ie.h===$e.h?($e.x+=Ie.w,$e.w-=Ie.w):Ie.w===$e.w?($e.y+=Ie.h,$e.h-=Ie.h):(L.push({x:$e.x+Ie.w,y:$e.y,w:$e.w-Ie.w,h:Ie.h}),$e.y+=Ie.h,$e.h-=Ie.h);break}}return{w:H,h:ie,fill:a/(H*ie)||0}}jo.prototype={destroy:function(){this.buf=null},readFields:function(n,a,d){for(d=d||this.length;this.pos<d;){var b=this.readVarint(),T=b>>3,E=this.pos;this.type=7&b,n(T,a,this),this.pos===E&&this.skip(b)}return a},readMessage:function(n,a){return this.readFields(n,a,this.readVarint()+this.pos)},readFixed32:function(){var n=ep(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Td(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=ep(this.buf,this.pos)+4294967296*ep(this.buf,this.pos+4);return this.pos+=8,n},readSFixed64:function(){var n=ep(this.buf,this.pos)+4294967296*Td(this.buf,this.pos+4);return this.pos+=8,n},readFloat:function(){var n=Kh(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Kh(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var a,d,b=this.buf;return a=127&(d=b[this.pos++]),d<128?a:(a|=(127&(d=b[this.pos++]))<<7,d<128?a:(a|=(127&(d=b[this.pos++]))<<14,d<128?a:(a|=(127&(d=b[this.pos++]))<<21,d<128?a:function(T,E,L){var H,ie,xe=L.buf;if(H=(112&(ie=xe[L.pos++]))>>4,ie<128||(H|=(127&(ie=xe[L.pos++]))<<3,ie<128)||(H|=(127&(ie=xe[L.pos++]))<<10,ie<128)||(H|=(127&(ie=xe[L.pos++]))<<17,ie<128)||(H|=(127&(ie=xe[L.pos++]))<<24,ie<128)||(H|=(1&(ie=xe[L.pos++]))<<31,ie<128))return function au(n,a,d){return d?4294967296*a+(n>>>0):4294967296*(a>>>0)+(n>>>0)}(T,H,E);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(d=b[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,a=this.pos;return this.pos=n,n-a>=12&&Vd?Vd.decode(this.buf.subarray(a,n)):function(d,b,T){for(var E="",L=b;L<T;){var H,ie,xe,Me=d[L],Ie=null,ze=Me>239?4:Me>223?3:Me>191?2:1;if(L+ze>T)break;1===ze?Me<128&&(Ie=Me):2===ze?128==(192&(H=d[L+1]))&&(Ie=(31&Me)<<6|63&H)<=127&&(Ie=null):3===ze?(ie=d[L+2],128==(192&(H=d[L+1]))&&128==(192&ie)&&((Ie=(15&Me)<<12|(63&H)<<6|63&ie)<=2047||Ie>=55296&&Ie<=57343)&&(Ie=null)):4===ze&&(ie=d[L+2],xe=d[L+3],128==(192&(H=d[L+1]))&&128==(192&ie)&&128==(192&xe)&&((Ie=(15&Me)<<18|(63&H)<<12|(63&ie)<<6|63&xe)<=65535||Ie>=1114112)&&(Ie=null)),null===Ie?(Ie=65533,ze=1):Ie>65535&&(Ie-=65536,E+=String.fromCharCode(Ie>>>10&1023|55296),Ie=56320|1023&Ie),E+=String.fromCharCode(Ie),L+=ze}return E}(this.buf,a,n)},readBytes:function(){var n=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,n);return this.pos=n,a},readPackedVarint:function(n,a){if(this.type!==jo.Bytes)return n.push(this.readVarint(a));var d=qu(this);for(n=n||[];this.pos<d;)n.push(this.readVarint(a));return n},readPackedSVarint:function(n){if(this.type!==jo.Bytes)return n.push(this.readSVarint());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==jo.Bytes)return n.push(this.readBoolean());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==jo.Bytes)return n.push(this.readFloat());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==jo.Bytes)return n.push(this.readDouble());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==jo.Bytes)return n.push(this.readFixed32());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==jo.Bytes)return n.push(this.readSFixed32());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==jo.Bytes)return n.push(this.readFixed64());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==jo.Bytes)return n.push(this.readSFixed64());var a=qu(this);for(n=n||[];this.pos<a;)n.push(this.readSFixed64());return n},skip:function(n){var a=7&n;if(a===jo.Varint)for(;this.buf[this.pos++]>127;);else if(a===jo.Bytes)this.pos=this.readVarint()+this.pos;else if(a===jo.Fixed32)this.pos+=4;else{if(a!==jo.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(n,a){this.writeVarint(n<<3|a)},realloc:function(n){for(var a=this.length||16;a<this.pos+n;)a*=2;if(a!==this.length){var d=new Uint8Array(a);d.set(this.buf),this.buf=d,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Gd(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Gd(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Gd(this.buf,-1&n,this.pos),Gd(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Gd(this.buf,-1&n,this.pos),Gd(this.buf,Math.floor(n*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(a,d){var b,T,E,H;if(a>=0?(b=a%4294967296|0,T=a/4294967296|0):(T=~(-a/4294967296),4294967295^(b=~(-a%4294967296))?b=b+1|0:(b=0,T=T+1|0)),a>=0x10000000000000000||a<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),E=b,(H=d).buf[H.pos++]=127&E|128,E>>>=7,H.buf[H.pos++]=127&E|128,E>>>=7,H.buf[H.pos++]=127&E|128,E>>>=7,H.buf[H.pos++]=127&E|128,H.buf[H.pos]=127&(E>>>=7),function(E,L){var H=(7&E)<<4;L.buf[L.pos++]|=H|((E>>>=3)?128:0),E&&(L.buf[L.pos++]=127&E|((E>>>=7)?128:0),E&&(L.buf[L.pos++]=127&E|((E>>>=7)?128:0),E&&(L.buf[L.pos++]=127&E|((E>>>=7)?128:0),E&&(L.buf[L.pos++]=127&E|((E>>>=7)?128:0),E&&(L.buf[L.pos++]=127&E)))))}(T,d)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var a=this.pos;this.pos=function(b,T,E){for(var L,H,ie=0;ie<T.length;ie++){if((L=T.charCodeAt(ie))>55295&&L<57344){if(!H){L>56319||ie+1===T.length?(b[E++]=239,b[E++]=191,b[E++]=189):H=L;continue}if(L<56320){b[E++]=239,b[E++]=191,b[E++]=189,H=L;continue}L=H-55296<<10|L-56320|65536,H=null}else H&&(b[E++]=239,b[E++]=191,b[E++]=189,H=null);L<128?b[E++]=L:(L<2048?b[E++]=L>>6|192:(L<65536?b[E++]=L>>12|224:(b[E++]=L>>18|240,b[E++]=L>>12&63|128),b[E++]=L>>6&63|128),b[E++]=63&L|128)}return E}(this.buf,n,this.pos);var d=this.pos-a;d>=128&&Dh(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeFloat:function(n){this.realloc(4),Th(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Th(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var a=n.length;this.writeVarint(a),this.realloc(a);for(var d=0;d<a;d++)this.buf[this.pos++]=n[d]},writeRawMessage:function(n,a){this.pos++;var d=this.pos;n(a,this);var b=this.pos-d;b>=128&&Dh(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b},writeMessage:function(n,a,d){this.writeTag(n,jo.Bytes),this.writeRawMessage(a,d)},writePackedVarint:function(n,a){a.length&&this.writeMessage(n,zf,a)},writePackedSVarint:function(n,a){a.length&&this.writeMessage(n,P_,a)},writePackedBoolean:function(n,a){a.length&&this.writeMessage(n,Vm,a)},writePackedFloat:function(n,a){a.length&&this.writeMessage(n,jm,a)},writePackedDouble:function(n,a){a.length&&this.writeMessage(n,Hp,a)},writePackedFixed32:function(n,a){a.length&&this.writeMessage(n,jf,a)},writePackedSFixed32:function(n,a){a.length&&this.writeMessage(n,Xh,a)},writePackedFixed64:function(n,a){a.length&&this.writeMessage(n,Hd,a)},writePackedSFixed64:function(n,a){a.length&&this.writeMessage(n,Vf,a)},writeBytesField:function(n,a){this.writeTag(n,jo.Bytes),this.writeBytes(a)},writeFixed32Field:function(n,a){this.writeTag(n,jo.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(n,a){this.writeTag(n,jo.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(n,a){this.writeTag(n,jo.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(n,a){this.writeTag(n,jo.Fixed64),this.writeSFixed64(a)},writeVarintField:function(n,a){this.writeTag(n,jo.Varint),this.writeVarint(a)},writeSVarintField:function(n,a){this.writeTag(n,jo.Varint),this.writeSVarint(a)},writeStringField:function(n,a){this.writeTag(n,jo.Bytes),this.writeString(a)},writeFloatField:function(n,a){this.writeTag(n,jo.Fixed32),this.writeFloat(a)},writeDoubleField:function(n,a){this.writeTag(n,jo.Fixed64),this.writeDouble(a)},writeBooleanField:function(n,a){this.writeVarintField(n,Boolean(a))}};var np=function(n,a){var d=a.pixelRatio,b=a.version,T=a.stretchX,E=a.stretchY,L=a.content;this.paddedRect=n,this.pixelRatio=d,this.stretchX=T,this.stretchY=E,this.content=L,this.version=b},Nu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Nu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Nu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Nu.tlbr.get=function(){return this.tl.concat(this.br)},Nu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(np.prototype,Nu);var Cc=function(n,a){var d={},b={};this.haveRenderCallbacks=[];var T=[];this.addImages(n,d,T),this.addImages(a,b,T);var E=tp(T),L=new Dl({width:E.w||1,height:E.h||1});for(var H in n){var ie=n[H],xe=d[H].paddedRect;Dl.copy(ie.data,L,{x:0,y:0},{x:xe.x+1,y:xe.y+1},ie.data)}for(var Me in a){var Ie=a[Me],ze=b[Me].paddedRect,$e=ze.x+1,Oe=ze.y+1,yt=Ie.data.width,Et=Ie.data.height;Dl.copy(Ie.data,L,{x:0,y:0},{x:$e,y:Oe},Ie.data),Dl.copy(Ie.data,L,{x:0,y:Et-1},{x:$e,y:Oe-1},{width:yt,height:1}),Dl.copy(Ie.data,L,{x:0,y:0},{x:$e,y:Oe+Et},{width:yt,height:1}),Dl.copy(Ie.data,L,{x:yt-1,y:0},{x:$e-1,y:Oe},{width:1,height:Et}),Dl.copy(Ie.data,L,{x:0,y:0},{x:$e+yt,y:Oe},{width:1,height:Et})}this.image=L,this.iconPositions=d,this.patternPositions=b};Cc.prototype.addImages=function(n,a,d){for(var b in n){var T=n[b],E={x:0,y:0,w:T.data.width+2,h:T.data.height+2};d.push(E),a[b]=new np(E,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(b)}},Cc.prototype.patchUpdatedImages=function(n,a){for(var d in n.dispatchRenderCallbacks(this.haveRenderCallbacks),n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),a)},Cc.prototype.patchUpdatedImage=function(n,a,d){if(n&&a&&n.version!==a.version){n.version=a.version;var b=n.tl;d.update(a.data,void 0,{x:b[0],y:b[1]})}},X("ImagePosition",np),X("ImageAtlas",Cc);var Cu={horizontal:1,vertical:2,horizontalOnly:3},od=function(){this.scale=1,this.fontStack="",this.imageName=null};od.forText=function(n,a){var d=new od;return d.scale=n||1,d.fontStack=a,d},od.forImage=function(n){var a=new od;return a.imageName=n,a};var Xa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ip(n,a,d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt){var Et,Dt=Xa.fromFeature(n,T);Ie===Cu.vertical&&Dt.verticalizePunctuation();var $t=Gs.processBidirectionalText,Wt=Gs.processStyledBidirectionalText;if($t&&1===Dt.sections.length){Et=[];for(var on=0,pn=$t(Dt.toString(),Zp(Dt,xe,E,a,b,$e,Oe));on<pn.length;on+=1){var An=pn[on],Fn=new Xa;Fn.text=An,Fn.sections=Dt.sections;for(var Vn=0;Vn<An.length;Vn++)Fn.sectionIndex.push(0);Et.push(Fn)}}else if(Wt){Et=[];for(var Ai=0,si=Wt(Dt.text,Dt.sectionIndex,Zp(Dt,xe,E,a,b,$e,Oe));Ai<si.length;Ai+=1){var Oi=si[Ai],Kn=new Xa;Kn.text=Oi[0],Kn.sectionIndex=Oi[1],Kn.sections=Dt.sections,Et.push(Kn)}}else Et=function(yi,Br){for(var lr=[],Yr=yi.text,Fi=0,_o=0,ls=Br;_o<ls.length;_o+=1){var qs=ls[_o];lr.push(yi.substring(Fi,qs)),Fi=qs}return Fi<Yr.length&&lr.push(yi.substring(Fi,Yr.length)),lr}(Dt,Zp(Dt,xe,E,a,b,$e,Oe));var Ir=[],Ki={positionedLines:Ir,text:Dt.toString(),top:Me[1],bottom:Me[1],left:Me[0],right:Me[0],writingMode:Ie,iconsInText:!1,verticalizable:!1};return function(yi,Br,lr,Yr,Fi,_o,ls,qs,ji,ys,Fs,Sa){for(var ta=0,ul=-17,fo=0,Gl=0,yo="right"===qs?1:"left"===qs?0:.5,cl=0,Ur=0,ro=Fi;Ur<ro.length;Ur+=1){var Lo=ro[Ur];Lo.trim();var oo=Lo.getMaxScale(),Ho=24*(oo-1),Il={positionedGlyphs:[],lineOffset:0};yi.positionedLines[cl]=Il;var Xo=Il.positionedGlyphs,Ns=0;if(Lo.length()){for(var el=0;el<Lo.length();el++){var Qr=Lo.getSection(el),un=Lo.getSectionIndex(el),Mu=Lo.getCharCode(el),Id=0,qo=null,Ku=null,uu=null,dd=24,Uc=!(ji===Cu.horizontal||!Fs&&!er(Mu)||Fs&&(Dd[Mu]||(Er=Mu,Dn.Arabic(Er)||Dn["Arabic Supplement"](Er)||Dn["Arabic Extended-A"](Er)||Dn["Arabic Presentation Forms-A"](Er)||Dn["Arabic Presentation Forms-B"](Er))));if(Qr.imageName){var Dc=Yr[Qr.imageName];if(!Dc)continue;uu=Qr.imageName,yi.iconsInText=yi.iconsInText||!0,Ku=Dc.paddedRect;var Bu=Dc.displaySize;Qr.scale=24*Qr.scale/Sa,Id=Ho+(24-Bu[1]*Qr.scale),dd=(qo={width:Bu[0],height:Bu[1],left:1,top:-3,advance:Uc?Bu[1]:Bu[0]}).advance;var Ea=Uc?Bu[0]*Qr.scale-24*oo:Bu[1]*Qr.scale-24*oo;Ea>0&&Ea>Ns&&(Ns=Ea)}else{var Qp=lr[Qr.fontStack],Or=Qp&&Qp[Mu];if(Or&&Or.rect)Ku=Or.rect,qo=Or.metrics;else{var Ha=Br[Qr.fontStack],Jm=Ha&&Ha[Mu];if(!Jm)continue;qo=Jm.metrics}Id=24*(oo-Qr.scale)}Uc?(yi.verticalizable=!0,Xo.push({glyph:Mu,imageName:uu,x:ta,y:ul+Id,vertical:Uc,scale:Qr.scale,fontStack:Qr.fontStack,sectionIndex:un,metrics:qo,rect:Ku}),ta+=dd*Qr.scale+ys):(Xo.push({glyph:Mu,imageName:uu,x:ta,y:ul+Id,vertical:Uc,scale:Qr.scale,fontStack:Qr.fontStack,sectionIndex:un,metrics:qo,rect:Ku}),ta+=qo.advance*Qr.scale+ys)}0!==Xo.length&&(fo=Math.max(ta-ys,fo),Lc(Xo,0,Xo.length-1,yo,Ns)),ta=0;var vi=_o*oo+Ns;Il.lineOffset=Math.max(Ns,Ho),ul+=vi,Gl=Math.max(vi,Gl),++cl}else ul+=_o,++cl}var Er,Kp=ul- -17,na=$d(ls),Wd=na.horizontalAlign,Ih=na.verticalAlign;(function(As,Wf,Uu,Oh,Wm,hd,Qd,Ph,Kd){var cp,Xp=(Wf-Uu)*Wm;cp=hd!==Qd?-Ph*Oh- -17:(-Oh*Kd+.5)*Qd;for(var Od=0,Mc=As;Od<Mc.length;Od+=1)for(var Xu=0,Xd=Mc[Od].positionedGlyphs;Xu<Xd.length;Xu+=1){var pd=Xd[Xu];pd.x+=Xp,pd.y+=cp}})(yi.positionedLines,yo,Wd,Ih,fo,Gl,_o,Kp,Fi.length),yi.top+=-Ih*Kp,yi.bottom=yi.top+Kp,yi.left+=-Wd*fo,yi.right=yi.left+fo}(Ki,a,d,b,Et,L,H,ie,Ie,xe,ze,yt),!function(yi){for(var Br=0,lr=yi;Br<lr.length;Br+=1)if(0!==lr[Br].positionedGlyphs.length)return!1;return!0}(Ir)&&Ki}Xa.fromFeature=function(n,a){for(var d=new Xa,b=0;b<n.sections.length;b++){var T=n.sections[b];T.image?d.addImageSection(T):d.addTextSection(T,a)}return d},Xa.prototype.length=function(){return this.text.length},Xa.prototype.getSection=function(n){return this.sections[this.sectionIndex[n]]},Xa.prototype.getSectionIndex=function(n){return this.sectionIndex[n]},Xa.prototype.getCharCode=function(n){return this.text.charCodeAt(n)},Xa.prototype.verticalizePunctuation=function(){this.text=function(n){for(var a="",d=0;d<n.length;d++){var b=n.charCodeAt(d+1)||null,T=n.charCodeAt(d-1)||null;a+=b&&wo(b)&&!Ch[n[d+1]]||T&&wo(T)&&!Ch[n[d-1]]||!Ch[n[d]]?n[d]:Ch[n[d]]}return a}(this.text)},Xa.prototype.trim=function(){for(var n=0,a=0;a<this.text.length&&Dd[this.text.charCodeAt(a)];a++)n++;for(var d=this.text.length,b=this.text.length-1;b>=0&&b>=n&&Dd[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(n,d),this.sectionIndex=this.sectionIndex.slice(n,d)},Xa.prototype.substring=function(n,a){var d=new Xa;return d.text=this.text.substring(n,a),d.sectionIndex=this.sectionIndex.slice(n,a),d.sections=this.sections,d},Xa.prototype.toString=function(){return this.text},Xa.prototype.getMaxScale=function(){var n=this;return this.sectionIndex.reduce(function(a,d){return Math.max(a,n.sections[d].scale)},0)},Xa.prototype.addTextSection=function(n,a){this.text+=n.text,this.sections.push(od.forText(n.scale,n.fontStack||a));for(var d=this.sections.length-1,b=0;b<n.text.length;++b)this.sectionIndex.push(d)},Xa.prototype.addImageSection=function(n){var a=n.image?n.image.name:"";if(0!==a.length){var d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(od.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ft("Reached maximum number of images 6401")}else Ft("Can't add FormattedSection with an empty image.")},Xa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Dd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ll={};function Zd(n,a,d,b,T,E){if(a.imageName){var L=b[a.imageName];return L?L.displaySize[0]*a.scale*24/E+T:0}var H=d[a.fontStack],ie=H&&H[n];return ie?ie.metrics.advance*a.scale+T:0}function Gf(n,a,d,b){var T=Math.pow(n-a,2);return b?n<a?T/2:2*T:T+Math.abs(d)*d}function Zf(n,a,d){var b=0;return 10===n&&(b-=1e4),d&&(b+=150),40!==n&&65288!==n||(b+=50),41!==a&&65289!==a||(b+=50),b}function $f(n,a,d,b,T,E){for(var L=null,H=Gf(a,d,T,E),ie=0,xe=b;ie<xe.length;ie+=1){var Me=xe[ie],Ie=Gf(a-Me.x,d,T,E)+Me.badness;Ie<=H&&(L=Me,H=Ie)}return{index:n,x:a,priorBreak:L,badness:H}}function Zp(n,a,d,b,T,E,L){if("point"!==E)return[];if(!n)return[];for(var H,ie=[],xe=function(Et,Dt,$t,Wt,on,pn){for(var An=0,Fn=0;Fn<Et.length();Fn++){var Vn=Et.getSection(Fn);An+=Zd(Et.getCharCode(Fn),Vn,Wt,on,Dt,pn)}return An/Math.max(1,Math.ceil(An/$t))}(n,a,d,b,T,L),Me=n.text.indexOf("\u200b")>=0,Ie=0,ze=0;ze<n.length();ze++){var $e=n.getSection(ze),Oe=n.getCharCode(ze);if(Dd[Oe]||(Ie+=Zd(Oe,$e,b,T,a,L)),ze<n.length()-1){var yt=!((H=Oe)<11904||!(Dn["Bopomofo Extended"](H)||Dn.Bopomofo(H)||Dn["CJK Compatibility Forms"](H)||Dn["CJK Compatibility Ideographs"](H)||Dn["CJK Compatibility"](H)||Dn["CJK Radicals Supplement"](H)||Dn["CJK Strokes"](H)||Dn["CJK Symbols and Punctuation"](H)||Dn["CJK Unified Ideographs Extension A"](H)||Dn["CJK Unified Ideographs"](H)||Dn["Enclosed CJK Letters and Months"](H)||Dn["Halfwidth and Fullwidth Forms"](H)||Dn.Hiragana(H)||Dn["Ideographic Description Characters"](H)||Dn["Kangxi Radicals"](H)||Dn["Katakana Phonetic Extensions"](H)||Dn.Katakana(H)||Dn["Vertical Forms"](H)||Dn["Yi Radicals"](H)||Dn["Yi Syllables"](H)));(ll[Oe]||yt||$e.imageName)&&ie.push($f(ze+1,Ie,xe,ie,Zf(Oe,n.getCharCode(ze+1),yt&&Me),!1))}}return function Et(Dt){return Dt?Et(Dt.priorBreak).concat(Dt.index):[]}($f(n.length(),Ie,xe,ie,0,!0))}function $d(n){var a=.5,d=.5;switch(n){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function Lc(n,a,d,b,T){if(b||T)for(var E=n[d],L=(n[d].x+E.metrics.advance*E.scale)*b,H=a;H<=d;H++)n[H].x-=L,n[H].y+=T}function Yd(n,a,d,b,T,E){var L,H=n.image;if(H.content){var ie=H.content,xe=H.pixelRatio||1;L=[ie[0]/xe,ie[1]/xe,H.displaySize[0]-ie[2]/xe,H.displaySize[1]-ie[3]/xe]}var Me,Ie,ze,$e,Oe=a.left*E,yt=a.right*E;"width"===d||"both"===d?($e=T[0]+Oe-b[3],Ie=T[0]+yt+b[1]):Ie=($e=T[0]+(Oe+yt-H.displaySize[0])/2)+H.displaySize[0];var Et=a.top*E,Dt=a.bottom*E;return"height"===d||"both"===d?(Me=T[1]+Et-b[0],ze=T[1]+Dt+b[2]):ze=(Me=T[1]+(Et+Dt-H.displaySize[1])/2)+H.displaySize[1],{image:H,top:Me,right:Ie,bottom:ze,left:$e,collisionPadding:L}}ll[10]=!0,ll[32]=!0,ll[38]=!0,ll[40]=!0,ll[41]=!0,ll[43]=!0,ll[45]=!0,ll[47]=!0,ll[173]=!0,ll[183]=!0,ll[8203]=!0,ll[8208]=!0,ll[8211]=!0,ll[8231]=!0;var Md=function(n){function a(d,b,T,E){n.call(this,d,b),this.angle=T,void 0!==E&&(this.segment=E)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.clone=function(){return new a(this.x,this.y,this.angle,this.segment)},a}(q);function Sd(n,a){var d=a.expression;if("constant"===d.kind)return{kind:"constant",layoutSize:d.evaluate(new rr(n+1))};if("source"===d.kind)return{kind:"source"};for(var b=d.zoomStops,T=d.interpolationType,E=0;E<b.length&&b[E]<=n;)E++;for(var L=E=Math.max(0,E-1);L<b.length&&b[L]<n+1;)L++;L=Math.min(b.length-1,L);var H=b[E],ie=b[L];return"composite"===d.kind?{kind:"composite",minZoom:H,maxZoom:ie,interpolationType:T}:{kind:"camera",minZoom:H,maxZoom:ie,minSize:d.evaluate(new rr(H)),maxSize:d.evaluate(new rr(ie)),interpolationType:T}}function Mh(n,a,d){var b=a.uSize,T=d.lowerSize;return"source"===n.kind?T/128:"composite"===n.kind?to(T/128,d.upperSize/128,a.uSizeT):b}function Hm(n,a){var d=0,b=0;if("constant"===n.kind)b=n.layoutSize;else if("source"!==n.kind){var T=n.interpolationType,E=T?Ke(qr.interpolationFactor(T,a,n.minZoom,n.maxZoom),0,1):0;"camera"===n.kind?b=to(n.minSize,n.maxSize,E):d=E}return{uSizeT:d,uSize:b}}X("Anchor",Md);var Fg=Object.freeze({__proto__:null,getSizeData:Sd,evaluateSizeForFeature:Mh,evaluateSizeForZoom:Hm,SIZE_PACK_FACTOR:128});function $p(n,a,d,b,T){if(void 0===a.segment)return!0;for(var E=a,L=a.segment+1,H=0;H>-d/2;){if(--L<0)return!1;H-=n[L].dist(E),E=n[L]}H+=n[L].dist(n[L+1]),L++;for(var ie=[],xe=0;H<d/2;){var Me=n[L],Ie=n[L+1];if(!Ie)return!1;var ze=n[L-1].angleTo(Me)-Me.angleTo(Ie);for(ze=Math.abs((ze+3*Math.PI)%(2*Math.PI)-Math.PI),ie.push({distance:H,angleDelta:ze}),xe+=ze;H-ie[0].distance>b;)xe-=ie.shift().angleDelta;if(xe>T)return!1;L++,H+=Me.dist(Ie)}return!0}function Sh(n){for(var a=0,d=0;d<n.length-1;d++)a+=n[d].dist(n[d+1]);return a}function Yp(n,a,d){return n?.6*a*d:0}function Ng(n,a){return Math.max(n?n.right-n.left:0,a?a.right-a.left:0)}function Yf(n,a,d,b,T,E){for(var L=Yp(d,T,E),H=Ng(d,b)*E,ie=0,xe=Sh(n)/2,Me=0;Me<n.length-1;Me++){var Ie=n[Me],ze=n[Me+1],$e=Ie.dist(ze);if(ie+$e>xe){var Oe=(xe-ie)/$e,yt=to(Ie.x,ze.x,Oe),Et=to(Ie.y,ze.y,Oe),Dt=new Md(yt,Et,ze.angleTo(Ie),Me);return Dt._round(),!L||$p(n,Dt,H,L,a)?Dt:void 0}ie+=$e}}function rp(n,a,d,b,T,E,L,H,ie){var xe=Yp(b,E,L),Me=Ng(b,T),Ie=Me*L,ze=0===n[0].x||n[0].x===ie||0===n[0].y||n[0].y===ie;return a-Ie<a/4&&(a=Ie+a/4),function $e(Oe,yt,Et,Dt,$t,Wt,on,pn,An){for(var Fn=Wt/2,Vn=Sh(Oe),Ai=0,si=yt-Et,Oi=[],Kn=0;Kn<Oe.length-1;Kn++){for(var Ir=Oe[Kn],Ki=Oe[Kn+1],yi=Ir.dist(Ki),Br=Ki.angleTo(Ir);si+Et<Ai+yi;){var lr=((si+=Et)-Ai)/yi,Yr=to(Ir.x,Ki.x,lr),Fi=to(Ir.y,Ki.y,lr);if(Yr>=0&&Yr<An&&Fi>=0&&Fi<An&&si-Fn>=0&&si+Fn<=Vn){var _o=new Md(Yr,Fi,Br,Kn);_o._round(),Dt&&!$p(Oe,_o,Wt,Dt,$t)||Oi.push(_o)}}Ai+=yi}return pn||Oi.length||on||(Oi=$e(Oe,Ai/2,Et,Dt,$t,Wt,on,!0,An)),Oi}(n,ze?a/2*H%a:(Me/2+2*E)*L*H%a,a,xe,d,Ie,ze,!1,ie)}function qp(n,a,d,b,T){for(var E=[],L=0;L<n.length;L++)for(var H=n[L],ie=void 0,xe=0;xe<H.length-1;xe++){var Me=H[xe],Ie=H[xe+1];Me.x<a&&Ie.x<a||(Me.x<a?Me=new q(a,Me.y+(a-Me.x)/(Ie.x-Me.x)*(Ie.y-Me.y))._round():Ie.x<a&&(Ie=new q(a,Me.y+(a-Me.x)/(Ie.x-Me.x)*(Ie.y-Me.y))._round()),Me.y<d&&Ie.y<d||(Me.y<d?Me=new q(Me.x+(d-Me.y)/(Ie.y-Me.y)*(Ie.x-Me.x),d)._round():Ie.y<d&&(Ie=new q(Me.x+(d-Me.y)/(Ie.y-Me.y)*(Ie.x-Me.x),d)._round()),Me.x>=b&&Ie.x>=b||(Me.x>=b?Me=new q(b,Me.y+(b-Me.x)/(Ie.x-Me.x)*(Ie.y-Me.y))._round():Ie.x>=b&&(Ie=new q(b,Me.y+(b-Me.x)/(Ie.x-Me.x)*(Ie.y-Me.y))._round()),Me.y>=T&&Ie.y>=T||(Me.y>=T?Me=new q(Me.x+(T-Me.y)/(Ie.y-Me.y)*(Ie.x-Me.x),T)._round():Ie.y>=T&&(Ie=new q(Me.x+(T-Me.y)/(Ie.y-Me.y)*(Ie.x-Me.x),T)._round()),ie&&Me.equals(ie[ie.length-1])||E.push(ie=[Me]),ie.push(Ie)))))}return E}function Eh(n,a,d,b){var T=[],E=n.image,L=E.pixelRatio,H=E.paddedRect.w-2,ie=E.paddedRect.h-2,xe=n.right-n.left,Me=n.bottom-n.top,Ie=E.stretchX||[[0,H]],ze=E.stretchY||[[0,ie]],$e=function(Yr,Fi){return Yr+Fi[1]-Fi[0]},Oe=Ie.reduce($e,0),yt=ze.reduce($e,0),Et=H-Oe,Dt=ie-yt,$t=0,Wt=Oe,on=0,pn=yt,An=0,Fn=Et,Vn=0,Ai=Dt;if(E.content&&b){var si=E.content;$t=sd(Ie,0,si[0]),on=sd(ze,0,si[1]),Wt=sd(Ie,si[0],si[2]),pn=sd(ze,si[1],si[3]),An=si[0]-$t,Vn=si[1]-on,Fn=si[2]-si[0]-Wt,Ai=si[3]-si[1]-pn}var Oi=function(Yr,Fi,_o,ls){var qs=op(Yr.stretch-$t,Wt,xe,n.left),ji=ad(Yr.fixed-An,Fn,Yr.stretch,Oe),ys=op(Fi.stretch-on,pn,Me,n.top),Fs=ad(Fi.fixed-Vn,Ai,Fi.stretch,yt),Sa=op(_o.stretch-$t,Wt,xe,n.left),ta=ad(_o.fixed-An,Fn,_o.stretch,Oe),ul=op(ls.stretch-on,pn,Me,n.top),fo=ad(ls.fixed-Vn,Ai,ls.stretch,yt),Gl=new q(qs,ys),yo=new q(Sa,ys),cl=new q(Sa,ul),Ur=new q(qs,ul),ro=new q(ji/L,Fs/L),Lo=new q(ta/L,fo/L),oo=a*Math.PI/180;if(oo){var Ho=Math.sin(oo),Il=Math.cos(oo),Xo=[Il,-Ho,Ho,Il];Gl._matMult(Xo),yo._matMult(Xo),Ur._matMult(Xo),cl._matMult(Xo)}var Ns=Yr.stretch+Yr.fixed,el=Fi.stretch+Fi.fixed;return{tl:Gl,tr:yo,bl:Ur,br:cl,tex:{x:E.paddedRect.x+1+Ns,y:E.paddedRect.y+1+el,w:_o.stretch+_o.fixed-Ns,h:ls.stretch+ls.fixed-el},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ro,pixelOffsetBR:Lo,minFontScaleX:Fn/L/xe,minFontScaleY:Ai/L/Me,isSDF:d}};if(b&&(E.stretchX||E.stretchY))for(var Kn=qd(Ie,Et,Oe),Ir=qd(ze,Dt,yt),Ki=0;Ki<Kn.length-1;Ki++)for(var yi=Kn[Ki],Br=Kn[Ki+1],lr=0;lr<Ir.length-1;lr++)T.push(Oi(yi,Ir[lr],Br,Ir[lr+1]));else T.push(Oi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:H+1},{fixed:0,stretch:ie+1}));return T}function sd(n,a,d){for(var b=0,T=0,E=n;T<E.length;T+=1){var L=E[T];b+=Math.max(a,Math.min(d,L[1]))-Math.max(a,Math.min(d,L[0]))}return b}function qd(n,a,d){for(var b=[{fixed:-1,stretch:0}],T=0,E=n;T<E.length;T+=1){var L=E[T],H=L[0],ie=L[1],xe=b[b.length-1];b.push({fixed:H-xe.stretch,stretch:xe.stretch}),b.push({fixed:H-xe.stretch,stretch:xe.stretch+(ie-H)})}return b.push({fixed:a+1,stretch:d}),b}function op(n,a,d,b){return n/a*d+b}function ad(n,a,d,b){return n-a*d/b}var sp=function(n,a,d,b,T,E,L,H,ie,xe){if(this.boxStartIndex=n.length,ie){var Me=E.top,Ie=E.bottom,ze=E.collisionPadding;ze&&(Me-=ze[1],Ie+=ze[3]);var $e=Ie-Me;$e>0&&($e=Math.max(10,$e),this.circleDiameter=$e)}else{var Oe=E.top*L-H,yt=E.bottom*L+H,Et=E.left*L-H,Dt=E.right*L+H,$t=E.collisionPadding;if($t&&(Et-=$t[0]*L,Oe-=$t[1]*L,Dt+=$t[2]*L,yt+=$t[3]*L),xe){var Wt=new q(Et,Oe),on=new q(Dt,Oe),pn=new q(Et,yt),An=new q(Dt,yt),Fn=xe*Math.PI/180;Wt._rotate(Fn),on._rotate(Fn),pn._rotate(Fn),An._rotate(Fn),Et=Math.min(Wt.x,on.x,pn.x,An.x),Dt=Math.max(Wt.x,on.x,pn.x,An.x),Oe=Math.min(Wt.y,on.y,pn.y,An.y),yt=Math.max(Wt.y,on.y,pn.y,An.y)}n.emplaceBack(a.x,a.y,Et,Oe,Dt,yt,d,b,T)}this.boxEndIndex=n.length},Ed=function(n,a){if(void 0===n&&(n=[]),void 0===a&&(a=Gm),this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function Gm(n,a){return n<a?-1:n>a?1:0}function Va(n,a,d){void 0===a&&(a=1),void 0===d&&(d=!1);for(var b=1/0,T=1/0,E=-1/0,L=-1/0,H=n[0],ie=0;ie<H.length;ie++){var xe=H[ie];(!ie||xe.x<b)&&(b=xe.x),(!ie||xe.y<T)&&(T=xe.y),(!ie||xe.x>E)&&(E=xe.x),(!ie||xe.y>L)&&(L=xe.y)}var Me=Math.min(E-b,L-T),Ie=Me/2,ze=new Ed([],Zm);if(0===Me)return new q(b,T);for(var $e=b;$e<E;$e+=Me)for(var Oe=T;Oe<L;Oe+=Me)ze.push(new Ah($e+Ie,Oe+Ie,Ie,n));for(var yt=function($t){for(var Wt=0,on=0,pn=0,An=$t[0],Fn=0,Vn=An.length,Ai=Vn-1;Fn<Vn;Ai=Fn++){var si=An[Fn],Oi=An[Ai],Kn=si.x*Oi.y-Oi.x*si.y;on+=(si.x+Oi.x)*Kn,pn+=(si.y+Oi.y)*Kn,Wt+=3*Kn}return new Ah(on/Wt,pn/Wt,0,$t)}(n),Et=ze.length;ze.length;){var Dt=ze.pop();(Dt.d>yt.d||!yt.d)&&(yt=Dt,d&&console.log("found best %d after %d probes",Math.round(1e4*Dt.d)/1e4,Et)),Dt.max-yt.d<=a||(ze.push(new Ah(Dt.p.x-(Ie=Dt.h/2),Dt.p.y-Ie,Ie,n)),ze.push(new Ah(Dt.p.x+Ie,Dt.p.y-Ie,Ie,n)),ze.push(new Ah(Dt.p.x-Ie,Dt.p.y+Ie,Ie,n)),ze.push(new Ah(Dt.p.x+Ie,Dt.p.y+Ie,Ie,n)),Et+=4)}return d&&(console.log("num probes: "+Et),console.log("best distance: "+yt.d)),yt.p}function Zm(n,a){return a.max-n.max}function Ah(n,a,d,b){this.p=new q(n,a),this.h=d,this.d=function(T,E){for(var L=!1,H=1/0,ie=0;ie<E.length;ie++)for(var xe=E[ie],Me=0,Ie=xe.length,ze=Ie-1;Me<Ie;ze=Me++){var $e=xe[Me],Oe=xe[ze];$e.y>T.y!=Oe.y>T.y&&T.x<(Oe.x-$e.x)*(T.y-$e.y)/(Oe.y-$e.y)+$e.x&&(L=!L),H=Math.min(H,ou(T,$e,Oe))}return(L?1:-1)*Math.sqrt(H)}(this.p,b),this.max=this.d+this.h*Math.SQRT2}Ed.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},Ed.prototype.pop=function(){if(0!==this.length){var n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}},Ed.prototype.peek=function(){return this.data[0]},Ed.prototype._up=function(n){for(var a=this.data,d=this.compare,b=a[n];n>0;){var T=n-1>>1,E=a[T];if(d(b,E)>=0)break;a[n]=E,n=T}a[n]=b},Ed.prototype._down=function(n){for(var a=this.data,d=this.compare,b=this.length>>1,T=a[n];n<b;){var E=1+(n<<1),L=a[E],H=E+1;if(H<this.length&&d(a[H],L)<0&&(E=H,L=a[H]),d(L,T)>=0)break;a[n]=L,n=E}a[n]=T};var ap=Number.POSITIVE_INFINITY;function Jp(n,a){return a[1]!==ap?function(d,b,T){var E=0,L=0;switch(b=Math.abs(b),T=Math.abs(T),d){case"top-right":case"top-left":case"top":L=T-7;break;case"bottom-right":case"bottom-left":case"bottom":L=7-T}switch(d){case"top-right":case"bottom-right":case"right":E=-b;break;case"top-left":case"bottom-left":case"left":E=b}return[E,L]}(n,a[0],a[1]):function(d,b){var T=0,E=0;b<0&&(b=0);var L=b/Math.sqrt(2);switch(d){case"top-right":case"top-left":E=L-7;break;case"bottom-right":case"bottom-left":E=7-L;break;case"bottom":E=7-b;break;case"top":E=b-7}switch(d){case"top-right":case"bottom-right":T=-L;break;case"top-left":case"bottom-left":T=L;break;case"left":T=b;break;case"right":T=-b}return[T,E]}(n,a[0])}function qf(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $m(n,a,d,b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe){var yt=function(on,pn,An,Fn,Vn,Ai,si,Oi){for(var Kn=Fn.layout.get("text-rotate").evaluate(Ai,{})*Math.PI/180,Ir=[],Ki=0,yi=pn.positionedLines;Ki<yi.length;Ki+=1)for(var Br=yi[Ki],lr=0,Yr=Br.positionedGlyphs;lr<Yr.length;lr+=1){var Fi=Yr[lr];if(Fi.rect){var _o=Fi.rect||{},ls=4,qs=!0,ji=1,ys=0,Fs=(Vn||Oi)&&Fi.vertical,Sa=Fi.metrics.advance*Fi.scale/2;if(Oi&&pn.verticalizable&&(ys=Br.lineOffset/2-(Fi.imageName?-(24-Fi.metrics.width*Fi.scale)/2:24*(Fi.scale-1))),Fi.imageName){var ta=si[Fi.imageName];qs=ta.sdf,ls=1/(ji=ta.pixelRatio)}var ul=Vn?[Fi.x+Sa,Fi.y]:[0,0],fo=Vn?[0,0]:[Fi.x+Sa+An[0],Fi.y+An[1]-ys],Gl=[0,0];Fs&&(Gl=fo,fo=[0,0]);var yo=(Fi.metrics.left-ls)*Fi.scale-Sa+fo[0],cl=(-Fi.metrics.top-ls)*Fi.scale+fo[1],Ur=yo+_o.w*Fi.scale/ji,ro=cl+_o.h*Fi.scale/ji,Lo=new q(yo,cl),oo=new q(Ur,cl),Ho=new q(yo,ro),Il=new q(Ur,ro);if(Fs){var Xo=new q(-Sa,Sa- -17),Ns=-Math.PI/2,el=12-Sa,Qr=new q(22-el,-(Fi.imageName?el:0)),un=new(Function.prototype.bind.apply(q,[null].concat(Gl)));Lo._rotateAround(Ns,Xo)._add(Qr)._add(un),oo._rotateAround(Ns,Xo)._add(Qr)._add(un),Ho._rotateAround(Ns,Xo)._add(Qr)._add(un),Il._rotateAround(Ns,Xo)._add(Qr)._add(un)}if(Kn){var Mu=Math.sin(Kn),Id=Math.cos(Kn),qo=[Id,-Mu,Mu,Id];Lo._matMult(qo),oo._matMult(qo),Ho._matMult(qo),Il._matMult(qo)}var Ku=new q(0,0),uu=new q(0,0);Ir.push({tl:Lo,tr:oo,bl:Ho,br:Il,tex:_o,writingMode:pn.writingMode,glyphOffset:ul,sectionIndex:Fi.sectionIndex,isSDF:qs,pixelOffsetTL:Ku,pixelOffsetBR:uu,minFontScaleX:0,minFontScaleY:0})}}return Ir}(0,d,H,T,E,L,b,n.allowVerticalPlacement),Et=n.textSizeData,Dt=null;"source"===Et.kind?(Dt=[128*T.layout.get("text-size").evaluate(L,{})])[0]>32640&&Ft(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Et.kind&&((Dt=[128*$e.compositeTextSizes[0].evaluate(L,{},Oe),128*$e.compositeTextSizes[1].evaluate(L,{},Oe)])[0]>32640||Dt[1]>32640)&&Ft(n.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),n.addSymbols(n.text,yt,Dt,H,E,L,xe,a,ie.lineStartIndex,ie.lineLength,ze,Oe);for(var $t=0,Wt=Me;$t<Wt.length;$t+=1)Ie[Wt[$t]]=n.text.placedSymbolArray.length-1;return 4*yt.length}function Ym(n){for(var a in n)return n[a];return null}function lp(n,a,d,b){var T=n.compareText;if(a in T){for(var E=T[a],L=E.length-1;L>=0;L--)if(b.dist(E[L])<d)return!0}else T[a]=[];return T[a].push(b),!1}var qm=xd.VectorTileFeature.types,k_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function w(n,a,d,b,T,E,L,H,ie,xe,Me,Ie,ze){var $e=H?Math.min(32640,Math.round(H[0])):0,Oe=H?Math.min(32640,Math.round(H[1])):0;n.emplaceBack(a,d,Math.round(32*b),Math.round(32*T),E,L,($e<<1)+(ie?1:0),Oe,16*xe,16*Me,256*Ie,256*ze)}function k(n,a,d){n.emplaceBack(a.x,a.y,d),n.emplaceBack(a.x,a.y,d),n.emplaceBack(a.x,a.y,d),n.emplaceBack(a.x,a.y,d)}function m(n){for(var a=0,d=n.sections;a<d.length;a+=1)if(Vs(d[a].text))return!0;return!1}var M=function(n){this.layoutVertexArray=new Co,this.indexArray=new Xs,this.programConfigurations=n,this.segments=new R,this.dynamicLayoutVertexArray=new gs,this.opacityVertexArray=new iu,this.placedSymbolArray=new x};M.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},M.prototype.upload=function(n,a,d,b){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wh.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,jp.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,k_,!0),this.opacityVertexBuffer.itemSize=1),(d||b)&&this.programConfigurations.upload(n))},M.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},X("SymbolBuffers",M);var Z=function(n,a,d){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new d,this.segments=new R,this.collisionVertexArray=new Ec};Z.prototype.upload=function(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,id.members,!0)},Z.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},X("CollisionBuffers",Z);var pe=function(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(function(E){return E.id}),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=xu([]),this.placementViewportMatrix=xu([]);var a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sd(this.zoom,a["text-size"]),this.iconSizeData=Sd(this.zoom,a["icon-size"]);var d=this.layers[0].layout,b=d.get("symbol-sort-key"),T=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==T&&void 0!==b.constantOr(1),this.sortFeaturesByY=("viewport-y"===T||"auto"===T&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===d.get("symbol-placement")&&(this.writingModes=d.get("text-writing-mode").map(function(E){return Cu[E]})),this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id}),this.sourceID=n.sourceID};pe.prototype.createArrays=function(){this.text=new M(new Zi(this.layers,this.zoom,function(n){return/^text/.test(n)})),this.icon=new M(new Zi(this.layers,this.zoom,function(n){return/^icon/.test(n)})),this.glyphOffsetArray=new V,this.lineVertexArray=new ee,this.symbolInstances=new B},pe.prototype.calculateGlyphDependencies=function(n,a,d,b,T){for(var E=0;E<n.length;E++)if(a[n.charCodeAt(E)]=!0,(d||b)&&T){var L=Ch[n.charAt(E)];L&&(a[L.charCodeAt(0)]=!0)}},pe.prototype.populate=function(n,a,d){var b=this.layers[0],T=b.layout,E=T.get("text-font"),L=T.get("text-field"),H=T.get("icon-image"),ie=("constant"!==L.value.kind||L.value.value instanceof Hn&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&("constant"!==E.value.kind||E.value.value.length>0),xe="constant"!==H.value.kind||!!H.value.value||Object.keys(H.parameters).length>0,Me=T.get("symbol-sort-key");if(this.features=[],ie||xe){for(var Ie=a.iconDependencies,ze=a.glyphDependencies,$e=a.availableImages,Oe=new rr(this.zoom),yt=0,Et=n;yt<Et.length;yt+=1){var Dt=Et[yt],$t=Dt.feature,Wt=Dt.id,on=Dt.index,pn=Dt.sourceLayerIndex,An=b._featureFilter.needGeometry,Fn=is($t,An);if(b._featureFilter.filter(Oe,Fn,d)){An||(Fn.geometry=$o($t));var Vn=void 0;if(ie){var Ai=b.getValueAndResolveTokens("text-field",Fn,d,$e),si=Hn.factory(Ai);m(si)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===yu()||this.hasRTLText&&Gs.isParsed())&&(Vn=zm(si,b,Fn))}var Oi=void 0;if(xe){var Kn=b.getValueAndResolveTokens("icon-image",Fn,d,$e);Oi=Kn instanceof ri?Kn:ri.fromString(Kn)}if(Vn||Oi){var Ir=this.sortFeaturesByKey?Me.evaluate(Fn,{},d):void 0;if(this.features.push({id:Wt,text:Vn,icon:Oi,index:on,sourceLayerIndex:pn,geometry:Fn.geometry,properties:$t.properties,type:qm[$t.type],sortKey:Ir}),Oi&&(Ie[Oi.name]=!0),Vn){var Ki=E.evaluate(Fn,{},d).join(","),yi="map"===T.get("text-rotation-alignment")&&"point"!==T.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Cu.vertical)>=0;for(var Br=0,lr=Vn.sections;Br<lr.length;Br+=1){var Yr=lr[Br];if(Yr.image)Ie[Yr.image.name]=!0;else{var Fi=Tr(Vn.toString()),_o=Yr.fontStack||Ki,ls=ze[_o]=ze[_o]||{};this.calculateGlyphDependencies(Yr.text,ls,yi,this.allowVerticalPlacement,Fi)}}}}}}"line"===T.get("symbol-placement")&&(this.features=function(qs){var ji={},ys={},Fs=[],Sa=0;function ta(Xo){Fs.push(qs[Xo]),Sa++}function ul(Xo,Ns,el){var Qr=ys[Xo];return delete ys[Xo],ys[Ns]=Qr,Fs[Qr].geometry[0].pop(),Fs[Qr].geometry[0]=Fs[Qr].geometry[0].concat(el[0]),Qr}function fo(Xo,Ns,el){var Qr=ji[Ns];return delete ji[Ns],ji[Xo]=Qr,Fs[Qr].geometry[0].shift(),Fs[Qr].geometry[0]=el[0].concat(Fs[Qr].geometry[0]),Qr}function Gl(Xo,Ns,el){var Qr=el?Ns[0][Ns[0].length-1]:Ns[0][0];return Xo+":"+Qr.x+":"+Qr.y}for(var yo=0;yo<qs.length;yo++){var cl=qs[yo],Ur=cl.geometry,ro=cl.text?cl.text.toString():null;if(ro){var Lo=Gl(ro,Ur),oo=Gl(ro,Ur,!0);if(Lo in ys&&oo in ji&&ys[Lo]!==ji[oo]){var Ho=fo(Lo,oo,Ur),Il=ul(Lo,oo,Fs[Ho].geometry);delete ji[Lo],delete ys[oo],ys[Gl(ro,Fs[Il].geometry,!0)]=Il,Fs[Ho].geometry=null}else Lo in ys?ul(Lo,oo,Ur):oo in ji?fo(Lo,oo,Ur):(ta(yo),ji[Lo]=Sa-1,ys[oo]=Sa-1)}else ta(yo)}return Fs.filter(function(Xo){return Xo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(qs,ji){return qs.sortKey-ji.sortKey})}},pe.prototype.update=function(n,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,d))},pe.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},pe.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},pe.prototype.upload=function(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},pe.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},pe.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},pe.prototype.addToLineVertexArray=function(n,a){var d=this.lineVertexArray.length;if(void 0!==n.segment){for(var b=n.dist(a[n.segment+1]),T=n.dist(a[n.segment]),E={},L=n.segment+1;L<a.length;L++)E[L]={x:a[L].x,y:a[L].y,tileUnitDistanceFromAnchor:b},L<a.length-1&&(b+=a[L+1].dist(a[L]));for(var H=n.segment||0;H>=0;H--)E[H]={x:a[H].x,y:a[H].y,tileUnitDistanceFromAnchor:T},H>0&&(T+=a[H-1].dist(a[H]));for(var ie=0;ie<a.length;ie++){var xe=E[ie];this.lineVertexArray.emplaceBack(xe.x,xe.y,xe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}},pe.prototype.addSymbols=function(n,a,d,b,T,E,L,H,ie,xe,Me,Ie){for(var ze=n.indexArray,$e=n.layoutVertexArray,Oe=n.segments.prepareSegment(4*a.length,$e,ze,this.canOverlap?E.sortKey:void 0),yt=this.glyphOffsetArray.length,Et=Oe.vertexLength,Dt=this.allowVerticalPlacement&&L===Cu.vertical?Math.PI/2:0,$t=E.text&&E.text.sections,Wt=0;Wt<a.length;Wt++){var on=a[Wt],pn=on.tl,An=on.tr,Fn=on.bl,Vn=on.br,Ai=on.tex,si=on.pixelOffsetTL,Oi=on.pixelOffsetBR,Kn=on.minFontScaleX,Ir=on.minFontScaleY,Ki=on.glyphOffset,yi=on.isSDF,Br=on.sectionIndex,lr=Oe.vertexLength,Yr=Ki[1];w($e,H.x,H.y,pn.x,Yr+pn.y,Ai.x,Ai.y,d,yi,si.x,si.y,Kn,Ir),w($e,H.x,H.y,An.x,Yr+An.y,Ai.x+Ai.w,Ai.y,d,yi,Oi.x,si.y,Kn,Ir),w($e,H.x,H.y,Fn.x,Yr+Fn.y,Ai.x,Ai.y+Ai.h,d,yi,si.x,Oi.y,Kn,Ir),w($e,H.x,H.y,Vn.x,Yr+Vn.y,Ai.x+Ai.w,Ai.y+Ai.h,d,yi,Oi.x,Oi.y,Kn,Ir),k(n.dynamicLayoutVertexArray,H,Dt),ze.emplaceBack(lr,lr+1,lr+2),ze.emplaceBack(lr+1,lr+2,lr+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ki[0]),Wt!==a.length-1&&Br===a[Wt+1].sectionIndex||n.programConfigurations.populatePaintArrays($e.length,E,E.index,{},Ie,$t&&$t[Br])}n.placedSymbolArray.emplaceBack(H.x,H.y,yt,this.glyphOffsetArray.length-yt,Et,ie,xe,H.segment,d?d[0]:0,d?d[1]:0,b[0],b[1],L,0,!1,0,Me)},pe.prototype._addCollisionDebugVertex=function(n,a,d,b,T,E){return a.emplaceBack(0,0),n.emplaceBack(d.x,d.y,b,T,Math.round(E.x),Math.round(E.y))},pe.prototype.addCollisionDebugVertices=function(n,a,d,b,T,E,L){var H=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),ie=H.vertexLength,xe=T.layoutVertexArray,Me=T.collisionVertexArray,Ie=L.anchorX,ze=L.anchorY;this._addCollisionDebugVertex(xe,Me,E,Ie,ze,new q(n,a)),this._addCollisionDebugVertex(xe,Me,E,Ie,ze,new q(d,a)),this._addCollisionDebugVertex(xe,Me,E,Ie,ze,new q(d,b)),this._addCollisionDebugVertex(xe,Me,E,Ie,ze,new q(n,b)),H.vertexLength+=4;var $e=T.indexArray;$e.emplaceBack(ie,ie+1),$e.emplaceBack(ie+1,ie+2),$e.emplaceBack(ie+2,ie+3),$e.emplaceBack(ie+3,ie),H.primitiveLength+=4},pe.prototype.addDebugCollisionBoxes=function(n,a,d,b){for(var T=n;T<a;T++){var E=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,b?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,d)}},pe.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Z(Gu,Nc.members,_d),this.iconCollisionBox=new Z(Gu,Nc.members,_d);for(var n=0;n<this.symbolInstances.length;n++){var a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}},pe.prototype._deserializeCollisionBoxesForSymbol=function(n,a,d,b,T,E,L,H,ie){for(var xe={},Me=a;Me<d;Me++){var Ie=n.get(Me);xe.textBox={x1:Ie.x1,y1:Ie.y1,x2:Ie.x2,y2:Ie.y2,anchorPointX:Ie.anchorPointX,anchorPointY:Ie.anchorPointY},xe.textFeatureIndex=Ie.featureIndex;break}for(var ze=b;ze<T;ze++){var $e=n.get(ze);xe.verticalTextBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},xe.verticalTextFeatureIndex=$e.featureIndex;break}for(var Oe=E;Oe<L;Oe++){var yt=n.get(Oe);xe.iconBox={x1:yt.x1,y1:yt.y1,x2:yt.x2,y2:yt.y2,anchorPointX:yt.anchorPointX,anchorPointY:yt.anchorPointY},xe.iconFeatureIndex=yt.featureIndex;break}for(var Et=H;Et<ie;Et++){var Dt=n.get(Et);xe.verticalIconBox={x1:Dt.x1,y1:Dt.y1,x2:Dt.x2,y2:Dt.y2,anchorPointX:Dt.anchorPointX,anchorPointY:Dt.anchorPointY},xe.verticalIconFeatureIndex=Dt.featureIndex;break}return xe},pe.prototype.deserializeCollisionBoxes=function(n){this.collisionArrays=[];for(var a=0;a<this.symbolInstances.length;a++){var d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}},pe.prototype.hasTextData=function(){return this.text.segments.get().length>0},pe.prototype.hasIconData=function(){return this.icon.segments.get().length>0},pe.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},pe.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},pe.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},pe.prototype.addIndicesForPlacedSymbol=function(n,a){for(var d=n.placedSymbolArray.get(a),b=d.vertexStartIndex+4*d.numGlyphs,T=d.vertexStartIndex;T<b;T+=4)n.indexArray.emplaceBack(T,T+1,T+2),n.indexArray.emplaceBack(T+1,T+2,T+3)},pe.prototype.getSortedSymbolIndexes=function(n){if(this.sortedAngle===n&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var a=Math.sin(n),d=Math.cos(n),b=[],T=[],E=[],L=0;L<this.symbolInstances.length;++L){E.push(L);var H=this.symbolInstances.get(L);b.push(0|Math.round(a*H.anchorX+d*H.anchorY)),T.push(H.featureIndex)}return E.sort(function(ie,xe){return b[ie]-b[xe]||T[xe]-T[ie]}),E},pe.prototype.addToSortKeyRanges=function(n,a){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})},pe.prototype.sortFeatures=function(n){var a=this;if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var d=0,b=this.symbolInstanceIndexes;d<b.length;d+=1){var T=this.symbolInstances.get(b[d]);this.featureSortOrder.push(T.featureIndex),[T.rightJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.leftJustifiedTextSymbolIndex].forEach(function(E,L,H){E>=0&&H.indexOf(E)===L&&a.addIndicesForPlacedSymbol(a.text,E)}),T.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,T.verticalPlacedTextSymbolIndex),T.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.placedIconSymbolIndex),T.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},X("SymbolBucket",pe,{omit:["layers","collisionBoxArray","features","compareText"]}),pe.MAX_GLYPHS=65535,pe.addDynamicAttributes=k;var _t=new ms({"symbol-placement":new li(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new li(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new li(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new li(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new li(Pe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new li(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new li(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new li(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(Pe.layout_symbol["icon-size"]),"icon-text-fit":new li(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new li(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(Pe.layout_symbol["icon-image"]),"icon-rotate":new ei(Pe.layout_symbol["icon-rotate"]),"icon-padding":new li(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new li(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(Pe.layout_symbol["icon-offset"]),"icon-anchor":new ei(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new li(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new li(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new li(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new ei(Pe.layout_symbol["text-field"]),"text-font":new ei(Pe.layout_symbol["text-font"]),"text-size":new ei(Pe.layout_symbol["text-size"]),"text-max-width":new ei(Pe.layout_symbol["text-max-width"]),"text-line-height":new li(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new ei(Pe.layout_symbol["text-justify"]),"text-radial-offset":new ei(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new li(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new ei(Pe.layout_symbol["text-anchor"]),"text-max-angle":new li(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new li(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new ei(Pe.layout_symbol["text-rotate"]),"text-padding":new li(Pe.layout_symbol["text-padding"]),"text-keep-upright":new li(Pe.layout_symbol["text-keep-upright"]),"text-transform":new ei(Pe.layout_symbol["text-transform"]),"text-offset":new ei(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new li(Pe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new li(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new li(Pe.layout_symbol["text-optional"])}),Pt={paint:new ms({"icon-opacity":new ei(Pe.paint_symbol["icon-opacity"]),"icon-color":new ei(Pe.paint_symbol["icon-color"]),"icon-halo-color":new ei(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new li(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new li(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(Pe.paint_symbol["text-opacity"]),"text-color":new ei(Pe.paint_symbol["text-color"],{runtimeType:In,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new ei(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new ei(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(Pe.paint_symbol["text-halo-blur"]),"text-translate":new li(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new li(Pe.paint_symbol["text-translate-anchor"])}),layout:_t},jt=function(n){this.type=n.property.overrides?n.property.overrides.runtimeType:bt,this.defaultValue=n};jt.prototype.evaluate=function(n){if(n.formattedSection){var a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default},jt.prototype.eachChild=function(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)},jt.prototype.outputDefined=function(){return!1},jt.prototype.serialize=function(){return null},X("FormatSectionOverride",jt,{omit:["defaultValue"]});var nn=function(n){function a(d){n.call(this,d,Pt)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.recalculate=function(d,b){if(n.prototype.recalculate.call(this,d,b),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var T=this.layout.get("text-writing-mode");if(T){for(var E=[],L=0,H=T;L<H.length;L+=1){var ie=H[L];E.indexOf(ie)<0&&E.push(ie)}this.layout._values["text-writing-mode"]=E}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},a.prototype.getValueAndResolveTokens=function(d,b,T,E){var ie,L=this.layout.get(d).evaluate(b,{},T,E),H=this._unevaluatedLayout._values[d];return H.isDataDriven()||js(H.value)||!L?L:(ie=b.properties,L.replace(/{([^{}]+)}/g,function(Me,Ie){return Ie in ie?String(ie[Ie]):""}))},a.prototype.createBucket=function(d){return new pe(d)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype._setPaintOverrides=function(){for(var d=0,b=Pt.paint.overridableProperties;d<b.length;d+=1){var T=b[d];if(a.hasPaintOverride(this.layout,T)){var E,L=this.paint.get(T),H=new jt(L),ie=new Qs(H,L.property.specification);E="constant"===L.value.kind||"source"===L.value.kind?new Un("source",ie):new vr("composite",ie,L.value.zoomStops,L.value._interpolationType),this.paint._values[T]=new Zs(L.property,E,L.parameters)}}},a.prototype._handleOverridablePaintPropertyUpdate=function(d,b,T){return!(!this.layout||b.isDataDriven()||T.isDataDriven())&&a.hasPaintOverride(this.layout,d)},a.hasPaintOverride=function(d,b){var T=d.get("text-field"),E=Pt.paint.properties[b],L=!1,H=function(Me){for(var Ie=0,ze=Me;Ie<ze.length;Ie+=1)if(E.overrides&&E.overrides.hasOverride(ze[Ie]))return void(L=!0)};if("constant"===T.value.kind&&T.value.value instanceof Hn)H(T.value.value.sections);else if("source"===T.value.kind){var ie=function(Me){L||(Me instanceof Ri&&Sn(Me.value)===ur?H(Me.value.sections):Me instanceof Bo?H(Me.sections):Me.eachChild(ie))},xe=T.value;xe._styleExpression&&ie(xe._styleExpression.expression)}return L},a}(rl),vn={paint:new ms({"background-color":new li(Pe.paint_background["background-color"]),"background-pattern":new ss(Pe.paint_background["background-pattern"]),"background-opacity":new li(Pe.paint_background["background-opacity"])})},wi=function(n){function a(d){n.call(this,d,vn)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a}(rl),Qn={paint:new ms({"raster-opacity":new li(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new li(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new li(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new li(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new li(Pe.paint_raster["raster-saturation"]),"raster-contrast":new li(Pe.paint_raster["raster-contrast"]),"raster-resampling":new li(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new li(Pe.paint_raster["raster-fade-duration"])})},_i=function(n){function a(d){n.call(this,d,Qn)}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a}(rl),Xr=function(n){function a(d){n.call(this,d,{}),this.implementation=d}return n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a,a.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},a.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},a.prototype.recalculate=function(){},a.prototype.updateTransitions=function(){},a.prototype.hasTransition=function(){},a.prototype.serialize=function(){},a.prototype.onAdd=function(d){this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},a.prototype.onRemove=function(d){this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},a}(rl),sr={circle:Vh,heatmap:Hl,hillshade:$u,fill:O_,"fill-extrusion":Bm,line:Cd,symbol:nn,background:wi,raster:_i},kr=we.HTMLImageElement,jr=we.HTMLCanvasElement,po=we.HTMLVideoElement,as=we.ImageData,Fr=we.ImageBitmap,io=function(n,a,d,b){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(a,b)};io.prototype.update=function(n,a,d){var b=n.width,T=n.height,E=!(this.size&&this.size[0]===b&&this.size[1]===T||d),L=this.context,H=L.gl;if(this.useMipmap=Boolean(a&&a.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!a||!1!==a.premultiply)),E)this.size=[b,T],n instanceof kr||n instanceof jr||n instanceof po||n instanceof as||Fr&&n instanceof Fr?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,n):H.texImage2D(H.TEXTURE_2D,0,this.format,b,T,0,this.format,H.UNSIGNED_BYTE,n.data);else{var ie=d||{x:0,y:0},xe=ie.x,Me=ie.y;n instanceof kr||n instanceof jr||n instanceof po||n instanceof as||Fr&&n instanceof Fr?H.texSubImage2D(H.TEXTURE_2D,0,xe,Me,H.RGBA,H.UNSIGNED_BYTE,n):H.texSubImage2D(H.TEXTURE_2D,0,xe,Me,b,T,H.RGBA,H.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D)},io.prototype.bind=function(n,a,d){var b=this.context.gl;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||n),this.filter=n),a!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,a),this.wrap=a)},io.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},io.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ao=function(n){var a=this;this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){a._triggered=!1,a._callback()})};Ao.prototype.trigger=function(){var n=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){n._triggered=!1,n._callback()},0))},Ao.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vo=function(n,a,d){this.target=n,this.parent=a,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},dt(["receive","process"],this),this.invoker=new Ao(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Kt()?n:we};function No(n,a,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[n*b-2*Math.PI*6378137/2,a*b-2*Math.PI*6378137/2]}Vo.prototype.send=function(n,a,d,b,T){var E=this;void 0===T&&(T=!1);var L=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[L]=d);var H=Vr(this.globalScope)?void 0:[];return this.target.postMessage({id:L,type:n,hasCallback:!!d,targetMapId:b,mustQueue:T,sourceMapId:this.mapId,data:En(a,H)},H),{cancel:function(){d&&delete E.callbacks[L],E.target.postMessage({id:L,type:"<cancel>",targetMapId:b,sourceMapId:E.mapId})}}},Vo.prototype.receive=function(n){var a=n.data,d=a.id;if(d&&(!a.targetMapId||this.mapId===a.targetMapId))if("<cancel>"===a.type){delete this.tasks[d];var b=this.cancelCallbacks[d];delete this.cancelCallbacks[d],b&&b()}else Kt()||a.mustQueue?(this.tasks[d]=a,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,a)},Vo.prototype.process=function(){if(this.taskQueue.length){var n=this.taskQueue.shift(),a=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(n,a)}},Vo.prototype.processTask=function(n,a){var d=this;if("<response>"===a.type){var b=this.callbacks[n];delete this.callbacks[n],b&&(a.error?b(oi(a.error)):b(null,oi(a.data)))}else{var T=!1,E=Vr(this.globalScope)?void 0:[],L=a.hasCallback?function(Me,Ie){T=!0,delete d.cancelCallbacks[n],d.target.postMessage({id:n,type:"<response>",sourceMapId:d.mapId,error:Me?En(Me):null,data:En(Ie,E)},E)}:function(Me){T=!0},H=null,ie=oi(a.data);if(this.parent[a.type])H=this.parent[a.type](a.sourceMapId,ie,L);else if(this.parent.getWorkerSource){var xe=a.type.split(".");H=this.parent.getWorkerSource(a.sourceMapId,xe[0],ie.source)[xe[1]](ie,L)}else L(new Error("Could not find function "+a.type));!T&&H&&H.cancel&&(this.cancelCallbacks[n]=H.cancel)}},Vo.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Wr=function(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))};Wr.prototype.setNorthEast=function(n){return this._ne=n instanceof Dr?new Dr(n.lng,n.lat):Dr.convert(n),this},Wr.prototype.setSouthWest=function(n){return this._sw=n instanceof Dr?new Dr(n.lng,n.lat):Dr.convert(n),this},Wr.prototype.extend=function(n){var a,d,b=this._sw,T=this._ne;if(n instanceof Dr)a=n,d=n;else{if(!(n instanceof Wr))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(Wr.convert(n)):this.extend(Dr.convert(n)):this;if(d=n._ne,!(a=n._sw)||!d)return this}return b||T?(b.lng=Math.min(a.lng,b.lng),b.lat=Math.min(a.lat,b.lat),T.lng=Math.max(d.lng,T.lng),T.lat=Math.max(d.lat,T.lat)):(this._sw=new Dr(a.lng,a.lat),this._ne=new Dr(d.lng,d.lat)),this},Wr.prototype.getCenter=function(){return new Dr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Wr.prototype.getSouthWest=function(){return this._sw},Wr.prototype.getNorthEast=function(){return this._ne},Wr.prototype.getNorthWest=function(){return new Dr(this.getWest(),this.getNorth())},Wr.prototype.getSouthEast=function(){return new Dr(this.getEast(),this.getSouth())},Wr.prototype.getWest=function(){return this._sw.lng},Wr.prototype.getSouth=function(){return this._sw.lat},Wr.prototype.getEast=function(){return this._ne.lng},Wr.prototype.getNorth=function(){return this._ne.lat},Wr.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Wr.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Wr.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Wr.prototype.contains=function(n){var a=Dr.convert(n),d=a.lng,b=a.lat,T=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&T},Wr.convert=function(n){return!n||n instanceof Wr?n:new Wr(n)};var Dr=function(n,a){if(isNaN(n)||isNaN(a))throw new Error("Invalid LngLat object: ("+n+", "+a+")");if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dr.prototype.wrap=function(){return new Dr(je(this.lng,-180,180),this.lat)},Dr.prototype.toArray=function(){return[this.lng,this.lat]},Dr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dr.prototype.distanceTo=function(n){var a=Math.PI/180,d=this.lat*a,b=n.lat*a,T=Math.sin(d)*Math.sin(b)+Math.cos(d)*Math.cos(b)*Math.cos((n.lng-this.lng)*a);return 6371008.8*Math.acos(Math.min(T,1))},Dr.prototype.toBounds=function(n){void 0===n&&(n=0);var a=360*n/40075017,d=a/Math.cos(Math.PI/180*this.lat);return new Wr(new Dr(this.lng-d,this.lat-a),new Dr(this.lng+d,this.lat+a))},Dr.convert=function(n){if(n instanceof Dr)return n;if(Array.isArray(n)&&(2===n.length||3===n.length))return new Dr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&"object"==typeof n&&null!==n)return new Dr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ml=2*Math.PI*6371008.8;function Ju(n){return Ml*Math.cos(n*Math.PI/180)}function Sl(n){return(180+n)/360}function Lu(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ld(n,a){return n/Ju(a)}function lu(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}var El=function(n,a,d){void 0===d&&(d=0),this.x=+n,this.y=+a,this.z=+d};El.fromLngLat=function(n,a){void 0===a&&(a=0);var d=Dr.convert(n);return new El(Sl(d.lng),Lu(d.lat),ld(a,d.lat))},El.prototype.toLngLat=function(){return new Dr(360*this.x-180,lu(this.y))},El.prototype.toAltitude=function(){return this.z*Ju(lu(this.y))},El.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ml*(n=lu(this.y),1/Math.cos(n*Math.PI/180));var n};var Wu=function(n,a,d){this.z=n,this.x=a,this.y=d,this.key=Ad(0,n,n,a,d)};Wu.prototype.equals=function(n){return this.z===n.z&&this.x===n.x&&this.y===n.y},Wu.prototype.url=function(n,a){var d,b,T,E,L,H=(b=this.y,T=this.z,E=No(256*(d=this.x),256*(b=Math.pow(2,T)-b-1),T),L=No(256*(d+1),256*(b+1),T),E[0]+","+E[1]+","+L[0]+","+L[1]),ie=function(xe,Me,Ie){for(var ze,$e="",Oe=xe;Oe>0;Oe--)$e+=(Me&(ze=1<<Oe-1)?1:0)+(Ie&ze?2:0);return $e}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ie).replace("{bbox-epsg-3857}",H)},Wu.prototype.getTilePoint=function(n){var a=Math.pow(2,this.z);return new q(8192*(n.x*a-this.x),8192*(n.y*a-this.y))},Wu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ud=function(n,a){this.wrap=n,this.canonical=a,this.key=Ad(n,a.z,a.z,a.x,a.y)},_s=function(n,a,d,b,T){this.overscaledZ=n,this.wrap=a,this.canonical=new Wu(d,+b,+T),this.key=Ad(a,n,d,b,T)};function Ad(n,a,d,b,T){(n*=2)<0&&(n=-1*n-1);var E=1<<d;return(E*E*n+E*T+b).toString(36)+d.toString(36)+a.toString(36)}_s.prototype.equals=function(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)},_s.prototype.scaledTo=function(n){var a=this.canonical.z-n;return n>this.canonical.z?new _s(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _s(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)},_s.prototype.calculateScaledKey=function(n,a){var d=this.canonical.z-n;return n>this.canonical.z?Ad(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Ad(this.wrap*+a,n,n,this.canonical.x>>d,this.canonical.y>>d)},_s.prototype.isChildOf=function(n){if(n.wrap!==this.wrap)return!1;var a=this.canonical.z-n.canonical.z;return 0===n.overscaledZ||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a},_s.prototype.children=function(n){if(this.overscaledZ>=n)return[new _s(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var a=this.canonical.z+1,d=2*this.canonical.x,b=2*this.canonical.y;return[new _s(a,this.wrap,a,d,b),new _s(a,this.wrap,a,d+1,b),new _s(a,this.wrap,a,d,b+1),new _s(a,this.wrap,a,d+1,b+1)]},_s.prototype.isLessThan=function(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))},_s.prototype.wrapped=function(){return new _s(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},_s.prototype.unwrapTo=function(n){return new _s(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)},_s.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},_s.prototype.toUnwrapped=function(){return new ud(this.wrap,this.canonical)},_s.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},_s.prototype.getTilePoint=function(n){return this.canonical.getTilePoint(new El(n.x-this.wrap,n.y))},X("CanonicalTileID",Wu),X("OverscaledTileID",_s,{omit:["posMatrix"]});var Tu=function(n,a,d){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&"mapbox"!==d&&"terrarium"!==d)return Ft('"'+d+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=a.height;var b=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=d||"mapbox";for(var T=0;T<b;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(b,T)]=this.data[this._idx(b-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,b)]=this.data[this._idx(T,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)]};Tu.prototype.get=function(n,a){var d=new Uint8Array(this.data.buffer),b=4*this._idx(n,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(d[b],d[b+1],d[b+2])},Tu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Tu.prototype._idx=function(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)},Tu.prototype._unpackMapbox=function(n,a,d){return(256*n*256+256*a+d)/10-1e4},Tu.prototype._unpackTerrarium=function(n,a,d){return 256*n+a+d/256-32768},Tu.prototype.getPixels=function(){return new Dl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Tu.prototype.backfillBorder=function(n,a,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");var b=a*this.dim,T=a*this.dim+this.dim,E=d*this.dim,L=d*this.dim+this.dim;switch(a){case-1:b=T-1;break;case 1:T=b+1}switch(d){case-1:E=L-1;break;case 1:L=E+1}for(var H=-a*this.dim,ie=-d*this.dim,xe=E;xe<L;xe++)for(var Me=b;Me<T;Me++)this.data[this._idx(Me,xe)]=n.data[this._idx(Me+H,xe+ie)]},X("DEMData",Tu);var Jd=function(n){this._stringToNumber={},this._numberToString=[];for(var a=0;a<n.length;a++){var d=n[a];this._stringToNumber[d]=a,this._numberToString[a]=d}};Jd.prototype.encode=function(n){return this._stringToNumber[n]},Jd.prototype.decode=function(n){return this._numberToString[n]};var Bc=function(n,a,d,b,T){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=d,n._y=b,this.properties=n.properties,this.id=T},Du={geometry:{configurable:!0}};Du.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Du.geometry.set=function(n){this._geometry=n},Bc.prototype.toJSON=function(){var n={geometry:this.geometry};for(var a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(n[a]=this[a]);return n},Object.defineProperties(Bc.prototype,Du);var Tc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Tc.prototype.updateState=function(n,a,d){var b=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][b]=this.stateChanges[n][b]||{},Be(this.stateChanges[n][b],d),null===this.deletedStates[n])for(var T in this.deletedStates[n]={},this.state[n])T!==b&&(this.deletedStates[n][T]=null);else if(this.deletedStates[n]&&null===this.deletedStates[n][b])for(var E in this.deletedStates[n][b]={},this.state[n][b])d[E]||(this.deletedStates[n][b][E]=null);else for(var L in d)this.deletedStates[n]&&this.deletedStates[n][b]&&null===this.deletedStates[n][b][L]&&delete this.deletedStates[n][b][L]},Tc.prototype.removeFeatureState=function(n,a,d){if(null!==this.deletedStates[n]){var b=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&void 0!==a)null!==this.deletedStates[n][b]&&(this.deletedStates[n][b]=this.deletedStates[n][b]||{},this.deletedStates[n][b][d]=null);else if(void 0!==a)if(this.stateChanges[n]&&this.stateChanges[n][b])for(d in this.deletedStates[n][b]={},this.stateChanges[n][b])this.deletedStates[n][b][d]=null;else this.deletedStates[n][b]=null;else this.deletedStates[n]=null}},Tc.prototype.getState=function(n,a){var d=String(a),b=Be({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){var T=this.deletedStates[n][a];if(null===T)return{};for(var E in T)delete b[E]}return b},Tc.prototype.initializeTileState=function(n,a){n.setFeatureState(this.state,a)},Tc.prototype.coalesceChanges=function(n,a){var d={};for(var b in this.stateChanges){this.state[b]=this.state[b]||{};var T={};for(var E in this.stateChanges[b])this.state[b][E]||(this.state[b][E]={}),Be(this.state[b][E],this.stateChanges[b][E]),T[E]=this.state[b][E];d[b]=T}for(var L in this.deletedStates){this.state[L]=this.state[L]||{};var H={};if(null===this.deletedStates[L])for(var ie in this.state[L])H[ie]={},this.state[L][ie]={};else for(var xe in this.deletedStates[L]){if(null===this.deletedStates[L][xe])this.state[L][xe]={};else for(var Me=0,Ie=Object.keys(this.deletedStates[L][xe]);Me<Ie.length;Me+=1)delete this.state[L][xe][Ie[Me]];H[xe]=this.state[L][xe]}d[L]=d[L]||{},Be(d[L],H)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(d).length)for(var ze in n)n[ze].setFeatureState(d,a)};var Al=function(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Qa(8192,16,0),this.grid3D=new Qa(8192,16,0),this.featureIndexArray=new Re,this.promoteId=a};function Qu(n,a,d,b,T){return at(n,function(E,L){var H=a instanceof sc?a.get(L):null;return H&&H.evaluate?H.evaluate(d,b,T):H})}function up(n){for(var a=1/0,d=1/0,b=-1/0,T=-1/0,E=0,L=n;E<L.length;E+=1){var H=L[E];a=Math.min(a,H.x),d=Math.min(d,H.y),b=Math.max(b,H.x),T=Math.max(T,H.y)}return{minX:a,minY:d,maxX:b,maxY:T}}function Jf(n,a){return a-n}Al.prototype.insert=function(n,a,d,b,T,E){var L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,b,T);for(var H=E?this.grid3D:this.grid,ie=0;ie<a.length;ie++){for(var xe=a[ie],Me=[1/0,1/0,-1/0,-1/0],Ie=0;Ie<xe.length;Ie++){var ze=xe[Ie];Me[0]=Math.min(Me[0],ze.x),Me[1]=Math.min(Me[1],ze.y),Me[2]=Math.max(Me[2],ze.x),Me[3]=Math.max(Me[3],ze.y)}Me[0]<8192&&Me[1]<8192&&Me[2]>=0&&Me[3]>=0&&H.insert(L,Me[0],Me[1],Me[2],Me[3])}},Al.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new xd.VectorTile(new rd(this.rawTileData)).layers,this.sourceLayerCoder=new Jd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Al.prototype.query=function(n,a,d,b){var T=this;this.loadVTLayers();for(var E=n.params||{},L=8192/n.tileSize/n.scale,H=mu(E.filter),ie=n.queryGeometry,xe=n.queryPadding*L,Me=up(ie),Ie=this.grid.query(Me.minX-xe,Me.minY-xe,Me.maxX+xe,Me.maxY+xe),ze=up(n.cameraQueryGeometry),Oe=0,yt=this.grid3D.query(ze.minX-xe,ze.minY-xe,ze.maxX+xe,ze.maxY+xe,function(on,pn,An,Fn){return function(Vn,Ai,si,Oi,Kn){for(var Ir=0,Ki=Vn;Ir<Ki.length;Ir+=1){var yi=Ki[Ir];if(Ai<=yi.x&&si<=yi.y&&Oi>=yi.x&&Kn>=yi.y)return!0}var Br=[new q(Ai,si),new q(Ai,Kn),new q(Oi,Kn),new q(Oi,si)];if(Vn.length>2)for(var lr=0,Yr=Br;lr<Yr.length;lr+=1)if(bu(Vn,Yr[lr]))return!0;for(var Fi=0;Fi<Vn.length-1;Fi++)if(Kc(Vn[Fi],Vn[Fi+1],Br))return!0;return!1}(n.cameraQueryGeometry,on-xe,pn-xe,An+xe,Fn+xe)});Oe<yt.length;Oe+=1)Ie.push(yt[Oe]);Ie.sort(Jf);for(var Et,Dt={},$t=function(on){var pn=Ie[on];if(pn!==Et){Et=pn;var An=T.featureIndexArray.get(pn),Fn=null;T.loadMatchingFeature(Dt,An.bucketIndex,An.sourceLayerIndex,An.featureIndex,H,E.layers,E.availableImages,a,d,b,function(Vn,Ai,si){return Fn||(Fn=$o(Vn)),Ai.queryIntersectsFeature(ie,Vn,si,Fn,T.z,n.transform,L,n.pixelPosMatrix)})}},Wt=0;Wt<Ie.length;Wt++)$t(Wt);return Dt},Al.prototype.loadMatchingFeature=function(n,a,d,b,T,E,L,H,ie,xe,Me){var Ie=this.bucketLayerIDs[a];if(!E||function(Vn,Ai){for(var si=0;si<Vn.length;si++)if(Ai.indexOf(Vn[si])>=0)return!0;return!1}(E,Ie)){var ze=this.sourceLayerCoder.decode(d),$e=this.vtLayers[ze].feature(b);if(T.needGeometry){var Oe=is($e,!0);if(!T.filter(new rr(this.tileID.overscaledZ),Oe,this.tileID.canonical))return}else if(!T.filter(new rr(this.tileID.overscaledZ),$e))return;for(var yt=this.getId($e,ze),Et=0;Et<Ie.length;Et++){var Dt=Ie[Et];if(!(E&&E.indexOf(Dt)<0)){var $t=H[Dt];if($t){var Wt={};void 0!==yt&&xe&&(Wt=xe.getState($t.sourceLayer||"_geojsonTileLayer",yt));var on=Be({},ie[Dt]);on.paint=Qu(on.paint,$t.paint,$e,Wt,L),on.layout=Qu(on.layout,$t.layout,$e,Wt,L);var pn=!Me||Me($e,$t,Wt);if(pn){var An=new Bc($e,this.z,this.x,this.y,yt);An.layer=on;var Fn=n[Dt];void 0===Fn&&(Fn=n[Dt]=[]),Fn.push({featureIndex:b,feature:An,intersectionZ:pn})}}}}}},Al.prototype.lookupSymbolFeatures=function(n,a,d,b,T,E,L,H){var ie={};this.loadVTLayers();for(var xe=mu(T),Me=0,Ie=n;Me<Ie.length;Me+=1)this.loadMatchingFeature(ie,d,b,Ie[Me],xe,E,L,H,a);return ie},Al.prototype.hasLayer=function(n){for(var a=0,d=this.bucketLayerIDs;a<d.length;a+=1)for(var b=0,T=d[a];b<T.length;b+=1)if(n===T[b])return!0;return!1},Al.prototype.getId=function(n,a){var d=n.id;return this.promoteId&&"boolean"==typeof(d=n.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]])&&(d=Number(d)),d},X("FeatureIndex",Al,{omit:["rawTileData","sourceLayerCoder"]});var ea=function(n,a){this.tileID=n,this.uid=gt(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ea.prototype.registerFadeDuration=function(n){var a=n+this.timeAdded;a<qt.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)},ea.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ea.prototype.loadVectorData=function(n,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){for(var b in n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(xe,Me){var Ie={};if(!Me)return Ie;for(var ze=function(){var yt=Oe[$e],Et=yt.layerIds.map(function(Wt){return Me.getLayer(Wt)}).filter(Boolean);if(0!==Et.length){yt.layers=Et,yt.stateDependentLayerIds&&(yt.stateDependentLayers=yt.stateDependentLayerIds.map(function(Wt){return Et.filter(function(on){return on.id===Wt})[0]}));for(var Dt=0,$t=Et;Dt<$t.length;Dt+=1)Ie[$t[Dt].id]=yt}},$e=0,Oe=xe;$e<Oe.length;$e+=1)ze();return Ie}(n.buckets,a.style),this.hasSymbolBuckets=!1,this.buckets){var T=this.buckets[b];if(T instanceof pe){if(this.hasSymbolBuckets=!0,!d)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var E in this.buckets){var L=this.buckets[E];if(L instanceof pe&&L.hasRTLText){this.hasRTLText=!0,Gs.isLoading()||Gs.isLoaded()||"deferred"!==yu()||Ks();break}}for(var H in this.queryPadding=0,this.buckets){var ie=this.buckets[H];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(H).queryRadius(ie))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new g},ea.prototype.unloadVectorData=function(){for(var n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ea.prototype.getBucket=function(n){return this.buckets[n.id]},ea.prototype.upload=function(n){for(var a in this.buckets){var d=this.buckets[a];d.uploadPending()&&d.upload(n)}var b=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new io(n,this.imageAtlas.image,b.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new io(n,this.glyphAtlasImage,b.ALPHA),this.glyphAtlasImage=null)},ea.prototype.prepare=function(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)},ea.prototype.queryRenderedFeatures=function(n,a,d,b,T,E,L,H,ie,xe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:T,scale:E,tileSize:this.tileSize,pixelPosMatrix:xe,transform:H,params:L,queryPadding:this.queryPadding*ie},n,a,d):{}},ea.prototype.querySourceFeatures=function(n,a){var d=this.latestFeatureIndex;if(d&&d.rawTileData){var b=d.loadVTLayers(),T=a?a.sourceLayer:"",E=b._geojsonTileLayer||b[T];if(E)for(var L=mu(a&&a.filter),H=this.tileID.canonical,ie=H.z,xe=H.x,Me=H.y,Ie={z:ie,x:xe,y:Me},ze=0;ze<E.length;ze++){var $e=E.feature(ze);if(L.needGeometry){var Oe=is($e,!0);if(!L.filter(new rr(this.tileID.overscaledZ),Oe,this.tileID.canonical))continue}else if(!L.filter(new rr(this.tileID.overscaledZ),$e))continue;var yt=d.getId($e,T),Et=new Bc($e,ie,xe,Me,yt);Et.tile=Ie,n.push(Et)}}},ea.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ea.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ea.prototype.setExpiryData=function(n){var a=this.expirationTime;if(n.cacheControl){var d=Zn(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){var b=Date.now(),T=!1;if(this.expirationTime>b)T=!1;else if(a)if(this.expirationTime<a)T=!0;else{var E=this.expirationTime-a;E?this.expirationTime=b+Math.max(E,3e4):T=!0}else T=!0;T?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ea.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ea.prototype.setFeatureState=function(n,a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(n).length){var d=this.latestFeatureIndex.loadVTLayers();for(var b in this.buckets)if(a.style.hasLayer(b)){var T=this.buckets[b],E=T.layers[0].sourceLayer||"_geojsonTileLayer",L=d[E],H=n[E];if(L&&H&&0!==Object.keys(H).length){T.update(H,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ie=a&&a.style&&a.style.getLayer(b);ie&&(this.queryPadding=Math.max(this.queryPadding,ie.queryRadius(T)))}}}},ea.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ea.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qt.now()},ea.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ea.prototype.setHoldDuration=function(n){this.symbolFadeHoldUntil=qt.now()+n},ea.prototype.setDependencies=function(n,a){for(var d={},b=0,T=a;b<T.length;b+=1)d[T[b]]=!0;this.dependencies[n]=d},ea.prototype.hasDependency=function(n,a){for(var d=0,b=n;d<b.length;d+=1){var T=this.dependencies[b[d]];if(T)for(var E=0,L=a;E<L.length;E+=1)if(T[L[E]])return!0}return!1};var cd=we.performance,Wp=function(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},cd.mark(this._marks.start)};Wp.prototype.finish=function(){cd.mark(this._marks.end);var n=cd.getEntriesByName(this._marks.measure);return 0===n.length&&(cd.measure(this._marks.measure,this._marks.start,this._marks.end),n=cd.getEntriesByName(this._marks.measure),cd.clearMarks(this._marks.start),cd.clearMarks(this._marks.end),cd.clearMeasures(this._marks.measure)),n},u.Actor=Vo,u.AlphaImage=Bd,u.CanonicalTileID=Wu,u.CollisionBoxArray=g,u.Color=Ct,u.DEMData=Tu,u.DataConstantProperty=li,u.DictionaryCoder=Jd,u.EXTENT=8192,u.ErrorEvent=Le,u.EvaluationParameters=rr,u.Event=_e,u.Evented=Ze,u.FeatureIndex=Al,u.FillBucket=su,u.FillExtrusionBucket=cc,u.ImageAtlas=Cc,u.ImagePosition=np,u.LineBucket=al,u.LngLat=Dr,u.LngLatBounds=Wr,u.MercatorCoordinate=El,u.ONE_EM=24,u.OverscaledTileID=_s,u.Point=q,u.Point$1=q,u.Properties=ms,u.Protobuf=rd,u.RGBAImage=Dl,u.RequestManager=mi,u.RequestPerformance=Wp,u.ResourceType=pr,u.SegmentVector=R,u.SourceFeatureState=Tc,u.StructArrayLayout1ui2=ac,u.StructArrayLayout2f1f2i16=Zu,u.StructArrayLayout2i4=J,u.StructArrayLayout3ui6=Xs,u.StructArrayLayout4i8=He,u.SymbolBucket=pe,u.Texture=io,u.Tile=ea,u.Transitionable=Ps,u.Uniform1f=zn,u.Uniform1i=yn,u.Uniform2f=Rn,u.Uniform3f=qn,u.Uniform4f=Mi,u.UniformColor=Si,u.UniformMatrix4f=Lr,u.UnwrappedTileID=ud,u.ValidationError=ot,u.WritingMode=Cu,u.ZoomHistory=Jr,u.add=function(n,a,d){return n[0]=a[0]+d[0],n[1]=a[1]+d[1],n[2]=a[2]+d[2],n},u.addDynamicAttributes=k,u.asyncAll=function(n,a,d){if(!n.length)return d(null,[]);var b=n.length,T=new Array(n.length),E=null;n.forEach(function(L,H){a(L,function(ie,xe){ie&&(E=ie),T[H]=xe,0==--b&&d(E,T)})})},u.bezier=De,u.bindAll=dt,u.browser=qt,u.cacheEntryPossiblyAdded=function(n){++bi>rt&&(n.getActor().send("enforceCacheSizeLimit",It),bi=0)},u.clamp=Ke,u.clearTileCache=function(n){var a=we.caches.delete("mapbox-tiles");n&&a.catch(n).then(function(){return n()})},u.clipLine=qp,u.clone=function(n){var a=new To(16);return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},u.clone$1=ht,u.clone$2=function(n){var a=new To(3);return a[0]=n[0],a[1]=n[1],a[2]=n[2],a},u.collisionCircleLayout=Vp,u.config=On,u.create=function(){var n=new To(16);return To!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},u.create$1=function(){var n=new To(9);return To!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n},u.create$2=function(){var n=new To(4);return To!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n},u.createCommonjsModule=fe,u.createExpression=Xl,u.createLayout=Ge,u.createStyleLayer=function(n){return"custom"===n.type?new Xr(n):new sr[n.type](n)},u.cross=function(n,a,d){var b=a[0],T=a[1],E=a[2],L=d[0],H=d[1],ie=d[2];return n[0]=T*ie-E*H,n[1]=E*L-b*ie,n[2]=b*H-T*L,n},u.deepEqual=function n(a,d){if(Array.isArray(a)){if(!Array.isArray(d)||a.length!==d.length)return!1;for(var b=0;b<a.length;b++)if(!n(a[b],d[b]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==d){if("object"!=typeof d||Object.keys(a).length!==Object.keys(d).length)return!1;for(var T in a)if(!n(a[T],d[T]))return!1;return!0}return a===d},u.dot=function(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]},u.dot$1=function(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]+n[3]*a[3]},u.ease=it,u.emitValidationErrors=no,u.endsWith=ct,u.enforceCacheSizeLimit=function(n){Vt(),gr&&gr.then(function(a){a.keys().then(function(d){for(var b=0;b<d.length-n;b++)a.delete(d[b])})})},u.evaluateSizeForFeature=Mh,u.evaluateSizeForZoom=Hm,u.evaluateVariableOffset=Jp,u.evented=zl,u.extend=Be,u.featureFilter=mu,u.filterObject=Qe,u.fromRotation=function(n,a){var d=Math.sin(a),b=Math.cos(a);return n[0]=b,n[1]=d,n[2]=0,n[3]=-d,n[4]=b,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},u.getAnchorAlignment=$d,u.getAnchorJustification=qf,u.getArrayBuffer=Zr,u.getImage=se,u.getJSON=function(n,a){return ao(Be(n,{type:"json"}),a)},u.getRTLTextPluginStatus=yu,u.getReferrer=Yi,u.getVideo=function(n,a){var d,b,T=we.document.createElement("video");T.muted=!0,T.onloadstart=function(){a(null,T)};for(var E=0;E<n.length;E++){var L=we.document.createElement("source");d=n[E],b=void 0,(b=we.document.createElement("a")).href=d,(b.protocol!==we.document.location.protocol||b.host!==we.document.location.host)&&(T.crossOrigin="Anonymous"),L.src=n[E],T.appendChild(L)}return{cancel:function(){}}},u.identity=xu,u.invert=function(n,a){var d=a[0],b=a[1],T=a[2],E=a[3],L=a[4],H=a[5],ie=a[6],xe=a[7],Me=a[8],Ie=a[9],ze=a[10],$e=a[11],Oe=a[12],yt=a[13],Et=a[14],Dt=a[15],$t=d*H-b*L,Wt=d*ie-T*L,on=d*xe-E*L,pn=b*ie-T*H,An=b*xe-E*H,Fn=T*xe-E*ie,Vn=Me*yt-Ie*Oe,Ai=Me*Et-ze*Oe,si=Me*Dt-$e*Oe,Oi=Ie*Et-ze*yt,Kn=Ie*Dt-$e*yt,Ir=ze*Dt-$e*Et,Ki=$t*Ir-Wt*Kn+on*Oi+pn*si-An*Ai+Fn*Vn;return Ki?(n[0]=(H*Ir-ie*Kn+xe*Oi)*(Ki=1/Ki),n[1]=(T*Kn-b*Ir-E*Oi)*Ki,n[2]=(yt*Fn-Et*An+Dt*pn)*Ki,n[3]=(ze*An-Ie*Fn-$e*pn)*Ki,n[4]=(ie*si-L*Ir-xe*Ai)*Ki,n[5]=(d*Ir-T*si+E*Ai)*Ki,n[6]=(Et*on-Oe*Fn-Dt*Wt)*Ki,n[7]=(Me*Fn-ze*on+$e*Wt)*Ki,n[8]=(L*Kn-H*si+xe*Vn)*Ki,n[9]=(b*si-d*Kn-E*Vn)*Ki,n[10]=(Oe*An-yt*on+Dt*$t)*Ki,n[11]=(Ie*on-Me*An-$e*$t)*Ki,n[12]=(H*Ai-L*Oi-ie*Vn)*Ki,n[13]=(d*Oi-b*Ai+T*Vn)*Ki,n[14]=(yt*Wt-Oe*pn-Et*$t)*Ki,n[15]=(Me*pn-Ie*Wt+ze*$t)*Ki,n):null},u.isChar=Dn,u.isMapboxURL=pi,u.keysDifference=function(n,a){var d=[];for(var b in n)b in a||d.push(b);return d},u.makeRequest=ao,u.mapObject=at,u.mercatorXfromLng=Sl,u.mercatorYfromLat=Lu,u.mercatorZfromAltitude=ld,u.mul=Im,u.multiply=Vl,u.mvt=xd,u.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},u.normalize=function(n,a){var d=a[0],b=a[1],T=a[2],E=d*d+b*b+T*T;return E>0&&(E=1/Math.sqrt(E)),n[0]=a[0]*E,n[1]=a[1]*E,n[2]=a[2]*E,n},u.number=to,u.offscreenCanvasSupported=_r,u.ortho=function(n,a,d,b,T,E,L){var H=1/(a-d),ie=1/(b-T),xe=1/(E-L);return n[0]=-2*H,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*ie,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*xe,n[11]=0,n[12]=(a+d)*H,n[13]=(T+b)*ie,n[14]=(L+E)*xe,n[15]=1,n},u.parseGlyphPBF=function(n){return new rd(n).readFields(Rg,[])},u.pbf=rd,u.performSymbolLayout=function(n,a,d,b,T,E,L){n.createArrays(),n.tilePixelRatio=8192/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;var H=n.layers[0].layout,ie=n.layers[0]._unevaluatedLayout._values,xe={};if("composite"===n.textSizeData.kind){var Me=n.textSizeData,Ie=Me.maxZoom;xe.compositeTextSizes=[ie["text-size"].possiblyEvaluate(new rr(Me.minZoom),L),ie["text-size"].possiblyEvaluate(new rr(Ie),L)]}if("composite"===n.iconSizeData.kind){var ze=n.iconSizeData,$e=ze.maxZoom;xe.compositeIconSizes=[ie["icon-size"].possiblyEvaluate(new rr(ze.minZoom),L),ie["icon-size"].possiblyEvaluate(new rr($e),L)]}xe.layoutTextSize=ie["text-size"].possiblyEvaluate(new rr(n.zoom+1),L),xe.layoutIconSize=ie["icon-size"].possiblyEvaluate(new rr(n.zoom+1),L),xe.textMaxSize=ie["text-size"].possiblyEvaluate(new rr(18));for(var Oe=24*H.get("text-line-height"),yt="map"===H.get("text-rotation-alignment")&&"point"!==H.get("symbol-placement"),Et=H.get("text-keep-upright"),Dt=H.get("text-size"),$t=function(){var pn=on[Wt],An=H.get("text-font").evaluate(pn,{},L).join(","),Fn=Dt.evaluate(pn,{},L),Vn=xe.layoutTextSize.evaluate(pn,{},L),Ai=xe.layoutIconSize.evaluate(pn,{},L),si={horizontal:{},vertical:void 0},Oi=pn.text,Kn=[0,0];if(Oi){var Ir=Oi.toString(),Ki=24*H.get("text-letter-spacing").evaluate(pn,{},L),yi=function(Ur){for(var ro=0,Lo=Ur;ro<Lo.length;ro+=1)if(oo=Lo[ro].charCodeAt(0),Dn.Arabic(oo)||Dn["Arabic Supplement"](oo)||Dn["Arabic Extended-A"](oo)||Dn["Arabic Presentation Forms-A"](oo)||Dn["Arabic Presentation Forms-B"](oo))return!1;var oo;return!0}(Ir)?Ki:0,Br=H.get("text-anchor").evaluate(pn,{},L),lr=H.get("text-variable-anchor");if(!lr){var Yr=H.get("text-radial-offset").evaluate(pn,{},L);Kn=Yr?Jp(Br,[24*Yr,ap]):H.get("text-offset").evaluate(pn,{},L).map(function(Ur){return 24*Ur})}var Fi=yt?"center":H.get("text-justify").evaluate(pn,{},L),_o=H.get("symbol-placement"),ls="point"===_o?24*H.get("text-max-width").evaluate(pn,{},L):0,qs=function(){n.allowVerticalPlacement&&Tr(Ir)&&(si.vertical=ip(Oi,a,d,T,An,ls,Oe,Br,"left",yi,Kn,Cu.vertical,!0,_o,Vn,Fn))};if(!yt&&lr){for(var ji="auto"===Fi?lr.map(function(Ur){return qf(Ur)}):[Fi],ys=!1,Fs=0;Fs<ji.length;Fs++){var Sa=ji[Fs];if(!si.horizontal[Sa])if(ys)si.horizontal[Sa]=si.horizontal[0];else{var ta=ip(Oi,a,d,T,An,ls,Oe,"center",Sa,yi,Kn,Cu.horizontal,!1,_o,Vn,Fn);ta&&(si.horizontal[Sa]=ta,ys=1===ta.positionedLines.length)}}qs()}else{"auto"===Fi&&(Fi=qf(Br));var ul=ip(Oi,a,d,T,An,ls,Oe,Br,Fi,yi,Kn,Cu.horizontal,!1,_o,Vn,Fn);ul&&(si.horizontal[Fi]=ul),qs(),Tr(Ir)&&yt&&Et&&(si.vertical=ip(Oi,a,d,T,An,ls,Oe,Br,Fi,yi,Kn,Cu.vertical,!1,_o,Vn,Fn))}}var Ur,ro,oo,Ho,Il,fo=void 0,Gl=!1;if(pn.icon&&pn.icon.name){var yo=b[pn.icon.name];yo&&(Ur=T[pn.icon.name],ro=H.get("icon-offset").evaluate(pn,{},L),oo=$d(H.get("icon-anchor").evaluate(pn,{},L)),fo={image:Ur,top:Il=ro[1]-Ur.displaySize[1]*oo.verticalAlign,bottom:Il+Ur.displaySize[1],left:Ho=ro[0]-Ur.displaySize[0]*oo.horizontalAlign,right:Ho+Ur.displaySize[0]},Gl=yo.sdf,void 0===n.sdfIcons?n.sdfIcons=yo.sdf:n.sdfIcons!==yo.sdf&&Ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(yo.pixelRatio!==n.pixelRatio||0!==H.get("icon-rotate").constantOr(1))&&(n.iconsNeedLinear=!0))}var cl=Ym(si.horizontal)||si.vertical;n.iconsInText=!!cl&&cl.iconsInText,(cl||fo)&&function(Ur,ro,Lo,oo,Ho,Il,Xo,Ns,el,Qr,un){var Mu=Il.textMaxSize.evaluate(ro,{});void 0===Mu&&(Mu=Xo);var Id,qo=Ur.layers[0].layout,Ku=qo.get("icon-offset").evaluate(ro,{},un),uu=Ym(Lo.horizontal),dd=Xo/24,Uc=Ur.tilePixelRatio*dd,Dc=Ur.tilePixelRatio*Mu/24,Bu=Ur.tilePixelRatio*Ns,Ea=Ur.tilePixelRatio*qo.get("symbol-spacing"),Qp=qo.get("text-padding")*Ur.tilePixelRatio,Or=qo.get("icon-padding")*Ur.tilePixelRatio,Ha=qo.get("text-max-angle")/180*Math.PI,Jm="map"===qo.get("text-rotation-alignment")&&"point"!==qo.get("symbol-placement"),vi="map"===qo.get("icon-rotation-alignment")&&"point"!==qo.get("symbol-placement"),Er=qo.get("symbol-placement"),Kp=Ea/2,na=qo.get("icon-text-fit");oo&&"none"!==na&&(Ur.allowVerticalPlacement&&Lo.vertical&&(Id=Yd(oo,Lo.vertical,na,qo.get("icon-text-fit-padding"),Ku,dd)),uu&&(oo=Yd(oo,uu,na,qo.get("icon-text-fit-padding"),Ku,dd)));var Wd=function(R_,hp){hp.x<0||hp.x>=8192||hp.y<0||hp.y>=8192||function(ia,zc,va,eh,ba,Xm,Kf,zu,Su,th,pp,Lg,fp,Bg,mp,tf,Ug,eg,zg,nf,Ol,Xf,tg,jc,jg){var Vg,Pl,nh,rf,kh,Rh=ia.addToLineVertexArray(zc,va),Hg=0,vo=0,ng=0,sf=0,ig=-1,ec=-1,ti={},Aa=oe(""),Fh=0,gp=0;if(void 0===zu._unevaluatedLayout.getValue("text-radial-offset")?(Fh=(Vg=zu.layout.get("text-offset").evaluate(Ol,{},jc).map(function(nm){return 24*nm}))[0],gp=Vg[1]):(Fh=24*zu.layout.get("text-radial-offset").evaluate(Ol,{},jc),gp=ap),ia.allowVerticalPlacement&&eh.vertical){var es=zu.layout.get("text-rotate").evaluate(Ol,{},jc)+90;rf=new sp(Su,zc,th,pp,Lg,eh.vertical,fp,Bg,mp,es),Kf&&(kh=new sp(Su,zc,th,pp,Lg,Kf,Ug,eg,mp,es))}if(ba){var Gg=zu.layout.get("icon-rotate").evaluate(Ol,{}),Zg="none"!==zu.layout.get("icon-text-fit"),rg=Eh(ba,Gg,tg,Zg),og=Kf?Eh(Kf,Gg,tg,Zg):void 0;nh=new sp(Su,zc,th,pp,Lg,ba,Ug,eg,!1,Gg),Hg=4*rg.length;var em=ia.iconSizeData,_p=null;"source"===em.kind?(_p=[128*zu.layout.get("icon-size").evaluate(Ol,{})])[0]>32640&&Ft(ia.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===em.kind&&((_p=[128*Xf.compositeIconSizes[0].evaluate(Ol,{},jc),128*Xf.compositeIconSizes[1].evaluate(Ol,{},jc)])[0]>32640||_p[1]>32640)&&Ft(ia.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ia.addSymbols(ia.icon,rg,_p,nf,zg,Ol,!1,zc,Rh.lineStartIndex,Rh.lineLength,-1,jc),ig=ia.icon.placedSymbolArray.length-1,og&&(vo=4*og.length,ia.addSymbols(ia.icon,og,_p,nf,zg,Ol,Cu.vertical,zc,Rh.lineStartIndex,Rh.lineLength,-1,jc),ec=ia.icon.placedSymbolArray.length-1)}for(var Zl in eh.horizontal){var Nh=eh.horizontal[Zl];if(!Pl){Aa=oe(Nh.text);var af=zu.layout.get("text-rotate").evaluate(Ol,{},jc);Pl=new sp(Su,zc,th,pp,Lg,Nh,fp,Bg,mp,af)}var yp=1===Nh.positionedLines.length;if(ng+=$m(ia,zc,Nh,Xm,zu,mp,Ol,tf,Rh,eh.vertical?Cu.horizontal:Cu.horizontalOnly,yp?Object.keys(eh.horizontal):[Zl],ti,ig,Xf,jc),yp)break}eh.vertical&&(sf+=$m(ia,zc,eh.vertical,Xm,zu,mp,Ol,tf,Rh,Cu.vertical,["vertical"],ti,ec,Xf,jc));var F_=Pl?Pl.boxStartIndex:ia.collisionBoxArray.length,N_=Pl?Pl.boxEndIndex:ia.collisionBoxArray.length,sg=rf?rf.boxStartIndex:ia.collisionBoxArray.length,xy=rf?rf.boxEndIndex:ia.collisionBoxArray.length,vp=nh?nh.boxStartIndex:ia.collisionBoxArray.length,tm=nh?nh.boxEndIndex:ia.collisionBoxArray.length,wy=kh?kh.boxStartIndex:ia.collisionBoxArray.length,Fv=kh?kh.boxEndIndex:ia.collisionBoxArray.length,Pd=-1,ag=function(nm,im){return nm&&nm.circleDiameter?Math.max(nm.circleDiameter,im):im};Pd=ag(Pl,Pd),Pd=ag(rf,Pd),Pd=ag(nh,Pd);var bp=(Pd=ag(kh,Pd))>-1?1:0;bp&&(Pd*=jg/24),ia.glyphOffsetArray.length>=pe.MAX_GLYPHS&&Ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ol.sortKey&&ia.addToSortKeyRanges(ia.symbolInstances.length,Ol.sortKey),ia.symbolInstances.emplaceBack(zc.x,zc.y,ti.right>=0?ti.right:-1,ti.center>=0?ti.center:-1,ti.left>=0?ti.left:-1,ti.vertical||-1,ig,ec,Aa,F_,N_,sg,xy,vp,tm,wy,Fv,th,ng,sf,Hg,vo,bp,0,fp,Fh,gp,Pd)}(Ur,hp,R_,Lo,oo,Ho,Id,Ur.layers[0],Ur.collisionBoxArray,ro.index,ro.sourceLayerIndex,Ur.index,Uc,Qp,Jm,el,Bu,Or,vi,Ku,ro,Il,Qr,un,Xo)};if("line"===Er)for(var Ih=0,As=qp(ro.geometry,0,0,8192,8192);Ih<As.length;Ih+=1)for(var Wf=As[Ih],Uu=0,Oh=rp(Wf,Ea,Ha,Lo.vertical||uu,oo,24,Dc,Ur.overscaling,8192);Uu<Oh.length;Uu+=1){var Wm=Oh[Uu];uu&&lp(Ur,uu.text,Kp,Wm)||Wd(Wf,Wm)}else if("line-center"===Er)for(var hd=0,Qd=ro.geometry;hd<Qd.length;hd+=1){var Ph=Qd[hd];if(Ph.length>1){var Kd=Yf(Ph,Ha,Lo.vertical||uu,oo,24,Dc);Kd&&Wd(Ph,Kd)}}else if("Polygon"===ro.type)for(var cp=0,Xp=Fm(ro.geometry,0);cp<Xp.length;cp+=1){var Od=Xp[cp],Mc=Va(Od,16);Wd(Od[0],new Md(Mc.x,Mc.y,0))}else if("LineString"===ro.type)for(var Xu=0,Xd=ro.geometry;Xu<Xd.length;Xu+=1){var pd=Xd[Xu];Wd(pd,new Md(pd[0].x,pd[0].y,0))}else if("Point"===ro.type)for(var dp=0,Qm=ro.geometry;dp<Qm.length;dp+=1)for(var ef=0,Km=Qm[dp];ef<Km.length;ef+=1){var Qf=Km[ef];Wd([Qf],new Md(Qf.x,Qf.y,0))}}(n,pn,si,fo,b,xe,Vn,Ai,Kn,Gl,L)},Wt=0,on=n.features;Wt<on.length;Wt+=1)$t();E&&n.generateCollisionDebugBuffers()},u.perspective=function(n,a,d,b,T){var E,L=1/Math.tan(a/2);return n[0]=L/d,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=L,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=T&&T!==1/0?(n[10]=(T+b)*(E=1/(b-T)),n[14]=2*T*b*E):(n[10]=-1,n[14]=-2*b),n},u.pick=function(n,a){for(var d={},b=0;b<a.length;b++){var T=a[b];T in n&&(d[T]=n[T])}return d},u.plugin=Gs,u.polygonIntersectsPolygon=Cl,u.postMapLoadEvent=ut,u.postTurnstileEvent=Fe,u.potpack=tp,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=X,u.registerForPluginStateChange=function(n){return n({pluginStatus:fs,pluginURL:Ko}),zl.on("pluginStateChange",n),n},u.renderColorRamp=Rp,u.rotate=function(n,a,d){var b=a[0],T=a[1],E=a[2],L=a[3],H=Math.sin(d),ie=Math.cos(d);return n[0]=b*ie+E*H,n[1]=T*ie+L*H,n[2]=b*-H+E*ie,n[3]=T*-H+L*ie,n},u.rotateX=function(n,a,d){var b=Math.sin(d),T=Math.cos(d),E=a[4],L=a[5],H=a[6],ie=a[7],xe=a[8],Me=a[9],Ie=a[10],ze=a[11];return a!==n&&(n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[4]=E*T+xe*b,n[5]=L*T+Me*b,n[6]=H*T+Ie*b,n[7]=ie*T+ze*b,n[8]=xe*T-E*b,n[9]=Me*T-L*b,n[10]=Ie*T-H*b,n[11]=ze*T-ie*b,n},u.rotateZ=function(n,a,d){var b=Math.sin(d),T=Math.cos(d),E=a[0],L=a[1],H=a[2],ie=a[3],xe=a[4],Me=a[5],Ie=a[6],ze=a[7];return a!==n&&(n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[0]=E*T+xe*b,n[1]=L*T+Me*b,n[2]=H*T+Ie*b,n[3]=ie*T+ze*b,n[4]=xe*T-E*b,n[5]=Me*T-L*b,n[6]=Ie*T-H*b,n[7]=ze*T-ie*b,n},u.scale=function(n,a,d){var b=d[0],T=d[1],E=d[2];return n[0]=a[0]*b,n[1]=a[1]*b,n[2]=a[2]*b,n[3]=a[3]*b,n[4]=a[4]*T,n[5]=a[5]*T,n[6]=a[6]*T,n[7]=a[7]*T,n[8]=a[8]*E,n[9]=a[9]*E,n[10]=a[10]*E,n[11]=a[11]*E,n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},u.scale$1=function(n,a,d){return n[0]=a[0]*d,n[1]=a[1]*d,n[2]=a[2]*d,n[3]=a[3]*d,n},u.scale$2=function(n,a,d){return n[0]=a[0]*d,n[1]=a[1]*d,n[2]=a[2]*d,n},u.setCacheLimits=function(n,a){It=n,rt=a},u.setRTLTextPlugin=function(n,a,d){if(void 0===d&&(d=!1),"deferred"===fs||"loading"===fs||"loaded"===fs)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ko=qt.resolveURL(n),fs="deferred",Hs=a,Ma(),d||Ks()},u.sphericalToCartesian=function(n){var a=n[0],d=n[1],b=n[2];return d+=90,d*=Math.PI/180,b*=Math.PI/180,{x:a*Math.cos(d)*Math.sin(b),y:a*Math.sin(d)*Math.sin(b),z:a*Math.cos(b)}},u.sqrLen=function(n){var a=n[0],d=n[1];return a*a+d*d},u.styleSpec=Pe,u.sub=function(n,a,d){return n[0]=a[0]-d[0],n[1]=a[1]-d[1],n[2]=a[2]-d[2],n},u.symbolSize=Fg,u.transformMat3=function(n,a,d){var b=a[0],T=a[1],E=a[2];return n[0]=b*d[0]+T*d[3]+E*d[6],n[1]=b*d[1]+T*d[4]+E*d[7],n[2]=b*d[2]+T*d[5]+E*d[8],n},u.transformMat4=jh,u.translate=function(n,a,d){var b,T,E,L,H,ie,xe,Me,Ie,ze,$e,Oe,yt=d[0],Et=d[1],Dt=d[2];return a===n?(n[12]=a[0]*yt+a[4]*Et+a[8]*Dt+a[12],n[13]=a[1]*yt+a[5]*Et+a[9]*Dt+a[13],n[14]=a[2]*yt+a[6]*Et+a[10]*Dt+a[14],n[15]=a[3]*yt+a[7]*Et+a[11]*Dt+a[15]):(T=a[1],E=a[2],L=a[3],H=a[4],ie=a[5],xe=a[6],Me=a[7],Ie=a[8],ze=a[9],$e=a[10],Oe=a[11],n[0]=b=a[0],n[1]=T,n[2]=E,n[3]=L,n[4]=H,n[5]=ie,n[6]=xe,n[7]=Me,n[8]=Ie,n[9]=ze,n[10]=$e,n[11]=Oe,n[12]=b*yt+H*Et+Ie*Dt+a[12],n[13]=T*yt+ie*Et+ze*Dt+a[13],n[14]=E*yt+xe*Et+$e*Dt+a[14],n[15]=L*yt+Me*Et+Oe*Dt+a[15]),n},u.triggerPluginCompletionEvent=Fo,u.uniqueId=gt,u.validateCustomStyleLayer=function(n){var a=[],d=n.id;return void 0===d&&a.push({message:"layers."+d+': missing required property "id"'}),void 0===n.render&&a.push({message:"layers."+d+': missing required method "render"'}),n.renderingMode&&"2d"!==n.renderingMode&&"3d"!==n.renderingMode&&a.push({message:"layers."+d+': property "renderingMode" must be either "2d" or "3d"'}),a},u.validateLight=Qc,u.validateStyle=Vu,u.values=function(n){var a=[];for(var d in n)a.push(n[d]);return a},u.vectorTile=xd,u.version="1.13.3",u.warnOnce=Ft,u.webpSupported=Nn,u.window=we,u.wrap=je}),O(0,function(u){function fe(K){var se=typeof K;if("number"===se||"boolean"===se||"string"===se||null==K)return JSON.stringify(K);if(Array.isArray(K)){for(var he="[",re=0,_e=K;re<_e.length;re+=1)he+=fe(_e[re])+",";return he+"]"}for(var Le=Object.keys(K).sort(),Ze="{",Pe=0;Pe<Le.length;Pe++)Ze+=JSON.stringify(Le[Pe])+":"+fe(K[Le[Pe]])+",";return Ze+"}"}function Y(K){for(var se="",he=0,re=u.refProperties;he<re.length;he+=1)se+="/"+fe(K[re[he]]);return se}var i=function(K){this.keyCache={},K&&this.replace(K)};i.prototype.replace=function(K){this._layerConfigs={},this._layers={},this.update(K,[])},i.prototype.update=function(K,se){for(var he=this,re=0,_e=K;re<_e.length;re+=1){var Le=_e[re];this._layerConfigs[Le.id]=Le;var Ze=this._layers[Le.id]=u.createStyleLayer(Le);Ze._featureFilter=u.featureFilter(Ze.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(var Pe=0,ot=se;Pe<ot.length;Pe+=1){var Nt=ot[Pe];delete this.keyCache[Nt],delete this._layerConfigs[Nt],delete this._layers[Nt]}this.familiesBySource={};for(var rn=0,dn=function(xn,In){for(var ai={},Bn=0;Bn<xn.length;Bn++){var Ni=In&&In[xn[Bn].id]||Y(xn[Bn]);In&&(In[xn[Bn].id]=Ni);var ur=ai[Ni];ur||(ur=ai[Ni]=[]),ur.push(xn[Bn])}var Gi=[];for(var cr in ai)Gi.push(ai[cr]);return Gi}(u.values(this._layerConfigs),this.keyCache);rn<dn.length;rn+=1){var et=dn[rn].map(function(xn){return he._layers[xn.id]}),tt=et[0];if("none"!==tt.visibility){var Ye=tt.source||"",bt=this.familiesBySource[Ye];bt||(bt=this.familiesBySource[Ye]={});var mt=tt.sourceLayer||"_geojsonTileLayer",cn=bt[mt];cn||(cn=bt[mt]=[]),cn.push(et)}}};var q=function(K){var se={},he=[];for(var re in K){var _e=K[re],Le=se[re]={};for(var Ze in _e){var Pe=_e[+Ze];if(Pe&&0!==Pe.bitmap.width&&0!==Pe.bitmap.height){var ot={x:0,y:0,w:Pe.bitmap.width+2,h:Pe.bitmap.height+2};he.push(ot),Le[Ze]={rect:ot,metrics:Pe.metrics}}}}var Nt=u.potpack(he),rn=new u.AlphaImage({width:Nt.w||1,height:Nt.h||1});for(var dn in K){var et=K[dn];for(var tt in et){var Ye=et[+tt];if(Ye&&0!==Ye.bitmap.width&&0!==Ye.bitmap.height){var bt=se[dn][tt].rect;u.AlphaImage.copy(Ye.bitmap,rn,{x:0,y:0},{x:bt.x+1,y:bt.y+1},Ye.bitmap)}}}this.image=rn,this.positions=se};u.register("GlyphAtlas",q);var de=function(K){this.tileID=new u.OverscaledTileID(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId};function we(K,se,he){for(var re=new u.EvaluationParameters(se),_e=0,Le=K;_e<Le.length;_e+=1)Le[_e].recalculate(re,he)}function Ve(K,se){var he=u.getArrayBuffer(K.request,function(re,_e,Le,Ze){re?se(re):_e&&se(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(_e)),rawData:_e,cacheControl:Le,expires:Ze})});return function(){he.cancel(),se()}}de.prototype.parse=function(K,se,he,re,_e){var Le=this;this.status="parsing",this.data=K,this.collisionBoxArray=new u.CollisionBoxArray;var Ze=new u.DictionaryCoder(Object.keys(K.layers).sort()),Pe=new u.FeatureIndex(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];var ot,Nt,rn,dn,et={},tt={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Ye=se.familiesBySource[this.source];for(var bt in Ye){var mt=K.layers[bt];if(mt){1===mt.version&&u.warnOnce('Vector tile source "'+this.source+'" layer "'+bt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var cn=Ze.encode(bt),xn=[],In=0;In<mt.length;In++){var ai=mt.feature(In),Bn=Pe.getId(ai,bt);xn.push({feature:ai,id:Bn,index:In,sourceLayerIndex:cn})}for(var Ni=0,ur=Ye[bt];Ni<ur.length;Ni+=1){var Gi=ur[Ni],cr=Gi[0];cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||"none"!==cr.visibility&&(we(Gi,this.zoom,he),(et[cr.id]=cr.createBucket({index:Pe.bucketLayerIDs.length,layers:Gi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:cn,sourceID:this.source})).populate(xn,tt,this.tileID.canonical),Pe.bucketLayerIDs.push(Gi.map(function(Te){return Te.id})))}}}var Wi=u.mapObject(tt.glyphDependencies,function(Te){return Object.keys(Te).map(Number)});Object.keys(Wi).length?re.send("getGlyphs",{uid:this.uid,stacks:Wi},function(Te,Xe){ot||(ot=Te,Nt=Xe,Ae.call(Le))}):Nt={};var xo=Object.keys(tt.iconDependencies);xo.length?re.send("getImages",{icons:xo,source:this.source,tileID:this.tileID,type:"icons"},function(Te,Xe){ot||(ot=Te,rn=Xe,Ae.call(Le))}):rn={};var At=Object.keys(tt.patternDependencies);function Ae(){if(ot)return _e(ot);if(Nt&&rn&&dn){var Te=new q(Nt),Xe=new u.ImageAtlas(rn,dn);for(var Ct in et){var St=et[Ct];St instanceof u.SymbolBucket?(we(St.layers,this.zoom,he),u.performSymbolLayout(St,Nt,Te.positions,rn,Xe.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):St.hasPattern&&(St instanceof u.LineBucket||St instanceof u.FillBucket||St instanceof u.FillExtrusionBucket)&&(we(St.layers,this.zoom,he),St.addFeatures(tt,this.tileID.canonical,Xe.patternPositions))}this.status="done",_e(null,{buckets:u.values(et).filter(function(Tn){return!Tn.isEmpty()}),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,imageAtlas:Xe,glyphMap:this.returnDependencies?Nt:null,iconMap:this.returnDependencies?rn:null,glyphPositions:this.returnDependencies?Te.positions:null})}}At.length?re.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"patterns"},function(Te,Xe){ot||(ot=Te,dn=Xe,Ae.call(Le))}):dn={},Ae.call(this)};var De=function(K,se,he,re){this.actor=K,this.layerIndex=se,this.availableImages=he,this.loadVectorData=re||Ve,this.loading={},this.loaded={}};De.prototype.loadTile=function(K,se){var he=this,re=K.uid;this.loading||(this.loading={});var _e=!!(K&&K.request&&K.request.collectResourceTiming)&&new u.RequestPerformance(K.request),Le=this.loading[re]=new de(K);Le.abort=this.loadVectorData(K,function(Ze,Pe){if(delete he.loading[re],Ze||!Pe)return Le.status="done",he.loaded[re]=Le,se(Ze);var ot=Pe.rawData,Nt={};Pe.expires&&(Nt.expires=Pe.expires),Pe.cacheControl&&(Nt.cacheControl=Pe.cacheControl);var rn={};if(_e){var dn=_e.finish();dn&&(rn.resourceTiming=JSON.parse(JSON.stringify(dn)))}Le.vectorTile=Pe.vectorTile,Le.parse(Pe.vectorTile,he.layerIndex,he.availableImages,he.actor,function(et,tt){if(et||!tt)return se(et);se(null,u.extend({rawTileData:ot.slice(0)},tt,Nt,rn))}),he.loaded=he.loaded||{},he.loaded[re]=Le})},De.prototype.reloadTile=function(K,se){var he=this,re=this.loaded,_e=K.uid,Le=this;if(re&&re[_e]){var Ze=re[_e];Ze.showCollisionBoxes=K.showCollisionBoxes;var Pe=function(ot,Nt){var rn=Ze.reloadCallback;rn&&(delete Ze.reloadCallback,Ze.parse(Ze.vectorTile,Le.layerIndex,he.availableImages,Le.actor,rn)),se(ot,Nt)};"parsing"===Ze.status?Ze.reloadCallback=Pe:"done"===Ze.status&&(Ze.vectorTile?Ze.parse(Ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Pe):Pe())}},De.prototype.abortTile=function(K,se){var he=this.loading,re=K.uid;he&&he[re]&&he[re].abort&&(he[re].abort(),delete he[re]),se()},De.prototype.removeTile=function(K,se){var he=this.loaded,re=K.uid;he&&he[re]&&delete he[re],se()};var it=u.window.ImageBitmap,Ke=function(){this.loaded={}};function je(K,se){if(0!==K.length){Be(K[0],se);for(var he=1;he<K.length;he++)Be(K[he],!se)}}function Be(K,se){for(var he=0,re=0,_e=0,Le=K.length,Ze=Le-1;_e<Le;Ze=_e++){var Pe=(K[_e][0]-K[Ze][0])*(K[Ze][1]+K[_e][1]),ot=he+Pe;re+=Math.abs(he)>=Math.abs(Pe)?he-ot+Pe:Pe-ot+he,he=ot}he+re>=0!=!!se&&K.reverse()}Ke.prototype.loadTile=function(K,se){var he=K.uid,re=K.encoding,_e=K.rawImageData,Le=it&&_e instanceof it?this.getImageData(_e):_e,Ze=new u.DEMData(he,Le,re);this.loaded=this.loaded||{},this.loaded[he]=Ze,se(null,Ze)},Ke.prototype.getImageData=function(K){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(K.width,K.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=K.width,this.offscreenCanvas.height=K.height,this.offscreenCanvasContext.drawImage(K,0,0,K.width,K.height);var se=this.offscreenCanvasContext.getImageData(-1,-1,K.width+2,K.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:se.width,height:se.height},se.data)},Ke.prototype.removeTile=function(K){var se=this.loaded,he=K.uid;se&&se[he]&&delete se[he]};var Je=u.vectorTile.VectorTileFeature.prototype.toGeoJSON,gt=function(K){this._feature=K,this.extent=u.EXTENT,this.type=K.type,this.properties=K.tags,"id"in K&&!isNaN(K.id)&&(this.id=parseInt(K.id,10))};gt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var K=[],se=0,he=this._feature.geometry;se<he.length;se+=1){var re=he[se];K.push([new u.Point$1(re[0],re[1])])}return K}for(var _e=[],Le=0,Ze=this._feature.geometry;Le<Ze.length;Le+=1){for(var Pe=[],ot=0,Nt=Ze[Le];ot<Nt.length;ot+=1){var rn=Nt[ot];Pe.push(new u.Point$1(rn[0],rn[1]))}_e.push(Pe)}return _e},gt.prototype.toGeoJSON=function(K,se,he){return Je.call(this,K,se,he)};var lt=function(K){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=K.length,this._features=K};lt.prototype.feature=function(K){return new gt(this._features[K])};var wt=u.vectorTile.VectorTileFeature,dt=ct;function ct(K,se){this.options=se||{},this.features=K,this.length=K.length}function at(K,se){this.id="number"==typeof K.id?K.id:void 0,this.type=K.type,this.rawGeometry=1===K.type?[K.geometry]:K.geometry,this.properties=K.tags,this.extent=se||4096}ct.prototype.feature=function(K){return new at(this.features[K],this.options.extent)},at.prototype.loadGeometry=function(){var K=this.rawGeometry;this.geometry=[];for(var se=0;se<K.length;se++){for(var he=K[se],re=[],_e=0;_e<he.length;_e++)re.push(new u.Point$1(he[_e][0],he[_e][1]));this.geometry.push(re)}return this.geometry},at.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var K=this.geometry,se=1/0,he=-1/0,re=1/0,_e=-1/0,Le=0;Le<K.length;Le++)for(var Ze=K[Le],Pe=0;Pe<Ze.length;Pe++){var ot=Ze[Pe];se=Math.min(se,ot.x),he=Math.max(he,ot.x),re=Math.min(re,ot.y),_e=Math.max(_e,ot.y)}return[se,re,he,_e]},at.prototype.toGeoJSON=wt.prototype.toGeoJSON;var Qe=Bt,ht=dt;function Bt(K){var se=new u.pbf;return function(he,re){for(var _e in he.layers)re.writeMessage(3,Ft,he.layers[_e])}(K,se),se.finish()}function Ft(K,se){var he;se.writeVarintField(15,K.version||1),se.writeStringField(1,K.name||""),se.writeVarintField(5,K.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(he=0;he<K.length;he++)re.feature=K.feature(he),se.writeMessage(2,kt,re);var _e=re.keys;for(he=0;he<_e.length;he++)se.writeStringField(3,_e[he]);var Le=re.values;for(he=0;he<Le.length;he++)se.writeMessage(4,Vr,Le[he])}function kt(K,se){var he=K.feature;void 0!==he.id&&se.writeVarintField(1,he.id),se.writeMessage(2,bn,K),se.writeVarintField(3,he.type),se.writeMessage(4,wn,he)}function bn(K,se){var he=K.feature,re=K.keys,_e=K.values,Le=K.keycache,Ze=K.valuecache;for(var Pe in he.properties){var ot=Le[Pe];void 0===ot&&(re.push(Pe),Le[Pe]=ot=re.length-1),se.writeVarint(ot);var Nt=he.properties[Pe],rn=typeof Nt;"string"!==rn&&"boolean"!==rn&&"number"!==rn&&(Nt=JSON.stringify(Nt));var dn=rn+":"+Nt,et=Ze[dn];void 0===et&&(_e.push(Nt),Ze[dn]=et=_e.length-1),se.writeVarint(et)}}function Kt(K,se){return(se<<3)+(7&K)}function Zn(K){return K<<1^K>>31}function wn(K,se){for(var he=K.loadGeometry(),re=K.type,_e=0,Le=0,Ze=he.length,Pe=0;Pe<Ze;Pe++){var ot=he[Pe],Nt=1;1===re&&(Nt=ot.length),se.writeVarint(Kt(1,Nt));for(var rn=3===re?ot.length-1:ot.length,dn=0;dn<rn;dn++){1===dn&&1!==re&&se.writeVarint(Kt(2,rn-1));var et=ot[dn].x-_e,tt=ot[dn].y-Le;se.writeVarint(Zn(et)),se.writeVarint(Zn(tt)),_e+=et,Le+=tt}3===re&&se.writeVarint(Kt(7,1))}}function Vr(K,se){var he=typeof K;"string"===he?se.writeStringField(1,K):"boolean"===he?se.writeBooleanField(7,K):"number"===he&&(K%1!=0?se.writeDoubleField(3,K):K<0?se.writeSVarintField(6,K):se.writeVarintField(5,K))}function Hi(K,se,he,re){Vi(K,he,re),Vi(se,2*he,2*re),Vi(se,2*he+1,2*re+1)}function Vi(K,se,he){var re=K[se];K[se]=K[he],K[he]=re}function Hr(K,se,he,re){var _e=K-he,Le=se-re;return _e*_e+Le*Le}Qe.fromVectorTileJs=Bt,Qe.fromGeojsonVt=function(K,se){se=se||{};var he={};for(var re in K)he[re]=new dt(K[re].features,se),he[re].name=re,he[re].version=se.version,he[re].extent=se.extent;return Bt({layers:he})},Qe.GeoJSONWrapper=ht;var en=function(K){return K[0]},Ot=function(K){return K[1]},Jt=function(K,se,he,re,_e){void 0===se&&(se=en),void 0===he&&(he=Ot),void 0===re&&(re=64),void 0===_e&&(_e=Float64Array),this.nodeSize=re,this.points=K;for(var Le=K.length<65536?Uint16Array:Uint32Array,Ze=this.ids=new Le(K.length),Pe=this.coords=new _e(2*K.length),ot=0;ot<K.length;ot++)Ze[ot]=ot,Pe[2*ot]=se(K[ot]),Pe[2*ot+1]=he(K[ot]);!function Nt(rn,dn,et,tt,Ye,bt){if(!(Ye-tt<=et)){var mt=tt+Ye>>1;(function cn(xn,In,ai,Bn,Ni,ur){for(;Ni>Bn;){if(Ni-Bn>600){var Gi=Ni-Bn+1,cr=ai-Bn+1,Wi=Math.log(Gi),xo=.5*Math.exp(2*Wi/3),At=.5*Math.sqrt(Wi*xo*(Gi-xo)/Gi)*(cr-Gi/2<0?-1:1);cn(xn,In,ai,Math.max(Bn,Math.floor(ai-cr*xo/Gi+At)),Math.min(Ni,Math.floor(ai+(Gi-cr)*xo/Gi+At)),ur)}var Ae=In[2*ai+ur],Te=Bn,Xe=Ni;for(Hi(xn,In,Bn,ai),In[2*Ni+ur]>Ae&&Hi(xn,In,Bn,Ni);Te<Xe;){for(Hi(xn,In,Te,Xe),Te++,Xe--;In[2*Te+ur]<Ae;)Te++;for(;In[2*Xe+ur]>Ae;)Xe--}In[2*Bn+ur]===Ae?Hi(xn,In,Bn,Xe):Hi(xn,In,++Xe,Ni),Xe<=ai&&(Bn=Xe+1),ai<=Xe&&(Ni=Xe-1)}})(rn,dn,mt,tt,Ye,bt%2),Nt(rn,dn,et,tt,mt-1,bt+1),Nt(rn,dn,et,mt+1,Ye,bt+1)}}(Ze,Pe,re,0,Ze.length-1,0)};Jt.prototype.range=function(K,se,he,re){return function(_e,Le,Ze,Pe,ot,Nt,rn){for(var dn,et,tt=[0,_e.length-1,0],Ye=[];tt.length;){var bt=tt.pop(),mt=tt.pop(),cn=tt.pop();if(mt-cn<=rn)for(var xn=cn;xn<=mt;xn++)et=Le[2*xn+1],(dn=Le[2*xn])>=Ze&&dn<=ot&&et>=Pe&&et<=Nt&&Ye.push(_e[xn]);else{var In=Math.floor((cn+mt)/2);et=Le[2*In+1],(dn=Le[2*In])>=Ze&&dn<=ot&&et>=Pe&&et<=Nt&&Ye.push(_e[In]);var ai=(bt+1)%2;(0===bt?Ze<=dn:Pe<=et)&&(tt.push(cn),tt.push(In-1),tt.push(ai)),(0===bt?ot>=dn:Nt>=et)&&(tt.push(In+1),tt.push(mt),tt.push(ai))}}return Ye}(this.ids,this.coords,K,se,he,re,this.nodeSize)},Jt.prototype.within=function(K,se,he){return function(re,_e,Le,Ze,Pe,ot){for(var Nt=[0,re.length-1,0],rn=[],dn=Pe*Pe;Nt.length;){var et=Nt.pop(),tt=Nt.pop(),Ye=Nt.pop();if(tt-Ye<=ot)for(var bt=Ye;bt<=tt;bt++)Hr(_e[2*bt],_e[2*bt+1],Le,Ze)<=dn&&rn.push(re[bt]);else{var mt=Math.floor((Ye+tt)/2),cn=_e[2*mt],xn=_e[2*mt+1];Hr(cn,xn,Le,Ze)<=dn&&rn.push(re[mt]);var In=(et+1)%2;(0===et?Le-Pe<=cn:Ze-Pe<=xn)&&(Nt.push(Ye),Nt.push(mt-1),Nt.push(In)),(0===et?Le+Pe>=cn:Ze+Pe>=xn)&&(Nt.push(mt+1),Nt.push(tt),Nt.push(In))}}return rn}(this.ids,this.coords,K,se,he,this.nodeSize)};var ln={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(K){return K}},fn=function(K){this.options=Xn(Object.create(ln),K),this.trees=new Array(this.options.maxZoom+1)};function qt(K,se,he,re,_e){return{x:K,y:se,zoom:1/0,id:he,parentId:-1,numPoints:re,properties:_e}}function On(K,se){var he=K.geometry.coordinates,re=he[1];return{x:Yn(he[0]),y:Gn(re),zoom:1/0,index:se,parentId:-1}}function Nn(K){return{type:"Feature",id:K.id,properties:Ui(K),geometry:{type:"Point",coordinates:[(re=K.x,360*(re-.5)),(se=K.y,he=(180-360*se)*Math.PI/180,360*Math.atan(Math.exp(he))/Math.PI-90)]}};var se,he,re}function Ui(K){var se=K.numPoints,he=se>=1e4?Math.round(se/1e3)+"k":se>=1e3?Math.round(se/100)/10+"k":se;return Xn(Xn({},K.properties),{cluster:!0,cluster_id:K.id,point_count:se,point_count_abbreviated:he})}function Yn(K){return K/360+.5}function Gn(K){var se=Math.sin(K*Math.PI/180),he=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return he<0?0:he>1?1:he}function Xn(K,se){for(var he in se)K[he]=se[he];return K}function mi(K){return K.x}function pi(K){return K.y}function Mn(K,se,he,re,_e,Le){var Ze=_e-he,Pe=Le-re;if(0!==Ze||0!==Pe){var ot=((K-he)*Ze+(se-re)*Pe)/(Ze*Ze+Pe*Pe);ot>1?(he=_e,re=Le):ot>0&&(he+=Ze*ot,re+=Pe*ot)}return(Ze=K-he)*Ze+(Pe=se-re)*Pe}function Pn(K,se,he,re){var _e={id:void 0===K?null:K,type:se,geometry:he,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Le){var Ze=Le.geometry,Pe=Le.type;if("Point"===Pe||"MultiPoint"===Pe||"LineString"===Pe)mn(Le,Ze);else if("Polygon"===Pe||"MultiLineString"===Pe)for(var ot=0;ot<Ze.length;ot++)mn(Le,Ze[ot]);else if("MultiPolygon"===Pe)for(ot=0;ot<Ze.length;ot++)for(var Nt=0;Nt<Ze[ot].length;Nt++)mn(Le,Ze[ot][Nt])}(_e),_e}function mn(K,se){for(var he=0;he<se.length;he+=3)K.minX=Math.min(K.minX,se[he]),K.minY=Math.min(K.minY,se[he+1]),K.maxX=Math.max(K.maxX,se[he]),K.maxY=Math.max(K.maxY,se[he+1])}function kn(K,se,he,re){if(se.geometry){var _e=se.geometry.coordinates,Le=se.geometry.type,Ze=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2),Pe=[],ot=se.id;if(he.promoteId?ot=se.properties[he.promoteId]:he.generateId&&(ot=re||0),"Point"===Le)ii(_e,Pe);else if("MultiPoint"===Le)for(var Nt=0;Nt<_e.length;Nt++)ii(_e[Nt],Pe);else if("LineString"===Le)$n(_e,Pe,Ze,!1);else if("MultiLineString"===Le){if(he.lineMetrics){for(Nt=0;Nt<_e.length;Nt++)$n(_e[Nt],Pe=[],Ze,!1),K.push(Pn(ot,"LineString",Pe,se.properties));return}mr(_e,Pe,Ze,!1)}else if("Polygon"===Le)mr(_e,Pe,Ze,!0);else{if("MultiPolygon"!==Le){if("GeometryCollection"===Le){for(Nt=0;Nt<se.geometry.geometries.length;Nt++)kn(K,{id:ot,geometry:se.geometry.geometries[Nt],properties:se.properties},he,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Nt=0;Nt<_e.length;Nt++){var rn=[];mr(_e[Nt],rn,Ze,!0),Pe.push(rn)}}K.push(Pn(ot,Le,Pe,se.properties))}}function ii(K,se){se.push(gr(K[0])),se.push(Mo(K[1])),se.push(0)}function $n(K,se,he,re){for(var _e,Le,Ze=0,Pe=0;Pe<K.length;Pe++){var ot=gr(K[Pe][0]),Nt=Mo(K[Pe][1]);se.push(ot),se.push(Nt),se.push(0),Pe>0&&(Ze+=re?(_e*Nt-ot*Le)/2:Math.sqrt(Math.pow(ot-_e,2)+Math.pow(Nt-Le,2))),_e=ot,Le=Nt}var rn=se.length-3;se[2]=1,function dn(et,tt,Ye,bt){for(var mt,cn=bt,xn=Ye-tt>>1,In=Ye-tt,ai=et[tt],Bn=et[tt+1],Ni=et[Ye],ur=et[Ye+1],Gi=tt+3;Gi<Ye;Gi+=3){var cr=Mn(et[Gi],et[Gi+1],ai,Bn,Ni,ur);if(cr>cn)mt=Gi,cn=cr;else if(cr===cn){var Wi=Math.abs(Gi-xn);Wi<In&&(mt=Gi,In=Wi)}}cn>bt&&(mt-tt>3&&dn(et,tt,mt,bt),et[mt+2]=cn,Ye-mt>3&&dn(et,mt,Ye,bt))}(se,0,rn,he),se[rn+2]=1,se.size=Math.abs(Ze),se.start=0,se.end=se.size}function mr(K,se,he,re){for(var _e=0;_e<K.length;_e++){var Le=[];$n(K[_e],Le,he,re),se.push(Le)}}function gr(K){return K/360+.5}function Mo(K){var se=Math.sin(K*Math.PI/180),he=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return he<0?0:he>1?1:he}function qi(K,se,he,re,_e,Le,Ze,Pe){if(re/=se,Le>=(he/=se)&&Ze<re)return K;if(Ze<he||Le>=re)return null;for(var ot=[],Nt=0;Nt<K.length;Nt++){var rn=K[Nt],dn=rn.geometry,et=rn.type,tt=0===_e?rn.minX:rn.minY,Ye=0===_e?rn.maxX:rn.maxY;if(tt>=he&&Ye<re)ot.push(rn);else if(!(Ye<he||tt>=re)){var bt=[];if("Point"===et||"MultiPoint"===et)j(dn,bt,he,re,_e);else if("LineString"===et)Fe(dn,bt,he,re,_e,!1,Pe.lineMetrics);else if("MultiLineString"===et)ut(dn,bt,he,re,_e,!1);else if("Polygon"===et)ut(dn,bt,he,re,_e,!0);else if("MultiPolygon"===et)for(var mt=0;mt<dn.length;mt++){var cn=[];ut(dn[mt],cn,he,re,_e,!0),cn.length&&bt.push(cn)}if(bt.length){if(Pe.lineMetrics&&"LineString"===et){for(mt=0;mt<bt.length;mt++)ot.push(Pn(rn.id,et,bt[mt],rn.tags));continue}"LineString"!==et&&"MultiLineString"!==et||(1===bt.length?(et="LineString",bt=bt[0]):et="MultiLineString"),"Point"!==et&&"MultiPoint"!==et||(et=3===bt.length?"Point":"MultiPoint"),ot.push(Pn(rn.id,et,bt,rn.tags))}}}return ot.length?ot:null}function j(K,se,he,re,_e){for(var Le=0;Le<K.length;Le+=3){var Ze=K[Le+_e];Ze>=he&&Ze<=re&&(se.push(K[Le]),se.push(K[Le+1]),se.push(K[Le+2]))}}function Fe(K,se,he,re,_e,Le,Ze){for(var Pe,ot,Nt=Yt(K),rn=0===_e?rt:Vt,dn=K.start,et=0;et<K.length-3;et+=3){var tt=K[et],Ye=K[et+1],bt=K[et+2],mt=K[et+3],cn=K[et+4],xn=0===_e?tt:Ye,In=0===_e?mt:cn,ai=!1;Ze&&(Pe=Math.sqrt(Math.pow(tt-mt,2)+Math.pow(Ye-cn,2))),xn<he?In>he&&(ot=rn(Nt,tt,Ye,mt,cn,he),Ze&&(Nt.start=dn+Pe*ot)):xn>re?In<re&&(ot=rn(Nt,tt,Ye,mt,cn,re),Ze&&(Nt.start=dn+Pe*ot)):It(Nt,tt,Ye,bt),In<he&&xn>=he&&(ot=rn(Nt,tt,Ye,mt,cn,he),ai=!0),In>re&&xn<=re&&(ot=rn(Nt,tt,Ye,mt,cn,re),ai=!0),!Le&&ai&&(Ze&&(Nt.end=dn+Pe*ot),se.push(Nt),Nt=Yt(K)),Ze&&(dn+=Pe)}var Bn=K.length-3;tt=K[Bn],Ye=K[Bn+1],bt=K[Bn+2],(xn=0===_e?tt:Ye)>=he&&xn<=re&&It(Nt,tt,Ye,bt),Bn=Nt.length-3,Le&&Bn>=3&&(Nt[Bn]!==Nt[0]||Nt[Bn+1]!==Nt[1])&&It(Nt,Nt[0],Nt[1],Nt[2]),Nt.length&&se.push(Nt)}function Yt(K){var se=[];return se.size=K.size,se.start=K.start,se.end=K.end,se}function ut(K,se,he,re,_e,Le){for(var Ze=0;Ze<K.length;Ze++)Fe(K[Ze],se,he,re,_e,Le,!1)}function It(K,se,he,re){K.push(se),K.push(he),K.push(re)}function rt(K,se,he,re,_e,Le){var Ze=(Le-se)/(re-se);return K.push(Le),K.push(he+(_e-he)*Ze),K.push(1),Ze}function Vt(K,se,he,re,_e,Le){var Ze=(Le-he)/(_e-he);return K.push(se+(re-se)*Ze),K.push(Le),K.push(1),Ze}function di(K,se){for(var he=[],re=0;re<K.length;re++){var _e,Le=K[re],Ze=Le.type;if("Point"===Ze||"MultiPoint"===Ze||"LineString"===Ze)_e=hi(Le.geometry,se);else if("MultiLineString"===Ze||"Polygon"===Ze){_e=[];for(var Pe=0;Pe<Le.geometry.length;Pe++)_e.push(hi(Le.geometry[Pe],se))}else if("MultiPolygon"===Ze)for(_e=[],Pe=0;Pe<Le.geometry.length;Pe++){for(var ot=[],Nt=0;Nt<Le.geometry[Pe].length;Nt++)ot.push(hi(Le.geometry[Pe][Nt],se));_e.push(ot)}he.push(Pn(Le.id,Ze,_e,Le.tags))}return he}function hi(K,se){var he=[];he.size=K.size,void 0!==K.start&&(he.start=K.start,he.end=K.end);for(var re=0;re<K.length;re+=3)he.push(K[re]+se,K[re+1],K[re+2]);return he}function bi(K,se){if(K.transformed)return K;var he,re,_e,Le=1<<K.z,Ze=K.x,Pe=K.y;for(he=0;he<K.features.length;he++){var ot=K.features[he],Nt=ot.geometry,rn=ot.type;if(ot.geometry=[],1===rn)for(re=0;re<Nt.length;re+=2)ot.geometry.push(_r(Nt[re],Nt[re+1],se,Le,Ze,Pe));else for(re=0;re<Nt.length;re++){var dn=[];for(_e=0;_e<Nt[re].length;_e+=2)dn.push(_r(Nt[re][_e],Nt[re][_e+1],se,Le,Ze,Pe));ot.geometry.push(dn)}}return K.transformed=!0,K}function _r(K,se,he,re,_e,Le){return[Math.round(he*(K*re-_e)),Math.round(he*(se*re-Le))]}function pr(K,se,he,re,_e){for(var Le=se===_e.maxZoom?0:_e.tolerance/((1<<se)*_e.extent),Ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:he,y:re,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pe=0;Pe<K.length;Pe++){Ze.numFeatures++,bo(Ze,K[Pe],Le,_e);var ot=K[Pe].minX,Nt=K[Pe].minY,rn=K[Pe].maxX,dn=K[Pe].maxY;ot<Ze.minX&&(Ze.minX=ot),Nt<Ze.minY&&(Ze.minY=Nt),rn>Ze.maxX&&(Ze.maxX=rn),dn>Ze.maxY&&(Ze.maxY=dn)}return Ze}function bo(K,se,he,re){var _e=se.geometry,Le=se.type,Ze=[];if("Point"===Le||"MultiPoint"===Le)for(var Pe=0;Pe<_e.length;Pe+=3)Ze.push(_e[Pe]),Ze.push(_e[Pe+1]),K.numPoints++,K.numSimplified++;else if("LineString"===Le)Yi(Ze,_e,K,he,!1,!1);else if("MultiLineString"===Le||"Polygon"===Le)for(Pe=0;Pe<_e.length;Pe++)Yi(Ze,_e[Pe],K,he,"Polygon"===Le,0===Pe);else if("MultiPolygon"===Le)for(var ot=0;ot<_e.length;ot++){var Nt=_e[ot];for(Pe=0;Pe<Nt.length;Pe++)Yi(Ze,Nt[Pe],K,he,!0,0===Pe)}if(Ze.length){var rn=se.tags||null;if("LineString"===Le&&re.lineMetrics){for(var dn in rn={},se.tags)rn[dn]=se.tags[dn];rn.mapbox_clip_start=_e.start/_e.size,rn.mapbox_clip_end=_e.end/_e.size}var et={geometry:Ze,type:"Polygon"===Le||"MultiPolygon"===Le?3:"LineString"===Le||"MultiLineString"===Le?2:1,tags:rn};null!==se.id&&(et.id=se.id),K.features.push(et)}}function Yi(K,se,he,re,_e,Le){var Ze=re*re;if(re>0&&se.size<(_e?Ze:re))he.numPoints+=se.length/3;else{for(var Pe=[],ot=0;ot<se.length;ot+=3)(0===re||se[ot+2]>Ze)&&(he.numSimplified++,Pe.push(se[ot]),Pe.push(se[ot+1])),he.numPoints++;_e&&function(Nt,rn){for(var dn=0,et=0,tt=Nt.length,Ye=tt-2;et<tt;Ye=et,et+=2)dn+=(Nt[et]-Nt[Ye])*(Nt[et+1]+Nt[Ye+1]);if(dn>0===rn)for(et=0,tt=Nt.length;et<tt/2;et+=2){var bt=Nt[et],mt=Nt[et+1];Nt[et]=Nt[tt-2-et],Nt[et+1]=Nt[tt-1-et],Nt[tt-2-et]=bt,Nt[tt-1-et]=mt}}(Pe,Le),K.push(Pe)}}function wr(K,se){var he=(se=this.options=function(_e,Le){for(var Ze in Le)_e[Ze]=Le[Ze];return _e}(Object.create(this.options),se)).debug;if(he&&console.time("preprocess data"),se.maxZoom<0||se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(se.promoteId&&se.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e,Le,Ze,Pe,ot,Nt,re=function(_e,Le){var Ze=[];if("FeatureCollection"===_e.type)for(var Pe=0;Pe<_e.features.length;Pe++)kn(Ze,_e.features[Pe],Le,Pe);else kn(Ze,"Feature"===_e.type?_e:{geometry:_e},Le);return Ze}(K,se);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",se.indexMaxZoom,se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(_e=re,Le=se,Ze=Le.buffer/Le.extent,Pe=_e,ot=qi(_e,1,-1-Ze,Ze,0,-1,2,Le),Nt=qi(_e,1,1-Ze,2+Ze,0,-1,2,Le),(ot||Nt)&&(Pe=qi(_e,1,-Ze,1+Ze,0,-1,2,Le)||[],ot&&(Pe=di(ot,1).concat(Pe)),Nt&&(Pe=Pe.concat(di(Nt,-1)))),re=Pe).length&&this.splitTile(re,0,0,0),he&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gr(K,se,he){return 32*((1<<K)*he+se)+K}function ao(K,se){var he=K.tileID.canonical;if(!this._geoJSONIndex)return se(null,null);var re=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!re)return se(null,null);var _e=new lt(re.features),Le=Qe(_e);0===Le.byteOffset&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),se(null,{vectorTile:_e,rawData:Le.buffer})}fn.prototype.load=function(K){var se=this.options,he=se.log,re=se.minZoom,_e=se.maxZoom,Le=se.nodeSize;he&&console.time("total time");var Ze="prepare "+K.length+" points";he&&console.time(Ze),this.points=K;for(var Pe=[],ot=0;ot<K.length;ot++)K[ot].geometry&&Pe.push(On(K[ot],ot));this.trees[_e+1]=new Jt(Pe,mi,pi,Le,Float32Array),he&&console.timeEnd(Ze);for(var Nt=_e;Nt>=re;Nt--){var rn=+Date.now();Pe=this._cluster(Pe,Nt),this.trees[Nt]=new Jt(Pe,mi,pi,Le,Float32Array),he&&console.log("z%d: %d clusters in %dms",Nt,Pe.length,+Date.now()-rn)}return he&&console.timeEnd("total time"),this},fn.prototype.getClusters=function(K,se){var he=((K[0]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,K[1])),_e=180===K[2]?180:((K[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)he=-180,_e=180;else if(he>_e){var Ze=this.getClusters([he,re,180,Le],se),Pe=this.getClusters([-180,re,_e,Le],se);return Ze.concat(Pe)}for(var ot=this.trees[this._limitZoom(se)],Nt=[],rn=0,dn=ot.range(Yn(he),Gn(Le),Yn(_e),Gn(re));rn<dn.length;rn+=1){var et=ot.points[dn[rn]];Nt.push(et.numPoints?Nn(et):this.points[et.index])}return Nt},fn.prototype.getChildren=function(K){var se=this._getOriginId(K),he=this._getOriginZoom(K),re="No cluster with the specified id.",_e=this.trees[he];if(!_e)throw new Error(re);var Le=_e.points[se];if(!Le)throw new Error(re);for(var Ze=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Pe=[],ot=0,Nt=_e.within(Le.x,Le.y,Ze);ot<Nt.length;ot+=1){var rn=_e.points[Nt[ot]];rn.parentId===K&&Pe.push(rn.numPoints?Nn(rn):this.points[rn.index])}if(0===Pe.length)throw new Error(re);return Pe},fn.prototype.getLeaves=function(K,se,he){var re=[];return this._appendLeaves(re,K,se=se||10,he=he||0,0),re},fn.prototype.getTile=function(K,se,he){var re=this.trees[this._limitZoom(K)],_e=Math.pow(2,K),Le=this.options,Ze=Le.radius/Le.extent,Pe=(he-Ze)/_e,ot=(he+1+Ze)/_e,Nt={features:[]};return this._addTileFeatures(re.range((se-Ze)/_e,Pe,(se+1+Ze)/_e,ot),re.points,se,he,_e,Nt),0===se&&this._addTileFeatures(re.range(1-Ze/_e,Pe,1,ot),re.points,_e,he,_e,Nt),se===_e-1&&this._addTileFeatures(re.range(0,Pe,Ze/_e,ot),re.points,-1,he,_e,Nt),Nt.features.length?Nt:null},fn.prototype.getClusterExpansionZoom=function(K){for(var se=this._getOriginZoom(K)-1;se<=this.options.maxZoom;){var he=this.getChildren(K);if(se++,1!==he.length)break;K=he[0].properties.cluster_id}return se},fn.prototype._appendLeaves=function(K,se,he,re,_e){for(var Le=0,Ze=this.getChildren(se);Le<Ze.length;Le+=1){var Pe=Ze[Le],ot=Pe.properties;if(ot&&ot.cluster?_e+ot.point_count<=re?_e+=ot.point_count:_e=this._appendLeaves(K,ot.cluster_id,he,re,_e):_e<re?_e++:K.push(Pe),K.length===he)break}return _e},fn.prototype._addTileFeatures=function(K,se,he,re,_e,Le){for(var Ze=0,Pe=K;Ze<Pe.length;Ze+=1){var ot=se[Pe[Ze]],Nt=ot.numPoints,rn={type:1,geometry:[[Math.round(this.options.extent*(ot.x*_e-he)),Math.round(this.options.extent*(ot.y*_e-re))]],tags:Nt?Ui(ot):this.points[ot.index].properties},dn=void 0;Nt?dn=ot.id:this.options.generateId?dn=ot.index:this.points[ot.index].id&&(dn=this.points[ot.index].id),void 0!==dn&&(rn.id=dn),Le.features.push(rn)}},fn.prototype._limitZoom=function(K){return Math.max(this.options.minZoom,Math.min(+K,this.options.maxZoom+1))},fn.prototype._cluster=function(K,se){for(var he=[],re=this.options,_e=re.reduce,Le=re.minPoints,Ze=re.radius/(re.extent*Math.pow(2,se)),Pe=0;Pe<K.length;Pe++){var ot=K[Pe];if(!(ot.zoom<=se)){ot.zoom=se;for(var Nt=this.trees[se+1],rn=Nt.within(ot.x,ot.y,Ze),dn=ot.numPoints||1,et=dn,tt=0,Ye=rn;tt<Ye.length;tt+=1){var bt=Nt.points[Ye[tt]];bt.zoom>se&&(et+=bt.numPoints||1)}if(et>=Le){for(var mt=ot.x*dn,cn=ot.y*dn,xn=_e&&dn>1?this._map(ot,!0):null,In=(Pe<<5)+(se+1)+this.points.length,ai=0,Bn=rn;ai<Bn.length;ai+=1){var Ni=Nt.points[Bn[ai]];if(!(Ni.zoom<=se)){Ni.zoom=se;var ur=Ni.numPoints||1;mt+=Ni.x*ur,cn+=Ni.y*ur,Ni.parentId=In,_e&&(xn||(xn=this._map(ot,!0)),_e(xn,this._map(Ni)))}}ot.parentId=In,he.push(qt(mt/et,cn/et,In,et,xn))}else if(he.push(ot),et>1)for(var Gi=0,cr=rn;Gi<cr.length;Gi+=1){var Wi=Nt.points[cr[Gi]];Wi.zoom<=se||(Wi.zoom=se,he.push(Wi))}}}return he},fn.prototype._getOriginId=function(K){return K-this.points.length>>5},fn.prototype._getOriginZoom=function(K){return(K-this.points.length)%32},fn.prototype._map=function(K,se){if(K.numPoints)return se?Xn({},K.properties):K.properties;var he=this.points[K.index].properties,re=this.options.map(he);return se&&re===he?Xn({},re):re},wr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},wr.prototype.splitTile=function(K,se,he,re,_e,Le,Ze){for(var Pe=[K,se,he,re],ot=this.options,Nt=ot.debug;Pe.length;){re=Pe.pop(),he=Pe.pop(),se=Pe.pop(),K=Pe.pop();var rn=1<<se,dn=Gr(se,he,re),et=this.tiles[dn];if(!et&&(Nt>1&&console.time("creation"),et=this.tiles[dn]=pr(K,se,he,re,ot),this.tileCoords.push({z:se,x:he,y:re}),Nt)){Nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",se,he,re,et.numFeatures,et.numPoints,et.numSimplified),console.timeEnd("creation"));var tt="z"+se;this.stats[tt]=(this.stats[tt]||0)+1,this.total++}if(et.source=K,_e){if(se===ot.maxZoom||se===_e)continue;var Ye=1<<_e-se;if(he!==Math.floor(Le/Ye)||re!==Math.floor(Ze/Ye))continue}else if(se===ot.indexMaxZoom||et.numPoints<=ot.indexMaxPoints)continue;if(et.source=null,0!==K.length){Nt>1&&console.time("clipping");var bt,mt,cn,xn,In,ai,Bn=.5*ot.buffer/ot.extent,Ni=.5-Bn,ur=.5+Bn,Gi=1+Bn;bt=mt=cn=xn=null,In=qi(K,rn,he-Bn,he+ur,0,et.minX,et.maxX,ot),ai=qi(K,rn,he+Ni,he+Gi,0,et.minX,et.maxX,ot),K=null,In&&(bt=qi(In,rn,re-Bn,re+ur,1,et.minY,et.maxY,ot),mt=qi(In,rn,re+Ni,re+Gi,1,et.minY,et.maxY,ot),In=null),ai&&(cn=qi(ai,rn,re-Bn,re+ur,1,et.minY,et.maxY,ot),xn=qi(ai,rn,re+Ni,re+Gi,1,et.minY,et.maxY,ot),ai=null),Nt>1&&console.timeEnd("clipping"),Pe.push(bt||[],se+1,2*he,2*re),Pe.push(mt||[],se+1,2*he,2*re+1),Pe.push(cn||[],se+1,2*he+1,2*re),Pe.push(xn||[],se+1,2*he+1,2*re+1)}}},wr.prototype.getTile=function(K,se,he){var re=this.options,_e=re.extent,Le=re.debug;if(K<0||K>24)return null;var Ze=1<<K,Pe=Gr(K,se=(se%Ze+Ze)%Ze,he);if(this.tiles[Pe])return bi(this.tiles[Pe],_e);Le>1&&console.log("drilling down to z%d-%d-%d",K,se,he);for(var ot,Nt=K,rn=se,dn=he;!ot&&Nt>0;)Nt--,rn=Math.floor(rn/2),dn=Math.floor(dn/2),ot=this.tiles[Gr(Nt,rn,dn)];return ot&&ot.source?(Le>1&&console.log("found parent tile z%d-%d-%d",Nt,rn,dn),Le>1&&console.time("drilling down"),this.splitTile(ot.source,Nt,rn,dn,K,se,he),Le>1&&console.timeEnd("drilling down"),this.tiles[Pe]?bi(this.tiles[Pe],_e):null):null};var Zr=function(K){function se(he,re,_e,Le){K.call(this,he,re,_e,ao),Le&&(this.loadGeoJSON=Le)}return K&&(se.__proto__=K),(se.prototype=Object.create(K&&K.prototype)).constructor=se,se.prototype.loadData=function(he,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=re,this._pendingLoadDataParams=he,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},se.prototype._loadData=function(){var he=this;if(this._pendingCallback&&this._pendingLoadDataParams){var re=this._pendingCallback,_e=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Le=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new u.RequestPerformance(_e.request);this.loadGeoJSON(_e,function(Ze,Pe){if(Ze||!Pe)return re(Ze);if("object"!=typeof Pe)return re(new Error("Input data given to '"+_e.source+"' is not a valid GeoJSON object."));!function et(tt,Ye){var bt,mt=tt&&tt.type;if("FeatureCollection"===mt)for(bt=0;bt<tt.features.length;bt++)et(tt.features[bt],Ye);else if("GeometryCollection"===mt)for(bt=0;bt<tt.geometries.length;bt++)et(tt.geometries[bt],Ye);else if("Feature"===mt)et(tt.geometry,Ye);else if("Polygon"===mt)je(tt.coordinates,Ye);else if("MultiPolygon"===mt)for(bt=0;bt<tt.coordinates.length;bt++)je(tt.coordinates[bt],Ye);return tt}(Pe,!0);try{if(_e.filter){var ot=u.createExpression(_e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ot.result)throw new Error(ot.value.map(function(et){return et.key+": "+et.message}).join(", "));var Nt=Pe.features.filter(function(et){return ot.value.evaluate({zoom:0},et)});Pe={type:"FeatureCollection",features:Nt}}he._geoJSONIndex=_e.cluster?new fn(function(et){var tt=et.superclusterOptions,Ye=et.clusterProperties;if(!Ye||!tt)return tt;for(var bt={},mt={},cn={accumulated:null,zoom:0},xn={properties:null},In=Object.keys(Ye),ai=0,Bn=In;ai<Bn.length;ai+=1){var Ni=Bn[ai],ur=Ye[Ni],Gi=ur[0],cr=u.createExpression(ur[1]),Wi=u.createExpression("string"==typeof Gi?[Gi,["accumulated"],["get",Ni]]:Gi);bt[Ni]=cr.value,mt[Ni]=Wi.value}return tt.map=function(xo){xn.properties=xo;for(var At={},Ae=0,Te=In;Ae<Te.length;Ae+=1){var Xe=Te[Ae];At[Xe]=bt[Xe].evaluate(cn,xn)}return At},tt.reduce=function(xo,At){xn.properties=At;for(var Ae=0,Te=In;Ae<Te.length;Ae+=1){var Xe=Te[Ae];cn.accumulated=xo[Xe],xo[Xe]=mt[Xe].evaluate(cn,xn)}},tt}(_e)).load(Pe.features):new wr(et=Pe,_e.geojsonVtOptions)}catch(et){return re(et)}var et;he.loaded={};var rn={};if(Le){var dn=Le.finish();dn&&(rn.resourceTiming={},rn.resourceTiming[_e.source]=JSON.parse(JSON.stringify(dn)))}re(null,rn)})}},se.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},se.prototype.reloadTile=function(he,re){var _e=this.loaded;return _e&&_e[he.uid]?K.prototype.reloadTile.call(this,he,re):this.loadTile(he,re)},se.prototype.loadGeoJSON=function(he,re){if(he.request)u.getJSON(he.request,re);else{if("string"!=typeof he.data)return re(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."));try{return re(null,JSON.parse(he.data))}catch{return re(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."))}}},se.prototype.removeSource=function(he,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()},se.prototype.getClusterExpansionZoom=function(he,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(_e){re(_e)}},se.prototype.getClusterChildren=function(he,re){try{re(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(_e){re(_e)}},se.prototype.getClusterLeaves=function(he,re){try{re(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(_e){re(_e)}},se}(De),Qt=function(K){var se=this;this.self=K,this.actor=new u.Actor(K,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:De,geojson:Zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(he,re){if(se.workerSourceTypes[he])throw new Error('Worker source with name "'+he+'" already registered.');se.workerSourceTypes[he]=re},this.self.registerRTLTextPlugin=function(he){if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=he.applyArabicShaping,u.plugin.processBidirectionalText=he.processBidirectionalText,u.plugin.processStyledBidirectionalText=he.processStyledBidirectionalText}};return Qt.prototype.setReferrer=function(K,se){this.referrer=se},Qt.prototype.setImages=function(K,se,he){for(var re in this.availableImages[K]=se,this.workerSources[K]){var _e=this.workerSources[K][re];for(var Le in _e)_e[Le].availableImages=se}he()},Qt.prototype.setLayers=function(K,se,he){this.getLayerIndex(K).replace(se),he()},Qt.prototype.updateLayers=function(K,se,he){this.getLayerIndex(K).update(se.layers,se.removedIds),he()},Qt.prototype.loadTile=function(K,se,he){this.getWorkerSource(K,se.type,se.source).loadTile(se,he)},Qt.prototype.loadDEMTile=function(K,se,he){this.getDEMWorkerSource(K,se.source).loadTile(se,he)},Qt.prototype.reloadTile=function(K,se,he){this.getWorkerSource(K,se.type,se.source).reloadTile(se,he)},Qt.prototype.abortTile=function(K,se,he){this.getWorkerSource(K,se.type,se.source).abortTile(se,he)},Qt.prototype.removeTile=function(K,se,he){this.getWorkerSource(K,se.type,se.source).removeTile(se,he)},Qt.prototype.removeDEMTile=function(K,se){this.getDEMWorkerSource(K,se.source).removeTile(se)},Qt.prototype.removeSource=function(K,se,he){if(this.workerSources[K]&&this.workerSources[K][se.type]&&this.workerSources[K][se.type][se.source]){var re=this.workerSources[K][se.type][se.source];delete this.workerSources[K][se.type][se.source],void 0!==re.removeSource?re.removeSource(se,he):he()}},Qt.prototype.loadWorkerSource=function(K,se,he){try{this.self.importScripts(se.url),he()}catch(re){he(re.toString())}},Qt.prototype.syncRTLPluginState=function(K,se,he){try{u.plugin.setState(se);var re=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&null!=re){this.self.importScripts(re);var _e=u.plugin.isParsed();he(_e?void 0:new Error("RTL Text Plugin failed to import scripts from "+re),_e)}}catch(Le){he(Le.toString())}},Qt.prototype.getAvailableImages=function(K){var se=this.availableImages[K];return se||(se=[]),se},Qt.prototype.getLayerIndex=function(K){var se=this.layerIndexes[K];return se||(se=this.layerIndexes[K]=new i),se},Qt.prototype.getWorkerSource=function(K,se,he){var re=this;return this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][se]||(this.workerSources[K][se]={}),this.workerSources[K][se][he]||(this.workerSources[K][se][he]=new this.workerSourceTypes[se]({send:function(_e,Le,Ze){re.actor.send(_e,Le,Ze,K)}},this.getLayerIndex(K),this.getAvailableImages(K))),this.workerSources[K][se][he]},Qt.prototype.getDEMWorkerSource=function(K,se){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][se]||(this.demWorkerSources[K][se]=new Ke),this.demWorkerSources[K][se]},Qt.prototype.enforceCacheSizeLimit=function(K,se){u.enforceCacheSizeLimit(se)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Qt(self)),Qt}),O(0,function(u){var fe=u.createCommonjsModule(function(p){function g(P){return!f(P)}function f(P){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var V,ee,Ce=new Blob([""],{type:"text/javascript"}),Re=URL.createObjectURL(Ce);try{ee=new Worker(Re),V=!0}catch{V=!1}return ee&&ee.terminate(),URL.revokeObjectURL(Re),V}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var V=document.createElement("canvas");V.width=V.height=1;var ee=V.getContext("2d");if(!ee)return!1;var Ce=ee.getImageData(0,0,1,1);return Ce&&Ce.width===V.width}()?(void 0===x[B=P&&P.failIfMajorPerformanceCaveat]&&(x[B]=function(V){var Re,I,R,ee=(Re=V,I=document.createElement("canvas"),(R=Object.create(g.webGLContextAttributes)).failIfMajorPerformanceCaveat=Re,I.probablySupportsContext?I.probablySupportsContext("webgl",R)||I.probablySupportsContext("experimental-webgl",R):I.supportsContext?I.supportsContext("webgl",R)||I.supportsContext("experimental-webgl",R):I.getContext("webgl",R)||I.getContext("experimental-webgl",R));if(!ee)return!1;var Ce=ee.createShader(ee.VERTEX_SHADER);return!(!Ce||ee.isContextLost())&&(ee.shaderSource(Ce,"void main() {}"),ee.compileShader(Ce),!0===ee.getShaderParameter(Ce,ee.COMPILE_STATUS))}(B)),x[B]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var B}p.exports?p.exports=g:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=g,window.mapboxgl.notSupportedReason=f);var x={};g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Y={create:function(p,g,f){var x=u.window.document.createElement(p);return void 0!==g&&(x.className=g),f&&f.appendChild(x),x},createNS:function(p,g){return u.window.document.createElementNS(p,g)}},i=u.window.document&&u.window.document.documentElement.style;function q(p){if(!i)return p[0];for(var g=0;g<p.length;g++)if(p[g]in i)return p[g];return p[0]}var de,we=q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Y.disableDrag=function(){i&&we&&(de=i[we],i[we]="none")},Y.enableDrag=function(){i&&we&&(i[we]=de)};var Ve=q(["transform","WebkitTransform"]);Y.setTransform=function(p,g){p.style[Ve]=g};var De=!1;try{var it=Object.defineProperty({},"passive",{get:function(){De=!0}});u.window.addEventListener("test",it,it),u.window.removeEventListener("test",it,it)}catch{De=!1}Y.addEventListener=function(p,g,f,x){void 0===x&&(x={}),p.addEventListener(g,f,"passive"in x&&De?x:x.capture)},Y.removeEventListener=function(p,g,f,x){void 0===x&&(x={}),p.removeEventListener(g,f,"passive"in x&&De?x:x.capture)};var Ke=function(p){p.preventDefault(),p.stopPropagation(),u.window.removeEventListener("click",Ke,!0)};function je(p){var g=p.userImage;return!!(g&&g.render&&g.render())&&(p.data.replace(new Uint8Array(g.data.buffer)),!0)}Y.suppressClick=function(){u.window.addEventListener("click",Ke,!0),u.window.setTimeout(function(){u.window.removeEventListener("click",Ke,!0)},0)},Y.mousePos=function(p,g){var f=p.getBoundingClientRect();return new u.Point(g.clientX-f.left-p.clientLeft,g.clientY-f.top-p.clientTop)},Y.touchPos=function(p,g){for(var f=p.getBoundingClientRect(),x=[],P=0;P<g.length;P++)x.push(new u.Point(g[P].clientX-f.left-p.clientLeft,g[P].clientY-f.top-p.clientTop));return x},Y.mouseButton=function(p){return void 0!==u.window.InstallTrigger&&2===p.button&&p.ctrlKey&&u.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button},Y.remove=function(p){p.parentNode&&p.parentNode.removeChild(p)};var Be=function(p){function g(){p.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.isLoaded=function(){return this.loaded},g.prototype.setLoaded=function(f){if(this.loaded!==f&&(this.loaded=f,f)){for(var x=0,P=this.requestors;x<P.length;x+=1){var B=P[x];this._notify(B.ids,B.callback)}this.requestors=[]}},g.prototype.getImage=function(f){return this.images[f]},g.prototype.addImage=function(f,x){this._validate(f,x)&&(this.images[f]=x)},g.prototype._validate=function(f,x){var P=!0;return this._validateStretch(x.stretchX,x.data&&x.data.width)||(this.fire(new u.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchX" value'))),P=!1),this._validateStretch(x.stretchY,x.data&&x.data.height)||(this.fire(new u.ErrorEvent(new Error('Image "'+f+'" has invalid "stretchY" value'))),P=!1),this._validateContent(x.content,x)||(this.fire(new u.ErrorEvent(new Error('Image "'+f+'" has invalid "content" value'))),P=!1),P},g.prototype._validateStretch=function(f,x){if(!f)return!0;for(var P=0,B=0,V=f;B<V.length;B+=1){var ee=V[B];if(ee[0]<P||ee[1]<ee[0]||x<ee[1])return!1;P=ee[1]}return!0},g.prototype._validateContent=function(f,x){return!(f&&(4!==f.length||f[0]<0||x.data.width<f[0]||f[1]<0||x.data.height<f[1]||f[2]<0||x.data.width<f[2]||f[3]<0||x.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))},g.prototype.updateImage=function(f,x){x.version=this.images[f].version+1,this.images[f]=x,this.updatedImages[f]=!0},g.prototype.removeImage=function(f){var x=this.images[f];delete this.images[f],delete this.patterns[f],x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()},g.prototype.listImages=function(){return Object.keys(this.images)},g.prototype.getImages=function(f,x){var P=!0;if(!this.isLoaded())for(var B=0,V=f;B<V.length;B+=1)this.images[V[B]]||(P=!1);this.isLoaded()||P?this._notify(f,x):this.requestors.push({ids:f,callback:x})},g.prototype._notify=function(f,x){for(var P={},B=0,V=f;B<V.length;B+=1){var ee=V[B];this.images[ee]||this.fire(new u.Event("styleimagemissing",{id:ee}));var Ce=this.images[ee];Ce?P[ee]={data:Ce.data.clone(),pixelRatio:Ce.pixelRatio,sdf:Ce.sdf,version:Ce.version,stretchX:Ce.stretchX,stretchY:Ce.stretchY,content:Ce.content,hasRenderCallback:Boolean(Ce.userImage&&Ce.userImage.render)}:u.warnOnce('Image "'+ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}x(null,P)},g.prototype.getPixelSize=function(){var f=this.atlasImage;return{width:f.width,height:f.height}},g.prototype.getPattern=function(f){var x=this.patterns[f],P=this.getImage(f);if(!P)return null;if(x&&x.position.version===P.version)return x.position;if(x)x.position.version=P.version;else{var B={w:P.data.width+2,h:P.data.height+2,x:0,y:0},V=new u.ImagePosition(B,P);this.patterns[f]={bin:B,position:V}}return this._updatePatternAtlas(),this.patterns[f].position},g.prototype.bind=function(f){var x=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.Texture(f,this.atlasImage,x.RGBA),this.atlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE)},g.prototype._updatePatternAtlas=function(){var f=[];for(var x in this.patterns)f.push(this.patterns[x].bin);var P=u.potpack(f),B=P.w,V=P.h,ee=this.atlasImage;for(var Ce in ee.resize({width:B||1,height:V||1}),this.patterns){var Re=this.patterns[Ce].bin,I=Re.x+1,R=Re.y+1,S=this.images[Ce].data,U=S.width,$=S.height;u.RGBAImage.copy(S,ee,{x:0,y:0},{x:I,y:R},{width:U,height:$}),u.RGBAImage.copy(S,ee,{x:0,y:$-1},{x:I,y:R-1},{width:U,height:1}),u.RGBAImage.copy(S,ee,{x:0,y:0},{x:I,y:R+$},{width:U,height:1}),u.RGBAImage.copy(S,ee,{x:U-1,y:0},{x:I-1,y:R},{width:1,height:$}),u.RGBAImage.copy(S,ee,{x:0,y:0},{x:I+U,y:R},{width:1,height:$})}this.dirty=!0},g.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},g.prototype.dispatchRenderCallbacks=function(f){for(var x=0,P=f;x<P.length;x+=1){var B=P[x];if(!this.callbackDispatchedThisFrame[B]){this.callbackDispatchedThisFrame[B]=!0;var V=this.images[B];je(V)&&this.updateImage(B,V)}}},g}(u.Evented),Je=wt,gt=wt,lt=1e20;function wt(p,g,f,x,P,B){this.fontSize=p||24,this.buffer=void 0===g?3:g,this.cutoff=x||.25,this.fontFamily=P||"sans-serif",this.fontWeight=B||"normal",this.radius=f||8;var V=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=V,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.d=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Int16Array(V),this.middle=Math.round(V/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function dt(p,g,f,x,P,B,V){for(var ee=0;ee<g;ee++){for(var Ce=0;Ce<f;Ce++)x[Ce]=p[Ce*g+ee];for(ct(x,P,B,V,f),Ce=0;Ce<f;Ce++)p[Ce*g+ee]=P[Ce]}for(Ce=0;Ce<f;Ce++){for(ee=0;ee<g;ee++)x[ee]=p[Ce*g+ee];for(ct(x,P,B,V,g),ee=0;ee<g;ee++)p[Ce*g+ee]=Math.sqrt(P[ee])}}function ct(p,g,f,x,P){f[0]=0,x[0]=-lt,x[1]=+lt;for(var B=1,V=0;B<P;B++){for(var ee=(p[B]+B*B-(p[f[V]]+f[V]*f[V]))/(2*B-2*f[V]);ee<=x[V];)V--,ee=(p[B]+B*B-(p[f[V]]+f[V]*f[V]))/(2*B-2*f[V]);f[++V]=B,x[V]=ee,x[V+1]=+lt}for(B=0,V=0;B<P;B++){for(;x[V+1]<B;)V++;g[B]=(B-f[V])*(B-f[V])+p[f[V]]}}wt.prototype.draw=function(p){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(p,this.buffer,this.middle);for(var g=this.ctx.getImageData(0,0,this.size,this.size),f=new Uint8ClampedArray(this.size*this.size),x=0;x<this.size*this.size;x++){var P=g.data[4*x+3]/255;this.gridOuter[x]=1===P?0:0===P?lt:Math.pow(Math.max(0,.5-P),2),this.gridInner[x]=1===P?lt:0===P?0:Math.pow(Math.max(0,P-.5),2)}for(dt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),dt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),x=0;x<this.size*this.size;x++)f[x]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[x]-this.gridInner[x])/this.radius+this.cutoff))));return f},Je.default=gt;var at=function(p,g){this.requestManager=p,this.localIdeographFontFamily=g,this.entries={}};at.prototype.setURL=function(p){this.url=p},at.prototype.getGlyphs=function(p,g){var f=this,x=[];for(var P in p)for(var B=0,V=p[P];B<V.length;B+=1)x.push({stack:P,id:V[B]});u.asyncAll(x,function(ee,Ce){var Re=ee.stack,I=ee.id,R=f.entries[Re];R||(R=f.entries[Re]={glyphs:{},requests:{},ranges:{}});var S=R.glyphs[I];if(void 0===S){if(S=f._tinySDF(R,Re,I))return R.glyphs[I]=S,void Ce(null,{stack:Re,id:I,glyph:S});var U=Math.floor(I/256);if(256*U>65535)Ce(new Error("glyphs > 65535 not supported"));else if(R.ranges[U])Ce(null,{stack:Re,id:I,glyph:S});else{var $=R.requests[U];$||($=R.requests[U]=[],at.loadGlyphRange(Re,U,f.url,f.requestManager,function(ue,oe){if(oe){for(var Ne in oe)f._doesCharSupportLocalGlyph(+Ne)||(R.glyphs[+Ne]=oe[+Ne]);R.ranges[U]=!0}for(var st=0,Mt=$;st<Mt.length;st+=1)(0,Mt[st])(ue,oe);delete R.requests[U]})),$.push(function(ue,oe){ue?Ce(ue):oe&&Ce(null,{stack:Re,id:I,glyph:oe[I]||null})})}}else Ce(null,{stack:Re,id:I,glyph:S})},function(ee,Ce){if(ee)g(ee);else if(Ce){for(var Re={},I=0,R=Ce;I<R.length;I+=1){var S=R[I],U=S.stack,$=S.id,ue=S.glyph;(Re[U]||(Re[U]={}))[$]=ue&&{id:ue.id,bitmap:ue.bitmap.clone(),metrics:ue.metrics}}g(null,Re)}})},at.prototype._doesCharSupportLocalGlyph=function(p){return!!this.localIdeographFontFamily&&(u.isChar["CJK Unified Ideographs"](p)||u.isChar["Hangul Syllables"](p)||u.isChar.Hiragana(p)||u.isChar.Katakana(p))},at.prototype._tinySDF=function(p,g,f){var x=this.localIdeographFontFamily;if(x&&this._doesCharSupportLocalGlyph(f)){var P=p.tinySDF;if(!P){var B="400";/bold/i.test(g)?B="900":/medium/i.test(g)?B="500":/light/i.test(g)&&(B="200"),P=p.tinySDF=new at.TinySDF(24,3,8,.25,x,B)}return{id:f,bitmap:new u.AlphaImage({width:30,height:30},P.draw(String.fromCharCode(f))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},at.loadGlyphRange=function(p,g,f,x,P){var B=256*g,V=B+255,ee=x.transformRequest(x.normalizeGlyphsURL(f).replace("{fontstack}",p).replace("{range}",B+"-"+V),u.ResourceType.Glyphs);u.getArrayBuffer(ee,function(Ce,Re){if(Ce)P(Ce);else if(Re){for(var I={},R=0,S=u.parseGlyphPBF(Re);R<S.length;R+=1){var U=S[R];I[U.id]=U}P(null,I)}})},at.TinySDF=Je;var Qe=function(){this.specification=u.styleSpec.light.position};Qe.prototype.possiblyEvaluate=function(p,g){return u.sphericalToCartesian(p.expression.evaluate(g))},Qe.prototype.interpolate=function(p,g,f){return{x:u.number(p.x,g.x,f),y:u.number(p.y,g.y,f),z:u.number(p.z,g.z,f)}};var ht=new u.Properties({anchor:new u.DataConstantProperty(u.styleSpec.light.anchor),position:new Qe,color:new u.DataConstantProperty(u.styleSpec.light.color),intensity:new u.DataConstantProperty(u.styleSpec.light.intensity)}),Bt=function(p){function g(f){p.call(this),this._transitionable=new u.Transitionable(ht),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getLight=function(){return this._transitionable.serialize()},g.prototype.setLight=function(f,x){if(void 0===x&&(x={}),!this._validate(u.validateLight,f,x))for(var P in f){var B=f[P];u.endsWith(P,"-transition")?this._transitionable.setTransition(P.slice(0,-11),B):this._transitionable.setValue(P,B)}},g.prototype.updateTransitions=function(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)},g.prototype.hasTransition=function(){return this._transitioning.hasTransition()},g.prototype.recalculate=function(f){this.properties=this._transitioning.possiblyEvaluate(f)},g.prototype._validate=function(f,x,P){return(!P||!1!==P.validate)&&u.emitValidationErrors(this,f.call(u.validateStyle,u.extend({value:x,style:{glyphs:!0,sprite:!0},styleSpec:u.styleSpec})))},g}(u.Evented),Ft=function(p,g){this.width=p,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ft.prototype.getDash=function(p,g){var f=p.join(",")+String(g);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(p,g)),this.dashEntry[f]},Ft.prototype.getDashRanges=function(p,g,f){var x=[],P=p.length%2==1?-p[p.length-1]*f:0,B=p[0]*f,V=!0;x.push({left:P,right:B,isDash:V,zeroLength:0===p[0]});for(var ee=p[0],Ce=1;Ce<p.length;Ce++){var Re=p[Ce];x.push({left:P=ee*f,right:B=(ee+=Re)*f,isDash:V=!V,zeroLength:0===Re})}return x},Ft.prototype.addRoundDash=function(p,g,f){for(var x=g/2,P=-f;P<=f;P++)for(var B=this.width*(this.nextRow+f+P),V=0,ee=p[V],Ce=0;Ce<this.width;Ce++){Ce/ee.right>1&&(ee=p[++V]);var Re=Math.abs(Ce-ee.left),I=Math.abs(Ce-ee.right),R=Math.min(Re,I),S=void 0,U=P/f*(x+1);if(ee.isDash){var $=x-Math.abs(U);S=Math.sqrt(R*R+$*$)}else S=x-Math.sqrt(R*R+U*U);this.data[B+Ce]=Math.max(0,Math.min(255,S+128))}},Ft.prototype.addRegularDash=function(p){for(var g=p.length-1;g>=0;--g){var f=p[g],x=p[g+1];f.zeroLength?p.splice(g,1):x&&x.isDash===f.isDash&&(x.left=f.left,p.splice(g,1))}var P=p[0],B=p[p.length-1];P.isDash===B.isDash&&(P.left=B.left-this.width,B.right=P.right+this.width);for(var V=this.width*this.nextRow,ee=0,Ce=p[ee],Re=0;Re<this.width;Re++){Re/Ce.right>1&&(Ce=p[++ee]);var I=Math.abs(Re-Ce.left),R=Math.abs(Re-Ce.right),S=Math.min(I,R);this.data[V+Re]=Math.max(0,Math.min(255,(Ce.isDash?S:-S)+128))}},Ft.prototype.addDash=function(p,g){var f=g?7:0,x=2*f+1;if(this.nextRow+x>this.height)return u.warnOnce("LineAtlas out of space"),null;for(var P=0,B=0;B<p.length;B++)P+=p[B];if(0!==P){var V=this.width/P,ee=this.getDashRanges(p,this.width,V);g?this.addRoundDash(ee,V,f):this.addRegularDash(ee)}var Ce={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:P};return this.nextRow+=x,this.dirty=!0,Ce},Ft.prototype.bind=function(p){var g=p.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))};var kt=function p(g,f){this.workerPool=g,this.actors=[],this.currentActor=0,this.id=u.uniqueId();for(var x=this.workerPool.acquire(this.id),P=0;P<x.length;P++){var B=new p.Actor(x[P],f,this.id);B.name="Worker "+P,this.actors.push(B)}};function bn(p,g,f){var x=function(P,B){if(P)return f(P);if(B){var V=u.pick(u.extend(B,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(V.vectorLayers=B.vector_layers,V.vectorLayerIds=V.vectorLayers.map(function(ee){return ee.id})),V.tiles=g.canonicalizeTileset(V,p.url),f(null,V)}};return p.url?u.getJSON(g.transformRequest(g.normalizeSourceURL(p.url),u.ResourceType.Source),x):u.browser.frame(function(){return x(null,p)})}kt.prototype.broadcast=function(p,g,f){u.asyncAll(this.actors,function(x,P){x.send(p,g,P)},f=f||function(){})},kt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},kt.prototype.remove=function(){this.actors.forEach(function(p){p.remove()}),this.actors=[],this.workerPool.release(this.id)},kt.Actor=u.Actor;var Kt=function(p,g,f){this.bounds=u.LngLatBounds.convert(this.validateBounds(p)),this.minzoom=g||0,this.maxzoom=f||24};Kt.prototype.validateBounds=function(p){return Array.isArray(p)&&4===p.length?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]},Kt.prototype.contains=function(p){var g=Math.pow(2,p.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*g),x=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*g),P=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*g),B=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*g);return p.x>=f&&p.x<P&&p.y>=x&&p.y<B};var Zn=function(p){function g(f,x,P,B){if(p.call(this),this.id=f,this.dispatcher=P,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(x,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},x),this._collectResourceTiming=x.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(B)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=bn(this._options,this.map._requestManager,function(x,P){f._tileJSONRequest=null,f._loaded=!0,x?f.fire(new u.ErrorEvent(x)):P&&(u.extend(f,P),P.bounds&&(f.tileBounds=new Kt(P.bounds,f.minzoom,f.maxzoom)),u.postTurnstileEvent(P.tiles,f.map._requestManager._customAccessToken),u.postMapLoadEvent(P.tiles,f.map._getMapId(),f.map._requestManager._skuToken,f.map._requestManager._customAccessToken),f.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},g.prototype.onAdd=function(f){this.map=f,this.load()},g.prototype.setSourceProperty=function(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},g.prototype.setTiles=function(f){var x=this;return this.setSourceProperty(function(){x._options.tiles=f}),this},g.prototype.setUrl=function(f){var x=this;return this.setSourceProperty(function(){x.url=f,x._options.url=f}),this},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return u.extend({},this._options)},g.prototype.loadTile=function(f,x){var P=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),B={request:this.map._requestManager.transformRequest(P,u.ResourceType.Tile),uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function V(ee,Ce){return delete f.request,f.aborted?x(null):ee&&404!==ee.status?x(ee):(Ce&&Ce.resourceTiming&&(f.resourceTiming=Ce.resourceTiming),this.map._refreshExpiredTiles&&Ce&&f.setExpiryData(Ce),f.loadVectorData(Ce,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),x(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}B.request.collectResourceTiming=this._collectResourceTiming,f.actor&&"expired"!==f.state?"loading"===f.state?f.reloadCallback=x:f.request=f.actor.send("reloadTile",B,V.bind(this)):(f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",B,V.bind(this)))},g.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id},void 0)},g.prototype.unloadTile=function(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id},void 0)},g.prototype.hasTransition=function(){return!1},g}(u.Evented),wn=function(p){function g(f,x,P,B){p.call(this),this.id=f,this.dispatcher=P,this.setEventedParent(B),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},x),u.extend(this,u.pick(x,["url","scheme","tileSize"]))}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(){var f=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=bn(this._options,this.map._requestManager,function(x,P){f._tileJSONRequest=null,f._loaded=!0,x?f.fire(new u.ErrorEvent(x)):P&&(u.extend(f,P),P.bounds&&(f.tileBounds=new Kt(P.bounds,f.minzoom,f.maxzoom)),u.postTurnstileEvent(P.tiles),u.postMapLoadEvent(P.tiles,f.map._getMapId(),f.map._requestManager._skuToken),f.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),f.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},g.prototype.loaded=function(){return this._loaded},g.prototype.onAdd=function(f){this.map=f,this.load()},g.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},g.prototype.serialize=function(){return u.extend({},this._options)},g.prototype.hasTile=function(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)},g.prototype.loadTile=function(f,x){var P=this,B=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);f.request=u.getImage(this.map._requestManager.transformRequest(B,u.ResourceType.Tile),function(V,ee){if(delete f.request,f.aborted)f.state="unloaded",x(null);else if(V)f.state="errored",x(V);else if(ee){P.map._refreshExpiredTiles&&f.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;var Ce=P.map.painter.context,Re=Ce.gl;f.texture=P.map.painter.getTileTexture(ee.width),f.texture?f.texture.update(ee,{useMipmap:!0}):(f.texture=new u.Texture(Ce,ee,Re.RGBA,{useMipmap:!0}),f.texture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE,Re.LINEAR_MIPMAP_NEAREST),Ce.extTextureFilterAnisotropic&&Re.texParameterf(Re.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax)),f.state="loaded",u.cacheEntryPossiblyAdded(P.dispatcher),x(null)}})},g.prototype.abortTile=function(f,x){f.request&&(f.request.cancel(),delete f.request),x()},g.prototype.unloadTile=function(f,x){f.texture&&this.map.painter.saveTileTexture(f.texture),x()},g.prototype.hasTransition=function(){return!1},g}(u.Evented),Vr=function(p){function g(f,x,P,B){p.call(this,f,x,P,B),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},x),this.encoding=x.encoding||"mapbox"}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},g.prototype.loadTile=function(f,x){var P=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function B(V,ee){V&&(f.state="errored",x(V)),ee&&(f.dem=ee,f.needsHillshadePrepare=!0,f.state="loaded",x(null))}f.request=u.getImage(this.map._requestManager.transformRequest(P,u.ResourceType.Tile),function(V,ee){if(delete f.request,f.aborted)f.state="unloaded",x(null);else if(V)f.state="errored",x(V);else if(ee){this.map._refreshExpiredTiles&&f.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;var Ce=u.window.ImageBitmap&&ee instanceof u.window.ImageBitmap&&u.offscreenCanvasSupported()?ee:u.browser.getImageData(ee,1),Re={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:Ce,encoding:this.encoding};f.actor&&"expired"!==f.state||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",Re,B.bind(this)))}}.bind(this)),f.neighboringTiles=this._getNeighboringTiles(f.tileID)},g.prototype._getNeighboringTiles=function(f){var x=f.canonical,P=Math.pow(2,x.z),B=(x.x-1+P)%P,V=0===x.x?f.wrap-1:f.wrap,ee=(x.x+1+P)%P,Ce=x.x+1===P?f.wrap+1:f.wrap,Re={};return Re[new u.OverscaledTileID(f.overscaledZ,V,x.z,B,x.y).key]={backfilled:!1},Re[new u.OverscaledTileID(f.overscaledZ,Ce,x.z,ee,x.y).key]={backfilled:!1},x.y>0&&(Re[new u.OverscaledTileID(f.overscaledZ,V,x.z,B,x.y-1).key]={backfilled:!1},Re[new u.OverscaledTileID(f.overscaledZ,f.wrap,x.z,x.x,x.y-1).key]={backfilled:!1},Re[new u.OverscaledTileID(f.overscaledZ,Ce,x.z,ee,x.y-1).key]={backfilled:!1}),x.y+1<P&&(Re[new u.OverscaledTileID(f.overscaledZ,V,x.z,B,x.y+1).key]={backfilled:!1},Re[new u.OverscaledTileID(f.overscaledZ,f.wrap,x.z,x.x,x.y+1).key]={backfilled:!1},Re[new u.OverscaledTileID(f.overscaledZ,Ce,x.z,ee,x.y+1).key]={backfilled:!1}),Re},g.prototype.unloadTile=function(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded",f.actor&&f.actor.send("removeDEMTile",{uid:f.uid,source:this.id})},g}(wn),Hi=function(p){function g(f,x,P,B){p.call(this),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=P.getActor(),this.setEventedParent(B),this._data=x.data,this._options=u.extend({},x),this._collectResourceTiming=x.collectResourceTiming,this._resourceTiming=[],void 0!==x.maxzoom&&(this.maxzoom=x.maxzoom),x.type&&(this.type=x.type),x.attribution&&(this.attribution=x.attribution),this.promoteId=x.promoteId;var V=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:x.cluster||!1,geojsonVtOptions:{buffer:(void 0!==x.buffer?x.buffer:128)*V,tolerance:(void 0!==x.tolerance?x.tolerance:.375)*V,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:x.lineMetrics||!1,generateId:x.generateId||!1},superclusterOptions:{maxZoom:void 0!==x.clusterMaxZoom?Math.min(x.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,x.clusterMinPoints||2),extent:u.EXTENT,radius:(x.clusterRadius||50)*V,log:!1,generateId:x.generateId||!1},clusterProperties:x.clusterProperties,filter:x.filter},x.workerOptions)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(){var f=this;this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(x){if(x)f.fire(new u.ErrorEvent(x));else{var P={dataType:"source",sourceDataType:"metadata"};f._collectResourceTiming&&f._resourceTiming&&f._resourceTiming.length>0&&(P.resourceTiming=f._resourceTiming,f._resourceTiming=[]),f.fire(new u.Event("data",P))}})},g.prototype.onAdd=function(f){this.map=f,this.load()},g.prototype.setData=function(f){var x=this;return this._data=f,this.fire(new u.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(P){if(P)x.fire(new u.ErrorEvent(P));else{var B={dataType:"source",sourceDataType:"content"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(B.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new u.Event("data",B))}}),this},g.prototype.getClusterExpansionZoom=function(f,x){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},x),this},g.prototype.getClusterChildren=function(f,x){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},x),this},g.prototype.getClusterLeaves=function(f,x,P,B){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:x,offset:P},B),this},g.prototype._updateWorkerData=function(f){var x=this;this._loaded=!1;var P=u.extend({},this.workerOptions),B=this._data;"string"==typeof B?(P.request=this.map._requestManager.transformRequest(u.browser.resolveURL(B),u.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(B),this.actor.send(this.type+".loadData",P,function(V,ee){x._removed||ee&&ee.abandoned||(x._loaded=!0,ee&&ee.resourceTiming&&ee.resourceTiming[x.id]&&(x._resourceTiming=ee.resourceTiming[x.id].slice(0)),x.actor.send(x.type+".coalesce",{source:P.source},null),f(V))})},g.prototype.loaded=function(){return this._loaded},g.prototype.loadTile=function(f,x){var P=this,B=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(B,{type:this.type,uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(V,ee){return delete f.request,f.unloadVectorData(),f.aborted?x(null):V?x(V):(f.loadVectorData(ee,P.map.painter,"reloadTile"===B),x(null))})},g.prototype.abortTile=function(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0},g.prototype.unloadTile=function(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})},g.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},g.prototype.serialize=function(){return u.extend({},this._options,{type:this.type,data:this._data})},g.prototype.hasTransition=function(){return!1},g}(u.Evented),Vi=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Hr=function(p){function g(f,x,P,B){p.call(this),this.id=f,this.dispatcher=P,this.coordinates=x.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(B),this.options=x}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(f,x){var P=this;this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),function(B,V){P._loaded=!0,B?P.fire(new u.ErrorEvent(B)):V&&(P.image=V,f&&(P.coordinates=f),x&&x(),P._finishLoading())})},g.prototype.loaded=function(){return this._loaded},g.prototype.updateImage=function(f){var x=this;return this.image&&f.url?(this.options.url=f.url,this.load(f.coordinates,function(){x.texture=null}),this):this},g.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))},g.prototype.onAdd=function(f){this.map=f,this.load()},g.prototype.setCoordinates=function(f){var x=this;this.coordinates=f;var P=f.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(V){for(var ee=1/0,Ce=1/0,Re=-1/0,I=-1/0,R=0,S=V;R<S.length;R+=1){var U=S[R];ee=Math.min(ee,U.x),Ce=Math.min(Ce,U.y),Re=Math.max(Re,U.x),I=Math.max(I,U.y)}var $=Math.max(Re-ee,I-Ce),ue=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),oe=Math.pow(2,ue);return new u.CanonicalTileID(ue,Math.floor((ee+Re)/2*oe),Math.floor((Ce+I)/2*oe))}(P),this.minzoom=this.maxzoom=this.tileID.z;var B=P.map(function(V){return x.tileID.getTilePoint(V)._round()});return this._boundsArray=new u.StructArrayLayout4i8,this._boundsArray.emplaceBack(B[0].x,B[0].y,0,0),this._boundsArray.emplaceBack(B[1].x,B[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(B[3].x,B[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(B[2].x,B[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this},g.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var f=this.map.painter.context,x=f.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Vi.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new u.Texture(f,this.image,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE)),this.tiles){var B=this.tiles[P];"loaded"!==B.state&&(B.state="loaded",B.texture=this.texture)}}},g.prototype.loadTile=function(f,x){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},x(null)):(f.state="errored",x(null))},g.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return!1},g}(u.Evented),en=function(p){function g(f,x,P,B){p.call(this,f,x,P,B),this.roundZoom=!0,this.type="video",this.options=x}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(){var f=this;this._loaded=!1;var x=this.options;this.urls=[];for(var P=0,B=x.urls;P<B.length;P+=1)this.urls.push(this.map._requestManager.transformRequest(B[P],u.ResourceType.Source).url);u.getVideo(this.urls,function(V,ee){f._loaded=!0,V?f.fire(new u.ErrorEvent(V)):ee&&(f.video=ee,f.video.loop=!0,f.video.setAttribute("playsinline",""),f.video.addEventListener("playing",function(){f.map.triggerRepaint()}),f.map&&f.video.play(),f._finishLoading())})},g.prototype.pause=function(){this.video&&this.video.pause()},g.prototype.play=function(){this.video&&this.video.play()},g.prototype.seek=function(f){if(this.video){var x=this.video.seekable;f<x.start(0)||f>x.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+x.start(0)+" and "+x.end(0)+"-second mark."))):this.video.currentTime=f}},g.prototype.getVideo=function(){return this.video},g.prototype.onAdd=function(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},g.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var f=this.map.painter.context,x=f.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Vi.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE),x.texSubImage2D(x.TEXTURE_2D,0,0,0,x.RGBA,x.UNSIGNED_BYTE,this.video)):(this.texture=new u.Texture(f,this.video,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE)),this.tiles){var B=this.tiles[P];"loaded"!==B.state&&(B.state="loaded",B.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this.video&&!this.video.paused},g}(Hr),Ot=function(p){function g(f,x,P,B){p.call(this,f,x,P,B),x.coordinates?Array.isArray(x.coordinates)&&4===x.coordinates.length&&!x.coordinates.some(function(V){return!Array.isArray(V)||2!==V.length||V.some(function(ee){return"number"!=typeof ee})})||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+f,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+f,null,'missing required property "coordinates"'))),x.animate&&"boolean"!=typeof x.animate&&this.fire(new u.ErrorEvent(new u.ValidationError("sources."+f,null,'optional "animate" property must be a boolean value'))),x.canvas?"string"==typeof x.canvas||x.canvas instanceof u.window.HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError("sources."+f,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError("sources."+f,null,'missing required property "canvas"'))),this.options=x,this.animate=void 0===x.animate||x.animate}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof u.window.HTMLCanvasElement?this.options.canvas:u.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},g.prototype.getCanvas=function(){return this.canvas},g.prototype.onAdd=function(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()},g.prototype.onRemove=function(){this.pause()},g.prototype.prepare=function(){var f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var x=this.map.painter.context,P=x.gl;for(var B in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Vi.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new u.Texture(x,this.canvas,P.RGBA,{premultiply:!0}),this.tiles){var V=this.tiles[B];"loaded"!==V.state&&(V.state="loaded",V.texture=this.texture)}}},g.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},g.prototype.hasTransition=function(){return this._playing},g.prototype._hasInvalidDimensions=function(){for(var f=0,x=[this.canvas.width,this.canvas.height];f<x.length;f+=1){var P=x[f];if(isNaN(P)||P<=0)return!0}return!1},g}(Hr),Jt={vector:Zn,raster:wn,"raster-dem":Vr,geojson:Hi,video:en,image:Hr,canvas:Ot};function ln(p,g){var f=u.identity([]);return u.translate(f,f,[1,1,0]),u.scale(f,f,[.5*p.width,.5*p.height,1]),u.multiply(f,f,p.calculatePosMatrix(g.toUnwrapped()))}function fn(p,g,f,x,P,B){var V=function(ue,oe,Ne){if(ue)for(var st=0,Mt=ue;st<Mt.length;st+=1){var Lt=oe[Mt[st]];if(Lt&&Lt.source===Ne&&"fill-extrusion"===Lt.type)return!0}else for(var Rt in oe){var Xt=oe[Rt];if(Xt.source===Ne&&"fill-extrusion"===Xt.type)return!0}return!1}(P&&P.layers,g,p.id),ee=B.maxPitchScaleFactor(),Ce=p.tilesIn(x,ee,V);Ce.sort(qt);for(var Re=[],I=0,R=Ce;I<R.length;I+=1){var S=R[I];Re.push({wrappedTileID:S.tileID.wrapped().key,queryResults:S.tile.queryRenderedFeatures(g,f,p._state,S.queryGeometry,S.cameraQueryGeometry,S.scale,P,B,ee,ln(p.transform,S.tileID))})}var U=function(ue){for(var oe={},Ne={},st=0,Mt=ue;st<Mt.length;st+=1){var Lt=Mt[st],Rt=Lt.queryResults,Xt=Lt.wrappedTileID,yn=Ne[Xt]=Ne[Xt]||{};for(var zn in Rt)for(var Rn=Rt[zn],qn=yn[zn]=yn[zn]||{},Mi=oe[zn]=oe[zn]||[],Si=0,Ei=Rn;Si<Ei.length;Si+=1){var Lr=Ei[Si];qn[Lr.featureIndex]||(qn[Lr.featureIndex]=!0,Mi.push(Lr))}}return oe}(Re);for(var $ in U)U[$].forEach(function(ue){var oe=ue.feature,Ne=p.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=Ne});return U}function qt(p,g){var f=p.tileID,x=g.tileID;return f.overscaledZ-x.overscaledZ||f.canonical.y-x.canonical.y||f.wrap-x.wrap||f.canonical.x-x.canonical.x}var On=function(p,g){this.max=p,this.onRemove=g,this.reset()};On.prototype.reset=function(){for(var p in this.data)for(var g=0,f=this.data[p];g<f.length;g+=1){var x=f[g];x.timeout&&clearTimeout(x.timeout),this.onRemove(x.value)}return this.data={},this.order=[],this},On.prototype.add=function(p,g,f){var x=this,P=p.wrapped().key;void 0===this.data[P]&&(this.data[P]=[]);var B={value:g,timeout:void 0};if(void 0!==f&&(B.timeout=setTimeout(function(){x.remove(p,B)},f)),this.data[P].push(B),this.order.push(P),this.order.length>this.max){var V=this._getAndRemoveByKey(this.order[0]);V&&this.onRemove(V)}return this},On.prototype.has=function(p){return p.wrapped().key in this.data},On.prototype.getAndRemove=function(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null},On.prototype._getAndRemoveByKey=function(p){var g=this.data[p].shift();return g.timeout&&clearTimeout(g.timeout),0===this.data[p].length&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),g.value},On.prototype.getByKey=function(p){var g=this.data[p];return g?g[0].value:null},On.prototype.get=function(p){return this.has(p)?this.data[p.wrapped().key][0].value:null},On.prototype.remove=function(p,g){if(!this.has(p))return this;var f=p.wrapped().key,x=void 0===g?0:this.data[f].indexOf(g),P=this.data[f][x];return this.data[f].splice(x,1),P.timeout&&clearTimeout(P.timeout),0===this.data[f].length&&delete this.data[f],this.onRemove(P.value),this.order.splice(this.order.indexOf(f),1),this},On.prototype.setMaxSize=function(p){for(this.max=p;this.order.length>this.max;){var g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this},On.prototype.filter=function(p){var g=[];for(var f in this.data)for(var x=0,P=this.data[f];x<P.length;x+=1){var B=P[x];p(B.value)||g.push(B)}for(var V=0,ee=g;V<ee.length;V+=1){var Ce=ee[V];this.remove(Ce.value.tileID,Ce)}};var Nn=function(p,g,f){this.context=p;var x=p.gl;this.buffer=x.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};Nn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Nn.prototype.updateData=function(p){var g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)},Nn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ui={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Yn=function(p,g,f,x){this.length=g.length,this.attributes=f,this.itemSize=g.bytesPerElement,this.dynamicDraw=x,this.context=p;var P=p.gl;this.buffer=P.createBuffer(),p.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer};Yn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Yn.prototype.updateData=function(p){var g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,p.arrayBuffer)},Yn.prototype.enableAttributes=function(p,g){for(var f=0;f<this.attributes.length;f++){var x=g.attributes[this.attributes[f].name];void 0!==x&&p.enableVertexAttribArray(x)}},Yn.prototype.setVertexAttribPointers=function(p,g,f){for(var x=0;x<this.attributes.length;x++){var P=this.attributes[x],B=g.attributes[P.name];void 0!==B&&p.vertexAttribPointer(B,P.components,p[Ui[P.type]],!1,this.itemSize,P.offset+this.itemSize*(f||0))}},Yn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Gn=function(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Gn.prototype.get=function(){return this.current},Gn.prototype.set=function(p){},Gn.prototype.getDefault=function(){return this.default},Gn.prototype.setDefault=function(){this.set(this.default)};var Xn=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return u.Color.transparent},g.prototype.set=function(f){var x=this.current;(f.r!==x.r||f.g!==x.g||f.b!==x.b||f.a!==x.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},g}(Gn),mi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return 1},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)},g}(Gn),pi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return 0},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)},g}(Gn),Mn=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return[!0,!0,!0,!0]},g.prototype.set=function(f){var x=this.current;(f[0]!==x[0]||f[1]!==x[1]||f[2]!==x[2]||f[3]!==x[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},g}(Gn),Pn=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!0},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)},g}(Gn),mn=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return 255},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)},g}(Gn),kn=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},g.prototype.set=function(f){var x=this.current;(f.func!==x.func||f.ref!==x.ref||f.mask!==x.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)},g}(Gn),ii=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){var f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]},g.prototype.set=function(f){var x=this.current;(f[0]!==x[0]||f[1]!==x[1]||f[2]!==x[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)},g}(Gn),$n=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;f?x.enable(x.STENCIL_TEST):x.disable(x.STENCIL_TEST),this.current=f,this.dirty=!1}},g}(Gn),mr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return[0,1]},g.prototype.set=function(f){var x=this.current;(f[0]!==x[0]||f[1]!==x[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)},g}(Gn),gr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;f?x.enable(x.DEPTH_TEST):x.disable(x.DEPTH_TEST),this.current=f,this.dirty=!1}},g}(Gn),Mo=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.LESS},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)},g}(Gn),qi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;f?x.enable(x.BLEND):x.disable(x.BLEND),this.current=f,this.dirty=!1}},g}(Gn),j=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){var f=this.gl;return[f.ONE,f.ZERO]},g.prototype.set=function(f){var x=this.current;(f[0]!==x[0]||f[1]!==x[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)},g}(Gn),Fe=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return u.Color.transparent},g.prototype.set=function(f){var x=this.current;(f.r!==x.r||f.g!==x.g||f.b!==x.b||f.a!==x.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)},g}(Gn),Yt=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.FUNC_ADD},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)},g}(Gn),ut=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;f?x.enable(x.CULL_FACE):x.disable(x.CULL_FACE),this.current=f,this.dirty=!1}},g}(Gn),It=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.BACK},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)},g}(Gn),rt=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.CCW},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)},g}(Gn),Vt=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)},g}(Gn),di=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return this.gl.TEXTURE0},g.prototype.set=function(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)},g}(Gn),hi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){var f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]},g.prototype.set=function(f){var x=this.current;(f[0]!==x[0]||f[1]!==x[1]||f[2]!==x[2]||f[3]!==x[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)},g}(Gn),bi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,f),this.current=f,this.dirty=!1}},g}(Gn),_r=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.bindRenderbuffer(x.RENDERBUFFER,f),this.current=f,this.dirty=!1}},g}(Gn),pr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.bindTexture(x.TEXTURE_2D,f),this.current=f,this.dirty=!1}},g}(Gn),bo=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.bindBuffer(x.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}},g}(Gn),Yi=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){var x=this.gl;x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1},g}(Gn),wr=function(p){function g(f){p.call(this,f),this.vao=f.extVertexArrayObject}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g.prototype.set=function(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)},g}(Gn),Gr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return 4},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}},g}(Gn),ao=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}},g}(Gn),Zr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return!1},g.prototype.set=function(f){if(f!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}},g}(Gn),Qt=function(p){function g(f,x){p.call(this,f),this.context=f,this.parent=x}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getDefault=function(){return null},g}(Gn),K=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.setDirty=function(){this.dirty=!0},g.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var x=this.gl;x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}},g}(Qt),se=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.set=function(f){if(f!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var x=this.gl;x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,f),this.current=f,this.dirty=!1}},g}(Qt),he=function(p,g,f,x){this.context=p,this.width=g,this.height=f;var P=this.framebuffer=p.gl.createFramebuffer();this.colorAttachment=new K(p,P),x&&(this.depthAttachment=new se(p,P))};he.prototype.destroy=function(){var p=this.context.gl,g=this.colorAttachment.get();if(g&&p.deleteTexture(g),this.depthAttachment){var f=this.depthAttachment.get();f&&p.deleteRenderbuffer(f)}p.deleteFramebuffer(this.framebuffer)};var re=function(p,g,f){this.func=p,this.mask=g,this.range=f};re.ReadOnly=!1,re.ReadWrite=!0,re.disabled=new re(519,re.ReadOnly,[0,1]);var _e=function(p,g,f,x,P,B){this.test=p,this.ref=g,this.mask=f,this.fail=x,this.depthFail=P,this.pass=B};_e.disabled=new _e({func:519,mask:0},0,0,7680,7680,7680);var Le=function(p,g,f){this.blendFunction=p,this.blendColor=g,this.mask=f};Le.disabled=new Le(Le.Replace=[1,0],u.Color.transparent,[!1,!1,!1,!1]),Le.unblended=new Le(Le.Replace,u.Color.transparent,[!0,!0,!0,!0]),Le.alphaBlended=new Le([1,771],u.Color.transparent,[!0,!0,!0,!0]);var Ze=function(p,g,f){this.enable=p,this.mode=g,this.frontFace=f};Ze.disabled=new Ze(!1,1029,2305),Ze.backCCW=new Ze(!0,1029,2305);var Pe=function(p){this.gl=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Xn(this),this.clearDepth=new mi(this),this.clearStencil=new pi(this),this.colorMask=new Mn(this),this.depthMask=new Pn(this),this.stencilMask=new mn(this),this.stencilFunc=new kn(this),this.stencilOp=new ii(this),this.stencilTest=new $n(this),this.depthRange=new mr(this),this.depthTest=new gr(this),this.depthFunc=new Mo(this),this.blend=new qi(this),this.blendFunc=new j(this),this.blendColor=new Fe(this),this.blendEquation=new Yt(this),this.cullFace=new ut(this),this.cullFaceSide=new It(this),this.frontFace=new rt(this),this.program=new Vt(this),this.activeTexture=new di(this),this.viewport=new hi(this),this.bindFramebuffer=new bi(this),this.bindRenderbuffer=new _r(this),this.bindTexture=new pr(this),this.bindVertexBuffer=new bo(this),this.bindElementBuffer=new Yi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new wr(this),this.pixelStoreUnpack=new Gr(this),this.pixelStoreUnpackPremultiplyAlpha=new ao(this),this.pixelStoreUnpackFlipY=new Zr(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=p.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(p.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=p.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=p.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE)};Pe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Pe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Pe.prototype.createIndexBuffer=function(p,g){return new Nn(this,p,g)},Pe.prototype.createVertexBuffer=function(p,g,f){return new Yn(this,p,g,f)},Pe.prototype.createRenderbuffer=function(p,g,f){var x=this.gl,P=x.createRenderbuffer();return this.bindRenderbuffer.set(P),x.renderbufferStorage(x.RENDERBUFFER,p,g,f),this.bindRenderbuffer.set(null),P},Pe.prototype.createFramebuffer=function(p,g,f){return new he(this,p,g,f)},Pe.prototype.clear=function(p){var g=p.color,f=p.depth,x=this.gl,P=0;g&&(P|=x.COLOR_BUFFER_BIT,this.clearColor.set(g),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(P|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),x.clear(P)},Pe.prototype.setCullFace=function(p){!1===p.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))},Pe.prototype.setDepthMode=function(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)},Pe.prototype.setStencilMode=function(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)},Pe.prototype.setColorMode=function(p){u.deepEqual(p.blendFunction,Le.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)},Pe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(p){function g(f,x,P){var B=this;p.call(this),this.id=f,this.dispatcher=P,this.on("data",function(V){"source"===V.dataType&&"metadata"===V.sourceDataType&&(B._sourceLoaded=!0),B._sourceLoaded&&!B._paused&&"source"===V.dataType&&"content"===V.sourceDataType&&(B.reload(),B.transform&&B.update(B.transform))}),this.on("error",function(){B._sourceErrored=!0}),this._source=function(V,ee,Ce,Re){var I=new Jt[ee.type](V,ee,Ce,Re);if(I.id!==V)throw new Error("Expected Source id to be "+V+" instead of "+I.id);return u.bindAll(["load","abort","unload","serialize","prepare"],I),I}(f,x,P,this),this._tiles={},this._cache=new On(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new u.SourceFeatureState}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.onAdd=function(f){this.map=f,this._maxTileCacheSize=f?f._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(f)},g.prototype.onRemove=function(f){this._source&&this._source.onRemove&&this._source.onRemove(f)},g.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var f in this._tiles){var x=this._tiles[f];if("loaded"!==x.state&&"errored"!==x.state)return!1}return!0},g.prototype.getSource=function(){return this._source},g.prototype.pause=function(){this._paused=!0},g.prototype.resume=function(){if(this._paused){var f=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,f&&this.reload(),this.transform&&this.update(this.transform)}},g.prototype._loadTile=function(f,x){return this._source.loadTile(f,x)},g.prototype._unloadTile=function(f){if(this._source.unloadTile)return this._source.unloadTile(f,function(){})},g.prototype._abortTile=function(f){if(this._source.abortTile)return this._source.abortTile(f,function(){})},g.prototype.serialize=function(){return this._source.serialize()},g.prototype.prepare=function(f){for(var x in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var P=this._tiles[x];P.upload(f),P.prepare(this.map.style.imageManager)}},g.prototype.getIds=function(){return u.values(this._tiles).map(function(f){return f.tileID}).sort(Nt).map(function(f){return f.key})},g.prototype.getRenderableIds=function(f){var x=this,P=[];for(var B in this._tiles)this._isIdRenderable(B,f)&&P.push(this._tiles[B]);return f?P.sort(function(V,ee){var Ce=V.tileID,Re=ee.tileID,I=new u.Point(Ce.canonical.x,Ce.canonical.y)._rotate(x.transform.angle),R=new u.Point(Re.canonical.x,Re.canonical.y)._rotate(x.transform.angle);return Ce.overscaledZ-Re.overscaledZ||R.y-I.y||R.x-I.x}).map(function(V){return V.tileID.key}):P.map(function(V){return V.tileID}).sort(Nt).map(function(V){return V.key})},g.prototype.hasRenderableParent=function(f){var x=this.findLoadedParent(f,0);return!!x&&this._isIdRenderable(x.tileID.key)},g.prototype._isIdRenderable=function(f,x){return this._tiles[f]&&this._tiles[f].hasData()&&!this._coveredTiles[f]&&(x||!this._tiles[f].holdingForFade())},g.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var f in this._cache.reset(),this._tiles)"errored"!==this._tiles[f].state&&this._reloadTile(f,"reloading")},g.prototype._reloadTile=function(f,x){var P=this._tiles[f];P&&("loading"!==P.state&&(P.state=x),this._loadTile(P,this._tileLoaded.bind(this,P,f,x)))},g.prototype._tileLoaded=function(f,x,P,B){if(B)return f.state="errored",void(404!==B.status?this._source.fire(new u.ErrorEvent(B,{tile:f})):this.update(this.transform));f.timeAdded=u.browser.now(),"expired"===P&&(f.refreshedUponExpiration=!0),this._setTileReloadTimer(x,f),"raster-dem"===this.getSource().type&&f.dem&&this._backfillDEM(f),this._state.initializeTileState(f,this.map?this.map.painter:null),this._source.fire(new u.Event("data",{dataType:"source",tile:f,coord:f.tileID}))},g.prototype._backfillDEM=function(f){for(var x=this.getRenderableIds(),P=0;P<x.length;P++){var B=x[P];if(f.neighboringTiles&&f.neighboringTiles[B]){var V=this.getTileByID(B);ee(f,V),ee(V,f)}}function ee(Ce,Re){Ce.needsHillshadePrepare=!0;var I=Re.tileID.canonical.x-Ce.tileID.canonical.x,R=Re.tileID.canonical.y-Ce.tileID.canonical.y,S=Math.pow(2,Ce.tileID.canonical.z),U=Re.tileID.key;0===I&&0===R||Math.abs(R)>1||(Math.abs(I)>1&&(1===Math.abs(I+S)?I+=S:1===Math.abs(I-S)&&(I-=S)),Re.dem&&Ce.dem&&(Ce.dem.backfillBorder(Re.dem,I,R),Ce.neighboringTiles&&Ce.neighboringTiles[U]&&(Ce.neighboringTiles[U].backfilled=!0)))}},g.prototype.getTile=function(f){return this.getTileByID(f.key)},g.prototype.getTileByID=function(f){return this._tiles[f]},g.prototype._retainLoadedChildren=function(f,x,P,B){for(var V in this._tiles){var ee=this._tiles[V];if(!(B[V]||!ee.hasData()||ee.tileID.overscaledZ<=x||ee.tileID.overscaledZ>P)){for(var Ce=ee.tileID;ee&&ee.tileID.overscaledZ>x+1;){var Re=ee.tileID.scaledTo(ee.tileID.overscaledZ-1);(ee=this._tiles[Re.key])&&ee.hasData()&&(Ce=Re)}for(var I=Ce;I.overscaledZ>x;)if(f[(I=I.scaledTo(I.overscaledZ-1)).key]){B[Ce.key]=Ce;break}}}},g.prototype.findLoadedParent=function(f,x){if(f.key in this._loadedParentTiles){var P=this._loadedParentTiles[f.key];return P&&P.tileID.overscaledZ>=x?P:null}for(var B=f.overscaledZ-1;B>=x;B--){var V=f.scaledTo(B),ee=this._getLoadedTile(V);if(ee)return ee}},g.prototype._getLoadedTile=function(f){var x=this._tiles[f.key];return x&&x.hasData()?x:this._cache.getByKey(f.wrapped().key)},g.prototype.updateCacheSize=function(f){var x=Math.ceil(f.width/this._source.tileSize)+1,P=Math.ceil(f.height/this._source.tileSize)+1,B=Math.floor(x*P*5),V="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,B):B;this._cache.setMaxSize(V)},g.prototype.handleWrapJump=function(f){var x=Math.round((f-(void 0===this._prevLng?f:this._prevLng))/360);if(this._prevLng=f,x){var P={};for(var B in this._tiles){var V=this._tiles[B];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+x),P[V.tileID.key]=V}for(var ee in this._tiles=P,this._timers)clearTimeout(this._timers[ee]),delete this._timers[ee];for(var Ce in this._tiles)this._setTileReloadTimer(Ce,this._tiles[Ce])}},g.prototype.update=function(f){var x=this;if(this.transform=f,this._sourceLoaded&&!this._paused){var P;this.updateCacheSize(f),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?P=f.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(yn){return new u.OverscaledTileID(yn.canonical.z,yn.wrap,yn.canonical.z,yn.canonical.x,yn.canonical.y)}):(P=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(P=P.filter(function(yn){return x._source.hasTile(yn)}))):P=[];var B=f.coveringZoomLevel(this._source),V=Math.max(B-g.maxOverzooming,this._source.minzoom),ee=Math.max(B+g.maxUnderzooming,this._source.minzoom),Ce=this._updateRetainedTiles(P,B);if(rn(this._source.type)){for(var Re={},I={},R=0,S=Object.keys(Ce);R<S.length;R+=1){var U=S[R],$=Ce[U],ue=this._tiles[U];if(ue&&!(ue.fadeEndTime&&ue.fadeEndTime<=u.browser.now())){var oe=this.findLoadedParent($,V);oe&&(this._addTile(oe.tileID),Re[oe.tileID.key]=oe.tileID),I[U]=$}}for(var Ne in this._retainLoadedChildren(I,B,ee,Ce),Re)Ce[Ne]||(this._coveredTiles[Ne]=!0,Ce[Ne]=Re[Ne])}for(var st in Ce)this._tiles[st].clearFadeHold();for(var Mt=0,Lt=u.keysDifference(this._tiles,Ce);Mt<Lt.length;Mt+=1){var Rt=Lt[Mt],Xt=this._tiles[Rt];Xt.hasSymbolBuckets&&!Xt.holdingForFade()?Xt.setHoldDuration(this.map._fadeDuration):Xt.hasSymbolBuckets&&!Xt.symbolFadeFinished()||this._removeTile(Rt)}this._updateLoadedParentTileCache()}},g.prototype.releaseSymbolFadeTiles=function(){for(var f in this._tiles)this._tiles[f].holdingForFade()&&this._removeTile(f)},g.prototype._updateRetainedTiles=function(f,x){for(var P={},B={},V=Math.max(x-g.maxOverzooming,this._source.minzoom),ee=Math.max(x+g.maxUnderzooming,this._source.minzoom),Ce={},Re=0,I=f;Re<I.length;Re+=1){var R=I[Re],S=this._addTile(R);P[R.key]=R,S.hasData()||x<this._source.maxzoom&&(Ce[R.key]=R)}this._retainLoadedChildren(Ce,x,ee,P);for(var U=0,$=f;U<$.length;U+=1){var ue=$[U],oe=this._tiles[ue.key];if(!oe.hasData()){if(x+1>this._source.maxzoom){var Ne=ue.children(this._source.maxzoom)[0],st=this.getTile(Ne);if(st&&st.hasData()){P[Ne.key]=Ne;continue}}else{var Mt=ue.children(this._source.maxzoom);if(P[Mt[0].key]&&P[Mt[1].key]&&P[Mt[2].key]&&P[Mt[3].key])continue}for(var Lt=oe.wasRequested(),Rt=ue.overscaledZ-1;Rt>=V;--Rt){var Xt=ue.scaledTo(Rt);if(B[Xt.key]||(B[Xt.key]=!0,!(oe=this.getTile(Xt))&&Lt&&(oe=this._addTile(Xt)),oe&&(P[Xt.key]=Xt,Lt=oe.wasRequested(),oe.hasData())))break}}}return P},g.prototype._updateLoadedParentTileCache=function(){for(var f in this._loadedParentTiles={},this._tiles){for(var x=[],P=void 0,B=this._tiles[f].tileID;B.overscaledZ>0;){if(B.key in this._loadedParentTiles){P=this._loadedParentTiles[B.key];break}x.push(B.key);var V=B.scaledTo(B.overscaledZ-1);if(P=this._getLoadedTile(V))break;B=V}for(var ee=0,Ce=x;ee<Ce.length;ee+=1)this._loadedParentTiles[Ce[ee]]=P}},g.prototype._addTile=function(f){var x=this._tiles[f.key];if(x)return x;(x=this._cache.getAndRemove(f))&&(this._setTileReloadTimer(f.key,x),x.tileID=f,this._state.initializeTileState(x,this.map?this.map.painter:null),this._cacheTimers[f.key]&&(clearTimeout(this._cacheTimers[f.key]),delete this._cacheTimers[f.key],this._setTileReloadTimer(f.key,x)));var P=Boolean(x);return P||(x=new u.Tile(f,this._source.tileSize*f.overscaleFactor()),this._loadTile(x,this._tileLoaded.bind(this,x,f.key,x.state))),x?(x.uses++,this._tiles[f.key]=x,P||this._source.fire(new u.Event("dataloading",{tile:x,coord:x.tileID,dataType:"source"})),x):null},g.prototype._setTileReloadTimer=function(f,x){var P=this;f in this._timers&&(clearTimeout(this._timers[f]),delete this._timers[f]);var B=x.getExpiryTimeout();B&&(this._timers[f]=setTimeout(function(){P._reloadTile(f,"expired"),delete P._timers[f]},B))},g.prototype._removeTile=function(f){var x=this._tiles[f];x&&(x.uses--,delete this._tiles[f],this._timers[f]&&(clearTimeout(this._timers[f]),delete this._timers[f]),x.uses>0||(x.hasData()&&"reloading"!==x.state?this._cache.add(x.tileID,x,x.getExpiryTimeout()):(x.aborted=!0,this._abortTile(x),this._unloadTile(x))))},g.prototype.clearTiles=function(){for(var f in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(f);this._cache.reset()},g.prototype.tilesIn=function(f,x,P){var B=this,V=[],ee=this.transform;if(!ee)return V;for(var Ce=P?ee.getCameraQueryGeometry(f):f,Re=f.map(function(Rt){return ee.pointCoordinate(Rt)}),I=Ce.map(function(Rt){return ee.pointCoordinate(Rt)}),R=this.getIds(),S=1/0,U=1/0,$=-1/0,ue=-1/0,oe=0,Ne=I;oe<Ne.length;oe+=1){var st=Ne[oe];S=Math.min(S,st.x),U=Math.min(U,st.y),$=Math.max($,st.x),ue=Math.max(ue,st.y)}for(var Mt=function(Rt){var Xt=B._tiles[R[Rt]];if(!Xt.holdingForFade()){var yn=Xt.tileID,zn=Math.pow(2,ee.zoom-Xt.tileID.overscaledZ),Rn=x*Xt.queryPadding*u.EXTENT/Xt.tileSize/zn,qn=[yn.getTilePoint(new u.MercatorCoordinate(S,U)),yn.getTilePoint(new u.MercatorCoordinate($,ue))];if(qn[0].x-Rn<u.EXTENT&&qn[0].y-Rn<u.EXTENT&&qn[1].x+Rn>=0&&qn[1].y+Rn>=0){var Mi=Re.map(function(Ei){return yn.getTilePoint(Ei)}),Si=I.map(function(Ei){return yn.getTilePoint(Ei)});V.push({tile:Xt,tileID:yn,queryGeometry:Mi,cameraQueryGeometry:Si,scale:zn})}}},Lt=0;Lt<R.length;Lt++)Mt(Lt);return V},g.prototype.getVisibleCoordinates=function(f){for(var x=this,P=this.getRenderableIds(f).map(function(Ce){return x._tiles[Ce].tileID}),B=0,V=P;B<V.length;B+=1){var ee=V[B];ee.posMatrix=this.transform.calculatePosMatrix(ee.toUnwrapped())}return P},g.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(rn(this._source.type))for(var f in this._tiles){var x=this._tiles[f];if(void 0!==x.fadeEndTime&&x.fadeEndTime>=u.browser.now())return!0}return!1},g.prototype.setFeatureState=function(f,x,P){this._state.updateState(f=f||"_geojsonTileLayer",x,P)},g.prototype.removeFeatureState=function(f,x,P){this._state.removeFeatureState(f=f||"_geojsonTileLayer",x,P)},g.prototype.getFeatureState=function(f,x){return this._state.getState(f=f||"_geojsonTileLayer",x)},g.prototype.setDependencies=function(f,x,P){var B=this._tiles[f];B&&B.setDependencies(x,P)},g.prototype.reloadTilesForDependencies=function(f,x){for(var P in this._tiles)this._tiles[P].hasDependency(f,x)&&this._reloadTile(P,"reloading");this._cache.filter(function(B){return!B.hasDependency(f,x)})},g}(u.Evented);function Nt(p,g){var f=Math.abs(2*p.wrap)-+(p.wrap<0),x=Math.abs(2*g.wrap)-+(g.wrap<0);return p.overscaledZ-g.overscaledZ||x-f||g.canonical.y-p.canonical.y||g.canonical.x-p.canonical.x}function rn(p){return"raster"===p||"image"===p||"video"===p}function dn(){return new u.window.Worker(Kr.workerUrl)}ot.maxOverzooming=10,ot.maxUnderzooming=3;var et="mapboxgl_preloaded_worker_pool",tt=function(){this.active={}};tt.prototype.acquire=function(p){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new dn);return this.active[p]=!0,this.workers.slice()},tt.prototype.release=function(p){delete this.active[p],0===this.numActive()&&(this.workers.forEach(function(g){g.terminate()}),this.workers=null)},tt.prototype.isPreloaded=function(){return!!this.active[et]},tt.prototype.numActive=function(){return Object.keys(this.active).length};var Ye,bt=Math.floor(u.browser.hardwareConcurrency/2);function mt(){return Ye||(Ye=new tt),Ye}function cn(p,g){var f={};for(var x in p)"ref"!==x&&(f[x]=p[x]);return u.refProperties.forEach(function(P){P in g&&(f[P]=g[P])}),f}function xn(p){p=p.slice();for(var g=Object.create(null),f=0;f<p.length;f++)g[p[f].id]=p[f];for(var x=0;x<p.length;x++)"ref"in p[x]&&(p[x]=cn(p[x],g[p[x].ref]));return p}tt.workerCount=Math.max(Math.min(bt,6),1);var In={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ai(p,g,f){f.push({command:In.addSource,args:[p,g[p]]})}function Bn(p,g,f){g.push({command:In.removeSource,args:[p]}),f[p]=!0}function Ni(p,g,f,x){Bn(p,f,x),ai(p,g,f)}function ur(p,g,f){var x;for(x in p[f])if(p[f].hasOwnProperty(x)&&"data"!==x&&!u.deepEqual(p[f][x],g[f][x]))return!1;for(x in g[f])if(g[f].hasOwnProperty(x)&&"data"!==x&&!u.deepEqual(p[f][x],g[f][x]))return!1;return!0}function Gi(p,g,f,x,P,B){var V;for(V in g=g||{},p=p||{})p.hasOwnProperty(V)&&(u.deepEqual(p[V],g[V])||f.push({command:B,args:[x,V,g[V],P]}));for(V in g)g.hasOwnProperty(V)&&!p.hasOwnProperty(V)&&(u.deepEqual(p[V],g[V])||f.push({command:B,args:[x,V,g[V],P]}))}function cr(p){return p.id}function Wi(p,g){return p[g.id]=g,p}var xo=function(p,g){this.reset(p,g)};xo.prototype.reset=function(p,g){this.points=p||[],this._distances=[0];for(var f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding},xo.prototype.lerp=function(p){if(1===this.points.length)return this.points[0];p=u.clamp(p,0,1);for(var g=1,f=this._distances[g],x=p*this.paddedLength+this.padding;f<x&&g<this._distances.length;)f=this._distances[++g];var P=g-1,B=this._distances[P],V=f-B,ee=V>0?(x-B)/V:0;return this.points[P].mult(1-ee).add(this.points[g].mult(ee))};var At=function(p,g,f){var x=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(p/f),this.yCellCount=Math.ceil(g/f);for(var B=0;B<this.xCellCount*this.yCellCount;B++)x.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=g,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0};function Ae(p,g,f,x,P){var B=u.create();return g?(u.scale(B,B,[1/P,1/P,1]),f||u.rotateZ(B,B,x.angle)):u.multiply(B,x.labelPlaneMatrix,p),B}function Te(p,g,f,x,P){if(g){var B=u.clone(p);return u.scale(B,B,[P,P,1]),f||u.rotateZ(B,B,-x.angle),B}return x.glCoordMatrix}function Xe(p,g){var f=[p.x,p.y,0,1];Pi(f,f,g);var x=f[3];return{point:new u.Point(f[0]/x,f[1]/x),signedDistanceFromCamera:x}}function Ct(p,g){return.5+p/g*.5}function St(p,g){var f=p[0]/p[3],x=p[1]/p[3];return f>=-g[0]&&f<=g[0]&&x>=-g[1]&&x<=g[1]}function Tn(p,g,f,x,P,B,V,ee){var Ce=x?p.textSizeData:p.iconSizeData,Re=u.evaluateSizeForZoom(Ce,f.transform.zoom),I=[256/f.width*2+1,256/f.height*2+1],R=x?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;R.clear();for(var S=p.lineVertexArray,U=x?p.text.placedSymbolArray:p.icon.placedSymbolArray,$=f.transform.width/f.transform.height,ue=!1,oe=0;oe<U.length;oe++){var Ne=U.get(oe);if(Ne.hidden||Ne.writingMode===u.WritingMode.vertical&&!ue)Ri(Ne.numGlyphs,R);else{ue=!1;var st=[Ne.anchorX,Ne.anchorY,0,1];if(u.transformMat4(st,st,g),St(st,I)){var Mt=Ct(f.transform.cameraToCenterDistance,st[3]),Lt=u.evaluateSizeForFeature(Ce,Re,Ne),Rt=V?Lt/Mt:Lt*Mt,Xt=new u.Point(Ne.anchorX,Ne.anchorY),yn=Xe(Xt,P).point,zn={},Rn=gi(Ne,Rt,!1,ee,g,P,B,p.glyphOffsetArray,S,R,yn,Xt,zn,$);ue=Rn.useVertical,(Rn.notEnoughRoom||ue||Rn.needsFlipping&&gi(Ne,Rt,!0,ee,g,P,B,p.glyphOffsetArray,S,R,yn,Xt,zn,$).notEnoughRoom)&&Ri(Ne.numGlyphs,R)}else Ri(Ne.numGlyphs,R)}}x?p.text.dynamicLayoutVertexBuffer.updateData(R):p.icon.dynamicLayoutVertexBuffer.updateData(R)}function Hn(p,g,f,x,P,B,V,ee,Ce,Re,I){var R=ee.glyphStartIndex+ee.numGlyphs,S=ee.lineStartIndex,U=ee.lineStartIndex+ee.lineLength,$=g.getoffsetX(ee.glyphStartIndex),ue=g.getoffsetX(R-1),oe=Sn(p*$,f,x,P,B,V,ee.segment,S,U,Ce,Re,I);if(!oe)return null;var Ne=Sn(p*ue,f,x,P,B,V,ee.segment,S,U,Ce,Re,I);return Ne?{first:oe,last:Ne}:null}function ri(p,g,f,x){return p===u.WritingMode.horizontal&&Math.abs(f.y-g.y)>Math.abs(f.x-g.x)*x?{useVertical:!0}:(p===u.WritingMode.vertical?g.y<f.y:g.x>f.x)?{needsFlipping:!0}:null}function gi(p,g,f,x,P,B,V,ee,Ce,Re,I,R,S,U){var $,ue=g/24,oe=p.lineOffsetX*ue,Ne=p.lineOffsetY*ue;if(p.numGlyphs>1){var st=p.glyphStartIndex+p.numGlyphs,Mt=p.lineStartIndex,Lt=p.lineStartIndex+p.lineLength,Rt=Hn(ue,ee,oe,Ne,f,I,R,p,Ce,B,S);if(!Rt)return{notEnoughRoom:!0};var Xt=Xe(Rt.first.point,V).point,yn=Xe(Rt.last.point,V).point;if(x&&!f){var zn=ri(p.writingMode,Xt,yn,U);if(zn)return zn}$=[Rt.first];for(var Rn=p.glyphStartIndex+1;Rn<st-1;Rn++)$.push(Sn(ue*ee.getoffsetX(Rn),oe,Ne,f,I,R,p.segment,Mt,Lt,Ce,B,S));$.push(Rt.last)}else{if(x&&!f){var qn=Xe(R,P).point,Mi=p.lineStartIndex+p.segment+1,Si=new u.Point(Ce.getx(Mi),Ce.gety(Mi)),Ei=Xe(Si,P),Lr=Ei.signedDistanceFromCamera>0?Ei.point:xi(R,Si,qn,1,P),ui=ri(p.writingMode,qn,Lr,U);if(ui)return ui}var tr=Sn(ue*ee.getoffsetX(p.glyphStartIndex),oe,Ne,f,I,R,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,Ce,B,S);if(!tr)return{notEnoughRoom:!0};$=[tr]}for(var fr=0,Ji=$;fr<Ji.length;fr+=1){var zi=Ji[fr];u.addDynamicAttributes(Re,zi.point,zi.angle)}return{}}function xi(p,g,f,x,P){var B=Xe(p.add(p.sub(g)._unit()),P).point,V=f.sub(B);return f.add(V._mult(x/V.mag()))}function Sn(p,g,f,x,P,B,V,ee,Ce,Re,I,R){var S=x?p-g:p+g,U=S>0?1:-1,$=0;x&&(U*=-1,$=Math.PI),U<0&&($+=Math.PI);for(var ue=U>0?ee+V:ee+V+1,oe=P,Ne=P,st=0,Mt=0,Lt=Math.abs(S),Rt=[];st+Mt<=Lt;){if((ue+=U)<ee||ue>=Ce)return null;if(Ne=oe,Rt.push(oe),void 0===(oe=R[ue])){var Xt=new u.Point(Re.getx(ue),Re.gety(ue)),yn=Xe(Xt,I);if(yn.signedDistanceFromCamera>0)oe=R[ue]=yn.point;else{var zn=ue-U;oe=xi(0===st?B:new u.Point(Re.getx(zn),Re.gety(zn)),Xt,Ne,Lt-st+1,I)}}st+=Mt,Mt=Ne.dist(oe)}var Rn=(Lt-st)/Mt,qn=oe.sub(Ne),Mi=qn.mult(Rn)._add(Ne);Mi._add(qn._unit()._perp()._mult(f*U));var Si=$+Math.atan2(oe.y-Ne.y,oe.x-Ne.x);return Rt.push(Mi),{point:Mi,angle:Si,path:Rt}}At.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},At.prototype.insert=function(p,g,f,x,P){this._forEachCell(g,f,x,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(g),this.bboxes.push(f),this.bboxes.push(x),this.bboxes.push(P)},At.prototype.insertCircle=function(p,g,f,x){this._forEachCell(g-x,f-x,g+x,f+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(g),this.circles.push(f),this.circles.push(x)},At.prototype._insertBoxCell=function(p,g,f,x,P,B){this.boxCells[P].push(B)},At.prototype._insertCircleCell=function(p,g,f,x,P,B){this.circleCells[P].push(B)},At.prototype._query=function(p,g,f,x,P,B){if(f<0||p>this.width||x<0||g>this.height)return!P&&[];var V=[];if(p<=0&&g<=0&&this.width<=f&&this.height<=x){if(P)return!0;for(var ee=0;ee<this.boxKeys.length;ee++)V.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(var Ce=0;Ce<this.circleKeys.length;Ce++){var Re=this.circles[3*Ce],I=this.circles[3*Ce+1],R=this.circles[3*Ce+2];V.push({key:this.circleKeys[Ce],x1:Re-R,y1:I-R,x2:Re+R,y2:I+R})}return B?V.filter(B):V}return this._forEachCell(p,g,f,x,this._queryCell,V,{hitTest:P,seenUids:{box:{},circle:{}}},B),P?V.length>0:V},At.prototype._queryCircle=function(p,g,f,x,P){var B=p-f,V=p+f,ee=g-f,Ce=g+f;if(V<0||B>this.width||Ce<0||ee>this.height)return!x&&[];var Re=[];return this._forEachCell(B,ee,V,Ce,this._queryCellCircle,Re,{hitTest:x,circle:{x:p,y:g,radius:f},seenUids:{box:{},circle:{}}},P),x?Re.length>0:Re},At.prototype.query=function(p,g,f,x,P){return this._query(p,g,f,x,!1,P)},At.prototype.hitTest=function(p,g,f,x,P){return this._query(p,g,f,x,!0,P)},At.prototype.hitTestCircle=function(p,g,f,x){return this._queryCircle(p,g,f,!0,x)},At.prototype._queryCell=function(p,g,f,x,P,B,V,ee){var Ce=V.seenUids,Re=this.boxCells[P];if(null!==Re)for(var I=this.bboxes,R=0,S=Re;R<S.length;R+=1){var U=S[R];if(!Ce.box[U]){Ce.box[U]=!0;var $=4*U;if(p<=I[$+2]&&g<=I[$+3]&&f>=I[$+0]&&x>=I[$+1]&&(!ee||ee(this.boxKeys[U]))){if(V.hitTest)return B.push(!0),!0;B.push({key:this.boxKeys[U],x1:I[$],y1:I[$+1],x2:I[$+2],y2:I[$+3]})}}}var ue=this.circleCells[P];if(null!==ue)for(var oe=this.circles,Ne=0,st=ue;Ne<st.length;Ne+=1){var Mt=st[Ne];if(!Ce.circle[Mt]){Ce.circle[Mt]=!0;var Lt=3*Mt;if(this._circleAndRectCollide(oe[Lt],oe[Lt+1],oe[Lt+2],p,g,f,x)&&(!ee||ee(this.circleKeys[Mt]))){if(V.hitTest)return B.push(!0),!0;var Rt=oe[Lt],Xt=oe[Lt+1],yn=oe[Lt+2];B.push({key:this.circleKeys[Mt],x1:Rt-yn,y1:Xt-yn,x2:Rt+yn,y2:Xt+yn})}}}},At.prototype._queryCellCircle=function(p,g,f,x,P,B,V,ee){var Ce=V.circle,Re=V.seenUids,I=this.boxCells[P];if(null!==I)for(var R=this.bboxes,S=0,U=I;S<U.length;S+=1){var $=U[S];if(!Re.box[$]){Re.box[$]=!0;var ue=4*$;if(this._circleAndRectCollide(Ce.x,Ce.y,Ce.radius,R[ue+0],R[ue+1],R[ue+2],R[ue+3])&&(!ee||ee(this.boxKeys[$])))return B.push(!0),!0}}var oe=this.circleCells[P];if(null!==oe)for(var Ne=this.circles,st=0,Mt=oe;st<Mt.length;st+=1){var Lt=Mt[st];if(!Re.circle[Lt]){Re.circle[Lt]=!0;var Rt=3*Lt;if(this._circlesCollide(Ne[Rt],Ne[Rt+1],Ne[Rt+2],Ce.x,Ce.y,Ce.radius)&&(!ee||ee(this.circleKeys[Lt])))return B.push(!0),!0}}},At.prototype._forEachCell=function(p,g,f,x,P,B,V,ee){for(var Ce=this._convertToXCellCoord(p),Re=this._convertToYCellCoord(g),I=this._convertToXCellCoord(f),R=this._convertToYCellCoord(x),S=Ce;S<=I;S++)for(var U=Re;U<=R;U++)if(P.call(this,p,g,f,x,this.xCellCount*U+S,B,V,ee))return},At.prototype._convertToXCellCoord=function(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))},At.prototype._convertToYCellCoord=function(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))},At.prototype._circlesCollide=function(p,g,f,x,P,B){var V=x-p,ee=P-g,Ce=f+B;return Ce*Ce>V*V+ee*ee},At.prototype._circleAndRectCollide=function(p,g,f,x,P,B,V){var ee=(B-x)/2,Ce=Math.abs(p-(x+ee));if(Ce>ee+f)return!1;var Re=(V-P)/2,I=Math.abs(g-(P+Re));if(I>Re+f)return!1;if(Ce<=ee||I<=Re)return!0;var R=Ce-ee,S=I-Re;return R*R+S*S<=f*f};var ci=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ri(p,g){for(var f=0;f<p;f++){var x=g.length;g.resize(x+4),g.float32.set(ci,3*x)}}function Pi(p,g,f){var x=g[0],P=g[1];return p[0]=f[0]*x+f[4]*P+f[12],p[1]=f[1]*x+f[5]*P+f[13],p[3]=f[3]*x+f[7]*P+f[15],p}var yr=function(p,g,f){void 0===g&&(g=new At(p.width+200,p.height+200,25)),void 0===f&&(f=new At(p.width+200,p.height+200,25)),this.transform=p,this.grid=g,this.ignoredGrid=f,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+100,this.screenBottomBoundary=p.height+100,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200};function Xi(p,g,f){return g*(u.EXTENT/(p.tileSize*Math.pow(2,f-p.tileID.overscaledZ)))}yr.prototype.placeCollisionBox=function(p,g,f,x,P){var B=this.projectAndGetPerspectiveRatio(x,p.anchorPointX,p.anchorPointY),V=f*B.perspectiveRatio,ee=p.x1*V+B.point.x,Ce=p.y1*V+B.point.y,Re=p.x2*V+B.point.x,I=p.y2*V+B.point.y;return!this.isInsideGrid(ee,Ce,Re,I)||!g&&this.grid.hitTest(ee,Ce,Re,I,P)?{box:[],offscreen:!1}:{box:[ee,Ce,Re,I],offscreen:this.isOffscreen(ee,Ce,Re,I)}},yr.prototype.placeCollisionCircles=function(p,g,f,x,P,B,V,ee,Ce,Re,I,R,S){var U=[],$=new u.Point(g.anchorX,g.anchorY),ue=Xe($,B),oe=Ct(this.transform.cameraToCenterDistance,ue.signedDistanceFromCamera),Ne=(Re?P/oe:P*oe)/u.ONE_EM,st=Xe($,V).point,Mt=Hn(Ne,x,g.lineOffsetX*Ne,g.lineOffsetY*Ne,!1,st,$,g,f,V,{}),Lt=!1,Rt=!1,Xt=!0;if(Mt){for(var yn=.5*R*oe+S,zn=new u.Point(-100,-100),Rn=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),qn=new xo,Mi=Mt.first,Si=Mt.last,Ei=[],Lr=Mi.path.length-1;Lr>=1;Lr--)Ei.push(Mi.path[Lr]);for(var ui=1;ui<Si.path.length;ui++)Ei.push(Si.path[ui]);var tr=2.5*yn;if(ee){var fr=Ei.map(function(vu){return Xe(vu,ee)});Ei=fr.some(function(vu){return vu.signedDistanceFromCamera<=0})?[]:fr.map(function(vu){return vu.point})}var Ji=[];if(Ei.length>0){for(var zi=Ei[0].clone(),nr=Ei[0].clone(),Bi=1;Bi<Ei.length;Bi++)zi.x=Math.min(zi.x,Ei[Bi].x),zi.y=Math.min(zi.y,Ei[Bi].y),nr.x=Math.max(nr.x,Ei[Bi].x),nr.y=Math.max(nr.y,Ei[Bi].y);Ji=zi.x>=zn.x&&nr.x<=Rn.x&&zi.y>=zn.y&&nr.y<=Rn.y?[Ei]:nr.x<zn.x||zi.x>Rn.x||nr.y<zn.y||zi.y>Rn.y?[]:u.clipLine([Ei],zn.x,zn.y,Rn.x,Rn.y)}for(var Zi=0,Ms=Ji;Zi<Ms.length;Zi+=1){var Ss;qn.reset(Ms[Zi],.25*yn),Ss=qn.length<=.5*yn?1:Math.ceil(qn.paddedLength/tr)+1;for(var ja=0;ja<Ss;ja++){var ks=ja/Math.max(Ss-1,1),$o=qn.lerp(ks),is=$o.x+100,ol=$o.y+100;U.push(is,ol,yn,0);var sl=is-yn,Cl=ol-yn,Ys=is+yn,Tl=ol+yn;if(Xt=Xt&&this.isOffscreen(sl,Cl,Ys,Tl),Rt=Rt||this.isInsideGrid(sl,Cl,Ys,Tl),!p&&this.grid.hitTestCircle(is,ol,yn,I)&&(Lt=!0,!Ce))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!Ce&&Lt||!Rt?[]:U,offscreen:Xt,collisionDetected:Lt}},yr.prototype.queryRenderedSymbols=function(p){if(0===p.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var g=[],f=1/0,x=1/0,P=-1/0,B=-1/0,V=0,ee=p;V<ee.length;V+=1){var Ce=ee[V],Re=new u.Point(Ce.x+100,Ce.y+100);f=Math.min(f,Re.x),x=Math.min(x,Re.y),P=Math.max(P,Re.x),B=Math.max(B,Re.y),g.push(Re)}for(var I={},R={},S=0,U=this.grid.query(f,x,P,B).concat(this.ignoredGrid.query(f,x,P,B));S<U.length;S+=1){var $=U[S],ue=$.key;if(void 0===I[ue.bucketInstanceId]&&(I[ue.bucketInstanceId]={}),!I[ue.bucketInstanceId][ue.featureIndex]){var oe=[new u.Point($.x1,$.y1),new u.Point($.x2,$.y1),new u.Point($.x2,$.y2),new u.Point($.x1,$.y2)];u.polygonIntersectsPolygon(g,oe)&&(I[ue.bucketInstanceId][ue.featureIndex]=!0,void 0===R[ue.bucketInstanceId]&&(R[ue.bucketInstanceId]=[]),R[ue.bucketInstanceId].push(ue.featureIndex))}}return R},yr.prototype.insertCollisionBox=function(p,g,f,x,P){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:x,collisionGroupID:P},p[0],p[1],p[2],p[3])},yr.prototype.insertCollisionCircles=function(p,g,f,x,P){for(var B=g?this.ignoredGrid:this.grid,V={bucketInstanceId:f,featureIndex:x,collisionGroupID:P},ee=0;ee<p.length;ee+=4)B.insertCircle(V,p[ee],p[ee+1],p[ee+2])},yr.prototype.projectAndGetPerspectiveRatio=function(p,g,f){var x=[g,f,0,1];return Pi(x,x,p),{point:new u.Point((x[0]/x[3]+1)/2*this.transform.width+100,(-x[1]/x[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}},yr.prototype.isOffscreen=function(p,g,f,x){return f<100||p>=this.screenRightBoundary||x<100||g>this.screenBottomBoundary},yr.prototype.isInsideGrid=function(p,g,f,x){return f>=0&&p<this.gridRightBoundary&&x>=0&&g<this.gridBottomBoundary},yr.prototype.getViewportMatrix=function(){var p=u.identity([]);return u.translate(p,p,[-100,-100,0]),p};var Bo=function(p,g,f,x){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?g:-g))):x&&f?1:0,this.placed=f};Bo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Rr=function(p,g,f,x,P){this.text=new Bo(p?p.text:null,g,f,P),this.icon=new Bo(p?p.icon:null,g,x,P)};Rr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ga=function(p,g,f){this.text=p,this.icon=g,this.skipFade=f},ds=function(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]},ar=function(p,g,f,x,P){this.bucketInstanceId=p,this.featureIndex=g,this.sourceLayerIndex=f,this.bucketIndex=x,this.tileID=P},xa=function(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}};function Oo(p,g,f,x,P){var B=u.getAnchorAlignment(p),V=-(B.horizontalAlign-.5)*g,ee=-(B.verticalAlign-.5)*f,Ce=u.evaluateVariableOffset(p,x);return new u.Point(V+Ce[0]*P,ee+Ce[1]*P)}function sa(p,g,f,x,P,B){var V=p.x1,ee=p.x2,Ce=p.y1,Re=p.y2,I=p.anchorPointX,R=p.anchorPointY,S=new u.Point(g,f);return x&&S._rotate(P?B:-B),{x1:V+S.x,y1:Ce+S.y,x2:ee+S.x,y2:Re+S.y,anchorPointX:I,anchorPointY:R}}xa.prototype.get=function(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){var g=++this.maxGroupID;this.collisionGroups[p]={ID:g,predicate:function(f){return f.collisionGroupID===g}}}return this.collisionGroups[p]};var mo=function(p,g,f,x){this.transform=p.clone(),this.collisionIndex=new yr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new xa(f),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}};function Po(p,g,f,x,P){p.emplaceBack(g?1:0,f?1:0,x||0,P||0),p.emplaceBack(g?1:0,f?1:0,x||0,P||0),p.emplaceBack(g?1:0,f?1:0,x||0,P||0),p.emplaceBack(g?1:0,f?1:0,x||0,P||0)}mo.prototype.getBucketParts=function(p,g,f,x){var P=f.getBucket(g),B=f.latestFeatureIndex;if(P&&B&&g.id===P.layerIds[0]){var V=f.collisionBoxArray,ee=P.layers[0].layout,Ce=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Re=f.tileSize/u.EXTENT,I=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),R="map"===ee.get("text-pitch-alignment"),S="map"===ee.get("text-rotation-alignment"),U=Xi(f,1,this.transform.zoom),$=Ae(I,R,S,this.transform,U),ue=null;if(R){var oe=Te(I,R,S,this.transform,U);ue=u.multiply([],this.transform.labelPlaneMatrix,oe)}this.retainedQueryData[P.bucketInstanceId]=new ar(P.bucketInstanceId,B,P.sourceLayerIndex,P.index,f.tileID);var Ne={bucket:P,layout:ee,posMatrix:I,textLabelPlaneMatrix:$,labelToScreenMatrix:ue,scale:Ce,textPixelRatio:Re,holdingForFade:f.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(x)for(var st=0,Mt=P.sortKeyRanges;st<Mt.length;st+=1){var Lt=Mt[st];p.push({sortKey:Lt.sortKey,symbolInstanceStart:Lt.symbolInstanceStart,symbolInstanceEnd:Lt.symbolInstanceEnd,parameters:Ne})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:Ne})}},mo.prototype.attemptAnchorPlacement=function(p,g,f,x,P,B,V,ee,Ce,Re,I,R,S,U,$){var ue,oe=[R.textOffset0,R.textOffset1],Ne=Oo(p,f,x,oe,P),st=this.collisionIndex.placeCollisionBox(sa(g,Ne.x,Ne.y,B,V,this.transform.angle),I,ee,Ce,Re.predicate);if(!$||0!==this.collisionIndex.placeCollisionBox(sa($,Ne.x,Ne.y,B,V,this.transform.angle),I,ee,Ce,Re.predicate).box.length)return st.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[R.crossTileID]&&this.prevPlacement.placements[R.crossTileID]&&this.prevPlacement.placements[R.crossTileID].text&&(ue=this.prevPlacement.variableOffsets[R.crossTileID].anchor),this.variableOffsets[R.crossTileID]={textOffset:oe,width:f,height:x,anchor:p,textBoxScale:P,prevAnchor:ue},this.markUsedJustification(S,p,R,U),S.allowVerticalPlacement&&(this.markUsedOrientation(S,U,R),this.placedOrientations[R.crossTileID]=U),{shift:Ne,placedGlyphBoxes:st}):void 0},mo.prototype.placeLayerBucketPart=function(p,g,f){var x=this,P=p.parameters,B=P.bucket,V=P.layout,ee=P.posMatrix,Ce=P.textLabelPlaneMatrix,Re=P.labelToScreenMatrix,I=P.textPixelRatio,R=P.holdingForFade,S=P.collisionBoxArray,U=P.partiallyEvaluatedTextSize,$=P.collisionGroup,ue=V.get("text-optional"),oe=V.get("icon-optional"),Ne=V.get("text-allow-overlap"),st=V.get("icon-allow-overlap"),Mt="map"===V.get("text-rotation-alignment"),Lt="map"===V.get("text-pitch-alignment"),Rt="none"!==V.get("icon-text-fit"),Xt="viewport-y"===V.get("symbol-z-order"),yn=Ne&&(st||!B.hasIconData()||oe),zn=st&&(Ne||!B.hasTextData()||ue);!B.collisionArrays&&S&&B.deserializeCollisionBoxes(S);var Rn=function(ui,tr){if(!g[ui.crossTileID])if(R)x.placements[ui.crossTileID]=new Ga(!1,!1,!1);else{var fr,Ji=!1,zi=!1,nr=!0,Bi=null,Zi={box:null,offscreen:null},Ms={box:null,offscreen:null},Ss=null,ja=null,ks=0,$o=0,is=0;tr.textFeatureIndex?ks=tr.textFeatureIndex:ui.useRuntimeCollisionCircles&&(ks=ui.featureIndex),tr.verticalTextFeatureIndex&&($o=tr.verticalTextFeatureIndex);var ol=tr.textBox;if(ol){var sl=function(To){var xu=u.WritingMode.horizontal;if(B.allowVerticalPlacement&&!To&&x.prevPlacement){var Vl=x.prevPlacement.placedOrientations[ui.crossTileID];Vl&&(x.placedOrientations[ui.crossTileID]=Vl,x.markUsedOrientation(B,xu=Vl,ui))}return xu},Cl=function(To,xu){if(B.allowVerticalPlacement&&ui.numVerticalGlyphVertices>0&&tr.verticalTextBox)for(var Vl=0,bc=B.writingModes;Vl<bc.length&&(bc[Vl]===u.WritingMode.vertical?(Zi=xu(),Ms=Zi):Zi=To(),!(Zi&&Zi.box&&Zi.box.length));Vl+=1);else Zi=To()};if(V.get("text-variable-anchor")){var Ys=V.get("text-variable-anchor");if(x.prevPlacement&&x.prevPlacement.variableOffsets[ui.crossTileID]){var Tl=x.prevPlacement.variableOffsets[ui.crossTileID];Ys.indexOf(Tl.anchor)>0&&(Ys=Ys.filter(function(To){return To!==Tl.anchor})).unshift(Tl.anchor)}var vu=function(To,xu,Vl){for(var bc=To.x2-To.x1,Im=To.y2-To.y1,jh=ui.textBoxScale,Vh=Rt&&!st?xu:null,yd={box:[],offscreen:!1},Of=Ne?2*Ys.length:Ys.length,kc=0;kc<Of;++kc){var kp=x.attemptAnchorPlacement(Ys[kc%Ys.length],To,bc,Im,jh,Mt,Lt,I,ee,$,kc>=Ys.length,ui,B,Vl,Vh);if(kp&&(yd=kp.placedGlyphBoxes)&&yd.box&&yd.box.length){Ji=!0,Bi=kp.shift;break}}return yd};Cl(function(){return vu(ol,tr.iconBox,u.WritingMode.horizontal)},function(){var To=tr.verticalTextBox;return B.allowVerticalPlacement&&!(Zi&&Zi.box&&Zi.box.length)&&ui.numVerticalGlyphVertices>0&&To?vu(To,tr.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Zi&&(Ji=Zi.box,nr=Zi.offscreen);var Ac=sl(Zi&&Zi.box);if(!Ji&&x.prevPlacement){var Ic=x.prevPlacement.variableOffsets[ui.crossTileID];Ic&&(x.variableOffsets[ui.crossTileID]=Ic,x.markUsedJustification(B,Ic.anchor,ui,Ac))}}else{var Oc=function(To,xu){var Vl=x.collisionIndex.placeCollisionBox(To,Ne,I,ee,$.predicate);return Vl&&Vl.box&&Vl.box.length&&(x.markUsedOrientation(B,xu,ui),x.placedOrientations[ui.crossTileID]=xu),Vl};Cl(function(){return Oc(ol,u.WritingMode.horizontal)},function(){var To=tr.verticalTextBox;return B.allowVerticalPlacement&&ui.numVerticalGlyphVertices>0&&To?Oc(To,u.WritingMode.vertical):{box:null,offscreen:null}}),sl(Zi&&Zi.box&&Zi.box.length)}}if(Ji=(fr=Zi)&&fr.box&&fr.box.length>0,nr=fr&&fr.offscreen,ui.useRuntimeCollisionCircles){var ou=B.text.placedSymbolArray.get(ui.centerJustifiedTextSymbolIndex),Ld=u.evaluateSizeForFeature(B.textSizeData,U,ou),bu=V.get("text-padding");Ss=x.collisionIndex.placeCollisionCircles(Ne,ou,B.lineVertexArray,B.glyphOffsetArray,Ld,ee,Ce,Re,f,Lt,$.predicate,ui.collisionCircleDiameter,bu),Ji=Ne||Ss.circles.length>0&&!Ss.collisionDetected,nr=nr&&Ss.offscreen}if(tr.iconFeatureIndex&&(is=tr.iconFeatureIndex),tr.iconBox){var Kc=function(To){var xu=Rt&&Bi?sa(To,Bi.x,Bi.y,Mt,Lt,x.transform.angle):To;return x.collisionIndex.placeCollisionBox(xu,st,I,ee,$.predicate)};zi=Ms&&Ms.box&&Ms.box.length&&tr.verticalIconBox?(ja=Kc(tr.verticalIconBox)).box.length>0:(ja=Kc(tr.iconBox)).box.length>0,nr=nr&&ja.offscreen}var lc=ue||0===ui.numHorizontalGlyphVertices&&0===ui.numVerticalGlyphVertices,ya=oe||0===ui.numIconVertices;if(lc||ya?ya?lc||(zi=zi&&Ji):Ji=zi&&Ji:zi=Ji=zi&&Ji,Ji&&fr&&fr.box&&x.collisionIndex.insertCollisionBox(fr.box,V.get("text-ignore-placement"),B.bucketInstanceId,Ms&&Ms.box&&$o?$o:ks,$.ID),zi&&ja&&x.collisionIndex.insertCollisionBox(ja.box,V.get("icon-ignore-placement"),B.bucketInstanceId,is,$.ID),Ss&&(Ji&&x.collisionIndex.insertCollisionCircles(Ss.circles,V.get("text-ignore-placement"),B.bucketInstanceId,ks,$.ID),f)){var vc=B.bucketInstanceId,Xc=x.collisionCircleArrays[vc];void 0===Xc&&(Xc=x.collisionCircleArrays[vc]=new ds);for(var Pc=0;Pc<Ss.circles.length;Pc+=4)Xc.circles.push(Ss.circles[Pc+0]),Xc.circles.push(Ss.circles[Pc+1]),Xc.circles.push(Ss.circles[Pc+2]),Xc.circles.push(Ss.collisionDetected?1:0)}x.placements[ui.crossTileID]=new Ga(Ji||yn,zi||zn,nr||B.justReloaded),g[ui.crossTileID]=!0}};if(Xt)for(var qn=B.getSortedSymbolIndexes(this.transform.angle),Mi=qn.length-1;Mi>=0;--Mi){var Si=qn[Mi];Rn(B.symbolInstances.get(Si),B.collisionArrays[Si])}else for(var Ei=p.symbolInstanceStart;Ei<p.symbolInstanceEnd;Ei++)Rn(B.symbolInstances.get(Ei),B.collisionArrays[Ei]);if(f&&B.bucketInstanceId in this.collisionCircleArrays){var Lr=this.collisionCircleArrays[B.bucketInstanceId];u.invert(Lr.invProjMatrix,ee),Lr.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1},mo.prototype.markUsedJustification=function(p,g,f,x){var P;P=x===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(g)];for(var B=0,V=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];B<V.length;B+=1){var ee=V[B];ee>=0&&(p.text.placedSymbolArray.get(ee).crossTileID=P>=0&&ee!==P?0:f.crossTileID)}},mo.prototype.markUsedOrientation=function(p,g,f){for(var x=g===u.WritingMode.horizontal||g===u.WritingMode.horizontalOnly?g:0,P=g===u.WritingMode.vertical?g:0,B=0,V=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];B<V.length;B+=1)p.text.placedSymbolArray.get(V[B]).placedOrientation=x;f.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=P)},mo.prototype.commit=function(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;var g=this.prevPlacement,f=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;var x=g?g.symbolFadeChange(p):1,P=g?g.opacities:{},B=g?g.variableOffsets:{},V=g?g.placedOrientations:{};for(var ee in this.placements){var Ce=this.placements[ee],Re=P[ee];Re?(this.opacities[ee]=new Rr(Re,x,Ce.text,Ce.icon),f=f||Ce.text!==Re.text.placed||Ce.icon!==Re.icon.placed):(this.opacities[ee]=new Rr(null,x,Ce.text,Ce.icon,Ce.skipFade),f=f||Ce.text||Ce.icon)}for(var I in P){var R=P[I];if(!this.opacities[I]){var S=new Rr(R,x,!1,!1);S.isHidden()||(this.opacities[I]=S,f=f||R.text.placed||R.icon.placed)}}for(var U in B)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=B[U]);for(var $ in V)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=V[$]);f?this.lastPlacementChangeTime=p:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:p)},mo.prototype.updateLayerOpacities=function(p,g){for(var f={},x=0,P=g;x<P.length;x+=1){var B=P[x],V=B.getBucket(p);V&&B.latestFeatureIndex&&p.id===V.layerIds[0]&&this.updateBucketOpacities(V,f,B.collisionBoxArray)}},mo.prototype.updateBucketOpacities=function(p,g,f){var x=this;p.hasTextData()&&p.text.opacityVertexArray.clear(),p.hasIconData()&&p.icon.opacityVertexArray.clear(),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();var P=p.layers[0].layout,B=new Rr(null,0,!1,!1,!0),V=P.get("text-allow-overlap"),ee=P.get("icon-allow-overlap"),Ce=P.get("text-variable-anchor"),Re="map"===P.get("text-rotation-alignment"),I="map"===P.get("text-pitch-alignment"),R="none"!==P.get("icon-text-fit"),S=new Rr(null,0,V&&(ee||!p.hasIconData()||P.get("icon-optional")),ee&&(V||!p.hasTextData()||P.get("text-optional")),!0);!p.collisionArrays&&f&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(f);for(var U=function(Ne,st,Mt){for(var Lt=0;Lt<st/4;Lt++)Ne.opacityVertexArray.emplaceBack(Mt)},$=function(Ne){var st=p.symbolInstances.get(Ne),Mt=st.numHorizontalGlyphVertices,Lt=st.numVerticalGlyphVertices,Rt=st.crossTileID,Xt=x.opacities[Rt];g[Rt]?Xt=B:Xt||(x.opacities[Rt]=Xt=S),g[Rt]=!0;var yn=st.numIconVertices>0,zn=x.placedOrientations[st.crossTileID],Rn=zn===u.WritingMode.vertical,qn=zn===u.WritingMode.horizontal||zn===u.WritingMode.horizontalOnly;if(Mt>0||Lt>0){var Mi=zo(Xt.text);U(p.text,Mt,Rn?Oa:Mi),U(p.text,Lt,qn?Oa:Mi);var Si=Xt.text.isHidden();[st.rightJustifiedTextSymbolIndex,st.centerJustifiedTextSymbolIndex,st.leftJustifiedTextSymbolIndex].forEach(function(Zi){Zi>=0&&(p.text.placedSymbolArray.get(Zi).hidden=Si||Rn?1:0)}),st.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(st.verticalPlacedTextSymbolIndex).hidden=Si||qn?1:0);var Ei=x.variableOffsets[st.crossTileID];Ei&&x.markUsedJustification(p,Ei.anchor,st,zn);var Lr=x.placedOrientations[st.crossTileID];Lr&&(x.markUsedJustification(p,"left",st,Lr),x.markUsedOrientation(p,Lr,st))}if(yn){var ui=zo(Xt.icon),tr=!(R&&st.verticalPlacedIconSymbolIndex&&Rn);st.placedIconSymbolIndex>=0&&(U(p.icon,st.numIconVertices,tr?ui:Oa),p.icon.placedSymbolArray.get(st.placedIconSymbolIndex).hidden=Xt.icon.isHidden()),st.verticalPlacedIconSymbolIndex>=0&&(U(p.icon,st.numVerticalIconVertices,tr?Oa:ui),p.icon.placedSymbolArray.get(st.verticalPlacedIconSymbolIndex).hidden=Xt.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){var fr=p.collisionArrays[Ne];if(fr){var Ji=new u.Point(0,0);if(fr.textBox||fr.verticalTextBox){var zi=!0;if(Ce){var nr=x.variableOffsets[Rt];nr?(Ji=Oo(nr.anchor,nr.width,nr.height,nr.textOffset,nr.textBoxScale),Re&&Ji._rotate(I?x.transform.angle:-x.transform.angle)):zi=!1}fr.textBox&&Po(p.textCollisionBox.collisionVertexArray,Xt.text.placed,!zi||Rn,Ji.x,Ji.y),fr.verticalTextBox&&Po(p.textCollisionBox.collisionVertexArray,Xt.text.placed,!zi||qn,Ji.x,Ji.y)}var Bi=Boolean(!qn&&fr.verticalIconBox);fr.iconBox&&Po(p.iconCollisionBox.collisionVertexArray,Xt.icon.placed,Bi,R?Ji.x:0,R?Ji.y:0),fr.verticalIconBox&&Po(p.iconCollisionBox.collisionVertexArray,Xt.icon.placed,!Bi,R?Ji.x:0,R?Ji.y:0)}}},ue=0;ue<p.symbolInstances.length;ue++)$(ue);if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.bucketInstanceId in this.collisionCircleArrays){var oe=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=oe.invProjMatrix,p.placementViewportMatrix=oe.viewportMatrix,p.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}},mo.prototype.symbolFadeChange=function(p){return 0===this.fadeDuration?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},mo.prototype.zoomAdjustment=function(p){return Math.max(0,(this.transform.zoom-p)/1.5)},mo.prototype.hasTransitions=function(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration},mo.prototype.stillRecent=function(p,g){var f=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*f>p},mo.prototype.setStale=function(){this.stale=!0};var wa=Math.pow(2,25),Za=Math.pow(2,24),Uo=Math.pow(2,17),Ia=Math.pow(2,16),Iu=Math.pow(2,9),lo=Math.pow(2,8),fl=Math.pow(2,1);function zo(p){if(0===p.opacity&&!p.placed)return 0;if(1===p.opacity&&p.placed)return 4294967295;var g=p.placed?1:0,f=Math.floor(127*p.opacity);return f*wa+g*Za+f*Uo+g*Ia+f*Iu+g*lo+f*fl+g}var Oa=0,Ls=function(p){this._sortAcrossTiles="viewport-y"!==p.layout.get("symbol-z-order")&&void 0!==p.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ls.prototype.continuePlacement=function(p,g,f,x,P){for(var B=this._bucketParts;this._currentTileIndex<p.length;)if(g.getBucketParts(B,x,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort(function(V,ee){return V.sortKey-ee.sortKey}));this._currentPartIndex<B.length;)if(g.placeLayerBucketPart(B[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,P())return!0;return!1};var Bs=function(p,g,f,x,P,B,V){this.placement=new mo(p,P,B,V),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=x,this._done=!1};Bs.prototype.isDone=function(){return this._done},Bs.prototype.continuePlacement=function(p,g,f){for(var x=this,P=u.browser.now(),B=function(){var Ce=u.browser.now()-P;return!x._forceFullPlacement&&Ce>2};this._currentPlacementIndex>=0;){var V=g[p[this._currentPlacementIndex]],ee=this.placement.collisionIndex.transform.zoom;if("symbol"===V.type&&(!V.minzoom||V.minzoom<=ee)&&(!V.maxzoom||V.maxzoom>ee)){if(this._inProgressLayer||(this._inProgressLayer=new Ls(V)),this._inProgressLayer.continuePlacement(f[V.source],this.placement,this._showCollisionBoxes,V,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Bs.prototype.commit=function(p){return this.placement.commit(p),this.placement};var Yo=512/u.EXTENT/2,Go=function(p,g,f){this.tileID=p,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(var x=0;x<g.length;x++){var P=g.get(x),B=P.key;this.indexedSymbolInstances[B]||(this.indexedSymbolInstances[B]=[]),this.indexedSymbolInstances[B].push({crossTileID:P.crossTileID,coord:this.getScaledCoordinates(P,p)})}};Go.prototype.getScaledCoordinates=function(p,g){var f=Yo/Math.pow(2,g.canonical.z-this.tileID.canonical.z);return{x:Math.floor((g.canonical.x*u.EXTENT+p.anchorX)*f),y:Math.floor((g.canonical.y*u.EXTENT+p.anchorY)*f)}},Go.prototype.findMatches=function(p,g,f){for(var x=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),P=0;P<p.length;P++){var B=p.get(P);if(!B.crossTileID){var V=this.indexedSymbolInstances[B.key];if(V)for(var ee=this.getScaledCoordinates(B,g),Ce=0,Re=V;Ce<Re.length;Ce+=1){var I=Re[Ce];if(Math.abs(I.coord.x-ee.x)<=x&&Math.abs(I.coord.y-ee.y)<=x&&!f[I.crossTileID]){f[I.crossTileID]=!0,B.crossTileID=I.crossTileID;break}}}}};var Us=function(){this.maxCrossTileID=0};Us.prototype.generate=function(){return++this.maxCrossTileID};var uo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};uo.prototype.handleWrapJump=function(p){var g=Math.round((p-this.lng)/360);if(0!==g)for(var f in this.indexes){var x=this.indexes[f],P={};for(var B in x){var V=x[B];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+g),P[V.tileID.key]=V}this.indexes[f]=P}this.lng=p},uo.prototype.addBucket=function(p,g,f){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(var x=0;x<g.symbolInstances.length;x++)g.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});var P=this.usedCrossTileIDs[p.overscaledZ];for(var B in this.indexes){var V=this.indexes[B];if(Number(B)>p.overscaledZ)for(var ee in V){var Ce=V[ee];Ce.tileID.isChildOf(p)&&Ce.findMatches(g.symbolInstances,p,P)}else{var Re=V[p.scaledTo(Number(B)).key];Re&&Re.findMatches(g.symbolInstances,p,P)}}for(var I=0;I<g.symbolInstances.length;I++){var R=g.symbolInstances.get(I);R.crossTileID||(R.crossTileID=f.generate(),P[R.crossTileID]=!0)}return void 0===this.indexes[p.overscaledZ]&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new Go(p,g.symbolInstances,g.bucketInstanceId),!0},uo.prototype.removeBucketCrossTileIDs=function(p,g){for(var f in g.indexedSymbolInstances)for(var x=0,P=g.indexedSymbolInstances[f];x<P.length;x+=1)delete this.usedCrossTileIDs[p][P[x].crossTileID]},uo.prototype.removeStaleBuckets=function(p){var g=!1;for(var f in this.indexes){var x=this.indexes[f];for(var P in x)p[x[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,x[P]),delete x[P],g=!0)}return g};var go=function(){this.layerIndexes={},this.crossTileIDs=new Us,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};go.prototype.addLayer=function(p,g,f){var x=this.layerIndexes[p.id];void 0===x&&(x=this.layerIndexes[p.id]=new uo);var P=!1,B={};x.handleWrapJump(f);for(var V=0,ee=g;V<ee.length;V+=1){var Ce=ee[V],Re=Ce.getBucket(p);Re&&p.id===Re.layerIds[0]&&(Re.bucketInstanceId||(Re.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(Ce.tileID,Re,this.crossTileIDs)&&(P=!0),B[Re.bucketInstanceId]=!0)}return x.removeStaleBuckets(B)&&(P=!0),P},go.prototype.pruneUnusedLayers=function(p){var g={};for(var f in p.forEach(function(x){g[x]=!0}),this.layerIndexes)g[f]||delete this.layerIndexes[f]};var vs=function(p,g){return u.emitValidationErrors(p,g&&g.filter(function(f){return"source.canvas"!==f.identifier}))},bs=u.pick(In,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),xs=u.pick(In,["setCenter","setZoom","setBearing","setPitch"]),ko=function(){var p={},g=u.styleSpec.$version;for(var f in u.styleSpec.$root){var x,P=u.styleSpec.$root[f];P.required&&null!=(x="version"===f?g:"array"===P.type?[]:{})&&(p[f]=x)}return p}(),Zo=function(p){function g(f,x){var P=this;void 0===x&&(x={}),p.call(this),this.map=f,this.dispatcher=new kt(mt(),this),this.imageManager=new Be,this.imageManager.setEventedParent(this),this.glyphManager=new at(f._requestManager,x.localIdeographFontFamily),this.lineAtlas=new Ft(256,512),this.crossTileSymbolIndex=new go,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());var B=this;this._rtlTextPluginCallback=g.registerForPluginStateChange(function(V){B.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:V.pluginStatus,pluginURL:V.pluginURL},function(ee,Ce){if(u.triggerPluginCompletionEvent(ee),Ce&&Ce.every(function(I){return I}))for(var Re in B.sourceCaches)B.sourceCaches[Re].reload()})}),this.on("data",function(V){if("source"===V.dataType&&"metadata"===V.sourceDataType){var ee=P.sourceCaches[V.sourceId];if(ee){var Ce=ee.getSource();if(Ce&&Ce.vectorLayerIds)for(var Re in P._layers){var I=P._layers[Re];I.source===Ce.id&&P._validateLayer(I)}}}})}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.loadURL=function(f,x){var P=this;void 0===x&&(x={}),this.fire(new u.Event("dataloading",{dataType:"style"}));var B="boolean"==typeof x.validate?x.validate:!u.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,x.accessToken);var V=this.map._requestManager.transformRequest(f,u.ResourceType.Style);this._request=u.getJSON(V,function(ee,Ce){P._request=null,ee?P.fire(new u.ErrorEvent(ee)):Ce&&P._load(Ce,B)})},g.prototype.loadJSON=function(f,x){var P=this;void 0===x&&(x={}),this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(function(){P._request=null,P._load(f,!1!==x.validate)})},g.prototype.loadEmpty=function(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(ko,!1)},g.prototype._load=function(f,x){if(!x||!vs(this,u.validateStyle(f))){for(var P in this._loaded=!0,this.stylesheet=f,f.sources)this.addSource(P,f.sources[P],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs);var B=xn(this.stylesheet.layers);this._order=B.map(function(Re){return Re.id}),this._layers={},this._serializedLayers={};for(var V=0,ee=B;V<ee.length;V+=1){var Ce=ee[V];(Ce=u.createStyleLayer(Ce)).setEventedParent(this,{layer:{id:Ce.id}}),this._layers[Ce.id]=Ce,this._serializedLayers[Ce.id]=Ce.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Bt(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}},g.prototype._loadSprite=function(f){var x=this;this._spriteRequest=function(P,B,V){var ee,Ce,Re,I=u.browser.devicePixelRatio>1?"@2x":"",R=u.getJSON(B.transformRequest(B.normalizeSpriteURL(P,I,".json"),u.ResourceType.SpriteJSON),function($,ue){R=null,Re||(Re=$,ee=ue,U())}),S=u.getImage(B.transformRequest(B.normalizeSpriteURL(P,I,".png"),u.ResourceType.SpriteImage),function($,ue){S=null,Re||(Re=$,Ce=ue,U())});function U(){if(Re)V(Re);else if(ee&&Ce){var $=u.browser.getImageData(Ce),ue={};for(var oe in ee){var Ne=ee[oe],st=Ne.width,Mt=Ne.height,Lt=Ne.x,Rt=Ne.y,Xt=Ne.sdf,yn=Ne.pixelRatio,zn=Ne.stretchX,Rn=Ne.stretchY,qn=Ne.content,Mi=new u.RGBAImage({width:st,height:Mt});u.RGBAImage.copy($,Mi,{x:Lt,y:Rt},{x:0,y:0},{width:st,height:Mt}),ue[oe]={data:Mi,pixelRatio:yn,sdf:Xt,stretchX:zn,stretchY:Rn,content:qn}}V(null,ue)}}return{cancel:function(){R&&(R.cancel(),R=null),S&&(S.cancel(),S=null)}}}(f,this.map._requestManager,function(P,B){if(x._spriteRequest=null,P)x.fire(new u.ErrorEvent(P));else if(B)for(var V in B)x.imageManager.addImage(V,B[V]);x.imageManager.setLoaded(!0),x._availableImages=x.imageManager.listImages(),x.dispatcher.broadcast("setImages",x._availableImages),x.fire(new u.Event("data",{dataType:"style"}))})},g.prototype._validateLayer=function(f){var x=this.sourceCaches[f.source];if(x){var P=f.sourceLayer;if(P){var B=x.getSource();("geojson"===B.type||B.vectorLayerIds&&-1===B.vectorLayerIds.indexOf(P))&&this.fire(new u.ErrorEvent(new Error('Source layer "'+P+'" does not exist on source "'+B.id+'" as specified by style layer "'+f.id+'"')))}}},g.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var f in this.sourceCaches)if(!this.sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()},g.prototype._serializeLayers=function(f){for(var x=[],P=0,B=f;P<B.length;P+=1){var V=this._layers[B[P]];"custom"!==V.type&&x.push(V.serialize())}return x},g.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(var x in this._layers)if(this._layers[x].hasTransition())return!0;return!1},g.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},g.prototype.update=function(f){if(this._loaded){var x=this._changed;if(this._changed){var P=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);for(var V in(P.length||B.length)&&this._updateWorkerLayers(P,B),this._updatedSources){var ee=this._updatedSources[V];"reload"===ee?this._reloadSource(V):"clear"===ee&&this._clearSource(V)}for(var Ce in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ce].updateTransitions(f);this.light.updateTransitions(f),this._resetUpdates()}var Re={};for(var I in this.sourceCaches){var R=this.sourceCaches[I];Re[I]=R.used,R.used=!1}for(var S=0,U=this._order;S<U.length;S+=1){var $=this._layers[U[S]];$.recalculate(f,this._availableImages),!$.isHidden(f.zoom)&&$.source&&(this.sourceCaches[$.source].used=!0)}for(var ue in Re){var oe=this.sourceCaches[ue];Re[ue]!==oe.used&&oe.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ue}))}this.light.recalculate(f),this.z=f.zoom,x&&this.fire(new u.Event("data",{dataType:"style"}))}},g.prototype._updateTilesForChangedImages=function(){var f=Object.keys(this._changedImages);if(f.length){for(var x in this.sourceCaches)this.sourceCaches[x].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}},g.prototype._updateWorkerLayers=function(f,x){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:x})},g.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},g.prototype.setState=function(f){var x=this;if(this._checkLoaded(),vs(this,u.validateStyle(f)))return!1;(f=u.clone$1(f)).layers=xn(f.layers);var P=function(V,ee){if(!V)return[{command:In.setStyle,args:[ee]}];var Ce=[];try{if(!u.deepEqual(V.version,ee.version))return[{command:In.setStyle,args:[ee]}];u.deepEqual(V.center,ee.center)||Ce.push({command:In.setCenter,args:[ee.center]}),u.deepEqual(V.zoom,ee.zoom)||Ce.push({command:In.setZoom,args:[ee.zoom]}),u.deepEqual(V.bearing,ee.bearing)||Ce.push({command:In.setBearing,args:[ee.bearing]}),u.deepEqual(V.pitch,ee.pitch)||Ce.push({command:In.setPitch,args:[ee.pitch]}),u.deepEqual(V.sprite,ee.sprite)||Ce.push({command:In.setSprite,args:[ee.sprite]}),u.deepEqual(V.glyphs,ee.glyphs)||Ce.push({command:In.setGlyphs,args:[ee.glyphs]}),u.deepEqual(V.transition,ee.transition)||Ce.push({command:In.setTransition,args:[ee.transition]}),u.deepEqual(V.light,ee.light)||Ce.push({command:In.setLight,args:[ee.light]});var Re={},I=[];!function(S,U,$,ue){var oe;for(oe in U=U||{},S=S||{})S.hasOwnProperty(oe)&&(U.hasOwnProperty(oe)||Bn(oe,$,ue));for(oe in U)U.hasOwnProperty(oe)&&(S.hasOwnProperty(oe)?u.deepEqual(S[oe],U[oe])||("geojson"===S[oe].type&&"geojson"===U[oe].type&&ur(S,U,oe)?$.push({command:In.setGeoJSONSourceData,args:[oe,U[oe].data]}):Ni(oe,U,$,ue)):ai(oe,U,$))}(V.sources,ee.sources,I,Re);var R=[];V.layers&&V.layers.forEach(function(S){Re[S.source]?Ce.push({command:In.removeLayer,args:[S.id]}):R.push(S)}),Ce=Ce.concat(I),function(S,U,$){U=U||[];var ue,oe,Ne,st,Mt,Lt,Rt,Xt=(S=S||[]).map(cr),yn=U.map(cr),zn=S.reduce(Wi,{}),Rn=U.reduce(Wi,{}),qn=Xt.slice(),Mi=Object.create(null);for(ue=0,oe=0;ue<Xt.length;ue++)Rn.hasOwnProperty(Ne=Xt[ue])?oe++:($.push({command:In.removeLayer,args:[Ne]}),qn.splice(qn.indexOf(Ne,oe),1));for(ue=0,oe=0;ue<yn.length;ue++)qn[qn.length-1-ue]!==(Ne=yn[yn.length-1-ue])&&(zn.hasOwnProperty(Ne)?($.push({command:In.removeLayer,args:[Ne]}),qn.splice(qn.lastIndexOf(Ne,qn.length-oe),1)):oe++,$.push({command:In.addLayer,args:[Rn[Ne],Lt=qn[qn.length-ue]]}),qn.splice(qn.length-ue,0,Ne),Mi[Ne]=!0);for(ue=0;ue<yn.length;ue++)if(st=zn[Ne=yn[ue]],Mt=Rn[Ne],!Mi[Ne]&&!u.deepEqual(st,Mt))if(u.deepEqual(st.source,Mt.source)&&u.deepEqual(st["source-layer"],Mt["source-layer"])&&u.deepEqual(st.type,Mt.type)){for(Rt in Gi(st.layout,Mt.layout,$,Ne,null,In.setLayoutProperty),Gi(st.paint,Mt.paint,$,Ne,null,In.setPaintProperty),u.deepEqual(st.filter,Mt.filter)||$.push({command:In.setFilter,args:[Ne,Mt.filter]}),u.deepEqual(st.minzoom,Mt.minzoom)&&u.deepEqual(st.maxzoom,Mt.maxzoom)||$.push({command:In.setLayerZoomRange,args:[Ne,Mt.minzoom,Mt.maxzoom]}),st)st.hasOwnProperty(Rt)&&"layout"!==Rt&&"paint"!==Rt&&"filter"!==Rt&&"metadata"!==Rt&&"minzoom"!==Rt&&"maxzoom"!==Rt&&(0===Rt.indexOf("paint.")?Gi(st[Rt],Mt[Rt],$,Ne,Rt.slice(6),In.setPaintProperty):u.deepEqual(st[Rt],Mt[Rt])||$.push({command:In.setLayerProperty,args:[Ne,Rt,Mt[Rt]]}));for(Rt in Mt)Mt.hasOwnProperty(Rt)&&!st.hasOwnProperty(Rt)&&"layout"!==Rt&&"paint"!==Rt&&"filter"!==Rt&&"metadata"!==Rt&&"minzoom"!==Rt&&"maxzoom"!==Rt&&(0===Rt.indexOf("paint.")?Gi(st[Rt],Mt[Rt],$,Ne,Rt.slice(6),In.setPaintProperty):u.deepEqual(st[Rt],Mt[Rt])||$.push({command:In.setLayerProperty,args:[Ne,Rt,Mt[Rt]]}))}else $.push({command:In.removeLayer,args:[Ne]}),Lt=qn[qn.lastIndexOf(Ne)+1],$.push({command:In.addLayer,args:[Mt,Lt]})}(R,ee.layers,Ce)}catch(S){console.warn("Unable to compute style diff:",S),Ce=[{command:In.setStyle,args:[ee]}]}return Ce}(this.serialize(),f).filter(function(V){return!(V.command in xs)});if(0===P.length)return!1;var B=P.filter(function(V){return!(V.command in bs)});if(B.length>0)throw new Error("Unimplemented: "+B.map(function(V){return V.command}).join(", ")+".");return P.forEach(function(V){"setTransition"!==V.command&&x[V.command].apply(x,V.args)}),this.stylesheet=f,!0},g.prototype.addImage=function(f,x){if(this.getImage(f))return this.fire(new u.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(f,x),this._afterImageUpdated(f)},g.prototype.updateImage=function(f,x){this.imageManager.updateImage(f,x)},g.prototype.getImage=function(f){return this.imageManager.getImage(f)},g.prototype.removeImage=function(f){if(!this.getImage(f))return this.fire(new u.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(f),this._afterImageUpdated(f)},g.prototype._afterImageUpdated=function(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))},g.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},g.prototype.addSource=function(f,x,P){var B=this;if(void 0===P&&(P={}),this._checkLoaded(),void 0!==this.sourceCaches[f])throw new Error("There is already a source with this ID");if(!x.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(x).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(x.type)>=0&&this._validate(u.validateStyle.source,"sources."+f,x,null,P))){this.map&&this.map._collectResourceTiming&&(x.collectResourceTiming=!0);var V=this.sourceCaches[f]=new ot(f,x,this.dispatcher);V.style=this,V.setEventedParent(this,function(){return{isSourceLoaded:B.loaded(),source:V.serialize(),sourceId:f}}),V.onAdd(this.map),this._changed=!0}},g.prototype.removeSource=function(f){if(this._checkLoaded(),void 0===this.sourceCaches[f])throw new Error("There is no source with this ID");for(var x in this._layers)if(this._layers[x].source===f)return this.fire(new u.ErrorEvent(new Error('Source "'+f+'" cannot be removed while layer "'+x+'" is using it.')));var P=this.sourceCaches[f];delete this.sourceCaches[f],delete this._updatedSources[f],P.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:f})),P.setEventedParent(null),P.clearTiles(),P.onRemove&&P.onRemove(this.map),this._changed=!0},g.prototype.setGeoJSONSourceData=function(f,x){this._checkLoaded(),this.sourceCaches[f].getSource().setData(x),this._changed=!0},g.prototype.getSource=function(f){return this.sourceCaches[f]&&this.sourceCaches[f].getSource()},g.prototype.addLayer=function(f,x,P){void 0===P&&(P={}),this._checkLoaded();var B=f.id;if(this.getLayer(B))this.fire(new u.ErrorEvent(new Error('Layer with id "'+B+'" already exists on this map')));else{var V;if("custom"===f.type){if(vs(this,u.validateCustomStyleLayer(f)))return;V=u.createStyleLayer(f)}else{if("object"==typeof f.source&&(this.addSource(B,f.source),f=u.clone$1(f),f=u.extend(f,{source:B})),this._validate(u.validateStyle.layer,"layers."+B,f,{arrayIndex:-1},P))return;V=u.createStyleLayer(f),this._validateLayer(V),V.setEventedParent(this,{layer:{id:B}}),this._serializedLayers[V.id]=V.serialize()}var ee=x?this._order.indexOf(x):this._order.length;if(x&&-1===ee)this.fire(new u.ErrorEvent(new Error('Layer with id "'+x+'" does not exist on this map.')));else{if(this._order.splice(ee,0,B),this._layerOrderChanged=!0,this._layers[B]=V,this._removedLayers[B]&&V.source&&"custom"!==V.type){var Ce=this._removedLayers[B];delete this._removedLayers[B],Ce.type!==V.type?this._updatedSources[V.source]="clear":(this._updatedSources[V.source]="reload",this.sourceCaches[V.source].pause())}this._updateLayer(V),V.onAdd&&V.onAdd(this.map)}}},g.prototype.moveLayer=function(f,x){if(this._checkLoaded(),this._changed=!0,this._layers[f]){if(f!==x){var P=this._order.indexOf(f);this._order.splice(P,1);var B=x?this._order.indexOf(x):this._order.length;x&&-1===B?this.fire(new u.ErrorEvent(new Error('Layer with id "'+x+'" does not exist on this map.'))):(this._order.splice(B,0,f),this._layerOrderChanged=!0)}}else this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be moved.")))},g.prototype.removeLayer=function(f){this._checkLoaded();var x=this._layers[f];if(x){x.setEventedParent(null);var P=this._order.indexOf(f);this._order.splice(P,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=x,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],x.onRemove&&x.onRemove(this.map)}else this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be removed.")))},g.prototype.getLayer=function(f){return this._layers[f]},g.prototype.hasLayer=function(f){return f in this._layers},g.prototype.setLayerZoomRange=function(f,x,P){this._checkLoaded();var B=this.getLayer(f);B?B.minzoom===x&&B.maxzoom===P||(null!=x&&(B.minzoom=x),null!=P&&(B.maxzoom=P),this._updateLayer(B)):this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot have zoom extent.")))},g.prototype.setFilter=function(f,x,P){void 0===P&&(P={}),this._checkLoaded();var B=this.getLayer(f);if(B){if(!u.deepEqual(B.filter,x))return null==x?(B.filter=void 0,void this._updateLayer(B)):void(this._validate(u.validateStyle.filter,"layers."+B.id+".filter",x,null,P)||(B.filter=u.clone$1(x),this._updateLayer(B)))}else this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be filtered.")))},g.prototype.getFilter=function(f){return u.clone$1(this.getLayer(f).filter)},g.prototype.setLayoutProperty=function(f,x,P,B){void 0===B&&(B={}),this._checkLoaded();var V=this.getLayer(f);V?u.deepEqual(V.getLayoutProperty(x),P)||(V.setLayoutProperty(x,P,B),this._updateLayer(V)):this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getLayoutProperty=function(f,x){var P=this.getLayer(f);if(P)return P.getLayoutProperty(x);this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style.")))},g.prototype.setPaintProperty=function(f,x,P,B){void 0===B&&(B={}),this._checkLoaded();var V=this.getLayer(f);V?u.deepEqual(V.getPaintProperty(x),P)||(V.setPaintProperty(x,P,B)&&this._updateLayer(V),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new u.ErrorEvent(new Error("The layer '"+f+"' does not exist in the map's style and cannot be styled.")))},g.prototype.getPaintProperty=function(f,x){return this.getLayer(f).getPaintProperty(x)},g.prototype.setFeatureState=function(f,x){this._checkLoaded();var P=f.source,B=f.sourceLayer,V=this.sourceCaches[P];if(void 0!==V){var ee=V.getSource().type;"geojson"===ee&&B?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ee||B?(void 0===f.id&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),V.setFeatureState(B,f.id,x)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},g.prototype.removeFeatureState=function(f,x){this._checkLoaded();var P=f.source,B=this.sourceCaches[P];if(void 0!==B){var V=B.getSource().type,ee="vector"===V?f.sourceLayer:void 0;"vector"!==V||ee?x&&"string"!=typeof f.id&&"number"!=typeof f.id?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):B.removeFeatureState(ee,f.id,x):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},g.prototype.getFeatureState=function(f){this._checkLoaded();var x=f.source,P=f.sourceLayer,B=this.sourceCaches[x];if(void 0!==B){if("vector"!==B.getSource().type||P)return void 0===f.id&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),B.getFeatureState(P,f.id);this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new u.ErrorEvent(new Error("The source '"+x+"' does not exist in the map's style.")))},g.prototype.getTransition=function(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},g.prototype.serialize=function(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,function(f){return f.serialize()}),layers:this._serializeLayers(this._order)},function(f){return void 0!==f})},g.prototype._updateLayer=function(f){this._updatedLayers[f.id]=!0,f.source&&!this._updatedSources[f.source]&&"raster"!==this.sourceCaches[f.source].getSource().type&&(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause()),this._changed=!0},g.prototype._flattenAndSortRenderedFeatures=function(f){for(var x=this,P=function(zn){return"fill-extrusion"===x._layers[zn].type},B={},V=[],ee=this._order.length-1;ee>=0;ee--){var Ce=this._order[ee];if(P(Ce)){B[Ce]=ee;for(var Re=0,I=f;Re<I.length;Re+=1){var R=I[Re][Ce];if(R)for(var S=0,U=R;S<U.length;S+=1)V.push(U[S])}}}V.sort(function(zn,Rn){return Rn.intersectionZ-zn.intersectionZ});for(var $=[],ue=this._order.length-1;ue>=0;ue--){var oe=this._order[ue];if(P(oe))for(var Ne=V.length-1;Ne>=0;Ne--){var st=V[Ne].feature;if(B[st.layer.id]<ue)break;$.push(st),V.pop()}else for(var Mt=0,Lt=f;Mt<Lt.length;Mt+=1){var Rt=Lt[Mt][oe];if(Rt)for(var Xt=0,yn=Rt;Xt<yn.length;Xt+=1)$.push(yn[Xt].feature)}}return $},g.prototype.queryRenderedFeatures=function(f,x,P){x&&x.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",x.filter,null,x);var B={};if(x&&x.layers){if(!Array.isArray(x.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var V=0,ee=x.layers;V<ee.length;V+=1){var Ce=ee[V],Re=this._layers[Ce];if(!Re)return this.fire(new u.ErrorEvent(new Error("The layer '"+Ce+"' does not exist in the map's style and cannot be queried for features."))),[];B[Re.source]=!0}}var I=[];for(var R in x.availableImages=this._availableImages,this.sourceCaches)x.layers&&!B[R]||I.push(fn(this.sourceCaches[R],this._layers,this._serializedLayers,f,x,P));return this.placement&&I.push(function(S,U,$,ue,oe,Ne,st){for(var Mt={},Lt=Ne.queryRenderedSymbols(ue),Rt=[],Xt=0,yn=Object.keys(Lt).map(Number);Xt<yn.length;Xt+=1)Rt.push(st[yn[Xt]]);Rt.sort(qt);for(var zn=function(){var Ei=qn[Rn],Lr=Ei.featureIndex.lookupSymbolFeatures(Lt[Ei.bucketInstanceId],U,Ei.bucketIndex,Ei.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,S);for(var ui in Lr){var tr=Mt[ui]=Mt[ui]||[],fr=Lr[ui];fr.sort(function(nr,Bi){var Zi=Ei.featureSortOrder;if(Zi){var Ms=Zi.indexOf(nr.featureIndex);return Zi.indexOf(Bi.featureIndex)-Ms}return Bi.featureIndex-nr.featureIndex});for(var Ji=0,zi=fr;Ji<zi.length;Ji+=1)tr.push(zi[Ji])}},Rn=0,qn=Rt;Rn<qn.length;Rn+=1)zn();var Mi=function(Ei){Mt[Ei].forEach(function(Lr){var ui=Lr.feature,tr=$[S[Ei].source].getFeatureState(ui.layer["source-layer"],ui.id);ui.source=ui.layer.source,ui.layer["source-layer"]&&(ui.sourceLayer=ui.layer["source-layer"]),ui.state=tr})};for(var Si in Mt)Mi(Si);return Mt}(this._layers,this._serializedLayers,this.sourceCaches,f,x,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)},g.prototype.querySourceFeatures=function(f,x){x&&x.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",x.filter,null,x);var P=this.sourceCaches[f];return P?function(B,V){for(var ee=B.getRenderableIds().map(function(U){return B.getTileByID(U)}),Ce=[],Re={},I=0;I<ee.length;I++){var R=ee[I],S=R.tileID.canonical.key;Re[S]||(Re[S]=!0,R.querySourceFeatures(Ce,V))}return Ce}(P,x):[]},g.prototype.addSourceType=function(f,x,P){return g.getSourceType(f)?P(new Error('A source type called "'+f+'" already exists.')):(g.setSourceType(f,x),x.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:x.workerSourceURL},P):P(null,null))},g.prototype.getLight=function(){return this.light.getLight()},g.prototype.setLight=function(f,x){void 0===x&&(x={}),this._checkLoaded();var P=this.light.getLight(),B=!1;for(var V in f)if(!u.deepEqual(f[V],P[V])){B=!0;break}if(B){var ee={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(f,x),this.light.updateTransitions(ee)}},g.prototype._validate=function(f,x,P,B,V){return void 0===V&&(V={}),(!V||!1!==V.validate)&&vs(this,f.call(u.validateStyle,u.extend({key:x,style:this.serialize(),value:P,styleSpec:u.styleSpec},B)))},g.prototype._remove=function(){for(var f in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[f].setEventedParent(null);for(var x in this.sourceCaches)this.sourceCaches[x].clearTiles(),this.sourceCaches[x].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},g.prototype._clearSource=function(f){this.sourceCaches[f].clearTiles()},g.prototype._reloadSource=function(f){this.sourceCaches[f].resume(),this.sourceCaches[f].reload()},g.prototype._updateSources=function(f){for(var x in this.sourceCaches)this.sourceCaches[x].update(f)},g.prototype._generateCollisionBoxes=function(){for(var f in this.sourceCaches)this._reloadSource(f)},g.prototype._updatePlacement=function(f,x,P,B,V){void 0===V&&(V=!1);for(var ee=!1,Ce=!1,Re={},I=0,R=this._order;I<R.length;I+=1){var S=this._layers[R[I]];if("symbol"===S.type){if(!Re[S.source]){var U=this.sourceCaches[S.source];Re[S.source]=U.getRenderableIds(!0).map(function(st){return U.getTileByID(st)}).sort(function(st,Mt){return Mt.tileID.overscaledZ-st.tileID.overscaledZ||(st.tileID.isLessThan(Mt.tileID)?-1:1)})}var $=this.crossTileSymbolIndex.addLayer(S,Re[S.source],f.center.lng);ee=ee||$}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((V=V||this._layerOrderChanged||0===P)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),f.zoom))&&(this.pauseablePlacement=new Bs(f,this._order,V,x,P,B,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Re),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),Ce=!0),ee&&this.pauseablePlacement.placement.setStale()),Ce||ee)for(var ue=0,oe=this._order;ue<oe.length;ue+=1){var Ne=this._layers[oe[ue]];"symbol"===Ne.type&&this.placement.updateLayerOpacities(Ne,Re[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())},g.prototype._releaseSymbolFadeTiles=function(){for(var f in this.sourceCaches)this.sourceCaches[f].releaseSymbolFadeTiles()},g.prototype.getImages=function(f,x,P){this.imageManager.getImages(x.icons,P),this._updateTilesForChangedImages();var B=this.sourceCaches[x.source];B&&B.setDependencies(x.tileID.key,x.type,x.icons)},g.prototype.getGlyphs=function(f,x,P){this.glyphManager.getGlyphs(x.stacks,P)},g.prototype.getResource=function(f,x,P){return u.makeRequest(x,P)},g}(u.Evented);Zo.getSourceType=function(p){return Jt[p]},Zo.setSourceType=function(p,g){Jt[p]=g},Zo.registerForPluginStateChange=u.registerForPluginStateChange;var to=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),hs=$r("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ll=$r("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ml=$r("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),aa=$r("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),la=$r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ql=$r("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ou=$r("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),du=$r("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),hu=$r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),_c=$r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ic=$r("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),pu=$r("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Pu=$r("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Jl=$r("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),qr=$r("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ua=$r("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),gl=$r("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Wl=$r("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ca=$r("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Js=$r("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Pa=$r("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ta=$r("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),_l=$r("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),yl=$r("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Ql=$r("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Kl=$r("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function $r(p,g){var f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=g.match(/attribute ([\w]+) ([\w]+)/g),P=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),V=B?B.concat(P):P,ee={};return{fragmentSource:p=p.replace(f,function(Ce,Re,I,R,S){return ee[S]=!0,"define"===Re?"\n#ifndef HAS_UNIFORM_u_"+S+"\nvarying "+I+" "+R+" "+S+";\n#else\nuniform "+I+" "+R+" u_"+S+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+S+"\n    "+I+" "+R+" "+S+" = u_"+S+";\n#endif\n"}),vertexSource:g=g.replace(f,function(Ce,Re,I,R,S){var U="float"===R?"vec2":"vec4",$=S.match(/color/)?"color":U;return ee[S]?"define"===Re?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+I+" "+U+" a_"+S+";\nvarying "+I+" "+R+" "+S+";\n#else\nuniform "+I+" "+R+" u_"+S+";\n#endif\n":"vec4"===$?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = a_"+S+";\n#else\n    "+I+" "+R+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+S+" = unpack_mix_"+$+"(a_"+S+", u_"+S+"_t);\n#else\n    "+I+" "+R+" "+S+" = u_"+S+";\n#endif\n":"define"===Re?"\n#ifndef HAS_UNIFORM_u_"+S+"\nuniform lowp float u_"+S+"_t;\nattribute "+I+" "+U+" a_"+S+";\n#else\nuniform "+I+" "+R+" u_"+S+";\n#endif\n":"vec4"===$?"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+I+" "+R+" "+S+" = a_"+S+";\n#else\n    "+I+" "+R+" "+S+" = u_"+S+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+S+"\n    "+I+" "+R+" "+S+" = unpack_mix_"+$+"(a_"+S+", u_"+S+"_t);\n#else\n    "+I+" "+R+" "+S+" = u_"+S+";\n#endif\n"}),staticAttributes:x,staticUniforms:V}}var rc=Object.freeze({__proto__:null,prelude:hs,background:Ll,backgroundPattern:ml,circle:aa,clippingMask:la,heatmap:ql,heatmapTexture:Ou,collisionBox:du,collisionCircle:hu,debug:_c,fill:ic,fillOutline:pu,fillOutlinePattern:Pu,fillPattern:Jl,fillExtrusion:qr,fillExtrusionPattern:ua,hillshadePrepare:gl,hillshade:Wl,line:Ca,lineGradient:Js,linePattern:Pa,lineSDF:Ta,raster:_l,symbolIcon:yl,symbolSDF:Ql,symbolTextAndIcon:Kl}),$a=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ca(p){for(var g=[],f=0;f<p.length;f++)if(null!==p[f]){var x=p[f].split(" ");g.push(x.pop())}return g}$a.prototype.bind=function(p,g,f,x,P,B,V,ee){this.context=p;for(var Ce=this.boundPaintVertexBuffers.length!==x.length,Re=0;!Ce&&Re<x.length;Re++)this.boundPaintVertexBuffers[Re]!==x[Re]&&(Ce=!0);p.extVertexArrayObject&&this.vao&&this.boundProgram===g&&this.boundLayoutVertexBuffer===f&&!Ce&&this.boundIndexBuffer===P&&this.boundVertexOffset===B&&this.boundDynamicVertexBuffer===V&&this.boundDynamicVertexBuffer2===ee?(p.bindVertexArrayOES.set(this.vao),V&&V.bind(),P&&P.dynamicDraw&&P.bind(),ee&&ee.bind()):this.freshBind(g,f,x,P,B,V,ee)},$a.prototype.freshBind=function(p,g,f,x,P,B,V){var ee,Ce=p.numAttributes,Re=this.context,I=Re.gl;if(Re.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Re.extVertexArrayObject.createVertexArrayOES(),Re.bindVertexArrayOES.set(this.vao),ee=0,this.boundProgram=p,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=x,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=B,this.boundDynamicVertexBuffer2=V;else{ee=Re.currentNumAttributes||0;for(var R=Ce;R<ee;R++)I.disableVertexAttribArray(R)}g.enableAttributes(I,p);for(var S=0,U=f;S<U.length;S+=1)U[S].enableAttributes(I,p);B&&B.enableAttributes(I,p),V&&V.enableAttributes(I,p),g.bind(),g.setVertexAttribPointers(I,p,P);for(var $=0,ue=f;$<ue.length;$+=1){var oe=ue[$];oe.bind(),oe.setVertexAttribPointers(I,p,P)}B&&(B.bind(),B.setVertexAttribPointers(I,p,P)),x&&x.bind(),V&&(V.bind(),V.setVertexAttribPointers(I,p,P)),Re.currentNumAttributes=Ce},$a.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ws=function(p,g,f,x,P,B){var V=p.gl;this.program=V.createProgram();for(var ee=ca(f.staticAttributes),Ce=x?x.getBinderAttributes():[],Re=ee.concat(Ce),I=f.staticUniforms?ca(f.staticUniforms):[],R=x?x.getBinderUniforms():[],S=[],U=0,$=I.concat(R);U<$.length;U+=1){var ue=$[U];S.indexOf(ue)<0&&S.push(ue)}var oe=x?x.defines():[];B&&oe.push("#define OVERDRAW_INSPECTOR;");var Ne=oe.concat(hs.fragmentSource,f.fragmentSource).join("\n"),st=oe.concat(hs.vertexSource,f.vertexSource).join("\n"),Mt=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())this.failedToCreate=!0;else{V.shaderSource(Mt,Ne),V.compileShader(Mt),V.attachShader(this.program,Mt);var Lt=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())this.failedToCreate=!0;else{V.shaderSource(Lt,st),V.compileShader(Lt),V.attachShader(this.program,Lt),this.attributes={};var Rt={};this.numAttributes=Re.length;for(var Xt=0;Xt<this.numAttributes;Xt++)Re[Xt]&&(V.bindAttribLocation(this.program,Xt,Re[Xt]),this.attributes[Re[Xt]]=Xt);V.linkProgram(this.program),V.deleteShader(Lt),V.deleteShader(Mt);for(var yn=0;yn<S.length;yn++){var zn=S[yn];if(zn&&!Rt[zn]){var Rn=V.getUniformLocation(this.program,zn);Rn&&(Rt[zn]=Rn)}}this.fixedUniforms=P(p,Rt),this.binderUniforms=x?x.getUniforms(p,Rt):[]}}};function vl(p,g,f){var x=1/Xi(f,1,g.transform.tileZoom),P=Math.pow(2,f.tileID.overscaledZ),B=f.tileSize*Math.pow(2,g.transform.tileZoom)/P,V=B*(f.tileID.canonical.x+f.tileID.wrap*P),ee=B*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[x,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[V>>16,ee>>16],u_pixel_coord_lower:[65535&V,65535&ee]}}ws.prototype.draw=function(p,g,f,x,P,B,V,ee,Ce,Re,I,R,S,U,$,ue){var oe,Ne=p.gl;if(!this.failedToCreate){for(var st in p.program.set(this.program),p.setDepthMode(f),p.setStencilMode(x),p.setColorMode(P),p.setCullFace(B),this.fixedUniforms)this.fixedUniforms[st].set(V[st]);U&&U.setUniforms(p,this.binderUniforms,R,{zoom:S});for(var Mt=(oe={},oe[Ne.LINES]=2,oe[Ne.TRIANGLES]=3,oe[Ne.LINE_STRIP]=1,oe)[g],Lt=0,Rt=I.get();Lt<Rt.length;Lt+=1){var Xt=Rt[Lt],yn=Xt.vaos||(Xt.vaos={});(yn[ee]||(yn[ee]=new $a)).bind(p,this,Ce,U?U.getPaintVertexBuffers():[],Re,Xt.vertexOffset,$,ue),Ne.drawElements(g,Xt.primitiveLength*Mt,Ne.UNSIGNED_SHORT,Xt.primitiveOffset*Mt*2)}}};var Bl=function(p,g,f,x){var P=g.style.light,B=P.properties.get("position"),V=[B.x,B.y,B.z],ee=u.create$1();"viewport"===P.properties.get("anchor")&&u.fromRotation(ee,-g.transform.angle),u.transformMat3(V,V,ee);var Ce=P.properties.get("color");return{u_matrix:p,u_lightpos:V,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[Ce.r,Ce.g,Ce.b],u_vertical_gradient:+f,u_opacity:x}},So=function(p,g,f,x,P,B,V){return u.extend(Bl(p,g,f,x),vl(B,g,V),{u_height_factor:-Math.pow(2,P.overscaledZ)/V.tileSize/8})},Ws=function(p){return{u_matrix:p}},Is=function(p,g,f,x){return u.extend(Ws(p),vl(f,g,x))},gn=function(p,g){return{u_matrix:p,u_world:g}},oc=function(p,g,f,x,P){return u.extend(Is(p,g,f,x),{u_world:P})},Ya=function(p,g,f,x){var P,B,V=p.transform;if("map"===x.paint.get("circle-pitch-alignment")){var ee=Xi(f,1,V.zoom);P=!0,B=[ee,ee]}else P=!1,B=V.pixelsToGLUnits;return{u_camera_to_center_distance:V.cameraToCenterDistance,u_scale_with_map:+("map"===x.paint.get("circle-pitch-scale")),u_matrix:p.translatePosMatrix(g.posMatrix,f,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_pitch_with_map:+P,u_device_pixel_ratio:u.browser.devicePixelRatio,u_extrude_scale:B}},Cs=function(p,g,f){var x=Xi(f,1,g.zoom),P=Math.pow(2,g.zoom-f.tileID.overscaledZ),B=f.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:g.cameraToCenterDistance,u_pixels_to_tile_units:x,u_extrude_scale:[g.pixelsToGLUnits[0]/(x*P),g.pixelsToGLUnits[1]/(x*P)],u_overscale_factor:B}},da=function(p,g,f){return{u_matrix:p,u_inv_matrix:g,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}},Da=function(p,g,f){return void 0===f&&(f=1),{u_matrix:p,u_color:g,u_overlay:0,u_overlay_scale:f}},zs=function(p){return{u_matrix:p}},ka=function(p,g,f,x){return{u_matrix:p,u_extrude_scale:Xi(g,1,f),u_intensity:x}},Jo=function(p,g,f){var x=p.transform;return{u_matrix:_n(p,g,f),u_ratio:1/Xi(g,1,x.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},ye=function(p,g,f,x){return u.extend(Jo(p,g,f),{u_image:0,u_image_height:x})},ve=function(p,g,f,x){var P=p.transform,B=We(g,P);return{u_matrix:_n(p,g,f),u_texsize:g.imageAtlasTexture.size,u_ratio:1/Xi(g,1,P.zoom),u_device_pixel_ratio:u.browser.devicePixelRatio,u_image:0,u_scale:[B,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},ne=function(p,g,f,x,P){var B=p.lineAtlas,V=We(g,p.transform),ee="round"===f.layout.get("line-cap"),Ce=B.getDash(x.from,ee),Re=B.getDash(x.to,ee),I=Ce.width*P.fromScale,R=Re.width*P.toScale;return u.extend(Jo(p,g,f),{u_patternscale_a:[V/I,-Ce.height/2],u_patternscale_b:[V/R,-Re.height/2],u_sdfgamma:B.width/(256*Math.min(I,R)*u.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:Re.y,u_mix:P.t})};function We(p,g){return 1/Xi(p,1,g.tileZoom)}function _n(p,g,f){return p.translatePosMatrix(g.tileID.posMatrix,g,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}var ki=function(p,g,f,x,P){return{u_matrix:p,u_tl_parent:g,u_scale_parent:f,u_buffer_scale:1,u_fade_t:x.mix,u_opacity:x.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(V=P.paint.get("raster-saturation"),V>0?1-1/(1.001-V):-V),u_contrast_factor:(B=P.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:Wo(P.paint.get("raster-hue-rotate"))};var B,V};function Wo(p){p*=Math.PI/180;var g=Math.sin(p),f=Math.cos(p);return[(2*f+1)/3,(-Math.sqrt(3)*g-f+1)/3,(Math.sqrt(3)*g-f+1)/3]}var Nr,Qs=function(p,g,f,x,P,B,V,ee,Ce,Re){var I=P.transform;return{u_is_size_zoom_constant:+("constant"===p||"source"===p),u_is_size_feature_constant:+("constant"===p||"camera"===p),u_size_t:g?g.uSizeT:0,u_size:g?g.uSize:0,u_camera_to_center_distance:I.cameraToCenterDistance,u_pitch:I.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:I.width/I.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:V,u_coord_matrix:ee,u_is_text:+Ce,u_pitch_with_map:+x,u_texsize:Re,u_texture:0}},js=function(p,g,f,x,P,B,V,ee,Ce,Re,I){var R=P.transform;return u.extend(Qs(p,g,f,x,P,B,V,ee,Ce,Re),{u_gamma_scale:x?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:u.browser.devicePixelRatio,u_is_halo:+I})},Xl=function(p,g,f,x,P,B,V,ee,Ce,Re){return u.extend(js(p,g,f,x,P,B,V,ee,!0,Ce,!0),{u_texsize_icon:Re,u_texture_icon:1})},Un=function(p,g,f){return{u_matrix:p,u_opacity:g,u_color:f}},vr=function(p,g,f,x,P,B){return u.extend((ee=B,Re=P,I=(Ce=f).imageManager.getPattern((V=x).from.toString()),R=Ce.imageManager.getPattern(V.to.toString()),U=(S=Ce.imageManager.getPixelSize()).width,$=S.height,ue=Math.pow(2,Re.tileID.overscaledZ),Ne=(oe=Re.tileSize*Math.pow(2,Ce.transform.tileZoom)/ue)*(Re.tileID.canonical.x+Re.tileID.wrap*ue),st=oe*Re.tileID.canonical.y,{u_image:0,u_pattern_tl_a:I.tl,u_pattern_br_a:I.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[U,$],u_mix:ee.t,u_pattern_size_a:I.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:ee.fromScale,u_scale_b:ee.toScale,u_tile_units_to_pixels:1/Xi(Re,1,Ce.transform.tileZoom),u_pixel_coord_upper:[Ne>>16,st>>16],u_pixel_coord_lower:[65535&Ne,65535&st]}),{u_matrix:p,u_opacity:g});var V,ee,Ce,Re,I,R,S,U,$,ue,oe,Ne,st},ku={fillExtrusion:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_lightpos:new u.Uniform3f(p,g.u_lightpos),u_lightintensity:new u.Uniform1f(p,g.u_lightintensity),u_lightcolor:new u.Uniform3f(p,g.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,g.u_vertical_gradient),u_opacity:new u.Uniform1f(p,g.u_opacity)}},fillExtrusionPattern:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_lightpos:new u.Uniform3f(p,g.u_lightpos),u_lightintensity:new u.Uniform1f(p,g.u_lightintensity),u_lightcolor:new u.Uniform3f(p,g.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,g.u_vertical_gradient),u_height_factor:new u.Uniform1f(p,g.u_height_factor),u_image:new u.Uniform1i(p,g.u_image),u_texsize:new u.Uniform2f(p,g.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,g.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,g.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,g.u_scale),u_fade:new u.Uniform1f(p,g.u_fade),u_opacity:new u.Uniform1f(p,g.u_opacity)}},fill:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix)}},fillPattern:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_image:new u.Uniform1i(p,g.u_image),u_texsize:new u.Uniform2f(p,g.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,g.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,g.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,g.u_scale),u_fade:new u.Uniform1f(p,g.u_fade)}},fillOutline:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_world:new u.Uniform2f(p,g.u_world)}},fillOutlinePattern:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_world:new u.Uniform2f(p,g.u_world),u_image:new u.Uniform1i(p,g.u_image),u_texsize:new u.Uniform2f(p,g.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,g.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,g.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,g.u_scale),u_fade:new u.Uniform1f(p,g.u_fade)}},circle:function(p,g){return{u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(p,g.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(p,g.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(p,g.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(p,g.u_matrix)}},collisionBox:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(p,g.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(p,g.u_extrude_scale),u_overscale_factor:new u.Uniform1f(p,g.u_overscale_factor)}},collisionCircle:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_inv_matrix:new u.UniformMatrix4f(p,g.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(p,g.u_viewport_size)}},debug:function(p,g){return{u_color:new u.UniformColor(p,g.u_color),u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_overlay:new u.Uniform1i(p,g.u_overlay),u_overlay_scale:new u.Uniform1f(p,g.u_overlay_scale)}},clippingMask:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix)}},heatmap:function(p,g){return{u_extrude_scale:new u.Uniform1f(p,g.u_extrude_scale),u_intensity:new u.Uniform1f(p,g.u_intensity),u_matrix:new u.UniformMatrix4f(p,g.u_matrix)}},heatmapTexture:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_world:new u.Uniform2f(p,g.u_world),u_image:new u.Uniform1i(p,g.u_image),u_color_ramp:new u.Uniform1i(p,g.u_color_ramp),u_opacity:new u.Uniform1f(p,g.u_opacity)}},hillshade:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_image:new u.Uniform1i(p,g.u_image),u_latrange:new u.Uniform2f(p,g.u_latrange),u_light:new u.Uniform2f(p,g.u_light),u_shadow:new u.UniformColor(p,g.u_shadow),u_highlight:new u.UniformColor(p,g.u_highlight),u_accent:new u.UniformColor(p,g.u_accent)}},hillshadePrepare:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_image:new u.Uniform1i(p,g.u_image),u_dimension:new u.Uniform2f(p,g.u_dimension),u_zoom:new u.Uniform1f(p,g.u_zoom),u_unpack:new u.Uniform4f(p,g.u_unpack)}},line:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_ratio:new u.Uniform1f(p,g.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,g.u_units_to_pixels)}},lineGradient:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_ratio:new u.Uniform1f(p,g.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,g.u_units_to_pixels),u_image:new u.Uniform1i(p,g.u_image),u_image_height:new u.Uniform1f(p,g.u_image_height)}},linePattern:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_texsize:new u.Uniform2f(p,g.u_texsize),u_ratio:new u.Uniform1f(p,g.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_image:new u.Uniform1i(p,g.u_image),u_units_to_pixels:new u.Uniform2f(p,g.u_units_to_pixels),u_scale:new u.Uniform3f(p,g.u_scale),u_fade:new u.Uniform1f(p,g.u_fade)}},lineSDF:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_ratio:new u.Uniform1f(p,g.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,g.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(p,g.u_patternscale_a),u_patternscale_b:new u.Uniform2f(p,g.u_patternscale_b),u_sdfgamma:new u.Uniform1f(p,g.u_sdfgamma),u_image:new u.Uniform1i(p,g.u_image),u_tex_y_a:new u.Uniform1f(p,g.u_tex_y_a),u_tex_y_b:new u.Uniform1f(p,g.u_tex_y_b),u_mix:new u.Uniform1f(p,g.u_mix)}},raster:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_tl_parent:new u.Uniform2f(p,g.u_tl_parent),u_scale_parent:new u.Uniform1f(p,g.u_scale_parent),u_buffer_scale:new u.Uniform1f(p,g.u_buffer_scale),u_fade_t:new u.Uniform1f(p,g.u_fade_t),u_opacity:new u.Uniform1f(p,g.u_opacity),u_image0:new u.Uniform1i(p,g.u_image0),u_image1:new u.Uniform1i(p,g.u_image1),u_brightness_low:new u.Uniform1f(p,g.u_brightness_low),u_brightness_high:new u.Uniform1f(p,g.u_brightness_high),u_saturation_factor:new u.Uniform1f(p,g.u_saturation_factor),u_contrast_factor:new u.Uniform1f(p,g.u_contrast_factor),u_spin_weights:new u.Uniform3f(p,g.u_spin_weights)}},symbolIcon:function(p,g){return{u_is_size_zoom_constant:new u.Uniform1i(p,g.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,g.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,g.u_size_t),u_size:new u.Uniform1f(p,g.u_size),u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,g.u_pitch),u_rotate_symbol:new u.Uniform1i(p,g.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,g.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,g.u_fade_change),u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,g.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,g.u_coord_matrix),u_is_text:new u.Uniform1i(p,g.u_is_text),u_pitch_with_map:new u.Uniform1i(p,g.u_pitch_with_map),u_texsize:new u.Uniform2f(p,g.u_texsize),u_texture:new u.Uniform1i(p,g.u_texture)}},symbolSDF:function(p,g){return{u_is_size_zoom_constant:new u.Uniform1i(p,g.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,g.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,g.u_size_t),u_size:new u.Uniform1f(p,g.u_size),u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,g.u_pitch),u_rotate_symbol:new u.Uniform1i(p,g.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,g.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,g.u_fade_change),u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,g.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,g.u_coord_matrix),u_is_text:new u.Uniform1i(p,g.u_is_text),u_pitch_with_map:new u.Uniform1i(p,g.u_pitch_with_map),u_texsize:new u.Uniform2f(p,g.u_texsize),u_texture:new u.Uniform1i(p,g.u_texture),u_gamma_scale:new u.Uniform1f(p,g.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,g.u_is_halo)}},symbolTextAndIcon:function(p,g){return{u_is_size_zoom_constant:new u.Uniform1i(p,g.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,g.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,g.u_size_t),u_size:new u.Uniform1f(p,g.u_size),u_camera_to_center_distance:new u.Uniform1f(p,g.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,g.u_pitch),u_rotate_symbol:new u.Uniform1i(p,g.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,g.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,g.u_fade_change),u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,g.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,g.u_coord_matrix),u_is_text:new u.Uniform1i(p,g.u_is_text),u_pitch_with_map:new u.Uniform1i(p,g.u_pitch_with_map),u_texsize:new u.Uniform2f(p,g.u_texsize),u_texsize_icon:new u.Uniform2f(p,g.u_texsize_icon),u_texture:new u.Uniform1i(p,g.u_texture),u_texture_icon:new u.Uniform1i(p,g.u_texture_icon),u_gamma_scale:new u.Uniform1f(p,g.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,g.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,g.u_is_halo)}},background:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_opacity:new u.Uniform1f(p,g.u_opacity),u_color:new u.UniformColor(p,g.u_color)}},backgroundPattern:function(p,g){return{u_matrix:new u.UniformMatrix4f(p,g.u_matrix),u_opacity:new u.Uniform1f(p,g.u_opacity),u_image:new u.Uniform1i(p,g.u_image),u_pattern_tl_a:new u.Uniform2f(p,g.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(p,g.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(p,g.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(p,g.u_pattern_br_b),u_texsize:new u.Uniform2f(p,g.u_texsize),u_mix:new u.Uniform1f(p,g.u_mix),u_pattern_size_a:new u.Uniform2f(p,g.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(p,g.u_pattern_size_b),u_scale_a:new u.Uniform1f(p,g.u_scale_a),u_scale_b:new u.Uniform1f(p,g.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(p,g.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,g.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(p,g.u_tile_units_to_pixels)}}};function Ra(p,g,f,x,P,B,V){for(var ee=p.context,Ce=ee.gl,Re=p.useProgram("collisionBox"),I=[],R=0,S=0,U=0;U<x.length;U++){var $=x[U],ue=g.getTile($),oe=ue.getBucket(f);if(oe){var Ne=$.posMatrix;0===P[0]&&0===P[1]||(Ne=p.translatePosMatrix($.posMatrix,ue,P,B));var st=V?oe.textCollisionBox:oe.iconCollisionBox,Mt=oe.collisionCircleArray;if(Mt.length>0){var Lt=u.create(),Rt=Ne;u.mul(Lt,oe.placementInvProjMatrix,p.transform.glCoordMatrix),u.mul(Lt,Lt,oe.placementViewportMatrix),I.push({circleArray:Mt,circleOffset:S,transform:Rt,invTransform:Lt}),S=R+=Mt.length/4}st&&Re.draw(ee,Ce.LINES,re.disabled,_e.disabled,p.colorModeForRenderPass(),Ze.disabled,Cs(Ne,p.transform,ue),f.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,p.transform.zoom,null,null,st.collisionVertexBuffer)}}if(V&&I.length){var Xt=p.useProgram("collisionCircle"),yn=new u.StructArrayLayout2f1f2i16;yn.resize(4*R),yn._trim();for(var zn=0,Rn=0,qn=I;Rn<qn.length;Rn+=1)for(var Mi=qn[Rn],Si=0;Si<Mi.circleArray.length/4;Si++){var Ei=4*Si,Lr=Mi.circleArray[Ei+0],ui=Mi.circleArray[Ei+1],tr=Mi.circleArray[Ei+2],fr=Mi.circleArray[Ei+3];yn.emplace(zn++,Lr,ui,tr,fr,0),yn.emplace(zn++,Lr,ui,tr,fr,1),yn.emplace(zn++,Lr,ui,tr,fr,2),yn.emplace(zn++,Lr,ui,tr,fr,3)}(!Nr||Nr.length<2*R)&&(Nr=function(Ss){var ja=2*Ss,ks=new u.StructArrayLayout3ui6;ks.resize(ja),ks._trim();for(var $o=0;$o<ja;$o++){var is=6*$o;ks.uint16[is+0]=4*$o+0,ks.uint16[is+1]=4*$o+1,ks.uint16[is+2]=4*$o+2,ks.uint16[is+3]=4*$o+2,ks.uint16[is+4]=4*$o+3,ks.uint16[is+5]=4*$o+0}return ks}(R));for(var Ji=ee.createIndexBuffer(Nr,!0),zi=ee.createVertexBuffer(yn,u.collisionCircleLayout.members,!0),nr=0,Bi=I;nr<Bi.length;nr+=1){var Zi=Bi[nr],Ms=da(Zi.transform,Zi.invTransform,p.transform);Xt.draw(ee,Ce.TRIANGLES,re.disabled,_e.disabled,p.colorModeForRenderPass(),Ze.disabled,Ms,f.id,zi,Ji,u.SegmentVector.simpleSegment(0,2*Zi.circleOffset,Zi.circleArray.length,Zi.circleArray.length/2),null,p.transform.zoom,null,null,null)}zi.destroy(),Ji.destroy()}}var Ro=u.identity(new Float32Array(16));function fu(p,g,f,x,P,B){var V=u.getAnchorAlignment(p),ee=-(V.horizontalAlign-.5)*g,Ce=-(V.verticalAlign-.5)*f,Re=u.evaluateVariableOffset(p,x);return new u.Point((ee/P+Re[0])*B,(Ce/P+Re[1])*B)}function eu(p,g,f,x,P,B,V,ee,Ce,Re,I){var R=p.text.placedSymbolArray,S=p.text.dynamicLayoutVertexArray,U=p.icon.dynamicLayoutVertexArray,$={};S.clear();for(var ue=0;ue<R.length;ue++){var oe=R.get(ue),Ne=oe.hidden||!oe.crossTileID||p.allowVerticalPlacement&&!oe.placedOrientation?null:x[oe.crossTileID];if(Ne){var st=new u.Point(oe.anchorX,oe.anchorY),Mt=Xe(st,f?ee:V),Lt=Ct(B.cameraToCenterDistance,Mt.signedDistanceFromCamera),Rt=P.evaluateSizeForFeature(p.textSizeData,Re,oe)*Lt/u.ONE_EM;f&&(Rt*=p.tilePixelRatio/Ce);for(var Xt=fu(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale,Rt),yn=f?Xe(st.add(Xt),V).point:Mt.point.add(g?Xt.rotate(-B.angle):Xt),zn=p.allowVerticalPlacement&&oe.placedOrientation===u.WritingMode.vertical?Math.PI/2:0,Rn=0;Rn<oe.numGlyphs;Rn++)u.addDynamicAttributes(S,yn,zn);I&&oe.associatedIconIndex>=0&&($[oe.associatedIconIndex]={shiftedAnchor:yn,angle:zn})}else Ri(oe.numGlyphs,S)}if(I){U.clear();for(var qn=p.icon.placedSymbolArray,Mi=0;Mi<qn.length;Mi++){var Si=qn.get(Mi);if(Si.hidden)Ri(Si.numGlyphs,U);else{var Ei=$[Mi];if(Ei)for(var Lr=0;Lr<Si.numGlyphs;Lr++)u.addDynamicAttributes(U,Ei.shiftedAnchor,Ei.angle);else Ri(Si.numGlyphs,U)}}p.icon.dynamicLayoutVertexBuffer.updateData(U)}p.text.dynamicLayoutVertexBuffer.updateData(S)}function ha(p,g,f){return f.iconsInText&&g?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function nl(p,g,f,x,P,B,V,ee,Ce,Re,I,R){for(var S=p.context,U=S.gl,$=p.transform,ue="map"===ee,oe="map"===Ce,Ne=ue&&"point"!==f.layout.get("symbol-placement"),st=ue&&!oe&&!Ne,Mt=void 0!==f.layout.get("symbol-sort-key").constantOr(1),Lt=!1,Rt=p.depthModeForSublayer(0,re.ReadOnly),Xt=f.layout.get("text-variable-anchor"),yn=[],zn=0,Rn=x;zn<Rn.length;zn+=1){var qn=Rn[zn],Mi=g.getTile(qn),Si=Mi.getBucket(f);if(Si){var Ei=P?Si.text:Si.icon;if(Ei&&Ei.segments.get().length){var Lr=Ei.programConfigurations.get(f.id),ui=P||Si.sdfIcons,tr=P?Si.textSizeData:Si.iconSizeData,fr=oe||0!==$.pitch,Ji=p.useProgram(ha(ui,P,Si),Lr),zi=u.evaluateSizeForZoom(tr,$.zoom),nr=void 0,Bi=[0,0],Zi=void 0,Ms=void 0,Ss=null,ja=void 0;if(P)Zi=Mi.glyphAtlasTexture,Ms=U.LINEAR,nr=Mi.glyphAtlasTexture.size,Si.iconsInText&&(Bi=Mi.imageAtlasTexture.size,Ss=Mi.imageAtlasTexture,ja=fr||p.options.rotating||p.options.zooming||"composite"===tr.kind||"camera"===tr.kind?U.LINEAR:U.NEAREST);else{var ks=1!==f.layout.get("icon-size").constantOr(0)||Si.iconsNeedLinear;Zi=Mi.imageAtlasTexture,Ms=ui||p.options.rotating||p.options.zooming||ks||fr?U.LINEAR:U.NEAREST,nr=Mi.imageAtlasTexture.size}var $o=Xi(Mi,1,p.transform.zoom),is=Ae(qn.posMatrix,oe,ue,p.transform,$o),ol=Te(qn.posMatrix,oe,ue,p.transform,$o),sl=Xt&&Si.hasTextData(),Cl="none"!==f.layout.get("icon-text-fit")&&sl&&Si.hasIconData();Ne&&Tn(Si,qn.posMatrix,p,P,is,ol,oe,Re);var Ys=p.translatePosMatrix(qn.posMatrix,Mi,B,V),Tl=Ne||P&&Xt||Cl?Ro:is,vu=p.translatePosMatrix(ol,Mi,B,V,!0),Ac=ui&&0!==f.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1),Ic={program:Ji,buffers:Ei,uniformValues:ui?Si.iconsInText?Xl(tr.kind,zi,st,oe,p,Ys,Tl,vu,nr,Bi):js(tr.kind,zi,st,oe,p,Ys,Tl,vu,P,nr,!0):Qs(tr.kind,zi,st,oe,p,Ys,Tl,vu,P,nr),atlasTexture:Zi,atlasTextureIcon:Ss,atlasInterpolation:Ms,atlasInterpolationIcon:ja,isSDF:ui,hasHalo:Ac};if(Mt&&Si.canOverlap){Lt=!0;for(var Oc=0,ou=Ei.segments.get();Oc<ou.length;Oc+=1){var Ld=ou[Oc];yn.push({segments:new u.SegmentVector([Ld]),sortKey:Ld.sortKey,state:Ic})}}else yn.push({segments:Ei.segments,sortKey:0,state:Ic})}}}Lt&&yn.sort(function(Xc,Pc){return Xc.sortKey-Pc.sortKey});for(var bu=0,Kc=yn;bu<Kc.length;bu+=1){var lc=Kc[bu],ya=lc.state;if(S.activeTexture.set(U.TEXTURE0),ya.atlasTexture.bind(ya.atlasInterpolation,U.CLAMP_TO_EDGE),ya.atlasTextureIcon&&(S.activeTexture.set(U.TEXTURE1),ya.atlasTextureIcon&&ya.atlasTextureIcon.bind(ya.atlasInterpolationIcon,U.CLAMP_TO_EDGE)),ya.isSDF){var vc=ya.uniformValues;ya.hasHalo&&(vc.u_is_halo=1,pa(ya.buffers,lc.segments,f,p,ya.program,Rt,I,R,vc)),vc.u_is_halo=0}pa(ya.buffers,lc.segments,f,p,ya.program,Rt,I,R,ya.uniformValues)}}function pa(p,g,f,x,P,B,V,ee,Ce){var Re=x.context;P.draw(Re,Re.gl.TRIANGLES,B,V,ee,Ze.disabled,Ce,f.id,p.layoutVertexBuffer,p.indexBuffer,g,f.paint,x.transform.zoom,p.programConfigurations.get(f.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Fa(p,g,f,x,P,B,V){var ee,Ce,Re,I,R,S=p.context.gl,U=f.paint.get("fill-pattern"),$=U&&U.constantOr(1),ue=f.getCrossfadeParameters();V?(Ce=$&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=S.LINES):(Ce=$?"fillPattern":"fill",ee=S.TRIANGLES);for(var oe=0,Ne=x;oe<Ne.length;oe+=1){var st=Ne[oe],Mt=g.getTile(st);if(!$||Mt.patternsLoaded()){var Lt=Mt.getBucket(f);if(Lt){var Rt=Lt.programConfigurations.get(f.id),Xt=p.useProgram(Ce,Rt);$&&(p.context.activeTexture.set(S.TEXTURE0),Mt.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),Rt.updatePaintBuffers(ue));var yn=U.constantOr(null);if(yn&&Mt.imageAtlas){var zn=Mt.imageAtlas,Rn=zn.patternPositions[yn.to.toString()],qn=zn.patternPositions[yn.from.toString()];Rn&&qn&&Rt.setConstantPatternPositions(Rn,qn)}var Mi=p.translatePosMatrix(st.posMatrix,Mt,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(V){I=Lt.indexBuffer2,R=Lt.segments2;var Si=[S.drawingBufferWidth,S.drawingBufferHeight];Re="fillOutlinePattern"===Ce&&$?oc(Mi,p,ue,Mt,Si):gn(Mi,Si)}else I=Lt.indexBuffer,R=Lt.segments,Re=$?Is(Mi,p,ue,Mt):Ws(Mi);Xt.draw(p.context,ee,P,p.stencilModeForClipping(st),B,Ze.disabled,Re,f.id,Lt.layoutVertexBuffer,I,R,f.paint,p.transform.zoom,Rt)}}}}function tu(p,g,f,x,P,B,V){for(var ee=p.context,Ce=ee.gl,Re=f.paint.get("fill-extrusion-pattern"),I=Re.constantOr(1),R=f.getCrossfadeParameters(),S=f.paint.get("fill-extrusion-opacity"),U=0,$=x;U<$.length;U+=1){var ue=$[U],oe=g.getTile(ue),Ne=oe.getBucket(f);if(Ne){var st=Ne.programConfigurations.get(f.id),Mt=p.useProgram(I?"fillExtrusionPattern":"fillExtrusion",st);I&&(p.context.activeTexture.set(Ce.TEXTURE0),oe.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),st.updatePaintBuffers(R));var Lt=Re.constantOr(null);if(Lt&&oe.imageAtlas){var Rt=oe.imageAtlas,Xt=Rt.patternPositions[Lt.to.toString()],yn=Rt.patternPositions[Lt.from.toString()];Xt&&yn&&st.setConstantPatternPositions(Xt,yn)}var zn=p.translatePosMatrix(ue.posMatrix,oe,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Rn=f.paint.get("fill-extrusion-vertical-gradient"),qn=I?So(zn,p,Rn,S,ue,R,oe):Bl(zn,p,Rn,S);Mt.draw(ee,ee.gl.TRIANGLES,P,B,V,Ze.backCCW,qn,f.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,f.paint,p.transform.zoom,st)}}}function mu(p,g,f,x,P,B){var V=p.context,ee=V.gl,Ce=g.fbo;if(Ce){var Re=p.useProgram("hillshade");V.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ce.colorAttachment.get());var I=function(R,S,U){var $=U.paint.get("hillshade-shadow-color"),ue=U.paint.get("hillshade-highlight-color"),oe=U.paint.get("hillshade-accent-color"),Ne=U.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===U.paint.get("hillshade-illumination-anchor")&&(Ne-=R.transform.angle);var st,Mt,Lt,Rt=!R.options.moving;return{u_matrix:R.transform.calculatePosMatrix(S.tileID.toUnwrapped(),Rt),u_image:0,u_latrange:(st=S.tileID,Mt=Math.pow(2,st.canonical.z),Lt=st.canonical.y,[new u.MercatorCoordinate(0,Lt/Mt).toLngLat().lat,new u.MercatorCoordinate(0,(Lt+1)/Mt).toLngLat().lat]),u_light:[U.paint.get("hillshade-exaggeration"),Ne],u_shadow:$,u_highlight:ue,u_accent:oe}}(p,g,f);Re.draw(V,ee.TRIANGLES,x,P,B,Ze.disabled,I,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}}function Os(p,g,f,x,P,B){var ue,oe,Ne,st,V=p.context,ee=V.gl,Ce=g.dem;if(Ce&&Ce.data){var Re=Ce.dim,I=Ce.stride,R=Ce.getPixels();if(V.activeTexture.set(ee.TEXTURE1),V.pixelStoreUnpackPremultiplyAlpha.set(!1),g.demTexture=g.demTexture||p.getTileTexture(I),g.demTexture){var S=g.demTexture;S.update(R,{premultiply:!1}),S.bind(ee.NEAREST,ee.CLAMP_TO_EDGE)}else g.demTexture=new u.Texture(V,R,ee.RGBA,{premultiply:!1}),g.demTexture.bind(ee.NEAREST,ee.CLAMP_TO_EDGE);V.activeTexture.set(ee.TEXTURE0);var U=g.fbo;if(!U){var $=new u.Texture(V,{width:Re,height:Re,data:null},ee.RGBA);$.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),(U=g.fbo=V.createFramebuffer(Re,Re,!0)).colorAttachment.set($.texture)}V.bindFramebuffer.set(U.framebuffer),V.viewport.set([0,0,Re,Re]),p.useProgram("hillshadePrepare").draw(V,ee.TRIANGLES,x,P,B,Ze.disabled,(ue=g.tileID,Ne=(oe=Ce).stride,st=u.create(),u.ortho(st,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(st,st,[0,-u.EXTENT,0]),{u_matrix:st,u_image:1,u_dimension:[Ne,Ne],u_zoom:ue.overscaledZ,u_unpack:oe.getUnpackVector()}),f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),g.needsHillshadePrepare=!1}}function Na(p,g,f,x,P){var B=x.paint.get("raster-fade-duration");if(B>0){var V=u.browser.now(),ee=(V-p.timeAdded)/B,Ce=g?(V-g.timeAdded)/B:-1,Re=f.getSource(),I=P.coveringZoomLevel({tileSize:Re.tileSize,roundZoom:Re.roundZoom}),R=!g||Math.abs(g.tileID.overscaledZ-I)>Math.abs(p.tileID.overscaledZ-I),S=R&&p.refreshedUponExpiration?1:u.clamp(R?ee:1-Ce,0,1);return p.refreshedUponExpiration&&ee>=1&&(p.refreshedUponExpiration=!1),g?{opacity:1,mix:1-S}:{opacity:S,mix:0}}return{opacity:1,mix:0}}var Ru=new u.Color(1,0,0,1),bl=new u.Color(0,1,0,1),fa=new u.Color(0,0,1,1),qa=new u.Color(1,0,1,1),gu=new u.Color(0,1,1,1);function yc(p,g,f,x){ts(p,0,g+f/2,p.transform.width,f,x)}function Ts(p,g,f,x){ts(p,g-f/2,0,f,p.transform.height,x)}function ts(p,g,f,x,P,B){var V=p.context,ee=V.gl;ee.enable(ee.SCISSOR_TEST),ee.scissor(g*u.browser.devicePixelRatio,f*u.browser.devicePixelRatio,x*u.browser.devicePixelRatio,P*u.browser.devicePixelRatio),V.clear({color:B}),ee.disable(ee.SCISSOR_TEST)}function ma(p,g,f){var x=p.context,P=x.gl,B=f.posMatrix,V=p.useProgram("debug"),ee=re.disabled,Ce=_e.disabled,Re=p.colorModeForRenderPass();x.activeTexture.set(P.TEXTURE0),p.emptyTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),V.draw(x,P.LINE_STRIP,ee,Ce,Re,Ze.disabled,Da(B,u.Color.red),"$debug",p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);var I=g.getTileByID(f.key).latestRawTileData,R=Math.floor((I&&I.byteLength||0)/1024),S=g.getTile(f).tileSize,U=512/Math.min(S,512)*(f.overscaledZ/p.transform.zoom)*.5,$=f.canonical.toString();f.overscaledZ!==f.canonical.z&&($+=" => "+f.overscaledZ),function(ue,oe){ue.initDebugOverlayCanvas();var Ne=ue.debugOverlayCanvas,st=ue.context.gl,Mt=ue.debugOverlayCanvas.getContext("2d");Mt.clearRect(0,0,Ne.width,Ne.height),Mt.shadowColor="white",Mt.shadowBlur=2,Mt.lineWidth=1.5,Mt.strokeStyle="white",Mt.textBaseline="top",Mt.font="bold 36px Open Sans, sans-serif",Mt.fillText(oe,5,5),Mt.strokeText(oe,5,5),ue.debugOverlayTexture.update(Ne),ue.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)}(p,$+" "+R+"kb"),V.draw(x,P.TRIANGLES,ee,Ce,Le.alphaBlended,Ze.disabled,Da(B,u.Color.transparent,U),"$debug",p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}var Eo={symbol:function(p,g,f,x,P){if("translucent"===p.renderPass){var B=_e.disabled,V=p.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(ee,Ce,Re,I,R,S,U){for(var $=Ce.transform,ue="map"===R,oe="map"===S,Ne=0,st=ee;Ne<st.length;Ne+=1){var Mt=st[Ne],Lt=I.getTile(Mt),Rt=Lt.getBucket(Re);if(Rt&&Rt.text&&Rt.text.segments.get().length){var Xt=u.evaluateSizeForZoom(Rt.textSizeData,$.zoom),yn=Xi(Lt,1,Ce.transform.zoom),zn=Ae(Mt.posMatrix,oe,ue,Ce.transform,yn),Rn="none"!==Re.layout.get("icon-text-fit")&&Rt.hasIconData();if(Xt){var qn=Math.pow(2,$.zoom-Lt.tileID.overscaledZ);eu(Rt,ue,oe,U,u.symbolSize,$,zn,Mt.posMatrix,qn,Xt,Rn)}}}}(x,p,f,g,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),P),0!==f.paint.get("icon-opacity").constantOr(1)&&nl(p,g,f,x,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),B,V),0!==f.paint.get("text-opacity").constantOr(1)&&nl(p,g,f,x,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),B,V),g.map.showCollisionBoxes&&(Ra(p,g,f,x,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Ra(p,g,f,x,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))}},circle:function(p,g,f,x){if("translucent"===p.renderPass){var P=f.paint.get("circle-opacity"),B=f.paint.get("circle-stroke-width"),V=f.paint.get("circle-stroke-opacity"),ee=void 0!==f.layout.get("circle-sort-key").constantOr(1);if(0!==P.constantOr(1)||0!==B.constantOr(1)&&0!==V.constantOr(1)){for(var Ce=p.context,Re=Ce.gl,I=p.depthModeForSublayer(0,re.ReadOnly),R=_e.disabled,S=p.colorModeForRenderPass(),U=[],$=0;$<x.length;$++){var ue=x[$],oe=g.getTile(ue),Ne=oe.getBucket(f);if(Ne){var st=Ne.programConfigurations.get(f.id),Mt={programConfiguration:st,program:p.useProgram("circle",st),layoutVertexBuffer:Ne.layoutVertexBuffer,indexBuffer:Ne.indexBuffer,uniformValues:Ya(p,ue,oe,f)};if(ee)for(var Lt=0,Rt=Ne.segments.get();Lt<Rt.length;Lt+=1){var Xt=Rt[Lt];U.push({segments:new u.SegmentVector([Xt]),sortKey:Xt.sortKey,state:Mt})}else U.push({segments:Ne.segments,sortKey:0,state:Mt})}}ee&&U.sort(function(Mi,Si){return Mi.sortKey-Si.sortKey});for(var yn=0,zn=U;yn<zn.length;yn+=1){var Rn=zn[yn],qn=Rn.state;qn.program.draw(Ce,Re.TRIANGLES,I,R,S,Ze.disabled,qn.uniformValues,f.id,qn.layoutVertexBuffer,qn.indexBuffer,Rn.segments,f.paint,p.transform.zoom,qn.programConfiguration)}}}},heatmap:function(p,g,f,x){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===p.renderPass){var P=p.context,B=P.gl,V=_e.disabled,ee=new Le([B.ONE,B.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(U,$,ue){var oe=U.gl;U.activeTexture.set(oe.TEXTURE1),U.viewport.set([0,0,$.width/4,$.height/4]);var Mt,Lt,Rt,Xt,yn,Ne=ue.heatmapFbo;if(Ne)oe.bindTexture(oe.TEXTURE_2D,Ne.colorAttachment.get()),U.bindFramebuffer.set(Ne.framebuffer);else{var st=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,st),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),Rt=st,Xt=Ne=ue.heatmapFbo=U.createFramebuffer($.width/4,$.height/4,!1),(yn=(Mt=U).gl).texImage2D(yn.TEXTURE_2D,0,yn.RGBA,(Lt=$).width/4,Lt.height/4,0,yn.RGBA,Mt.extRenderToTextureHalfFloat?Mt.extTextureHalfFloat.HALF_FLOAT_OES:yn.UNSIGNED_BYTE,null),Xt.colorAttachment.set(Rt)}})(P,p,f),P.clear({color:u.Color.transparent});for(var Ce=0;Ce<x.length;Ce++){var Re=x[Ce];if(!g.hasRenderableParent(Re)){var I=g.getTile(Re),R=I.getBucket(f);if(R){var S=R.programConfigurations.get(f.id);p.useProgram("heatmap",S).draw(P,B.TRIANGLES,re.disabled,V,ee,Ze.disabled,ka(Re.posMatrix,I,p.transform.zoom,f.paint.get("heatmap-intensity")),f.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,f.paint,p.transform.zoom,S)}}}P.viewport.set([0,0,p.width,p.height])}else"translucent"===p.renderPass&&(p.context.setColorMode(p.colorModeForRenderPass()),function(U,$){var ue=U.context,oe=ue.gl,Ne=$.heatmapFbo;if(Ne){ue.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,Ne.colorAttachment.get()),ue.activeTexture.set(oe.TEXTURE1);var st=$.colorRampTexture;st||(st=$.colorRampTexture=new u.Texture(ue,$.colorRamp,oe.RGBA)),st.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),U.useProgram("heatmapTexture").draw(ue,oe.TRIANGLES,re.disabled,_e.disabled,U.colorModeForRenderPass(),Ze.disabled,function(Mt,Lt,Rt,Xt){var yn=u.create();u.ortho(yn,0,Mt.width,Mt.height,0,0,1);var zn=Mt.context.gl;return{u_matrix:yn,u_world:[zn.drawingBufferWidth,zn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Lt.paint.get("heatmap-opacity")}}(U,$),$.id,U.viewportBuffer,U.quadTriangleIndexBuffer,U.viewportSegments,$.paint,U.transform.zoom)}}(p,f))},line:function(p,g,f,x){if("translucent"===p.renderPass){var P=f.paint.get("line-opacity"),B=f.paint.get("line-width");if(0!==P.constantOr(1)&&0!==B.constantOr(1))for(var V=p.depthModeForSublayer(0,re.ReadOnly),ee=p.colorModeForRenderPass(),Ce=f.paint.get("line-dasharray"),Re=f.paint.get("line-pattern"),I=Re.constantOr(1),R=f.paint.get("line-gradient"),S=f.getCrossfadeParameters(),U=I?"linePattern":Ce?"lineSDF":R?"lineGradient":"line",$=p.context,ue=$.gl,oe=!0,Ne=0,st=x;Ne<st.length;Ne+=1){var Mt=st[Ne],Lt=g.getTile(Mt);if(!I||Lt.patternsLoaded()){var Rt=Lt.getBucket(f);if(Rt){var Xt=Rt.programConfigurations.get(f.id),yn=p.context.program.get(),zn=p.useProgram(U,Xt),Rn=oe||zn.program!==yn,qn=Re.constantOr(null);if(qn&&Lt.imageAtlas){var Mi=Lt.imageAtlas,Si=Mi.patternPositions[qn.to.toString()],Ei=Mi.patternPositions[qn.from.toString()];Si&&Ei&&Xt.setConstantPatternPositions(Si,Ei)}var Lr=I?ve(p,Lt,f,S):Ce?ne(p,Lt,f,Ce,S):R?ye(p,Lt,f,Rt.lineClipsArray.length):Jo(p,Lt,f);if(I)$.activeTexture.set(ue.TEXTURE0),Lt.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Xt.updatePaintBuffers(S);else if(Ce&&(Rn||p.lineAtlas.dirty))$.activeTexture.set(ue.TEXTURE0),p.lineAtlas.bind($);else if(R){var ui=Rt.gradients[f.id],tr=ui.texture;if(f.gradientVersion!==ui.version){var fr=256;if(f.stepInterpolant){var Ji=g.getSource().maxzoom,zi=Mt.canonical.z===Ji?Math.ceil(1<<p.transform.maxZoom-Mt.canonical.z):1;fr=u.clamp(u.nextPowerOfTwo(Rt.maxLineLength/u.EXTENT*1024*zi),256,$.maxTextureSize)}ui.gradient=u.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:fr,image:ui.gradient||void 0,clips:Rt.lineClipsArray}),ui.texture?ui.texture.update(ui.gradient):ui.texture=new u.Texture($,ui.gradient,ue.RGBA),ui.version=f.gradientVersion,tr=ui.texture}$.activeTexture.set(ue.TEXTURE0),tr.bind(f.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}zn.draw($,ue.TRIANGLES,V,p.stencilModeForClipping(Mt),ee,Ze.disabled,Lr,f.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,f.paint,p.transform.zoom,Xt,Rt.layoutVertexBuffer2),oe=!1}}}}},fill:function(p,g,f,x){var P=f.paint.get("fill-color"),B=f.paint.get("fill-opacity");if(0!==B.constantOr(1)){var V=p.colorModeForRenderPass(),ee=f.paint.get("fill-pattern"),Ce=p.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&1===P.constantOr(u.Color.transparent).a&&1===B.constantOr(0)?"opaque":"translucent";if(p.renderPass===Ce){var Re=p.depthModeForSublayer(1,"opaque"===p.renderPass?re.ReadWrite:re.ReadOnly);Fa(p,g,f,x,Re,V,!1)}if("translucent"===p.renderPass&&f.paint.get("fill-antialias")){var I=p.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,re.ReadOnly);Fa(p,g,f,x,I,V,!0)}}},"fill-extrusion":function(p,g,f,x){var P=f.paint.get("fill-extrusion-opacity");if(0!==P&&"translucent"===p.renderPass){var B=new re(p.context.gl.LEQUAL,re.ReadWrite,p.depthRangeFor3D);if(1!==P||f.paint.get("fill-extrusion-pattern").constantOr(1))tu(p,g,f,x,B,_e.disabled,Le.disabled),tu(p,g,f,x,B,p.stencilModeFor3D(),p.colorModeForRenderPass());else{var V=p.colorModeForRenderPass();tu(p,g,f,x,B,_e.disabled,V)}}},hillshade:function(p,g,f,x){if("offscreen"===p.renderPass||"translucent"===p.renderPass){for(var P=p.context,B=p.depthModeForSublayer(0,re.ReadOnly),V=p.colorModeForRenderPass(),ee="translucent"===p.renderPass?p.stencilConfigForOverlap(x):[{},x],Ce=ee[0],Re=0,I=ee[1];Re<I.length;Re+=1){var R=I[Re],S=g.getTile(R);S.needsHillshadePrepare&&"offscreen"===p.renderPass?Os(p,S,f,B,_e.disabled,V):"translucent"===p.renderPass&&mu(p,S,f,B,Ce[R.overscaledZ],V)}P.viewport.set([0,0,p.width,p.height])}},raster:function(p,g,f,x){if("translucent"===p.renderPass&&0!==f.paint.get("raster-opacity")&&x.length)for(var P=p.context,B=P.gl,V=g.getSource(),ee=p.useProgram("raster"),Ce=p.colorModeForRenderPass(),Re=V instanceof Hr?[{},x]:p.stencilConfigForOverlap(x),I=Re[0],R=Re[1],S=R[R.length-1].overscaledZ,U=!p.options.moving,$=0,ue=R;$<ue.length;$+=1){var oe=ue[$],Ne=p.depthModeForSublayer(oe.overscaledZ-S,1===f.paint.get("raster-opacity")?re.ReadWrite:re.ReadOnly,B.LESS),st=g.getTile(oe),Mt=p.transform.calculatePosMatrix(oe.toUnwrapped(),U);st.registerFadeDuration(f.paint.get("raster-fade-duration"));var Lt=g.findLoadedParent(oe,0),Rt=Na(st,Lt,g,f,p.transform),Xt=void 0,yn=void 0,zn="nearest"===f.paint.get("raster-resampling")?B.NEAREST:B.LINEAR;P.activeTexture.set(B.TEXTURE0),st.texture.bind(zn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(B.TEXTURE1),Lt?(Lt.texture.bind(zn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Xt=Math.pow(2,Lt.tileID.overscaledZ-st.tileID.overscaledZ),yn=[st.tileID.canonical.x*Xt%1,st.tileID.canonical.y*Xt%1]):st.texture.bind(zn,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);var Rn=ki(Mt,yn||[0,0],Xt||1,Rt,f);V instanceof Hr?ee.draw(P,B.TRIANGLES,Ne,_e.disabled,Ce,Ze.disabled,Rn,f.id,V.boundsBuffer,p.quadTriangleIndexBuffer,V.boundsSegments):ee.draw(P,B.TRIANGLES,Ne,I[oe.overscaledZ],Ce,Ze.disabled,Rn,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,g,f){var x=f.paint.get("background-color"),P=f.paint.get("background-opacity");if(0!==P){var B=p.context,V=B.gl,ee=p.transform,Ce=ee.tileSize,Re=f.paint.get("background-pattern");if(!p.isPatternMissing(Re)){var I=!Re&&1===x.a&&1===P&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass===I){var R=_e.disabled,S=p.depthModeForSublayer(0,"opaque"===I?re.ReadWrite:re.ReadOnly),U=p.colorModeForRenderPass(),$=p.useProgram(Re?"backgroundPattern":"background"),ue=ee.coveringTiles({tileSize:Ce});Re&&(B.activeTexture.set(V.TEXTURE0),p.imageManager.bind(p.context));for(var oe=f.getCrossfadeParameters(),Ne=0,st=ue;Ne<st.length;Ne+=1){var Mt=st[Ne],Lt=p.transform.calculatePosMatrix(Mt.toUnwrapped()),Rt=Re?vr(Lt,P,p,Re,{tileID:Mt,tileSize:Ce},oe):Un(Lt,P,x);$.draw(B,V.TRIANGLES,S,R,U,Ze.disabled,Rt,f.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}}}},debug:function(p,g,f){for(var x=0;x<f.length;x++)ma(p,g,f[x])},custom:function(p,g,f){var x=p.context,P=f.implementation;if("offscreen"===p.renderPass){var B=P.prerender;B&&(p.setCustomLayerDefaults(),x.setColorMode(p.colorModeForRenderPass()),B.call(P,x.gl,p.transform.customLayerMatrix()),x.setDirty(),p.setBaseState())}else if("translucent"===p.renderPass){p.setCustomLayerDefaults(),x.setColorMode(p.colorModeForRenderPass()),x.setStencilMode(_e.disabled);var V="3d"===P.renderingMode?new re(p.context.gl.LEQUAL,re.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,re.ReadOnly);x.setDepthMode(V),P.render(x.gl,p.transform.customLayerMatrix()),x.setDirty(),p.setBaseState(),x.bindFramebuffer.set(null)}}},dr=function(p,g){this.context=new Pe(p),this.transform=g,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new go,this.gpuTimers={}};dr.prototype.resize=function(p,g){if(this.width=p*u.browser.devicePixelRatio,this.height=g*u.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var f=0,x=this.style._order;f<x.length;f+=1)this.style._layers[x[f]].resize()},dr.prototype.setup=function(){var p=this.context,g=new u.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(u.EXTENT,0),g.emplaceBack(0,u.EXTENT),g.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=p.createVertexBuffer(g,to.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);var f=new u.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=p.createVertexBuffer(f,to.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);var x=new u.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(u.EXTENT,0,u.EXTENT,0),x.emplaceBack(0,u.EXTENT,0,u.EXTENT),x.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=p.createVertexBuffer(x,Vi.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);var P=new u.StructArrayLayout2i4;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(P,to.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);var B=new u.StructArrayLayout1ui2;B.emplaceBack(0),B.emplaceBack(1),B.emplaceBack(3),B.emplaceBack(2),B.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(B);var V=new u.StructArrayLayout3ui6;V.emplaceBack(0,1,2),V.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(V),this.emptyTexture=new u.Texture(p,{width:1,height:1,data:new Uint8Array([0,0,0,0])},p.gl.RGBA);var ee=this.context.gl;this.stencilClearMode=new _e({func:ee.ALWAYS,mask:0},0,255,ee.ZERO,ee.ZERO,ee.ZERO)},dr.prototype.clearStencil=function(){var p=this.context,g=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[g.drawingBufferWidth,g.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,g.TRIANGLES,re.disabled,this.stencilClearMode,Le.disabled,Ze.disabled,zs(f),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},dr.prototype._renderTileClippingMasks=function(p,g){if(this.currentStencilSource!==p.source&&p.isTileClipped()&&g&&g.length){this.currentStencilSource=p.source;var f=this.context,x=f.gl;this.nextStencilID+g.length>256&&this.clearStencil(),f.setColorMode(Le.disabled),f.setDepthMode(re.disabled);var P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var B=0,V=g;B<V.length;B+=1){var ee=V[B],Ce=this._tileClippingMaskIDs[ee.key]=this.nextStencilID++;P.draw(f,x.TRIANGLES,re.disabled,new _e({func:x.ALWAYS,mask:0},Ce,255,x.KEEP,x.KEEP,x.REPLACE),Le.disabled,Ze.disabled,zs(ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},dr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var p=this.nextStencilID++,g=this.context.gl;return new _e({func:g.NOTEQUAL,mask:255},p,255,g.KEEP,g.KEEP,g.REPLACE)},dr.prototype.stencilModeForClipping=function(p){var g=this.context.gl;return new _e({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,g.KEEP,g.KEEP,g.REPLACE)},dr.prototype.stencilConfigForOverlap=function(p){var g,f=this.context.gl,x=p.sort(function(Ce,Re){return Re.overscaledZ-Ce.overscaledZ}),P=x[x.length-1].overscaledZ,B=x[0].overscaledZ-P+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();for(var V={},ee=0;ee<B;ee++)V[ee+P]=new _e({func:f.GEQUAL,mask:255},ee+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=B,[V,x]}return[(g={},g[P]=_e.disabled,g),x]},dr.prototype.colorModeForRenderPass=function(){var p=this.context.gl;return this._showOverdrawInspector?new Le([p.CONSTANT_COLOR,p.ONE],new u.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Le.unblended:Le.alphaBlended},dr.prototype.depthModeForSublayer=function(p,g,f){if(!this.opaquePassEnabledForLayer())return re.disabled;var x=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new re(f||this.context.gl.LEQUAL,g,[x,x])},dr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},dr.prototype.render=function(p,g){var f=this;this.style=p,this.options=g,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();var x=this.style._order,P=this.style.sourceCaches;for(var B in P){var V=P[B];V.used&&V.prepare(this.context)}var ee,Ce,Re={},I={},R={};for(var S in P){var U=P[S];Re[S]=U.getVisibleCoordinates(),I[S]=Re[S].slice().reverse(),R[S]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var $=0;$<x.length;$++)if(this.style._layers[x[$]].is3D()){this.opaquePassCutoff=$;break}this.renderPass="offscreen";for(var ue=0,oe=x;ue<oe.length;ue+=1){var Ne=this.style._layers[oe[ue]];if(Ne.hasOffscreenPass()&&!Ne.isHidden(this.transform.zoom)){var st=I[Ne.source];("custom"===Ne.type||st.length)&&this.renderLayer(this,P[Ne.source],Ne,st)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){var Mt=this.style._layers[x[this.currentLayer]],Lt=P[Mt.source],Rt=Re[Mt.source];this._renderTileClippingMasks(Mt,Rt),this.renderLayer(this,Lt,Mt,Rt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){var Xt=this.style._layers[x[this.currentLayer]],yn=P[Xt.source],zn=("symbol"===Xt.type?R:I)[Xt.source];this._renderTileClippingMasks(Xt,Re[Xt.source]),this.renderLayer(this,yn,Xt,zn)}this.options.showTileBoundaries&&(u.values(this.style._layers).forEach(function(Rn){Rn.source&&!Rn.isHidden(f.transform.zoom)&&(Rn.source!==(Ce&&Ce.id)&&(Ce=f.style.sourceCaches[Rn.source]),(!ee||ee.getSource().maxzoom<Ce.getSource().maxzoom)&&(ee=Ce))}),ee&&Eo.debug(this,ee,ee.getVisibleCoordinates())),this.options.showPadding&&function(Rn){var qn=Rn.transform.padding;yc(Rn,Rn.transform.height-(qn.top||0),3,Ru),yc(Rn,qn.bottom||0,3,bl),Ts(Rn,qn.left||0,3,fa),Ts(Rn,Rn.transform.width-(qn.right||0),3,qa);var Si,Ei,Lr,ui,Mi=Rn.transform.centerPoint;ts(Si=Rn,(Ei=Mi.x)-1,(Lr=Rn.transform.height-Mi.y)-10,2,20,ui=gu),ts(Si,Ei-10,Lr-1,20,2,ui)}(this),this.context.setDefault()},dr.prototype.renderLayer=function(p,g,f,x){f.isHidden(this.transform.zoom)||("background"===f.type||"custom"===f.type||x.length)&&(this.id=f.id,this.gpuTimingStart(f),Eo[f.type](p,g,f,x,this.style.placement.variableOffsets),this.gpuTimingEnd())},dr.prototype.gpuTimingStart=function(p){if(this.options.gpuTiming){var g=this.context.extTimerQuery,f=this.gpuTimers[p.id];f||(f=this.gpuTimers[p.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),f.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,f.query)}},dr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var p=this.context.extTimerQuery;p.endQueryEXT(p.TIME_ELAPSED_EXT)}},dr.prototype.collectGpuTimers=function(){var p=this.gpuTimers;return this.gpuTimers={},p},dr.prototype.queryGpuTimers=function(p){var g={};for(var f in p){var x=p[f],P=this.context.extTimerQuery,B=P.getQueryObjectEXT(x.query,P.QUERY_RESULT_EXT)/1e6;P.deleteQueryEXT(x.query),g[f]=B}return g},dr.prototype.translatePosMatrix=function(p,g,f,x,P){if(!f[0]&&!f[1])return p;var B=P?"map"===x?this.transform.angle:0:"viewport"===x?-this.transform.angle:0;if(B){var V=Math.sin(B),ee=Math.cos(B);f=[f[0]*ee-f[1]*V,f[0]*V+f[1]*ee]}var Ce=[P?f[0]:Xi(g,f[0],this.transform.zoom),P?f[1]:Xi(g,f[1],this.transform.zoom),0],Re=new Float32Array(16);return u.translate(Re,p,Ce),Re},dr.prototype.saveTileTexture=function(p){var g=this._tileTextures[p.size[0]];g?g.push(p):this._tileTextures[p.size[0]]=[p]},dr.prototype.getTileTexture=function(p){var g=this._tileTextures[p];return g&&g.length>0?g.pop():null},dr.prototype.isPatternMissing=function(p){if(!p)return!1;if(!p.from||!p.to)return!0;var g=this.imageManager.getPattern(p.from.toString()),f=this.imageManager.getPattern(p.to.toString());return!g||!f},dr.prototype.useProgram=function(p,g){this.cache=this.cache||{};var f=""+p+(g?g.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[f]||(this.cache[f]=new ws(this.context,p,rc[p],g,ku[p],this._showOverdrawInspector)),this.cache[f]},dr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},dr.prototype.setBaseState=function(){var p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)},dr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=u.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},dr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _u=function(p,g){this.points=p,this.planes=g};_u.fromInvProjectionMatrix=function(p,g,f){var x=Math.pow(2,f),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(V){return u.transformMat4([],V,p)}).map(function(V){return u.scale$1([],V,1/V[3]/g*x)}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(V){var ee=u.sub([],P[V[0]],P[V[1]]),Ce=u.sub([],P[V[2]],P[V[1]]),Re=u.normalize([],u.cross([],ee,Ce)),I=-u.dot(Re,P[V[1]]);return Re.concat(I)});return new _u(P,B)};var La=function(p,g){this.min=p,this.max=g,this.center=u.scale$2([],u.add([],this.min,this.max),.5)};La.prototype.quadrant=function(p){for(var g=[p%2==0,p<2],f=u.clone$2(this.min),x=u.clone$2(this.max),P=0;P<g.length;P++)f[P]=g[P]?this.min[P]:this.center[P],x[P]=g[P]?this.center[P]:this.max[P];return x[2]=this.max[2],new La(f,x)},La.prototype.distanceX=function(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]},La.prototype.distanceY=function(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]},La.prototype.intersects=function(p){for(var g=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],f=!0,x=0;x<p.planes.length;x++){for(var P=p.planes[x],B=0,V=0;V<g.length;V++)B+=u.dot$1(P,g[V])>=0;if(0===B)return 0;B!==g.length&&(f=!1)}if(f)return 2;for(var ee=0;ee<3;ee++){for(var Ce=Number.MAX_VALUE,Re=-Number.MAX_VALUE,I=0;I<p.points.length;I++){var R=p.points[I][ee]-this.min[ee];Ce=Math.min(Ce,R),Re=Math.max(Re,R)}if(Re<0||Ce>this.max[ee]-this.min[ee])return 0}return 1};var Ja=function(p,g,f,x){if(void 0===p&&(p=0),void 0===g&&(g=0),void 0===f&&(f=0),void 0===x&&(x=0),isNaN(p)||p<0||isNaN(g)||g<0||isNaN(f)||f<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=g,this.left=f,this.right=x};Ja.prototype.interpolate=function(p,g,f){return null!=g.top&&null!=p.top&&(this.top=u.number(p.top,g.top,f)),null!=g.bottom&&null!=p.bottom&&(this.bottom=u.number(p.bottom,g.bottom,f)),null!=g.left&&null!=p.left&&(this.left=u.number(p.left,g.left,f)),null!=g.right&&null!=p.right&&(this.right=u.number(p.right,g.right,f)),this},Ja.prototype.getCenter=function(p,g){var f=u.clamp((this.left+p-this.right)/2,0,p),x=u.clamp((this.top+g-this.bottom)/2,0,g);return new u.Point(f,x)},Ja.prototype.equals=function(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right},Ja.prototype.clone=function(){return new Ja(this.top,this.bottom,this.left,this.right)},Ja.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Cr=function(p,g,f,x,P){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===P||P,this._minZoom=p||0,this._maxZoom=g||22,this._minPitch=f??0,this._maxPitch=x??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ja,this._posMatrixCache={},this._alignedPosMatrixCache={}},co={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Cr.prototype.clone=function(){var p=new Cr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.tileSize=this.tileSize,p.latRange=this.latRange,p.width=this.width,p.height=this.height,p._center=this._center,p.zoom=this.zoom,p.angle=this.angle,p._fov=this._fov,p._pitch=this._pitch,p._unmodified=this._unmodified,p._edgeInsets=this._edgeInsets.clone(),p._calcMatrices(),p},co.minZoom.get=function(){return this._minZoom},co.minZoom.set=function(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))},co.maxZoom.get=function(){return this._maxZoom},co.maxZoom.set=function(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))},co.minPitch.get=function(){return this._minPitch},co.minPitch.set=function(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))},co.maxPitch.get=function(){return this._maxPitch},co.maxPitch.set=function(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))},co.renderWorldCopies.get=function(){return this._renderWorldCopies},co.renderWorldCopies.set=function(p){void 0===p?p=!0:null===p&&(p=!1),this._renderWorldCopies=p},co.worldSize.get=function(){return this.tileSize*this.scale},co.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},co.size.get=function(){return new u.Point(this.width,this.height)},co.bearing.get=function(){return-this.angle/Math.PI*180},co.bearing.set=function(p){var g=-u.wrap(p,-180,180)*Math.PI/180;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=u.create$2(),u.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},co.pitch.get=function(){return this._pitch/Math.PI*180},co.pitch.set=function(p){var g=u.clamp(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())},co.fov.get=function(){return this._fov/Math.PI*180},co.fov.set=function(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())},co.zoom.get=function(){return this._zoom},co.zoom.set=function(p){var g=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this.scale=this.zoomScale(g),this.tileZoom=Math.floor(g),this.zoomFraction=g-this.tileZoom,this._constrain(),this._calcMatrices())},co.center.get=function(){return this._center},co.center.set=function(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())},co.padding.get=function(){return this._edgeInsets.toJSON()},co.padding.set=function(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())},co.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Cr.prototype.isPaddingEqual=function(p){return this._edgeInsets.equals(p)},Cr.prototype.interpolatePadding=function(p,g,f){this._unmodified=!1,this._edgeInsets.interpolate(p,g,f),this._constrain(),this._calcMatrices()},Cr.prototype.coveringZoomLevel=function(p){var g=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,g)},Cr.prototype.getVisibleUnwrappedCoordinates=function(p){var g=[new u.UnwrappedTileID(0,p)];if(this._renderWorldCopies)for(var f=this.pointCoordinate(new u.Point(0,0)),x=this.pointCoordinate(new u.Point(this.width,0)),P=this.pointCoordinate(new u.Point(this.width,this.height)),B=this.pointCoordinate(new u.Point(0,this.height)),V=Math.floor(Math.min(f.x,x.x,P.x,B.x)),ee=Math.floor(Math.max(f.x,x.x,P.x,B.x)),Ce=V-1;Ce<=ee+1;Ce++)0!==Ce&&g.push(new u.UnwrappedTileID(Ce,p));return g},Cr.prototype.coveringTiles=function(p){var g=this.coveringZoomLevel(p),f=g;if(void 0!==p.minzoom&&g<p.minzoom)return[];void 0!==p.maxzoom&&g>p.maxzoom&&(g=p.maxzoom);var x=u.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,g),B=[P*x.x,P*x.y,0],V=_u.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g),ee=p.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ee=g);var Ce=function(Rn){return{aabb:new La([Rn*P,0,0],[(Rn+1)*P,P,0]),zoom:0,x:0,y:0,wrap:Rn,fullyVisible:!1}},Re=[],I=[],R=g,S=p.reparseOverscaled?f:g;if(this._renderWorldCopies)for(var U=1;U<=3;U++)Re.push(Ce(-U)),Re.push(Ce(U));for(Re.push(Ce(0));Re.length>0;){var $=Re.pop(),ue=$.x,oe=$.y,Ne=$.fullyVisible;if(!Ne){var st=$.aabb.intersects(V);if(0===st)continue;Ne=2===st}var Mt=$.aabb.distanceX(B),Lt=$.aabb.distanceY(B),Rt=Math.max(Math.abs(Mt),Math.abs(Lt));if($.zoom===R||Rt>3+(1<<R-$.zoom)-2&&$.zoom>=ee)I.push({tileID:new u.OverscaledTileID($.zoom===R?S:$.zoom,$.wrap,$.zoom,ue,oe),distanceSq:u.sqrLen([B[0]-.5-ue,B[1]-.5-oe])});else for(var Xt=0;Xt<4;Xt++){var yn=(ue<<1)+Xt%2,zn=(oe<<1)+(Xt>>1);Re.push({aabb:$.aabb.quadrant(Xt),zoom:$.zoom+1,x:yn,y:zn,wrap:$.wrap,fullyVisible:Ne})}}return I.sort(function(Rn,qn){return Rn.distanceSq-qn.distanceSq}).map(function(Rn){return Rn.tileID})},Cr.prototype.resize=function(p,g){this.width=p,this.height=g,this.pixelsToGLUnits=[2/p,-2/g],this._constrain(),this._calcMatrices()},co.unmodified.get=function(){return this._unmodified},Cr.prototype.zoomScale=function(p){return Math.pow(2,p)},Cr.prototype.scaleZoom=function(p){return Math.log(p)/Math.LN2},Cr.prototype.project=function(p){var g=u.clamp(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(p.lng)*this.worldSize,u.mercatorYfromLat(g)*this.worldSize)},Cr.prototype.unproject=function(p){return new u.MercatorCoordinate(p.x/this.worldSize,p.y/this.worldSize).toLngLat()},co.point.get=function(){return this.project(this.center)},Cr.prototype.setLocationAtPoint=function(p,g){var f=this.pointCoordinate(g),x=this.pointCoordinate(this.centerPoint),P=this.locationCoordinate(p),B=new u.MercatorCoordinate(P.x-(f.x-x.x),P.y-(f.y-x.y));this.center=this.coordinateLocation(B),this._renderWorldCopies&&(this.center=this.center.wrap())},Cr.prototype.locationPoint=function(p){return this.coordinatePoint(this.locationCoordinate(p))},Cr.prototype.pointLocation=function(p){return this.coordinateLocation(this.pointCoordinate(p))},Cr.prototype.locationCoordinate=function(p){return u.MercatorCoordinate.fromLngLat(p)},Cr.prototype.coordinateLocation=function(p){return p.toLngLat()},Cr.prototype.pointCoordinate=function(p){var g=[p.x,p.y,0,1],f=[p.x,p.y,1,1];u.transformMat4(g,g,this.pixelMatrixInverse),u.transformMat4(f,f,this.pixelMatrixInverse);var x=g[3],P=f[3],B=g[1]/x,V=f[1]/P,ee=g[2]/x,Ce=f[2]/P,Re=ee===Ce?0:(0-ee)/(Ce-ee);return new u.MercatorCoordinate(u.number(g[0]/x,f[0]/P,Re)/this.worldSize,u.number(B,V,Re)/this.worldSize)},Cr.prototype.coordinatePoint=function(p){var g=[p.x*this.worldSize,p.y*this.worldSize,0,1];return u.transformMat4(g,g,this.pixelMatrix),new u.Point(g[0]/g[3],g[1]/g[3])},Cr.prototype.getBounds=function(){return(new u.LngLatBounds).extend(this.pointLocation(new u.Point(0,0))).extend(this.pointLocation(new u.Point(this.width,0))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))},Cr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Cr.prototype.setMaxBounds=function(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Cr.prototype.calculatePosMatrix=function(p,g){void 0===g&&(g=!1);var f=p.key,x=g?this._alignedPosMatrixCache:this._posMatrixCache;if(x[f])return x[f];var P=p.canonical,B=this.worldSize/this.zoomScale(P.z),V=P.x+Math.pow(2,P.z)*p.wrap,ee=u.identity(new Float64Array(16));return u.translate(ee,ee,[V*B,P.y*B,0]),u.scale(ee,ee,[B/u.EXTENT,B/u.EXTENT,1]),u.multiply(ee,g?this.alignedProjMatrix:this.projMatrix,ee),x[f]=new Float32Array(ee),x[f]},Cr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Cr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var p,g,f,x,P=-90,B=90,V=-180,ee=180,Ce=this.size,Re=this._unmodified;if(this.latRange){var I=this.latRange;P=u.mercatorYfromLat(I[1])*this.worldSize,p=(B=u.mercatorYfromLat(I[0])*this.worldSize)-P<Ce.y?Ce.y/(B-P):0}if(this.lngRange){var R=this.lngRange;V=u.mercatorXfromLng(R[0])*this.worldSize,g=(ee=u.mercatorXfromLng(R[1])*this.worldSize)-V<Ce.x?Ce.x/(ee-V):0}var S=this.point,U=Math.max(g||0,p||0);if(U)return this.center=this.unproject(new u.Point(g?(ee+V)/2:S.x,p?(B+P)/2:S.y)),this.zoom+=this.scaleZoom(U),this._unmodified=Re,void(this._constraining=!1);if(this.latRange){var $=S.y,ue=Ce.y/2;$-ue<P&&(x=P+ue),$+ue>B&&(x=B-ue)}if(this.lngRange){var oe=S.x,Ne=Ce.x/2;oe-Ne<V&&(f=V+Ne),oe+Ne>ee&&(f=ee-Ne)}void 0===f&&void 0===x||(this.center=this.unproject(new u.Point(void 0!==f?f:S.x,void 0!==x?x:S.y))),this._unmodified=Re,this._constraining=!1}},Cr.prototype._calcMatrices=function(){if(this.height){var p=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var g=Math.PI/2+this._pitch,f=this._fov*(.5+p.y/this.height),x=Math.sin(f)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-g-f,.01,Math.PI-.01)),P=this.point,B=P.x,V=P.y,ee=1.01*(Math.cos(Math.PI/2-this._pitch)*x+this.cameraToCenterDistance),Ce=this.height/50,Re=new Float64Array(16);u.perspective(Re,this._fov,this.width/this.height,Ce,ee),Re[8]=2*-p.x/this.width,Re[9]=2*p.y/this.height,u.scale(Re,Re,[1,-1,1]),u.translate(Re,Re,[0,0,-this.cameraToCenterDistance]),u.rotateX(Re,Re,this._pitch),u.rotateZ(Re,Re,this.angle),u.translate(Re,Re,[-B,-V,0]),this.mercatorMatrix=u.scale([],Re,[this.worldSize,this.worldSize,this.worldSize]),u.scale(Re,Re,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Re,this.invProjMatrix=u.invert([],this.projMatrix);var I=this.width%2/2,R=this.height%2/2,S=Math.cos(this.angle),U=Math.sin(this.angle),$=B-Math.round(B)+S*I+U*R,ue=V-Math.round(V)+S*R+U*I,oe=new Float64Array(Re);if(u.translate(oe,oe,[$>.5?$-1:$,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=oe,Re=u.create(),u.scale(Re,Re,[this.width/2,-this.height/2,1]),u.translate(Re,Re,[1,-1,0]),this.labelPlaneMatrix=Re,Re=u.create(),u.scale(Re,Re,[1,-1,1]),u.translate(Re,Re,[-1,-1,0]),u.scale(Re,Re,[2/this.width,2/this.height,1]),this.glCoordMatrix=Re,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Re=u.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Re,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Cr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var p=this.pointCoordinate(new u.Point(0,0)),g=[p.x*this.worldSize,p.y*this.worldSize,0,1];return u.transformMat4(g,g,this.pixelMatrix)[3]/this.cameraToCenterDistance},Cr.prototype.getCameraPoint=function(){var p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,p))},Cr.prototype.getCameraQueryGeometry=function(p){var g=this.getCameraPoint();if(1===p.length)return[p[0],g];for(var f=g.x,x=g.y,P=g.x,B=g.y,V=0,ee=p;V<ee.length;V+=1){var Ce=ee[V];f=Math.min(f,Ce.x),x=Math.min(x,Ce.y),P=Math.max(P,Ce.x),B=Math.max(B,Ce.y)}return[new u.Point(f,x),new u.Point(P,x),new u.Point(P,B),new u.Point(f,B),new u.Point(f,x)]},Object.defineProperties(Cr.prototype,co);var ps=function(p){var g,f,x,P;this._hashName=p&&encodeURIComponent(p),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(g=this._updateHashUnthrottled.bind(this),f=!1,x=null,P=function(){x=null,f&&(g(),x=setTimeout(P,300),f=!1)},function(){return f=!0,x||P(),x})};ps.prototype.addTo=function(p){return this._map=p,u.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ps.prototype.remove=function(){return u.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ps.prototype.getHashString=function(p){var g=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,x=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,x),B=Math.round(g.lng*P)/P,V=Math.round(g.lat*P)/P,ee=this._map.getBearing(),Ce=this._map.getPitch(),Re="";if(Re+=p?"/"+B+"/"+V+"/"+f:f+"/"+V+"/"+B,(ee||Ce)&&(Re+="/"+Math.round(10*ee)/10),Ce&&(Re+="/"+Math.round(Ce)),this._hashName){var I=this._hashName,R=!1,S=u.window.location.hash.slice(1).split("&").map(function(U){var $=U.split("=")[0];return $===I?(R=!0,$+"="+Re):U}).filter(function(U){return U});return R||S.push(I+"="+Re),"#"+S.join("&")}return"#"+Re},ps.prototype._getCurrentHash=function(){var p,g=this,f=u.window.location.hash.replace("#","");return this._hashName?(f.split("&").map(function(x){return x.split("=")}).forEach(function(x){x[0]===g._hashName&&(p=x)}),(p&&p[1]||"").split("/")):f.split("/")},ps.prototype._onHashChange=function(){var p=this._getCurrentHash();if(p.length>=3&&!p.some(function(f){return isNaN(f)})){var g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:g,pitch:+(p[4]||0)}),!0}return!1},ps.prototype._updateHashUnthrottled=function(){var p=u.window.location.href.replace(/(#.+)?$/,this.getHashString());try{u.window.history.replaceState(u.window.history.state,null,p)}catch{}};var ga={linearity:.3,easing:u.bezier(0,0,.3,1)},Wa=u.extend({deceleration:2500,maxSpeed:1400},ga),Vu=u.extend({deceleration:20,maxSpeed:1400},ga),Qc=u.extend({deceleration:1e3,maxSpeed:360},ga),_a=u.extend({deceleration:1e3,maxSpeed:90},ga),Ul=function(p){this._map=p,this.clear()};function no(p,g){(!p.duration||p.duration<g.duration)&&(p.duration=g.duration,p.easing=g.easing)}function Qa(p,g,f){var x=f.maxSpeed,P=f.linearity,B=f.deceleration,V=u.clamp(p*P/(g/1e3),-x,x),ee=Math.abs(V)/(B*P);return{easing:f.easing,duration:1e3*ee,amount:V*(ee/2)}}Ul.prototype.clear=function(){this._inertiaBuffer=[]},Ul.prototype.record=function(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:p})},Ul.prototype._drainInertiaBuffer=function(){for(var p=this._inertiaBuffer,g=u.browser.now();p.length>0&&g-p[0].time>160;)p.shift()},Ul.prototype._onMoveEnd=function(p){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var g={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0},f=0,x=this._inertiaBuffer;f<x.length;f+=1){var P=x[f].settings;g.zoom+=P.zoomDelta||0,g.bearing+=P.bearingDelta||0,g.pitch+=P.pitchDelta||0,P.panDelta&&g.pan._add(P.panDelta),P.around&&(g.around=P.around),P.pinchAround&&(g.pinchAround=P.pinchAround)}var B=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,V={};if(g.pan.mag()){var ee=Qa(g.pan.mag(),B,u.extend({},Wa,p||{}));V.offset=g.pan.mult(ee.amount/g.pan.mag()),V.center=this._map.transform.center,no(V,ee)}if(g.zoom){var Ce=Qa(g.zoom,B,Vu);V.zoom=this._map.transform.zoom+Ce.amount,no(V,Ce)}if(g.bearing){var Re=Qa(g.bearing,B,Qc);V.bearing=this._map.transform.bearing+u.clamp(Re.amount,-179,179),no(V,Re)}if(g.pitch){var I=Qa(g.pitch,B,_a);V.pitch=this._map.transform.pitch+I.amount,no(V,I)}if(V.zoom||V.bearing){var R=void 0===g.pinchAround?g.around:g.pinchAround;V.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),u.extend(V,{noMoveStart:!0})}};var Qo=function(p){function g(x,P,B,V){void 0===V&&(V={});var ee=Y.mousePos(P.getCanvasContainer(),B),Ce=P.unproject(ee);p.call(this,x,u.extend({point:ee,lngLat:Ce,originalEvent:B},V)),this._defaultPrevented=!1,this.target=P}p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g;var f={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,f),g}(u.Event),os=function(p){function g(x,P,B){var V="touchend"===x?B.changedTouches:B.touches,ee=Y.touchPos(P.getCanvasContainer(),V),Ce=ee.map(function(R){return P.unproject(R)}),Re=ee.reduce(function(R,S,U,$){return R.add(S.div($.length))},new u.Point(0,0)),I=P.unproject(Re);p.call(this,x,{points:ee,point:Re,lngLats:Ce,lngLat:I,originalEvent:B}),this._defaultPrevented=!1}p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g;var f={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,f),g}(u.Event),te=function(p){function g(x,P,B){p.call(this,x,{originalEvent:B}),this._defaultPrevented=!1}p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g;var f={defaultPrevented:{configurable:!0}};return g.prototype.preventDefault=function(){this._defaultPrevented=!0},f.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(g.prototype,f),g}(u.Event),Se=function(p,g){this._map=p,this._clickTolerance=g.clickTolerance};Se.prototype.reset=function(){delete this._mousedownPos},Se.prototype.wheel=function(p){return this._firePreventable(new te(p.type,this._map,p))},Se.prototype.mousedown=function(p,g){return this._mousedownPos=g,this._firePreventable(new Qo(p.type,this._map,p))},Se.prototype.mouseup=function(p){this._map.fire(new Qo(p.type,this._map,p))},Se.prototype.click=function(p,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new Qo(p.type,this._map,p))},Se.prototype.dblclick=function(p){return this._firePreventable(new Qo(p.type,this._map,p))},Se.prototype.mouseover=function(p){this._map.fire(new Qo(p.type,this._map,p))},Se.prototype.mouseout=function(p){this._map.fire(new Qo(p.type,this._map,p))},Se.prototype.touchstart=function(p){return this._firePreventable(new os(p.type,this._map,p))},Se.prototype.touchmove=function(p){this._map.fire(new os(p.type,this._map,p))},Se.prototype.touchend=function(p){this._map.fire(new os(p.type,this._map,p))},Se.prototype.touchcancel=function(p){this._map.fire(new os(p.type,this._map,p))},Se.prototype._firePreventable=function(p){if(this._map.fire(p),p.defaultPrevented)return{}},Se.prototype.isEnabled=function(){return!0},Se.prototype.isActive=function(){return!1},Se.prototype.enable=function(){},Se.prototype.disable=function(){};var X=function(p){this._map=p};X.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},X.prototype.mousemove=function(p){this._map.fire(new Qo(p.type,this._map,p))},X.prototype.mousedown=function(){this._delayContextMenu=!0},X.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},X.prototype.contextmenu=function(p){this._delayContextMenu?this._contextMenuEvent=p:this._map.fire(new Qo(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()},X.prototype.isEnabled=function(){return!0},X.prototype.isActive=function(){return!1},X.prototype.enable=function(){},X.prototype.disable=function(){};var Ue=function(p,g){this._map=p,this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=g.clickTolerance||1};function vt(p,g){for(var f={},x=0;x<p.length;x++)f[p[x].identifier]=g[x];return f}Ue.prototype.isEnabled=function(){return!!this._enabled},Ue.prototype.isActive=function(){return!!this._active},Ue.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ue.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ue.prototype.mousedown=function(p,g){this.isEnabled()&&p.shiftKey&&0===p.button&&(Y.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)},Ue.prototype.mousemoveWindow=function(p,g){if(this._active){var f=g;if(!(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)){var x=this._startPos;this._lastPos=f,this._box||(this._box=Y.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",p));var P=Math.min(x.x,f.x),B=Math.max(x.x,f.x),V=Math.min(x.y,f.y),ee=Math.max(x.y,f.y);Y.setTransform(this._box,"translate("+P+"px,"+V+"px)"),this._box.style.width=B-P+"px",this._box.style.height=ee-V+"px"}}},Ue.prototype.mouseupWindow=function(p,g){var f=this;if(this._active&&0===p.button){var x=this._startPos,P=g;if(this.reset(),Y.suppressClick(),x.x!==P.x||x.y!==P.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:p})),{cameraAnimation:function(B){return B.fitScreenCoordinates(x,P,f._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",p)}},Ue.prototype.keydown=function(p){this._active&&27===p.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",p))},Ue.prototype.blur=function(){this.reset()},Ue.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos},Ue.prototype._fireEvent=function(p,g){return this._map.fire(new u.Event(p,{originalEvent:g}))};var an=function(p){this.reset(),this.numTouches=p.numTouches};an.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},an.prototype.touchstart=function(p,g,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=p.timeStamp),f.length===this.numTouches&&(this.centroid=function(x){for(var P=new u.Point(0,0),B=0,V=x;B<V.length;B+=1)P._add(V[B]);return P.div(x.length)}(g),this.touches=vt(f,g)))},an.prototype.touchmove=function(p,g,f){if(!this.aborted&&this.centroid){var x=vt(f,g);for(var P in this.touches){var B=x[P];(!B||B.dist(this.touches[P])>30)&&(this.aborted=!0)}}},an.prototype.touchend=function(p,g,f){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),0===f.length){var x=!this.aborted&&this.centroid;if(this.reset(),x)return x}};var En=function(p){this.singleTap=new an(p),this.numTaps=p.numTaps,this.reset()};En.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},En.prototype.touchstart=function(p,g,f){this.singleTap.touchstart(p,g,f)},En.prototype.touchmove=function(p,g,f){this.singleTap.touchmove(p,g,f)},En.prototype.touchend=function(p,g,f){var x=this.singleTap.touchend(p,g,f);if(x){var P=p.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(x)<30;if(P&&B||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}};var oi=function(){this._zoomIn=new En({numTouches:1,numTaps:2}),this._zoomOut=new En({numTouches:2,numTaps:1}),this.reset()};oi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},oi.prototype.touchstart=function(p,g,f){this._zoomIn.touchstart(p,g,f),this._zoomOut.touchstart(p,g,f)},oi.prototype.touchmove=function(p,g,f){this._zoomIn.touchmove(p,g,f),this._zoomOut.touchmove(p,g,f)},oi.prototype.touchend=function(p,g,f){var x=this,P=this._zoomIn.touchend(p,g,f),B=this._zoomOut.touchend(p,g,f);return P?(this._active=!0,p.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(V){return V.easeTo({duration:300,zoom:V.getZoom()+1,around:V.unproject(P)},{originalEvent:p})}}):B?(this._active=!0,p.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(V){return V.easeTo({duration:300,zoom:V.getZoom()-1,around:V.unproject(B)},{originalEvent:p})}}):void 0},oi.prototype.touchcancel=function(){this.reset()},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Jr={0:1,2:2},Dn=function(p){this.reset(),this._clickTolerance=p.clickTolerance||1};Dn.prototype.blur=function(){this.reset()},Dn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Dn.prototype._correctButton=function(p,g){return!1},Dn.prototype._move=function(p,g){return{}},Dn.prototype.mousedown=function(p,g){if(!this._lastPoint){var f=Y.mouseButton(p);this._correctButton(p,f)&&(this._lastPoint=g,this._eventButton=f)}},Dn.prototype.mousemoveWindow=function(p,g){var x,B,f=this._lastPoint;if(f)if(p.preventDefault(),B=Jr[this._eventButton],void 0===(x=p).buttons||(x.buttons&B)!==B)this.reset();else if(this._moved||!(g.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(f,g)},Dn.prototype.mouseupWindow=function(p){this._lastPoint&&Y.mouseButton(p)===this._eventButton&&(this._moved&&Y.suppressClick(),this.reset())},Dn.prototype.enable=function(){this._enabled=!0},Dn.prototype.disable=function(){this._enabled=!1,this.reset()},Dn.prototype.isEnabled=function(){return this._enabled},Dn.prototype.isActive=function(){return this._active};var Tr=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.mousedown=function(f,x){p.prototype.mousedown.call(this,f,x),this._lastPoint&&(this._active=!0)},g.prototype._correctButton=function(f,x){return 0===x&&!f.ctrlKey},g.prototype._move=function(f,x){return{around:x,panDelta:x.sub(f)}},g}(Dn),er=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype._correctButton=function(f,x){return 0===x&&f.ctrlKey||2===x},g.prototype._move=function(f,x){var P=.8*(x.x-f.x);if(P)return this._active=!0,{bearingDelta:P}},g.prototype.contextmenu=function(f){f.preventDefault()},g}(Dn),wo=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype._correctButton=function(f,x){return 0===x&&f.ctrlKey||2===x},g.prototype._move=function(f,x){var P=-.5*(x.y-f.y);if(P)return this._active=!0,{pitchDelta:P}},g.prototype.contextmenu=function(f){f.preventDefault()},g}(Dn),hr=function(p){this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset()};hr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new u.Point(0,0)},hr.prototype.touchstart=function(p,g,f){return this._calculateTransform(p,g,f)},hr.prototype.touchmove=function(p,g,f){if(this._active&&!(f.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,g,f)},hr.prototype.touchend=function(p,g,f){this._calculateTransform(p,g,f),this._active&&f.length<this._minTouches&&this.reset()},hr.prototype.touchcancel=function(){this.reset()},hr.prototype._calculateTransform=function(p,g,f){f.length>0&&(this._active=!0);var x=vt(f,g),P=new u.Point(0,0),B=new u.Point(0,0),V=0;for(var ee in x){var Ce=x[ee],Re=this._touches[ee];Re&&(P._add(Ce),B._add(Ce.sub(Re)),V++,x[ee]=Ce)}if(this._touches=x,!(V<this._minTouches)&&B.mag()){var I=B.div(V);if(this._sum._add(I),!(this._sum.mag()<this._clickTolerance))return{around:P.div(V),panDelta:I}}},hr.prototype.enable=function(){this._enabled=!0},hr.prototype.disable=function(){this._enabled=!1,this.reset()},hr.prototype.isEnabled=function(){return this._enabled},hr.prototype.isActive=function(){return this._active};var Pr=function(){this.reset()};function Vs(p,g,f){for(var x=0;x<p.length;x++)if(p[x].identifier===f)return g[x]}function Hs(p,g){return Math.log(p/g)/Math.LN2}Pr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Pr.prototype._start=function(p){},Pr.prototype._move=function(p,g,f){return{}},Pr.prototype.touchstart=function(p,g,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([g[0],g[1]]))},Pr.prototype.touchmove=function(p,g,f){if(this._firstTwoTouches){p.preventDefault();var x=this._firstTwoTouches,P=x[1],B=Vs(f,g,x[0]),V=Vs(f,g,P);if(B&&V){var ee=this._aroundCenter?null:B.add(V).div(2);return this._move([B,V],ee,p)}}},Pr.prototype.touchend=function(p,g,f){if(this._firstTwoTouches){var x=this._firstTwoTouches,P=x[1],B=Vs(f,g,x[0]),V=Vs(f,g,P);B&&V||(this._active&&Y.suppressClick(),this.reset())}},Pr.prototype.touchcancel=function(){this.reset()},Pr.prototype.enable=function(p){this._enabled=!0,this._aroundCenter=!!p&&"center"===p.around},Pr.prototype.disable=function(){this._enabled=!1,this.reset()},Pr.prototype.isEnabled=function(){return this._enabled},Pr.prototype.isActive=function(){return this._active};var fs=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.reset=function(){p.prototype.reset.call(this),delete this._distance,delete this._startDistance},g.prototype._start=function(f){this._startDistance=this._distance=f[0].dist(f[1])},g.prototype._move=function(f,x){var P=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(Hs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hs(this._distance,P),pinchAround:x}},g}(Pr);function Ko(p,g){return 180*p.angleWith(g)/Math.PI}var Fo=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.reset=function(){p.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},g.prototype._start=function(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])},g.prototype._move=function(f,x){var P=this._vector;if(this._vector=f[0].sub(f[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ko(this._vector,P),pinchAround:x}},g.prototype._isBelowThreshold=function(f){this._minDiameter=Math.min(this._minDiameter,f.mag());var x=25/(Math.PI*this._minDiameter)*360,P=Ko(f,this._startVector);return Math.abs(P)<x},g}(Pr);function Ma(p){return Math.abs(p.y)>Math.abs(p.x)}var zl=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.reset=function(){p.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},g.prototype._start=function(f){this._lastPoints=f,Ma(f[0].sub(f[1]))&&(this._valid=!1)},g.prototype._move=function(f,x,P){var B=f[0].sub(this._lastPoints[0]),V=f[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(B,V,P.timeStamp),this._valid)return this._lastPoints=f,this._active=!0,{pitchDelta:(B.y+V.y)/2*-.5}},g.prototype.gestureBeginsVertically=function(f,x,P){if(void 0!==this._valid)return this._valid;var B=f.mag()>=2,V=x.mag()>=2;if(B||V){if(!B||!V)return void 0===this._firstMove&&(this._firstMove=P),P-this._firstMove<100&&void 0;var ee=f.y>0==x.y>0;return Ma(f)&&Ma(x)&&ee}},g}(Pr),yu={panStep:100,bearingStep:15,pitchStep:10},Ks=function(){var p=yu;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1};function Gs(p){return p*(2-p)}Ks.prototype.blur=function(){this.reset()},Ks.prototype.reset=function(){this._active=!1},Ks.prototype.keydown=function(p){var g=this;if(!(p.altKey||p.ctrlKey||p.metaKey)){var f=0,x=0,P=0,B=0,V=0;switch(p.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:p.shiftKey?x=-1:(p.preventDefault(),B=-1);break;case 39:p.shiftKey?x=1:(p.preventDefault(),B=1);break;case 38:p.shiftKey?P=1:(p.preventDefault(),V=-1);break;case 40:p.shiftKey?P=-1:(p.preventDefault(),V=1);break;default:return}return this._rotationDisabled&&(x=0,P=0),{cameraAnimation:function(ee){var Ce=ee.getZoom();ee.easeTo({duration:300,easeId:"keyboardHandler",easing:Gs,zoom:f?Math.round(Ce)+f*(p.shiftKey?2:1):Ce,bearing:ee.getBearing()+x*g._bearingStep,pitch:ee.getPitch()+P*g._pitchStep,offset:[-B*g._panStep,-V*g._panStep],center:ee.getCenter()},{originalEvent:p})}}}},Ks.prototype.enable=function(){this._enabled=!0},Ks.prototype.disable=function(){this._enabled=!1,this.reset()},Ks.prototype.isEnabled=function(){return this._enabled},Ks.prototype.isActive=function(){return this._active},Ks.prototype.disableRotation=function(){this._rotationDisabled=!0},Ks.prototype.enableRotation=function(){this._rotationDisabled=!1};var rr=function(p,g){this._map=p,this._el=p.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,u.bindAll(["_onTimeout"],this)};rr.prototype.setZoomRate=function(p){this._defaultZoomRate=p},rr.prototype.setWheelZoomRate=function(p){this._wheelZoomRate=p},rr.prototype.isEnabled=function(){return!!this._enabled},rr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},rr.prototype.isZooming=function(){return!!this._zooming},rr.prototype.enable=function(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=p&&"center"===p.around)},rr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rr.prototype.wheel=function(p){if(this.isEnabled()){var g=p.deltaMode===u.window.WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY,f=u.browser.now(),x=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,0!==g&&g%4.000244140625==0?this._type="wheel":0!==g&&Math.abs(g)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(x*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),p.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=p,this._delta-=g,this._active||this._start(p)),p.preventDefault()}},rr.prototype._onTimeout=function(p){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},rr.prototype._start=function(p){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var g=Y.mousePos(this._el,p);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(g)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},rr.prototype.renderFrame=function(){var p=this;if(this._frameId&&(this._frameId=null,this.isActive())){var g=this._map.transform;if(0!==this._delta){var f="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,x=2/(1+Math.exp(-Math.abs(this._delta*f)));this._delta<0&&0!==x&&(x=1/x);var P="number"==typeof this._targetZoom?g.zoomScale(this._targetZoom):g.scale;this._targetZoom=Math.min(g.maxZoom,Math.max(g.minZoom,g.scaleZoom(P*x))),"wheel"===this._type&&(this._startZoom=g.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var B,V="number"==typeof this._targetZoom?this._targetZoom:g.zoom,ee=this._startZoom,Ce=this._easing,Re=!1;if("wheel"===this._type&&ee&&Ce){var I=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),R=Ce(I);B=u.number(ee,V,R),I<1?this._frameId||(this._frameId=!0):Re=!0}else B=V,Re=!0;return this._active=!0,Re&&(this._active=!1,this._finishTimeout=setTimeout(function(){p._zooming=!1,p._handler._triggerRenderFrame(),delete p._targetZoom,delete p._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Re,zoomDelta:B-g.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},rr.prototype._smoothOutEasing=function(p){var g=u.ease;if(this._prevEase){var f=this._prevEase,x=(u.browser.now()-f.start)/f.duration,P=f.easing(x+.01)-f.easing(x),B=.27/Math.sqrt(P*P+1e-4)*.01,V=Math.sqrt(.0729-B*B);g=u.bezier(B,V,.25,1)}return this._prevEase={start:u.browser.now(),duration:p,easing:g},g},rr.prototype.blur=function(){this.reset()},rr.prototype.reset=function(){this._active=!1};var Ba=function(p,g){this._clickZoom=p,this._tapZoom=g};Ba.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ba.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ba.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ba.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ns=function(){this.reset()};ns.prototype.reset=function(){this._active=!1},ns.prototype.blur=function(){this.reset()},ns.prototype.dblclick=function(p,g){return p.preventDefault(),{cameraAnimation:function(f){f.easeTo({duration:300,zoom:f.getZoom()+(p.shiftKey?-1:1),around:f.unproject(g)},{originalEvent:p})}}},ns.prototype.enable=function(){this._enabled=!0},ns.prototype.disable=function(){this._enabled=!1,this.reset()},ns.prototype.isEnabled=function(){return this._enabled},ns.prototype.isActive=function(){return this._active};var Ps=function(){this._tap=new En({numTouches:1,numTaps:1}),this.reset()};Ps.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ps.prototype.touchstart=function(p,g,f){this._swipePoint||(this._tapTime&&p.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=g[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(p,g,f))},Ps.prototype.touchmove=function(p,g,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;var x=g[0],P=x.y-this._swipePoint.y;return this._swipePoint=x,p.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(p,g,f)},Ps.prototype.touchend=function(p,g,f){this._tapTime?this._swipePoint&&0===f.length&&this.reset():this._tap.touchend(p,g,f)&&(this._tapTime=p.timeStamp)},Ps.prototype.touchcancel=function(){this.reset()},Ps.prototype.enable=function(){this._enabled=!0},Ps.prototype.disable=function(){this._enabled=!1,this.reset()},Ps.prototype.isEnabled=function(){return this._enabled},Ps.prototype.isActive=function(){return this._active};var Ua=function(p,g,f){this._el=p,this._mousePan=g,this._touchPan=f};Ua.prototype.enable=function(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ua.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ua.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ua.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Fu=function(p,g,f){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=g,this._mousePitch=f};Fu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Fu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Fu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Fu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var il=function(p,g,f,x){this._el=p,this._touchZoom=g,this._touchRotate=f,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0};il.prototype.enable=function(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},il.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},il.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},il.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},il.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},il.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Zs=function(p){return p.zoom||p.drag||p.pitch||p.rotate},sc=function(p){function g(){p.apply(this,arguments)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g}(u.Event);function li(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}var ei=function(p,g){this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ul(p),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g),u.bindAll(["handleEvent","handleWindowEvent"],this);var f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[u.window.document,"mousemove",{capture:!0}],[u.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[u.window,"blur",void 0]];for(var x=0,P=this._listeners;x<P.length;x+=1){var B=P[x],V=B[0];Y.addEventListener(V,B[1],V===u.window.document?this.handleWindowEvent:this.handleEvent,B[2])}};ei.prototype.destroy=function(){for(var p=0,g=this._listeners;p<g.length;p+=1){var f=g[p],x=f[0];Y.removeEventListener(x,f[1],x===u.window.document?this.handleWindowEvent:this.handleEvent,f[2])}},ei.prototype._addDefaultHandlers=function(p){var g=this._map,f=g.getCanvasContainer();this._add("mapEvent",new Se(g,p));var x=g.boxZoom=new Ue(g,p);this._add("boxZoom",x);var P=new oi,B=new ns;g.doubleClickZoom=new Ba(B,P),this._add("tapZoom",P),this._add("clickZoom",B);var V=new Ps;this._add("tapDragZoom",V);var ee=g.touchPitch=new zl;this._add("touchPitch",ee);var Ce=new er(p),Re=new wo(p);g.dragRotate=new Fu(p,Ce,Re),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",Re,["mouseRotate"]);var I=new Tr(p),R=new hr(p);g.dragPan=new Ua(f,I,R),this._add("mousePan",I),this._add("touchPan",R,["touchZoom","touchRotate"]);var S=new Fo,U=new fs;g.touchZoomRotate=new il(f,U,S,V),this._add("touchRotate",S,["touchPan","touchZoom"]),this._add("touchZoom",U,["touchPan","touchRotate"]);var $=g.scrollZoom=new rr(g,this);this._add("scrollZoom",$,["mousePan"]);var ue=g.keyboard=new Ks;this._add("keyboard",ue),this._add("blockableMapEvent",new X(g));for(var oe=0,Ne=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];oe<Ne.length;oe+=1){var st=Ne[oe];p.interactive&&p[st]&&g[st].enable(p[st])}},ei.prototype._add=function(p,g,f){this._handlers.push({handlerName:p,handler:g,allowed:f}),this._handlersById[p]=g},ei.prototype.stop=function(p){if(!this._updatingCamera){for(var g=0,f=this._handlers;g<f.length;g+=1)f[g].handler.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}},ei.prototype.isActive=function(){for(var p=0,g=this._handlers;p<g.length;p+=1)if(g[p].handler.isActive())return!0;return!1},ei.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ei.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ei.prototype.isMoving=function(){return Boolean(Zs(this._eventsInProgress))||this.isZooming()},ei.prototype._blockedByActive=function(p,g,f){for(var x in p)if(x!==f&&(!g||g.indexOf(x)<0))return!0;return!1},ei.prototype.handleWindowEvent=function(p){this.handleEvent(p,p.type+"Window")},ei.prototype._getMapTouches=function(p){for(var g=[],f=0,x=p;f<x.length;f+=1){var P=x[f];this._el.contains(P.target)&&g.push(P)}return g},ei.prototype.handleEvent=function(p,g){this._updatingCamera=!0;for(var f="renderFrame"===p.type?void 0:p,x={needsRenderFrame:!1},P={},B={},V=p.touches?this._getMapTouches(p.touches):void 0,ee=V?Y.touchPos(this._el,V):Y.mousePos(this._el,p),Ce=0,Re=this._handlers;Ce<Re.length;Ce+=1){var I=Re[Ce],R=I.handlerName,S=I.handler,U=I.allowed;if(S.isEnabled()){var $=void 0;this._blockedByActive(B,U,R)?S.reset():S[g||p.type]&&($=S[g||p.type](p,ee,V),this.mergeHandlerResult(x,P,$,R,f),$&&$.needsRenderFrame&&this._triggerRenderFrame()),($||S.isActive())&&(B[R]=S)}}var ue={};for(var oe in this._previousActiveHandlers)B[oe]||(ue[oe]=f);this._previousActiveHandlers=B,(Object.keys(ue).length||li(x))&&(this._changes.push([x,P,ue]),this._triggerRenderFrame()),(Object.keys(B).length||li(x))&&this._map._stop(!0),this._updatingCamera=!1;var Ne=x.cameraAnimation;Ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ne(this._map))},ei.prototype.mergeHandlerResult=function(p,g,f,x,P){if(f){u.extend(p,f);var B={handlerName:x,originalEvent:f.originalEvent||P};void 0!==f.zoomDelta&&(g.zoom=B),void 0!==f.panDelta&&(g.drag=B),void 0!==f.pitchDelta&&(g.pitch=B),void 0!==f.bearingDelta&&(g.rotate=B)}},ei.prototype._applyChanges=function(){for(var p={},g={},f={},x=0,P=this._changes;x<P.length;x+=1){var B=P[x],V=B[0],ee=B[1],Ce=B[2];V.panDelta&&(p.panDelta=(p.panDelta||new u.Point(0,0))._add(V.panDelta)),V.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+V.zoomDelta),V.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+V.bearingDelta),V.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+V.pitchDelta),void 0!==V.around&&(p.around=V.around),void 0!==V.pinchAround&&(p.pinchAround=V.pinchAround),V.noInertia&&(p.noInertia=V.noInertia),u.extend(g,ee),u.extend(f,Ce)}this._updateMapTransform(p,g,f),this._changes=[]},ei.prototype._updateMapTransform=function(p,g,f){var x=this._map,P=x.transform;if(!li(p))return this._fireEvents(g,f,!0);var B=p.panDelta,V=p.zoomDelta,ee=p.bearingDelta,Ce=p.pitchDelta,Re=p.around,I=p.pinchAround;void 0!==I&&(Re=I),x._stop(!0),Re=Re||x.transform.centerPoint;var R=P.pointLocation(B?Re.sub(B):Re);ee&&(P.bearing+=ee),Ce&&(P.pitch+=Ce),V&&(P.zoom+=V),P.setLocationAtPoint(R,Re),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(g,f,!0)},ei.prototype._fireEvents=function(p,g,f){var x=this,P=Zs(this._eventsInProgress),B=Zs(p),V={};for(var ee in p)this._eventsInProgress[ee]||(V[ee+"start"]=p[ee].originalEvent),this._eventsInProgress[ee]=p[ee];for(var Ce in!P&&B&&this._fireEvent("movestart",B.originalEvent),V)this._fireEvent(Ce,V[Ce]);for(var Re in B&&this._fireEvent("move",B.originalEvent),p)this._fireEvent(Re,p[Re].originalEvent);var I,R={};for(var S in this._eventsInProgress){var U=this._eventsInProgress[S],$=U.handlerName,ue=U.originalEvent;this._handlersById[$].isActive()||(delete this._eventsInProgress[S],R[S+"end"]=I=g[$]||ue)}for(var oe in R)this._fireEvent(oe,R[oe]);var Ne=Zs(this._eventsInProgress);if(f&&(P||B)&&!Ne){this._updatingCamera=!0;var st=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Mt=function(Lt){return 0!==Lt&&-x._bearingSnap<Lt&&Lt<x._bearingSnap};st?(Mt(st.bearing||this._map.getBearing())&&(st.bearing=0),this._map.easeTo(st,{originalEvent:I})):(this._map.fire(new u.Event("moveend",{originalEvent:I})),Mt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ei.prototype._fireEvent=function(p,g){this._map.fire(new u.Event(p,g?{originalEvent:g}:{}))},ei.prototype._requestFrame=function(){var p=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(g){delete p._frameId,p.handleEvent(new sc("renderFrame",{timeStamp:g})),p._applyChanges()})},ei.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var jl=function(p){function g(f,x){p.call(this),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=x.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.getCenter=function(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)},g.prototype.setCenter=function(f,x){return this.jumpTo({center:f},x)},g.prototype.panBy=function(f,x,P){return f=u.Point.convert(f).mult(-1),this.panTo(this.transform.center,u.extend({offset:f},x),P)},g.prototype.panTo=function(f,x,P){return this.easeTo(u.extend({center:f},x),P)},g.prototype.getZoom=function(){return this.transform.zoom},g.prototype.setZoom=function(f,x){return this.jumpTo({zoom:f},x),this},g.prototype.zoomTo=function(f,x,P){return this.easeTo(u.extend({zoom:f},x),P)},g.prototype.zoomIn=function(f,x){return this.zoomTo(this.getZoom()+1,f,x),this},g.prototype.zoomOut=function(f,x){return this.zoomTo(this.getZoom()-1,f,x),this},g.prototype.getBearing=function(){return this.transform.bearing},g.prototype.setBearing=function(f,x){return this.jumpTo({bearing:f},x),this},g.prototype.getPadding=function(){return this.transform.padding},g.prototype.setPadding=function(f,x){return this.jumpTo({padding:f},x),this},g.prototype.rotateTo=function(f,x,P){return this.easeTo(u.extend({bearing:f},x),P)},g.prototype.resetNorth=function(f,x){return this.rotateTo(0,u.extend({duration:1e3},f),x),this},g.prototype.resetNorthPitch=function(f,x){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},f),x),this},g.prototype.snapToNorth=function(f,x){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,x):this},g.prototype.getPitch=function(){return this.transform.pitch},g.prototype.setPitch=function(f,x){return this.jumpTo({pitch:f},x),this},g.prototype.cameraForBounds=function(f,x){f=u.LngLatBounds.convert(f);var P=x&&x.bearing||0;return this._cameraForBoxAndBearing(f.getNorthWest(),f.getSouthEast(),P,x)},g.prototype._cameraForBoxAndBearing=function(f,x,P,B){var V={top:0,bottom:0,right:0,left:0};if("number"==typeof(B=u.extend({padding:V,offset:[0,0],maxZoom:this.transform.maxZoom},B)).padding){var ee=B.padding;B.padding={top:ee,bottom:ee,right:ee,left:ee}}B.padding=u.extend(V,B.padding);var Ce=this.transform,Re=Ce.padding,I=Ce.project(u.LngLat.convert(f)),R=Ce.project(u.LngLat.convert(x)),S=I.rotate(-P*Math.PI/180),U=R.rotate(-P*Math.PI/180),$=new u.Point(Math.max(S.x,U.x),Math.max(S.y,U.y)),ue=new u.Point(Math.min(S.x,U.x),Math.min(S.y,U.y)),oe=$.sub(ue),Ne=(Ce.width-(Re.left+Re.right+B.padding.left+B.padding.right))/oe.x,st=(Ce.height-(Re.top+Re.bottom+B.padding.top+B.padding.bottom))/oe.y;if(!(st<0||Ne<0)){var Mt=Math.min(Ce.scaleZoom(Ce.scale*Math.min(Ne,st)),B.maxZoom),Lt="number"==typeof B.offset.x?new u.Point(B.offset.x,B.offset.y):u.Point.convert(B.offset),Rt=new u.Point((B.padding.left-B.padding.right)/2,(B.padding.top-B.padding.bottom)/2).rotate(P*Math.PI/180),Xt=Lt.add(Rt).mult(Ce.scale/Ce.zoomScale(Mt));return{center:Ce.unproject(I.add(R).div(2).sub(Xt)),zoom:Mt,bearing:P}}u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},g.prototype.fitBounds=function(f,x,P){return this._fitInternal(this.cameraForBounds(f,x),x,P)},g.prototype.fitScreenCoordinates=function(f,x,P,B,V){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(f)),this.transform.pointLocation(u.Point.convert(x)),P,B),B,V)},g.prototype._fitInternal=function(f,x,P){return f?(delete(x=u.extend(f,x)).padding,x.linear?this.easeTo(x,P):this.flyTo(x,P)):this},g.prototype.jumpTo=function(f,x){this.stop();var P=this.transform,B=!1,V=!1,ee=!1;return"zoom"in f&&P.zoom!==+f.zoom&&(B=!0,P.zoom=+f.zoom),void 0!==f.center&&(P.center=u.LngLat.convert(f.center)),"bearing"in f&&P.bearing!==+f.bearing&&(V=!0,P.bearing=+f.bearing),"pitch"in f&&P.pitch!==+f.pitch&&(ee=!0,P.pitch=+f.pitch),null==f.padding||P.isPaddingEqual(f.padding)||(P.padding=f.padding),this.fire(new u.Event("movestart",x)).fire(new u.Event("move",x)),B&&this.fire(new u.Event("zoomstart",x)).fire(new u.Event("zoom",x)).fire(new u.Event("zoomend",x)),V&&this.fire(new u.Event("rotatestart",x)).fire(new u.Event("rotate",x)).fire(new u.Event("rotateend",x)),ee&&this.fire(new u.Event("pitchstart",x)).fire(new u.Event("pitch",x)).fire(new u.Event("pitchend",x)),this.fire(new u.Event("moveend",x))},g.prototype.easeTo=function(f,x){var P=this;this._stop(!1,f.easeId),(!1===(f=u.extend({offset:[0,0],duration:500,easing:u.ease},f)).animate||!f.essential&&u.browser.prefersReducedMotion)&&(f.duration=0);var B=this.transform,V=this.getZoom(),ee=this.getBearing(),Ce=this.getPitch(),Re=this.getPadding(),I="zoom"in f?+f.zoom:V,R="bearing"in f?this._normalizeBearing(f.bearing,ee):ee,S="pitch"in f?+f.pitch:Ce,U="padding"in f?f.padding:B.padding,$=u.Point.convert(f.offset),ue=B.centerPoint.add($),oe=B.pointLocation(ue),Ne=u.LngLat.convert(f.center||oe);this._normalizeCenter(Ne);var st,Mt,Lt=B.project(oe),Rt=B.project(Ne).sub(Lt),Xt=B.zoomScale(I-V);f.around&&(st=u.LngLat.convert(f.around),Mt=B.locationPoint(st));var yn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==V,this._rotating=this._rotating||ee!==R,this._pitching=this._pitching||S!==Ce,this._padding=!B.isPaddingEqual(U),this._easeId=f.easeId,this._prepareEase(x,f.noMoveStart,yn),this._ease(function(zn){if(P._zooming&&(B.zoom=u.number(V,I,zn)),P._rotating&&(B.bearing=u.number(ee,R,zn)),P._pitching&&(B.pitch=u.number(Ce,S,zn)),P._padding&&(B.interpolatePadding(Re,U,zn),ue=B.centerPoint.add($)),st)B.setLocationAtPoint(st,Mt);else{var Rn=B.zoomScale(B.zoom-V),qn=I>V?Math.min(2,Xt):Math.max(.5,Xt),Mi=Math.pow(qn,1-zn),Si=B.unproject(Lt.add(Rt.mult(zn*Mi)).mult(Rn));B.setLocationAtPoint(B.renderWorldCopies?Si.wrap():Si,ue)}P._fireMoveEvents(x)},function(zn){P._afterEase(x,zn)},f),this},g.prototype._prepareEase=function(f,x,P){void 0===P&&(P={}),this._moving=!0,x||P.moving||this.fire(new u.Event("movestart",f)),this._zooming&&!P.zooming&&this.fire(new u.Event("zoomstart",f)),this._rotating&&!P.rotating&&this.fire(new u.Event("rotatestart",f)),this._pitching&&!P.pitching&&this.fire(new u.Event("pitchstart",f))},g.prototype._fireMoveEvents=function(f){this.fire(new u.Event("move",f)),this._zooming&&this.fire(new u.Event("zoom",f)),this._rotating&&this.fire(new u.Event("rotate",f)),this._pitching&&this.fire(new u.Event("pitch",f))},g.prototype._afterEase=function(f,x){if(!this._easeId||!x||this._easeId!==x){delete this._easeId;var P=this._zooming,B=this._rotating,V=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,P&&this.fire(new u.Event("zoomend",f)),B&&this.fire(new u.Event("rotateend",f)),V&&this.fire(new u.Event("pitchend",f)),this.fire(new u.Event("moveend",f))}},g.prototype.flyTo=function(f,x){var P=this;if(!f.essential&&u.browser.prefersReducedMotion){var B=u.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(B,x)}this.stop(),f=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},f);var V=this.transform,ee=this.getZoom(),Ce=this.getBearing(),Re=this.getPitch(),I=this.getPadding(),R="zoom"in f?u.clamp(+f.zoom,V.minZoom,V.maxZoom):ee,S="bearing"in f?this._normalizeBearing(f.bearing,Ce):Ce,U="pitch"in f?+f.pitch:Re,$="padding"in f?f.padding:V.padding,ue=V.zoomScale(R-ee),oe=u.Point.convert(f.offset),Ne=V.centerPoint.add(oe),st=V.pointLocation(Ne),Mt=u.LngLat.convert(f.center||st);this._normalizeCenter(Mt);var Lt=V.project(st),Rt=V.project(Mt).sub(Lt),Xt=f.curve,yn=Math.max(V.width,V.height),zn=yn/ue,Rn=Rt.mag();if("minZoom"in f){var qn=u.clamp(Math.min(f.minZoom,ee,R),V.minZoom,V.maxZoom),Mi=yn/V.zoomScale(qn-ee);Xt=Math.sqrt(Mi/Rn*2)}var Si=Xt*Xt;function Ei(Bi){var Zi=(zn*zn-yn*yn+(Bi?-1:1)*Si*Si*Rn*Rn)/(2*(Bi?zn:yn)*Si*Rn);return Math.log(Math.sqrt(Zi*Zi+1)-Zi)}function Lr(Bi){return(Math.exp(Bi)-Math.exp(-Bi))/2}function ui(Bi){return(Math.exp(Bi)+Math.exp(-Bi))/2}var tr=Ei(0),fr=function(Bi){return ui(tr)/ui(tr+Xt*Bi)},Ji=function(Bi){return yn*((ui(tr)*(Lr(Zi=tr+Xt*Bi)/ui(Zi))-Lr(tr))/Si)/Rn;var Zi},zi=(Ei(1)-tr)/Xt;if(Math.abs(Rn)<1e-6||!isFinite(zi)){if(Math.abs(yn-zn)<1e-6)return this.easeTo(f,x);var nr=zn<yn?-1:1;zi=Math.abs(Math.log(zn/yn))/Xt,Ji=function(){return 0},fr=function(Bi){return Math.exp(nr*Xt*Bi)}}return f.duration="duration"in f?+f.duration:1e3*zi/("screenSpeed"in f?+f.screenSpeed/Xt:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0),this._zooming=!0,this._rotating=Ce!==S,this._pitching=U!==Re,this._padding=!V.isPaddingEqual($),this._prepareEase(x,!1),this._ease(function(Bi){var Zi=Bi*zi,Ms=1/fr(Zi);V.zoom=1===Bi?R:ee+V.scaleZoom(Ms),P._rotating&&(V.bearing=u.number(Ce,S,Bi)),P._pitching&&(V.pitch=u.number(Re,U,Bi)),P._padding&&(V.interpolatePadding(I,$,Bi),Ne=V.centerPoint.add(oe));var Ss=1===Bi?Mt:V.unproject(Lt.add(Rt.mult(Ji(Zi))).mult(Ms));V.setLocationAtPoint(V.renderWorldCopies?Ss.wrap():Ss,Ne),P._fireMoveEvents(x)},function(){return P._afterEase(x)},f),this},g.prototype.isEasing=function(){return!!this._easeFrameId},g.prototype.stop=function(){return this._stop()},g.prototype._stop=function(f,x){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,x)}if(!f){var B=this.handlers;B&&B.stop(!1)}return this},g.prototype._ease=function(f,x,P){!1===P.animate||0===P.duration?(f(1),x()):(this._easeStart=u.browser.now(),this._easeOptions=P,this._onEaseFrame=f,this._onEaseEnd=x,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},g.prototype._renderFrameCallback=function(){var f=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},g.prototype._normalizeBearing=function(f,x){f=u.wrap(f,-180,180);var P=Math.abs(f-x);return Math.abs(f-360-x)<P&&(f-=360),Math.abs(f+360-x)<P&&(f+=360),f},g.prototype._normalizeCenter=function(f){var x=this.transform;if(x.renderWorldCopies&&!x.lngRange){var P=f.lng-x.center.lng;f.lng+=P>180?-360:P<-180?360:0}},g}(u.Evented),ss=function(p){void 0===p&&(p={}),this.options=p,u.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ss.prototype.getDefaultPosition=function(){return"bottom-right"},ss.prototype.onAdd=function(p){var g=this.options&&this.options.compact;return this._map=p,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===g&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ss.prototype.onRemove=function(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ss.prototype._setElementTitle=function(p,g){var f=this._map._getUIString("AttributionControl."+g);p.title=f,p.setAttribute("aria-label",f)},ss.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ss.prototype._updateEditLink=function(){var p=this._editLink;p||(p=this._editLink=this._container.querySelector(".mapbox-improve-map"));var g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||u.config.ACCESS_TOKEN}];if(p){var f=g.reduce(function(x,P,B){return P.value&&(x+=P.key+"="+P.value+(B<g.length-1?"&":"")),x},"?");p.href=u.config.FEEDBACK_URL+"/"+f+(this._map._hash?this._map._hash.getHashString(!0):""),p.rel="noopener nofollow",this._setElementTitle(p,"MapFeedback")}},ss.prototype._updateData=function(p){!p||"metadata"!==p.sourceDataType&&"visibility"!==p.sourceDataType&&"style"!==p.dataType||(this._updateAttributions(),this._updateEditLink())},ss.prototype._updateAttributions=function(){if(this._map.style){var p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(function(ee){return"string"!=typeof ee?"":ee})):"string"==typeof this.options.customAttribution&&p.push(this.options.customAttribution)),this._map.style.stylesheet){var g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}var f=this._map.style.sourceCaches;for(var x in f){var P=f[x];if(P.used){var B=P.getSource();B.attribution&&p.indexOf(B.attribution)<0&&p.push(B.attribution)}}p.sort(function(ee,Ce){return ee.length-Ce.length});var V=(p=p.filter(function(ee,Ce){for(var Re=Ce+1;Re<p.length;Re++)if(p[Re].indexOf(ee)>=0)return!1;return!0})).join(" | ");V!==this._attribHTML&&(this._attribHTML=V,p.length?(this._innerContainer.innerHTML=V,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ss.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var $s=function(){u.bindAll(["_updateLogo"],this),u.bindAll(["_updateCompact"],this)};$s.prototype.onAdd=function(p){this._map=p,this._container=Y.create("div","mapboxgl-ctrl");var g=Y.create("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},$s.prototype.onRemove=function(){Y.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},$s.prototype.getDefaultPosition=function(){return"bottom-left"},$s.prototype._updateLogo=function(p){p&&"metadata"!==p.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},$s.prototype._logoRequired=function(){if(this._map.style){var p=this._map.style.sourceCaches;for(var g in p)if(p[g].getSource().mapbox_logo)return!0;return!1}},$s.prototype._updateCompact=function(){var p=this._container.children;if(p.length){var g=p[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}};var ms=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ms.prototype.add=function(p){var g=++this._id;return this._queue.push({callback:p,id:g,cancelled:!1}),g},ms.prototype.remove=function(p){for(var g=this._currentlyRunning,f=0,x=g?this._queue.concat(g):this._queue;f<x.length;f+=1){var P=x[f];if(P.id===p)return void(P.cancelled=!0)}},ms.prototype.run=function(p){void 0===p&&(p=0);var g=this._currentlyRunning=this._queue;this._queue=[];for(var f=0,x=g;f<x.length;f+=1){var P=x[f];if(!P.cancelled&&(P.callback(p),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ms.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var rl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xl=u.window.HTMLImageElement,nu=u.window.HTMLElement,zr=u.window.ImageBitmap,Ge={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},me=function(p){function g(x){var P=this;if(null!=(x=u.extend({},Ge,x)).minZoom&&null!=x.maxZoom&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=x.minPitch&&null!=x.maxPitch&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=x.minPitch&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=x.maxPitch&&x.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var B=new Cr(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies);if(p.call(this,B,x),this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new ms,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},rl,x.locale),this._clickTolerance=x.clickTolerance,this._requestManager=new u.RequestManager(x.transformRequest,x.accessToken),"string"==typeof x.container){if(this._container=u.window.document.getElementById(x.container),!this._container)throw new Error("Container '"+x.container+"' not found.")}else{if(!(x.container instanceof nu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return P._update(!1)}),this.on("moveend",function(){return P._update(!1)}),this.on("zoom",function(){return P._update(!0)}),void 0!==u.window&&(u.window.addEventListener("online",this._onWindowOnline,!1),u.window.addEventListener("resize",this._onWindowResize,!1),u.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ei(this,x),this._hash=x.hash&&new ps("string"==typeof x.hash&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,u.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new ss({customAttribution:x.customAttribution})),this.addControl(new $s,x.logoPosition),this.on("style.load",function(){P.transform.unmodified&&P.jumpTo(P.style.stylesheet)}),this.on("data",function(V){P._update("style"===V.dataType),P.fire(new u.Event(V.dataType+"data",V))}),this.on("dataloading",function(V){P.fire(new u.Event(V.dataType+"dataloading",V))})}p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g;var f={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return g.prototype._getMapId=function(){return this._mapId},g.prototype.addControl=function(x,P){if(void 0===P&&(P=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var B=x.onAdd(this);this._controls.push(x);var V=this._controlPositions[P];return-1!==P.indexOf("bottom")?V.insertBefore(B,V.firstChild):V.appendChild(B),this},g.prototype.removeControl=function(x){if(!x||!x.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var P=this._controls.indexOf(x);return P>-1&&this._controls.splice(P,1),x.onRemove(this),this},g.prototype.hasControl=function(x){return this._controls.indexOf(x)>-1},g.prototype.resize=function(x){var P=this._containerDimensions(),B=P[0],V=P[1];if(B===this.transform.width&&V===this.transform.height)return this;this._resizeCanvas(B,V),this.transform.resize(B,V),this.painter.resize(B,V);var ee=!this._moving;return ee&&this.fire(new u.Event("movestart",x)).fire(new u.Event("move",x)),this.fire(new u.Event("resize",x)),ee&&this.fire(new u.Event("moveend",x)),this},g.prototype.getBounds=function(){return this.transform.getBounds()},g.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},g.prototype.setMaxBounds=function(x){return this.transform.setMaxBounds(u.LngLatBounds.convert(x)),this._update()},g.prototype.setMinZoom=function(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},g.prototype.getMinZoom=function(){return this.transform.minZoom},g.prototype.setMaxZoom=function(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")},g.prototype.getMaxZoom=function(){return this.transform.maxZoom},g.prototype.setMinPitch=function(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},g.prototype.getMinPitch=function(){return this.transform.minPitch},g.prototype.setMaxPitch=function(x){if((x=x??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")},g.prototype.getMaxPitch=function(){return this.transform.maxPitch},g.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},g.prototype.setRenderWorldCopies=function(x){return this.transform.renderWorldCopies=x,this._update()},g.prototype.project=function(x){return this.transform.locationPoint(u.LngLat.convert(x))},g.prototype.unproject=function(x){return this.transform.pointLocation(u.Point.convert(x))},g.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},g.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},g.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},g.prototype._createDelegatedListener=function(x,P,B){var V,ee=this;if("mouseenter"===x||"mouseover"===x){var Ce=!1;return{layer:P,listener:B,delegates:{mousemove:function(I){var R=ee.getLayer(P)?ee.queryRenderedFeatures(I.point,{layers:[P]}):[];R.length?Ce||(Ce=!0,B.call(ee,new Qo(x,ee,I.originalEvent,{features:R}))):Ce=!1},mouseout:function(){Ce=!1}}}}if("mouseleave"===x||"mouseout"===x){var Re=!1;return{layer:P,listener:B,delegates:{mousemove:function(I){(ee.getLayer(P)?ee.queryRenderedFeatures(I.point,{layers:[P]}):[]).length?Re=!0:Re&&(Re=!1,B.call(ee,new Qo(x,ee,I.originalEvent)))},mouseout:function(I){Re&&(Re=!1,B.call(ee,new Qo(x,ee,I.originalEvent)))}}}}return{layer:P,listener:B,delegates:(V={},V[x]=function(I){var R=ee.getLayer(P)?ee.queryRenderedFeatures(I.point,{layers:[P]}):[];R.length&&(I.features=R,B.call(ee,I),delete I.features)},V)}},g.prototype.on=function(x,P,B){if(void 0===B)return p.prototype.on.call(this,x,P);var V=this._createDelegatedListener(x,P,B);for(var ee in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(V),V.delegates)this.on(ee,V.delegates[ee]);return this},g.prototype.once=function(x,P,B){if(void 0===B)return p.prototype.once.call(this,x,P);var V=this._createDelegatedListener(x,P,B);for(var ee in V.delegates)this.once(ee,V.delegates[ee]);return this},g.prototype.off=function(x,P,B){var V=this;return void 0===B?p.prototype.off.call(this,x,P):(this._delegatedListeners&&this._delegatedListeners[x]&&function(ee){for(var Ce=ee[x],Re=0;Re<Ce.length;Re++){var I=Ce[Re];if(I.layer===P&&I.listener===B){for(var R in I.delegates)V.off(R,I.delegates[R]);return Ce.splice(Re,1),V}}}(this._delegatedListeners),this)},g.prototype.queryRenderedFeatures=function(x,P){if(!this.style)return[];var B;if(void 0!==P||void 0===x||x instanceof u.Point||Array.isArray(x)||(P=x,x=void 0),P=P||{},(x=x||[[0,0],[this.transform.width,this.transform.height]])instanceof u.Point||"number"==typeof x[0])B=[u.Point.convert(x)];else{var V=u.Point.convert(x[0]),ee=u.Point.convert(x[1]);B=[V,new u.Point(ee.x,V.y),ee,new u.Point(V.x,ee.y),V]}return this.style.queryRenderedFeatures(B,P,this.transform)},g.prototype.querySourceFeatures=function(x,P){return this.style.querySourceFeatures(x,P)},g.prototype.setStyle=function(x,P){return!1!==(P=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},P)).diff&&P.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,P),this):(this._localIdeographFontFamily=P.localIdeographFontFamily,this._updateStyle(x,P))},g.prototype._getUIString=function(x){var P=this._locale[x];if(null==P)throw new Error("Missing UI string '"+x+"'");return P},g.prototype._updateStyle=function(x,P){return this.style&&(this.style.setEventedParent(null),this.style._remove()),x?(this.style=new Zo(this,P||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof x?this.style.loadURL(x):this.style.loadJSON(x),this):(delete this.style,this)},g.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},g.prototype._diffStyle=function(x,P){var B=this;if("string"==typeof x){var V=this._requestManager.normalizeStyleURL(x),ee=this._requestManager.transformRequest(V,u.ResourceType.Style);u.getJSON(ee,function(Ce,Re){Ce?B.fire(new u.ErrorEvent(Ce)):Re&&B._updateDiff(Re,P)})}else"object"==typeof x&&this._updateDiff(x,P)},g.prototype._updateDiff=function(x,P){try{this.style.setState(x)&&this._update(!0)}catch(B){u.warnOnce("Unable to perform style diff: "+(B.message||B.error||B)+".  Rebuilding the style from scratch."),this._updateStyle(x,P)}},g.prototype.getStyle=function(){if(this.style)return this.style.serialize()},g.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")},g.prototype.addSource=function(x,P){return this._lazyInitEmptyStyle(),this.style.addSource(x,P),this._update(!0)},g.prototype.isSourceLoaded=function(x){var P=this.style&&this.style.sourceCaches[x];if(void 0!==P)return P.loaded();this.fire(new u.ErrorEvent(new Error("There is no source with ID '"+x+"'")))},g.prototype.areTilesLoaded=function(){var x=this.style&&this.style.sourceCaches;for(var P in x){var B=x[P]._tiles;for(var V in B){var ee=B[V];if("loaded"!==ee.state&&"errored"!==ee.state)return!1}}return!0},g.prototype.addSourceType=function(x,P,B){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,P,B)},g.prototype.removeSource=function(x){return this.style.removeSource(x),this._update(!0)},g.prototype.getSource=function(x){return this.style.getSource(x)},g.prototype.addImage=function(x,P,B){void 0===B&&(B={});var V=B.pixelRatio;void 0===V&&(V=1);var ee=B.sdf;void 0===ee&&(ee=!1);var Ce=B.stretchX,Re=B.stretchY,I=B.content;if(this._lazyInitEmptyStyle(),P instanceof xl||zr&&P instanceof zr){var R=u.browser.getImageData(P);this.style.addImage(x,{data:new u.RGBAImage({width:R.width,height:R.height},R.data),pixelRatio:V,stretchX:Ce,stretchY:Re,content:I,sdf:ee,version:0})}else{if(void 0===P.width||void 0===P.height)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var S=P;this.style.addImage(x,{data:new u.RGBAImage({width:P.width,height:P.height},new Uint8Array(P.data)),pixelRatio:V,stretchX:Ce,stretchY:Re,content:I,sdf:ee,version:0,userImage:S}),S.onAdd&&S.onAdd(this,x)}},g.prototype.updateImage=function(x,P){var B=this.style.getImage(x);if(!B)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var V=P instanceof xl||zr&&P instanceof zr?u.browser.getImageData(P):P,ee=V.width,Ce=V.height,Re=V.data;return void 0===ee||void 0===Ce?this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ee!==B.data.width||Ce!==B.data.height?this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(B.data.replace(Re,!(P instanceof xl||zr&&P instanceof zr)),void this.style.updateImage(x,B))},g.prototype.hasImage=function(x){return x?!!this.style.getImage(x):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)},g.prototype.removeImage=function(x){this.style.removeImage(x)},g.prototype.loadImage=function(x,P){u.getImage(this._requestManager.transformRequest(x,u.ResourceType.Image),P)},g.prototype.listImages=function(){return this.style.listImages()},g.prototype.addLayer=function(x,P){return this._lazyInitEmptyStyle(),this.style.addLayer(x,P),this._update(!0)},g.prototype.moveLayer=function(x,P){return this.style.moveLayer(x,P),this._update(!0)},g.prototype.removeLayer=function(x){return this.style.removeLayer(x),this._update(!0)},g.prototype.getLayer=function(x){return this.style.getLayer(x)},g.prototype.setLayerZoomRange=function(x,P,B){return this.style.setLayerZoomRange(x,P,B),this._update(!0)},g.prototype.setFilter=function(x,P,B){return void 0===B&&(B={}),this.style.setFilter(x,P,B),this._update(!0)},g.prototype.getFilter=function(x){return this.style.getFilter(x)},g.prototype.setPaintProperty=function(x,P,B,V){return void 0===V&&(V={}),this.style.setPaintProperty(x,P,B,V),this._update(!0)},g.prototype.getPaintProperty=function(x,P){return this.style.getPaintProperty(x,P)},g.prototype.setLayoutProperty=function(x,P,B,V){return void 0===V&&(V={}),this.style.setLayoutProperty(x,P,B,V),this._update(!0)},g.prototype.getLayoutProperty=function(x,P){return this.style.getLayoutProperty(x,P)},g.prototype.setLight=function(x,P){return void 0===P&&(P={}),this._lazyInitEmptyStyle(),this.style.setLight(x,P),this._update(!0)},g.prototype.getLight=function(){return this.style.getLight()},g.prototype.setFeatureState=function(x,P){return this.style.setFeatureState(x,P),this._update()},g.prototype.removeFeatureState=function(x,P){return this.style.removeFeatureState(x,P),this._update()},g.prototype.getFeatureState=function(x){return this.style.getFeatureState(x)},g.prototype.getContainer=function(){return this._container},g.prototype.getCanvasContainer=function(){return this._canvasContainer},g.prototype.getCanvas=function(){return this._canvas},g.prototype._containerDimensions=function(){var x=0,P=0;return this._container&&(x=this._container.clientWidth||400,P=this._container.clientHeight||300),[x,P]},g.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==u.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&u.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},g.prototype._setupContainer=function(){var x=this._container;x.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y.create("div","mapboxgl-canary",x)).style.visibility="hidden",this._detectMissingCSS();var P=this._canvasContainer=Y.create("div","mapboxgl-canvas-container",x);this._interactive&&P.classList.add("mapboxgl-interactive"),this._canvas=Y.create("canvas","mapboxgl-canvas",P),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var B=this._containerDimensions();this._resizeCanvas(B[0],B[1]);var V=this._controlContainer=Y.create("div","mapboxgl-control-container",x),ee=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ce){ee[Ce]=Y.create("div","mapboxgl-ctrl-"+Ce,V)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},g.prototype._resizeCanvas=function(x,P){var B=u.browser.devicePixelRatio||1;this._canvas.width=B*x,this._canvas.height=B*P,this._canvas.style.width=x+"px",this._canvas.style.height=P+"px"},g.prototype._setupPainter=function(){var x=u.extend({},fe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),P=this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);P?(this.painter=new dr(P,this.transform),u.webpSupported.testSupport(P)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))},g.prototype._contextLost=function(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:x}))},g.prototype._contextRestored=function(x){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:x}))},g.prototype._onMapScroll=function(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},g.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},g.prototype._update=function(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this},g.prototype._requestRenderFrame=function(x){return this._update(),this._renderTaskQueue.add(x)},g.prototype._cancelRenderFrame=function(x){this._renderTaskQueue.remove(x)},g.prototype._render=function(x){var P,B=this,V=0,ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(P=ee.createQueryEXT(),ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,P),V=u.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),!this._removed){var Ce=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Re=this.transform.zoom,I=u.browser.now();this.style.zoomHistory.update(Re,I);var R=new u.EvaluationParameters(Re,{now:I,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),S=R.crossFadingFactor();1===S&&S===this._crossFadingFactor||(Ce=!0,this._crossFadingFactor=S),this.style.update(R)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||Ce)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var U=u.browser.now()-V;ee.endQueryEXT(ee.TIME_ELAPSED_EXT,P),setTimeout(function(){var oe=ee.getQueryObjectEXT(P,ee.QUERY_RESULT_EXT)/1e6;ee.deleteQueryEXT(P),B.fire(new u.Event("gpu-timing-frame",{cpuTime:U,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){var $=this.painter.collectGpuTimers();setTimeout(function(){var oe=B.painter.queryGpuTimers($);B.fire(new u.Event("gpu-timing-layer",{layerTimes:oe}))},50)}var ue=this._sourcesDirty||this._styleDirty||this._placementDirty;return ue||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||ue||(this._fullyLoaded=!0),this}},g.prototype.remove=function(){this._hash&&this._hash.remove();for(var x=0,P=this._controls;x<P.length;x+=1)P[x].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==u.window&&(u.window.removeEventListener("resize",this._onWindowResize,!1),u.window.removeEventListener("orientationchange",this._onWindowResize,!1),u.window.removeEventListener("online",this._onWindowOnline,!1));var B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),J(this._canvasContainer),J(this._controlContainer),J(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new u.Event("remove"))},g.prototype.triggerRepaint=function(){var x=this;this.style&&!this._frame&&(this._frame=u.browser.frame(function(P){x._frame=null,x._render(P)}))},g.prototype._onWindowOnline=function(){this._update()},g.prototype._onWindowResize=function(x){this._trackResize&&this.resize({originalEvent:x})._update()},f.showTileBoundaries.get=function(){return!!this._showTileBoundaries},f.showTileBoundaries.set=function(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())},f.showPadding.get=function(){return!!this._showPadding},f.showPadding.set=function(x){this._showPadding!==x&&(this._showPadding=x,this._update())},f.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},f.showCollisionBoxes.set=function(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())},f.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},f.showOverdrawInspector.set=function(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())},f.repaint.get=function(){return!!this._repaint},f.repaint.set=function(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())},f.vertices.get=function(){return!!this._vertices},f.vertices.set=function(x){this._vertices=x,this._update()},g.prototype._setCacheLimits=function(x,P){u.setCacheLimits(x,P)},f.version.get=function(){return u.version},Object.defineProperties(g.prototype,f),g}(jl);function J(p){p.parentNode&&p.parentNode.removeChild(p)}var He={showCompass:!0,showZoom:!0,visualizePitch:!1},zt=function(p){var g=this;this.options=u.extend({},He,p),this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(f){return f.preventDefault()}),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(f){return g._map.zoomIn({},{originalEvent:f})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(f){return g._map.zoomOut({},{originalEvent:f})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(f){g.options.visualizePitch?g._map.resetNorthPitch({},{originalEvent:f}):g._map.resetNorth({},{originalEvent:f})}),this._compassIcon=Y.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};zt.prototype._updateZoomButtons=function(){var p=this._map.getZoom(),g=p===this._map.getMaxZoom(),f=p===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},zt.prototype._rotateCompassArrow=function(){var p=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=p},zt.prototype.onAdd=function(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hn(this._map,this._compass,this.options.visualizePitch)),this._container},zt.prototype.onRemove=function(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},zt.prototype._createButton=function(p,g){var f=Y.create("button",p,this._container);return f.type="button",f.addEventListener("click",g),f},zt.prototype._setButtonTitle=function(p,g){var f=this._map._getUIString("NavigationControl."+g);p.title=f,p.setAttribute("aria-label",f)};var hn=function(p,g,f){void 0===f&&(f=!1),this._clickTolerance=10,this.element=g,this.mouseRotate=new er({clickTolerance:p.dragRotate._mouseRotate._clickTolerance}),this.map=p,f&&(this.mousePitch=new wo({clickTolerance:p.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Y.addEventListener(g,"mousedown",this.mousedown),Y.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(g,"touchmove",this.touchmove),Y.addEventListener(g,"touchend",this.touchend),Y.addEventListener(g,"touchcancel",this.reset)};function Ii(p,g,f){if(p=new u.LngLat(p.lng,p.lat),g){var x=new u.LngLat(p.lng-360,p.lat),P=new u.LngLat(p.lng+360,p.lat),B=f.locationPoint(p).distSqr(g);f.locationPoint(x).distSqr(g)<B?p=x:f.locationPoint(P).distSqr(g)<B&&(p=P)}for(;Math.abs(p.lng-f.center.lng)>180;){var V=f.locationPoint(p);if(V.x>=0&&V.y>=0&&V.x<=f.width&&V.y<=f.height)break;p.lng>f.center.lng?p.lng-=360:p.lng+=360}return p}hn.prototype.down=function(p,g){this.mouseRotate.mousedown(p,g),this.mousePitch&&this.mousePitch.mousedown(p,g),Y.disableDrag()},hn.prototype.move=function(p,g){var f=this.map,x=this.mouseRotate.mousemoveWindow(p,g);if(x&&x.bearingDelta&&f.setBearing(f.getBearing()+x.bearingDelta),this.mousePitch){var P=this.mousePitch.mousemoveWindow(p,g);P&&P.pitchDelta&&f.setPitch(f.getPitch()+P.pitchDelta)}},hn.prototype.off=function(){var p=this.element;Y.removeEventListener(p,"mousedown",this.mousedown),Y.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(p,"touchmove",this.touchmove),Y.removeEventListener(p,"touchend",this.touchend),Y.removeEventListener(p,"touchcancel",this.reset),this.offTemp()},hn.prototype.offTemp=function(){Y.enableDrag(),Y.removeEventListener(u.window,"mousemove",this.mousemove),Y.removeEventListener(u.window,"mouseup",this.mouseup)},hn.prototype.mousedown=function(p){this.down(u.extend({},p,{ctrlKey:!0,preventDefault:function(){return p.preventDefault()}}),Y.mousePos(this.element,p)),Y.addEventListener(u.window,"mousemove",this.mousemove),Y.addEventListener(u.window,"mouseup",this.mouseup)},hn.prototype.mousemove=function(p){this.move(p,Y.mousePos(this.element,p))},hn.prototype.mouseup=function(p){this.mouseRotate.mouseupWindow(p),this.mousePitch&&this.mousePitch.mouseupWindow(p),this.offTemp()},hn.prototype.touchstart=function(p){1!==p.targetTouches.length?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,p.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return p.preventDefault()}},this._startPos))},hn.prototype.touchmove=function(p){1!==p.targetTouches.length?this.reset():(this._lastPos=Y.touchPos(this.element,p.targetTouches)[0],this.move({preventDefault:function(){return p.preventDefault()}},this._lastPos))},hn.prototype.touchend=function(p){0===p.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},hn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Co(p,g,f){var x=p.classList;for(var P in Li)x.remove("mapboxgl-"+f+"-anchor-"+P);x.add("mapboxgl-"+f+"-anchor-"+g)}var gs,iu=function(p){function g(f,x){if(p.call(this),(f instanceof u.window.HTMLElement||x)&&(f=u.extend({element:f},x)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&"auto"!==f.pitchAlignment?f.pitchAlignment:this._rotationAlignment,f&&f.element)this._element=f.element,this._offset=u.Point.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div"),this._element.setAttribute("aria-label","Map marker");var P=Y.createNS("http://www.w3.org/2000/svg","svg");P.setAttributeNS(null,"display","block"),P.setAttributeNS(null,"height","41px"),P.setAttributeNS(null,"width","27px"),P.setAttributeNS(null,"viewBox","0 0 27 41");var B=Y.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");var V=Y.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill-rule","nonzero");var ee=Y.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ee.setAttributeNS(null,"fill","#000000");for(var Ce=0,Re=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ce<Re.length;Ce+=1){var I=Re[Ce],R=Y.createNS("http://www.w3.org/2000/svg","ellipse");R.setAttributeNS(null,"opacity","0.04"),R.setAttributeNS(null,"cx","10.5"),R.setAttributeNS(null,"cy","5.80029008"),R.setAttributeNS(null,"rx",I.rx),R.setAttributeNS(null,"ry",I.ry),ee.appendChild(R)}var S=Y.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill",this._color);var U=Y.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),S.appendChild(U);var $=Y.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");var ue=Y.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(ue);var oe=Y.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");var Ne=Y.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");var st=Y.createNS("http://www.w3.org/2000/svg","circle");st.setAttributeNS(null,"fill","#000000"),st.setAttributeNS(null,"opacity","0.25"),st.setAttributeNS(null,"cx","5.5"),st.setAttributeNS(null,"cy","5.5"),st.setAttributeNS(null,"r","5.4999962");var Mt=Y.createNS("http://www.w3.org/2000/svg","circle");Mt.setAttributeNS(null,"fill","#FFFFFF"),Mt.setAttributeNS(null,"cx","5.5"),Mt.setAttributeNS(null,"cy","5.5"),Mt.setAttributeNS(null,"r","5.4999962"),Ne.appendChild(st),Ne.appendChild(Mt),V.appendChild(ee),V.appendChild(S),V.appendChild($),V.appendChild(oe),V.appendChild(Ne),P.appendChild(V),P.setAttributeNS(null,"height",41*this._scale+"px"),P.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(P),this._offset=u.Point.convert(f&&f.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Lt){Lt.preventDefault()}),this._element.addEventListener("mousedown",function(Lt){Lt.preventDefault()}),Co(this._element,this._anchor,"marker"),this._popup=null}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.addTo=function(f){return this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._update),f.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},g.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(f){return this._lngLat=u.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},g.prototype.getElement=function(){return this._element},g.prototype.setPopup=function(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){var x=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(24.6+x)],"bottom-right":[-x,-1*(24.6+x)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=f,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},g.prototype._onKeyPress=function(f){var x=f.code,P=f.charCode||f.keyCode;"Space"!==x&&"Enter"!==x&&32!==P&&13!==P||this.togglePopup()},g.prototype._onMapClick=function(f){var x=f.originalEvent.target,P=this._element;this._popup&&(x===P||P.contains(x))&&this.togglePopup()},g.prototype.getPopup=function(){return this._popup},g.prototype.togglePopup=function(){var f=this._popup;return f?(f.isOpen()?f.remove():f.addTo(this._map),this):this},g.prototype._update=function(f){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var x="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?x="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(x="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var P="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?P="rotateX(0deg)":"map"===this._pitchAlignment&&(P="rotateX("+this._map.getPitch()+"deg)"),f&&"moveend"!==f.type||(this._pos=this._pos.round()),Y.setTransform(this._element,Li[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+P+" "+x)}},g.prototype.getOffset=function(){return this._offset},g.prototype.setOffset=function(f){return this._offset=u.Point.convert(f),this._update(),this},g.prototype._onMove=function(f){if(!this._isDragging){var x=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))},g.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new u.Event("dragend")),this._state="inactive"},g.prototype._addDragHandler=function(f){this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},g.prototype.setDraggable=function(f){return this._draggable=!!f,this._map&&(f?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},g.prototype.isDraggable=function(){return this._draggable},g.prototype.setRotation=function(f){return this._rotation=f||0,this._update(),this},g.prototype.getRotation=function(){return this._rotation},g.prototype.setRotationAlignment=function(f){return this._rotationAlignment=f||"auto",this._update(),this},g.prototype.getRotationAlignment=function(){return this._rotationAlignment},g.prototype.setPitchAlignment=function(f){return this._pitchAlignment=f&&"auto"!==f?f:this._rotationAlignment,this._update(),this},g.prototype.getPitchAlignment=function(){return this._pitchAlignment},g}(u.Evented),Hu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Gu=0,Zu=!1,Ec=function(p){function g(f){p.call(this),this.options=u.extend({},Hu,f),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.onAdd=function(f){var x;return this._map=f,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),x=this._setupUI,void 0!==gs?x(gs):void 0!==u.window.navigator.permissions?u.window.navigator.permissions.query({name:"geolocation"}).then(function(P){x(gs="denied"!==P.state)}):x(gs=!!u.window.navigator.geolocation),this._container},g.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gu=0,Zu=!1},g.prototype._isOutOfMapMaxBounds=function(f){var x=this._map.getMaxBounds(),P=f.coords;return x&&(P.longitude<x.getWest()||P.longitude>x.getEast()||P.latitude<x.getSouth()||P.latitude>x.getNorth())},g.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},g.prototype._onSuccess=function(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",f)),this._finish()}},g.prototype._updateCamera=function(f){var x=new u.LngLat(f.coords.longitude,f.coords.latitude),P=f.coords.accuracy,B=this._map.getBearing(),V=u.extend({bearing:B},this.options.fitBoundsOptions);this._map.fitBounds(x.toBounds(P),V,{geolocateSource:!0})},g.prototype._updateMarker=function(f){if(f){var x=new u.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(x).addTo(this._map),this._userLocationDotMarker.setLngLat(x).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},g.prototype._updateCircleRadius=function(){var f=this._map._container.clientHeight/2,x=this._map.unproject([0,f]),P=this._map.unproject([1,f]),B=x.distanceTo(P),V=Math.ceil(2*this._accuracy/B);this._circleElement.style.width=V+"px",this._circleElement.style.height=V+"px"},g.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},g.prototype._onError=function(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var x=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=x,this._geolocateButton.setAttribute("aria-label",x),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&Zu)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",f)),this._finish()}},g.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},g.prototype._setupUI=function(f){var x=this;if(this._container.addEventListener("contextmenu",function(V){return V.preventDefault()}),this._geolocateButton=Y.create("button","mapboxgl-ctrl-geolocate",this._container),Y.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===f){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var P=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}else{var B=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new iu(this._dotElement),this._circleElement=Y.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new iu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(V){V.geolocateSource||"ACTIVE_LOCK"!==x._watchState||V.originalEvent&&"resize"===V.originalEvent.type||(x._watchState="BACKGROUND",x._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),x._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),x.fire(new u.Event("trackuserlocationend")))})},g.prototype.trigger=function(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gu--,Zu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Gu>1?(f={maximumAge:6e5,timeout:0},Zu=!0):(f=this.options.positionOptions,Zu=!1),this._geolocationWatchID=u.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else u.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},g.prototype._clearWatch=function(){u.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},g}(u.Evented),Xs={maxWidth:100,unit:"metric"},za=function(p){this.options=u.extend({},Xs,p),u.bindAll(["_onMove","setUnit"],this)};function ru(p,g,f){var x=f&&f.maxWidth||100,P=p._container.clientHeight/2,B=p.unproject([0,P]),V=p.unproject([x,P]),ee=B.distanceTo(V);if(f&&"imperial"===f.unit){var Ce=3.2808*ee;Ce>5280?ho(g,x,Ce/5280,p._getUIString("ScaleControl.Miles")):ho(g,x,Ce,p._getUIString("ScaleControl.Feet"))}else f&&"nautical"===f.unit?ho(g,x,ee/1852,p._getUIString("ScaleControl.NauticalMiles")):ee>=1e3?ho(g,x,ee/1e3,p._getUIString("ScaleControl.Kilometers")):ho(g,x,ee,p._getUIString("ScaleControl.Meters"))}function ho(p,g,f,x){var P,B,V,Ce,Re,ee=(P=f,(B=Math.pow(10,(""+Math.floor(P)).length-1))*(V=(V=P/B)>=10?10:V>=5?5:V>=3?3:V>=2?2:V>=1?1:(Ce=V,Re=Math.pow(10,Math.ceil(-Math.log(Ce)/Math.LN10)),Math.round(Ce*Re)/Re)));p.style.width=g*(ee/f)+"px",p.innerHTML=ee+"&nbsp;"+x}za.prototype.getDefaultPosition=function(){return"bottom-left"},za.prototype._onMove=function(){ru(this._map,this._container,this.options)},za.prototype.onAdd=function(p){return this._map=p,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},za.prototype.onRemove=function(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},za.prototype.setUnit=function(p){this.options.unit=p,ru(this._map,this._container,this.options)};var Ds=function(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof u.window.HTMLElement?this._container=p.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in u.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in u.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in u.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in u.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ds.prototype.onAdd=function(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ds.prototype.onRemove=function(){Y.remove(this._controlContainer),this._map=null,u.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ds.prototype._checkFullscreenSupport=function(){return!!(u.window.document.fullscreenEnabled||u.window.document.mozFullScreenEnabled||u.window.document.msFullscreenEnabled||u.window.document.webkitFullscreenEnabled)},Ds.prototype._setupUI=function(){var p=this._fullscreenButton=Y.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y.create("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden",!0),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),u.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ds.prototype._updateTitle=function(){var p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p},Ds.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ds.prototype._isFullscreen=function(){return this._fullscreen},Ds.prototype._changeIcon=function(){(u.window.document.fullscreenElement||u.window.document.mozFullScreenElement||u.window.document.webkitFullscreenElement||u.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ds.prototype._onClickFullscreen=function(){this._isFullscreen()?u.window.document.exitFullscreen?u.window.document.exitFullscreen():u.window.document.mozCancelFullScreen?u.window.document.mozCancelFullScreen():u.window.document.msExitFullscreen?u.window.document.msExitFullscreen():u.window.document.webkitCancelFullScreen&&u.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var wl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_d=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ac=function(p){function g(f){p.call(this),this.options=u.extend(Object.create(wl),f),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return p&&(g.__proto__=p),(g.prototype=Object.create(p&&p.prototype)).constructor=g,g.prototype.addTo=function(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this},g.prototype.isOpen=function(){return!!this._map},g.prototype.remove=function(){return this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this},g.prototype.getLngLat=function(){return this._lngLat},g.prototype.setLngLat=function(f){return this._lngLat=u.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},g.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},g.prototype.getElement=function(){return this._container},g.prototype.setText=function(f){return this.setDOMContent(u.window.document.createTextNode(f))},g.prototype.setHTML=function(f){var x,P=u.window.document.createDocumentFragment(),B=u.window.document.createElement("body");for(B.innerHTML=f;x=B.firstChild;)P.appendChild(x);return this.setDOMContent(P)},g.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},g.prototype.setMaxWidth=function(f){return this.options.maxWidth=f,this._update(),this},g.prototype.setDOMContent=function(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this},g.prototype.addClassName=function(f){this._container&&this._container.classList.add(f)},g.prototype.removeClassName=function(f){this._container&&this._container.classList.remove(f)},g.prototype.setOffset=function(f){return this.options.offset=f,this._update(),this},g.prototype.toggleClassName=function(f){if(this._container)return this._container.classList.toggle(f)},g.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Y.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},g.prototype._onMouseUp=function(f){this._update(f.point)},g.prototype._onMouseMove=function(f){this._update(f.point)},g.prototype._onDrag=function(f){this._update(f.point)},g.prototype._update=function(f){var x=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Y.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Y.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(R){return x._container.classList.add(R)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||f)){var P=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat),B=this.options.anchor,V=function R(S){if(S){if("number"==typeof S){var U=Math.round(Math.sqrt(.5*Math.pow(S,2)));return{center:new u.Point(0,0),top:new u.Point(0,S),"top-left":new u.Point(U,U),"top-right":new u.Point(-U,U),bottom:new u.Point(0,-S),"bottom-left":new u.Point(U,-U),"bottom-right":new u.Point(-U,-U),left:new u.Point(S,0),right:new u.Point(-S,0)}}if(S instanceof u.Point||Array.isArray(S)){var $=u.Point.convert(S);return{center:$,top:$,"top-left":$,"top-right":$,bottom:$,"bottom-left":$,"bottom-right":$,left:$,right:$}}return{center:u.Point.convert(S.center||[0,0]),top:u.Point.convert(S.top||[0,0]),"top-left":u.Point.convert(S["top-left"]||[0,0]),"top-right":u.Point.convert(S["top-right"]||[0,0]),bottom:u.Point.convert(S.bottom||[0,0]),"bottom-left":u.Point.convert(S["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(S["bottom-right"]||[0,0]),left:u.Point.convert(S.left||[0,0]),right:u.Point.convert(S.right||[0,0])}}return R(new u.Point(0,0))}(this.options.offset);if(!B){var ee,Ce=this._container.offsetWidth,Re=this._container.offsetHeight;ee=P.y+V.bottom.y<Re?["top"]:P.y>this._map.transform.height-Re?["bottom"]:[],P.x<Ce/2?ee.push("left"):P.x>this._map.transform.width-Ce/2&&ee.push("right"),B=0===ee.length?"bottom":ee.join("-")}var I=P.add(V[B]).round();Y.setTransform(this._container,Li[B]+" translate("+I.x+"px,"+I.y+"px)"),Co(this._container,B,"popup")}},g.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var f=this._container.querySelector(_d);f&&f.focus()}},g.prototype._onClose=function(){this.remove()},g}(u.Evented),Kr={version:u.version,supported:fe,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:me,NavigationControl:zt,GeolocateControl:Ec,AttributionControl:ss,ScaleControl:za,FullscreenControl:Ds,Popup:ac,Marker:iu,Style:Zo,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,config:u.config,prewarm:function(){mt().acquire(et)},clearPrewarmedResources:function(){var p=Ye;p&&(p.isPreloaded()&&1===p.numActive()?(p.release(et),Ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return u.config.ACCESS_TOKEN},set accessToken(p){u.config.ACCESS_TOKEN=p},get baseApiUrl(){return u.config.API_URL},set baseApiUrl(p){u.config.API_URL=p},get workerCount(){return tt.workerCount},set workerCount(p){tt.workerCount=p},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){u.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage:function(p){u.clearTileCache(p)},workerUrl:""};return Kr}),o}()},1135:(tn,nt,N)=>{"use strict";N.d(nt,{X:()=>O});var o=N(7579);class O extends o.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const Y=super._subscribe(fe);return!Y.closed&&fe.next(this._value),Y}getValue(){const{hasError:fe,thrownError:Y,_value:i}=this;if(fe)throw Y;return this._throwIfClosed(),i}next(fe){super.next(this._value=fe)}}},9751:(tn,nt,N)=>{"use strict";N.d(nt,{y:()=>de});var o=N(930),O=N(727),u=N(8822),fe=N(9635),Y=N(2416),i=N(576),q=N(2806);let de=(()=>{class it{constructor(je){je&&(this._subscribe=je)}lift(je){const Be=new it;return Be.source=this,Be.operator=je,Be}subscribe(je,Be,Je){const gt=function De(it){return it&&it instanceof o.Lv||function Ve(it){return it&&(0,i.m)(it.next)&&(0,i.m)(it.error)&&(0,i.m)(it.complete)}(it)&&(0,O.Nn)(it)}(je)?je:new o.Hp(je,Be,Je);return(0,q.x)(()=>{const{operator:lt,source:wt}=this;gt.add(lt?lt.call(gt,wt):wt?this._subscribe(gt):this._trySubscribe(gt))}),gt}_trySubscribe(je){try{return this._subscribe(je)}catch(Be){je.error(Be)}}forEach(je,Be){return new(Be=we(Be))((Je,gt)=>{const lt=new o.Hp({next:wt=>{try{je(wt)}catch(dt){gt(dt),lt.unsubscribe()}},error:gt,complete:Je});this.subscribe(lt)})}_subscribe(je){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(je)}[u.L](){return this}pipe(...je){return(0,fe.U)(je)(this)}toPromise(je){return new(je=we(je))((Be,Je)=>{let gt;this.subscribe(lt=>gt=lt,lt=>Je(lt),()=>Be(gt))})}}return it.create=Ke=>new it(Ke),it})();function we(it){var Ke;return null!==(Ke=it??Y.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>q});var o=N(9751),O=N(727);const fe=(0,N(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Y=N(8737),i=N(2806);let q=(()=>{class we extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(De){const it=new de(this,this);return it.operator=De,it}_throwIfClosed(){if(this.closed)throw new fe}next(De){(0,i.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const it of this.currentObservers)it.next(De)}})}error(De){(0,i.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=De;const{observers:it}=this;for(;it.length;)it.shift().error(De)}})}complete(){(0,i.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:De}=this;for(;De.length;)De.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var De;return(null===(De=this.observers)||void 0===De?void 0:De.length)>0}_trySubscribe(De){return this._throwIfClosed(),super._trySubscribe(De)}_subscribe(De){return this._throwIfClosed(),this._checkFinalizedStatuses(De),this._innerSubscribe(De)}_innerSubscribe(De){const{hasError:it,isStopped:Ke,observers:je}=this;return it||Ke?O.Lc:(this.currentObservers=null,je.push(De),new O.w0(()=>{this.currentObservers=null,(0,Y.P)(je,De)}))}_checkFinalizedStatuses(De){const{hasError:it,thrownError:Ke,isStopped:je}=this;it?De.error(Ke):je&&De.complete()}asObservable(){const De=new o.y;return De.source=this,De}}return we.create=(Ve,De)=>new de(Ve,De),we})();class de extends q{constructor(Ve,De){super(),this.destination=Ve,this.source=De}next(Ve){var De,it;null===(it=null===(De=this.destination)||void 0===De?void 0:De.next)||void 0===it||it.call(De,Ve)}error(Ve){var De,it;null===(it=null===(De=this.destination)||void 0===De?void 0:De.error)||void 0===it||it.call(De,Ve)}complete(){var Ve,De;null===(De=null===(Ve=this.destination)||void 0===Ve?void 0:Ve.complete)||void 0===De||De.call(Ve)}_subscribe(Ve){var De,it;return null!==(it=null===(De=this.source)||void 0===De?void 0:De.subscribe(Ve))&&void 0!==it?it:O.Lc}}},930:(tn,nt,N)=>{"use strict";N.d(nt,{Hp:()=>Je,Lv:()=>it});var o=N(576),O=N(727),u=N(2416),fe=N(7849),Y=N(5032);const i=we("C",void 0,void 0);function we(ct,at,Qe){return{kind:ct,value:at,error:Qe}}var Ve=N(3410),De=N(2806);class it extends O.w0{constructor(at){super(),this.isStopped=!1,at?(this.destination=at,(0,O.Nn)(at)&&at.add(this)):this.destination=dt}static create(at,Qe,ht){return new Je(at,Qe,ht)}next(at){this.isStopped?wt(function de(ct){return we("N",ct,void 0)}(at),this):this._next(at)}error(at){this.isStopped?wt(function q(ct){return we("E",void 0,ct)}(at),this):(this.isStopped=!0,this._error(at))}complete(){this.isStopped?wt(i,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(at){this.destination.next(at)}_error(at){try{this.destination.error(at)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function je(ct,at){return Ke.call(ct,at)}class Be{constructor(at){this.partialObserver=at}next(at){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(at)}catch(ht){gt(ht)}}error(at){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(at)}catch(ht){gt(ht)}else gt(at)}complete(){const{partialObserver:at}=this;if(at.complete)try{at.complete()}catch(Qe){gt(Qe)}}}class Je extends it{constructor(at,Qe,ht){let Bt;if(super(),(0,o.m)(at)||!at)Bt={next:at??void 0,error:Qe??void 0,complete:ht??void 0};else{let Ft;this&&u.v.useDeprecatedNextContext?(Ft=Object.create(at),Ft.unsubscribe=()=>this.unsubscribe(),Bt={next:at.next&&je(at.next,Ft),error:at.error&&je(at.error,Ft),complete:at.complete&&je(at.complete,Ft)}):Bt=at}this.destination=new Be(Bt)}}function gt(ct){u.v.useDeprecatedSynchronousErrorHandling?(0,De.O)(ct):(0,fe.h)(ct)}function wt(ct,at){const{onStoppedNotification:Qe}=u.v;Qe&&Ve.z.setTimeout(()=>Qe(ct,at))}const dt={closed:!0,next:Y.Z,error:function lt(ct){throw ct},complete:Y.Z}},727:(tn,nt,N)=>{"use strict";N.d(nt,{Lc:()=>i,w0:()=>Y,Nn:()=>q});var o=N(576);const u=(0,N(3888).d)(we=>function(De){we(this),this.message=De?`${De.length} errors occurred during unsubscription:\n${De.map((it,Ke)=>`${Ke+1}) ${it.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=De});var fe=N(8737);class Y{constructor(Ve){this.initialTeardown=Ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ve;if(!this.closed){this.closed=!0;const{_parentage:De}=this;if(De)if(this._parentage=null,Array.isArray(De))for(const je of De)je.remove(this);else De.remove(this);const{initialTeardown:it}=this;if((0,o.m)(it))try{it()}catch(je){Ve=je instanceof u?je.errors:[je]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const je of Ke)try{de(je)}catch(Be){Ve=Ve??[],Be instanceof u?Ve=[...Ve,...Be.errors]:Ve.push(Be)}}if(Ve)throw new u(Ve)}}add(Ve){var De;if(Ve&&Ve!==this)if(this.closed)de(Ve);else{if(Ve instanceof Y){if(Ve.closed||Ve._hasParent(this))return;Ve._addParent(this)}(this._finalizers=null!==(De=this._finalizers)&&void 0!==De?De:[]).push(Ve)}}_hasParent(Ve){const{_parentage:De}=this;return De===Ve||Array.isArray(De)&&De.includes(Ve)}_addParent(Ve){const{_parentage:De}=this;this._parentage=Array.isArray(De)?(De.push(Ve),De):De?[De,Ve]:Ve}_removeParent(Ve){const{_parentage:De}=this;De===Ve?this._parentage=null:Array.isArray(De)&&(0,fe.P)(De,Ve)}remove(Ve){const{_finalizers:De}=this;De&&(0,fe.P)(De,Ve),Ve instanceof Y&&Ve._removeParent(this)}}Y.EMPTY=(()=>{const we=new Y;return we.closed=!0,we})();const i=Y.EMPTY;function q(we){return we instanceof Y||we&&"closed"in we&&(0,o.m)(we.remove)&&(0,o.m)(we.add)&&(0,o.m)(we.unsubscribe)}function de(we){(0,o.m)(we)?we():we.unsubscribe()}},2416:(tn,nt,N)=>{"use strict";N.d(nt,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9808:(tn,nt,N)=>{"use strict";N.d(nt,{n:()=>O});var o=N(6805);function O(u,fe){const Y="object"==typeof fe;return new Promise((i,q)=>{let we,de=!1;u.subscribe({next:Ve=>{we=Ve,de=!0},error:q,complete:()=>{de?i(we):Y?i(fe.defaultValue):q(new o.K)}})})}},4033:(tn,nt,N)=>{"use strict";N.d(nt,{c:()=>i});var o=N(9751),O=N(727),u=N(8343),fe=N(5403),Y=N(4482);class i extends o.y{constructor(de,we){super(),this.source=de,this.subjectFactory=we,this._subject=null,this._refCount=0,this._connection=null,(0,Y.A)(de)&&(this.lift=de.lift)}_subscribe(de){return this.getSubject().subscribe(de)}getSubject(){const de=this._subject;return(!de||de.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:de}=this;this._subject=this._connection=null,de?.unsubscribe()}connect(){let de=this._connection;if(!de){de=this._connection=new O.w0;const we=this.getSubject();de.add(this.source.subscribe((0,fe.x)(we,void 0,()=>{this._teardown(),we.complete()},Ve=>{this._teardown(),we.error(Ve)},()=>this._teardown()))),de.closed&&(this._connection=null,de=O.w0.EMPTY)}return de}refCount(){return(0,u.x)()(this)}}},9841:(tn,nt,N)=>{"use strict";N.d(nt,{a:()=>Ve});var o=N(9751),O=N(4742),u=N(2076),fe=N(4671),Y=N(3268),i=N(3269),q=N(1810),de=N(5403),we=N(9672);function Ve(...Ke){const je=(0,i.yG)(Ke),Be=(0,i.jO)(Ke),{args:Je,keys:gt}=(0,O.D)(Ke);if(0===Je.length)return(0,u.D)([],je);const lt=new o.y(function De(Ke,je,Be=fe.y){return Je=>{it(je,()=>{const{length:gt}=Ke,lt=new Array(gt);let wt=gt,dt=gt;for(let ct=0;ct<gt;ct++)it(je,()=>{const at=(0,u.D)(Ke[ct],je);let Qe=!1;at.subscribe((0,de.x)(Je,ht=>{lt[ct]=ht,Qe||(Qe=!0,dt--),dt||Je.next(Be(lt.slice()))},()=>{--wt||Je.complete()}))},Je)},Je)}}(Je,je,gt?wt=>(0,q.n)(gt,wt):fe.y));return Be?lt.pipe((0,Y.Z)(Be)):lt}function it(Ke,je,Be){Ke?(0,we.f)(Be,Ke,je):je()}},7272:(tn,nt,N)=>{"use strict";N.d(nt,{z:()=>Y});var o=N(8189),u=N(3269),fe=N(2076);function Y(...i){return function O(){return(0,o.J)(1)}()((0,fe.D)(i,(0,u.yG)(i)))}},9770:(tn,nt,N)=>{"use strict";N.d(nt,{P:()=>u});var o=N(9751),O=N(8421);function u(fe){return new o.y(Y=>{(0,O.Xf)(fe()).subscribe(Y)})}},515:(tn,nt,N)=>{"use strict";N.d(nt,{E:()=>O});const O=new(N(9751).y)(Y=>Y.complete())},4128:(tn,nt,N)=>{"use strict";N.d(nt,{D:()=>de});var o=N(9751),O=N(4742),u=N(8421),fe=N(3269),Y=N(5403),i=N(3268),q=N(1810);function de(...we){const Ve=(0,fe.jO)(we),{args:De,keys:it}=(0,O.D)(we),Ke=new o.y(je=>{const{length:Be}=De;if(!Be)return void je.complete();const Je=new Array(Be);let gt=Be,lt=Be;for(let wt=0;wt<Be;wt++){let dt=!1;(0,u.Xf)(De[wt]).subscribe((0,Y.x)(je,ct=>{dt||(dt=!0,lt--),Je[wt]=ct},()=>gt--,void 0,()=>{(!gt||!dt)&&(lt||je.next(it?(0,q.n)(it,Je):Je),je.complete())}))}});return Ve?Ke.pipe((0,i.Z)(Ve)):Ke}},2076:(tn,nt,N)=>{"use strict";N.d(nt,{D:()=>ht});var o=N(8421),O=N(9672),u=N(4482),fe=N(5403);function Y(Bt,Ft=0){return(0,u.e)((kt,bn)=>{kt.subscribe((0,fe.x)(bn,Kt=>(0,O.f)(bn,Bt,()=>bn.next(Kt),Ft),()=>(0,O.f)(bn,Bt,()=>bn.complete(),Ft),Kt=>(0,O.f)(bn,Bt,()=>bn.error(Kt),Ft)))})}function i(Bt,Ft=0){return(0,u.e)((kt,bn)=>{bn.add(Bt.schedule(()=>kt.subscribe(bn),Ft))})}var we=N(9751),De=N(2202),it=N(576);function je(Bt,Ft){if(!Bt)throw new Error("Iterable cannot be null");return new we.y(kt=>{(0,O.f)(kt,Ft,()=>{const bn=Bt[Symbol.asyncIterator]();(0,O.f)(kt,Ft,()=>{bn.next().then(Kt=>{Kt.done?kt.complete():kt.next(Kt.value)})},0,!0)})})}var Be=N(3670),Je=N(8239),gt=N(1144),lt=N(6495),wt=N(2206),dt=N(4532),ct=N(3260);function ht(Bt,Ft){return Ft?function Qe(Bt,Ft){if(null!=Bt){if((0,Be.c)(Bt))return function q(Bt,Ft){return(0,o.Xf)(Bt).pipe(i(Ft),Y(Ft))}(Bt,Ft);if((0,gt.z)(Bt))return function Ve(Bt,Ft){return new we.y(kt=>{let bn=0;return Ft.schedule(function(){bn===Bt.length?kt.complete():(kt.next(Bt[bn++]),kt.closed||this.schedule())})})}(Bt,Ft);if((0,Je.t)(Bt))return function de(Bt,Ft){return(0,o.Xf)(Bt).pipe(i(Ft),Y(Ft))}(Bt,Ft);if((0,wt.D)(Bt))return je(Bt,Ft);if((0,lt.T)(Bt))return function Ke(Bt,Ft){return new we.y(kt=>{let bn;return(0,O.f)(kt,Ft,()=>{bn=Bt[De.h](),(0,O.f)(kt,Ft,()=>{let Kt,Zn;try{({value:Kt,done:Zn}=bn.next())}catch(wn){return void kt.error(wn)}Zn?kt.complete():kt.next(Kt)},0,!0)}),()=>(0,it.m)(bn?.return)&&bn.return()})}(Bt,Ft);if((0,ct.L)(Bt))return function at(Bt,Ft){return je((0,ct.Q)(Bt),Ft)}(Bt,Ft)}throw(0,dt.z)(Bt)}(Bt,Ft):(0,o.Xf)(Bt)}},4968:(tn,nt,N)=>{"use strict";N.d(nt,{R:()=>Ve});var o=N(8421),O=N(9751),u=N(5577),fe=N(1144),Y=N(576),i=N(3268);const q=["addListener","removeListener"],de=["addEventListener","removeEventListener"],we=["on","off"];function Ve(Be,Je,gt,lt){if((0,Y.m)(gt)&&(lt=gt,gt=void 0),lt)return Ve(Be,Je,gt).pipe((0,i.Z)(lt));const[wt,dt]=function je(Be){return(0,Y.m)(Be.addEventListener)&&(0,Y.m)(Be.removeEventListener)}(Be)?de.map(ct=>at=>Be[ct](Je,at,gt)):function it(Be){return(0,Y.m)(Be.addListener)&&(0,Y.m)(Be.removeListener)}(Be)?q.map(De(Be,Je)):function Ke(Be){return(0,Y.m)(Be.on)&&(0,Y.m)(Be.off)}(Be)?we.map(De(Be,Je)):[];if(!wt&&(0,fe.z)(Be))return(0,u.z)(ct=>Ve(ct,Je,gt))((0,o.Xf)(Be));if(!wt)throw new TypeError("Invalid event target");return new O.y(ct=>{const at=(...Qe)=>ct.next(1<Qe.length?Qe:Qe[0]);return wt(at),()=>dt(at)})}function De(Be,Je){return gt=>lt=>Be[gt](Je,lt)}},8421:(tn,nt,N)=>{"use strict";N.d(nt,{Xf:()=>Ke});var o=N(7582),O=N(1144),u=N(8239),fe=N(9751),Y=N(3670),i=N(2206),q=N(4532),de=N(6495),we=N(3260),Ve=N(576),De=N(7849),it=N(8822);function Ke(ct){if(ct instanceof fe.y)return ct;if(null!=ct){if((0,Y.c)(ct))return function je(ct){return new fe.y(at=>{const Qe=ct[it.L]();if((0,Ve.m)(Qe.subscribe))return Qe.subscribe(at);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ct);if((0,O.z)(ct))return function Be(ct){return new fe.y(at=>{for(let Qe=0;Qe<ct.length&&!at.closed;Qe++)at.next(ct[Qe]);at.complete()})}(ct);if((0,u.t)(ct))return function Je(ct){return new fe.y(at=>{ct.then(Qe=>{at.closed||(at.next(Qe),at.complete())},Qe=>at.error(Qe)).then(null,De.h)})}(ct);if((0,i.D)(ct))return lt(ct);if((0,de.T)(ct))return function gt(ct){return new fe.y(at=>{for(const Qe of ct)if(at.next(Qe),at.closed)return;at.complete()})}(ct);if((0,we.L)(ct))return function wt(ct){return lt((0,we.Q)(ct))}(ct)}throw(0,q.z)(ct)}function lt(ct){return new fe.y(at=>{(function dt(ct,at){var Qe,ht,Bt,Ft;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,o.KL)(ct);!(ht=yield Qe.next()).done;)if(at.next(ht.value),at.closed)return}catch(kt){Bt={error:kt}}finally{try{ht&&!ht.done&&(Ft=Qe.return)&&(yield Ft.call(Qe))}finally{if(Bt)throw Bt.error}}at.complete()})})(ct,at).catch(Qe=>at.error(Qe))})}},6451:(tn,nt,N)=>{"use strict";N.d(nt,{T:()=>i});var o=N(8189),O=N(8421),u=N(515),fe=N(3269),Y=N(2076);function i(...q){const de=(0,fe.yG)(q),we=(0,fe._6)(q,1/0),Ve=q;return Ve.length?1===Ve.length?(0,O.Xf)(Ve[0]):(0,o.J)(we)((0,Y.D)(Ve,de)):u.E}},9646:(tn,nt,N)=>{"use strict";N.d(nt,{of:()=>u});var o=N(3269),O=N(2076);function u(...fe){const Y=(0,o.yG)(fe);return(0,O.D)(fe,Y)}},2843:(tn,nt,N)=>{"use strict";N.d(nt,{_:()=>u});var o=N(9751),O=N(576);function u(fe,Y){const i=(0,O.m)(fe)?fe:()=>fe,q=de=>de.error(i());return new o.y(Y?de=>Y.schedule(q,0,de):q)}},5963:(tn,nt,N)=>{"use strict";N.d(nt,{H:()=>Y});var o=N(9751),O=N(4986),u=N(3532);function Y(i=0,q,de=O.P){let we=-1;return null!=q&&((0,u.K)(q)?de=q:we=q),new o.y(Ve=>{let De=function fe(i){return i instanceof Date&&!isNaN(i)}(i)?+i-de.now():i;De<0&&(De=0);let it=0;return de.schedule(function(){Ve.closed||(Ve.next(it++),0<=we?this.schedule(void 0,we):Ve.complete())},De)})}},5403:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>O});var o=N(930);function O(fe,Y,i,q,de){return new u(fe,Y,i,q,de)}class u extends o.Lv{constructor(Y,i,q,de,we,Ve){super(Y),this.onFinalize=we,this.shouldUnsubscribe=Ve,this._next=i?function(De){try{i(De)}catch(it){Y.error(it)}}:super._next,this._error=de?function(De){try{de(De)}catch(it){Y.error(it)}finally{this.unsubscribe()}}:super._error,this._complete=q?function(){try{q()}catch(De){Y.error(De)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:i}=this;super.unsubscribe(),!i&&(null===(Y=this.onFinalize)||void 0===Y||Y.call(this))}}}},262:(tn,nt,N)=>{"use strict";N.d(nt,{K:()=>fe});var o=N(8421),O=N(5403),u=N(4482);function fe(Y){return(0,u.e)((i,q)=>{let Ve,de=null,we=!1;de=i.subscribe((0,O.x)(q,void 0,void 0,De=>{Ve=(0,o.Xf)(Y(De,fe(Y)(i))),de?(de.unsubscribe(),de=null,Ve.subscribe(q)):we=!0})),we&&(de.unsubscribe(),de=null,Ve.subscribe(q))})}},4351:(tn,nt,N)=>{"use strict";N.d(nt,{b:()=>u});var o=N(5577),O=N(576);function u(fe,Y){return(0,O.m)(Y)?(0,o.z)(fe,Y,1):(0,o.z)(fe,1)}},8372:(tn,nt,N)=>{"use strict";N.d(nt,{b:()=>fe});var o=N(4986),O=N(4482),u=N(5403);function fe(Y,i=o.z){return(0,O.e)((q,de)=>{let we=null,Ve=null,De=null;const it=()=>{if(we){we.unsubscribe(),we=null;const je=Ve;Ve=null,de.next(je)}};function Ke(){const je=De+Y,Be=i.now();if(Be<je)return we=this.schedule(void 0,je-Be),void de.add(we);it()}q.subscribe((0,u.x)(de,je=>{Ve=je,De=i.now(),we||(we=i.schedule(Ke,Y),de.add(we))},()=>{it(),de.complete()},void 0,()=>{Ve=we=null}))})}},6590:(tn,nt,N)=>{"use strict";N.d(nt,{d:()=>u});var o=N(4482),O=N(5403);function u(fe){return(0,o.e)((Y,i)=>{let q=!1;Y.subscribe((0,O.x)(i,de=>{q=!0,i.next(de)},()=>{q||i.next(fe),i.complete()}))})}},1005:(tn,nt,N)=>{"use strict";N.d(nt,{g:()=>it});var o=N(4986),O=N(7272),u=N(5698),fe=N(4482),Y=N(5403),i=N(5032),de=N(9718),we=N(5577);function Ve(Ke,je){return je?Be=>(0,O.z)(je.pipe((0,u.q)(1),function q(){return(0,fe.e)((Ke,je)=>{Ke.subscribe((0,Y.x)(je,i.Z))})}()),Be.pipe(Ve(Ke))):(0,we.z)((Be,Je)=>Ke(Be,Je).pipe((0,u.q)(1),(0,de.h)(Be)))}var De=N(5963);function it(Ke,je=o.z){const Be=(0,De.H)(Ke,je);return Ve(()=>Be)}},1884:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>fe});var o=N(4671),O=N(4482),u=N(5403);function fe(i,q=o.y){return i=i??Y,(0,O.e)((de,we)=>{let Ve,De=!0;de.subscribe((0,u.x)(we,it=>{const Ke=q(it);(De||!i(Ve,Ke))&&(De=!1,Ve=Ke,we.next(it))}))})}function Y(i,q){return i===q}},9300:(tn,nt,N)=>{"use strict";N.d(nt,{h:()=>u});var o=N(4482),O=N(5403);function u(fe,Y){return(0,o.e)((i,q)=>{let de=0;i.subscribe((0,O.x)(q,we=>fe.call(Y,we,de++)&&q.next(we)))})}},590:(tn,nt,N)=>{"use strict";N.d(nt,{P:()=>q});var o=N(6805),O=N(9300),u=N(5698),fe=N(6590),Y=N(8068),i=N(4671);function q(de,we){const Ve=arguments.length>=2;return De=>De.pipe(de?(0,O.h)((it,Ke)=>de(it,Ke,De)):i.y,(0,u.q)(1),Ve?(0,fe.d)(we):(0,Y.T)(()=>new o.K))}},4004:(tn,nt,N)=>{"use strict";N.d(nt,{U:()=>u});var o=N(4482),O=N(5403);function u(fe,Y){return(0,o.e)((i,q)=>{let de=0;i.subscribe((0,O.x)(q,we=>{q.next(fe.call(Y,we,de++))}))})}},9718:(tn,nt,N)=>{"use strict";N.d(nt,{h:()=>O});var o=N(4004);function O(u){return(0,o.U)(()=>u)}},8189:(tn,nt,N)=>{"use strict";N.d(nt,{J:()=>u});var o=N(5577),O=N(4671);function u(fe=1/0){return(0,o.z)(O.y,fe)}},5577:(tn,nt,N)=>{"use strict";N.d(nt,{z:()=>de});var o=N(4004),O=N(8421),u=N(4482),fe=N(9672),Y=N(5403),q=N(576);function de(we,Ve,De=1/0){return(0,q.m)(Ve)?de((it,Ke)=>(0,o.U)((je,Be)=>Ve(it,je,Ke,Be))((0,O.Xf)(we(it,Ke))),De):("number"==typeof Ve&&(De=Ve),(0,u.e)((it,Ke)=>function i(we,Ve,De,it,Ke,je,Be,Je){const gt=[];let lt=0,wt=0,dt=!1;const ct=()=>{dt&&!gt.length&&!lt&&Ve.complete()},at=ht=>lt<it?Qe(ht):gt.push(ht),Qe=ht=>{je&&Ve.next(ht),lt++;let Bt=!1;(0,O.Xf)(De(ht,wt++)).subscribe((0,Y.x)(Ve,Ft=>{Ke?.(Ft),je?at(Ft):Ve.next(Ft)},()=>{Bt=!0},void 0,()=>{if(Bt)try{for(lt--;gt.length&&lt<it;){const Ft=gt.shift();Be?(0,fe.f)(Ve,Be,()=>Qe(Ft)):Qe(Ft)}ct()}catch(Ft){Ve.error(Ft)}}))};return we.subscribe((0,Y.x)(Ve,at,()=>{dt=!0,ct()})),()=>{Je?.()}}(it,Ke,we,De)))}},8343:(tn,nt,N)=>{"use strict";N.d(nt,{x:()=>u});var o=N(4482),O=N(5403);function u(){return(0,o.e)((fe,Y)=>{let i=null;fe._refCount++;const q=(0,O.x)(Y,void 0,void 0,void 0,()=>{if(!fe||fe._refCount<=0||0<--fe._refCount)return void(i=null);const de=fe._connection,we=i;i=null,de&&(!we||de===we)&&de.unsubscribe(),Y.unsubscribe()});fe.subscribe(q),q.closed||(i=fe.connect())})}},7359:(tn,nt,N)=>{"use strict";N.d(nt,{U:()=>O});var o=N(5403);function O(u,fe,Y,i,q){return(de,we)=>{let Ve=Y,De=fe,it=0;de.subscribe((0,o.x)(we,Ke=>{const je=it++;De=Ve?u(De,Ke,je):(Ve=!0,Ke),i&&we.next(De)},q&&(()=>{Ve&&we.next(De),we.complete()})))}}},5684:(tn,nt,N)=>{"use strict";N.d(nt,{T:()=>O});var o=N(9300);function O(u){return(0,o.h)((fe,Y)=>u<=Y)}},8675:(tn,nt,N)=>{"use strict";N.d(nt,{O:()=>fe});var o=N(7272),O=N(3269),u=N(4482);function fe(...Y){const i=(0,O.yG)(Y);return(0,u.e)((q,de)=>{(i?(0,o.z)(Y,q,i):(0,o.z)(Y,q)).subscribe(de)})}},3900:(tn,nt,N)=>{"use strict";N.d(nt,{w:()=>fe});var o=N(8421),O=N(4482),u=N(5403);function fe(Y,i){return(0,O.e)((q,de)=>{let we=null,Ve=0,De=!1;const it=()=>De&&!we&&de.complete();q.subscribe((0,u.x)(de,Ke=>{we?.unsubscribe();let je=0;const Be=Ve++;(0,o.Xf)(Y(Ke,Be)).subscribe(we=(0,u.x)(de,Je=>de.next(i?i(Ke,Je,Be,je++):Je),()=>{we=null,it()}))},()=>{De=!0,it()}))})}},5698:(tn,nt,N)=>{"use strict";N.d(nt,{q:()=>fe});var o=N(515),O=N(4482),u=N(5403);function fe(Y){return Y<=0?()=>o.E:(0,O.e)((i,q)=>{let de=0;i.subscribe((0,u.x)(q,we=>{++de<=Y&&(q.next(we),Y<=de&&q.complete())}))})}},2722:(tn,nt,N)=>{"use strict";N.d(nt,{R:()=>Y});var o=N(4482),O=N(5403),u=N(8421),fe=N(5032);function Y(i){return(0,o.e)((q,de)=>{(0,u.Xf)(i).subscribe((0,O.x)(de,()=>de.complete(),fe.Z)),!de.closed&&q.subscribe(de)})}},8505:(tn,nt,N)=>{"use strict";N.d(nt,{b:()=>Y});var o=N(576),O=N(4482),u=N(5403),fe=N(4671);function Y(i,q,de){const we=(0,o.m)(i)||q||de?{next:i,error:q,complete:de}:i;return we?(0,O.e)((Ve,De)=>{var it;null===(it=we.subscribe)||void 0===it||it.call(we);let Ke=!0;Ve.subscribe((0,u.x)(De,je=>{var Be;null===(Be=we.next)||void 0===Be||Be.call(we,je),De.next(je)},()=>{var je;Ke=!1,null===(je=we.complete)||void 0===je||je.call(we),De.complete()},je=>{var Be;Ke=!1,null===(Be=we.error)||void 0===Be||Be.call(we,je),De.error(je)},()=>{var je,Be;Ke&&(null===(je=we.unsubscribe)||void 0===je||je.call(we)),null===(Be=we.finalize)||void 0===Be||Be.call(we)}))}):fe.y}},8068:(tn,nt,N)=>{"use strict";N.d(nt,{T:()=>fe});var o=N(6805),O=N(4482),u=N(5403);function fe(i=Y){return(0,O.e)((q,de)=>{let we=!1;q.subscribe((0,u.x)(de,Ve=>{we=!0,de.next(Ve)},()=>we?de.complete():de.error(i())))})}function Y(){return new o.K}},4408:(tn,nt,N)=>{"use strict";N.d(nt,{o:()=>Y});var o=N(727);class O extends o.w0{constructor(q,de){super()}schedule(q,de=0){return this}}const u={setInterval(i,q,...de){const{delegate:we}=u;return we?.setInterval?we.setInterval(i,q,...de):setInterval(i,q,...de)},clearInterval(i){const{delegate:q}=u;return(q?.clearInterval||clearInterval)(i)},delegate:void 0};var fe=N(8737);class Y extends O{constructor(q,de){super(q,de),this.scheduler=q,this.work=de,this.pending=!1}schedule(q,de=0){var we;if(this.closed)return this;this.state=q;const Ve=this.id,De=this.scheduler;return null!=Ve&&(this.id=this.recycleAsyncId(De,Ve,de)),this.pending=!0,this.delay=de,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(De,this.id,de),this}requestAsyncId(q,de,we=0){return u.setInterval(q.flush.bind(q,this),we)}recycleAsyncId(q,de,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return de;null!=de&&u.clearInterval(de)}execute(q,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(q,de);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(q,de){let Ve,we=!1;try{this.work(q)}catch(De){we=!0,Ve=De||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),Ve}unsubscribe(){if(!this.closed){const{id:q,scheduler:de}=this,{actions:we}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(we,this),null!=q&&(this.id=this.recycleAsyncId(de,q,null)),this.delay=null,super.unsubscribe()}}}},640:(tn,nt,N)=>{"use strict";N.d(nt,{v:()=>u});const o={now:()=>(o.delegate||Date).now(),delegate:void 0};class O{constructor(Y,i=O.now){this.schedulerActionCtor=Y,this.now=i}schedule(Y,i=0,q){return new this.schedulerActionCtor(this,Y).schedule(q,i)}}O.now=o.now;class u extends O{constructor(Y,i=O.now){super(Y,i),this.actions=[],this._active=!1}flush(Y){const{actions:i}=this;if(this._active)return void i.push(Y);let q;this._active=!0;do{if(q=Y.execute(Y.state,Y.delay))break}while(Y=i.shift());if(this._active=!1,q){for(;Y=i.shift();)Y.unsubscribe();throw q}}}},4986:(tn,nt,N)=>{"use strict";N.d(nt,{P:()=>fe,z:()=>u});var o=N(4408);const u=new(N(640).v)(o.o),fe=u},3410:(tn,nt,N)=>{"use strict";N.d(nt,{z:()=>o});const o={setTimeout(O,u,...fe){const{delegate:Y}=o;return Y?.setTimeout?Y.setTimeout(O,u,...fe):setTimeout(O,u,...fe)},clearTimeout(O){const{delegate:u}=o;return(u?.clearTimeout||clearTimeout)(O)},delegate:void 0}},2202:(tn,nt,N)=>{"use strict";N.d(nt,{h:()=>O});const O=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tn,nt,N)=>{"use strict";N.d(nt,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(tn,nt,N)=>{"use strict";N.d(nt,{K:()=>O});const O=(0,N(3888).d)(u=>function(){u(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(tn,nt,N)=>{"use strict";N.d(nt,{_6:()=>i,jO:()=>fe,yG:()=>Y});var o=N(576),O=N(3532);function u(q){return q[q.length-1]}function fe(q){return(0,o.m)(u(q))?q.pop():void 0}function Y(q){return(0,O.K)(u(q))?q.pop():void 0}function i(q,de){return"number"==typeof u(q)?q.pop():de}},4742:(tn,nt,N)=>{"use strict";N.d(nt,{D:()=>Y});const{isArray:o}=Array,{getPrototypeOf:O,prototype:u,keys:fe}=Object;function Y(q){if(1===q.length){const de=q[0];if(o(de))return{args:de,keys:null};if(function i(q){return q&&"object"==typeof q&&O(q)===u}(de)){const we=fe(de);return{args:we.map(Ve=>de[Ve]),keys:we}}}return{args:q,keys:null}}},8737:(tn,nt,N)=>{"use strict";function o(O,u){if(O){const fe=O.indexOf(u);0<=fe&&O.splice(fe,1)}}N.d(nt,{P:()=>o})},3888:(tn,nt,N)=>{"use strict";function o(O){const fe=O(Y=>{Error.call(Y),Y.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}N.d(nt,{d:()=>o})},1810:(tn,nt,N)=>{"use strict";function o(O,u){return O.reduce((fe,Y,i)=>(fe[Y]=u[i],fe),{})}N.d(nt,{n:()=>o})},2806:(tn,nt,N)=>{"use strict";N.d(nt,{O:()=>fe,x:()=>u});var o=N(2416);let O=null;function u(Y){if(o.v.useDeprecatedSynchronousErrorHandling){const i=!O;if(i&&(O={errorThrown:!1,error:null}),Y(),i){const{errorThrown:q,error:de}=O;if(O=null,q)throw de}}else Y()}function fe(Y){o.v.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=Y)}},9672:(tn,nt,N)=>{"use strict";function o(O,u,fe,Y=0,i=!1){const q=u.schedule(function(){fe(),i?O.add(this.schedule(null,Y)):this.unsubscribe()},Y);if(O.add(q),!i)return q}N.d(nt,{f:()=>o})},4671:(tn,nt,N)=>{"use strict";function o(O){return O}N.d(nt,{y:()=>o})},1144:(tn,nt,N)=>{"use strict";N.d(nt,{z:()=>o});const o=O=>O&&"number"==typeof O.length&&"function"!=typeof O},2206:(tn,nt,N)=>{"use strict";N.d(nt,{D:()=>O});var o=N(576);function O(u){return Symbol.asyncIterator&&(0,o.m)(u?.[Symbol.asyncIterator])}},576:(tn,nt,N)=>{"use strict";function o(O){return"function"==typeof O}N.d(nt,{m:()=>o})},3670:(tn,nt,N)=>{"use strict";N.d(nt,{c:()=>u});var o=N(8822),O=N(576);function u(fe){return(0,O.m)(fe[o.L])}},6495:(tn,nt,N)=>{"use strict";N.d(nt,{T:()=>u});var o=N(2202),O=N(576);function u(fe){return(0,O.m)(fe?.[o.h])}},8239:(tn,nt,N)=>{"use strict";N.d(nt,{t:()=>O});var o=N(576);function O(u){return(0,o.m)(u?.then)}},3260:(tn,nt,N)=>{"use strict";N.d(nt,{L:()=>fe,Q:()=>u});var o=N(7582),O=N(576);function u(Y){return(0,o.FC)(this,arguments,function*(){const q=Y.getReader();try{for(;;){const{value:de,done:we}=yield(0,o.qq)(q.read());if(we)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(de)}}finally{q.releaseLock()}})}function fe(Y){return(0,O.m)(Y?.getReader)}},3532:(tn,nt,N)=>{"use strict";N.d(nt,{K:()=>O});var o=N(576);function O(u){return u&&(0,o.m)(u.schedule)}},4482:(tn,nt,N)=>{"use strict";N.d(nt,{A:()=>O,e:()=>u});var o=N(576);function O(fe){return(0,o.m)(fe?.lift)}function u(fe){return Y=>{if(O(Y))return Y.lift(function(i){try{return fe(i,this)}catch(q){this.error(q)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(tn,nt,N)=>{"use strict";N.d(nt,{Z:()=>fe});var o=N(4004);const{isArray:O}=Array;function fe(Y){return(0,o.U)(i=>function u(Y,i){return O(i)?Y(...i):Y(i)}(Y,i))}},5032:(tn,nt,N)=>{"use strict";function o(){}N.d(nt,{Z:()=>o})},9635:(tn,nt,N)=>{"use strict";N.d(nt,{U:()=>u,z:()=>O});var o=N(4671);function O(...fe){return u(fe)}function u(fe){return 0===fe.length?o.y:1===fe.length?fe[0]:function(i){return fe.reduce((q,de)=>de(q),i)}}},7849:(tn,nt,N)=>{"use strict";N.d(nt,{h:()=>u});var o=N(2416),O=N(3410);function u(fe){O.z.setTimeout(()=>{const{onUnhandledError:Y}=o.v;if(!Y)throw fe;Y(fe)})}},4532:(tn,nt,N)=>{"use strict";function o(O){return new TypeError(`You provided ${null!==O&&"object"==typeof O?"an invalid object":`'${O}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(nt,{z:()=>o})},3948:(tn,nt,N)=>{"use strict";N.d(nt,{rt:()=>se,Em:()=>en,tE:()=>wr,qV:()=>mn,QL:()=>rt,ic:()=>Jt});var o=N(6895),O=N(1571),u=N(3353),fe=N(7579),Y=N(727),i=N(1135),q=N(9646),de=N(9521),we=N(8505),Ve=N(8372),De=N(9300),it=N(4004),Ke=N(5698),je=N(5684),Be=N(1884),Je=N(2722),gt=N(1281);let lt=(()=>{class he{create(_e){return typeof MutationObserver>"u"?null:new MutationObserver(_e)}}return he.\u0275fac=function(_e){return new(_e||he)},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),ct=(()=>{class he{}return he.\u0275fac=function(_e){return new(_e||he)},he.\u0275mod=O.oAB({type:he}),he.\u0275inj=O.cJS({providers:[lt]}),he})();var at=N(2289);class Vi{constructor(re){this._items=re,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new fe.x,this._typeaheadSubscription=Y.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=_e=>_e.disabled,this._pressedLetters=[],this.tabOut=new fe.x,this.change=new fe.x,re instanceof O.n_E&&(this._itemChangesSubscription=re.changes.subscribe(_e=>{if(this._activeItem){const Ze=_e.toArray().indexOf(this._activeItem);Ze>-1&&Ze!==this._activeItemIndex&&(this._activeItemIndex=Ze)}}))}skipPredicate(re){return this._skipPredicateFn=re,this}withWrap(re=!0){return this._wrap=re,this}withVerticalOrientation(re=!0){return this._vertical=re,this}withHorizontalOrientation(re){return this._horizontal=re,this}withAllowedModifierKeys(re){return this._allowedModifierKeys=re,this}withTypeAhead(re=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,we.b)(_e=>this._pressedLetters.push(_e)),(0,Ve.b)(re),(0,De.h)(()=>this._pressedLetters.length>0),(0,it.U)(()=>this._pressedLetters.join(""))).subscribe(_e=>{const Le=this._getItemsArray();for(let Ze=1;Ze<Le.length+1;Ze++){const Pe=(this._activeItemIndex+Ze)%Le.length,ot=Le[Pe];if(!this._skipPredicateFn(ot)&&0===ot.getLabel().toUpperCase().trim().indexOf(_e)){this.setActiveItem(Pe);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(re=!0){return this._homeAndEnd=re,this}withPageUpDown(re=!0,_e=10){return this._pageUpAndDown={enabled:re,delta:_e},this}setActiveItem(re){const _e=this._activeItem;this.updateActiveItem(re),this._activeItem!==_e&&this.change.next(this._activeItemIndex)}onKeydown(re){const _e=re.keyCode,Ze=["altKey","ctrlKey","metaKey","shiftKey"].every(Pe=>!re[Pe]||this._allowedModifierKeys.indexOf(Pe)>-1);switch(_e){case de.Mf:return void this.tabOut.next();case de.JH:if(this._vertical&&Ze){this.setNextItemActive();break}return;case de.LH:if(this._vertical&&Ze){this.setPreviousItemActive();break}return;case de.SV:if(this._horizontal&&Ze){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case de.oh:if(this._horizontal&&Ze){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case de.Sd:if(this._homeAndEnd&&Ze){this.setFirstItemActive();break}return;case de.uR:if(this._homeAndEnd&&Ze){this.setLastItemActive();break}return;case de.Ku:if(this._pageUpAndDown.enabled&&Ze){const Pe=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(Pe>0?Pe:0,1);break}return;case de.VM:if(this._pageUpAndDown.enabled&&Ze){const Pe=this._activeItemIndex+this._pageUpAndDown.delta,ot=this._getItemsArray().length;this._setActiveItemByIndex(Pe<ot?Pe:ot-1,-1);break}return;default:return void((Ze||(0,de.Vb)(re,"shiftKey"))&&(re.key&&1===re.key.length?this._letterKeyStream.next(re.key.toLocaleUpperCase()):(_e>=de.A&&_e<=de.Z||_e>=de.xE&&_e<=de.aO)&&this._letterKeyStream.next(String.fromCharCode(_e))))}this._pressedLetters=[],re.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(re){const _e=this._getItemsArray(),Le="number"==typeof re?re:_e.indexOf(re);this._activeItem=_e[Le]??null,this._activeItemIndex=Le}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(re){this._wrap?this._setActiveInWrapMode(re):this._setActiveInDefaultMode(re)}_setActiveInWrapMode(re){const _e=this._getItemsArray();for(let Le=1;Le<=_e.length;Le++){const Ze=(this._activeItemIndex+re*Le+_e.length)%_e.length;if(!this._skipPredicateFn(_e[Ze]))return void this.setActiveItem(Ze)}}_setActiveInDefaultMode(re){this._setActiveItemByIndex(this._activeItemIndex+re,re)}_setActiveItemByIndex(re,_e){const Le=this._getItemsArray();if(Le[re]){for(;this._skipPredicateFn(Le[re]);)if(!Le[re+=_e])return;this.setActiveItem(re)}}_getItemsArray(){return this._items instanceof O.n_E?this._items.toArray():this._items}}class en extends Vi{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(re){return this._origin=re,this}setActiveItem(re){super.setActiveItem(re),this.activeItem&&this.activeItem.focus(this._origin)}}let Jt=(()=>{class he{constructor(_e){this._platform=_e}isDisabled(_e){return _e.hasAttribute("disabled")}isVisible(_e){return function fn(he){return!!(he.offsetWidth||he.offsetHeight||"function"==typeof he.getClientRects&&he.getClientRects().length)}(_e)&&"visible"===getComputedStyle(_e).visibility}isTabbable(_e){if(!this._platform.isBrowser)return!1;const Le=function ln(he){try{return he.frameElement}catch{return null}}(function Mn(he){return he.ownerDocument&&he.ownerDocument.defaultView||window}(_e));if(Le&&(-1===Xn(Le)||!this.isVisible(Le)))return!1;let Ze=_e.nodeName.toLowerCase(),Pe=Xn(_e);return _e.hasAttribute("contenteditable")?-1!==Pe:!("iframe"===Ze||"object"===Ze||this._platform.WEBKIT&&this._platform.IOS&&!function mi(he){let re=he.nodeName.toLowerCase(),_e="input"===re&&he.type;return"text"===_e||"password"===_e||"select"===re||"textarea"===re}(_e))&&("audio"===Ze?!!_e.hasAttribute("controls")&&-1!==Pe:"video"===Ze?-1!==Pe&&(null!==Pe||this._platform.FIREFOX||_e.hasAttribute("controls")):_e.tabIndex>=0)}isFocusable(_e,Le){return function pi(he){return!function On(he){return function Ui(he){return"input"==he.nodeName.toLowerCase()}(he)&&"hidden"==he.type}(he)&&(function qt(he){let re=he.nodeName.toLowerCase();return"input"===re||"select"===re||"button"===re||"textarea"===re}(he)||function Nn(he){return function Yn(he){return"a"==he.nodeName.toLowerCase()}(he)&&he.hasAttribute("href")}(he)||he.hasAttribute("contenteditable")||Gn(he))}(_e)&&!this.isDisabled(_e)&&(Le?.ignoreVisibility||this.isVisible(_e))}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(u.t4))},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();function Gn(he){if(!he.hasAttribute("tabindex")||void 0===he.tabIndex)return!1;let re=he.getAttribute("tabindex");return!(!re||isNaN(parseInt(re,10)))}function Xn(he){if(!Gn(he))return null;const re=parseInt(he.getAttribute("tabindex")||"",10);return isNaN(re)?-1:re}class Pn{get enabled(){return this._enabled}set enabled(re){this._enabled=re,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(re,this._startAnchor),this._toggleAnchorTabIndex(re,this._endAnchor))}constructor(re,_e,Le,Ze,Pe=!1){this._element=re,this._checker=_e,this._ngZone=Le,this._document=Ze,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Pe||this.attachAnchors()}destroy(){const re=this._startAnchor,_e=this._endAnchor;re&&(re.removeEventListener("focus",this.startAnchorListener),re.remove()),_e&&(_e.removeEventListener("focus",this.endAnchorListener),_e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(re){return new Promise(_e=>{this._executeOnStable(()=>_e(this.focusInitialElement(re)))})}focusFirstTabbableElementWhenReady(re){return new Promise(_e=>{this._executeOnStable(()=>_e(this.focusFirstTabbableElement(re)))})}focusLastTabbableElementWhenReady(re){return new Promise(_e=>{this._executeOnStable(()=>_e(this.focusLastTabbableElement(re)))})}_getRegionBoundary(re){const _e=this._element.querySelectorAll(`[cdk-focus-region-${re}], [cdkFocusRegion${re}], [cdk-focus-${re}]`);return"start"==re?_e.length?_e[0]:this._getFirstTabbableElement(this._element):_e.length?_e[_e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(re){const _e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(_e){if(!this._checker.isFocusable(_e)){const Le=this._getFirstTabbableElement(_e);return Le?.focus(re),!!Le}return _e.focus(re),!0}return this.focusFirstTabbableElement(re)}focusFirstTabbableElement(re){const _e=this._getRegionBoundary("start");return _e&&_e.focus(re),!!_e}focusLastTabbableElement(re){const _e=this._getRegionBoundary("end");return _e&&_e.focus(re),!!_e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(re){if(this._checker.isFocusable(re)&&this._checker.isTabbable(re))return re;const _e=re.children;for(let Le=0;Le<_e.length;Le++){const Ze=_e[Le].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(_e[Le]):null;if(Ze)return Ze}return null}_getLastTabbableElement(re){if(this._checker.isFocusable(re)&&this._checker.isTabbable(re))return re;const _e=re.children;for(let Le=_e.length-1;Le>=0;Le--){const Ze=_e[Le].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(_e[Le]):null;if(Ze)return Ze}return null}_createAnchor(){const re=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,re),re.classList.add("cdk-visually-hidden"),re.classList.add("cdk-focus-trap-anchor"),re.setAttribute("aria-hidden","true"),re}_toggleAnchorTabIndex(re,_e){re?_e.setAttribute("tabindex","0"):_e.removeAttribute("tabindex")}toggleAnchors(re){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(re,this._startAnchor),this._toggleAnchorTabIndex(re,this._endAnchor))}_executeOnStable(re){this._ngZone.isStable?re():this._ngZone.onStable.pipe((0,Ke.q)(1)).subscribe(re)}}let mn=(()=>{class he{constructor(_e,Le,Ze){this._checker=_e,this._ngZone=Le,this._document=Ze}create(_e,Le=!1){return new Pn(_e,this._checker,this._ngZone,this._document,Le)}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(Jt),O.LFG(O.R0b),O.LFG(o.K0))},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();const Fe=new O.OlP("cdk-input-modality-detector-options"),Yt={ignoreKeys:[de.zL,de.jx,de.b2,de.MW,de.JU]},It=(0,u.i$)({passive:!0,capture:!0});let rt=(()=>{class he{get mostRecentModality(){return this._modality.value}constructor(_e,Le,Ze,Pe){this._platform=_e,this._mostRecentTarget=null,this._modality=new i.X(null),this._lastTouchMs=0,this._onKeydown=ot=>{this._options?.ignoreKeys?.some(Nt=>Nt===ot.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,u.sA)(ot))},this._onMousedown=ot=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function qi(he){return 0===he.buttons||0===he.offsetX&&0===he.offsetY}(ot)?"keyboard":"mouse"),this._mostRecentTarget=(0,u.sA)(ot))},this._onTouchstart=ot=>{!function j(he){const re=he.touches&&he.touches[0]||he.changedTouches&&he.changedTouches[0];return!(!re||-1!==re.identifier||null!=re.radiusX&&1!==re.radiusX||null!=re.radiusY&&1!==re.radiusY)}(ot)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,u.sA)(ot)):this._modality.next("keyboard")},this._options={...Yt,...Pe},this.modalityDetected=this._modality.pipe((0,je.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Be.x)()),_e.isBrowser&&Le.runOutsideAngular(()=>{Ze.addEventListener("keydown",this._onKeydown,It),Ze.addEventListener("mousedown",this._onMousedown,It),Ze.addEventListener("touchstart",this._onTouchstart,It)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,It),document.removeEventListener("mousedown",this._onMousedown,It),document.removeEventListener("touchstart",this._onTouchstart,It))}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(u.t4),O.LFG(O.R0b),O.LFG(o.K0),O.LFG(Fe,8))},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();const bo=new O.OlP("cdk-focus-monitor-default-options"),Yi=(0,u.i$)({passive:!0,capture:!0});let wr=(()=>{class he{constructor(_e,Le,Ze,Pe,ot){this._ngZone=_e,this._platform=Le,this._inputModalityDetector=Ze,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new fe.x,this._rootNodeFocusAndBlurListener=Nt=>{for(let dn=(0,u.sA)(Nt);dn;dn=dn.parentElement)"focus"===Nt.type?this._onFocus(Nt,dn):this._onBlur(Nt,dn)},this._document=Pe,this._detectionMode=ot?.detectionMode||0}monitor(_e,Le=!1){const Ze=(0,gt.fI)(_e);if(!this._platform.isBrowser||1!==Ze.nodeType)return(0,q.of)(null);const Pe=(0,u.kV)(Ze)||this._getDocument(),ot=this._elementInfo.get(Ze);if(ot)return Le&&(ot.checkChildren=!0),ot.subject;const Nt={checkChildren:Le,subject:new fe.x,rootNode:Pe};return this._elementInfo.set(Ze,Nt),this._registerGlobalListeners(Nt),Nt.subject}stopMonitoring(_e){const Le=(0,gt.fI)(_e),Ze=this._elementInfo.get(Le);Ze&&(Ze.subject.complete(),this._setClasses(Le),this._elementInfo.delete(Le),this._removeGlobalListeners(Ze))}focusVia(_e,Le,Ze){const Pe=(0,gt.fI)(_e);Pe===this._getDocument().activeElement?this._getClosestElementsInfo(Pe).forEach(([Nt,rn])=>this._originChanged(Nt,Le,rn)):(this._setOrigin(Le),"function"==typeof Pe.focus&&Pe.focus(Ze))}ngOnDestroy(){this._elementInfo.forEach((_e,Le)=>this.stopMonitoring(Le))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(_e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(_e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:_e&&this._isLastInteractionFromInputLabel(_e)?"mouse":"program"}_shouldBeAttributedToTouch(_e){return 1===this._detectionMode||!!_e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(_e,Le){_e.classList.toggle("cdk-focused",!!Le),_e.classList.toggle("cdk-touch-focused","touch"===Le),_e.classList.toggle("cdk-keyboard-focused","keyboard"===Le),_e.classList.toggle("cdk-mouse-focused","mouse"===Le),_e.classList.toggle("cdk-program-focused","program"===Le)}_setOrigin(_e,Le=!1){this._ngZone.runOutsideAngular(()=>{this._origin=_e,this._originFromTouchInteraction="touch"===_e&&Le,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(_e,Le){const Ze=this._elementInfo.get(Le),Pe=(0,u.sA)(_e);!Ze||!Ze.checkChildren&&Le!==Pe||this._originChanged(Le,this._getFocusOrigin(Pe),Ze)}_onBlur(_e,Le){const Ze=this._elementInfo.get(Le);!Ze||Ze.checkChildren&&_e.relatedTarget instanceof Node&&Le.contains(_e.relatedTarget)||(this._setClasses(Le),this._emitOrigin(Ze,null))}_emitOrigin(_e,Le){_e.subject.observers.length&&this._ngZone.run(()=>_e.subject.next(Le))}_registerGlobalListeners(_e){if(!this._platform.isBrowser)return;const Le=_e.rootNode,Ze=this._rootNodeFocusListenerCount.get(Le)||0;Ze||this._ngZone.runOutsideAngular(()=>{Le.addEventListener("focus",this._rootNodeFocusAndBlurListener,Yi),Le.addEventListener("blur",this._rootNodeFocusAndBlurListener,Yi)}),this._rootNodeFocusListenerCount.set(Le,Ze+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Je.R)(this._stopInputModalityDetector)).subscribe(Pe=>{this._setOrigin(Pe,!0)}))}_removeGlobalListeners(_e){const Le=_e.rootNode;if(this._rootNodeFocusListenerCount.has(Le)){const Ze=this._rootNodeFocusListenerCount.get(Le);Ze>1?this._rootNodeFocusListenerCount.set(Le,Ze-1):(Le.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yi),Le.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yi),this._rootNodeFocusListenerCount.delete(Le))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(_e,Le,Ze){this._setClasses(_e,Le),this._emitOrigin(Ze,Le),this._lastFocusOrigin=Le}_getClosestElementsInfo(_e){const Le=[];return this._elementInfo.forEach((Ze,Pe)=>{(Pe===_e||Ze.checkChildren&&Pe.contains(_e))&&Le.push([Pe,Ze])}),Le}_isLastInteractionFromInputLabel(_e){const{_mostRecentTarget:Le,mostRecentModality:Ze}=this._inputModalityDetector;if("mouse"!==Ze||!Le||Le===_e||"INPUT"!==_e.nodeName&&"TEXTAREA"!==_e.nodeName||_e.disabled)return!1;const Pe=_e.labels;if(Pe)for(let ot=0;ot<Pe.length;ot++)if(Pe[ot].contains(Le))return!0;return!1}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(O.R0b),O.LFG(u.t4),O.LFG(rt),O.LFG(o.K0,8),O.LFG(bo,8))},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();const ao="cdk-high-contrast-black-on-white",Zr="cdk-high-contrast-white-on-black",Qt="cdk-high-contrast-active";let K=(()=>{class he{constructor(_e,Le){this._platform=_e,this._document=Le,this._breakpointSubscription=(0,O.f3M)(at.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const _e=this._document.createElement("div");_e.style.backgroundColor="rgb(1,2,3)",_e.style.position="absolute",this._document.body.appendChild(_e);const Le=this._document.defaultView||window,Ze=Le&&Le.getComputedStyle?Le.getComputedStyle(_e):null,Pe=(Ze&&Ze.backgroundColor||"").replace(/ /g,"");switch(_e.remove(),Pe){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const _e=this._document.body.classList;_e.remove(Qt,ao,Zr),this._hasCheckedHighContrastMode=!0;const Le=this.getHighContrastMode();1===Le?_e.add(Qt,ao):2===Le&&_e.add(Qt,Zr)}}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(u.t4),O.LFG(o.K0))},he.\u0275prov=O.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),se=(()=>{class he{constructor(_e){_e._applyBodyHighContrastModeCssClasses()}}return he.\u0275fac=function(_e){return new(_e||he)(O.LFG(K))},he.\u0275mod=O.oAB({type:he}),he.\u0275inj=O.cJS({imports:[ct]}),he})()},8580:(tn,nt,N)=>{"use strict";N.d(nt,{XD:()=>q});var o=N(1571);let q=(()=>{class de{}return de.\u0275fac=function(Ve){return new(Ve||de)},de.\u0275mod=o.oAB({type:de}),de.\u0275inj=o.cJS({}),de})()},445:(tn,nt,N)=>{"use strict";N.d(nt,{Is:()=>q,vT:()=>we});var o=N(1571),O=N(6895);const u=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function fe(){return(0,o.f3M)(O.K0)}}),Y=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let q=(()=>{class Ve{constructor(it){this.value="ltr",this.change=new o.vpe,it&&(this.value=function i(Ve){const De=Ve?.toLowerCase()||"";return"auto"===De&&typeof navigator<"u"&&navigator?.language?Y.test(navigator.language)?"rtl":"ltr":"rtl"===De?"rtl":"ltr"}((it.body?it.body.dir:null)||(it.documentElement?it.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return Ve.\u0275fac=function(it){return new(it||Ve)(o.LFG(u,8))},Ve.\u0275prov=o.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),we=(()=>{class Ve{}return Ve.\u0275fac=function(it){return new(it||Ve)},Ve.\u0275mod=o.oAB({type:Ve}),Ve.\u0275inj=o.cJS({}),Ve})()},1281:(tn,nt,N)=>{"use strict";N.d(nt,{Eq:()=>Y,HM:()=>i,Ig:()=>O,fI:()=>q,su:()=>u});var o=N(1571);function O(we){return null!=we&&"false"!=`${we}`}function u(we,Ve=0){return function fe(we){return!isNaN(parseFloat(we))&&!isNaN(Number(we))}(we)?Number(we):Ve}function Y(we){return Array.isArray(we)?we:[we]}function i(we){return null==we?"":"string"==typeof we?we:`${we}px`}function q(we){return we instanceof o.SBq?we.nativeElement:we}},5017:(tn,nt,N)=>{"use strict";N.d(nt,{A8:()=>De,Ov:()=>we,Z9:()=>Y});var o=N(4033),O=N(7579),u=N(1571);function Y(Ke){return Ke&&"function"==typeof Ke.connect&&!(Ke instanceof o.c)}class we{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(je=!1,Be,Je=!0,gt){this._multiple=je,this._emitChanges=Je,this.compareWith=gt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new O.x,Be&&Be.length&&(je?Be.forEach(lt=>this._markSelected(lt)):this._markSelected(Be[0]),this._selectedToEmit.length=0)}select(...je){this._verifyValueAssignment(je),je.forEach(Je=>this._markSelected(Je));const Be=this._hasQueuedChanges();return this._emitChangeEvent(),Be}deselect(...je){this._verifyValueAssignment(je),je.forEach(Je=>this._unmarkSelected(Je));const Be=this._hasQueuedChanges();return this._emitChangeEvent(),Be}setSelection(...je){this._verifyValueAssignment(je);const Be=this.selected,Je=new Set(je);je.forEach(lt=>this._markSelected(lt)),Be.filter(lt=>!Je.has(lt)).forEach(lt=>this._unmarkSelected(lt));const gt=this._hasQueuedChanges();return this._emitChangeEvent(),gt}toggle(je){return this.isSelected(je)?this.deselect(je):this.select(je)}clear(je=!0){this._unmarkAll();const Be=this._hasQueuedChanges();return je&&this._emitChangeEvent(),Be}isSelected(je){if(this.compareWith){for(const Be of this._selection)if(this.compareWith(Be,je))return!0;return!1}return this._selection.has(je)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(je){this._multiple&&this.selected&&this._selected.sort(je)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(je){this.isSelected(je)||(this._multiple||this._unmarkAll(),this.isSelected(je)||this._selection.add(je),this._emitChanges&&this._selectedToEmit.push(je))}_unmarkSelected(je){this.isSelected(je)&&(this._selection.delete(je),this._emitChanges&&this._deselectedToEmit.push(je))}_unmarkAll(){this.isEmpty()||this._selection.forEach(je=>this._unmarkSelected(je))}_verifyValueAssignment(je){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let De=(()=>{class Ke{constructor(){this._listeners=[]}notify(Be,Je){for(let gt of this._listeners)gt(Be,Je)}listen(Be){return this._listeners.push(Be),()=>{this._listeners=this._listeners.filter(Je=>Be!==Je)}}ngOnDestroy(){this._listeners=[]}}return Ke.\u0275fac=function(Be){return new(Be||Ke)},Ke.\u0275prov=u.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})()},9521:(tn,nt,N)=>{"use strict";N.d(nt,{A:()=>ln,JH:()=>dt,JU:()=>i,K5:()=>Y,Ku:()=>Ke,LH:()=>lt,L_:()=>it,MW:()=>rt,Mf:()=>u,SV:()=>wt,Sd:()=>Je,VM:()=>je,Vb:()=>Ri,Z:()=>It,aO:()=>Vi,b2:()=>ci,hY:()=>De,jx:()=>q,oh:()=>gt,uR:()=>Be,xE:()=>Bt,zL:()=>de});const u=9,Y=13,i=16,q=17,de=18,De=27,it=32,Ke=33,je=34,Be=35,Je=36,gt=37,lt=38,wt=39,dt=40,Bt=48,Vi=57,ln=65,It=90,rt=91,ci=224;function Ri(Pi,...yr){return yr.length?yr.some(Xi=>Pi[Xi]):Pi.altKey||Pi.shiftKey||Pi.ctrlKey||Pi.metaKey}},2289:(tn,nt,N)=>{"use strict";N.d(nt,{Yg:()=>dt});var o=N(1571),O=N(1281),u=N(7579),fe=N(9841),Y=N(7272),i=N(9751),q=N(5698),de=N(5684),we=N(8372),Ve=N(4004),De=N(8675),it=N(2722),Ke=N(3353);const Be=new Set;let Je,gt=(()=>{class Qe{constructor(Bt){this._platform=Bt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):wt}matchMedia(Bt){return(this._platform.WEBKIT||this._platform.BLINK)&&function lt(Qe){if(!Be.has(Qe))try{Je||(Je=document.createElement("style"),Je.setAttribute("type","text/css"),document.head.appendChild(Je)),Je.sheet&&(Je.sheet.insertRule(`@media ${Qe} {body{ }}`,0),Be.add(Qe))}catch(ht){console.error(ht)}}(Bt),this._matchMedia(Bt)}}return Qe.\u0275fac=function(Bt){return new(Bt||Qe)(o.LFG(Ke.t4))},Qe.\u0275prov=o.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"root"}),Qe})();function wt(Qe){return{matches:"all"===Qe||""===Qe,media:Qe,addListener:()=>{},removeListener:()=>{}}}let dt=(()=>{class Qe{constructor(Bt,Ft){this._mediaMatcher=Bt,this._zone=Ft,this._queries=new Map,this._destroySubject=new u.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Bt){return ct((0,O.Eq)(Bt)).some(kt=>this._registerQuery(kt).mql.matches)}observe(Bt){const kt=ct((0,O.Eq)(Bt)).map(Kt=>this._registerQuery(Kt).observable);let bn=(0,fe.a)(kt);return bn=(0,Y.z)(bn.pipe((0,q.q)(1)),bn.pipe((0,de.T)(1),(0,we.b)(0))),bn.pipe((0,Ve.U)(Kt=>{const Zn={matches:!1,breakpoints:{}};return Kt.forEach(({matches:wn,query:Vr})=>{Zn.matches=Zn.matches||wn,Zn.breakpoints[Vr]=wn}),Zn}))}_registerQuery(Bt){if(this._queries.has(Bt))return this._queries.get(Bt);const Ft=this._mediaMatcher.matchMedia(Bt),bn={observable:new i.y(Kt=>{const Zn=wn=>this._zone.run(()=>Kt.next(wn));return Ft.addListener(Zn),()=>{Ft.removeListener(Zn)}}).pipe((0,De.O)(Ft),(0,Ve.U)(({matches:Kt})=>({query:Bt,matches:Kt})),(0,it.R)(this._destroySubject)),mql:Ft};return this._queries.set(Bt,bn),bn}}return Qe.\u0275fac=function(Bt){return new(Bt||Qe)(o.LFG(gt),o.LFG(o.R0b))},Qe.\u0275prov=o.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"root"}),Qe})();function ct(Qe){return Qe.map(ht=>ht.split(",")).reduce((ht,Bt)=>ht.concat(Bt)).map(ht=>ht.trim())}},8017:(tn,nt,N)=>{"use strict";N.d(nt,{F1:()=>Yt});var o=N(1571),O=N(4567);N(9521),N(8675),N(8372),N(1884),N(9300),N(2722),N(5577),N(9718),N(8189),N(3900),N(5684),N(5017),N(7579),N(6451),N(4968),N(9770),N(8421),N(4080),N(3948),N(1281),N(445),N(3353);let Yt=(()=>{class ut{}return ut.\u0275fac=function(rt){return new(rt||ut)},ut.\u0275mod=o.oAB({type:ut}),ut.\u0275inj=o.cJS({imports:[O.U8]}),ut})()},4567:(tn,nt,N)=>{"use strict";N.d(nt,{tR:()=>ao,aV:()=>In,X_:()=>Gr,Xj:()=>Le,U8:()=>Wi,Iu:()=>Ze,cR:()=>Ye,Yy:()=>tt});var o=N(1281),O=N(1571),u=N(7579),fe=N(9646),Y=N(9751),i=N(4968),q=N(4408),de=N(727);const we={schedule(At){let Ae=requestAnimationFrame,Te=cancelAnimationFrame;const{delegate:Xe}=we;Xe&&(Ae=Xe.requestAnimationFrame,Te=Xe.cancelAnimationFrame);const Ct=Ae(St=>{Te=void 0,At(St)});return new de.w0(()=>Te?.(Ct))},requestAnimationFrame(...At){const{delegate:Ae}=we;return(Ae?.requestAnimationFrame||requestAnimationFrame)(...At)},cancelAnimationFrame(...At){const{delegate:Ae}=we;return(Ae?.cancelAnimationFrame||cancelAnimationFrame)(...At)},delegate:void 0};var De=N(640);const Ke=new class it extends De.v{flush(Ae){this._active=!0;const Te=this._scheduled;this._scheduled=void 0;const{actions:Xe}=this;let Ct;Ae=Ae||Xe.shift();do{if(Ct=Ae.execute(Ae.state,Ae.delay))break}while((Ae=Xe[0])&&Ae.id===Te&&Xe.shift());if(this._active=!1,Ct){for(;(Ae=Xe[0])&&Ae.id===Te&&Xe.shift();)Ae.unsubscribe();throw Ct}}}(class Ve extends q.o{constructor(Ae,Te){super(Ae,Te),this.scheduler=Ae,this.work=Te}requestAsyncId(Ae,Te,Xe=0){return null!==Xe&&Xe>0?super.requestAsyncId(Ae,Te,Xe):(Ae.actions.push(this),Ae._scheduled||(Ae._scheduled=we.requestAnimationFrame(()=>Ae.flush(void 0))))}recycleAsyncId(Ae,Te,Xe=0){var Ct;if(null!=Xe?Xe>0:this.delay>0)return super.recycleAsyncId(Ae,Te,Xe);const{actions:St}=Ae;null!=Te&&(null===(Ct=St[St.length-1])||void 0===Ct?void 0:Ct.id)!==Te&&(we.cancelAnimationFrame(Te),Ae._scheduled=void 0)}});let Je,Be=1;const gt={};function lt(At){return At in gt&&(delete gt[At],!0)}const wt={setImmediate(At){const Ae=Be++;return gt[Ae]=!0,Je||(Je=Promise.resolve()),Je.then(()=>lt(Ae)&&At()),Ae},clearImmediate(At){lt(At)}},{setImmediate:ct,clearImmediate:at}=wt,Qe={setImmediate(...At){const{delegate:Ae}=Qe;return(Ae?.setImmediate||ct)(...At)},clearImmediate(At){const{delegate:Ae}=Qe;return(Ae?.clearImmediate||at)(At)},delegate:void 0},Ft=new class Bt extends De.v{flush(Ae){this._active=!0;const Te=this._scheduled;this._scheduled=void 0;const{actions:Xe}=this;let Ct;Ae=Ae||Xe.shift();do{if(Ct=Ae.execute(Ae.state,Ae.delay))break}while((Ae=Xe[0])&&Ae.id===Te&&Xe.shift());if(this._active=!1,Ct){for(;(Ae=Xe[0])&&Ae.id===Te&&Xe.shift();)Ae.unsubscribe();throw Ct}}}(class ht extends q.o{constructor(Ae,Te){super(Ae,Te),this.scheduler=Ae,this.work=Te}requestAsyncId(Ae,Te,Xe=0){return null!==Xe&&Xe>0?super.requestAsyncId(Ae,Te,Xe):(Ae.actions.push(this),Ae._scheduled||(Ae._scheduled=Qe.setImmediate(Ae.flush.bind(Ae,void 0))))}recycleAsyncId(Ae,Te,Xe=0){var Ct;if(null!=Xe?Xe>0:this.delay>0)return super.recycleAsyncId(Ae,Te,Xe);const{actions:St}=Ae;null!=Te&&(null===(Ct=St[St.length-1])||void 0===Ct?void 0:Ct.id)!==Te&&(Qe.clearImmediate(Te),Ae._scheduled=void 0)}});var bn=N(4986),Kt=N(4482),Zn=N(8421),wn=N(5403),Hi=N(5963);function Vi(At,Ae=bn.z){return function Vr(At){return(0,Kt.e)((Ae,Te)=>{let Xe=!1,Ct=null,St=null,Tn=!1;const Hn=()=>{if(St?.unsubscribe(),St=null,Xe){Xe=!1;const gi=Ct;Ct=null,Te.next(gi)}Tn&&Te.complete()},ri=()=>{St=null,Tn&&Te.complete()};Ae.subscribe((0,wn.x)(Te,gi=>{Xe=!0,Ct=gi,St||(0,Zn.Xf)(At(gi)).subscribe(St=(0,wn.x)(Te,Hn,ri))},()=>{Tn=!0,(!Xe||!St||St.closed)&&Te.complete()}))})}(()=>(0,Hi.H)(At,Ae))}var Hr=N(9300),en=N(2722),Ot=N(8675),Jt=N(3353),ln=N(6895),fn=N(445);const qt=["contentWrapper"],On=["*"],Nn=new O.OlP("VIRTUAL_SCROLL_STRATEGY");let mi=(()=>{class At{constructor(Te,Xe,Ct){this._ngZone=Te,this._platform=Xe,this._scrolled=new u.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Ct}register(Te){this.scrollContainers.has(Te)||this.scrollContainers.set(Te,Te.elementScrolled().subscribe(()=>this._scrolled.next(Te)))}deregister(Te){const Xe=this.scrollContainers.get(Te);Xe&&(Xe.unsubscribe(),this.scrollContainers.delete(Te))}scrolled(Te=20){return this._platform.isBrowser?new Y.y(Xe=>{this._globalSubscription||this._addGlobalListener();const Ct=Te>0?this._scrolled.pipe(Vi(Te)).subscribe(Xe):this._scrolled.subscribe(Xe);return this._scrolledCount++,()=>{Ct.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,fe.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Te,Xe)=>this.deregister(Xe)),this._scrolled.complete()}ancestorScrolled(Te,Xe){const Ct=this.getAncestorScrollContainers(Te);return this.scrolled(Xe).pipe((0,Hr.h)(St=>!St||Ct.indexOf(St)>-1))}getAncestorScrollContainers(Te){const Xe=[];return this.scrollContainers.forEach((Ct,St)=>{this._scrollableContainsElement(St,Te)&&Xe.push(St)}),Xe}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Te,Xe){let Ct=(0,o.fI)(Xe),St=Te.getElementRef().nativeElement;do{if(Ct==St)return!0}while(Ct=Ct.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Te=this._getWindow();return(0,i.R)(Te.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(O.R0b),O.LFG(Jt.t4),O.LFG(ln.K0,8))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})(),pi=(()=>{class At{constructor(Te,Xe,Ct,St){this.elementRef=Te,this.scrollDispatcher=Xe,this.ngZone=Ct,this.dir=St,this._destroyed=new u.x,this._elementScrolled=new Y.y(Tn=>this.ngZone.runOutsideAngular(()=>(0,i.R)(this.elementRef.nativeElement,"scroll").pipe((0,en.R)(this._destroyed)).subscribe(Tn)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Te){const Xe=this.elementRef.nativeElement,Ct=this.dir&&"rtl"==this.dir.value;null==Te.left&&(Te.left=Ct?Te.end:Te.start),null==Te.right&&(Te.right=Ct?Te.start:Te.end),null!=Te.bottom&&(Te.top=Xe.scrollHeight-Xe.clientHeight-Te.bottom),Ct&&0!=(0,Jt._i)()?(null!=Te.left&&(Te.right=Xe.scrollWidth-Xe.clientWidth-Te.left),2==(0,Jt._i)()?Te.left=Te.right:1==(0,Jt._i)()&&(Te.left=Te.right?-Te.right:Te.right)):null!=Te.right&&(Te.left=Xe.scrollWidth-Xe.clientWidth-Te.right),this._applyScrollToOptions(Te)}_applyScrollToOptions(Te){const Xe=this.elementRef.nativeElement;(0,Jt.Mq)()?Xe.scrollTo(Te):(null!=Te.top&&(Xe.scrollTop=Te.top),null!=Te.left&&(Xe.scrollLeft=Te.left))}measureScrollOffset(Te){const Xe="left",St=this.elementRef.nativeElement;if("top"==Te)return St.scrollTop;if("bottom"==Te)return St.scrollHeight-St.clientHeight-St.scrollTop;const Tn=this.dir&&"rtl"==this.dir.value;return"start"==Te?Te=Tn?"right":Xe:"end"==Te&&(Te=Tn?Xe:"right"),Tn&&2==(0,Jt._i)()?Te==Xe?St.scrollWidth-St.clientWidth-St.scrollLeft:St.scrollLeft:Tn&&1==(0,Jt._i)()?Te==Xe?St.scrollLeft+St.scrollWidth-St.clientWidth:-St.scrollLeft:Te==Xe?St.scrollLeft:St.scrollWidth-St.clientWidth-St.scrollLeft}}return At.\u0275fac=function(Te){return new(Te||At)(O.Y36(O.SBq),O.Y36(mi),O.Y36(O.R0b),O.Y36(fn.Is,8))},At.\u0275dir=O.lG2({type:At,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),At})(),Pn=(()=>{class At{constructor(Te,Xe,Ct){this._platform=Te,this._change=new u.x,this._changeListener=St=>{this._change.next(St)},this._document=Ct,Xe.runOutsideAngular(()=>{if(Te.isBrowser){const St=this._getWindow();St.addEventListener("resize",this._changeListener),St.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Te=this._getWindow();Te.removeEventListener("resize",this._changeListener),Te.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Te={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Te}getViewportRect(){const Te=this.getViewportScrollPosition(),{width:Xe,height:Ct}=this.getViewportSize();return{top:Te.top,left:Te.left,bottom:Te.top+Ct,right:Te.left+Xe,height:Ct,width:Xe}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Te=this._document,Xe=this._getWindow(),Ct=Te.documentElement,St=Ct.getBoundingClientRect();return{top:-St.top||Te.body.scrollTop||Xe.scrollY||Ct.scrollTop||0,left:-St.left||Te.body.scrollLeft||Xe.scrollX||Ct.scrollLeft||0}}change(Te=20){return Te>0?this._change.pipe(Vi(Te)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Te=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Te.innerWidth,height:Te.innerHeight}:{width:0,height:0}}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(Jt.t4),O.LFG(O.R0b),O.LFG(ln.K0,8))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})();const mn=new O.OlP("VIRTUAL_SCROLLABLE");let kn=(()=>{class At extends pi{constructor(Te,Xe,Ct,St){super(Te,Xe,Ct,St)}measureViewportSize(Te){const Xe=this.elementRef.nativeElement;return"horizontal"===Te?Xe.clientWidth:Xe.clientHeight}}return At.\u0275fac=function(Te){return new(Te||At)(O.Y36(O.SBq),O.Y36(mi),O.Y36(O.R0b),O.Y36(fn.Is,8))},At.\u0275dir=O.lG2({type:At,features:[O.qOj]}),At})();const $n=typeof requestAnimationFrame<"u"?Ke:Ft;let mr=(()=>{class At extends kn{get orientation(){return this._orientation}set orientation(Te){this._orientation!==Te&&(this._orientation=Te,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(Te){this._appendOnly=(0,o.Ig)(Te)}constructor(Te,Xe,Ct,St,Tn,Hn,ri,gi){super(Te,Hn,Ct,Tn),this.elementRef=Te,this._changeDetectorRef=Xe,this._scrollStrategy=St,this.scrollable=gi,this._platform=(0,O.f3M)(Jt.t4),this._detachedSubject=new u.x,this._renderedRangeSubject=new u.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Y.y(xi=>this._scrollStrategy.scrolledIndexChange.subscribe(Sn=>Promise.resolve().then(()=>this.ngZone.run(()=>xi.next(Sn))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=de.w0.EMPTY,this._viewportChanges=ri.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,Ot.O)(null),Vi(0,$n)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(Te){this.ngZone.runOutsideAngular(()=>{this._forOf=Te,this._forOf.dataStream.pipe((0,en.R)(this._detachedSubject)).subscribe(Xe=>{const Ct=Xe.length;Ct!==this._dataLength&&(this._dataLength=Ct,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(Te){return this.getElementRef().nativeElement.getBoundingClientRect()[Te]}setTotalContentSize(Te){this._totalContentSize!==Te&&(this._totalContentSize=Te,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(Te){(function ii(At,Ae){return At.start==Ae.start&&At.end==Ae.end})(this._renderedRange,Te)||(this.appendOnly&&(Te={start:0,end:Math.max(this._renderedRange.end,Te.end)}),this._renderedRangeSubject.next(this._renderedRange=Te),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(Te,Xe="to-start"){Te=this.appendOnly&&"to-start"===Xe?0:Te;const St="horizontal"==this.orientation,Tn=St?"X":"Y";let ri=`translate${Tn}(${Number((St&&this.dir&&"rtl"==this.dir.value?-1:1)*Te)}px)`;this._renderedContentOffset=Te,"to-end"===Xe&&(ri+=` translate${Tn}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=ri&&(this._renderedContentTransform=ri,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(Te,Xe="auto"){const Ct={behavior:Xe};"horizontal"===this.orientation?Ct.start=Te:Ct.top=Te,this.scrollable.scrollTo(Ct)}scrollToIndex(Te,Xe="auto"){this._scrollStrategy.scrollToIndex(Te,Xe)}measureScrollOffset(Te){let Xe;return Xe=this.scrollable==this?Ct=>super.measureScrollOffset(Ct):Ct=>this.scrollable.measureScrollOffset(Ct),Math.max(0,Xe(Te??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(Te){let Xe;const Tn="rtl"==this.dir?.value;Xe="start"==Te?Tn?"right":"left":"end"==Te?Tn?"left":"right":Te||("horizontal"===this.orientation?"left":"top");const Hn=this.scrollable.measureBoundingClientRectWithScrollOffset(Xe);return this.elementRef.nativeElement.getBoundingClientRect()[Xe]-Hn}measureRenderedContentSize(){const Te=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?Te.offsetWidth:Te.offsetHeight}measureRangeSize(Te){return this._forOf?this._forOf.measureRangeSize(Te,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(Te){Te&&this._runAfterChangeDetection.push(Te),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const Te=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const Xe of Te)Xe()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return At.\u0275fac=function(Te){return new(Te||At)(O.Y36(O.SBq),O.Y36(O.sBO),O.Y36(O.R0b),O.Y36(Nn,8),O.Y36(fn.Is,8),O.Y36(mi),O.Y36(Pn),O.Y36(mn,8))},At.\u0275cmp=O.Xpm({type:At,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(Te,Xe){if(1&Te&&O.Gf(qt,7),2&Te){let Ct;O.iGM(Ct=O.CRH())&&(Xe._contentWrapper=Ct.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(Te,Xe){2&Te&&O.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===Xe.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==Xe.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[O._Bn([{provide:pi,useFactory:(Ae,Te)=>Ae||Te,deps:[[new O.FiY,new O.tBr(mn)],At]}]),O.qOj,O.jDz],ngContentSelectors:On,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(Te,Xe){1&Te&&(O.F$t(),O.TgZ(0,"div",0,1),O.Hsn(2),O.qZA(),O._UZ(3,"div",2)),2&Te&&(O.xp6(3),O.Udp("width",Xe._totalContentWidth)("height",Xe._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),At})(),Fe=(()=>{class At{}return At.\u0275fac=function(Te){return new(Te||At)},At.\u0275mod=O.oAB({type:At}),At.\u0275inj=O.cJS({}),At})(),Yt=(()=>{class At{}return At.\u0275fac=function(Te){return new(Te||At)},At.\u0275mod=O.oAB({type:At}),At.\u0275inj=O.cJS({imports:[fn.vT,Fe,mr,fn.vT,Fe]}),At})();var ut=N(4080),It=N(6451),rt=N(5698);const Vt=(0,Jt.Mq)();class di{constructor(Ae,Te){this._viewportRuler=Ae,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Te}attach(){}enable(){if(this._canBeEnabled()){const Ae=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Ae.style.left||"",this._previousHTMLStyles.top=Ae.style.top||"",Ae.style.left=(0,o.HM)(-this._previousScrollPosition.left),Ae.style.top=(0,o.HM)(-this._previousScrollPosition.top),Ae.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Ae=this._document.documentElement,Xe=Ae.style,Ct=this._document.body.style,St=Xe.scrollBehavior||"",Tn=Ct.scrollBehavior||"";this._isEnabled=!1,Xe.left=this._previousHTMLStyles.left,Xe.top=this._previousHTMLStyles.top,Ae.classList.remove("cdk-global-scrollblock"),Vt&&(Xe.scrollBehavior=Ct.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Vt&&(Xe.scrollBehavior=St,Ct.scrollBehavior=Tn)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Te=this._document.body,Xe=this._viewportRuler.getViewportSize();return Te.scrollHeight>Xe.height||Te.scrollWidth>Xe.width}}class bi{constructor(Ae,Te,Xe,Ct){this._scrollDispatcher=Ae,this._ngZone=Te,this._viewportRuler=Xe,this._config=Ct,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Ae){this._overlayRef=Ae}enable(){if(this._scrollSubscription)return;const Ae=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Ae.subscribe(()=>{const Te=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Te-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Ae.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _r{enable(){}disable(){}attach(){}}function pr(At,Ae){return Ae.some(Te=>At.bottom<Te.top||At.top>Te.bottom||At.right<Te.left||At.left>Te.right)}function bo(At,Ae){return Ae.some(Te=>At.top<Te.top||At.bottom>Te.bottom||At.left<Te.left||At.right>Te.right)}class Yi{constructor(Ae,Te,Xe,Ct){this._scrollDispatcher=Ae,this._viewportRuler=Te,this._ngZone=Xe,this._config=Ct,this._scrollSubscription=null}attach(Ae){this._overlayRef=Ae}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Te=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Xe,height:Ct}=this._viewportRuler.getViewportSize();pr(Te,[{width:Xe,height:Ct,bottom:Ct,right:Xe,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let wr=(()=>{class At{constructor(Te,Xe,Ct,St){this._scrollDispatcher=Te,this._viewportRuler=Xe,this._ngZone=Ct,this.noop=()=>new _r,this.close=Tn=>new bi(this._scrollDispatcher,this._ngZone,this._viewportRuler,Tn),this.block=()=>new di(this._viewportRuler,this._document),this.reposition=Tn=>new Yi(this._scrollDispatcher,this._viewportRuler,this._ngZone,Tn),this._document=St}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(mi),O.LFG(Pn),O.LFG(O.R0b),O.LFG(ln.K0))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})();class Gr{constructor(Ae){if(this.scrollStrategy=new _r,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Ae){const Te=Object.keys(Ae);for(const Xe of Te)void 0!==Ae[Xe]&&(this[Xe]=Ae[Xe])}}}class ao{constructor(Ae,Te,Xe,Ct,St){this.offsetX=Xe,this.offsetY=Ct,this.panelClass=St,this.originX=Ae.originX,this.originY=Ae.originY,this.overlayX=Te.overlayX,this.overlayY=Te.overlayY}}class Qt{constructor(Ae,Te){this.connectionPair=Ae,this.scrollableViewProperties=Te}}let he=(()=>{class At{constructor(Te){this._attachedOverlays=[],this._document=Te}ngOnDestroy(){this.detach()}add(Te){this.remove(Te),this._attachedOverlays.push(Te)}remove(Te){const Xe=this._attachedOverlays.indexOf(Te);Xe>-1&&this._attachedOverlays.splice(Xe,1),0===this._attachedOverlays.length&&this.detach()}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(ln.K0))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})(),re=(()=>{class At extends he{constructor(Te,Xe){super(Te),this._ngZone=Xe,this._keydownListener=Ct=>{const St=this._attachedOverlays;for(let Tn=St.length-1;Tn>-1;Tn--)if(St[Tn]._keydownEvents.observers.length>0){const Hn=St[Tn]._keydownEvents;this._ngZone?this._ngZone.run(()=>Hn.next(Ct)):Hn.next(Ct);break}}}add(Te){super.add(Te),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(ln.K0),O.LFG(O.R0b,8))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})(),_e=(()=>{class At extends he{constructor(Te,Xe,Ct){super(Te),this._platform=Xe,this._ngZone=Ct,this._cursorStyleIsSet=!1,this._pointerDownListener=St=>{this._pointerDownEventTarget=(0,Jt.sA)(St)},this._clickListener=St=>{const Tn=(0,Jt.sA)(St),Hn="click"===St.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Tn;this._pointerDownEventTarget=null;const ri=this._attachedOverlays.slice();for(let gi=ri.length-1;gi>-1;gi--){const xi=ri[gi];if(xi._outsidePointerEvents.observers.length<1||!xi.hasAttached())continue;if(xi.overlayElement.contains(Tn)||xi.overlayElement.contains(Hn))break;const Sn=xi._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Sn.next(St)):Sn.next(St)}}}add(Te){if(super.add(Te),!this._isAttached){const Xe=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Xe)):this._addEventListeners(Xe),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Xe.style.cursor,Xe.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Te=this._document.body;Te.removeEventListener("pointerdown",this._pointerDownListener,!0),Te.removeEventListener("click",this._clickListener,!0),Te.removeEventListener("auxclick",this._clickListener,!0),Te.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Te.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(Te){Te.addEventListener("pointerdown",this._pointerDownListener,!0),Te.addEventListener("click",this._clickListener,!0),Te.addEventListener("auxclick",this._clickListener,!0),Te.addEventListener("contextmenu",this._clickListener,!0)}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(ln.K0),O.LFG(Jt.t4),O.LFG(O.R0b,8))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})(),Le=(()=>{class At{constructor(Te,Xe){this._platform=Xe,this._document=Te}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Te="cdk-overlay-container";if(this._platform.isBrowser||(0,Jt.Oy)()){const Ct=this._document.querySelectorAll(`.${Te}[platform="server"], .${Te}[platform="test"]`);for(let St=0;St<Ct.length;St++)Ct[St].remove()}const Xe=this._document.createElement("div");Xe.classList.add(Te),(0,Jt.Oy)()?Xe.setAttribute("platform","test"):this._platform.isBrowser||Xe.setAttribute("platform","server"),this._document.body.appendChild(Xe),this._containerElement=Xe}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(ln.K0),O.LFG(Jt.t4))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})();class Ze{constructor(Ae,Te,Xe,Ct,St,Tn,Hn,ri,gi,xi=!1){this._portalOutlet=Ae,this._host=Te,this._pane=Xe,this._config=Ct,this._ngZone=St,this._keyboardDispatcher=Tn,this._document=Hn,this._location=ri,this._outsideClickDispatcher=gi,this._animationsDisabled=xi,this._backdropElement=null,this._backdropClick=new u.x,this._attachments=new u.x,this._detachments=new u.x,this._locationChanges=de.w0.EMPTY,this._backdropClickHandler=Sn=>this._backdropClick.next(Sn),this._backdropTransitionendHandler=Sn=>{this._disposeBackdrop(Sn.target)},this._keydownEvents=new u.x,this._outsidePointerEvents=new u.x,Ct.scrollStrategy&&(this._scrollStrategy=Ct.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Ct.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Ae){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const Te=this._portalOutlet.attach(Ae);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,rt.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof Te?.onDestroy&&Te.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),Te}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Ae=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Ae}dispose(){const Ae=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Ae&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Ae){Ae!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Ae,this.hasAttached()&&(Ae.attach(this),this.updatePosition()))}updateSize(Ae){this._config={...this._config,...Ae},this._updateElementSize()}setDirection(Ae){this._config={...this._config,direction:Ae},this._updateElementDirection()}addPanelClass(Ae){this._pane&&this._toggleClasses(this._pane,Ae,!0)}removePanelClass(Ae){this._pane&&this._toggleClasses(this._pane,Ae,!1)}getDirection(){const Ae=this._config.direction;return Ae?"string"==typeof Ae?Ae:Ae.value:"ltr"}updateScrollStrategy(Ae){Ae!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Ae,this.hasAttached()&&(Ae.attach(this),Ae.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Ae=this._pane.style;Ae.width=(0,o.HM)(this._config.width),Ae.height=(0,o.HM)(this._config.height),Ae.minWidth=(0,o.HM)(this._config.minWidth),Ae.minHeight=(0,o.HM)(this._config.minHeight),Ae.maxWidth=(0,o.HM)(this._config.maxWidth),Ae.maxHeight=(0,o.HM)(this._config.maxHeight)}_togglePointerEvents(Ae){this._pane.style.pointerEvents=Ae?"":"none"}_attachBackdrop(){const Ae="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Ae)})}):this._backdropElement.classList.add(Ae)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Ae=this._backdropElement;if(Ae){if(this._animationsDisabled)return void this._disposeBackdrop(Ae);Ae.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Ae.addEventListener("transitionend",this._backdropTransitionendHandler)}),Ae.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Ae)},500))}}_toggleClasses(Ae,Te,Xe){const Ct=(0,o.Eq)(Te||[]).filter(St=>!!St);Ct.length&&(Xe?Ae.classList.add(...Ct):Ae.classList.remove(...Ct))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Ae=this._ngZone.onStable.pipe((0,en.R)((0,It.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Ae.unsubscribe())})})}_disposeScrollStrategy(){const Ae=this._scrollStrategy;Ae&&(Ae.disable(),Ae.detach&&Ae.detach())}_disposeBackdrop(Ae){Ae&&(Ae.removeEventListener("click",this._backdropClickHandler),Ae.removeEventListener("transitionend",this._backdropTransitionendHandler),Ae.remove(),this._backdropElement===Ae&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Pe="cdk-overlay-connected-position-bounding-box",ot=/([A-Za-z%]+)$/;class Nt{get positions(){return this._preferredPositions}constructor(Ae,Te,Xe,Ct,St){this._viewportRuler=Te,this._document=Xe,this._platform=Ct,this._overlayContainer=St,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new u.x,this._resizeSubscription=de.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Ae)}attach(Ae){this._validatePositions(),Ae.hostElement.classList.add(Pe),this._overlayRef=Ae,this._boundingBox=Ae.hostElement,this._pane=Ae.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Ae=this._originRect,Te=this._overlayRect,Xe=this._viewportRect,Ct=this._containerRect,St=[];let Tn;for(let Hn of this._preferredPositions){let ri=this._getOriginPoint(Ae,Ct,Hn),gi=this._getOverlayPoint(ri,Te,Hn),xi=this._getOverlayFit(gi,Te,Xe,Hn);if(xi.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Hn,ri);this._canFitWithFlexibleDimensions(xi,gi,Xe)?St.push({position:Hn,origin:ri,overlayRect:Te,boundingBoxRect:this._calculateBoundingBoxRect(ri,Hn)}):(!Tn||Tn.overlayFit.visibleArea<xi.visibleArea)&&(Tn={overlayFit:xi,overlayPoint:gi,originPoint:ri,position:Hn,overlayRect:Te})}if(St.length){let Hn=null,ri=-1;for(const gi of St){const xi=gi.boundingBoxRect.width*gi.boundingBoxRect.height*(gi.position.weight||1);xi>ri&&(ri=xi,Hn=gi)}return this._isPushed=!1,void this._applyPosition(Hn.position,Hn.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Tn.position,Tn.originPoint);this._applyPosition(Tn.position,Tn.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&rn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Pe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Ae=this._lastPosition;if(Ae){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Te=this._getOriginPoint(this._originRect,this._containerRect,Ae);this._applyPosition(Ae,Te)}else this.apply()}withScrollableContainers(Ae){return this._scrollables=Ae,this}withPositions(Ae){return this._preferredPositions=Ae,-1===Ae.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Ae){return this._viewportMargin=Ae,this}withFlexibleDimensions(Ae=!0){return this._hasFlexibleDimensions=Ae,this}withGrowAfterOpen(Ae=!0){return this._growAfterOpen=Ae,this}withPush(Ae=!0){return this._canPush=Ae,this}withLockedPosition(Ae=!0){return this._positionLocked=Ae,this}setOrigin(Ae){return this._origin=Ae,this}withDefaultOffsetX(Ae){return this._offsetX=Ae,this}withDefaultOffsetY(Ae){return this._offsetY=Ae,this}withTransformOriginOn(Ae){return this._transformOriginSelector=Ae,this}_getOriginPoint(Ae,Te,Xe){let Ct,St;if("center"==Xe.originX)Ct=Ae.left+Ae.width/2;else{const Tn=this._isRtl()?Ae.right:Ae.left,Hn=this._isRtl()?Ae.left:Ae.right;Ct="start"==Xe.originX?Tn:Hn}return Te.left<0&&(Ct-=Te.left),St="center"==Xe.originY?Ae.top+Ae.height/2:"top"==Xe.originY?Ae.top:Ae.bottom,Te.top<0&&(St-=Te.top),{x:Ct,y:St}}_getOverlayPoint(Ae,Te,Xe){let Ct,St;return Ct="center"==Xe.overlayX?-Te.width/2:"start"===Xe.overlayX?this._isRtl()?-Te.width:0:this._isRtl()?0:-Te.width,St="center"==Xe.overlayY?-Te.height/2:"top"==Xe.overlayY?0:-Te.height,{x:Ae.x+Ct,y:Ae.y+St}}_getOverlayFit(Ae,Te,Xe,Ct){const St=et(Te);let{x:Tn,y:Hn}=Ae,ri=this._getOffset(Ct,"x"),gi=this._getOffset(Ct,"y");ri&&(Tn+=ri),gi&&(Hn+=gi);let ci=0-Hn,Ri=Hn+St.height-Xe.height,Pi=this._subtractOverflows(St.width,0-Tn,Tn+St.width-Xe.width),yr=this._subtractOverflows(St.height,ci,Ri),Xi=Pi*yr;return{visibleArea:Xi,isCompletelyWithinViewport:St.width*St.height===Xi,fitsInViewportVertically:yr===St.height,fitsInViewportHorizontally:Pi==St.width}}_canFitWithFlexibleDimensions(Ae,Te,Xe){if(this._hasFlexibleDimensions){const Ct=Xe.bottom-Te.y,St=Xe.right-Te.x,Tn=dn(this._overlayRef.getConfig().minHeight),Hn=dn(this._overlayRef.getConfig().minWidth);return(Ae.fitsInViewportVertically||null!=Tn&&Tn<=Ct)&&(Ae.fitsInViewportHorizontally||null!=Hn&&Hn<=St)}return!1}_pushOverlayOnScreen(Ae,Te,Xe){if(this._previousPushAmount&&this._positionLocked)return{x:Ae.x+this._previousPushAmount.x,y:Ae.y+this._previousPushAmount.y};const Ct=et(Te),St=this._viewportRect,Tn=Math.max(Ae.x+Ct.width-St.width,0),Hn=Math.max(Ae.y+Ct.height-St.height,0),ri=Math.max(St.top-Xe.top-Ae.y,0),gi=Math.max(St.left-Xe.left-Ae.x,0);let xi=0,Sn=0;return xi=Ct.width<=St.width?gi||-Tn:Ae.x<this._viewportMargin?St.left-Xe.left-Ae.x:0,Sn=Ct.height<=St.height?ri||-Hn:Ae.y<this._viewportMargin?St.top-Xe.top-Ae.y:0,this._previousPushAmount={x:xi,y:Sn},{x:Ae.x+xi,y:Ae.y+Sn}}_applyPosition(Ae,Te){if(this._setTransformOrigin(Ae),this._setOverlayElementStyles(Te,Ae),this._setBoundingBoxStyles(Te,Ae),Ae.panelClass&&this._addPanelClasses(Ae.panelClass),this._lastPosition=Ae,this._positionChanges.observers.length){const Xe=this._getScrollVisibility(),Ct=new Qt(Ae,Xe);this._positionChanges.next(Ct)}this._isInitialRender=!1}_setTransformOrigin(Ae){if(!this._transformOriginSelector)return;const Te=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Xe,Ct=Ae.overlayY;Xe="center"===Ae.overlayX?"center":this._isRtl()?"start"===Ae.overlayX?"right":"left":"start"===Ae.overlayX?"left":"right";for(let St=0;St<Te.length;St++)Te[St].style.transformOrigin=`${Xe} ${Ct}`}_calculateBoundingBoxRect(Ae,Te){const Xe=this._viewportRect,Ct=this._isRtl();let St,Tn,Hn,xi,Sn,ci;if("top"===Te.overlayY)Tn=Ae.y,St=Xe.height-Tn+this._viewportMargin;else if("bottom"===Te.overlayY)Hn=Xe.height-Ae.y+2*this._viewportMargin,St=Xe.height-Hn+this._viewportMargin;else{const Ri=Math.min(Xe.bottom-Ae.y+Xe.top,Ae.y),Pi=this._lastBoundingBoxSize.height;St=2*Ri,Tn=Ae.y-Ri,St>Pi&&!this._isInitialRender&&!this._growAfterOpen&&(Tn=Ae.y-Pi/2)}if("end"===Te.overlayX&&!Ct||"start"===Te.overlayX&&Ct)ci=Xe.width-Ae.x+this._viewportMargin,xi=Ae.x-this._viewportMargin;else if("start"===Te.overlayX&&!Ct||"end"===Te.overlayX&&Ct)Sn=Ae.x,xi=Xe.right-Ae.x;else{const Ri=Math.min(Xe.right-Ae.x+Xe.left,Ae.x),Pi=this._lastBoundingBoxSize.width;xi=2*Ri,Sn=Ae.x-Ri,xi>Pi&&!this._isInitialRender&&!this._growAfterOpen&&(Sn=Ae.x-Pi/2)}return{top:Tn,left:Sn,bottom:Hn,right:ci,width:xi,height:St}}_setBoundingBoxStyles(Ae,Te){const Xe=this._calculateBoundingBoxRect(Ae,Te);!this._isInitialRender&&!this._growAfterOpen&&(Xe.height=Math.min(Xe.height,this._lastBoundingBoxSize.height),Xe.width=Math.min(Xe.width,this._lastBoundingBoxSize.width));const Ct={};if(this._hasExactPosition())Ct.top=Ct.left="0",Ct.bottom=Ct.right=Ct.maxHeight=Ct.maxWidth="",Ct.width=Ct.height="100%";else{const St=this._overlayRef.getConfig().maxHeight,Tn=this._overlayRef.getConfig().maxWidth;Ct.height=(0,o.HM)(Xe.height),Ct.top=(0,o.HM)(Xe.top),Ct.bottom=(0,o.HM)(Xe.bottom),Ct.width=(0,o.HM)(Xe.width),Ct.left=(0,o.HM)(Xe.left),Ct.right=(0,o.HM)(Xe.right),Ct.alignItems="center"===Te.overlayX?"center":"end"===Te.overlayX?"flex-end":"flex-start",Ct.justifyContent="center"===Te.overlayY?"center":"bottom"===Te.overlayY?"flex-end":"flex-start",St&&(Ct.maxHeight=(0,o.HM)(St)),Tn&&(Ct.maxWidth=(0,o.HM)(Tn))}this._lastBoundingBoxSize=Xe,rn(this._boundingBox.style,Ct)}_resetBoundingBoxStyles(){rn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){rn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Ae,Te){const Xe={},Ct=this._hasExactPosition(),St=this._hasFlexibleDimensions,Tn=this._overlayRef.getConfig();if(Ct){const xi=this._viewportRuler.getViewportScrollPosition();rn(Xe,this._getExactOverlayY(Te,Ae,xi)),rn(Xe,this._getExactOverlayX(Te,Ae,xi))}else Xe.position="static";let Hn="",ri=this._getOffset(Te,"x"),gi=this._getOffset(Te,"y");ri&&(Hn+=`translateX(${ri}px) `),gi&&(Hn+=`translateY(${gi}px)`),Xe.transform=Hn.trim(),Tn.maxHeight&&(Ct?Xe.maxHeight=(0,o.HM)(Tn.maxHeight):St&&(Xe.maxHeight="")),Tn.maxWidth&&(Ct?Xe.maxWidth=(0,o.HM)(Tn.maxWidth):St&&(Xe.maxWidth="")),rn(this._pane.style,Xe)}_getExactOverlayY(Ae,Te,Xe){let Ct={top:"",bottom:""},St=this._getOverlayPoint(Te,this._overlayRect,Ae);return this._isPushed&&(St=this._pushOverlayOnScreen(St,this._overlayRect,Xe)),"bottom"===Ae.overlayY?Ct.bottom=this._document.documentElement.clientHeight-(St.y+this._overlayRect.height)+"px":Ct.top=(0,o.HM)(St.y),Ct}_getExactOverlayX(Ae,Te,Xe){let Tn,Ct={left:"",right:""},St=this._getOverlayPoint(Te,this._overlayRect,Ae);return this._isPushed&&(St=this._pushOverlayOnScreen(St,this._overlayRect,Xe)),Tn=this._isRtl()?"end"===Ae.overlayX?"left":"right":"end"===Ae.overlayX?"right":"left","right"===Tn?Ct.right=this._document.documentElement.clientWidth-(St.x+this._overlayRect.width)+"px":Ct.left=(0,o.HM)(St.x),Ct}_getScrollVisibility(){const Ae=this._getOriginRect(),Te=this._pane.getBoundingClientRect(),Xe=this._scrollables.map(Ct=>Ct.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bo(Ae,Xe),isOriginOutsideView:pr(Ae,Xe),isOverlayClipped:bo(Te,Xe),isOverlayOutsideView:pr(Te,Xe)}}_subtractOverflows(Ae,...Te){return Te.reduce((Xe,Ct)=>Xe-Math.max(Ct,0),Ae)}_getNarrowedViewportRect(){const Ae=this._document.documentElement.clientWidth,Te=this._document.documentElement.clientHeight,Xe=this._viewportRuler.getViewportScrollPosition();return{top:Xe.top+this._viewportMargin,left:Xe.left+this._viewportMargin,right:Xe.left+Ae-this._viewportMargin,bottom:Xe.top+Te-this._viewportMargin,width:Ae-2*this._viewportMargin,height:Te-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Ae,Te){return"x"===Te?null==Ae.offsetX?this._offsetX:Ae.offsetX:null==Ae.offsetY?this._offsetY:Ae.offsetY}_validatePositions(){}_addPanelClasses(Ae){this._pane&&(0,o.Eq)(Ae).forEach(Te=>{""!==Te&&-1===this._appliedPanelClasses.indexOf(Te)&&(this._appliedPanelClasses.push(Te),this._pane.classList.add(Te))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Ae=>{this._pane.classList.remove(Ae)}),this._appliedPanelClasses=[])}_getOriginRect(){const Ae=this._origin;if(Ae instanceof O.SBq)return Ae.nativeElement.getBoundingClientRect();if(Ae instanceof Element)return Ae.getBoundingClientRect();const Te=Ae.width||0,Xe=Ae.height||0;return{top:Ae.y,bottom:Ae.y+Xe,left:Ae.x,right:Ae.x+Te,height:Xe,width:Te}}}function rn(At,Ae){for(let Te in Ae)Ae.hasOwnProperty(Te)&&(At[Te]=Ae[Te]);return At}function dn(At){if("number"!=typeof At&&null!=At){const[Ae,Te]=At.split(ot);return Te&&"px"!==Te?null:parseFloat(Ae)}return At||null}function et(At){return{top:Math.floor(At.top),right:Math.floor(At.right),bottom:Math.floor(At.bottom),left:Math.floor(At.left),width:Math.floor(At.width),height:Math.floor(At.height)}}const tt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],Ye=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],bt="cdk-global-overlay-wrapper";class mt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Ae){const Te=Ae.getConfig();this._overlayRef=Ae,this._width&&!Te.width&&Ae.updateSize({width:this._width}),this._height&&!Te.height&&Ae.updateSize({height:this._height}),Ae.hostElement.classList.add(bt),this._isDisposed=!1}top(Ae=""){return this._bottomOffset="",this._topOffset=Ae,this._alignItems="flex-start",this}left(Ae=""){return this._xOffset=Ae,this._xPosition="left",this}bottom(Ae=""){return this._topOffset="",this._bottomOffset=Ae,this._alignItems="flex-end",this}right(Ae=""){return this._xOffset=Ae,this._xPosition="right",this}start(Ae=""){return this._xOffset=Ae,this._xPosition="start",this}end(Ae=""){return this._xOffset=Ae,this._xPosition="end",this}width(Ae=""){return this._overlayRef?this._overlayRef.updateSize({width:Ae}):this._width=Ae,this}height(Ae=""){return this._overlayRef?this._overlayRef.updateSize({height:Ae}):this._height=Ae,this}centerHorizontally(Ae=""){return this.left(Ae),this._xPosition="center",this}centerVertically(Ae=""){return this.top(Ae),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Ae=this._overlayRef.overlayElement.style,Te=this._overlayRef.hostElement.style,Xe=this._overlayRef.getConfig(),{width:Ct,height:St,maxWidth:Tn,maxHeight:Hn}=Xe,ri=!("100%"!==Ct&&"100vw"!==Ct||Tn&&"100%"!==Tn&&"100vw"!==Tn),gi=!("100%"!==St&&"100vh"!==St||Hn&&"100%"!==Hn&&"100vh"!==Hn),xi=this._xPosition,Sn=this._xOffset,ci="rtl"===this._overlayRef.getConfig().direction;let Ri="",Pi="",yr="";ri?yr="flex-start":"center"===xi?(yr="center",ci?Pi=Sn:Ri=Sn):ci?"left"===xi||"end"===xi?(yr="flex-end",Ri=Sn):("right"===xi||"start"===xi)&&(yr="flex-start",Pi=Sn):"left"===xi||"start"===xi?(yr="flex-start",Ri=Sn):("right"===xi||"end"===xi)&&(yr="flex-end",Pi=Sn),Ae.position=this._cssPosition,Ae.marginLeft=ri?"0":Ri,Ae.marginTop=gi?"0":this._topOffset,Ae.marginBottom=this._bottomOffset,Ae.marginRight=ri?"0":Pi,Te.justifyContent=yr,Te.alignItems=gi?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Ae=this._overlayRef.overlayElement.style,Te=this._overlayRef.hostElement,Xe=Te.style;Te.classList.remove(bt),Xe.justifyContent=Xe.alignItems=Ae.marginTop=Ae.marginBottom=Ae.marginLeft=Ae.marginRight=Ae.position="",this._overlayRef=null,this._isDisposed=!0}}let cn=(()=>{class At{constructor(Te,Xe,Ct,St){this._viewportRuler=Te,this._document=Xe,this._platform=Ct,this._overlayContainer=St}global(){return new mt}flexibleConnectedTo(Te){return new Nt(Te,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(Pn),O.LFG(ln.K0),O.LFG(Jt.t4),O.LFG(Le))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})(),xn=0,In=(()=>{class At{constructor(Te,Xe,Ct,St,Tn,Hn,ri,gi,xi,Sn,ci,Ri){this.scrollStrategies=Te,this._overlayContainer=Xe,this._componentFactoryResolver=Ct,this._positionBuilder=St,this._keyboardDispatcher=Tn,this._injector=Hn,this._ngZone=ri,this._document=gi,this._directionality=xi,this._location=Sn,this._outsideClickDispatcher=ci,this._animationsModuleType=Ri}create(Te){const Xe=this._createHostElement(),Ct=this._createPaneElement(Xe),St=this._createPortalOutlet(Ct),Tn=new Gr(Te);return Tn.direction=Tn.direction||this._directionality.value,new Ze(St,Xe,Ct,Tn,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(Te){const Xe=this._document.createElement("div");return Xe.id="cdk-overlay-"+xn++,Xe.classList.add("cdk-overlay-pane"),Te.appendChild(Xe),Xe}_createHostElement(){const Te=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Te),Te}_createPortalOutlet(Te){return this._appRef||(this._appRef=this._injector.get(O.z2F)),new ut.u0(Te,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return At.\u0275fac=function(Te){return new(Te||At)(O.LFG(wr),O.LFG(Le),O.LFG(O._Vd),O.LFG(cn),O.LFG(re),O.LFG(O.zs3),O.LFG(O.R0b),O.LFG(ln.K0),O.LFG(fn.Is),O.LFG(ln.Ye),O.LFG(_e),O.LFG(O.QbO,8))},At.\u0275prov=O.Yz7({token:At,factory:At.\u0275fac,providedIn:"root"}),At})();const cr={provide:new O.OlP("cdk-connected-overlay-scroll-strategy"),deps:[In],useFactory:function Gi(At){return()=>At.scrollStrategies.reposition()}};let Wi=(()=>{class At{}return At.\u0275fac=function(Te){return new(Te||At)},At.\u0275mod=O.oAB({type:At}),At.\u0275inj=O.cJS({providers:[In,cr],imports:[fn.vT,ut.eL,Yt,Yt]}),At})()},3353:(tn,nt,N)=>{"use strict";N.d(nt,{Mq:()=>je,Oy:()=>ct,_i:()=>Be,ht:()=>wt,i$:()=>De,kV:()=>lt,sA:()=>dt,t4:()=>fe});var o=N(1571),O=N(6895);let u;try{u=typeof Intl<"u"&&Intl.v8BreakIterator}catch{u=!1}let we,it,Ke,Je,fe=(()=>{class at{constructor(ht){this._platformId=ht,this.isBrowser=this._platformId?(0,O.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!u)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return at.\u0275fac=function(ht){return new(ht||at)(o.LFG(o.Lbi))},at.\u0275prov=o.Yz7({token:at,factory:at.\u0275fac,providedIn:"root"}),at})();function De(at){return function Ve(){if(null==we&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>we=!0}))}finally{we=we||!1}return we}()?at:!!at.capture}function je(){if(null==Ke){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ke=!1,Ke;if("scrollBehavior"in document.documentElement.style)Ke=!0;else{const at=Element.prototype.scrollTo;Ke=!!at&&!/\{\s*\[native code\]\s*\}/.test(at.toString())}}return Ke}function Be(){if("object"!=typeof document||!document)return 0;if(null==it){const at=document.createElement("div"),Qe=at.style;at.dir="rtl",Qe.width="1px",Qe.overflow="auto",Qe.visibility="hidden",Qe.pointerEvents="none",Qe.position="absolute";const ht=document.createElement("div"),Bt=ht.style;Bt.width="2px",Bt.height="1px",at.appendChild(ht),document.body.appendChild(at),it=0,0===at.scrollLeft&&(at.scrollLeft=1,it=0===at.scrollLeft?1:2),at.remove()}return it}function lt(at){if(function gt(){if(null==Je){const at=typeof document<"u"?document.head:null;Je=!(!at||!at.createShadowRoot&&!at.attachShadow)}return Je}()){const Qe=at.getRootNode?at.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Qe instanceof ShadowRoot)return Qe}return null}function wt(){let at=typeof document<"u"&&document?document.activeElement:null;for(;at&&at.shadowRoot;){const Qe=at.shadowRoot.activeElement;if(Qe===at)break;at=Qe}return at}function dt(at){return at.composedPath?at.composedPath()[0]:at.target}function ct(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(tn,nt,N)=>{"use strict";N.d(nt,{C5:()=>Ve,Pl:()=>wt,UE:()=>De,eL:()=>ct,en:()=>Ke,u0:()=>Be});var o=N(1571),O=N(6895);class we{attach(ht){return this._attachedHost=ht,ht.attach(this)}detach(){let ht=this._attachedHost;null!=ht&&(this._attachedHost=null,ht.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ht){this._attachedHost=ht}}class Ve extends we{constructor(ht,Bt,Ft,kt,bn){super(),this.component=ht,this.viewContainerRef=Bt,this.injector=Ft,this.componentFactoryResolver=kt,this.projectableNodes=bn}}class De extends we{constructor(ht,Bt,Ft,kt){super(),this.templateRef=ht,this.viewContainerRef=Bt,this.context=Ft,this.injector=kt}get origin(){return this.templateRef.elementRef}attach(ht,Bt=this.context){return this.context=Bt,super.attach(ht)}detach(){return this.context=void 0,super.detach()}}class it extends we{constructor(ht){super(),this.element=ht instanceof o.SBq?ht.nativeElement:ht}}class Ke{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ht){return ht instanceof Ve?(this._attachedPortal=ht,this.attachComponentPortal(ht)):ht instanceof De?(this._attachedPortal=ht,this.attachTemplatePortal(ht)):this.attachDomPortal&&ht instanceof it?(this._attachedPortal=ht,this.attachDomPortal(ht)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ht){this._disposeFn=ht}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Be extends Ke{constructor(ht,Bt,Ft,kt,bn){super(),this.outletElement=ht,this._componentFactoryResolver=Bt,this._appRef=Ft,this._defaultInjector=kt,this.attachDomPortal=Kt=>{const Zn=Kt.element,wn=this._document.createComment("dom-portal");Zn.parentNode.insertBefore(wn,Zn),this.outletElement.appendChild(Zn),this._attachedPortal=Kt,super.setDisposeFn(()=>{wn.parentNode&&wn.parentNode.replaceChild(Zn,wn)})},this._document=bn}attachComponentPortal(ht){const Ft=(ht.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ht.component);let kt;return ht.viewContainerRef?(kt=ht.viewContainerRef.createComponent(Ft,ht.viewContainerRef.length,ht.injector||ht.viewContainerRef.injector,ht.projectableNodes||void 0),this.setDisposeFn(()=>kt.destroy())):(kt=Ft.create(ht.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(kt.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(kt.hostView),kt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(kt)),this._attachedPortal=ht,kt}attachTemplatePortal(ht){let Bt=ht.viewContainerRef,Ft=Bt.createEmbeddedView(ht.templateRef,ht.context,{injector:ht.injector});return Ft.rootNodes.forEach(kt=>this.outletElement.appendChild(kt)),Ft.detectChanges(),this.setDisposeFn(()=>{let kt=Bt.indexOf(Ft);-1!==kt&&Bt.remove(kt)}),this._attachedPortal=ht,Ft}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ht){return ht.hostView.rootNodes[0]}}let wt=(()=>{class Qe extends Ke{constructor(Bt,Ft,kt){super(),this._componentFactoryResolver=Bt,this._viewContainerRef=Ft,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=bn=>{const Kt=bn.element,Zn=this._document.createComment("dom-portal");bn.setAttachedHost(this),Kt.parentNode.insertBefore(Zn,Kt),this._getRootNode().appendChild(Kt),this._attachedPortal=bn,super.setDisposeFn(()=>{Zn.parentNode&&Zn.parentNode.replaceChild(Kt,Zn)})},this._document=kt}get portal(){return this._attachedPortal}set portal(Bt){this.hasAttached()&&!Bt&&!this._isInitialized||(this.hasAttached()&&super.detach(),Bt&&super.attach(Bt),this._attachedPortal=Bt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(Bt){Bt.setAttachedHost(this);const Ft=null!=Bt.viewContainerRef?Bt.viewContainerRef:this._viewContainerRef,bn=(Bt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Bt.component),Kt=Ft.createComponent(bn,Ft.length,Bt.injector||Ft.injector,Bt.projectableNodes||void 0);return Ft!==this._viewContainerRef&&this._getRootNode().appendChild(Kt.hostView.rootNodes[0]),super.setDisposeFn(()=>Kt.destroy()),this._attachedPortal=Bt,this._attachedRef=Kt,this.attached.emit(Kt),Kt}attachTemplatePortal(Bt){Bt.setAttachedHost(this);const Ft=this._viewContainerRef.createEmbeddedView(Bt.templateRef,Bt.context,{injector:Bt.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=Bt,this._attachedRef=Ft,this.attached.emit(Ft),Ft}_getRootNode(){const Bt=this._viewContainerRef.element.nativeElement;return Bt.nodeType===Bt.ELEMENT_NODE?Bt:Bt.parentNode}}return Qe.\u0275fac=function(Bt){return new(Bt||Qe)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(O.K0))},Qe.\u0275dir=o.lG2({type:Qe,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),Qe})(),ct=(()=>{class Qe{}return Qe.\u0275fac=function(Bt){return new(Bt||Qe)},Qe.\u0275mod=o.oAB({type:Qe}),Qe.\u0275inj=o.cJS({}),Qe})()},6895:(tn,nt,N)=>{"use strict";N.d(nt,{Do:()=>wt,EM:()=>Ca,H9:()=>aa,HT:()=>fe,JF:()=>yl,JJ:()=>Ll,K0:()=>i,Mn:()=>Hr,Mx:()=>St,NF:()=>Jl,O5:()=>Xi,Ov:()=>zo,PC:()=>Po,RF:()=>ds,S$:()=>Je,Tn:()=>Kt,UT:()=>en,V_:()=>we,Ye:()=>dt,Zx:()=>ml,ax:()=>Ri,b0:()=>lt,bD:()=>_c,ez:()=>hu,mk:()=>ri,n9:()=>ar,ol:()=>Vi,p6:()=>rt,q:()=>u,sg:()=>Ri,tP:()=>wa,w_:()=>Y,x:()=>bn});var o=N(1571);let O=null;function u(){return O}function fe(te){O||(O=te)}class Y{}const i=new o.OlP("DocumentToken");let q=(()=>{class te{historyGo(X){throw new Error("Not implemented")}}return te.\u0275fac=function(X){return new(X||te)},te.\u0275prov=o.Yz7({token:te,factory:function(){return function de(){return(0,o.LFG)(Ve)}()},providedIn:"platform"}),te})();const we=new o.OlP("Location Initialized");let Ve=(()=>{class te extends q{constructor(X){super(),this._doc=X,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return u().getBaseHref(this._doc)}onPopState(X){const Ue=u().getGlobalEventTarget(this._doc,"window");return Ue.addEventListener("popstate",X,!1),()=>Ue.removeEventListener("popstate",X)}onHashChange(X){const Ue=u().getGlobalEventTarget(this._doc,"window");return Ue.addEventListener("hashchange",X,!1),()=>Ue.removeEventListener("hashchange",X)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(X){this._location.pathname=X}pushState(X,Ue,vt){De()?this._history.pushState(X,Ue,vt):this._location.hash=vt}replaceState(X,Ue,vt){De()?this._history.replaceState(X,Ue,vt):this._location.hash=vt}forward(){this._history.forward()}back(){this._history.back()}historyGo(X=0){this._history.go(X)}getState(){return this._history.state}}return te.\u0275fac=function(X){return new(X||te)(o.LFG(i))},te.\u0275prov=o.Yz7({token:te,factory:function(){return function it(){return new Ve((0,o.LFG)(i))}()},providedIn:"platform"}),te})();function De(){return!!window.history.pushState}function Ke(te,Se){if(0==te.length)return Se;if(0==Se.length)return te;let X=0;return te.endsWith("/")&&X++,Se.startsWith("/")&&X++,2==X?te+Se.substring(1):1==X?te+Se:te+"/"+Se}function je(te){const Se=te.match(/#|\?|$/),X=Se&&Se.index||te.length;return te.slice(0,X-("/"===te[X-1]?1:0))+te.slice(X)}function Be(te){return te&&"?"!==te[0]?"?"+te:te}let Je=(()=>{class te{historyGo(X){throw new Error("Not implemented")}}return te.\u0275fac=function(X){return new(X||te)},te.\u0275prov=o.Yz7({token:te,factory:function(){return(0,o.f3M)(lt)},providedIn:"root"}),te})();const gt=new o.OlP("appBaseHref");let lt=(()=>{class te extends Je{constructor(X,Ue){super(),this._platformLocation=X,this._removeListenerFns=[],this._baseHref=Ue??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}prepareExternalUrl(X){return Ke(this._baseHref,X)}path(X=!1){const Ue=this._platformLocation.pathname+Be(this._platformLocation.search),vt=this._platformLocation.hash;return vt&&X?`${Ue}${vt}`:Ue}pushState(X,Ue,vt,an){const En=this.prepareExternalUrl(vt+Be(an));this._platformLocation.pushState(X,Ue,En)}replaceState(X,Ue,vt,an){const En=this.prepareExternalUrl(vt+Be(an));this._platformLocation.replaceState(X,Ue,En)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}}return te.\u0275fac=function(X){return new(X||te)(o.LFG(q),o.LFG(gt,8))},te.\u0275prov=o.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"}),te})(),wt=(()=>{class te extends Je{constructor(X,Ue){super(),this._platformLocation=X,this._baseHref="",this._removeListenerFns=[],null!=Ue&&(this._baseHref=Ue)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}path(X=!1){let Ue=this._platformLocation.hash;return null==Ue&&(Ue="#"),Ue.length>0?Ue.substring(1):Ue}prepareExternalUrl(X){const Ue=Ke(this._baseHref,X);return Ue.length>0?"#"+Ue:Ue}pushState(X,Ue,vt,an){let En=this.prepareExternalUrl(vt+Be(an));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.pushState(X,Ue,En)}replaceState(X,Ue,vt,an){let En=this.prepareExternalUrl(vt+Be(an));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.replaceState(X,Ue,En)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}}return te.\u0275fac=function(X){return new(X||te)(o.LFG(q),o.LFG(gt,8))},te.\u0275prov=o.Yz7({token:te,factory:te.\u0275fac}),te})(),dt=(()=>{class te{constructor(X){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=X;const Ue=this._locationStrategy.getBaseHref();this._basePath=function ht(te){if(new RegExp("^(https?:)?//").test(te)){const[,X]=te.split(/\/\/[^\/]+/);return X}return te}(je(Qe(Ue))),this._locationStrategy.onPopState(vt=>{this._subject.emit({url:this.path(!0),pop:!0,state:vt.state,type:vt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(X=!1){return this.normalize(this._locationStrategy.path(X))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(X,Ue=""){return this.path()==this.normalize(X+Be(Ue))}normalize(X){return te.stripTrailingSlash(function at(te,Se){return te&&new RegExp(`^${te}([/;?#]|$)`).test(Se)?Se.substring(te.length):Se}(this._basePath,Qe(X)))}prepareExternalUrl(X){return X&&"/"!==X[0]&&(X="/"+X),this._locationStrategy.prepareExternalUrl(X)}go(X,Ue="",vt=null){this._locationStrategy.pushState(vt,"",X,Ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+Be(Ue)),vt)}replaceState(X,Ue="",vt=null){this._locationStrategy.replaceState(vt,"",X,Ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+Be(Ue)),vt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(X=0){this._locationStrategy.historyGo?.(X)}onUrlChange(X){return this._urlChangeListeners.push(X),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ue=>{this._notifyUrlChangeListeners(Ue.url,Ue.state)})),()=>{const Ue=this._urlChangeListeners.indexOf(X);this._urlChangeListeners.splice(Ue,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(X="",Ue){this._urlChangeListeners.forEach(vt=>vt(X,Ue))}subscribe(X,Ue,vt){return this._subject.subscribe({next:X,error:Ue,complete:vt})}}return te.normalizeQueryParams=Be,te.joinWithSlash=Ke,te.stripTrailingSlash=je,te.\u0275fac=function(X){return new(X||te)(o.LFG(Je))},te.\u0275prov=o.Yz7({token:te,factory:function(){return function ct(){return new dt((0,o.LFG)(Je))}()},providedIn:"root"}),te})();function Qe(te){return te.replace(/\/index.html$/,"")}const Bt={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Ft=(()=>((Ft=Ft||{})[Ft.Decimal=0]="Decimal",Ft[Ft.Percent=1]="Percent",Ft[Ft.Currency=2]="Currency",Ft[Ft.Scientific=3]="Scientific",Ft))(),bn=(()=>((bn=bn||{})[bn.Format=0]="Format",bn[bn.Standalone=1]="Standalone",bn))(),Kt=(()=>((Kt=Kt||{})[Kt.Narrow=0]="Narrow",Kt[Kt.Abbreviated=1]="Abbreviated",Kt[Kt.Wide=2]="Wide",Kt[Kt.Short=3]="Short",Kt))(),Zn=(()=>((Zn=Zn||{})[Zn.Short=0]="Short",Zn[Zn.Medium=1]="Medium",Zn[Zn.Long=2]="Long",Zn[Zn.Full=3]="Full",Zn))(),wn=(()=>((wn=wn||{})[wn.Decimal=0]="Decimal",wn[wn.Group=1]="Group",wn[wn.List=2]="List",wn[wn.PercentSign=3]="PercentSign",wn[wn.PlusSign=4]="PlusSign",wn[wn.MinusSign=5]="MinusSign",wn[wn.Exponential=6]="Exponential",wn[wn.SuperscriptingExponent=7]="SuperscriptingExponent",wn[wn.PerMille=8]="PerMille",wn[wn.Infinity=9]="Infinity",wn[wn.NaN=10]="NaN",wn[wn.TimeSeparator=11]="TimeSeparator",wn[wn.CurrencyDecimal=12]="CurrencyDecimal",wn[wn.CurrencyGroup=13]="CurrencyGroup",wn))();function Vi(te,Se,X){const Ue=(0,o.cg1)(te),an=ii([Ue[o.wAp.DayPeriodsFormat],Ue[o.wAp.DayPeriodsStandalone]],Se);return ii(an,X)}function Hr(te,Se,X){const Ue=(0,o.cg1)(te),an=ii([Ue[o.wAp.DaysFormat],Ue[o.wAp.DaysStandalone]],Se);return ii(an,X)}function en(te,Se,X){const Ue=(0,o.cg1)(te),an=ii([Ue[o.wAp.MonthsFormat],Ue[o.wAp.MonthsStandalone]],Se);return ii(an,X)}function fn(te,Se){return ii((0,o.cg1)(te)[o.wAp.DateFormat],Se)}function qt(te,Se){return ii((0,o.cg1)(te)[o.wAp.TimeFormat],Se)}function On(te,Se){return ii((0,o.cg1)(te)[o.wAp.DateTimeFormat],Se)}function Nn(te,Se){const X=(0,o.cg1)(te),Ue=X[o.wAp.NumberSymbols][Se];if(typeof Ue>"u"){if(Se===wn.CurrencyDecimal)return X[o.wAp.NumberSymbols][wn.Decimal];if(Se===wn.CurrencyGroup)return X[o.wAp.NumberSymbols][wn.Group]}return Ue}function Ui(te,Se){return(0,o.cg1)(te)[o.wAp.NumberFormats][Se]}function Mn(te){if(!te[o.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${te[o.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ii(te,Se){for(let X=Se;X>-1;X--)if(typeof te[X]<"u")return te[X];throw new Error("Locale data API: locale data undefined")}function $n(te){const[Se,X]=te.split(":");return{hours:+Se,minutes:+X}}const qi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,j={},Fe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yt=(()=>((Yt=Yt||{})[Yt.Short=0]="Short",Yt[Yt.ShortGMT=1]="ShortGMT",Yt[Yt.Long=2]="Long",Yt[Yt.Extended=3]="Extended",Yt))(),ut=(()=>((ut=ut||{})[ut.FullYear=0]="FullYear",ut[ut.Month=1]="Month",ut[ut.Date=2]="Date",ut[ut.Hours=3]="Hours",ut[ut.Minutes=4]="Minutes",ut[ut.Seconds=5]="Seconds",ut[ut.FractionalSeconds=6]="FractionalSeconds",ut[ut.Day=7]="Day",ut))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function rt(te,Se,X,Ue){let vt=function ot(te){if(rn(te))return te;if("number"==typeof te&&!isNaN(te))return new Date(te);if("string"==typeof te){if(te=te.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(te)){const[vt,an=1,En=1]=te.split("-").map(oi=>+oi);return Vt(vt,an-1,En)}const X=parseFloat(te);if(!isNaN(te-X))return new Date(X);let Ue;if(Ue=te.match(qi))return function Nt(te){const Se=new Date(0);let X=0,Ue=0;const vt=te[8]?Se.setUTCFullYear:Se.setFullYear,an=te[8]?Se.setUTCHours:Se.setHours;te[9]&&(X=Number(te[9]+te[10]),Ue=Number(te[9]+te[11])),vt.call(Se,Number(te[1]),Number(te[2])-1,Number(te[3]));const En=Number(te[4]||0)-X,oi=Number(te[5]||0)-Ue,Jr=Number(te[6]||0),Dn=Math.floor(1e3*parseFloat("0."+(te[7]||0)));return an.call(Se,En,oi,Jr,Dn),Se}(Ue)}const Se=new Date(te);if(!rn(Se))throw new Error(`Unable to convert "${te}" into a date`);return Se}(te);Se=di(X,Se)||Se;let oi,En=[];for(;Se;){if(oi=Fe.exec(Se),!oi){En.push(Se);break}{En=En.concat(oi.slice(1));const Tr=En.pop();if(!Tr)break;Se=Tr}}let Jr=vt.getTimezoneOffset();Ue&&(Jr=Le(Ue,Jr),vt=function Pe(te,Se,X){const Ue=X?-1:1,vt=te.getTimezoneOffset();return function Ze(te,Se){return(te=new Date(te.getTime())).setMinutes(te.getMinutes()+Se),te}(te,Ue*(Le(Se,vt)-vt))}(vt,Ue,!0));let Dn="";return En.forEach(Tr=>{const er=function _e(te){if(re[te])return re[te];let Se;switch(te){case"G":case"GG":case"GGG":Se=Yi(It.Eras,Kt.Abbreviated);break;case"GGGG":Se=Yi(It.Eras,Kt.Wide);break;case"GGGGG":Se=Yi(It.Eras,Kt.Narrow);break;case"y":Se=pr(ut.FullYear,1,0,!1,!0);break;case"yy":Se=pr(ut.FullYear,2,0,!0,!0);break;case"yyy":Se=pr(ut.FullYear,3,0,!1,!0);break;case"yyyy":Se=pr(ut.FullYear,4,0,!1,!0);break;case"Y":Se=he(1);break;case"YY":Se=he(2,!0);break;case"YYY":Se=he(3);break;case"YYYY":Se=he(4);break;case"M":case"L":Se=pr(ut.Month,1,1);break;case"MM":case"LL":Se=pr(ut.Month,2,1);break;case"MMM":Se=Yi(It.Months,Kt.Abbreviated);break;case"MMMM":Se=Yi(It.Months,Kt.Wide);break;case"MMMMM":Se=Yi(It.Months,Kt.Narrow);break;case"LLL":Se=Yi(It.Months,Kt.Abbreviated,bn.Standalone);break;case"LLLL":Se=Yi(It.Months,Kt.Wide,bn.Standalone);break;case"LLLLL":Se=Yi(It.Months,Kt.Narrow,bn.Standalone);break;case"w":Se=se(1);break;case"ww":Se=se(2);break;case"W":Se=se(1,!0);break;case"d":Se=pr(ut.Date,1);break;case"dd":Se=pr(ut.Date,2);break;case"c":case"cc":Se=pr(ut.Day,1);break;case"ccc":Se=Yi(It.Days,Kt.Abbreviated,bn.Standalone);break;case"cccc":Se=Yi(It.Days,Kt.Wide,bn.Standalone);break;case"ccccc":Se=Yi(It.Days,Kt.Narrow,bn.Standalone);break;case"cccccc":Se=Yi(It.Days,Kt.Short,bn.Standalone);break;case"E":case"EE":case"EEE":Se=Yi(It.Days,Kt.Abbreviated);break;case"EEEE":Se=Yi(It.Days,Kt.Wide);break;case"EEEEE":Se=Yi(It.Days,Kt.Narrow);break;case"EEEEEE":Se=Yi(It.Days,Kt.Short);break;case"a":case"aa":case"aaa":Se=Yi(It.DayPeriods,Kt.Abbreviated);break;case"aaaa":Se=Yi(It.DayPeriods,Kt.Wide);break;case"aaaaa":Se=Yi(It.DayPeriods,Kt.Narrow);break;case"b":case"bb":case"bbb":Se=Yi(It.DayPeriods,Kt.Abbreviated,bn.Standalone,!0);break;case"bbbb":Se=Yi(It.DayPeriods,Kt.Wide,bn.Standalone,!0);break;case"bbbbb":Se=Yi(It.DayPeriods,Kt.Narrow,bn.Standalone,!0);break;case"B":case"BB":case"BBB":Se=Yi(It.DayPeriods,Kt.Abbreviated,bn.Format,!0);break;case"BBBB":Se=Yi(It.DayPeriods,Kt.Wide,bn.Format,!0);break;case"BBBBB":Se=Yi(It.DayPeriods,Kt.Narrow,bn.Format,!0);break;case"h":Se=pr(ut.Hours,1,-12);break;case"hh":Se=pr(ut.Hours,2,-12);break;case"H":Se=pr(ut.Hours,1);break;case"HH":Se=pr(ut.Hours,2);break;case"m":Se=pr(ut.Minutes,1);break;case"mm":Se=pr(ut.Minutes,2);break;case"s":Se=pr(ut.Seconds,1);break;case"ss":Se=pr(ut.Seconds,2);break;case"S":Se=pr(ut.FractionalSeconds,1);break;case"SS":Se=pr(ut.FractionalSeconds,2);break;case"SSS":Se=pr(ut.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Se=Gr(Yt.Short);break;case"ZZZZZ":Se=Gr(Yt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Se=Gr(Yt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Se=Gr(Yt.Long);break;default:return null}return re[te]=Se,Se}(Tr);Dn+=er?er(vt,X,Jr):"''"===Tr?"'":Tr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Dn}function Vt(te,Se,X){const Ue=new Date(0);return Ue.setFullYear(te,Se,X),Ue.setHours(0,0,0),Ue}function di(te,Se){const X=function Hi(te){return(0,o.cg1)(te)[o.wAp.LocaleId]}(te);if(j[X]=j[X]||{},j[X][Se])return j[X][Se];let Ue="";switch(Se){case"shortDate":Ue=fn(te,Zn.Short);break;case"mediumDate":Ue=fn(te,Zn.Medium);break;case"longDate":Ue=fn(te,Zn.Long);break;case"fullDate":Ue=fn(te,Zn.Full);break;case"shortTime":Ue=qt(te,Zn.Short);break;case"mediumTime":Ue=qt(te,Zn.Medium);break;case"longTime":Ue=qt(te,Zn.Long);break;case"fullTime":Ue=qt(te,Zn.Full);break;case"short":const vt=di(te,"shortTime"),an=di(te,"shortDate");Ue=hi(On(te,Zn.Short),[vt,an]);break;case"medium":const En=di(te,"mediumTime"),oi=di(te,"mediumDate");Ue=hi(On(te,Zn.Medium),[En,oi]);break;case"long":const Jr=di(te,"longTime"),Dn=di(te,"longDate");Ue=hi(On(te,Zn.Long),[Jr,Dn]);break;case"full":const Tr=di(te,"fullTime"),er=di(te,"fullDate");Ue=hi(On(te,Zn.Full),[Tr,er])}return Ue&&(j[X][Se]=Ue),Ue}function hi(te,Se){return Se&&(te=te.replace(/\{([^}]+)}/g,function(X,Ue){return null!=Se&&Ue in Se?Se[Ue]:X})),te}function bi(te,Se,X="-",Ue,vt){let an="";(te<0||vt&&te<=0)&&(vt?te=1-te:(te=-te,an=X));let En=String(te);for(;En.length<Se;)En="0"+En;return Ue&&(En=En.slice(En.length-Se)),an+En}function pr(te,Se,X=0,Ue=!1,vt=!1){return function(an,En){let oi=function bo(te,Se){switch(te){case ut.FullYear:return Se.getFullYear();case ut.Month:return Se.getMonth();case ut.Date:return Se.getDate();case ut.Hours:return Se.getHours();case ut.Minutes:return Se.getMinutes();case ut.Seconds:return Se.getSeconds();case ut.FractionalSeconds:return Se.getMilliseconds();case ut.Day:return Se.getDay();default:throw new Error(`Unknown DateType value "${te}".`)}}(te,an);if((X>0||oi>-X)&&(oi+=X),te===ut.Hours)0===oi&&-12===X&&(oi=12);else if(te===ut.FractionalSeconds)return function _r(te,Se){return bi(te,3).substring(0,Se)}(oi,Se);const Jr=Nn(En,wn.MinusSign);return bi(oi,Se,Jr,Ue,vt)}}function Yi(te,Se,X=bn.Format,Ue=!1){return function(vt,an){return function wr(te,Se,X,Ue,vt,an){switch(X){case It.Months:return en(Se,vt,Ue)[te.getMonth()];case It.Days:return Hr(Se,vt,Ue)[te.getDay()];case It.DayPeriods:const En=te.getHours(),oi=te.getMinutes();if(an){const Dn=function Pn(te){const Se=(0,o.cg1)(te);return Mn(Se),(Se[o.wAp.ExtraData][2]||[]).map(Ue=>"string"==typeof Ue?$n(Ue):[$n(Ue[0]),$n(Ue[1])])}(Se),Tr=function mn(te,Se,X){const Ue=(0,o.cg1)(te);Mn(Ue);const an=ii([Ue[o.wAp.ExtraData][0],Ue[o.wAp.ExtraData][1]],Se)||[];return ii(an,X)||[]}(Se,vt,Ue),er=Dn.findIndex(wo=>{if(Array.isArray(wo)){const[hr,Pr]=wo,Vs=En>=hr.hours&&oi>=hr.minutes,Hs=En<Pr.hours||En===Pr.hours&&oi<Pr.minutes;if(hr.hours<Pr.hours){if(Vs&&Hs)return!0}else if(Vs||Hs)return!0}else if(wo.hours===En&&wo.minutes===oi)return!0;return!1});if(-1!==er)return Tr[er]}return Vi(Se,vt,Ue)[En<12?0:1];case It.Eras:return function Ot(te,Se){return ii((0,o.cg1)(te)[o.wAp.Eras],Se)}(Se,Ue)[te.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${X}`)}}(vt,an,te,Se,X,Ue)}}function Gr(te){return function(Se,X,Ue){const vt=-1*Ue,an=Nn(X,wn.MinusSign),En=vt>0?Math.floor(vt/60):Math.ceil(vt/60);switch(te){case Yt.Short:return(vt>=0?"+":"")+bi(En,2,an)+bi(Math.abs(vt%60),2,an);case Yt.ShortGMT:return"GMT"+(vt>=0?"+":"")+bi(En,1,an);case Yt.Long:return"GMT"+(vt>=0?"+":"")+bi(En,2,an)+":"+bi(Math.abs(vt%60),2,an);case Yt.Extended:return 0===Ue?"Z":(vt>=0?"+":"")+bi(En,2,an)+":"+bi(Math.abs(vt%60),2,an);default:throw new Error(`Unknown zone width "${te}"`)}}}function K(te){return Vt(te.getFullYear(),te.getMonth(),te.getDate()+(4-te.getDay()))}function se(te,Se=!1){return function(X,Ue){let vt;if(Se){const an=new Date(X.getFullYear(),X.getMonth(),1).getDay()-1,En=X.getDate();vt=1+Math.floor((En+an)/7)}else{const an=K(X),En=function Qt(te){const Se=Vt(te,0,1).getDay();return Vt(te,0,1+(Se<=4?4:11)-Se)}(an.getFullYear()),oi=an.getTime()-En.getTime();vt=1+Math.round(oi/6048e5)}return bi(vt,te,Nn(Ue,wn.MinusSign))}}function he(te,Se=!1){return function(X,Ue){return bi(K(X).getFullYear(),te,Nn(Ue,wn.MinusSign),Se)}}const re={};function Le(te,Se){te=te.replace(/:/g,"");const X=Date.parse("Jan 01, 1970 00:00:00 "+te)/6e4;return isNaN(X)?Se:X}function rn(te){return te instanceof Date&&!isNaN(te.valueOf())}const dn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ai(te,Se,X,Ue,vt,an,En=!1){let oi="",Jr=!1;if(isFinite(te)){let Dn=function Wi(te){let Ue,vt,an,En,oi,Se=Math.abs(te)+"",X=0;for((vt=Se.indexOf("."))>-1&&(Se=Se.replace(".","")),(an=Se.search(/e/i))>0?(vt<0&&(vt=an),vt+=+Se.slice(an+1),Se=Se.substring(0,an)):vt<0&&(vt=Se.length),an=0;"0"===Se.charAt(an);an++);if(an===(oi=Se.length))Ue=[0],vt=1;else{for(oi--;"0"===Se.charAt(oi);)oi--;for(vt-=an,Ue=[],En=0;an<=oi;an++,En++)Ue[En]=Number(Se.charAt(an))}return vt>22&&(Ue=Ue.splice(0,21),X=vt-1,vt=1),{digits:Ue,exponent:X,integerLen:vt}}(te);En&&(Dn=function cr(te){if(0===te.digits[0])return te;const Se=te.digits.length-te.integerLen;return te.exponent?te.exponent+=2:(0===Se?te.digits.push(0,0):1===Se&&te.digits.push(0),te.integerLen+=2),te}(Dn));let Tr=Se.minInt,er=Se.minFrac,wo=Se.maxFrac;if(an){const Ko=an.match(dn);if(null===Ko)throw new Error(`${an} is not a valid digit info`);const Fo=Ko[1],Ma=Ko[3],zl=Ko[5];null!=Fo&&(Tr=At(Fo)),null!=Ma&&(er=At(Ma)),null!=zl?wo=At(zl):null!=Ma&&er>wo&&(wo=er)}!function xo(te,Se,X){if(Se>X)throw new Error(`The minimum number of digits after fraction (${Se}) is higher than the maximum (${X}).`);let Ue=te.digits,vt=Ue.length-te.integerLen;const an=Math.min(Math.max(Se,vt),X);let En=an+te.integerLen,oi=Ue[En];if(En>0){Ue.splice(Math.max(te.integerLen,En));for(let er=En;er<Ue.length;er++)Ue[er]=0}else{vt=Math.max(0,vt),te.integerLen=1,Ue.length=Math.max(1,En=an+1),Ue[0]=0;for(let er=1;er<En;er++)Ue[er]=0}if(oi>=5)if(En-1<0){for(let er=0;er>En;er--)Ue.unshift(0),te.integerLen++;Ue.unshift(1),te.integerLen++}else Ue[En-1]++;for(;vt<Math.max(0,an);vt++)Ue.push(0);let Jr=0!==an;const Dn=Se+te.integerLen,Tr=Ue.reduceRight(function(er,wo,hr,Pr){return Pr[hr]=(wo+=er)<10?wo:wo-10,Jr&&(0===Pr[hr]&&hr>=Dn?Pr.pop():Jr=!1),wo>=10?1:0},0);Tr&&(Ue.unshift(Tr),te.integerLen++)}(Dn,er,wo);let hr=Dn.digits,Pr=Dn.integerLen;const Vs=Dn.exponent;let Hs=[];for(Jr=hr.every(Ko=>!Ko);Pr<Tr;Pr++)hr.unshift(0);for(;Pr<0;Pr++)hr.unshift(0);Pr>0?Hs=hr.splice(Pr,hr.length):(Hs=hr,hr=[0]);const fs=[];for(hr.length>=Se.lgSize&&fs.unshift(hr.splice(-Se.lgSize,hr.length).join(""));hr.length>Se.gSize;)fs.unshift(hr.splice(-Se.gSize,hr.length).join(""));hr.length&&fs.unshift(hr.join("")),oi=fs.join(Nn(X,Ue)),Hs.length&&(oi+=Nn(X,vt)+Hs.join("")),Vs&&(oi+=Nn(X,wn.Exponential)+"+"+Vs)}else oi=Nn(X,wn.Infinity);return oi=te<0&&!Jr?Se.negPre+oi+Se.negSuf:Se.posPre+oi+Se.posSuf,oi}function Gi(te,Se="-"){const X={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Ue=te.split(";"),vt=Ue[0],an=Ue[1],En=-1!==vt.indexOf(".")?vt.split("."):[vt.substring(0,vt.lastIndexOf("0")+1),vt.substring(vt.lastIndexOf("0")+1)],oi=En[0],Jr=En[1]||"";X.posPre=oi.substring(0,oi.indexOf("#"));for(let Tr=0;Tr<Jr.length;Tr++){const er=Jr.charAt(Tr);"0"===er?X.minFrac=X.maxFrac=Tr+1:"#"===er?X.maxFrac=Tr+1:X.posSuf+=er}const Dn=oi.split(",");if(X.gSize=Dn[1]?Dn[1].length:0,X.lgSize=Dn[2]||Dn[1]?(Dn[2]||Dn[1]).length:0,an){const Tr=vt.length-X.posPre.length-X.posSuf.length,er=an.indexOf("#");X.negPre=an.substring(0,er).replace(/'/g,""),X.negSuf=an.slice(er+Tr).replace(/'/g,"")}else X.negPre=Se+X.posPre,X.negSuf=X.posSuf;return X}function At(te){const Se=parseInt(te);if(isNaN(Se))throw new Error("Invalid integer literal when parsing "+te);return Se}function St(te,Se){Se=encodeURIComponent(Se);for(const X of te.split(";")){const Ue=X.indexOf("="),[vt,an]=-1==Ue?[X,""]:[X.slice(0,Ue),X.slice(Ue+1)];if(vt.trim()===Se)return decodeURIComponent(an)}return null}const Tn=/\s+/,Hn=[];let ri=(()=>{class te{constructor(X,Ue,vt,an){this._iterableDiffers=X,this._keyValueDiffers=Ue,this._ngEl=vt,this._renderer=an,this.initialClasses=Hn,this.stateMap=new Map}set klass(X){this.initialClasses=null!=X?X.trim().split(Tn):Hn}set ngClass(X){this.rawClass="string"==typeof X?X.trim().split(Tn):X}ngDoCheck(){for(const Ue of this.initialClasses)this._updateState(Ue,!0);const X=this.rawClass;if(Array.isArray(X)||X instanceof Set)for(const Ue of X)this._updateState(Ue,!0);else if(null!=X)for(const Ue of Object.keys(X))this._updateState(Ue,Boolean(X[Ue]));this._applyStateDiff()}_updateState(X,Ue){const vt=this.stateMap.get(X);void 0!==vt?(vt.enabled!==Ue&&(vt.changed=!0,vt.enabled=Ue),vt.touched=!0):this.stateMap.set(X,{enabled:Ue,changed:!0,touched:!0})}_applyStateDiff(){for(const X of this.stateMap){const Ue=X[0],vt=X[1];vt.changed?(this._toggleClass(Ue,vt.enabled),vt.changed=!1):vt.touched||(vt.enabled&&this._toggleClass(Ue,!1),this.stateMap.delete(Ue)),vt.touched=!1}}_toggleClass(X,Ue){(X=X.trim()).length>0&&X.split(Tn).forEach(vt=>{Ue?this._renderer.addClass(this._ngEl.nativeElement,vt):this._renderer.removeClass(this._ngEl.nativeElement,vt)})}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),te})();class ci{constructor(Se,X,Ue,vt){this.$implicit=Se,this.ngForOf=X,this.index=Ue,this.count=vt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ri=(()=>{class te{set ngForOf(X){this._ngForOf=X,this._ngForOfDirty=!0}set ngForTrackBy(X){this._trackByFn=X}get ngForTrackBy(){return this._trackByFn}constructor(X,Ue,vt){this._viewContainer=X,this._template=Ue,this._differs=vt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(X){X&&(this._template=X)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const X=this._ngForOf;!this._differ&&X&&(this._differ=this._differs.find(X).create(this.ngForTrackBy))}if(this._differ){const X=this._differ.diff(this._ngForOf);X&&this._applyChanges(X)}}_applyChanges(X){const Ue=this._viewContainer;X.forEachOperation((vt,an,En)=>{if(null==vt.previousIndex)Ue.createEmbeddedView(this._template,new ci(vt.item,this._ngForOf,-1,-1),null===En?void 0:En);else if(null==En)Ue.remove(null===an?void 0:an);else if(null!==an){const oi=Ue.get(an);Ue.move(oi,En),Pi(oi,vt)}});for(let vt=0,an=Ue.length;vt<an;vt++){const oi=Ue.get(vt).context;oi.index=vt,oi.count=an,oi.ngForOf=this._ngForOf}X.forEachIdentityChange(vt=>{Pi(Ue.get(vt.currentIndex),vt)})}static ngTemplateContextGuard(X,Ue){return!0}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),te})();function Pi(te,Se){te.context.$implicit=Se.item}let Xi=(()=>{class te{constructor(X,Ue){this._viewContainer=X,this._context=new Bo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ue}set ngIf(X){this._context.$implicit=this._context.ngIf=X,this._updateView()}set ngIfThen(X){Rr("ngIfThen",X),this._thenTemplateRef=X,this._thenViewRef=null,this._updateView()}set ngIfElse(X){Rr("ngIfElse",X),this._elseTemplateRef=X,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(X,Ue){return!0}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.s_b),o.Y36(o.Rgc))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),te})();class Bo{constructor(){this.$implicit=null,this.ngIf=null}}function Rr(te,Se){if(Se&&!Se.createEmbeddedView)throw new Error(`${te} must be a TemplateRef, but received '${(0,o.AaK)(Se)}'.`)}class Ga{constructor(Se,X){this._viewContainerRef=Se,this._templateRef=X,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Se){Se&&!this._created?this.create():!Se&&this._created&&this.destroy()}}let ds=(()=>{class te{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(X){this._ngSwitch=X,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(X){this._defaultViews.push(X)}_matchCase(X){const Ue=X==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||Ue,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Ue}_updateDefaultCases(X){if(this._defaultViews.length>0&&X!==this._defaultUsed){this._defaultUsed=X;for(const Ue of this._defaultViews)Ue.enforceState(X)}}}return te.\u0275fac=function(X){return new(X||te)},te.\u0275dir=o.lG2({type:te,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),te})(),ar=(()=>{class te{constructor(X,Ue,vt){this.ngSwitch=vt,vt._addCase(),this._view=new Ga(X,Ue)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(ds,9))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),te})(),Po=(()=>{class te{constructor(X,Ue,vt){this._ngEl=X,this._differs=Ue,this._renderer=vt,this._ngStyle=null,this._differ=null}set ngStyle(X){this._ngStyle=X,!this._differ&&X&&(this._differ=this._differs.find(X).create())}ngDoCheck(){if(this._differ){const X=this._differ.diff(this._ngStyle);X&&this._applyChanges(X)}}_setStyle(X,Ue){const[vt,an]=X.split("."),En=-1===vt.indexOf("-")?void 0:o.JOm.DashCase;null!=Ue?this._renderer.setStyle(this._ngEl.nativeElement,vt,an?`${Ue}${an}`:Ue,En):this._renderer.removeStyle(this._ngEl.nativeElement,vt,En)}_applyChanges(X){X.forEachRemovedItem(Ue=>this._setStyle(Ue.key,null)),X.forEachAddedItem(Ue=>this._setStyle(Ue.key,Ue.currentValue)),X.forEachChangedItem(Ue=>this._setStyle(Ue.key,Ue.currentValue))}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),te})(),wa=(()=>{class te{constructor(X){this._viewContainerRef=X,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(X){if(X.ngTemplateOutlet||X.ngTemplateOutletInjector){const Ue=this._viewContainerRef;if(this._viewRef&&Ue.remove(Ue.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:vt,ngTemplateOutletContext:an,ngTemplateOutletInjector:En}=this;this._viewRef=Ue.createEmbeddedView(vt,an,En?{injector:En}:void 0)}else this._viewRef=null}else this._viewRef&&X.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.s_b))},te.\u0275dir=o.lG2({type:te,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),te})();function Uo(te,Se){return new o.vHH(2100,!1)}class Ia{createSubscription(Se,X){return Se.subscribe({next:X,error:Ue=>{throw Ue}})}dispose(Se){Se.unsubscribe()}}class Iu{createSubscription(Se,X){return Se.then(X,Ue=>{throw Ue})}dispose(Se){}}const lo=new Iu,fl=new Ia;let zo=(()=>{class te{constructor(X){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=X}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(X){return this._obj?X!==this._obj?(this._dispose(),this.transform(X)):this._latestValue:(X&&this._subscribe(X),this._latestValue)}_subscribe(X){this._obj=X,this._strategy=this._selectStrategy(X),this._subscription=this._strategy.createSubscription(X,Ue=>this._updateLatestValue(X,Ue))}_selectStrategy(X){if((0,o.QGY)(X))return lo;if((0,o.F4k)(X))return fl;throw Uo()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(X,Ue){X===this._obj&&(this._latestValue=Ue,this._ref.markForCheck())}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.sBO,16))},te.\u0275pipe=o.Yjl({name:"async",type:te,pure:!1,standalone:!0}),te})(),Ll=(()=>{class te{constructor(X){this._locale=X}transform(X,Ue,vt){if(!la(X))return null;vt=vt||this._locale;try{return function ur(te,Se,X){return ai(te,Gi(Ui(Se,Ft.Decimal),Nn(Se,wn.MinusSign)),Se,wn.Group,wn.Decimal,X)}(ql(X),vt,Ue)}catch(an){throw Uo()}}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.soG,16))},te.\u0275pipe=o.Yjl({name:"number",type:te,pure:!0,standalone:!0}),te})(),ml=(()=>{class te{constructor(X){this._locale=X}transform(X,Ue,vt){if(!la(X))return null;vt=vt||this._locale;try{return function Ni(te,Se,X){return ai(te,Gi(Ui(Se,Ft.Percent),Nn(Se,wn.MinusSign)),Se,wn.Group,wn.Decimal,X,!0).replace(new RegExp("%","g"),Nn(Se,wn.PercentSign))}(ql(X),vt,Ue)}catch(an){throw Uo()}}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.soG,16))},te.\u0275pipe=o.Yjl({name:"percent",type:te,pure:!0,standalone:!0}),te})(),aa=(()=>{class te{constructor(X,Ue="USD"){this._locale=X,this._defaultCurrencyCode=Ue}transform(X,Ue=this._defaultCurrencyCode,vt="symbol",an,En){if(!la(X))return null;En=En||this._locale,"boolean"==typeof vt&&(vt=vt?"symbol":"code");let oi=Ue||this._defaultCurrencyCode;"code"!==vt&&(oi="symbol"===vt||"symbol-narrow"===vt?function mr(te,Se,X="en"){const Ue=function mi(te){return(0,o.cg1)(te)[o.wAp.Currencies]}(X)[te]||Bt[te]||[],vt=Ue[1];return"narrow"===Se&&"string"==typeof vt?vt:Ue[0]||te}(oi,"symbol"===vt?"wide":"narrow",En):vt);try{return function Bn(te,Se,X,Ue,vt){const En=Gi(Ui(Se,Ft.Currency),Nn(Se,wn.MinusSign));return En.minFrac=function Mo(te){let Se;const X=Bt[te];return X&&(Se=X[2]),"number"==typeof Se?Se:2}(Ue),En.maxFrac=En.minFrac,ai(te,En,Se,wn.CurrencyGroup,wn.CurrencyDecimal,vt).replace("\xa4",X).replace("\xa4","").trim()}(ql(X),En,oi,Ue,an)}catch(Jr){throw Uo()}}}return te.\u0275fac=function(X){return new(X||te)(o.Y36(o.soG,16),o.Y36(o.EJc,16))},te.\u0275pipe=o.Yjl({name:"currency",type:te,pure:!0,standalone:!0}),te})();function la(te){return!(null==te||""===te||te!=te)}function ql(te){if("string"==typeof te&&!isNaN(Number(te)-parseFloat(te)))return Number(te);if("number"!=typeof te)throw new Error(`${te} is not a number`);return te}let hu=(()=>{class te{}return te.\u0275fac=function(X){return new(X||te)},te.\u0275mod=o.oAB({type:te}),te.\u0275inj=o.cJS({}),te})();const _c="browser";function Jl(te){return te===_c}let Ca=(()=>{class te{}return te.\u0275prov=(0,o.Yz7)({token:te,providedIn:"root",factory:()=>new Js((0,o.LFG)(i),window)}),te})();class Js{constructor(Se,X){this.document=Se,this.window=X,this.offset=()=>[0,0]}setOffset(Se){this.offset=Array.isArray(Se)?()=>Se:Se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Se){this.supportsScrolling()&&this.window.scrollTo(Se[0],Se[1])}scrollToAnchor(Se){if(!this.supportsScrolling())return;const X=function Ta(te,Se){const X=te.getElementById(Se)||te.getElementsByName(Se)[0];if(X)return X;if("function"==typeof te.createTreeWalker&&te.body&&(te.body.createShadowRoot||te.body.attachShadow)){const Ue=te.createTreeWalker(te.body,NodeFilter.SHOW_ELEMENT);let vt=Ue.currentNode;for(;vt;){const an=vt.shadowRoot;if(an){const En=an.getElementById(Se)||an.querySelector(`[name="${Se}"]`);if(En)return En}vt=Ue.nextNode()}}return null}(this.document,Se);X&&(this.scrollToElement(X),X.focus())}setHistoryScrollRestoration(Se){if(this.supportScrollRestoration()){const X=this.window.history;X&&X.scrollRestoration&&(X.scrollRestoration=Se)}}scrollToElement(Se){const X=Se.getBoundingClientRect(),Ue=X.left+this.window.pageXOffset,vt=X.top+this.window.pageYOffset,an=this.offset();this.window.scrollTo(Ue-an[0],vt-an[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Se=Pa(this.window.history)||Pa(Object.getPrototypeOf(this.window.history));return!(!Se||!Se.writable&&!Se.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Pa(te){return Object.getOwnPropertyDescriptor(te,"scrollRestoration")}class yl{}},529:(tn,nt,N)=>{"use strict";N.d(nt,{JF:()=>Gr,LE:()=>lt,TP:()=>Ot,UA:()=>wn,Zn:()=>Zn,dt:()=>kt,eN:()=>Hi});var o=N(6895),O=N(1571),u=N(9646),fe=N(9751),Y=N(4351),i=N(9300),q=N(4004);class de{}class we{}class Ve{constructor(K){this.normalizedNames=new Map,this.lazyUpdate=null,K?this.lazyInit="string"==typeof K?()=>{this.headers=new Map,K.split("\n").forEach(se=>{const he=se.indexOf(":");if(he>0){const re=se.slice(0,he),_e=re.toLowerCase(),Le=se.slice(he+1).trim();this.maybeSetNormalizedName(re,_e),this.headers.has(_e)?this.headers.get(_e).push(Le):this.headers.set(_e,[Le])}})}:()=>{this.headers=new Map,Object.keys(K).forEach(se=>{let he=K[se];const re=se.toLowerCase();"string"==typeof he&&(he=[he]),he.length>0&&(this.headers.set(re,he),this.maybeSetNormalizedName(se,re))})}:this.headers=new Map}has(K){return this.init(),this.headers.has(K.toLowerCase())}get(K){this.init();const se=this.headers.get(K.toLowerCase());return se&&se.length>0?se[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(K){return this.init(),this.headers.get(K.toLowerCase())||null}append(K,se){return this.clone({name:K,value:se,op:"a"})}set(K,se){return this.clone({name:K,value:se,op:"s"})}delete(K,se){return this.clone({name:K,value:se,op:"d"})}maybeSetNormalizedName(K,se){this.normalizedNames.has(se)||this.normalizedNames.set(se,K)}init(){this.lazyInit&&(this.lazyInit instanceof Ve?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(K=>this.applyUpdate(K)),this.lazyUpdate=null))}copyFrom(K){K.init(),Array.from(K.headers.keys()).forEach(se=>{this.headers.set(se,K.headers.get(se)),this.normalizedNames.set(se,K.normalizedNames.get(se))})}clone(K){const se=new Ve;return se.lazyInit=this.lazyInit&&this.lazyInit instanceof Ve?this.lazyInit:this,se.lazyUpdate=(this.lazyUpdate||[]).concat([K]),se}applyUpdate(K){const se=K.name.toLowerCase();switch(K.op){case"a":case"s":let he=K.value;if("string"==typeof he&&(he=[he]),0===he.length)return;this.maybeSetNormalizedName(K.name,se);const re=("a"===K.op?this.headers.get(se):void 0)||[];re.push(...he),this.headers.set(se,re);break;case"d":const _e=K.value;if(_e){let Le=this.headers.get(se);if(!Le)return;Le=Le.filter(Ze=>-1===_e.indexOf(Ze)),0===Le.length?(this.headers.delete(se),this.normalizedNames.delete(se)):this.headers.set(se,Le)}else this.headers.delete(se),this.normalizedNames.delete(se)}}forEach(K){this.init(),Array.from(this.normalizedNames.keys()).forEach(se=>K(this.normalizedNames.get(se),this.headers.get(se)))}}class it{encodeKey(K){return Je(K)}encodeValue(K){return Je(K)}decodeKey(K){return decodeURIComponent(K)}decodeValue(K){return decodeURIComponent(K)}}const je=/%(\d[a-f0-9])/gi,Be={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Je(Qt){return encodeURIComponent(Qt).replace(je,(K,se)=>Be[se]??K)}function gt(Qt){return`${Qt}`}class lt{constructor(K={}){if(this.updates=null,this.cloneFrom=null,this.encoder=K.encoder||new it,K.fromString){if(K.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ke(Qt,K){const se=new Map;return Qt.length>0&&Qt.replace(/^\?/,"").split("&").forEach(re=>{const _e=re.indexOf("="),[Le,Ze]=-1==_e?[K.decodeKey(re),""]:[K.decodeKey(re.slice(0,_e)),K.decodeValue(re.slice(_e+1))],Pe=se.get(Le)||[];Pe.push(Ze),se.set(Le,Pe)}),se}(K.fromString,this.encoder)}else K.fromObject?(this.map=new Map,Object.keys(K.fromObject).forEach(se=>{const he=K.fromObject[se],re=Array.isArray(he)?he.map(gt):[gt(he)];this.map.set(se,re)})):this.map=null}has(K){return this.init(),this.map.has(K)}get(K){this.init();const se=this.map.get(K);return se?se[0]:null}getAll(K){return this.init(),this.map.get(K)||null}keys(){return this.init(),Array.from(this.map.keys())}append(K,se){return this.clone({param:K,value:se,op:"a"})}appendAll(K){const se=[];return Object.keys(K).forEach(he=>{const re=K[he];Array.isArray(re)?re.forEach(_e=>{se.push({param:he,value:_e,op:"a"})}):se.push({param:he,value:re,op:"a"})}),this.clone(se)}set(K,se){return this.clone({param:K,value:se,op:"s"})}delete(K,se){return this.clone({param:K,value:se,op:"d"})}toString(){return this.init(),this.keys().map(K=>{const se=this.encoder.encodeKey(K);return this.map.get(K).map(he=>se+"="+this.encoder.encodeValue(he)).join("&")}).filter(K=>""!==K).join("&")}clone(K){const se=new lt({encoder:this.encoder});return se.cloneFrom=this.cloneFrom||this,se.updates=(this.updates||[]).concat(K),se}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(K=>this.map.set(K,this.cloneFrom.map.get(K))),this.updates.forEach(K=>{switch(K.op){case"a":case"s":const se=("a"===K.op?this.map.get(K.param):void 0)||[];se.push(gt(K.value)),this.map.set(K.param,se);break;case"d":if(void 0===K.value){this.map.delete(K.param);break}{let he=this.map.get(K.param)||[];const re=he.indexOf(gt(K.value));-1!==re&&he.splice(re,1),he.length>0?this.map.set(K.param,he):this.map.delete(K.param)}}}),this.cloneFrom=this.updates=null)}}class dt{constructor(){this.map=new Map}set(K,se){return this.map.set(K,se),this}get(K){return this.map.has(K)||this.map.set(K,K.defaultValue()),this.map.get(K)}delete(K){return this.map.delete(K),this}has(K){return this.map.has(K)}keys(){return this.map.keys()}}function at(Qt){return typeof ArrayBuffer<"u"&&Qt instanceof ArrayBuffer}function Qe(Qt){return typeof Blob<"u"&&Qt instanceof Blob}function ht(Qt){return typeof FormData<"u"&&Qt instanceof FormData}class Ft{constructor(K,se,he,re){let _e;if(this.url=se,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=K.toUpperCase(),function ct(Qt){switch(Qt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||re?(this.body=void 0!==he?he:null,_e=re):_e=he,_e&&(this.reportProgress=!!_e.reportProgress,this.withCredentials=!!_e.withCredentials,_e.responseType&&(this.responseType=_e.responseType),_e.headers&&(this.headers=_e.headers),_e.context&&(this.context=_e.context),_e.params&&(this.params=_e.params)),this.headers||(this.headers=new Ve),this.context||(this.context=new dt),this.params){const Le=this.params.toString();if(0===Le.length)this.urlWithParams=se;else{const Ze=se.indexOf("?");this.urlWithParams=se+(-1===Ze?"?":Ze<se.length-1?"&":"")+Le}}else this.params=new lt,this.urlWithParams=se}serializeBody(){return null===this.body?null:at(this.body)||Qe(this.body)||ht(this.body)||function Bt(Qt){return typeof URLSearchParams<"u"&&Qt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ht(this.body)?null:Qe(this.body)?this.body.type||null:at(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(K={}){const se=K.method||this.method,he=K.url||this.url,re=K.responseType||this.responseType,_e=void 0!==K.body?K.body:this.body,Le=void 0!==K.withCredentials?K.withCredentials:this.withCredentials,Ze=void 0!==K.reportProgress?K.reportProgress:this.reportProgress;let Pe=K.headers||this.headers,ot=K.params||this.params;const Nt=K.context??this.context;return void 0!==K.setHeaders&&(Pe=Object.keys(K.setHeaders).reduce((rn,dn)=>rn.set(dn,K.setHeaders[dn]),Pe)),K.setParams&&(ot=Object.keys(K.setParams).reduce((rn,dn)=>rn.set(dn,K.setParams[dn]),ot)),new Ft(se,he,_e,{params:ot,headers:Pe,context:Nt,reportProgress:Ze,responseType:re,withCredentials:Le})}}var kt=(()=>((kt=kt||{})[kt.Sent=0]="Sent",kt[kt.UploadProgress=1]="UploadProgress",kt[kt.ResponseHeader=2]="ResponseHeader",kt[kt.DownloadProgress=3]="DownloadProgress",kt[kt.Response=4]="Response",kt[kt.User=5]="User",kt))();class bn{constructor(K,se=200,he="OK"){this.headers=K.headers||new Ve,this.status=void 0!==K.status?K.status:se,this.statusText=K.statusText||he,this.url=K.url||null,this.ok=this.status>=200&&this.status<300}}class Kt extends bn{constructor(K={}){super(K),this.type=kt.ResponseHeader}clone(K={}){return new Kt({headers:K.headers||this.headers,status:void 0!==K.status?K.status:this.status,statusText:K.statusText||this.statusText,url:K.url||this.url||void 0})}}class Zn extends bn{constructor(K={}){super(K),this.type=kt.Response,this.body=void 0!==K.body?K.body:null}clone(K={}){return new Zn({body:void 0!==K.body?K.body:this.body,headers:K.headers||this.headers,status:void 0!==K.status?K.status:this.status,statusText:K.statusText||this.statusText,url:K.url||this.url||void 0})}}class wn extends bn{constructor(K){super(K,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${K.url||"(unknown url)"}`:`Http failure response for ${K.url||"(unknown url)"}: ${K.status} ${K.statusText}`,this.error=K.error||null}}function Vr(Qt,K){return{body:K,headers:Qt.headers,context:Qt.context,observe:Qt.observe,params:Qt.params,reportProgress:Qt.reportProgress,responseType:Qt.responseType,withCredentials:Qt.withCredentials}}let Hi=(()=>{class Qt{constructor(se){this.handler=se}request(se,he,re={}){let _e;if(se instanceof Ft)_e=se;else{let Pe,ot;Pe=re.headers instanceof Ve?re.headers:new Ve(re.headers),re.params&&(ot=re.params instanceof lt?re.params:new lt({fromObject:re.params})),_e=new Ft(se,he,void 0!==re.body?re.body:null,{headers:Pe,context:re.context,params:ot,reportProgress:re.reportProgress,responseType:re.responseType||"json",withCredentials:re.withCredentials})}const Le=(0,u.of)(_e).pipe((0,Y.b)(Pe=>this.handler.handle(Pe)));if(se instanceof Ft||"events"===re.observe)return Le;const Ze=Le.pipe((0,i.h)(Pe=>Pe instanceof Zn));switch(re.observe||"body"){case"body":switch(_e.responseType){case"arraybuffer":return Ze.pipe((0,q.U)(Pe=>{if(null!==Pe.body&&!(Pe.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Pe.body}));case"blob":return Ze.pipe((0,q.U)(Pe=>{if(null!==Pe.body&&!(Pe.body instanceof Blob))throw new Error("Response is not a Blob.");return Pe.body}));case"text":return Ze.pipe((0,q.U)(Pe=>{if(null!==Pe.body&&"string"!=typeof Pe.body)throw new Error("Response is not a string.");return Pe.body}));default:return Ze.pipe((0,q.U)(Pe=>Pe.body))}case"response":return Ze;default:throw new Error(`Unreachable: unhandled observe type ${re.observe}}`)}}delete(se,he={}){return this.request("DELETE",se,he)}get(se,he={}){return this.request("GET",se,he)}head(se,he={}){return this.request("HEAD",se,he)}jsonp(se,he){return this.request("JSONP",se,{params:(new lt).append(he,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(se,he={}){return this.request("OPTIONS",se,he)}patch(se,he,re={}){return this.request("PATCH",se,Vr(re,he))}post(se,he,re={}){return this.request("POST",se,Vr(re,he))}put(se,he,re={}){return this.request("PUT",se,Vr(re,he))}}return Qt.\u0275fac=function(se){return new(se||Qt)(O.LFG(de))},Qt.\u0275prov=O.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();function Vi(Qt,K){return K(Qt)}function Hr(Qt,K){return(se,he)=>K.intercept(se,{handle:re=>Qt(re,he)})}const Ot=new O.OlP("HTTP_INTERCEPTORS"),Jt=new O.OlP("HTTP_INTERCEPTOR_FNS");function ln(){let Qt=null;return(K,se)=>(null===Qt&&(Qt=((0,O.f3M)(Ot,{optional:!0})??[]).reduceRight(Hr,Vi)),Qt(K,se))}let fn=(()=>{class Qt extends de{constructor(se,he){super(),this.backend=se,this.injector=he,this.chain=null}handle(se){if(null===this.chain){const he=Array.from(new Set(this.injector.get(Jt)));this.chain=he.reduceRight((re,_e)=>function en(Qt,K,se){return(he,re)=>se.runInContext(()=>K(he,_e=>Qt(_e,re)))}(re,_e,this.injector),Vi)}return this.chain(se,he=>this.backend.handle(he))}}return Qt.\u0275fac=function(se){return new(se||Qt)(O.LFG(we),O.LFG(O.lqb))},Qt.\u0275prov=O.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();const mn=/^\)\]\}',?\n/;let ii=(()=>{class Qt{constructor(se){this.xhrFactory=se}handle(se){if("JSONP"===se.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fe.y(he=>{const re=this.xhrFactory.build();if(re.open(se.method,se.urlWithParams),se.withCredentials&&(re.withCredentials=!0),se.headers.forEach((et,tt)=>re.setRequestHeader(et,tt.join(","))),se.headers.has("Accept")||re.setRequestHeader("Accept","application/json, text/plain, */*"),!se.headers.has("Content-Type")){const et=se.detectContentTypeHeader();null!==et&&re.setRequestHeader("Content-Type",et)}if(se.responseType){const et=se.responseType.toLowerCase();re.responseType="json"!==et?et:"text"}const _e=se.serializeBody();let Le=null;const Ze=()=>{if(null!==Le)return Le;const et=re.statusText||"OK",tt=new Ve(re.getAllResponseHeaders()),Ye=function kn(Qt){return"responseURL"in Qt&&Qt.responseURL?Qt.responseURL:/^X-Request-URL:/m.test(Qt.getAllResponseHeaders())?Qt.getResponseHeader("X-Request-URL"):null}(re)||se.url;return Le=new Kt({headers:tt,status:re.status,statusText:et,url:Ye}),Le},Pe=()=>{let{headers:et,status:tt,statusText:Ye,url:bt}=Ze(),mt=null;204!==tt&&(mt=typeof re.response>"u"?re.responseText:re.response),0===tt&&(tt=mt?200:0);let cn=tt>=200&&tt<300;if("json"===se.responseType&&"string"==typeof mt){const xn=mt;mt=mt.replace(mn,"");try{mt=""!==mt?JSON.parse(mt):null}catch(In){mt=xn,cn&&(cn=!1,mt={error:In,text:mt})}}cn?(he.next(new Zn({body:mt,headers:et,status:tt,statusText:Ye,url:bt||void 0})),he.complete()):he.error(new wn({error:mt,headers:et,status:tt,statusText:Ye,url:bt||void 0}))},ot=et=>{const{url:tt}=Ze(),Ye=new wn({error:et,status:re.status||0,statusText:re.statusText||"Unknown Error",url:tt||void 0});he.error(Ye)};let Nt=!1;const rn=et=>{Nt||(he.next(Ze()),Nt=!0);let tt={type:kt.DownloadProgress,loaded:et.loaded};et.lengthComputable&&(tt.total=et.total),"text"===se.responseType&&re.responseText&&(tt.partialText=re.responseText),he.next(tt)},dn=et=>{let tt={type:kt.UploadProgress,loaded:et.loaded};et.lengthComputable&&(tt.total=et.total),he.next(tt)};return re.addEventListener("load",Pe),re.addEventListener("error",ot),re.addEventListener("timeout",ot),re.addEventListener("abort",ot),se.reportProgress&&(re.addEventListener("progress",rn),null!==_e&&re.upload&&re.upload.addEventListener("progress",dn)),re.send(_e),he.next({type:kt.Sent}),()=>{re.removeEventListener("error",ot),re.removeEventListener("abort",ot),re.removeEventListener("load",Pe),re.removeEventListener("timeout",ot),se.reportProgress&&(re.removeEventListener("progress",rn),null!==_e&&re.upload&&re.upload.removeEventListener("progress",dn)),re.readyState!==re.DONE&&re.abort()}})}}return Qt.\u0275fac=function(se){return new(se||Qt)(O.LFG(o.JF))},Qt.\u0275prov=O.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();const $n=new O.OlP("XSRF_ENABLED"),mr="XSRF-TOKEN",gr=new O.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>mr}),Mo="X-XSRF-TOKEN",qi=new O.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Mo});class j{}let Fe=(()=>{class Qt{constructor(se,he,re){this.doc=se,this.platform=he,this.cookieName=re,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const se=this.doc.cookie||"";return se!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,o.Mx)(se,this.cookieName),this.lastCookieString=se),this.lastToken}}return Qt.\u0275fac=function(se){return new(se||Qt)(O.LFG(o.K0),O.LFG(O.Lbi),O.LFG(gr))},Qt.\u0275prov=O.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();function Yt(Qt,K){const se=Qt.url.toLowerCase();if(!(0,O.f3M)($n)||"GET"===Qt.method||"HEAD"===Qt.method||se.startsWith("http://")||se.startsWith("https://"))return K(Qt);const he=(0,O.f3M)(j).getToken(),re=(0,O.f3M)(qi);return null!=he&&!Qt.headers.has(re)&&(Qt=Qt.clone({headers:Qt.headers.set(re,he)})),K(Qt)}var It=(()=>((It=It||{})[It.Interceptors=0]="Interceptors",It[It.LegacyInterceptors=1]="LegacyInterceptors",It[It.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",It[It.NoXsrfProtection=3]="NoXsrfProtection",It[It.JsonpSupport=4]="JsonpSupport",It[It.RequestsMadeViaParent=5]="RequestsMadeViaParent",It))();function rt(Qt,K){return{\u0275kind:Qt,\u0275providers:K}}function Vt(...Qt){const K=[Hi,ii,fn,{provide:de,useExisting:fn},{provide:we,useExisting:ii},{provide:Jt,useValue:Yt,multi:!0},{provide:$n,useValue:!0},{provide:j,useClass:Fe}];for(const se of Qt)K.push(...se.\u0275providers);return(0,O.MR2)(K)}const hi=new O.OlP("LEGACY_INTERCEPTOR_FN");function _r({cookieName:Qt,headerName:K}){const se=[];return void 0!==Qt&&se.push({provide:gr,useValue:Qt}),void 0!==K&&se.push({provide:qi,useValue:K}),rt(It.CustomXsrfConfiguration,se)}let Gr=(()=>{class Qt{}return Qt.\u0275fac=function(se){return new(se||Qt)},Qt.\u0275mod=O.oAB({type:Qt}),Qt.\u0275inj=O.cJS({providers:[Vt(rt(It.LegacyInterceptors,[{provide:hi,useFactory:ln},{provide:Jt,useExisting:hi,multi:!0}]),_r({cookieName:mr,headerName:Mo}))]}),Qt})()},1571:(tn,nt,N)=>{"use strict";N.d(nt,{QbO:()=>W1,tb:()=>Qb,AFp:()=>qb,ip1:()=>Yb,CZH:()=>Av,hGG:()=>Nx,z2F:()=>Ov,sBO:()=>bx,Sil:()=>tx,_Vd:()=>Du,EJc:()=>X1,Xts:()=>m,SBq:()=>Qu,lqb:()=>No,qLn:()=>L,vpe:()=>Ht,tBr:()=>nr,XFs:()=>j,OlP:()=>Kr,zs3:()=>Ho,ZZ4:()=>nb,aQg:()=>ib,soG:()=>Iv,YKP:()=>N0,h0i:()=>wm,PXZ:()=>fx,R0b:()=>ch,FiY:()=>Bi,Lbi:()=>J1,g9A:()=>Wb,n_E:()=>Cn,Qsj:()=>ea,FYo:()=>Jf,JOm:()=>$u,q3G:()=>Va,tp0:()=>Ms,Rgc:()=>Jn,dDg:()=>cx,eoX:()=>o1,GfV:()=>n,s_b:()=>Ti,ifc:()=>Ye,LMc:()=>Ux,MMx:()=>py,Lck:()=>vb,eFA:()=>l1,Gpc:()=>Be,f3M:()=>re,X6Q:()=>vx,$WT:()=>ri,MR2:()=>_t,_c5:()=>Fx,c2e:()=>Q1,zSh:()=>as,wAp:()=>Mr,vHH:()=>ct,lri:()=>n1,rWj:()=>r1,JZr:()=>dt,EiD:()=>sp,mCW:()=>$d,qzn:()=>Cc,JVY:()=>od,pB0:()=>ll,eBb:()=>ip,L6k:()=>Xa,LAX:()=>Dd,D6c:()=>Lx,cg1:()=>nc,kL8:()=>wg,dqk:()=>Vt,Z0I:()=>Pn,CqO:()=>oh,QGY:()=>dc,F4k:()=>rh,RDi:()=>Vm,AaK:()=>it,z3N:()=>Nu,zW0:()=>U_,qOj:()=>L_,TTD:()=>Ta,_Bn:()=>dy,jDz:()=>wv,xp6:()=>ys,uIk:()=>V_,Tol:()=>Yl,MT6:()=>Ap,ekj:()=>lm,Suo:()=>vy,Xpm:()=>Gi,lG2:()=>Xe,Yz7:()=>Xn,cJS:()=>pi,oAB:()=>At,Yjl:()=>Ct,Y36:()=>hd,_UZ:()=>Gc,GkF:()=>dg,BQk:()=>Dp,ynx:()=>Tp,qZA:()=>cf,TgZ:()=>G_,EpF:()=>cs,n5z:()=>iu,Ikx:()=>i_,SDv:()=>gv,QtT:()=>P0,pQV:()=>uy,LFG:()=>se,$8M:()=>Ec,$Z:()=>Qd,NdJ:()=>Mp,CRH:()=>Tb,O4$:()=>Qa,oxw:()=>Oy,ALo:()=>G,lcZ:()=>ae,xi3:()=>be,gM2:()=>pt,Hsn:()=>Sp,F$t:()=>br,Q6J:()=>H_,s9C:()=>Z_,MGl:()=>ff,DdM:()=>Mm,VKq:()=>Dv,WLB:()=>Sm,kEZ:()=>Mv,iGM:()=>M_,MAs:()=>Yv,KtG:()=>Ra,evT:()=>ze,Jf7:()=>Ie,CHM:()=>ku,oJD:()=>Zm,uOi:()=>Jp,LSH:()=>ap,P3R:()=>qm,B6R:()=>cr,Akn:()=>Rd,Udp:()=>q_,YNc:()=>$v,W1O:()=>Eb,_uU:()=>$y,Oqu:()=>t_,hij:()=>n_,AsE:()=>W_,lnq:()=>Q_,Gf:()=>yy});var o=N(7579),O=N(727),u=N(9751),fe=N(6451),Y=N(8421),i=N(930),q=N(4482);function we(s,l,...c){if(!0===l)return void s();if(!1===l)return;const v=new i.Hp({next:()=>{v.unsubscribe(),s()}});return l(...c).subscribe(v)}function Ve(s){for(let l in s)if(s[l]===Ve)return l;throw Error("Could not find renamed property on target object.")}function De(s,l){for(const c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=l[c])}function it(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(it).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const l=s.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function Ke(s,l){return null==s||""===s?null===l?"":l:null==l||""===l?s:s+" "+l}const je=Ve({__forward_ref__:Ve});function Be(s){return s.__forward_ref__=Be,s.toString=function(){return it(this())},s}function Je(s){return gt(s)?s():s}function gt(s){return"function"==typeof s&&s.hasOwnProperty(je)&&s.__forward_ref__===Be}function lt(s){return s&&!!s.\u0275providers}const dt="https://g.co/ng/security#xss";class ct extends Error{constructor(l,c){super(function at(s,l){return`NG0${Math.abs(s)}${l?": "+l.trim():""}`}(l,c)),this.code=l}}function Qe(s){return"string"==typeof s?s:null==s?"":String(s)}function bn(s,l){throw new ct(-201,!1)}function Nn(s,l,c,v){throw new Error(`ASSERTION ERROR: ${s}`+(null==v?"":` [Expected=> ${c} ${v} ${l} <=Actual]`))}function Xn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function pi(s){return{providers:s.providers||[],imports:s.imports||[]}}function Mn(s){return mn(s,mr)||mn(s,Mo)}function Pn(s){return null!==Mn(s)}function mn(s,l){return s.hasOwnProperty(l)?s[l]:null}function $n(s){return s&&(s.hasOwnProperty(gr)||s.hasOwnProperty(qi))?s[gr]:null}const mr=Ve({\u0275prov:Ve}),gr=Ve({\u0275inj:Ve}),Mo=Ve({ngInjectableDef:Ve}),qi=Ve({ngInjectorDef:Ve});var j=(()=>((j=j||{})[j.Default=0]="Default",j[j.Host=1]="Host",j[j.Self=2]="Self",j[j.SkipSelf=4]="SkipSelf",j[j.Optional=8]="Optional",j))();let Fe;function ut(s){const l=Fe;return Fe=s,l}function It(s,l,c){const v=Mn(s);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:c&j.Optional?null:void 0!==l?l:void bn(it(s))}const Vt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_r={},pr="__NG_DI_FLAG__",bo="ngTempTokenPath",wr=/\n/gm,ao="__source";let Zr;function Qt(s){const l=Zr;return Zr=s,l}function K(s,l=j.Default){if(void 0===Zr)throw new ct(-203,!1);return null===Zr?It(s,void 0,l):Zr.get(s,l&j.Optional?null:void 0,l)}function se(s,l=j.Default){return(function Yt(){return Fe}()||K)(Je(s),l)}function re(s,l=j.Default){return se(s,_e(l))}function _e(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Le(s){const l=[];for(let c=0;c<s.length;c++){const v=Je(s[c]);if(Array.isArray(v)){if(0===v.length)throw new ct(900,!1);let C,A=j.Default;for(let z=0;z<v.length;z++){const Q=v[z],le=Pe(Q);"number"==typeof le?-1===le?C=Q.token:A|=le:C=Q}l.push(se(C,A))}else l.push(se(v))}return l}function Ze(s,l){return s[pr]=l,s.prototype[pr]=l,s}function Pe(s){return s[pr]}function rn(s){return{toString:s}.toString()}var dn=(()=>((dn=dn||{})[dn.OnPush=0]="OnPush",dn[dn.Default=1]="Default",dn))(),Ye=(()=>{return(s=Ye||(Ye={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ye;var s})();const bt={},mt=[],cn=Ve({\u0275cmp:Ve}),xn=Ve({\u0275dir:Ve}),In=Ve({\u0275pipe:Ve}),ai=Ve({\u0275mod:Ve}),Bn=Ve({\u0275fac:Ve}),Ni=Ve({__NG_ELEMENT_ID__:Ve});let ur=0;function Gi(s){return rn(()=>{const c=!0===s.standalone,v={},C={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===dn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ye.Emulated,id:"c"+ur++,styles:s.styles||mt,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},A=s.dependencies,z=s.features;return C.inputs=Te(s.inputs,v),C.outputs=Te(s.outputs),z&&z.forEach(Q=>Q(C)),C.directiveDefs=A?()=>("function"==typeof A?A():A).map(Wi).filter(xo):null,C.pipeDefs=A?()=>("function"==typeof A?A():A).map(Hn).filter(xo):null,C})}function cr(s,l,c){const v=s.\u0275cmp;v.directiveDefs=()=>("function"==typeof l?l():l).map(Wi),v.pipeDefs=()=>("function"==typeof c?c():c).map(Hn)}function Wi(s){return St(s)||Tn(s)}function xo(s){return null!==s}function At(s){return rn(()=>({type:s.type,bootstrap:s.bootstrap||mt,declarations:s.declarations||mt,imports:s.imports||mt,exports:s.exports||mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Te(s,l){if(null==s)return bt;const c={};for(const v in s)if(s.hasOwnProperty(v)){let C=s[v],A=C;Array.isArray(C)&&(A=C[1],C=C[0]),c[C]=v,l&&(l[C]=A)}return c}const Xe=Gi;function Ct(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function St(s){return s[cn]||null}function Tn(s){return s[xn]||null}function Hn(s){return s[In]||null}function ri(s){const l=St(s)||Tn(s)||Hn(s);return null!==l&&l.standalone}function gi(s,l){const c=s[ai]||null;if(!c&&!0===l)throw new Error(`Type ${it(s)} does not have '\u0275mod' property.`);return c}function uo(s){return Array.isArray(s)&&"object"==typeof s[1]}function go(s){return Array.isArray(s)&&!0===s[1]}function vs(s){return 0!=(4&s.flags)}function bs(s){return s.componentOffset>-1}function xs(s){return 1==(1&s.flags)}function ko(s){return null!==s.template}function Zo(s){return 0!=(256&s[2])}function Js(s,l){return s.hasOwnProperty(Bn)?s[Bn]:null}class Pa{constructor(l,c,v){this.previousValue=l,this.currentValue=c,this.firstChange=v}isFirstChange(){return this.firstChange}}function Ta(){return _l}function _l(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ql),yl}function yl(){const s=$r(this),l=s?.current;if(l){const c=s.previous;if(c===bt)s.previous=l;else for(let v in l)c[v]=l[v];s.current=null,this.ngOnChanges(l)}}function Ql(s,l,c,v){const C=this.declaredInputs[c],A=$r(s)||function rc(s,l){return s[Kl]=l}(s,{previous:bt,current:null}),z=A.current||(A.current={}),Q=A.previous,le=Q[C];z[C]=new Pa(le&&le.currentValue,l,Q===bt),s[v]=l}Ta.ngInherit=!0;const Kl="__ngSimpleChanges__";function $r(s){return s[Kl]||null}function So(s){for(;Array.isArray(s);)s=s[0];return s}function Is(s,l){return So(l[s])}function gn(s,l){return So(l[s.index])}function Ya(s,l){return s.data[l]}function Cs(s,l){return s[l]}function da(s,l){const c=l[s];return uo(c)?c:c[0]}function zs(s){return 64==(64&s[2])}function Jo(s,l){return null==l?null:s[l]}function ye(s){s[18]=0}function ve(s,l){s[5]+=l;let c=s,v=s[3];for(;null!==v&&(1===l&&1===c[5]||-1===l&&0===c[5]);)v[5]+=l,c=v,v=v[3]}const ne={lFrame:co(null),bindingsEnabled:!0};function Qs(){return ne.bindingsEnabled}function Un(){return ne.lFrame.lView}function vr(){return ne.lFrame.tView}function ku(s){return ne.lFrame.contextLView=s,s[8]}function Ra(s){return ne.lFrame.contextLView=null,s}function Ro(){let s=fu();for(;null!==s&&64===s.type;)s=s.parent;return s}function fu(){return ne.lFrame.currentTNode}function eu(){const s=ne.lFrame,l=s.currentTNode;return s.isParent?l:l.parent}function ha(s,l){const c=ne.lFrame;c.currentTNode=s,c.isParent=l}function nl(){return ne.lFrame.isParent}function pa(){ne.lFrame.isParent=!1}function Os(){const s=ne.lFrame;let l=s.bindingRootIndex;return-1===l&&(l=s.bindingRootIndex=s.tView.bindingStartIndex),l}function Na(){return ne.lFrame.bindingIndex}function bl(){return ne.lFrame.bindingIndex++}function fa(s){const l=ne.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+s,c}function gu(s){ne.lFrame.inI18n=s}function yc(s,l){const c=ne.lFrame;c.bindingIndex=c.bindingRootIndex=s,ts(l)}function ts(s){ne.lFrame.currentDirectiveIndex=s}function Eo(){return ne.lFrame.currentQueryIndex}function dr(s){ne.lFrame.currentQueryIndex=s}function _u(s){const l=s[1];return 2===l.type?l.declTNode:1===l.type?s[6]:null}function La(s,l,c){if(c&j.SkipSelf){let C=l,A=s;for(;!(C=C.parent,null!==C||c&j.Host||(C=_u(A),null===C||(A=A[15],10&C.type))););if(null===C)return!1;l=C,s=A}const v=ne.lFrame=Cr();return v.currentTNode=l,v.lView=s,!0}function Ja(s){const l=Cr(),c=s[1];ne.lFrame=l,l.currentTNode=c.firstChild,l.lView=s,l.tView=c,l.contextLView=s,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function Cr(){const s=ne.lFrame,l=null===s?null:s.child;return null===l?co(s):l}function co(s){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=l),l}function ps(){const s=ne.lFrame;return ne.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ga=ps;function Wa(){const s=ps();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _a(){return ne.lFrame.selectedIndex}function Ul(s){ne.lFrame.selectedIndex=s}function no(){const s=ne.lFrame;return Ya(s.tView,s.selectedIndex)}function Qa(){ne.lFrame.currentNamespace="svg"}function Ue(s,l){for(let c=l.directiveStart,v=l.directiveEnd;c<v;c++){const A=s.data[c].type.prototype,{ngAfterContentInit:z,ngAfterContentChecked:Q,ngAfterViewInit:le,ngAfterViewChecked:Ee,ngOnDestroy:qe}=A;z&&(s.contentHooks||(s.contentHooks=[])).push(-c,z),Q&&((s.contentHooks||(s.contentHooks=[])).push(c,Q),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,Q)),le&&(s.viewHooks||(s.viewHooks=[])).push(-c,le),Ee&&((s.viewHooks||(s.viewHooks=[])).push(c,Ee),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,Ee)),null!=qe&&(s.destroyHooks||(s.destroyHooks=[])).push(c,qe)}}function vt(s,l,c){oi(s,l,3,c)}function an(s,l,c,v){(3&s[2])===c&&oi(s,l,c,v)}function En(s,l){let c=s[2];(3&c)===l&&(c&=2047,c+=1,s[2]=c)}function oi(s,l,c,v){const A=v??-1,z=l.length-1;let Q=0;for(let le=void 0!==v?65535&s[18]:0;le<z;le++)if("number"==typeof l[le+1]){if(Q=l[le],null!=v&&Q>=v)break}else l[le]<0&&(s[18]+=65536),(Q<A||-1==A)&&(Jr(s,c,l,le),s[18]=(4294901760&s[18])+le+2),le++}function Jr(s,l,c,v){const C=c[v]<0,A=c[v+1],Q=s[C?-c[v]:c[v]];if(C){if(s[2]>>11<s[18]>>16&&(3&s[2])===l){s[2]+=2048;try{A.call(Q)}finally{}}}else try{A.call(Q)}finally{}}class Tr{constructor(l,c,v){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=v}}function Fo(s,l,c){let v=0;for(;v<c.length;){const C=c[v];if("number"==typeof C){if(0!==C)break;v++;const A=c[v++],z=c[v++],Q=c[v++];s.setAttribute(l,z,Q,A)}else{const A=C,z=c[++v];zl(A)?s.setProperty(l,A,z):s.setAttribute(l,A,z),v++}}return v}function Ma(s){return 3===s||4===s||6===s}function zl(s){return 64===s.charCodeAt(0)}function yu(s,l){if(null!==l&&0!==l.length)if(null===s||0===s.length)s=l.slice();else{let c=-1;for(let v=0;v<l.length;v++){const C=l[v];"number"==typeof C?c=C:0===c||Ks(s,c,C,null,-1===c||2===c?l[++v]:null)}}return s}function Ks(s,l,c,v,C){let A=0,z=s.length;if(-1===l)z=-1;else for(;A<s.length;){const Q=s[A++];if("number"==typeof Q){if(Q===l){z=-1;break}if(Q>l){z=A-1;break}}}for(;A<s.length;){const Q=s[A];if("number"==typeof Q)break;if(Q===c){if(null===v)return void(null!==C&&(s[A+1]=C));if(v===s[A+1])return void(s[A+2]=C)}A++,null!==v&&A++,null!==C&&A++}-1!==z&&(s.splice(z,0,l),A=z+1),s.splice(A++,0,c),null!==v&&s.splice(A++,0,v),null!==C&&s.splice(A++,0,C)}function Gs(s){return-1!==s}function rr(s){return 32767&s}function ns(s,l){let c=function Ba(s){return s>>16}(s),v=l;for(;c>0;)v=v[15],c--;return v}let Ps=!0;function Ua(s){const l=Ps;return Ps=s,l}let sc=0;const li={};function jl(s,l){const c=$s(s,l);if(-1!==c)return c;const v=l[1];v.firstCreatePass&&(s.injectorIndex=l.length,ss(v.data,s),ss(l,null),ss(v.blueprint,null));const C=ms(s,l),A=s.injectorIndex;if(Gs(C)){const z=rr(C),Q=ns(C,l),le=Q[1].data;for(let Ee=0;Ee<8;Ee++)l[A+Ee]=Q[z+Ee]|le[z+Ee]}return l[A+8]=C,A}function ss(s,l){s.push(0,0,0,0,0,0,0,0,l)}function $s(s,l){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===l[s.injectorIndex+8]?-1:s.injectorIndex}function ms(s,l){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,v=null,C=l;for(;null!==C;){if(v=Zu(C),null===v)return-1;if(c++,C=C[15],-1!==v.injectorIndex)return v.injectorIndex|c<<16}return-1}function rl(s,l,c){!function ei(s,l,c){let v;"string"==typeof c?v=c.charCodeAt(0)||0:c.hasOwnProperty(Ni)&&(v=c[Ni]),null==v&&(v=c[Ni]=sc++);const C=255&v;l.data[s+(C>>5)]|=1<<C}(s,l,c)}function nu(s,l,c){if(c&j.Optional||void 0!==s)return s;bn()}function zr(s,l,c,v){if(c&j.Optional&&void 0===v&&(v=null),!(c&(j.Self|j.Host))){const C=s[9],A=ut(void 0);try{return C?C.get(l,v,c&j.Optional):It(l,v,c&j.Optional)}finally{ut(A)}}return nu(v,0,c)}function Ge(s,l,c,v=j.Default,C){if(null!==s){if(1024&l[2]){const z=function Gu(s,l,c,v,C){let A=s,z=l;for(;null!==A&&null!==z&&1024&z[2]&&!(256&z[2]);){const Q=me(A,z,c,v|j.Self,li);if(Q!==li)return Q;let le=A.parent;if(!le){const Ee=z[21];if(Ee){const qe=Ee.get(c,li,v);if(qe!==li)return qe}le=Zu(z),z=z[15]}A=le}return C}(s,l,c,v,li);if(z!==li)return z}const A=me(s,l,c,v,li);if(A!==li)return A}return zr(l,c,v,C)}function me(s,l,c,v,C){const A=function hn(s){if("string"==typeof s)return s.charCodeAt(0)||0;const l=s.hasOwnProperty(Ni)?s[Ni]:void 0;return"number"==typeof l?l>=0?255&l:gs:l}(c);if("function"==typeof A){if(!La(l,s,v))return v&j.Host?nu(C,0,v):zr(l,c,v,C);try{const z=A(v);if(null!=z||v&j.Optional)return z;bn()}finally{ga()}}else if("number"==typeof A){let z=null,Q=$s(s,l),le=-1,Ee=v&j.Host?l[16][6]:null;for((-1===Q||v&j.SkipSelf)&&(le=-1===Q?ms(s,l):l[Q+8],-1!==le&&Li(v,!1)?(z=l[1],Q=rr(le),l=ns(le,l)):Q=-1);-1!==Q;){const qe=l[1];if(Ii(A,Q,qe.data)){const Tt=J(Q,l,c,z,v,Ee);if(Tt!==li)return Tt}le=l[Q+8],-1!==le&&Li(v,l[1].data[Q+8]===Ee)&&Ii(A,Q,l)?(z=qe,Q=rr(le),l=ns(le,l)):Q=-1}}return C}function J(s,l,c,v,C,A){const z=l[1],Q=z.data[s+8],qe=He(Q,z,c,null==v?bs(Q)&&Ps:v!=z&&0!=(3&Q.type),C&j.Host&&A===Q);return null!==qe?zt(l,z,qe,Q):li}function He(s,l,c,v,C){const A=s.providerIndexes,z=l.data,Q=1048575&A,le=s.directiveStart,qe=A>>20,Zt=C?Q+qe:s.directiveEnd;for(let sn=v?Q:Q+qe;sn<Zt;sn++){const Ln=z[sn];if(sn<le&&c===Ln||sn>=le&&Ln.type===c)return sn}if(C){const sn=z[le];if(sn&&ko(sn)&&sn.type===c)return le}return null}function zt(s,l,c,v){let C=s[c];const A=l.data;if(function er(s){return s instanceof Tr}(C)){const z=C;z.resolving&&function Bt(s,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${s}`:"";throw new ct(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ht(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Qe(s)}(A[c]));const Q=Ua(z.canSeeViewProviders);z.resolving=!0;const le=z.injectImpl?ut(z.injectImpl):null;La(s,v,j.Default);try{C=s[c]=z.factory(void 0,A,s,v),l.firstCreatePass&&c>=v.directiveStart&&function X(s,l,c){const{ngOnChanges:v,ngOnInit:C,ngDoCheck:A}=l.type.prototype;if(v){const z=_l(l);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,z),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,z)}C&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,C),A&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,A),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,A))}(c,A[c],l)}finally{null!==le&&ut(le),Ua(Q),z.resolving=!1,ga()}}return C}function Ii(s,l,c){return!!(c[l+(s>>5)]&1<<s)}function Li(s,l){return!(s&j.Self||s&j.Host&&l)}class Co{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,v){return Ge(this._tNode,this._lView,l,_e(v),c)}}function gs(){return new Co(Ro(),Un())}function iu(s){return rn(()=>{const l=s.prototype.constructor,c=l[Bn]||Hu(l),v=Object.prototype;let C=Object.getPrototypeOf(s.prototype).constructor;for(;C&&C!==v;){const A=C[Bn]||Hu(C);if(A&&A!==c)return A;C=Object.getPrototypeOf(C)}return A=>new A})}function Hu(s){return gt(s)?()=>{const l=Hu(Je(s));return l&&l()}:Js(s)}function Zu(s){const l=s[1],c=l.type;return 2===c?l.declTNode:1===c?s[6]:null}function Ec(s){return function xl(s,l){if("class"===l)return s.classes;if("style"===l)return s.styles;const c=s.attrs;if(c){const v=c.length;let C=0;for(;C<v;){const A=c[C];if(Ma(A))break;if(0===A)C+=2;else if("number"==typeof A)for(C++;C<v&&"string"==typeof c[C];)C++;else{if(A===l)return c[C+1];C+=2}}}return null}(Ro(),s)}const za="__parameters__";function wl(s,l,c){return rn(()=>{const v=function Ds(s){return function(...c){if(s){const v=s(...c);for(const C in v)this[C]=v[C]}}}(l);function C(...A){if(this instanceof C)return v.apply(this,A),this;const z=new C(...A);return Q.annotation=z,Q;function Q(le,Ee,qe){const Tt=le.hasOwnProperty(za)?le[za]:Object.defineProperty(le,za,{value:[]})[za];for(;Tt.length<=qe;)Tt.push(null);return(Tt[qe]=Tt[qe]||[]).push(z),le}}return c&&(C.prototype=Object.create(c.prototype)),C.prototype.ngMetadataName=s,C.annotationCls=C,C})}class Kr{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Xn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ue(s,l){s.forEach(c=>Array.isArray(c)?ue(c,l):l(c))}function oe(s,l,c){l>=s.length?s.push(c):s.splice(l,0,c)}function Ne(s,l){return l>=s.length-1?s.pop():s.splice(l,1)[0]}function st(s,l){const c=[];for(let v=0;v<s;v++)c.push(l);return c}function yn(s,l,c){let v=Rn(s,l);return v>=0?s[1|v]=c:(v=~v,function Rt(s,l,c,v){let C=s.length;if(C==l)s.push(c,v);else if(1===C)s.push(v,s[0]),s[0]=c;else{for(C--,s.push(s[C-1],s[C]);C>l;)s[C]=s[C-2],C--;s[l]=c,s[l+1]=v}}(s,v,l,c)),v}function zn(s,l){const c=Rn(s,l);if(c>=0)return s[1|c]}function Rn(s,l){return function Mi(s,l,c){let v=0,C=s.length>>c;for(;C!==v;){const A=v+(C-v>>1),z=s[A<<c];if(l===z)return A<<c;z>l?C=A:v=A+1}return~(C<<c)}(s,l,1)}const nr=Ze(wl("Inject",s=>({token:s})),-1),Bi=Ze(wl("Optional"),8),Ms=Ze(wl("SkipSelf"),4);var $u=(()=>(($u=$u||{})[$u.Important=1]="Important",$u[$u.DashCase=2]="DashCase",$u))();const Pf=/^>|^->|<!--|-->|--!>|<!-$/g,hh=/(<|>)/;const Ud=new Map;let ed=0;const xc="__ngContext__";function Ka(s,l){uo(l)?(s[xc]=l[20],function Gh(s){Ud.set(s[20],s)}(l)):s[xc]=l}let Lp;function Bp(s,l){return Lp(s,l)}function vd(s){const l=s[3];return go(l)?l[3]:l}function Ff(s){return Up(s[13])}function qh(s){return Up(s[4])}function Up(s){for(;null!==s&&!go(s);)s=s[4];return s}function su(s,l,c,v,C){if(null!=v){let A,z=!1;go(v)?A=v:uo(v)&&(z=!0,v=v[0]);const Q=So(v);0===s&&null!==c?null==C?Bm(l,c,Q):jd(l,c,Q,C||null,!0):1===s&&null!==c?jd(l,c,Q,C||null,!0):2===s?jp(l,Q,z):3===s&&l.destroyNode(Q),null!=A&&function Ch(s,l,c,v,C){const A=c[7];A!==So(c)&&su(l,s,v,A,C);for(let Q=10;Q<c.length;Q++){const le=c[Q];Nc(le[1],le,s,l,v,A)}}(l,s,A,c,C)}}function mh(s,l){return s.createText(l)}function bd(s,l,c){s.setValue(l,c)}function O_(s,l){return s.createComment(function ph(s){return s.replace(Pf,l=>l.replace(hh,"\u200b$1\u200b"))}(l))}function gh(s,l,c){return s.createElement(l,c)}function nd(s,l){const c=s[9],v=c.indexOf(l),C=l[3];512&l[2]&&(l[2]&=-513,ve(C,-1)),c.splice(v,1)}function Nf(s,l){if(s.length<=10)return;const c=10+l,v=s[c];if(v){const C=v[17];null!==C&&C!==s&&nd(C,v),l>0&&(s[c-1][4]=v[4]);const A=Ne(s,10+l);!function _h(s,l){Nc(s,l,l[11],2,null,null),l[0]=null,l[6]=null}(v[1],v);const z=A[19];null!==z&&z.detachView(A[1]),v[3]=null,v[4]=null,v[2]&=-65}return v}function xd(s,l){if(!(128&l[2])){const c=l[11];c.destroyNode&&Nc(s,l,c,3,null,null),function Jh(s){let l=s[13];if(!l)return yh(s[1],s);for(;l;){let c=null;if(uo(l))c=l[13];else{const v=l[10];v&&(c=v)}if(!c){for(;l&&!l[4]&&l!==s;)uo(l)&&yh(l[1],l),l=l[3];null===l&&(l=s),uo(l)&&yh(l[1],l),c=l&&l[4]}l=c}}(l)}}function yh(s,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function Wh(s,l){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let v=0;v<c.length;v+=2){const C=l[c[v]];if(!(C instanceof Tr)){const A=c[v+1];if(Array.isArray(A))for(let z=0;z<A.length;z+=2){const Q=C[A[z]],le=A[z+1];try{le.call(Q)}finally{}}else try{A.call(C)}finally{}}}}(s,l),function Lf(s,l){const c=s.cleanup,v=l[7];let C=-1;if(null!==c)for(let A=0;A<c.length-1;A+=2)if("string"==typeof c[A]){const z=c[A+3];z>=0?v[C=z]():v[C=-z].unsubscribe(),A+=2}else{const z=v[C=c[A+1]];c[A].call(z)}if(null!==v){for(let A=C+1;A<v.length;A++)(0,v[A])();l[7]=null}}(s,l),1===l[1].type&&l[11].destroy();const c=l[17];if(null!==c&&go(l[3])){c!==l[3]&&nd(c,l);const v=l[19];null!==v&&v.detachView(s)}!function Pm(s){Ud.delete(s[20])}(l)}}function cc(s,l,c){return vh(s,l.parent,c)}function vh(s,l,c){let v=l;for(;null!==v&&40&v.type;)v=(l=v).parent;if(null===v)return c[0];{const{componentOffset:C}=v;if(C>-1){const{encapsulation:A}=s.data[v.directiveStart+C];if(A===Ye.None||A===Ye.Emulated)return null}return gn(v,c)}}function jd(s,l,c,v,C){s.insertBefore(l,c,v,C)}function Bm(s,l,c){s.appendChild(l,c)}function bh(s,l,c,v,C){null!==v?jd(s,l,c,v,C):Bm(s,l,c)}function Qh(s,l){return s.parentNode(l)}function Bf(s,l,c){return al(s,l,c)}function Uf(s,l,c){return 40&s.type?gn(s,c):null}let wd,Vd,Hp,Xh,al=Uf;function Fc(s,l){al=s,wd=l}function wc(s,l,c,v){const C=cc(s,v,l),A=l[11],Q=Bf(v.parent||l[6],v,l);if(null!=C)if(Array.isArray(c))for(let le=0;le<c.length;le++)bh(A,C,c[le],Q,!1);else bh(A,C,c,Q,!1);void 0!==wd&&wd(A,v,l,c,C)}function Cd(s,l){if(null!==l){const c=l.type;if(3&c)return gn(l,s);if(4&c)return wh(-1,s[l.index]);if(8&c){const v=l.child;if(null!==v)return Cd(s,v);{const C=s[l.index];return go(C)?wh(-1,C):So(C)}}if(32&c)return Bp(l,s)()||So(s[l.index]);{const v=xh(s,l);return null!==v?Array.isArray(v)?v[0]:Cd(vd(s[16]),v):Cd(s,l.next)}}return null}function xh(s,l){return null!==l?s[16][6].projection[l.projection]:null}function wh(s,l){const c=10+s+1;if(c<l.length){const v=l[c],C=v[1].firstChild;if(null!==C)return Cd(v,C)}return l[7]}function jp(s,l,c){const v=Qh(s,l);v&&function Um(s,l,c,v){s.removeChild(l,c,v)}(s,v,l,c)}function id(s,l,c,v,C,A,z){for(;null!=c;){const Q=v[c.index],le=c.type;if(z&&0===l&&(Q&&Ka(So(Q),v),c.flags|=2),32!=(32&c.flags))if(8&le)id(s,l,c.child,v,C,A,!1),su(l,s,C,Q,A);else if(32&le){const Ee=Bp(c,v);let qe;for(;qe=Ee();)su(l,s,C,qe,A);su(l,s,C,Q,A)}else 16&le?zm(s,l,v,c,C,A):su(l,s,C,Q,A);c=z?c.projectionNext:c.next}}function Nc(s,l,c,v,C,A){id(c,v,s.firstChild,l,C,A,!1)}function zm(s,l,c,v,C,A){const z=c[16],le=z[6].projection[v.projection];if(Array.isArray(le))for(let Ee=0;Ee<le.length;Ee++)su(l,s,C,le[Ee],A);else id(s,l,le,z[3],C,A,!0)}function rd(s,l,c){""===c?s.removeAttribute(l,"class"):s.setAttribute(l,"class",c)}function jo(s,l,c){const{mergedAttrs:v,classes:C,styles:A}=c;null!==v&&Fo(s,l,v),null!==C&&rd(s,l,C),null!==A&&function Th(s,l,c){s.setAttribute(l,"style",c)}(s,l,A)}function au(s){return function qu(){if(void 0===Vd&&(Vd=null,Vt.trustedTypes))try{Vd=Vt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Vd}()?.createHTML(s)||s}function Vm(s){Hp=s}function jf(){return void 0!==Hp?Hp:typeof document<"u"?document:void 0}function Hd(){if(void 0===Xh&&(Xh=null,Vt.trustedTypes))try{Xh=Vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xh}function Vf(s){return Hd()?.createHTML(s)||s}function Gd(s){return Hd()?.createScriptURL(s)||s}class Td{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dt})`}}class Rg extends Td{getTypeName(){return"HTML"}}class Hf extends Td{getTypeName(){return"Style"}}class Gp extends Td{getTypeName(){return"Script"}}class tp extends Td{getTypeName(){return"URL"}}class np extends Td{getTypeName(){return"ResourceURL"}}function Nu(s){return s instanceof Td?s.changingThisBreaksApplicationSecurity:s}function Cc(s,l){const c=function Cu(s){return s instanceof Td&&s.getTypeName()||null}(s);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see ${dt})`)}return c===l}function od(s){return new Rg(s)}function Xa(s){return new Hf(s)}function ip(s){return new Gp(s)}function Dd(s){return new tp(s)}function ll(s){return new np(s)}function Zd(s){const l=new Zf(s);return function $f(){try{return!!(new window.DOMParser).parseFromString(au(""),"text/html")}catch{return!1}}()?new Gf(l):l}class Gf{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const c=(new window.DOMParser).parseFromString(au(l),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(l):(c.removeChild(c.firstChild),c)}catch{return null}}}class Zf{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const v=this.inertDocument.createElement("body");c.appendChild(v)}}getInertBodyElement(l){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=au(l),c;const v=this.inertDocument.createElement("body");return v.innerHTML=au(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(v),v}stripCustomNsAttrs(l){const c=l.attributes;for(let C=c.length-1;0<C;C--){const z=c.item(C).name;("xmlns:ns1"===z||0===z.indexOf("ns1:"))&&l.removeAttribute(z)}let v=l.firstChild;for(;v;)v.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(v),v=v.nextSibling}}const Zp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function $d(s){return(s=String(s)).match(Zp)?s:"unsafe:"+s}function Lc(s){const l={};for(const c of s.split(","))l[c]=!0;return l}function Yd(...s){const l={};for(const c of s)for(const v in c)c.hasOwnProperty(v)&&(l[v]=!0);return l}const Md=Lc("area,br,col,hr,img,wbr"),Sd=Lc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mh=Lc("rp,rt"),Sh=Yd(Md,Yd(Sd,Lc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yd(Mh,Lc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yd(Mh,Sd)),Yp=Lc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rp=Yd(Yp,Lc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qp=Lc("script,style,template");class Eh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let c=l.firstChild,v=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?v=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,v&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let C=this.checkClobberedElement(c,c.nextSibling);if(C){c=C;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(l){const c=l.nodeName.toLowerCase();if(!Sh.hasOwnProperty(c))return this.sanitizedSomething=!0,!qp.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const v=l.attributes;for(let C=0;C<v.length;C++){const A=v.item(C),z=A.name,Q=z.toLowerCase();if(!rp.hasOwnProperty(Q)){this.sanitizedSomething=!0;continue}let le=A.value;Yp[Q]&&(le=$d(le)),this.buf.push(" ",z,'="',op(le),'"')}return this.buf.push(">"),!0}endElement(l){const c=l.nodeName.toLowerCase();Sh.hasOwnProperty(c)&&!Md.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(l){this.buf.push(op(l))}checkClobberedElement(l,c){if(c&&(l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return c}}const sd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qd=/([^\#-~ |!])/g;function op(s){return s.replace(/&/g,"&amp;").replace(sd,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(qd,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ad;function sp(s,l){let c=null;try{ad=ad||Zd(s);let v=l?String(l):"";c=ad.getInertBodyElement(v);let C=5,A=v;do{if(0===C)throw new Error("Failed to sanitize html because the input is unstable");C--,v=A,A=c.innerHTML,c=ad.getInertBodyElement(v)}while(v!==A);return au((new Eh).sanitizeChildren(Ed(c)||c))}finally{if(c){const v=Ed(c)||c;for(;v.firstChild;)v.removeChild(v.firstChild)}}}function Ed(s){return"content"in s&&function Gm(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Va=(()=>((Va=Va||{})[Va.NONE=0]="NONE",Va[Va.HTML=1]="HTML",Va[Va.STYLE=2]="STYLE",Va[Va.SCRIPT=3]="SCRIPT",Va[Va.URL=4]="URL",Va[Va.RESOURCE_URL=5]="RESOURCE_URL",Va))();function Zm(s){const l=k();return l?Vf(l.sanitize(Va.HTML,s)||""):Cc(s,"HTML")?Vf(Nu(s)):sp(jf(),Qe(s))}function ap(s){const l=k();return l?l.sanitize(Va.URL,s)||"":Cc(s,"URL")?Nu(s):$d(Qe(s))}function Jp(s){const l=k();if(l)return Gd(l.sanitize(Va.RESOURCE_URL,s)||"");if(Cc(s,"ResourceURL"))return Gd(Nu(s));throw new ct(904,!1)}function qm(s,l,c){return function lp(s,l){return"src"===l&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===l&&("base"===s||"link"===s)?Jp:ap}(l,c)(s)}function k(){const s=Un();return s&&s[12]}const m=new Kr("ENVIRONMENT_INITIALIZER"),M=new Kr("INJECTOR",-1),Z=new Kr("INJECTOR_DEF_TYPES");class pe{get(l,c=_r){if(c===_r){const v=new Error(`NullInjectorError: No provider for ${it(l)}!`);throw v.name="NullInjectorError",v}return c}}function _t(s){return{\u0275providers:s}}function Pt(...s){return{\u0275providers:jt(0,s),\u0275fromNgModule:!0}}function jt(s,...l){const c=[],v=new Set;let C;return ue(l,A=>{const z=A;vn(z,c,[],v)&&(C||(C=[]),C.push(z))}),void 0!==C&&nn(C,c),c}function nn(s,l){for(let c=0;c<s.length;c++){const{providers:C}=s[c];Qn(C,A=>{l.push(A)})}}function vn(s,l,c,v){if(!(s=Je(s)))return!1;let C=null,A=$n(s);const z=!A&&St(s);if(A||z){if(z&&!z.standalone)return!1;C=s}else{const le=s.ngModule;if(A=$n(le),!A)return!1;C=le}const Q=v.has(C);if(z){if(Q)return!1;if(v.add(C),z.dependencies){const le="function"==typeof z.dependencies?z.dependencies():z.dependencies;for(const Ee of le)vn(Ee,l,c,v)}}else{if(!A)return!1;{if(null!=A.imports&&!Q){let Ee;v.add(C);try{ue(A.imports,qe=>{vn(qe,l,c,v)&&(Ee||(Ee=[]),Ee.push(qe))})}finally{}void 0!==Ee&&nn(Ee,l)}if(!Q){const Ee=Js(C)||(()=>new C);l.push({provide:C,useFactory:Ee,deps:mt},{provide:Z,useValue:C,multi:!0},{provide:m,useValue:()=>se(C),multi:!0})}const le=A.providers;null==le||Q||Qn(le,qe=>{l.push(qe)})}}return C!==s&&void 0!==s.providers}function Qn(s,l){for(let c of s)lt(c)&&(c=c.\u0275providers),Array.isArray(c)?Qn(c,l):l(c)}const _i=Ve({provide:String,useValue:Ve});function Xr(s){return null!==s&&"object"==typeof s&&_i in s}function jr(s){return"function"==typeof s}const as=new Kr("Set Injector scope."),Fr={},io={};let Ao;function Vo(){return void 0===Ao&&(Ao=new pe),Ao}class No{}class Wr extends No{get destroyed(){return this._destroyed}constructor(l,c,v,C){super(),this.parent=c,this.source=v,this.scopes=C,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wu(l,z=>this.processProvider(z)),this.records.set(M,Lu(void 0,this)),C.has("environment")&&this.records.set(No,Lu(void 0,this));const A=this.records.get(as);null!=A&&"string"==typeof A.value&&this.scopes.add(A.value),this.injectorDefTypes=new Set(this.get(Z.multi,mt,j.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const c=Qt(this),v=ut(void 0);try{return l()}finally{Qt(c),ut(v)}}get(l,c=_r,v=j.Default){this.assertNotDestroyed(),v=_e(v);const C=Qt(this),A=ut(void 0);try{if(!(v&j.SkipSelf)){let Q=this.records.get(l);if(void 0===Q){const le=function El(s){return"function"==typeof s||"object"==typeof s&&s instanceof Kr}(l)&&Mn(l);Q=le&&this.injectableDefInScope(le)?Lu(Dr(l),Fr):null,this.records.set(l,Q)}if(null!=Q)return this.hydrate(l,Q)}return(v&j.Self?Vo():this.parent).get(l,c=v&j.Optional&&c===_r?null:c)}catch(z){if("NullInjectorError"===z.name){if((z[bo]=z[bo]||[]).unshift(it(l)),C)throw z;return function ot(s,l,c,v){const C=s[bo];throw l[ao]&&C.unshift(l[ao]),s.message=function Nt(s,l,c,v=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let C=it(l);if(Array.isArray(l))C=l.map(it).join(" -> ");else if("object"==typeof l){let A=[];for(let z in l)if(l.hasOwnProperty(z)){let Q=l[z];A.push(z+":"+("string"==typeof Q?JSON.stringify(Q):it(Q)))}C=`{${A.join(", ")}}`}return`${c}${v?"("+v+")":""}[${C}]: ${s.replace(wr,"\n  ")}`}("\n"+s.message,C,c,v),s.ngTokenPath=C,s[bo]=null,s}(z,l,"R3InjectorError",this.source)}throw z}finally{ut(A),Qt(C)}}resolveInjectorInitializers(){const l=Qt(this),c=ut(void 0);try{const v=this.get(m.multi,mt,j.Self);for(const C of v)C()}finally{Qt(l),ut(c)}}toString(){const l=[],c=this.records;for(const v of c.keys())l.push(it(v));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ct(205,!1)}processProvider(l){let c=jr(l=Je(l))?l:Je(l&&l.provide);const v=function Ju(s){return Xr(s)?Lu(void 0,s.useValue):Lu(Sl(s),Fr)}(l);if(jr(l)||!0!==l.multi)this.records.get(c);else{let C=this.records.get(c);C||(C=Lu(void 0,Fr,!0),C.factory=()=>Le(C.multi),this.records.set(c,C)),c=l,C.multi.push(l)}this.records.set(c,v)}hydrate(l,c){return c.value===Fr&&(c.value=io,c.value=c.factory()),"object"==typeof c.value&&c.value&&function lu(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=Je(l.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Dr(s){const l=Mn(s),c=null!==l?l.factory:Js(s);if(null!==c)return c;if(s instanceof Kr)throw new ct(204,!1);if(s instanceof Function)return function Ml(s){const l=s.length;if(l>0)throw st(l,"?"),new ct(204,!1);const c=function kn(s){const l=s&&(s[mr]||s[Mo]);if(l){const c=function ii(s){if(s.hasOwnProperty("name"))return s.name;const l=(""+s).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),l}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ct(204,!1)}function Sl(s,l,c){let v;if(jr(s)){const C=Je(s);return Js(C)||Dr(C)}if(Xr(s))v=()=>Je(s.useValue);else if(function kr(s){return!(!s||!s.useFactory)}(s))v=()=>s.useFactory(...Le(s.deps||[]));else if(function sr(s){return!(!s||!s.useExisting)}(s))v=()=>se(Je(s.useExisting));else{const C=Je(s&&(s.useClass||s.provide));if(!function ld(s){return!!s.deps}(s))return Js(C)||Dr(C);v=()=>new C(...Le(s.deps))}return v}function Lu(s,l,c=!1){return{factory:s,value:l,multi:c?[]:void 0}}function Wu(s,l){for(const c of s)Array.isArray(c)?Wu(c,l):c&&lt(c)?Wu(c.\u0275providers,l):l(c)}class ud{}class _s{}class Bc{resolveComponentFactory(l){throw function Ad(s){const l=Error(`No component factory found for ${it(s)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=s,l}(l)}}let Du=(()=>{class s{}return s.NULL=new Bc,s})();function Tc(){return Al(Ro(),Un())}function Al(s,l){return new Qu(gn(s,l))}let Qu=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Tc,s})();function up(s){return s instanceof Qu?s.nativeElement:s}class Jf{}let ea=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function cd(){const s=Un(),c=da(Ro().index,s);return(uo(c)?c:s)[11]}(),s})(),Wp=(()=>{class s{}return s.\u0275prov=Xn({token:s,providedIn:"root",factory:()=>null}),s})();class n{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const a=new n("15.1.2"),d={};function E(s){return s.ngOriginalError}class L{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l);this._console.error("ERROR",l),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&E(l);for(;c&&E(c);)c=E(c);return c||null}}function Ie(s){return s.ownerDocument.defaultView}function ze(s){return s.ownerDocument}function yt(s){return s instanceof Function?s():s}function An(s,l,c){let v=s.length;for(;;){const C=s.indexOf(l,c);if(-1===C)return C;if(0===C||s.charCodeAt(C-1)<=32){const A=l.length;if(C+A===v||s.charCodeAt(C+A)<=32)return C}c=C+1}}const Fn="ng-template";function Vn(s,l,c){let v=0;for(;v<s.length;){let C=s[v++];if(c&&"class"===C){if(C=s[v],-1!==An(C.toLowerCase(),l,0))return!0}else if(1===C){for(;v<s.length&&"string"==typeof(C=s[v++]);)if(C.toLowerCase()===l)return!0;return!1}}return!1}function Ai(s){return 4===s.type&&s.value!==Fn}function si(s,l,c){return l===(4!==s.type||c?s.value:Fn)}function Oi(s,l,c){let v=4;const C=s.attrs||[],A=function Br(s){for(let l=0;l<s.length;l++)if(Ma(s[l]))return l;return s.length}(C);let z=!1;for(let Q=0;Q<l.length;Q++){const le=l[Q];if("number"!=typeof le){if(!z)if(4&v){if(v=2|1&v,""!==le&&!si(s,le,c)||""===le&&1===l.length){if(Kn(v))return!1;z=!0}}else{const Ee=8&v?le:l[++Q];if(8&v&&null!==s.attrs){if(!Vn(s.attrs,Ee,c)){if(Kn(v))return!1;z=!0}continue}const Tt=Ir(8&v?"class":le,C,Ai(s),c);if(-1===Tt){if(Kn(v))return!1;z=!0;continue}if(""!==Ee){let Zt;Zt=Tt>A?"":C[Tt+1].toLowerCase();const sn=8&v?Zt:null;if(sn&&-1!==An(sn,Ee,0)||2&v&&Ee!==Zt){if(Kn(v))return!1;z=!0}}}}else{if(!z&&!Kn(v)&&!Kn(le))return!1;if(z&&Kn(le))continue;z=!1,v=le|1&v}}return Kn(v)||z}function Kn(s){return 0==(1&s)}function Ir(s,l,c,v){if(null===l)return-1;let C=0;if(v||!c){let A=!1;for(;C<l.length;){const z=l[C];if(z===s)return C;if(3===z||6===z)A=!0;else{if(1===z||2===z){let Q=l[++C];for(;"string"==typeof Q;)Q=l[++C];continue}if(4===z)break;if(0===z){C+=4;continue}}C+=A?1:2}return-1}return function lr(s,l){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const v=s[c];if("number"==typeof v)return-1;if(v===l)return c;c++}return-1}(l,s)}function Ki(s,l,c=!1){for(let v=0;v<l.length;v++)if(Oi(s,l[v],c))return!0;return!1}function Yr(s,l){e:for(let c=0;c<l.length;c++){const v=l[c];if(s.length===v.length){for(let C=0;C<s.length;C++)if(s[C]!==v[C])continue e;return!0}}return!1}function Fi(s,l){return s?":not("+l.trim()+")":l}function _o(s){let l=s[0],c=1,v=2,C="",A=!1;for(;c<s.length;){let z=s[c];if("string"==typeof z)if(2&v){const Q=s[++c];C+="["+z+(Q.length>0?'="'+Q+'"':"")+"]"}else 8&v?C+="."+z:4&v&&(C+=" "+z);else""!==C&&!Kn(z)&&(l+=Fi(A,C),C=""),v=z,A=A||!Kn(v);c++}return""!==C&&(l+=Fi(A,C)),l}const ji={};function ys(s){Fs(vr(),Un(),_a()+s,!1)}function Fs(s,l,c,v){if(!v)if(3==(3&l[2])){const A=s.preOrderCheckHooks;null!==A&&vt(l,A,c)}else{const A=s.preOrderHooks;null!==A&&an(l,A,0,c)}Ul(c)}function Lo(s,l=null,c=null,v){const C=oo(s,l,c,v);return C.resolveInjectorInitializers(),C}function oo(s,l=null,c=null,v,C=new Set){const A=[c||mt,Pt(s)];return v=v||("object"==typeof s?void 0:it(s)),new Wr(A,l||Vo(),v||null,C)}let Ho=(()=>{class s{static create(c,v){if(Array.isArray(c))return Lo({name:""},v,c,"");{const C=c.name??"";return Lo({name:C},c.parent,c.providers,C)}}}return s.THROW_IF_NOT_FOUND=_r,s.NULL=new pe,s.\u0275prov=Xn({token:s,providedIn:"any",factory:()=>se(M)}),s.__NG_ELEMENT_ID__=-1,s})();function hd(s,l=j.Default){const c=Un();return null===c?se(s,l):Ge(Ro(),c,Je(s),l)}function Qd(){throw new Error("invalid")}function Kd(s,l){const c=s.contentQueries;if(null!==c)for(let v=0;v<c.length;v+=2){const A=c[v+1];if(-1!==A){const z=s.data[A];dr(c[v]),z.contentQueries(2,l[A],A)}}}function Od(s,l,c,v,C,A,z,Q,le,Ee,qe){const Tt=l.blueprint.slice();return Tt[0]=C,Tt[2]=76|v,(null!==qe||s&&1024&s[2])&&(Tt[2]|=1024),ye(Tt),Tt[3]=Tt[15]=s,Tt[8]=c,Tt[10]=z||s&&s[10],Tt[11]=Q||s&&s[11],Tt[12]=le||s&&s[12]||null,Tt[9]=Ee||s&&s[9]||null,Tt[6]=A,Tt[20]=function Rc(){return ed++}(),Tt[21]=qe,Tt[16]=2==l.type?s[16]:Tt,Tt}function Mc(s,l,c,v,C){let A=s.data[l];if(null===A)A=Xu(s,l,c,v,C),function qa(){return ne.lFrame.inI18n}()&&(A.flags|=32);else if(64&A.type){A.type=c,A.value=v,A.attrs=C;const z=eu();A.injectorIndex=null===z?-1:z.injectorIndex}return ha(A,!0),A}function Xu(s,l,c,v,C){const A=fu(),z=nl(),le=s.data[l]=function eh(s,l,c,v,C,A){return{type:c,index:v,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:C,attrs:A,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,z?A:A&&A.parent,c,l,v,C);return null===s.firstChild&&(s.firstChild=le),null!==A&&(z?null==A.child&&null!==le.parent&&(A.child=le):null===A.next&&(A.next=le)),le}function Xd(s,l,c,v){if(0===c)return-1;const C=l.length;for(let A=0;A<c;A++)l.push(v),s.blueprint.push(v),s.data.push(null);return C}function pd(s,l,c){Ja(l);try{const v=s.viewQuery;null!==v&&es(1,v,c);const C=s.template;null!==C&&Qm(s,l,C,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Kd(s,l),s.staticViewQueries&&es(2,s.viewQuery,c);const A=s.components;null!==A&&function Xp(s,l){for(let c=0;c<l.length;c++)ig(s,l[c])}(l,A)}catch(v){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),v}finally{l[2]&=-5,Wa()}}function dp(s,l,c,v){const C=l[2];if(128!=(128&C)){Ja(l);try{ye(l),function Ru(s){return ne.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Qm(s,l,c,2,v);const z=3==(3&C);if(z){const Ee=s.preOrderCheckHooks;null!==Ee&&vt(l,Ee,null)}else{const Ee=s.preOrderHooks;null!==Ee&&an(l,Ee,0,null),En(l,0)}if(function vo(s){for(let l=Ff(s);null!==l;l=qh(l)){if(!l[2])continue;const c=l[9];for(let v=0;v<c.length;v++){const C=c[v];512&C[2]||ve(C[3],1),C[2]|=512}}}(l),function Hg(s){for(let l=Ff(s);null!==l;l=qh(l))for(let c=10;c<l.length;c++){const v=l[c],C=v[1];zs(v)&&dp(C,v,C.template,v[8])}}(l),null!==s.contentQueries&&Kd(s,l),z){const Ee=s.contentCheckHooks;null!==Ee&&vt(l,Ee)}else{const Ee=s.contentHooks;null!==Ee&&an(l,Ee,1),En(l,1)}!function Ph(s,l){const c=s.hostBindingOpCodes;if(null!==c)try{for(let v=0;v<c.length;v++){const C=c[v];if(C<0)Ul(~C);else{const A=C,z=c[++v],Q=c[++v];yc(z,A),Q(2,l[A])}}}finally{Ul(-1)}}(s,l);const Q=s.components;null!==Q&&function cp(s,l){for(let c=0;c<l.length;c++)ng(s,l[c])}(l,Q);const le=s.viewQuery;if(null!==le&&es(2,le,v),z){const Ee=s.viewCheckHooks;null!==Ee&&vt(l,Ee)}else{const Ee=s.viewHooks;null!==Ee&&an(l,Ee,2),En(l,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,ve(l[3],-1))}finally{Wa()}}}function Qm(s,l,c,v,C){const A=_a(),z=2&v;try{Ul(-1),z&&l.length>22&&Fs(s,l,22,!1),c(v,C)}finally{Ul(A)}}function ef(s,l,c){if(vs(l)){const C=l.directiveEnd;for(let A=l.directiveStart;A<C;A++){const z=s.data[A];z.contentQueries&&z.contentQueries(1,c[A],A)}}}function Km(s,l,c){Qs()&&(function Ug(s,l,c,v){const C=c.directiveStart,A=c.directiveEnd;bs(c)&&function Vg(s,l,c){const v=gn(l,s),C=R_(c),A=s[10],z=ti(s,Od(s,C,null,c.onPush?32:16,v,l,A,A.createRenderer(v,c),null,null,null));s[l.index]=z}(l,c,s.data[C+c.componentOffset]),s.firstCreatePass||jl(c,l),Ka(v,l);const z=c.initialInputs;for(let Q=C;Q<A;Q++){const le=s.data[Q],Ee=zt(l,s,Q,c);Ka(Ee,l),null!==z&&rf(0,Q-C,Ee,le,0,z),ko(le)&&(da(c.index,l)[8]=zt(l,s,Q,c))}}(s,l,c,gn(c,l)),64==(64&c.flags)&&eg(s,l,c))}function Qf(s,l,c=gn){const v=l.localNames;if(null!==v){let C=l.index+1;for(let A=0;A<v.length;A+=2){const z=v[A+1],Q=-1===z?c(l,s):s[z];s[C++]=Q}}}function R_(s){const l=s.tView;return null===l||l.incompleteFirstPass?s.tView=hp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):l}function hp(s,l,c,v,C,A,z,Q,le,Ee){const qe=22+v,Tt=qe+C,Zt=function ia(s,l){const c=[];for(let v=0;v<l;v++)c.push(v<s?null:ji);return c}(qe,Tt),sn="function"==typeof Ee?Ee():Ee;return Zt[1]={type:s,blueprint:Zt,template:c,queries:null,viewQuery:Q,declTNode:l,data:Zt.slice().fill(null,qe),bindingStartIndex:qe,expandoStartIndex:Tt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof A?A():A,pipeRegistry:"function"==typeof z?z():z,firstChild:null,schemas:le,consts:sn,incompleteFirstPass:!1}}function va(s,l,c,v){const C=Zg(l);null===c?C.push(v):(C.push(c),s.firstCreatePass&&rg(s).push(v,C.length-1))}function ba(s,l,c,v){for(let C in s)if(s.hasOwnProperty(C)){c=null===c?{}:c;const A=s[C];null===v?Xm(c,l,C,A):v.hasOwnProperty(C)&&Xm(c,l,v[C],A)}return c}function Xm(s,l,c,v){s.hasOwnProperty(c)?s[c].push(l,v):s[c]=[l,v]}function Su(s,l,c,v,C,A,z,Q){const le=gn(l,c);let qe,Ee=l.inputs;!Q&&null!=Ee&&(qe=Ee[v])?(_p(s,c,qe,v,C),bs(l)&&th(c,l.index)):3&l.type&&(v=function zu(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(v),C=null!=z?z(C,l.value||"",v):C,A.setProperty(le,v,C))}function th(s,l){const c=da(l,s);16&c[2]||(c[2]|=32)}function fp(s,l,c,v){let C=!1;if(Qs()){const A=null===v?null:{"":-1},z=function nf(s,l){const c=s.directiveRegistry;let v=null,C=null;if(c)for(let A=0;A<c.length;A++){const z=c[A];if(Ki(l,z.selectors,!1))if(v||(v=[]),ko(z))if(null!==z.findHostDirectiveDefs){const Q=[];C=C||new Map,z.findHostDirectiveDefs(z,Q,C),v.unshift(...Q,z),Ol(s,l,Q.length)}else v.unshift(z),Ol(s,l,0);else C=C||new Map,z.findHostDirectiveDefs?.(z,v,C),v.push(z)}return null===v?null:[v,C]}(s,c);let Q,le;null===z?Q=le=null:[Q,le]=z,null!==Q&&(C=!0,Bg(s,l,c,Q,A,le)),A&&function Xf(s,l,c){if(l){const v=s.localNames=[];for(let C=0;C<l.length;C+=2){const A=c[l[C+1]];if(null==A)throw new ct(-301,!1);v.push(l[C],A)}}}(c,v,A)}return c.mergedAttrs=yu(c.mergedAttrs,c.attrs),C}function Bg(s,l,c,v,C,A){for(let Ee=0;Ee<v.length;Ee++)rl(jl(c,l),s,v[Ee].type);!function jc(s,l,c){s.flags|=1,s.directiveStart=l,s.directiveEnd=l+c,s.providerIndexes=l}(c,s.data.length,v.length);for(let Ee=0;Ee<v.length;Ee++){const qe=v[Ee];qe.providersResolver&&qe.providersResolver(qe)}let z=!1,Q=!1,le=Xd(s,l,v.length,null);for(let Ee=0;Ee<v.length;Ee++){const qe=v[Ee];c.mergedAttrs=yu(c.mergedAttrs,qe.hostAttrs),jg(s,c,l,le,qe),tg(le,qe,C),null!==qe.contentQueries&&(c.flags|=4),(null!==qe.hostBindings||null!==qe.hostAttrs||0!==qe.hostVars)&&(c.flags|=64);const Tt=qe.type.prototype;!z&&(Tt.ngOnChanges||Tt.ngOnInit||Tt.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),z=!0),!Q&&(Tt.ngOnChanges||Tt.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),Q=!0),le++}!function Kf(s,l,c){const C=l.directiveEnd,A=s.data,z=l.attrs,Q=[];let le=null,Ee=null;for(let qe=l.directiveStart;qe<C;qe++){const Tt=A[qe],Zt=c?c.get(Tt):null,Ln=Zt?Zt.outputs:null;le=ba(Tt.inputs,qe,le,Zt?Zt.inputs:null),Ee=ba(Tt.outputs,qe,Ee,Ln);const ni=null===le||null===z||Ai(l)?null:kh(le,qe,z);Q.push(ni)}null!==le&&(le.hasOwnProperty("class")&&(l.flags|=8),le.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=Q,l.inputs=le,l.outputs=Ee}(s,c,A)}function eg(s,l,c){const v=c.directiveStart,C=c.directiveEnd,A=c.index,z=function Ts(){return ne.lFrame.currentDirectiveIndex}();try{Ul(A);for(let Q=v;Q<C;Q++){const le=s.data[Q],Ee=l[Q];ts(Q),(null!==le.hostBindings||0!==le.hostVars||null!==le.hostAttrs)&&zg(le,Ee)}}finally{Ul(-1),ts(z)}}function zg(s,l){null!==s.hostBindings&&s.hostBindings(1,l)}function Ol(s,l,c){l.componentOffset=c,(s.components||(s.components=[])).push(l.index)}function tg(s,l,c){if(c){if(l.exportAs)for(let v=0;v<l.exportAs.length;v++)c[l.exportAs[v]]=s;ko(l)&&(c[""]=s)}}function jg(s,l,c,v,C){s.data[v]=C;const A=C.factory||(C.factory=Js(C.type)),z=new Tr(A,ko(C),hd);s.blueprint[v]=z,c[v]=z,function mp(s,l,c,v,C){const A=C.hostBindings;if(A){let z=s.hostBindingOpCodes;null===z&&(z=s.hostBindingOpCodes=[]);const Q=~l.index;(function tf(s){let l=s.length;for(;l>0;){const c=s[--l];if("number"==typeof c&&c<0)return c}return 0})(z)!=Q&&z.push(Q),z.push(c,v,A)}}(s,l,v,Xd(s,c,C.hostVars,ji),C)}function nh(s,l,c,v,C,A,z){if(null==A)s.removeAttribute(l,C,c);else{const Q=null==z?Qe(A):z(A,v||"",C);s.setAttribute(l,C,Q,c)}}function rf(s,l,c,v,C,A){const z=A[l];if(null!==z){const Q=v.setInput;for(let le=0;le<z.length;){const Ee=z[le++],qe=z[le++],Tt=z[le++];null!==Q?v.setInput(c,Tt,Ee,qe):c[qe]=Tt}}}function kh(s,l,c){let v=null,C=0;for(;C<c.length;){const A=c[C];if(0!==A)if(5!==A){if("number"==typeof A)break;if(s.hasOwnProperty(A)){null===v&&(v=[]);const z=s[A];for(let Q=0;Q<z.length;Q+=2)if(z[Q]===l){v.push(A,z[Q+1],c[C+1]);break}}C+=2}else C+=2;else C+=4}return v}function Rh(s,l,c,v){return[s,!0,!1,l,null,0,v,c,null,null]}function ng(s,l){const c=da(l,s);if(zs(c)){const v=c[1];48&c[2]?dp(v,c,v.template,c[8]):c[5]>0&&sf(c)}}function sf(s){for(let v=Ff(s);null!==v;v=qh(v))for(let C=10;C<v.length;C++){const A=v[C];if(zs(A))if(512&A[2]){const z=A[1];dp(z,A,z.template,A[8])}else A[5]>0&&sf(A)}const c=s[1].components;if(null!==c)for(let v=0;v<c.length;v++){const C=da(c[v],s);zs(C)&&C[5]>0&&sf(C)}}function ig(s,l){const c=da(l,s),v=c[1];(function ec(s,l){for(let c=l.length;c<s.blueprint.length;c++)l.push(s.blueprint[c])})(v,c),pd(v,c,c[8])}function ti(s,l){return s[13]?s[14][4]=l:s[13]=l,s[14]=l,l}function Aa(s){for(;s;){s[2]|=32;const l=vd(s);if(Zo(s)&&!l)return s;s=l}return null}function Fh(s,l,c,v=!0){const C=l[10];C.begin&&C.begin();try{dp(s,l,s.template,c)}catch(z){throw v&&em(l,z),z}finally{C.end&&C.end()}}function es(s,l,c){dr(0),l(s,c)}function Zg(s){return s[7]||(s[7]=[])}function rg(s){return s.cleanup||(s.cleanup=[])}function em(s,l){const c=s[9],v=c?c.get(L,null):null;v&&v.handleError(l)}function _p(s,l,c,v,C){for(let A=0;A<c.length;){const z=c[A++],Q=c[A++],le=l[z],Ee=s.data[z];null!==Ee.setInput?Ee.setInput(le,C,v,Q):le[Q]=C}}function Zl(s,l,c){const v=Is(l,s);bd(s[11],v,c)}function Nh(s,l,c){let v=c?s.styles:null,C=c?s.classes:null,A=0;if(null!==l)for(let z=0;z<l.length;z++){const Q=l[z];"number"==typeof Q?A=Q:1==A?C=Ke(C,Q):2==A&&(v=Ke(v,Q+": "+l[++z]+";"))}c?s.styles=v:s.stylesWithoutHost=v,c?s.classes=C:s.classesWithoutHost=C}function af(s,l,c,v,C=!1){for(;null!==c;){const A=l[c.index];if(null!==A&&v.push(So(A)),go(A))for(let Q=10;Q<A.length;Q++){const le=A[Q],Ee=le[1].firstChild;null!==Ee&&af(le[1],le,Ee,v)}const z=c.type;if(8&z)af(s,l,c.child,v);else if(32&z){const Q=Bp(c,l);let le;for(;le=Q();)v.push(le)}else if(16&z){const Q=xh(l,c);if(Array.isArray(Q))v.push(...Q);else{const le=vd(l[16]);af(le[1],le,Q,v,!0)}}c=C?c.projectionNext:c.next}return v}class yp{get rootNodes(){const l=this._lView,c=l[1];return af(c,l,c.firstChild,[])}constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(go(l)){const c=l[8],v=c?c.indexOf(this):-1;v>-1&&(Nf(l,v),Ne(c,v))}this._attachedToViewContainer=!1}xd(this._lView[1],this._lView)}onDestroy(l){va(this._lView[1],this._lView,null,l)}markForCheck(){Aa(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nm(s,l){Nc(s,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=l}}class F_ extends yp{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Fh(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class N_ extends Du{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=St(l);return new tm(c,this.ngModule)}}function sg(s){const l=[];for(let c in s)s.hasOwnProperty(c)&&l.push({propName:s[c],templateName:c});return l}class vp{constructor(l,c){this.injector=l,this.parentInjector=c}get(l,c,v){v=_e(v);const C=this.injector.get(l,d,v);return C!==d||c===d?C:this.parentInjector.get(l,c,v)}}class tm extends _s{get inputs(){return sg(this.componentDef.inputs)}get outputs(){return sg(this.componentDef.outputs)}constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function ls(s){return s.map(_o).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}create(l,c,v,C){let A=(C=C||this.ngModule)instanceof No?C:C?.injector;A&&null!==this.componentDef.getStandaloneInjector&&(A=this.componentDef.getStandaloneInjector(A)||A);const z=A?new vp(l,A):l,Q=z.get(Jf,null);if(null===Q)throw new ct(407,!1);const le=z.get(Wp,null),Ee=Q.createRenderer(null,this.componentDef),qe=this.componentDef.selectors[0][0]||"div",Tt=v?function zc(s,l,c){return s.selectRootElement(l,c===Ye.ShadowDom)}(Ee,v,this.componentDef.encapsulation):gh(Ee,qe,function xy(s){const l=s.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(qe)),Zt=this.componentDef.onPush?288:272,sn=hp(0,null,null,1,0,null,null,null,null,null),Ln=Od(null,sn,null,Zt,null,null,Q,Ee,le,z,null);let ni,Di;Ja(Ln);try{const $i=this.componentDef;let xr,Wn=null;$i.findHostDirectiveDefs?(xr=[],Wn=new Map,$i.findHostDirectiveDefs($i,xr,Wn),xr.push($i)):xr=[$i];const so=function Pd(s,l){const c=s[1];return s[22]=l,Mc(c,22,2,"#host",null)}(Ln,Tt),pl=function ag(s,l,c,v,C,A,z,Q){const le=C[1];!function bp(s,l,c,v){for(const C of s)l.mergedAttrs=yu(l.mergedAttrs,C.hostAttrs);null!==l.mergedAttrs&&(Nh(l,l.mergedAttrs,!0),null!==c&&jo(v,c,l))}(v,s,l,z);const Ee=A.createRenderer(l,c),qe=Od(C,R_(c),null,c.onPush?32:16,C[s.index],s,A,Ee,Q||null,null,null);return le.firstCreatePass&&Ol(le,s,v.length-1),ti(C,qe),C[s.index]=qe}(so,Tt,$i,xr,Ln,Q,Ee);Di=Ya(sn,22),Tt&&function im(s,l,c,v){if(v)Fo(s,c,["ng-version",a.full]);else{const{attrs:C,classes:A}=function qs(s){const l=[],c=[];let v=1,C=2;for(;v<s.length;){let A=s[v];if("string"==typeof A)2===C?""!==A&&l.push(A,s[++v]):8===C&&c.push(A);else{if(!Kn(C))break;C=A}v++}return{attrs:l,classes:c}}(l.selectors[0]);C&&Fo(s,c,C),A&&A.length>0&&rd(s,c,A.join(" "))}}(Ee,$i,Tt,v),void 0!==c&&function Nv(s,l,c){const v=s.projection=[];for(let C=0;C<l.length;C++){const A=c[C];v.push(null!=A?Array.from(A):null)}}(Di,this.ngContentSelectors,c),ni=function nm(s,l,c,v,C,A){const z=Ro(),Q=C[1],le=gn(z,C);Bg(Q,C,z,c,null,v);for(let qe=0;qe<c.length;qe++)Ka(zt(C,Q,z.directiveStart+qe,z),C);eg(Q,C,z),le&&Ka(le,C);const Ee=zt(C,Q,z.directiveStart+z.componentOffset,z);if(s[8]=C[8]=Ee,null!==A)for(const qe of A)qe(Ee,l);return ef(Q,z,s),Ee}(pl,$i,xr,Wn,Ln,[Lv]),pd(sn,Ln,null)}finally{Wa()}return new wy(this.componentType,ni,Al(Di,Ln),Ln,Di)}}class wy extends ud{constructor(l,c,v,C,A){super(),this.location=v,this._rootLView=C,this._tNode=A,this.instance=c,this.hostView=this.changeDetectorRef=new F_(C),this.componentType=l}setInput(l,c){const v=this._tNode.inputs;let C;if(null!==v&&(C=v[l])){const A=this._rootLView;_p(A[1],A,C,l,c),th(A,this._tNode.index)}}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function Lv(){const s=Ro();Ue(Un()[1],s)}function L_(s){let l=function Cy(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const v=[s];for(;l;){let C;if(ko(s))C=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new ct(903,!1);C=l.\u0275dir}if(C){if(c){v.push(C);const z=s;z.inputs=B_(s.inputs),z.declaredInputs=B_(s.declaredInputs),z.outputs=B_(s.outputs);const Q=C.hostBindings;Q&&$g(s,Q);const le=C.viewQuery,Ee=C.contentQueries;if(le&&Uv(s,le),Ee&&zv(s,Ee),De(s.inputs,C.inputs),De(s.declaredInputs,C.declaredInputs),De(s.outputs,C.outputs),ko(C)&&C.data.animation){const qe=s.data;qe.animation=(qe.animation||[]).concat(C.data.animation)}}const A=C.features;if(A)for(let z=0;z<A.length;z++){const Q=A[z];Q&&Q.ngInherit&&Q(s),Q===L_&&(c=!1)}}l=Object.getPrototypeOf(l)}!function Bv(s){let l=0,c=null;for(let v=s.length-1;v>=0;v--){const C=s[v];C.hostVars=l+=C.hostVars,C.hostAttrs=yu(C.hostAttrs,c=yu(c,C.hostAttrs))}}(v)}function B_(s){return s===bt?{}:s===mt?[]:s}function Uv(s,l){const c=s.viewQuery;s.viewQuery=c?(v,C)=>{l(v,C),c(v,C)}:l}function zv(s,l){const c=s.contentQueries;s.contentQueries=c?(v,C,A)=>{l(v,C,A),c(v,C,A)}:l}function $g(s,l){const c=s.hostBindings;s.hostBindings=c?(v,C)=>{l(v,C),c(v,C)}:l}function U_(s){return l=>{l.findHostDirectiveDefs=z_,l.hostDirectives=(Array.isArray(s)?s:s()).map(c=>"function"==typeof c?{directive:Je(c),inputs:bt,outputs:bt}:{directive:Je(c.directive),inputs:Ty(c.inputs),outputs:Ty(c.outputs)})}}function z_(s,l,c){if(null!==s.hostDirectives)for(const v of s.hostDirectives){const C=Tn(v.directive);ob(C.declaredInputs,v.inputs),z_(C,l,c),c.set(C,v),l.push(C)}}function Ty(s){if(void 0===s||0===s.length)return bt;const l={};for(let c=0;c<s.length;c+=2)l[s[c]]=s[c+1];return l}function ob(s,l){for(const c in l)l.hasOwnProperty(c)&&(s[l[c]]=s[c])}let Yg=null;function Eu(){if(!Yg){const s=Vt.Symbol;if(s&&s.iterator)Yg=s.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<l.length;++c){const v=l[c];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(Yg=v)}}}return Yg}function j_(s){return!!Sy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Eu()in s)}function Sy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ih(s,l,c){return s[l]=c}function tc(s,l,c){return!Object.is(s[l],c)&&(s[l]=c,!0)}function wp(s,l,c,v){const C=tc(s,l,c);return tc(s,l+1,v)||C}function kl(s,l,c,v,C){const A=wp(s,l,c,v);return tc(s,l+2,C)||A}function V_(s,l,c,v){const C=Un();return tc(C,bl(),l)&&(vr(),function Pl(s,l,c,v,C,A){const z=gn(s,l);nh(l[11],z,A,s.value,c,v,C)}(no(),C,s,l,c,v)),V_}function us(s,l,c,v){return tc(s,bl(),c)?l+Qe(c)+v:ji}function Cp(s,l,c,v,C,A){const Q=wp(s,Na(),c,C);return fa(2),Q?l+Qe(c)+v+Qe(C)+A:ji}function $v(s,l,c,v,C,A,z,Q){const le=Un(),Ee=vr(),qe=s+22,Tt=Ee.firstCreatePass?function Zv(s,l,c,v,C,A,z,Q,le){const Ee=l.consts,qe=Mc(l,s,4,z||null,Jo(Ee,Q));fp(l,c,qe,Jo(Ee,le)),Ue(l,qe);const Tt=qe.tViews=hp(2,qe,v,C,A,l.directiveRegistry,l.pipeRegistry,null,l.schemas,Ee);return null!==l.queries&&(l.queries.template(l,qe),Tt.queries=l.queries.embeddedTView(qe)),qe}(qe,Ee,le,l,c,v,C,A,z):Ee.data[qe];ha(Tt,!1);const Zt=le[11].createComment("");wc(Ee,le,Zt,Tt),Ka(Zt,le),ti(le,le[qe]=Rh(Zt,le,Zt,Tt)),xs(Tt)&&Km(Ee,le,Tt),null!=z&&Qf(le,Tt,Q)}function Yv(s){return Cs(function Fa(){return ne.lFrame.contextLView}(),22+s)}function H_(s,l,c){const v=Un();return tc(v,bl(),l)&&Su(vr(),no(),v,s,l,v[11],c,!1),H_}function Iy(s,l,c,v,C){const z=C?"class":"style";_p(s,c,l.inputs[z],z,v)}function G_(s,l,c,v){const C=Un(),A=vr(),z=22+s,Q=C[11],le=C[z]=gh(Q,l,function Se(){return ne.lFrame.currentNamespace}()),Ee=A.firstCreatePass?function ub(s,l,c,v,C,A,z){const Q=l.consts,Ee=Mc(l,s,2,C,Jo(Q,A));return fp(l,c,Ee,Jo(Q,z)),null!==Ee.attrs&&Nh(Ee,Ee.attrs,!1),null!==Ee.mergedAttrs&&Nh(Ee,Ee.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,Ee),Ee}(z,A,C,0,l,c,v):A.data[z];return ha(Ee,!0),jo(Q,le,Ee),32!=(32&Ee.flags)&&wc(A,C,le,Ee),0===function ki(){return ne.lFrame.elementDepthCount}()&&Ka(le,C),function Wo(){ne.lFrame.elementDepthCount++}(),xs(Ee)&&(Km(A,C,Ee),ef(A,Ee,C)),null!==v&&Qf(C,Ee),G_}function cf(){let s=Ro();nl()?pa():(s=s.parent,ha(s,!1));const l=s;!function Nr(){ne.lFrame.elementDepthCount--}();const c=vr();return c.firstCreatePass&&(Ue(c,s),vs(s)&&c.queries.elementEnd(s)),null!=l.classesWithoutHost&&function Vs(s){return 0!=(8&s.flags)}(l)&&Iy(c,l,Un(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Hs(s){return 0!=(16&s.flags)}(l)&&Iy(c,l,Un(),l.stylesWithoutHost,!1),cf}function Gc(s,l,c,v){return G_(s,l,c,v),cf(),Gc}function Tp(s,l,c){const v=Un(),C=vr(),A=s+22,z=C.firstCreatePass?function cg(s,l,c,v,C){const A=l.consts,z=Jo(A,v),Q=Mc(l,s,8,"ng-container",z);return null!==z&&Nh(Q,z,!0),fp(l,c,Q,Jo(A,C)),null!==l.queries&&l.queries.elementStart(l,Q),Q}(A,C,v,l,c):C.data[A];ha(z,!0);const Q=v[A]=v[11].createComment("");return wc(C,v,Q,z),Ka(Q,v),xs(z)&&(Km(C,v,z),ef(C,z,v)),null!=c&&Qf(v,z),Tp}function Dp(){let s=Ro();const l=vr();return nl()?pa():(s=s.parent,ha(s,!1)),l.firstCreatePass&&(Ue(l,s),vs(s)&&l.queries.elementEnd(s)),Dp}function dg(s,l,c){return Tp(s,l,c),Dp(),dg}function cs(){return Un()}function dc(s){return!!s&&"function"==typeof s.then}function rh(s){return!!s&&"function"==typeof s.subscribe}const oh=rh;function Mp(s,l,c,v){const C=Un(),A=vr(),z=Ro();return function gd(s,l,c,v,C,A,z){const Q=xs(v),Ee=s.firstCreatePass&&rg(s),qe=l[8],Tt=Zg(l);let Zt=!0;if(3&v.type||z){const ni=gn(v,l),Di=z?z(ni):ni,$i=Tt.length,xr=z?so=>z(So(so[v.index])):v.index;let Wn=null;if(!z&&Q&&(Wn=function hf(s,l,c,v){const C=s.cleanup;if(null!=C)for(let A=0;A<C.length-1;A+=2){const z=C[A];if(z===c&&C[A+1]===v){const Q=l[7],le=C[A+2];return Q.length>le?Q[le]:null}"string"==typeof z&&(A+=2)}return null}(s,l,C,v.index)),null!==Wn)(Wn.__ngLastListenerFn__||Wn).__ngNextListenerFn__=A,Wn.__ngLastListenerFn__=A,Zt=!1;else{A=Wg(v,l,qe,A,!1);const so=c.listen(Di,C,A);Tt.push(A,so),Ee&&Ee.push(C,xr,$i,$i+1)}}else A=Wg(v,l,qe,A,!1);const sn=v.outputs;let Ln;if(Zt&&null!==sn&&(Ln=sn[C])){const ni=Ln.length;if(ni)for(let Di=0;Di<ni;Di+=2){const pl=l[Ln[Di]][Ln[Di+1]].subscribe(A),cu=Tt.length;Tt.push(A,pl),Ee&&Ee.push(C,v.index,cu,-(cu+1))}}}(A,C,C[11],z,s,l,v),Mp}function sm(s,l,c,v){try{return!1!==c(v)}catch(C){return em(s,C),!1}}function Wg(s,l,c,v,C){return function A(z){if(z===Function)return v;Aa(s.componentOffset>-1?da(s.index,l):l);let le=sm(l,0,v,z),Ee=A.__ngNextListenerFn__;for(;Ee;)le=sm(l,0,Ee,z)&&le,Ee=Ee.__ngNextListenerFn__;return C&&!1===le&&(z.preventDefault(),z.returnValue=!1),le}}function Oy(s=1){return function Vu(s){return(ne.lFrame.contextLView=function Qc(s,l){for(;s>0;)l=l[15],s--;return l}(s,ne.lFrame.contextLView))[8]}(s)}function pf(s,l){let c=null;const v=function yi(s){const l=s.attrs;if(null!=l){const c=l.indexOf(5);if(!(1&c))return l[c+1]}return null}(s);for(let C=0;C<l.length;C++){const A=l[C];if("*"!==A){if(null===v?Ki(s,A,!0):Yr(v,A))return C}else c=C}return c}function br(s){const l=Un()[16][6];if(!l.projection){const v=l.projection=st(s?s.length:1,null),C=v.slice();let A=l.child;for(;null!==A;){const z=s?pf(A,s):0;null!==z&&(C[z]?C[z].projectionNext=A:v[z]=A,C[z]=A),A=A.next}}}function Sp(s,l=0,c){const v=Un(),C=vr(),A=Mc(C,22+s,16,null,c||null);null===A.projection&&(A.projection=l),pa(),32!=(32&A.flags)&&function Vp(s,l,c){zm(l[11],0,l,c,cc(s,c,l),Bf(c.parent||l[6],c,l))}(C,v,A)}function Z_(s,l,c){return ff(s,"",l,"",c),Z_}function ff(s,l,c,v,C){const A=Un(),z=us(A,l,c,v);return z!==ji&&Su(vr(),no(),A,s,z,A[11],C,!1),ff}function fg(s,l){return s<<17|l<<2}function Lh(s){return s>>17&32767}function $_(s){return 2|s}function Ep(s){return(131068&s)>>2}function Y_(s,l){return-131069&s|l<<2}function ir(s){return 1|s}function Qg(s,l,c,v,C){const A=s[c+1],z=null===l;let Q=v?Lh(A):Ep(A),le=!1;for(;0!==Q&&(!1===le||z);){const qe=s[Q+1];Qv(s[Q],l)&&(le=!0,s[Q+1]=v?ir(qe):$_(qe)),Q=v?Lh(qe):Ep(qe)}le&&(s[c+1]=v?$_(A):ir(A))}function Qv(s,l){return null===s||null==l||(Array.isArray(s)?s[1]:s)===l||!(!Array.isArray(s)||"string"!=typeof l)&&Rn(s,l)>=0}const $l={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ny(s){return s.substring($l.key,$l.keyEnd)}function Kv(s){return s.substring($l.value,$l.valueEnd)}function Ly(s,l){const c=$l.textEnd;return c===l?-1:(l=$l.keyEnd=function e0(s,l,c){for(;l<c&&s.charCodeAt(l)>32;)l++;return l}(s,$l.key=l,c),_f(s,l,c))}function Sc(s,l){const c=$l.textEnd;let v=$l.key=_f(s,l,c);return c===v?-1:(v=$l.keyEnd=function Kg(s,l,c){let v;for(;l<c&&(45===(v=s.charCodeAt(l))||95===v||(-33&v)>=65&&(-33&v)<=90||v>=48&&v<=57);)l++;return l}(s,v,c),v=Uy(s,v,c),v=$l.value=_f(s,v,c),v=$l.valueEnd=function zy(s,l,c){let v=-1,C=-1,A=-1,z=l,Q=z;for(;z<c;){const le=s.charCodeAt(z++);if(59===le)return Q;34===le||39===le?Q=z=am(s,le,z,c):l===z-4&&85===A&&82===C&&76===v&&40===le?Q=z=am(s,41,z,c):le>32&&(Q=z),A=C,C=v,v=-33&le}return Q}(s,v,c),Uy(s,v,c))}function By(s){$l.key=0,$l.keyEnd=0,$l.value=0,$l.valueEnd=0,$l.textEnd=s.length}function _f(s,l,c){for(;l<c&&s.charCodeAt(l)<=32;)l++;return l}function Uy(s,l,c,v){return(l=_f(s,l,c))<c&&l++,l}function am(s,l,c,v){let C=-1,A=c;for(;A<v;){const z=s.charCodeAt(A++);if(z==l&&92!==C)return A;C=92==z&&92===C?0:z}throw new Error}function q_(s,l,c){return $c(s,l,c,!1),q_}function lm(s,l){return $c(s,l,null,!0),lm}function Rd(s){Fd(Vy,Fl,s,!1)}function Fl(s,l){for(let c=function gg(s){return By(s),Sc(s,_f(s,0,$l.textEnd))}(l);c>=0;c=Sc(l,c))Vy(s,Ny(l),Kv(l))}function Yl(s){Fd(yn,sh,s,!0)}function sh(s,l){for(let c=function Xv(s){return By(s),Ly(s,_f(s,0,$l.textEnd))}(l);c>=0;c=Ly(l,c))yn(s,Ny(l),!0)}function $c(s,l,c,v){const C=Un(),A=vr(),z=fa(2);A.firstUpdatePass&&Xg(A,s,z,v),l!==ji&&tc(C,z,l)&&Hy(A,A.data[_a()],C,C[11],s,C[z+1]=function u0(s,l){return null==s||("string"==typeof l?s+=l:"object"==typeof s&&(s=it(Nu(s)))),s}(l,c),v,z)}function Fd(s,l,c,v){const C=vr(),A=fa(2);C.firstUpdatePass&&Xg(C,null,A,v);const z=Un();if(c!==ji&&tc(z,A,c)){const Q=C.data[_a()];if(Zy(Q,v)&&!jy(C,A)){let le=v?Q.classesWithoutHost:Q.stylesWithoutHost;null!==le&&(c=Ke(le,c||"")),Iy(C,Q,z,c,v)}else!function l0(s,l,c,v,C,A,z,Q){C===ji&&(C=mt);let le=0,Ee=0,qe=0<C.length?C[0]:null,Tt=0<A.length?A[0]:null;for(;null!==qe||null!==Tt;){const Zt=le<C.length?C[le+1]:void 0,sn=Ee<A.length?A[Ee+1]:void 0;let ni,Ln=null;qe===Tt?(le+=2,Ee+=2,Zt!==sn&&(Ln=Tt,ni=sn)):null===Tt||null!==qe&&qe<Tt?(le+=2,Ln=qe):(Ee+=2,Ln=Tt,ni=sn),null!==Ln&&Hy(s,l,c,v,Ln,ni,z,Q),qe=le<C.length?C[le]:null,Tt=Ee<A.length?A[Ee]:null}}(C,Q,z,z[11],z[A+1],z[A+1]=function a0(s,l,c){if(null==c||""===c)return mt;const v=[],C=Nu(c);if(Array.isArray(C))for(let A=0;A<C.length;A++)s(v,C[A],!0);else if("object"==typeof C)for(const A in C)C.hasOwnProperty(A)&&s(v,A,C[A]);else"string"==typeof C&&l(v,C);return v}(s,l,c),v,A)}}function jy(s,l){return l>=s.expandoStartIndex}function Xg(s,l,c,v){const C=s.data;if(null===C[c+1]){const A=C[_a()],z=jy(s,c);Zy(A,v)&&null===l&&!z&&(l=!1),l=function n0(s,l,c,v){const C=function ma(s){const l=ne.lFrame.currentDirectiveIndex;return-1===l?null:s[l]}(s);let A=v?l.residualClasses:l.residualStyles;if(null===C)0===(v?l.classBindings:l.styleBindings)&&(c=_g(c=J_(null,s,l,c,v),l.attrs,v),A=null);else{const z=l.directiveStylingLast;if(-1===z||s[z]!==C)if(c=J_(C,s,l,c,v),null===A){let le=function r0(s,l,c){const v=c?l.classBindings:l.styleBindings;if(0!==Ep(v))return s[Lh(v)]}(s,l,v);void 0!==le&&Array.isArray(le)&&(le=J_(null,s,l,le[1],v),le=_g(le,l.attrs,v),function o0(s,l,c,v){s[Lh(c?l.classBindings:l.styleBindings)]=v}(s,l,v,le))}else A=function s0(s,l,c){let v;const C=l.directiveEnd;for(let A=1+l.directiveStylingLast;A<C;A++)v=_g(v,s[A].hostAttrs,c);return _g(v,l.attrs,c)}(s,l,v)}return void 0!==A&&(v?l.residualClasses=A:l.residualStyles=A),c}(C,A,l,v),function Wv(s,l,c,v,C,A){let z=A?l.classBindings:l.styleBindings,Q=Lh(z),le=Ep(z);s[v]=c;let qe,Ee=!1;if(Array.isArray(c)?(qe=c[1],(null===qe||Rn(c,qe)>0)&&(Ee=!0)):qe=c,C)if(0!==le){const Zt=Lh(s[Q+1]);s[v+1]=fg(Zt,Q),0!==Zt&&(s[Zt+1]=Y_(s[Zt+1],v)),s[Q+1]=function Jv(s,l){return 131071&s|l<<17}(s[Q+1],v)}else s[v+1]=fg(Q,0),0!==Q&&(s[Q+1]=Y_(s[Q+1],v)),Q=v;else s[v+1]=fg(le,0),0===Q?Q=v:s[le+1]=Y_(s[le+1],v),le=v;Ee&&(s[v+1]=$_(s[v+1])),Qg(s,qe,v,!0),Qg(s,qe,v,!1),function mg(s,l,c,v,C){const A=C?s.residualClasses:s.residualStyles;null!=A&&"string"==typeof l&&Rn(A,l)>=0&&(c[v+1]=ir(c[v+1]))}(l,qe,s,v,A),z=fg(Q,le),A?l.classBindings=z:l.styleBindings=z}(C,A,l,c,z,v)}}function J_(s,l,c,v,C){let A=null;const z=c.directiveEnd;let Q=c.directiveStylingLast;for(-1===Q?Q=c.directiveStart:Q++;Q<z&&(A=l[Q],v=_g(v,A.hostAttrs,C),A!==s);)Q++;return null!==s&&(c.directiveStylingLast=Q),v}function _g(s,l,c){const v=c?1:2;let C=-1;if(null!==l)for(let A=0;A<l.length;A++){const z=l[A];"number"==typeof z?C=z:C===v&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yn(s,z,!!c||l[++A]))}return void 0===s?null:s}function Vy(s,l,c){yn(s,l,Nu(c))}function Hy(s,l,c,v,C,A,z,Q){if(!(3&l.type))return;const le=s.data,Ee=le[Q+1],qe=function gf(s){return 1==(1&s)}(Ee)?Gy(le,l,c,C,Ep(Ee),z):void 0;e_(qe)||(e_(A)||function qv(s){return 2==(2&s)}(Ee)&&(A=Gy(le,null,c,C,Q,z)),function Kh(s,l,c,v,C){if(l)C?s.addClass(c,v):s.removeClass(c,v);else{let A=-1===v.indexOf("-")?void 0:$u.DashCase;null==C?s.removeStyle(c,v,A):("string"==typeof C&&C.endsWith("!important")&&(C=C.slice(0,-10),A|=$u.Important),s.setStyle(c,v,C,A))}}(v,z,Is(_a(),c),C,A))}function Gy(s,l,c,v,C,A){const z=null===l;let Q;for(;C>0;){const le=s[C],Ee=Array.isArray(le),qe=Ee?le[1]:le,Tt=null===qe;let Zt=c[C+1];Zt===ji&&(Zt=Tt?mt:void 0);let sn=Tt?zn(Zt,v):qe===v?Zt:void 0;if(Ee&&!e_(sn)&&(sn=zn(le,v)),e_(sn)&&(Q=sn,z))return Q;const Ln=s[C+1];C=z?Lh(Ln):Ep(Ln)}if(null!==l){let le=A?l.residualClasses:l.residualStyles;null!=le&&(Q=zn(le,v))}return Q}function e_(s){return void 0!==s}function Zy(s,l){return 0!=(s.flags&(l?8:16))}function $y(s,l=""){const c=Un(),v=vr(),C=s+22,A=v.firstCreatePass?Mc(v,C,1,l,null):v.data[C],z=c[C]=mh(c[11],l);wc(v,c,z,A),ha(A,!1)}function t_(s){return n_("",s,""),t_}function n_(s,l,c){const v=Un(),C=us(v,s,l,c);return C!==ji&&Zl(v,_a(),C),n_}function W_(s,l,c,v,C){const A=Un(),z=Cp(A,s,l,c,v,C);return z!==ji&&Zl(A,_a(),z),W_}function Q_(s,l,c,v,C,A,z){const Q=Un(),le=function lg(s,l,c,v,C,A,z,Q){const Ee=kl(s,Na(),c,C,z);return fa(3),Ee?l+Qe(c)+v+Qe(C)+A+Qe(z)+Q:ji}(Q,s,l,c,v,C,A,z);return le!==ji&&Zl(Q,_a(),le),Q_}function Ap(s,l,c,v,C){Fd(yn,sh,Cp(Un(),s,l,c,v,C),!0)}function i_(s,l,c){const v=Un();return tc(v,bl(),l)&&Su(vr(),no(),v,s,l,v[11],c,!0),i_}const Yc=void 0;var ey=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function v0(s){const c=Math.floor(Math.abs(s)),v=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===v?1:5}];let pc={};function nc(s){const l=function ty(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Xy(l);if(c)return c;const v=l.split("-")[0];if(c=Xy(v),c)return c;if("en"===v)return ey;throw new ct(701,!1)}function wg(s){return nc(s)[Mr.PluralCase]}function Xy(s){return s in pc||(pc[s]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[s]),pc[s]}var Mr=(()=>((Mr=Mr||{})[Mr.LocaleId=0]="LocaleId",Mr[Mr.DayPeriodsFormat=1]="DayPeriodsFormat",Mr[Mr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mr[Mr.DaysFormat=3]="DaysFormat",Mr[Mr.DaysStandalone=4]="DaysStandalone",Mr[Mr.MonthsFormat=5]="MonthsFormat",Mr[Mr.MonthsStandalone=6]="MonthsStandalone",Mr[Mr.Eras=7]="Eras",Mr[Mr.FirstDayOfWeek=8]="FirstDayOfWeek",Mr[Mr.WeekendRange=9]="WeekendRange",Mr[Mr.DateFormat=10]="DateFormat",Mr[Mr.TimeFormat=11]="TimeFormat",Mr[Mr.DateTimeFormat=12]="DateTimeFormat",Mr[Mr.NumberSymbols=13]="NumberSymbols",Mr[Mr.NumberFormats=14]="NumberFormats",Mr[Mr.CurrencyCode=15]="CurrencyCode",Mr[Mr.CurrencySymbol=16]="CurrencySymbol",Mr[Mr.CurrencyName=17]="CurrencyName",Mr[Mr.Currencies=18]="Currencies",Mr[Mr.Directionality=19]="Directionality",Mr[Mr.PluralCase=20]="PluralCase",Mr[Mr.ExtraData=21]="ExtraData",Mr))();const ny=["zero","one","two","few","many"],hm="en-US",o_={marker:"element"},wf={marker:"ICU"};var dl=(()=>((dl=dl||{})[dl.SHIFT=2]="SHIFT",dl[dl.APPEND_EAGERLY=1]="APPEND_EAGERLY",dl[dl.COMMENT=2]="COMMENT",dl))();let s_=hm;function tv(s){(function On(s,l){null==s&&Nn(l,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(s_=s.toLowerCase().replace(/_/g,"-"))}function nv(s,l,c){const v=l.insertBeforeIndex,C=Array.isArray(v)?v[0]:v;return null===C?Uf(s,0,c):So(c[C])}function iv(s,l,c,v,C){const A=l.insertBeforeIndex;if(Array.isArray(A)){let z=v,Q=null;if(3&l.type||(Q=z,z=C),null!==z&&-1===l.componentOffset)for(let le=1;le<A.length;le++)jd(s,z,c[A[le]],Q,!1)}}function rv(s,l){if(s.push(l),s.length>1)for(let c=s.length-2;c>=0;c--){const v=s[c];ov(v)||a_(v,l)&&null===x0(v)&&l_(v,l.index)}}function ov(s){return!(64&s.type)}function a_(s,l){return ov(l)||s.index>l.index}function x0(s){const l=s.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function l_(s,l){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=l:(Fc(nv,iv),s.insertBeforeIndex=l)}function pm(s,l){const c=s.data[l];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function gb(s,l,c){const v=Xu(s,c,64,null,null);return rv(l,v),v}function iy(s,l){const c=l[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function av(s){return s>>>17}function fm(s){return(131070&s)>>>1}let Op=0,Bh=0;function c_(s,l,c,v){const C=c[11];let z,A=null;for(let Q=0;Q<l.length;Q++){const le=l[Q];if("string"==typeof le){const Ee=l[++Q];null===c[Ee]&&(c[Ee]=mh(C,le))}else if("number"==typeof le)switch(1&le){case 0:const Ee=av(le);let qe,Tt;if(null===A&&(A=Ee,z=Qh(C,v)),Ee===A?(qe=v,Tt=z):(qe=null,Tt=So(c[Ee])),null!==Tt){const ni=fm(le);jd(C,Tt,c[ni],qe,!1);const $i=pm(s,ni);if(null!==$i&&"object"==typeof $i){const xr=iy($i,c);null!==xr&&c_(s,$i.create[xr],c,c[$i.anchorIdx])}}break;case 1:const sn=l[++Q],Ln=l[++Q];nh(C,Is(le>>>1,c),null,null,sn,Ln,null)}else switch(le){case wf:const Ee=l[++Q],qe=l[++Q];null===c[qe]&&Ka(c[qe]=O_(C,Ee),c);break;case o_:const Tt=l[++Q],Zt=l[++Q];null===c[Zt]&&Ka(c[Zt]=gh(C,Tt,null),c)}}}function mm(s,l,c,v,C){for(let A=0;A<c.length;A++){const z=c[A],Q=c[++A];if(z&C){let le="";for(let Ee=A+1;Ee<=A+Q;Ee++){const qe=c[Ee];if("string"==typeof qe)le+=qe;else if("number"==typeof qe)if(qe<0)le+=Qe(l[v-qe]);else{const Tt=qe>>>2;switch(3&qe){case 1:const Zt=c[++Ee],sn=c[++Ee],Ln=s.data[Tt];"string"==typeof Ln?nh(l[11],l[Tt],null,Ln,Zt,le,sn):Su(s,Ln,l,Zt,le,l[11],sn,!1);break;case 0:const ni=l[Tt];null!==ni&&bd(l[11],ni,le);break;case 2:lh(s,pm(s,Tt),l,le);break;case 3:Tf(s,pm(s,Tt),v,l)}}}}else{const le=c[A+1];if(le>0&&3==(3&le)){const qe=pm(s,le>>>2);l[qe.currentCaseLViewIndex]<0&&Tf(s,qe,v,l)}}A+=Q}}function Tf(s,l,c,v){let C=v[l.currentCaseLViewIndex];if(null!==C){let A=Op;C<0&&(C=v[l.currentCaseLViewIndex]=~C,A=-1),mm(s,v,l.update[C],c,A)}}function lh(s,l,c,v){const C=function d_(s,l){let c=s.cases.indexOf(l);if(-1===c)switch(s.type){case 1:{const v=function xf(s,l){const c=wg(l)(parseInt(s,10)),v=ny[c];return void 0!==v?v:"other"}(l,function b0(){return s_}());c=s.cases.indexOf(v),-1===c&&"other"!==v&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(l,v);if(iy(l,c)!==C&&(gm(s,l,c),c[l.currentCaseLViewIndex]=null===C?null:~C,null!==C)){const z=c[l.anchorIdx];z&&c_(s,l.create[C],c,z)}}function gm(s,l,c){let v=iy(l,c);if(null!==v){const C=l.remove[v];for(let A=0;A<C.length;A++){const z=C[A];if(z>0){const Q=Is(z,c);null!==Q&&jp(c[11],Q)}else gm(s,pm(s,~z),c)}}}function T0(){const s=[];let c,v,l=-1;function A(Q,le){l=0;const Ee=iy(Q,le);v=null!==Ee?Q.remove[Ee]:mt}function z(){if(l<v.length){const Q=v[l++];return Q>0?c[Q]:(s.push(l,v),A(c[1].data[~Q],c),z())}return 0===s.length?null:(v=s.pop(),l=s.pop(),z())}return function C(Q,le){for(c=le;s.length;)s.pop();return A(Q.value,le),z}}const Df=/\ufffd(\d+):?\d*\ufffd/gi,Mf=/\ufffd(\d+)\ufffd/,ym=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Pp=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,D0=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,M0=/\uE500/g;function oy(s,l,c,v,C,A,z){const Q=Xd(s,v,1,null);let le=Q<<dl.SHIFT,Ee=eu();l===Ee&&(Ee=null),null===Ee&&(le|=dl.APPEND_EAGERLY),z&&(le|=dl.COMMENT,function A_(s){void 0===Lp&&(Lp=s())}(T0)),C.push(le,null===A?"":A);const qe=Xu(s,Q,z?32:1,null===A?"":A,null);rv(c,qe);const Tt=qe.index;return ha(qe,!1),null!==Ee&&l!==Ee&&function mb(s,l){let c=s.insertBeforeIndex;null===c?(Fc(nv,iv),c=s.insertBeforeIndex=[null,l]):(function Hi(s,l,c){s!=l&&Nn(c,s,l,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(l))}(Ee,Tt),qe}function uv(s,l,c,v,C,A,z){const Q=z.match(Df),le=oy(s,l,c,A,v,Q?null:z,!1);Q&&vm(C,z,le.index,null,0,null)}function vm(s,l,c,v,C,A){const z=s.length,Q=z+1;s.push(null,null);const le=z+2,Ee=l.split(Df);let qe=0;for(let Tt=0;Tt<Ee.length;Tt++){const Zt=Ee[Tt];if(1&Tt){const sn=C+parseInt(Zt,10);s.push(-1-sn),qe|=hv(sn)}else""!==Zt&&s.push(Zt)}return s.push(c<<2|(v?1:0)),v&&s.push(v,A),s[z]=qe,s[Q]=s.length-le,qe}function hv(s){return 1<<Math.min(s,31)}function m_(s){let l,A,c="",v=0,C=!1;for(;null!==(l=Pp.exec(s));)C?l[0]===`\ufffd/*${A}\ufffd`&&(v=l.index,C=!1):(c+=s.substring(v,l.index+l[0].length),A=l[1],C=!0);return c+=s.slice(v),c}function pv(s,l,c,v,C,A){let z=0;const Q={type:C.type,currentCaseLViewIndex:Xd(s,l,1,null),anchorIdx:A,cases:[],create:[],remove:[],update:[]};(function Ef(s,l,c){s.push(hv(l.mainBinding),2,-1-l.mainBinding,c<<2|2)})(c,C,A),function sv(s,l,c){const v=s.data[l];null===v?s.data[l]=c:v.value=c}(s,A,Q);const le=C.values;for(let Ee=0;Ee<le.length;Ee++){const qe=le[Ee],Tt=[];for(let Zt=0;Zt<qe.length;Zt++){const sn=qe[Zt];if("string"!=typeof sn){const Ln=Tt.push(sn)-1;qe[Zt]=`\x3c!--\ufffd${Ln}\ufffd--\x3e`}}z=E0(s,Q,l,c,v,C.cases[Ee],qe.join(""),Tt)|z}z&&function bm(s,l,c){s.push(l,1,c<<2|3)}(c,z,A)}function S0(s){const l=[],c=[];let v=1,C=0;const A=sy(s=s.replace(ym,function(z,Q,le){return v="select"===le?0:1,C=parseInt(Q.slice(1),10),""}));for(let z=0;z<A.length;){let Q=A[z++].trim();1===v&&(Q=Q.replace(/\s*(?:=)?(\w+)\s*/,"$1")),Q.length&&l.push(Q);const le=sy(A[z++]);l.length>c.length&&c.push(le)}return{type:v,mainBinding:C,cases:l,values:c}}function sy(s){if(!s)return[];let l=0;const c=[],v=[],C=/[{}]/g;let A;for(C.lastIndex=0;A=C.exec(s);){const Q=A.index;if("}"==A[0]){if(c.pop(),0==c.length){const le=s.substring(l,Q);ym.test(le)?v.push(S0(le)):v.push(le),l=Q+1}}else{if(0==c.length){const le=s.substring(l,Q);v.push(le),l=Q+1}c.push("{")}}const z=s.substring(l);return v.push(z),v}function E0(s,l,c,v,C,A,z,Q){const le=[],Ee=[],qe=[];l.cases.push(A),l.create.push(le),l.remove.push(Ee),l.update.push(qe);const Zt=Zd(jf()).getInertBodyElement(z),sn=Ed(Zt)||Zt;return sn?fv(s,l,c,v,le,Ee,qe,sn,C,Q,0):0}function fv(s,l,c,v,C,A,z,Q,le,Ee,qe){let Tt=0,Zt=Q.firstChild;for(;Zt;){const sn=Xd(s,c,1,null);switch(Zt.nodeType){case Node.ELEMENT_NODE:const Ln=Zt,ni=Ln.tagName.toLowerCase();if(Sh.hasOwnProperty(ni)){Mg(C,o_,ni,le,sn),s.data[sn]=ni;const Wn=Ln.attributes;for(let so=0;so<Wn.length;so++){const pl=Wn.item(so),cu=pl.name.toLowerCase();pl.value.match(Df)?rp.hasOwnProperty(cu)&&vm(z,pl.value,sn,pl.name,0,Yp[cu]?$d:null):_b(C,sn,pl)}Tt=fv(s,l,c,v,C,A,z,Zt,sn,Ee,qe+1)|Tt,g_(A,sn,qe)}break;case Node.TEXT_NODE:const Di=Zt.textContent||"",$i=Di.match(Df);Mg(C,null,$i?"":Di,le,sn),g_(A,sn,qe),$i&&(Tt=vm(z,Di,sn,null,0,null)|Tt);break;case Node.COMMENT_NODE:const xr=Mf.exec(Zt.textContent||"");if(xr){const so=Ee[parseInt(xr[1],10)];Mg(C,wf,"",le,sn),pv(s,c,v,le,so,sn),__(A,sn,qe)}}Zt=Zt.nextSibling}return Tt}function g_(s,l,c){0===c&&s.push(l)}function __(s,l,c){0===c&&(s.push(~l),s.push(l))}function Mg(s,l,c,v,C){null!==l&&s.push(l),s.push(c,C,function u_(s,l,c){return s|l<<17|c<<1}(0,v,C))}function _b(s,l,c){s.push(l<<1|1,c.name,c.value)}function xm(s,l,c=-1){const v=vr(),C=Un(),A=22+s,z=Jo(v.consts,l),Q=eu();v.firstCreatePass&&function lv(s,l,c,v,C,A){const z=eu(),Q=[],le=[],Ee=[[]];C=function Dg(s,l){if(function Tg(s){return-1===s}(l))return m_(s);{const c=s.indexOf(`:${l}\ufffd`)+2+l.toString().length,v=s.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return m_(s.substring(c,v))}}(C,A);const qe=function Sf(s){return s.replace(M0," ")}(C).split(D0);for(let Tt=0;Tt<qe.length;Tt++){let Zt=qe[Tt];if(1&Tt){const sn=47===Zt.charCodeAt(0),ni=(Zt.charCodeAt(sn?1:0),22+Number.parseInt(Zt.substring(sn?2:1)));if(sn)Ee.shift(),ha(eu(),!1);else{const Di=gb(s,Ee[0],ni);Ee.unshift([]),ha(Di,!0)}}else{const sn=sy(Zt);for(let Ln=0;Ln<sn.length;Ln++){let ni=sn[Ln];if(1&Ln){const Di=ni;if("object"!=typeof Di)throw new Error(`Unable to parse ICU expression in "${C}" message.`);pv(s,c,le,l,Di,oy(s,z,Ee[0],c,Q,"",!0).index)}else""!==ni&&uv(s,z,Ee[0],Q,le,c,ni)}}}s.data[v]={create:Q,update:le}}(v,null===Q?0:Q.index,C,A,z,c);const le=v.data[A],qe=vh(v,Q===C[6]?null:Q,C);(function C0(s,l,c,v){const C=s[11];for(let A=0;A<l.length;A++){const z=l[A++],Q=l[A],Ee=(z&dl.APPEND_EAGERLY)===dl.APPEND_EAGERLY,qe=z>>>dl.SHIFT;let Tt=s[qe];null===Tt&&(Tt=s[qe]=(z&dl.COMMENT)===dl.COMMENT?C.createComment(Q):mh(C,Q)),Ee&&null!==c&&jd(C,c,Tt,v,!1)}})(C,le.create,qe,Q&&8&Q.type?C[Q.index]:null),gu(!0)}function gv(s,l,c){xm(s,l,c),function mv(){gu(!1)}()}function uy(s){return function w0(s){s&&(Op|=1<<Math.min(Bh,31)),Bh++}(tc(Un(),bl(),s)),uy}function P0(s){!function ry(s,l,c){if(Bh>0){const v=s.data[c];mm(s,l,Array.isArray(v)?v:v.update,Na()-Bh-1,Op)}Op=0,Bh=0}(vr(),Un(),s+22)}function yv(s,l,c,v,C){if(s=Je(s),Array.isArray(s))for(let A=0;A<s.length;A++)yv(s[A],l,c,v,C);else{const A=vr(),z=Un();let Q=jr(s)?s:Je(s.provide),le=Sl(s);const Ee=Ro(),qe=1048575&Ee.providerIndexes,Tt=Ee.directiveStart,Zt=Ee.providerIndexes>>20;if(jr(s)||!s.multi){const sn=new Tr(le,C,hd),Ln=bv(Q,l,C?qe:qe+Zt,Tt);-1===Ln?(rl(jl(Ee,z),A,Q),cy(A,s,l.length),l.push(Q),Ee.directiveStart++,Ee.directiveEnd++,C&&(Ee.providerIndexes+=1048576),c.push(sn),z.push(sn)):(c[Ln]=sn,z[Ln]=sn)}else{const sn=bv(Q,l,qe+Zt,Tt),Ln=bv(Q,l,qe,qe+Zt),Di=Ln>=0&&c[Ln];if(C&&!Di||!C&&!(sn>=0&&c[sn])){rl(jl(Ee,z),A,Q);const $i=function xv(s,l,c,v,C){const A=new Tr(s,c,hd);return A.multi=[],A.index=l,A.componentProviders=0,vv(A,C,v&&!c),A}(C?F0:yb,c.length,C,v,le);!C&&Di&&(c[Ln].providerFactory=$i),cy(A,s,l.length,0),l.push(Q),Ee.directiveStart++,Ee.directiveEnd++,C&&(Ee.providerIndexes+=1048576),c.push($i),z.push($i)}else cy(A,s,sn>-1?sn:Ln,vv(c[C?Ln:sn],le,!C&&v));!C&&v&&Di&&c[Ln].componentProviders++}}}function cy(s,l,c,v){const C=jr(l),A=function po(s){return!!s.useClass}(l);if(C||A){const le=(A?Je(l.useClass):l).prototype.ngOnDestroy;if(le){const Ee=s.destroyHooks||(s.destroyHooks=[]);if(!C&&l.multi){const qe=Ee.indexOf(c);-1===qe?Ee.push(c,[v,le]):Ee[qe+1].push(v,le)}else Ee.push(c,le)}}}function vv(s,l,c){return c&&s.componentProviders++,s.multi.push(l)-1}function bv(s,l,c,v){for(let C=c;C<v;C++)if(l[C]===s)return C;return-1}function yb(s,l,c,v){return w_(this.multi,[])}function F0(s,l,c,v){const C=this.multi;let A;if(this.providerFactory){const z=this.providerFactory.componentProviders,Q=zt(c,c[1],this.providerFactory.index,v);A=Q.slice(0,z),w_(C,A);for(let le=z;le<Q.length;le++)A.push(Q[le])}else A=[],w_(C,A);return A}function w_(s,l){for(let c=0;c<s.length;c++)l.push((0,s[c])());return l}function dy(s,l=[]){return c=>{c.providersResolver=(v,C)=>function R0(s,l,c){const v=vr();if(v.firstCreatePass){const C=ko(s);yv(c,v.data,v.blueprint,C,!0),yv(l,v.data,v.blueprint,C,!1)}}(v,C?C(s):s,l)}}class wm{}class N0{}function vb(s,l){return new hy(s,l??null)}class hy extends wm{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new N_(this);const v=gi(l);this._bootstrapComponents=yt(v.bootstrap),this._r3Injector=oo(l,c,[{provide:wm,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],it(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Af extends N0{constructor(l){super(),this.moduleType=l}create(l){return new hy(this.moduleType,l)}}class Nd extends wm{constructor(l,c,v){super(),this.componentFactoryResolver=new N_(this),this.instance=null;const C=new Wr([...l,{provide:wm,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],c||Vo(),v,new Set(["environment"]));this.injector=C,C.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function py(s,l,c=null){return new Nd(s,l,c).injector}let C_=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const v=jt(0,c.type),C=v.length>0?py([v],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,C)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Xn({token:s,providedIn:"environment",factory:()=>new s(se(No))}),s})();function wv(s){s.getStandaloneInjector=l=>l.get(C_).getOrCreateStandaloneInjector(s)}function Mm(s,l,c){const v=Os()+s,C=Un();return C[v]===ji?ih(C,v,c?l.call(c):l()):function xp(s,l){return s[l]}(C,v)}function Dv(s,l,c,v){return r(Un(),Os(),s,l,c,v)}function Sm(s,l,c,v,C){return h(Un(),Os(),s,l,c,v,C)}function Mv(s,l,c,v,C,A){return function y(s,l,c,v,C,A,z,Q){const le=l+c;return kl(s,le,C,A,z)?ih(s,le+3,Q?v.call(Q,C,A,z):v(C,A,z)):t(s,le+3)}(Un(),Os(),s,l,c,v,C,A)}function t(s,l){const c=s[l];return c===ji?void 0:c}function r(s,l,c,v,C,A){const z=l+c;return tc(s,z,C)?ih(s,z+1,A?v.call(A,C):v(C)):t(s,z+1)}function h(s,l,c,v,C,A,z){const Q=l+c;return wp(s,Q,C,A)?ih(s,Q+2,z?v.call(z,C,A):v(C,A)):t(s,Q+2)}function D(s,l,c,v,C,A,z,Q,le){const Ee=l+c;return function fd(s,l,c,v,C,A){const z=wp(s,l,c,v);return wp(s,l+2,C,A)||z}(s,Ee,C,A,z,Q)?ih(s,Ee+4,le?v.call(le,C,A,z,Q):v(C,A,z,Q)):t(s,Ee+4)}function G(s,l){const c=vr();let v;const C=s+22;c.firstCreatePass?(v=function W(s,l){if(l)for(let c=l.length-1;c>=0;c--){const v=l[c];if(s===v.name)return v}}(l,c.pipeRegistry),c.data[C]=v,v.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(C,v.onDestroy)):v=c.data[C];const A=v.factory||(v.factory=Js(v.type)),z=ut(hd);try{const Q=Ua(!1),le=A();return Ua(Q),function lb(s,l,c,v){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),l[c]=v}(c,Un(),C,le),le}finally{ut(z)}}function ae(s,l,c){const v=s+22,C=Un(),A=Cs(C,v);return ft(C,v)?r(C,Os(),l,A.transform,c,A):A.transform(c)}function be(s,l,c,v){const C=s+22,A=Un(),z=Cs(A,C);return ft(A,C)?h(A,Os(),l,z.transform,c,v,z):z.transform(c,v)}function pt(s,l,c,v,C,A){const z=s+22,Q=Un(),le=Cs(Q,z);return ft(Q,z)?D(Q,Os(),l,le.transform,c,v,C,A,le):le.transform(c,v,C,A)}function ft(s,l){return s[1].data[l].pure}function Gt(s){return l=>{setTimeout(s,void 0,l)}}const Ht=class xt extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,v){let C=l,A=c||(()=>null),z=v;if(l&&"object"==typeof l){const le=l;C=le.next?.bind(le),A=le.error?.bind(le),z=le.complete?.bind(le)}this.__isAsync&&(A=Gt(A),C&&(C=Gt(C)),z&&(z=Gt(z)));const Q=super.subscribe({next:C,error:A,complete:z});return l instanceof O.w0&&l.add(Q),Q}};function Ut(){return this._results[Eu()]()}class Cn{get changes(){return this._changes||(this._changes=new Ht)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Eu(),v=Cn.prototype;v[c]||(v[c]=Ut)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const v=this;v.dirty=!1;const C=function $(s){return s.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function U(s,l,c){if(s.length!==l.length)return!1;for(let v=0;v<s.length;v++){let C=s[v],A=l[v];if(c&&(C=c(C),A=c(A)),A!==C)return!1}return!0}(v._results,C,c))&&(v._results=C,v.length=C.length,v.last=C[this.length-1],v.first=C[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Jn=(()=>{class s{}return s.__NG_ELEMENT_ID__=or,s})();const fi=Jn,jn=class extends fi{constructor(l,c,v){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=v}createEmbeddedView(l,c){const v=this._declarationTContainer.tViews,C=Od(this._declarationLView,v,l,16,null,v.declTNode,null,null,null,null,c||null);C[17]=this._declarationLView[this._declarationTContainer.index];const z=this._declarationLView[19];return null!==z&&(C[19]=z.createEmbeddedView(v)),pd(v,C,l),new yp(C)}};function or(){return Ci(Ro(),Un())}function Ci(s,l){return 4&s.type?new jn(l,s,Al(s,l)):null}let Ti=(()=>{class s{}return s.__NG_ELEMENT_ID__=Do,s})();function Do(){return Ar(Ro(),Un())}const Qi=Ti,eo=class extends Qi{constructor(l,c,v){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=v}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const l=ms(this._hostTNode,this._hostLView);if(Gs(l)){const c=ns(l,this._hostLView),v=rr(l);return new Co(c[1].data[v+8],c)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=rs(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,c,v){let C,A;"number"==typeof v?C=v:null!=v&&(C=v.index,A=v.injector);const z=l.createEmbeddedView(c||{},A);return this.insert(z,C),z}createComponent(l,c,v,C,A){const z=l&&!function S(s){return"function"==typeof s}(l);let Q;if(z)Q=c;else{const Tt=c||{};Q=Tt.index,v=Tt.injector,C=Tt.projectableNodes,A=Tt.environmentInjector||Tt.ngModuleRef}const le=z?l:new tm(St(l)),Ee=v||this.parentInjector;if(!A&&null==le.ngModule){const Zt=(z?Ee:this.parentInjector).get(No,null);Zt&&(A=Zt)}const qe=le.create(Ee,C,void 0,A);return this.insert(qe.hostView,Q),qe}insert(l,c){const v=l._lView,C=v[1];if(function ka(s){return go(s[3])}(v)){const qe=this.indexOf(l);if(-1!==qe)this.detach(qe);else{const Tt=v[3],Zt=new eo(Tt,Tt[6],Tt[3]);Zt.detach(Zt.indexOf(l))}}const A=this._adjustIndex(c),z=this._lContainer;!function Lm(s,l,c,v){const C=10+v,A=c.length;v>0&&(c[C-1][4]=l),v<A-10?(l[4]=c[C],oe(c,10+v,l)):(c.push(l),l[4]=null),l[3]=c;const z=l[17];null!==z&&c!==z&&function zp(s,l){const c=s[9];l[16]!==l[3][3][16]&&(s[2]=!0),null===c?s[9]=[l]:c.push(l)}(z,l);const Q=l[19];null!==Q&&Q.insertView(s),l[2]|=64}(C,v,z,A);const Q=wh(A,z),le=v[11],Ee=Qh(le,z[7]);return null!==Ee&&function td(s,l,c,v,C,A){v[0]=C,v[6]=l,Nc(s,v,c,1,C,A)}(C,z[6],le,v,Ee,Q),l.attachToViewContainerRef(),oe(fc(z),A,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=rs(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),v=Nf(this._lContainer,c);v&&(Ne(fc(this._lContainer),c),xd(v[1],v))}detach(l){const c=this._adjustIndex(l,-1),v=Nf(this._lContainer,c);return v&&null!=Ne(fc(this._lContainer),c)?new yp(v):null}_adjustIndex(l,c=0){return l??this.length+c}};function rs(s){return s[8]}function fc(s){return s[8]||(s[8]=[])}function Ar(s,l){let c;const v=l[s.index];if(go(v))c=v;else{let C;if(8&s.type)C=So(v);else{const A=l[11];C=A.createComment("");const z=gn(s,l);jd(A,Qh(A,z),C,function kg(s,l){return s.nextSibling(l)}(A,z),!1)}l[s.index]=c=Rh(v,l,C,s),ti(l,c)}return new eo(c,s,l)}class Io{constructor(l){this.queryList=l,this.matches=null}clone(){return new Io(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sr{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const v=null!==l.contentQueries?l.contentQueries[0]:c.length,C=[];for(let A=0;A<v;A++){const z=c.getByIndex(A);C.push(this.queries[z.indexInDeclarationView].clone())}return new Sr(C)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==Sb(l,c).matches&&this.queries[c].setDirty()}}class Au{constructor(l,c,v=null){this.predicate=l,this.flags=c,this.read=v}}class mc{constructor(l=[]){this.queries=l}elementStart(l,c){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let v=0;v<this.length;v++){const C=null!==c?c.length:0,A=this.getByIndex(v).embeddedTView(l,C);A&&(A.indexInDeclarationView=v,null!==c?c.push(A):c=[A])}return null!==c?new mc(c):null}template(l,c){for(let v=0;v<this.queries.length;v++)this.queries[v].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Nl{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new Nl(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let v=l.parent;for(;null!==v&&8&v.type&&v.index!==c;)v=v.parent;return c===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const v=this.metadata.predicate;if(Array.isArray(v))for(let C=0;C<v.length;C++){const A=v[C];this.matchTNodeWithReadOption(l,c,hl(c,A)),this.matchTNodeWithReadOption(l,c,He(c,l,A,!1,!1))}else v===Jn?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,He(c,l,v,!1,!1))}matchTNodeWithReadOption(l,c,v){if(null!==v){const C=this.metadata.read;if(null!==C)if(C===Qu||C===Ti||C===Jn&&4&c.type)this.addMatch(c.index,-2);else{const A=He(c,l,C,!1,!1);null!==A&&this.addMatch(c.index,A)}else this.addMatch(c.index,v)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function hl(s,l){const c=s.localNames;if(null!==c)for(let v=0;v<c.length;v+=2)if(c[v]===l)return c[v+1];return null}function gc(s,l,c,v){return-1===c?function Jc(s,l){return 11&s.type?Al(s,l):4&s.type?Ci(s,l):null}(l,s):-2===c?function oa(s,l,c){return c===Qu?Al(l,s):c===Jn?Ci(l,s):c===Ti?Ar(l,s):void 0}(s,l,v):zt(s,s[1],c,l)}function Em(s,l,c,v){const C=l[19].queries[v];if(null===C.matches){const A=s.data,z=c.matches,Q=[];for(let le=0;le<z.length;le+=2){const Ee=z[le];Q.push(Ee<0?null:gc(l,A[Ee],z[le+1],c.metadata.read))}C.matches=Q}return C.matches}function uh(s,l,c,v){const C=s.queries.getByIndex(c),A=C.matches;if(null!==A){const z=Em(s,l,C,c);for(let Q=0;Q<A.length;Q+=2){const le=A[Q];if(le>0)v.push(z[Q/2]);else{const Ee=A[Q+1],qe=l[-le];for(let Tt=10;Tt<qe.length;Tt++){const Zt=qe[Tt];Zt[17]===Zt[3]&&uh(Zt[1],Zt,Ee,v)}if(null!==qe[9]){const Tt=qe[9];for(let Zt=0;Zt<Tt.length;Zt++){const sn=Tt[Zt];uh(sn[1],sn,Ee,v)}}}}}return v}function M_(s){const l=Un(),c=vr(),v=Eo();dr(v+1);const C=Sb(c,v);if(s.dirty&&function Da(s){return 4==(4&s[2])}(l)===(2==(2&C.metadata.flags))){if(null===C.matches)s.reset([]);else{const A=C.crossesNgTemplate?uh(c,l,v,[]):Em(c,l,C,v);s.reset(A,up),s.notifyOnChanges()}return!0}return!1}function yy(s,l,c){const v=vr();v.firstCreatePass&&(Mb(v,new Au(s,l,c),-1),2==(2&l)&&(v.staticViewQueries=!0)),Db(v,Un(),l)}function vy(s,l,c,v){const C=vr();if(C.firstCreatePass){const A=Ro();Mb(C,new Au(l,c,v),A.index),function A1(s,l){const c=s.contentQueries||(s.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,l)}(C,s),2==(2&c)&&(C.staticContentQueries=!0)}Db(C,Un(),c)}function Tb(){return function E1(s,l){return s[19].queries[l].queryList}(Un(),Eo())}function Db(s,l,c){const v=new Cn(4==(4&c));va(s,l,v,v.destroy),null===l[19]&&(l[19]=new Sr),l[19].queries.push(new Io(v))}function Mb(s,l,c){null===s.queries&&(s.queries=new mc),s.queries.track(new Nl(l,c))}function Sb(s,l){return s.queries.getByIndex(l)}function Eb(s,l){return Ci(s,l)}function Ev(...s){}const Yb=new Kr("Application Initializer");let Av=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Ev,this.reject=Ev,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,C)=>{this.resolve=v,this.reject=C})}runInitializers(){if(this.initialized)return;const c=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let C=0;C<this.appInits.length;C++){const A=this.appInits[C]();if(dc(A))c.push(A);else if(oh(A)){const z=new Promise((Q,le)=>{A.subscribe({complete:Q,error:le})});c.push(z)}}Promise.all(c).then(()=>{v()}).catch(C=>{this.reject(C)}),0===c.length&&v(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(se(Yb,8))},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const qb=new Kr("AppId",{providedIn:"root",factory:function Jb(){return`${Z0()}${Z0()}${Z0()}`}});function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wb=new Kr("Platform Initializer"),J1=new Kr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qb=new Kr("appBootstrapListener"),W1=new Kr("AnimationModuleType");let Q1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Iv=new Kr("LocaleId",{providedIn:"root",factory:()=>re(Iv,j.Optional|j.SkipSelf)||function K1(){return typeof $localize<"u"&&$localize.locale||hm}()}),X1=new Kr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ex{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let tx=(()=>{class s{compileModuleSync(c){return new Af(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const v=this.compileModuleSync(c),A=yt(gi(c).declarations).reduce((z,Q)=>{const le=St(Q);return le&&z.push(new tm(le)),z},[]);return new ex(v,A)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const rx=(()=>Promise.resolve(0))();function $0(s){typeof Zone>"u"?rx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ch{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ht(!1),this.onMicrotaskEmpty=new Ht(!1),this.onStable=new Ht(!1),this.onError=new Ht(!1),typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();const C=this;C._nesting=0,C._outer=C._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(C._inner=C._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(C._inner=C._inner.fork(Zone.longStackTraceZoneSpec)),C.shouldCoalesceEventChangeDetection=!v&&c,C.shouldCoalesceRunChangeDetection=v,C.lastRequestAnimationFrameId=-1,C.nativeRequestAnimationFrame=function ox(){let s=Vt.requestAnimationFrame,l=Vt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&l){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const v=l[Zone.__symbol__("OriginalDelegate")];v&&(l=v)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function lx(s){const l=()=>{!function ax(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Vt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,q0(s),s.isCheckStableRunning=!0,Y0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),q0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,v,C,A,z,Q)=>{try{return e1(s),c.invokeTask(C,A,z,Q)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===A.type||s.shouldCoalesceRunChangeDetection)&&l(),t1(s)}},onInvoke:(c,v,C,A,z,Q,le)=>{try{return e1(s),c.invoke(C,A,z,Q,le)}finally{s.shouldCoalesceRunChangeDetection&&l(),t1(s)}},onHasTask:(c,v,C,A)=>{c.hasTask(C,A),v===C&&("microTask"==A.change?(s._hasPendingMicrotasks=A.microTask,q0(s),Y0(s)):"macroTask"==A.change&&(s.hasPendingMacrotasks=A.macroTask))},onHandleError:(c,v,C,A)=>(c.handleError(C,A),s.runOutsideAngular(()=>s.onError.emit(A)),!1)})}(C)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ch.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(ch.isInAngularZone())throw new ct(909,!1)}run(l,c,v){return this._inner.run(l,c,v)}runTask(l,c,v,C){const A=this._inner,z=A.scheduleEventTask("NgZoneEvent: "+C,l,sx,Ev,Ev);try{return A.runTask(z,c,v)}finally{A.cancelTask(z)}}runGuarded(l,c,v){return this._inner.runGuarded(l,c,v)}runOutsideAngular(l){return this._outer.run(l)}}const sx={};function Y0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function q0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function e1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function t1(s){s._nesting--,Y0(s)}class ux{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ht,this.onMicrotaskEmpty=new Ht,this.onStable=new Ht,this.onError=new Ht}run(l,c,v){return l.apply(c,v)}runGuarded(l,c,v){return l.apply(c,v)}runOutsideAngular(l){return l()}runTask(l,c,v,C){return l.apply(c,v)}}const n1=new Kr(""),r1=new Kr("");let J0,cx=(()=>{class s{constructor(c,v,C){this._ngZone=c,this.registry=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,J0||(function dx(s){J0=s}(C),C.addToWindow(v)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ch.assertNotInAngularZone(),$0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$0(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(c)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,v,C){let A=-1;v&&v>0&&(A=setTimeout(()=>{this._callbacks=this._callbacks.filter(z=>z.timeoutId!==A),c(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:c,timeoutId:A,updateCb:C})}whenStable(c,v,C){if(C&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,v,C),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,v,C){return[]}}return s.\u0275fac=function(c){return new(c||s)(se(ch),se(o1),se(r1))},s.\u0275prov=Xn({token:s,factory:s.\u0275fac}),s})(),o1=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,v){this._applications.set(c,v)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,v=!0){return J0?.findTestabilityInTree(this,c,v)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Am=null;const s1=new Kr("AllowMultipleToken"),W0=new Kr("PlatformDestroyListeners");class fx{constructor(l,c){this.name=l,this.token=c}}function l1(s,l,c=[]){const v=`Platform: ${l}`,C=new Kr(v);return(A=[])=>{let z=Q0();if(!z||z.injector.get(s1,!1)){const Q=[...c,...A,{provide:C,useValue:!0}];s?s(Q):function mx(s){if(Am&&!Am.get(s1,!1))throw new ct(400,!1);Am=s;const l=s.get(c1);(function a1(s){const l=s.get(Wb,null);l&&l.forEach(c=>c())})(s)}(function u1(s=[],l){return Ho.create({name:l,providers:[{provide:as,useValue:"platform"},{provide:W0,useValue:new Set([()=>Am=null])},...s]})}(Q,v))}return function _x(s){const l=Q0();if(!l)throw new ct(401,!1);return l}()}}function Q0(){return Am?.get(c1)??null}let c1=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,v){const C=function h1(s,l){let c;return c="noop"===s?new ux:("zone.js"===s?void 0:s)||new ch(l),c}(v?.ngZone,function d1(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(v)),A=[{provide:ch,useValue:C}];return C.run(()=>{const z=Ho.create({providers:A,parent:this.injector,name:c.moduleType.name}),Q=c.create(z),le=Q.injector.get(L,null);if(!le)throw new ct(402,!1);return C.runOutsideAngular(()=>{const Ee=C.onError.subscribe({next:qe=>{le.handleError(qe)}});Q.onDestroy(()=>{Pv(this._modules,Q),Ee.unsubscribe()})}),function p1(s,l,c){try{const v=c();return dc(v)?v.catch(C=>{throw l.runOutsideAngular(()=>s.handleError(C)),C}):v}catch(v){throw l.runOutsideAngular(()=>s.handleError(v)),v}}(le,C,()=>{const Ee=Q.injector.get(Av);return Ee.runInitializers(),Ee.donePromise.then(()=>(tv(Q.injector.get(Iv,hm)||hm),this._moduleDoBootstrap(Q),Q))})})}bootstrapModule(c,v=[]){const C=f1({},v);return function hx(s,l,c){const v=new Af(c);return Promise.resolve(v)}(0,0,c).then(A=>this.bootstrapModuleFactory(A,C))}_moduleDoBootstrap(c){const v=c.injector.get(Ov);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(C=>v.bootstrap(C));else{if(!c.instance.ngDoBootstrap)throw new ct(-403,!1);c.instance.ngDoBootstrap(v)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ct(404,!1);this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v());const c=this._injector.get(W0,null);c&&(c.forEach(v=>v()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(se(Ho))},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function f1(s,l){return Array.isArray(l)?l.reduce(f1,s):{...s,...l}}let Ov=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,v,C){this._zone=c,this._injector=v,this._exceptionHandler=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const A=new u.y(Q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Q.next(this._stable),Q.complete()})}),z=new u.y(Q=>{let le;this._zone.runOutsideAngular(()=>{le=this._zone.onStable.subscribe(()=>{ch.assertNotInAngularZone(),$0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Q.next(!0))})})});const Ee=this._zone.onUnstable.subscribe(()=>{ch.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Q.next(!1)}))});return()=>{le.unsubscribe(),Ee.unsubscribe()}});this.isStable=(0,fe.T)(A,z.pipe(function de(s={}){const{connector:l=(()=>new o.x),resetOnError:c=!0,resetOnComplete:v=!0,resetOnRefCountZero:C=!0}=s;return A=>{let z,Q,le,Ee=0,qe=!1,Tt=!1;const Zt=()=>{Q?.unsubscribe(),Q=void 0},sn=()=>{Zt(),z=le=void 0,qe=Tt=!1},Ln=()=>{const ni=z;sn(),ni?.unsubscribe()};return(0,q.e)((ni,Di)=>{Ee++,!Tt&&!qe&&Zt();const $i=le=le??l();Di.add(()=>{Ee--,0===Ee&&!Tt&&!qe&&(Q=we(Ln,C))}),$i.subscribe(Di),!z&&Ee>0&&(z=new i.Hp({next:xr=>$i.next(xr),error:xr=>{Tt=!0,Zt(),Q=we(sn,c,xr),$i.error(xr)},complete:()=>{qe=!0,Zt(),Q=we(sn,v),$i.complete()}}),(0,Y.Xf)(ni).subscribe(z))})(A)}}()))}bootstrap(c,v){const C=c instanceof _s;if(!this._injector.get(Av).done)throw!C&&ri(c),new ct(405,false);let z;z=C?c:this._injector.get(Du).resolveComponentFactory(c),this.componentTypes.push(z.componentType);const Q=function px(s){return s.isBoundToModule}(z)?void 0:this._injector.get(wm),Ee=z.create(Ho.NULL,[],v||z.selector,Q),qe=Ee.location.nativeElement,Tt=Ee.injector.get(n1,null);return Tt?.registerApplication(qe),Ee.onDestroy(()=>{this.detachView(Ee.hostView),Pv(this.components,Ee),Tt?.unregisterApplication(qe)}),this._loadComponent(Ee),Ee}tick(){if(this._runningTick)throw new ct(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const v=c;this._views.push(v),v.attachToAppRef(this)}detachView(c){const v=c;Pv(this._views,v),v.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const v=this._injector.get(Qb,[]);v.push(...this._bootstrapListeners),v.forEach(C=>C(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Pv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ct(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(se(ch),se(No),se(L))},s.\u0275prov=Xn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pv(s,l){const c=s.indexOf(l);c>-1&&s.splice(c,1)}function vx(){return!1}let bx=(()=>{class s{}return s.__NG_ELEMENT_ID__=xx,s})();function xx(s){return function wx(s,l,c){if(bs(s)&&!c){const v=da(s.index,l);return new yp(v,v)}return 47&s.type?new yp(l[16],l):null}(Ro(),Un(),16==(16&s))}class v1{constructor(){}supports(l){return j_(l)}create(l){return new Ex(l)}}const Sx=(s,l)=>l;class Ex{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Sx}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,v=this._removalsHead,C=0,A=null;for(;c||v;){const z=!v||c&&c.currentIndex<x1(v,C,A)?c:v,Q=x1(z,C,A),le=z.currentIndex;if(z===v)C--,v=v._nextRemoved;else if(c=c._next,null==z.previousIndex)C++;else{A||(A=[]);const Ee=Q-C,qe=le-C;if(Ee!=qe){for(let Zt=0;Zt<Ee;Zt++){const sn=Zt<A.length?A[Zt]:A[Zt]=0,Ln=sn+Zt;qe<=Ln&&Ln<Ee&&(A[Zt]=sn+1)}A[z.previousIndex]=qe-Ee}}Q!==le&&l(z,Q,le)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!j_(l))throw new ct(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let C,A,z,c=this._itHead,v=!1;if(Array.isArray(l)){this.length=l.length;for(let Q=0;Q<this.length;Q++)A=l[Q],z=this._trackByFn(Q,A),null!==c&&Object.is(c.trackById,z)?(v&&(c=this._verifyReinsertion(c,A,z,Q)),Object.is(c.item,A)||this._addIdentityChange(c,A)):(c=this._mismatch(c,A,z,Q),v=!0),c=c._next}else C=0,function My(s,l){if(Array.isArray(s))for(let c=0;c<s.length;c++)l(s[c]);else{const c=s[Eu()]();let v;for(;!(v=c.next()).done;)l(v.value)}}(l,Q=>{z=this._trackByFn(C,Q),null!==c&&Object.is(c.trackById,z)?(v&&(c=this._verifyReinsertion(c,Q,z,C)),Object.is(c.item,Q)||this._addIdentityChange(c,Q)):(c=this._mismatch(c,Q,z,C),v=!0),c=c._next,C++}),this.length=C;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,v,C){let A;return null===l?A=this._itTail:(A=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,A,C)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(v,C))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,A,C)):l=this._addAfter(new Ax(c,v),A,C),l}_verifyReinsertion(l,c,v,C){let A=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null);return null!==A?l=this._reinsertAfter(A,l._prev,C):l.currentIndex!=C&&(l.currentIndex=C,this._addToMoves(l,C)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,v){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const C=l._prevRemoved,A=l._nextRemoved;return null===C?this._removalsHead=A:C._nextRemoved=A,null===A?this._removalsTail=C:A._prevRemoved=C,this._insertAfter(l,c,v),this._addToMoves(l,v),l}_moveAfter(l,c,v){return this._unlink(l),this._insertAfter(l,c,v),this._addToMoves(l,v),l}_addAfter(l,c,v){return this._insertAfter(l,c,v),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,v){const C=null===c?this._itHead:c._next;return l._next=C,l._prev=c,null===C?this._itTail=l:C._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new b1),this._linkedRecords.put(l),l.currentIndex=v,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,v=l._next;return null===c?this._itHead=v:c._next=v,null===v?this._itTail=c:v._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new b1),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class Ax{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ix{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let v;for(v=this._head;null!==v;v=v._nextDup)if((null===c||c<=v.currentIndex)&&Object.is(v.trackById,l))return v;return null}remove(l){const c=l._prevDup,v=l._nextDup;return null===c?this._head=v:c._nextDup=v,null===v?this._tail=c:v._prevDup=c,null===this._head}}class b1{constructor(){this.map=new Map}put(l){const c=l.trackById;let v=this.map.get(c);v||(v=new Ix,this.map.set(c,v)),v.add(l)}get(l,c){const C=this.map.get(l);return C?C.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function x1(s,l,c){const v=s.previousIndex;if(null===v)return v;let C=0;return c&&v<c.length&&(C=c[v]),v+l+C}class w1{constructor(){}supports(l){return l instanceof Map||Sy(l)}create(){return new Ox}}class Ox{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||Sy(l)))throw new ct(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(v,C)=>{if(c&&c.key===C)this._maybeAddToChanges(c,v),this._appendAfter=c,c=c._next;else{const A=this._getOrCreateRecordForKey(C,v);c=this._insertBeforeOrAppend(c,A)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let v=c;null!==v;v=v._nextRemoved)v===this._mapHead&&(this._mapHead=null),this._records.delete(v.key),v._nextRemoved=v._next,v.previousValue=v.currentValue,v.currentValue=null,v._prev=null,v._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const v=l._prev;return c._next=l,c._prev=v,l._prev=c,v&&(v._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const C=this._records.get(l);this._maybeAddToChanges(C,c);const A=C._prev,z=C._next;return A&&(A._next=z),z&&(z._prev=A),C._next=null,C._prev=null,C}const v=new Px(l);return this._records.set(l,v),v.currentValue=c,this._addToAdditions(v),v}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(v=>c(l[v],v))}}class Px{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function C1(){return new nb([new v1])}let nb=(()=>{class s{constructor(c){this.factories=c}static create(c,v){if(null!=v){const C=v.factories.slice();c=c.concat(C)}return new s(c)}static extend(c){return{provide:s,useFactory:v=>s.create(c,v||C1()),deps:[[s,new Ms,new Bi]]}}find(c){const v=this.factories.find(C=>C.supports(c));if(null!=v)return v;throw new ct(901,!1)}}return s.\u0275prov=Xn({token:s,providedIn:"root",factory:C1}),s})();function T1(){return new ib([new w1])}let ib=(()=>{class s{constructor(c){this.factories=c}static create(c,v){if(v){const C=v.factories.slice();c=c.concat(C)}return new s(c)}static extend(c){return{provide:s,useFactory:v=>s.create(c,v||T1()),deps:[[s,new Ms,new Bi]]}}find(c){const v=this.factories.find(C=>C.supports(c));if(v)return v;throw new ct(901,!1)}}return s.\u0275prov=Xn({token:s,providedIn:"root",factory:T1}),s})();const Fx=l1(null,"core",[]);let Nx=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(se(Ov))},s.\u0275mod=At({type:s}),s.\u0275inj=pi({}),s})();function Lx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Ux(s,l){const c=St(s),v=l.elementInjector||Vo();return new tm(c).create(v,l.projectableNodes,l.hostElement,l.environmentInjector)}},4006:(tn,nt,N)=>{"use strict";N.d(nt,{Cf:()=>lt,EJ:()=>la,F:()=>ci,Fd:()=>gl,Fj:()=>je,JJ:()=>ii,JL:()=>$n,JU:()=>de,Kr:()=>pu,NI:()=>yr,On:()=>wa,Q7:()=>Ta,UX:()=>Jo,Wl:()=>Ve,YN:()=>ql,Zs:()=>_l,_:()=>Oa,_Y:()=>Za,a5:()=>Mn,kI:()=>ct,nD:()=>$a,qQ:()=>Ca,qu:()=>Cs,sg:()=>go,u:()=>hs,u5:()=>ka,wO:()=>$r,wV:()=>Ia});var o=N(1571),O=N(6895),u=N(2076),fe=N(4128),Y=N(4004);let i=(()=>{class ye{constructor(ne,We){this._renderer=ne,this._elementRef=We,this.onChange=_n=>{},this.onTouched=()=>{}}setProperty(ne,We){this._renderer.setProperty(this._elementRef.nativeElement,ne,We)}registerOnTouched(ne){this.onTouched=ne}registerOnChange(ne){this.onChange=ne}setDisabledState(ne){this.setProperty("disabled",ne)}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(o.Qsj),o.Y36(o.SBq))},ye.\u0275dir=o.lG2({type:ye}),ye})(),q=(()=>{class ye extends i{}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,features:[o.qOj]}),ye})();const de=new o.OlP("NgValueAccessor"),we={provide:de,useExisting:(0,o.Gpc)(()=>Ve),multi:!0};let Ve=(()=>{class ye extends q{writeValue(ne){this.setProperty("checked",ne)}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("change",function(ki){return We.onChange(ki.target.checked)})("blur",function(){return We.onTouched()})},features:[o._Bn([we]),o.qOj]}),ye})();const De={provide:de,useExisting:(0,o.Gpc)(()=>je),multi:!0},Ke=new o.OlP("CompositionEventMode");let je=(()=>{class ye extends i{constructor(ne,We,_n){super(ne,We),this._compositionMode=_n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function it(){const ye=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(ye.toLowerCase())}())}writeValue(ne){this.setProperty("value",ne??"")}_handleInput(ne){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(ne)}_compositionStart(){this._composing=!0}_compositionEnd(ne){this._composing=!1,this._compositionMode&&this.onChange(ne)}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Ke,8))},ye.\u0275dir=o.lG2({type:ye,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("input",function(ki){return We._handleInput(ki.target.value)})("blur",function(){return We.onTouched()})("compositionstart",function(){return We._compositionStart()})("compositionend",function(ki){return We._compositionEnd(ki.target.value)})},features:[o._Bn([De]),o.qOj]}),ye})();function Je(ye){return null==ye||("string"==typeof ye||Array.isArray(ye))&&0===ye.length}function gt(ye){return null!=ye&&"number"==typeof ye.length}const lt=new o.OlP("NgValidators"),wt=new o.OlP("NgAsyncValidators"),dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ct{static min(ve){return at(ve)}static max(ve){return Qe(ve)}static required(ve){return ht(ve)}static requiredTrue(ve){return Bt(ve)}static email(ve){return function Ft(ye){return Je(ye.value)||dt.test(ye.value)?null:{email:!0}}(ve)}static minLength(ve){return kt(ve)}static maxLength(ve){return bn(ve)}static pattern(ve){return function Kt(ye){if(!ye)return Zn;let ve,ne;return"string"==typeof ye?(ne="","^"!==ye.charAt(0)&&(ne+="^"),ne+=ye,"$"!==ye.charAt(ye.length-1)&&(ne+="$"),ve=new RegExp(ne)):(ne=ye.toString(),ve=ye),We=>{if(Je(We.value))return null;const _n=We.value;return ve.test(_n)?null:{pattern:{requiredPattern:ne,actualValue:_n}}}}(ve)}static nullValidator(ve){return null}static compose(ve){return Ot(ve)}static composeAsync(ve){return ln(ve)}}function at(ye){return ve=>{if(Je(ve.value)||Je(ye))return null;const ne=parseFloat(ve.value);return!isNaN(ne)&&ne<ye?{min:{min:ye,actual:ve.value}}:null}}function Qe(ye){return ve=>{if(Je(ve.value)||Je(ye))return null;const ne=parseFloat(ve.value);return!isNaN(ne)&&ne>ye?{max:{max:ye,actual:ve.value}}:null}}function ht(ye){return Je(ye.value)?{required:!0}:null}function Bt(ye){return!0===ye.value?null:{required:!0}}function kt(ye){return ve=>Je(ve.value)||!gt(ve.value)?null:ve.value.length<ye?{minlength:{requiredLength:ye,actualLength:ve.value.length}}:null}function bn(ye){return ve=>gt(ve.value)&&ve.value.length>ye?{maxlength:{requiredLength:ye,actualLength:ve.value.length}}:null}function Zn(ye){return null}function wn(ye){return null!=ye}function Vr(ye){return(0,o.QGY)(ye)?(0,u.D)(ye):ye}function Hi(ye){let ve={};return ye.forEach(ne=>{ve=null!=ne?{...ve,...ne}:ve}),0===Object.keys(ve).length?null:ve}function Vi(ye,ve){return ve.map(ne=>ne(ye))}function en(ye){return ye.map(ve=>function Hr(ye){return!ye.validate}(ve)?ve:ne=>ve.validate(ne))}function Ot(ye){if(!ye)return null;const ve=ye.filter(wn);return 0==ve.length?null:function(ne){return Hi(Vi(ne,ve))}}function Jt(ye){return null!=ye?Ot(en(ye)):null}function ln(ye){if(!ye)return null;const ve=ye.filter(wn);return 0==ve.length?null:function(ne){const We=Vi(ne,ve).map(Vr);return(0,fe.D)(We).pipe((0,Y.U)(Hi))}}function fn(ye){return null!=ye?ln(en(ye)):null}function qt(ye,ve){return null===ye?[ve]:Array.isArray(ye)?[...ye,ve]:[ye,ve]}function On(ye){return ye._rawValidators}function Nn(ye){return ye._rawAsyncValidators}function Ui(ye){return ye?Array.isArray(ye)?ye:[ye]:[]}function Yn(ye,ve){return Array.isArray(ye)?ye.includes(ve):ye===ve}function Gn(ye,ve){const ne=Ui(ve);return Ui(ye).forEach(_n=>{Yn(ne,_n)||ne.push(_n)}),ne}function Xn(ye,ve){return Ui(ve).filter(ne=>!Yn(ye,ne))}class mi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ve){this._rawValidators=ve||[],this._composedValidatorFn=Jt(this._rawValidators)}_setAsyncValidators(ve){this._rawAsyncValidators=ve||[],this._composedAsyncValidatorFn=fn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ve){this._onDestroyCallbacks.push(ve)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ve=>ve()),this._onDestroyCallbacks=[]}reset(ve){this.control&&this.control.reset(ve)}hasError(ve,ne){return!!this.control&&this.control.hasError(ve,ne)}getError(ve,ne){return this.control?this.control.getError(ve,ne):null}}class pi extends mi{get formDirective(){return null}get path(){return null}}class Mn extends mi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pn{constructor(ve){this._cd=ve}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ii=(()=>{class ye extends Pn{constructor(ne){super(ne)}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(Mn,2))},ye.\u0275dir=o.lG2({type:ye,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ne,We){2&ne&&o.ekj("ng-untouched",We.isUntouched)("ng-touched",We.isTouched)("ng-pristine",We.isPristine)("ng-dirty",We.isDirty)("ng-valid",We.isValid)("ng-invalid",We.isInvalid)("ng-pending",We.isPending)},features:[o.qOj]}),ye})(),$n=(()=>{class ye extends Pn{constructor(ne){super(ne)}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(pi,10))},ye.\u0275dir=o.lG2({type:ye,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ne,We){2&ne&&o.ekj("ng-untouched",We.isUntouched)("ng-touched",We.isTouched)("ng-pristine",We.isPristine)("ng-dirty",We.isDirty)("ng-valid",We.isValid)("ng-invalid",We.isInvalid)("ng-pending",We.isPending)("ng-submitted",We.isSubmitted)},features:[o.qOj]}),ye})();const wr="VALID",Gr="INVALID",ao="PENDING",Zr="DISABLED";function Qt(ye){return(re(ye)?ye.validators:ye)||null}function se(ye,ve){return(re(ve)?ve.asyncValidators:ye)||null}function re(ye){return null!=ye&&!Array.isArray(ye)&&"object"==typeof ye}function _e(ye,ve,ne){const We=ye.controls;if(!(ve?Object.keys(We):We).length)throw new o.vHH(1e3,"");if(!We[ne])throw new o.vHH(1001,"")}function Le(ye,ve,ne){ye._forEachChild((We,_n)=>{if(void 0===ne[_n])throw new o.vHH(1002,"")})}class Ze{constructor(ve,ne){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(ve),this._assignAsyncValidators(ne)}get validator(){return this._composedValidatorFn}set validator(ve){this._rawValidators=this._composedValidatorFn=ve}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ve){this._rawAsyncValidators=this._composedAsyncValidatorFn=ve}get parent(){return this._parent}get valid(){return this.status===wr}get invalid(){return this.status===Gr}get pending(){return this.status==ao}get disabled(){return this.status===Zr}get enabled(){return this.status!==Zr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ve){this._assignValidators(ve)}setAsyncValidators(ve){this._assignAsyncValidators(ve)}addValidators(ve){this.setValidators(Gn(ve,this._rawValidators))}addAsyncValidators(ve){this.setAsyncValidators(Gn(ve,this._rawAsyncValidators))}removeValidators(ve){this.setValidators(Xn(ve,this._rawValidators))}removeAsyncValidators(ve){this.setAsyncValidators(Xn(ve,this._rawAsyncValidators))}hasValidator(ve){return Yn(this._rawValidators,ve)}hasAsyncValidator(ve){return Yn(this._rawAsyncValidators,ve)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ve={}){this.touched=!0,this._parent&&!ve.onlySelf&&this._parent.markAsTouched(ve)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ve=>ve.markAllAsTouched())}markAsUntouched(ve={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(ne=>{ne.markAsUntouched({onlySelf:!0})}),this._parent&&!ve.onlySelf&&this._parent._updateTouched(ve)}markAsDirty(ve={}){this.pristine=!1,this._parent&&!ve.onlySelf&&this._parent.markAsDirty(ve)}markAsPristine(ve={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(ne=>{ne.markAsPristine({onlySelf:!0})}),this._parent&&!ve.onlySelf&&this._parent._updatePristine(ve)}markAsPending(ve={}){this.status=ao,!1!==ve.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ve.onlySelf&&this._parent.markAsPending(ve)}disable(ve={}){const ne=this._parentMarkedDirty(ve.onlySelf);this.status=Zr,this.errors=null,this._forEachChild(We=>{We.disable({...ve,onlySelf:!0})}),this._updateValue(),!1!==ve.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ve,skipPristineCheck:ne}),this._onDisabledChange.forEach(We=>We(!0))}enable(ve={}){const ne=this._parentMarkedDirty(ve.onlySelf);this.status=wr,this._forEachChild(We=>{We.enable({...ve,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ve.emitEvent}),this._updateAncestors({...ve,skipPristineCheck:ne}),this._onDisabledChange.forEach(We=>We(!1))}_updateAncestors(ve){this._parent&&!ve.onlySelf&&(this._parent.updateValueAndValidity(ve),ve.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ve){this._parent=ve}getRawValue(){return this.value}updateValueAndValidity(ve={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wr||this.status===ao)&&this._runAsyncValidator(ve.emitEvent)),!1!==ve.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ve.onlySelf&&this._parent.updateValueAndValidity(ve)}_updateTreeValidity(ve={emitEvent:!0}){this._forEachChild(ne=>ne._updateTreeValidity(ve)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ve.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zr:wr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ve){if(this.asyncValidator){this.status=ao,this._hasOwnPendingAsyncValidator=!0;const ne=Vr(this.asyncValidator(this));this._asyncValidationSubscription=ne.subscribe(We=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(We,{emitEvent:ve})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ve,ne={}){this.errors=ve,this._updateControlsErrors(!1!==ne.emitEvent)}get(ve){let ne=ve;return null==ne||(Array.isArray(ne)||(ne=ne.split(".")),0===ne.length)?null:ne.reduce((We,_n)=>We&&We._find(_n),this)}getError(ve,ne){const We=ne?this.get(ne):this;return We&&We.errors?We.errors[ve]:null}hasError(ve,ne){return!!this.getError(ve,ne)}get root(){let ve=this;for(;ve._parent;)ve=ve._parent;return ve}_updateControlsErrors(ve){this.status=this._calculateStatus(),ve&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ve)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Zr:this.errors?Gr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ao)?ao:this._anyControlsHaveStatus(Gr)?Gr:wr}_anyControlsHaveStatus(ve){return this._anyControls(ne=>ne.status===ve)}_anyControlsDirty(){return this._anyControls(ve=>ve.dirty)}_anyControlsTouched(){return this._anyControls(ve=>ve.touched)}_updatePristine(ve={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ve.onlySelf&&this._parent._updatePristine(ve)}_updateTouched(ve={}){this.touched=this._anyControlsTouched(),this._parent&&!ve.onlySelf&&this._parent._updateTouched(ve)}_registerOnCollectionChange(ve){this._onCollectionChange=ve}_setUpdateStrategy(ve){re(ve)&&null!=ve.updateOn&&(this._updateOn=ve.updateOn)}_parentMarkedDirty(ve){return!ve&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ve){return null}_assignValidators(ve){this._rawValidators=Array.isArray(ve)?ve.slice():ve,this._composedValidatorFn=function K(ye){return Array.isArray(ye)?Jt(ye):ye||null}(this._rawValidators)}_assignAsyncValidators(ve){this._rawAsyncValidators=Array.isArray(ve)?ve.slice():ve,this._composedAsyncValidatorFn=function he(ye){return Array.isArray(ye)?fn(ye):ye||null}(this._rawAsyncValidators)}}class Pe extends Ze{constructor(ve,ne,We){super(Qt(ne),se(We,ne)),this.controls=ve,this._initObservables(),this._setUpdateStrategy(ne),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ve,ne){return this.controls[ve]?this.controls[ve]:(this.controls[ve]=ne,ne.setParent(this),ne._registerOnCollectionChange(this._onCollectionChange),ne)}addControl(ve,ne,We={}){this.registerControl(ve,ne),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}removeControl(ve,ne={}){this.controls[ve]&&this.controls[ve]._registerOnCollectionChange(()=>{}),delete this.controls[ve],this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}setControl(ve,ne,We={}){this.controls[ve]&&this.controls[ve]._registerOnCollectionChange(()=>{}),delete this.controls[ve],ne&&this.registerControl(ve,ne),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}contains(ve){return this.controls.hasOwnProperty(ve)&&this.controls[ve].enabled}setValue(ve,ne={}){Le(this,0,ve),Object.keys(ve).forEach(We=>{_e(this,!0,We),this.controls[We].setValue(ve[We],{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne)}patchValue(ve,ne={}){null!=ve&&(Object.keys(ve).forEach(We=>{const _n=this.controls[We];_n&&_n.patchValue(ve[We],{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne))}reset(ve={},ne={}){this._forEachChild((We,_n)=>{We.reset(ve[_n],{onlySelf:!0,emitEvent:ne.emitEvent})}),this._updatePristine(ne),this._updateTouched(ne),this.updateValueAndValidity(ne)}getRawValue(){return this._reduceChildren({},(ve,ne,We)=>(ve[We]=ne.getRawValue(),ve))}_syncPendingControls(){let ve=this._reduceChildren(!1,(ne,We)=>!!We._syncPendingControls()||ne);return ve&&this.updateValueAndValidity({onlySelf:!0}),ve}_forEachChild(ve){Object.keys(this.controls).forEach(ne=>{const We=this.controls[ne];We&&ve(We,ne)})}_setUpControls(){this._forEachChild(ve=>{ve.setParent(this),ve._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ve){for(const[ne,We]of Object.entries(this.controls))if(this.contains(ne)&&ve(We))return!0;return!1}_reduceValue(){return this._reduceChildren({},(ne,We,_n)=>((We.enabled||this.disabled)&&(ne[_n]=We.value),ne))}_reduceChildren(ve,ne){let We=ve;return this._forEachChild((_n,ki)=>{We=ne(We,_n,ki)}),We}_allControlsDisabled(){for(const ve of Object.keys(this.controls))if(this.controls[ve].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ve){return this.controls.hasOwnProperty(ve)?this.controls[ve]:null}}class rn extends Pe{}const et=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>tt}),tt="always";function Ye(ye,ve){return[...ve.path,ye]}function bt(ye,ve,ne=tt){In(ye,ve),ve.valueAccessor.writeValue(ye.value),(ye.disabled||"always"===ne)&&ve.valueAccessor.setDisabledState?.(ye.disabled),function Bn(ye,ve){ve.valueAccessor.registerOnChange(ne=>{ye._pendingValue=ne,ye._pendingChange=!0,ye._pendingDirty=!0,"change"===ye.updateOn&&ur(ye,ve)})}(ye,ve),function Gi(ye,ve){const ne=(We,_n)=>{ve.valueAccessor.writeValue(We),_n&&ve.viewToModelUpdate(We)};ye.registerOnChange(ne),ve._registerOnDestroy(()=>{ye._unregisterOnChange(ne)})}(ye,ve),function Ni(ye,ve){ve.valueAccessor.registerOnTouched(()=>{ye._pendingTouched=!0,"blur"===ye.updateOn&&ye._pendingChange&&ur(ye,ve),"submit"!==ye.updateOn&&ye.markAsTouched()})}(ye,ve),function xn(ye,ve){if(ve.valueAccessor.setDisabledState){const ne=We=>{ve.valueAccessor.setDisabledState(We)};ye.registerOnDisabledChange(ne),ve._registerOnDestroy(()=>{ye._unregisterOnDisabledChange(ne)})}}(ye,ve)}function mt(ye,ve,ne=!0){const We=()=>{};ve.valueAccessor&&(ve.valueAccessor.registerOnChange(We),ve.valueAccessor.registerOnTouched(We)),ai(ye,ve),ye&&(ve._invokeOnDestroyCallbacks(),ye._registerOnCollectionChange(()=>{}))}function cn(ye,ve){ye.forEach(ne=>{ne.registerOnValidatorChange&&ne.registerOnValidatorChange(ve)})}function In(ye,ve){const ne=On(ye);null!==ve.validator?ye.setValidators(qt(ne,ve.validator)):"function"==typeof ne&&ye.setValidators([ne]);const We=Nn(ye);null!==ve.asyncValidator?ye.setAsyncValidators(qt(We,ve.asyncValidator)):"function"==typeof We&&ye.setAsyncValidators([We]);const _n=()=>ye.updateValueAndValidity();cn(ve._rawValidators,_n),cn(ve._rawAsyncValidators,_n)}function ai(ye,ve){let ne=!1;if(null!==ye){if(null!==ve.validator){const _n=On(ye);if(Array.isArray(_n)&&_n.length>0){const ki=_n.filter(Wo=>Wo!==ve.validator);ki.length!==_n.length&&(ne=!0,ye.setValidators(ki))}}if(null!==ve.asyncValidator){const _n=Nn(ye);if(Array.isArray(_n)&&_n.length>0){const ki=_n.filter(Wo=>Wo!==ve.asyncValidator);ki.length!==_n.length&&(ne=!0,ye.setAsyncValidators(ki))}}}const We=()=>{};return cn(ve._rawValidators,We),cn(ve._rawAsyncValidators,We),ne}function ur(ye,ve){ye._pendingDirty&&ye.markAsDirty(),ye.setValue(ye._pendingValue,{emitModelToViewChange:!1}),ve.viewToModelUpdate(ye._pendingValue),ye._pendingChange=!1}function cr(ye,ve){In(ye,ve)}function Ct(ye,ve){if(!ye.hasOwnProperty("model"))return!1;const ne=ye.model;return!!ne.isFirstChange()||!Object.is(ve,ne.currentValue)}function Tn(ye,ve){ye._syncPendingControls(),ve.forEach(ne=>{const We=ne.control;"submit"===We.updateOn&&We._pendingChange&&(ne.viewToModelUpdate(We._pendingValue),We._pendingChange=!1)})}function Hn(ye,ve){if(!ve)return null;let ne,We,_n;return Array.isArray(ve),ve.forEach(ki=>{ki.constructor===je?ne=ki:function St(ye){return Object.getPrototypeOf(ye.constructor)===q}(ki)?We=ki:_n=ki}),_n||We||ne||null}const xi={provide:pi,useExisting:(0,o.Gpc)(()=>ci)},Sn=(()=>Promise.resolve())();let ci=(()=>{class ye extends pi{constructor(ne,We,_n){super(),this.callSetDisabledState=_n,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new Pe({},Jt(ne),fn(We))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(ne){Sn.then(()=>{const We=this._findContainer(ne.path);ne.control=We.registerControl(ne.name,ne.control),bt(ne.control,ne,this.callSetDisabledState),ne.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(ne)})}getControl(ne){return this.form.get(ne.path)}removeControl(ne){Sn.then(()=>{const We=this._findContainer(ne.path);We&&We.removeControl(ne.name),this._directives.delete(ne)})}addFormGroup(ne){Sn.then(()=>{const We=this._findContainer(ne.path),_n=new Pe({});cr(_n,ne),We.registerControl(ne.name,_n),_n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(ne){Sn.then(()=>{const We=this._findContainer(ne.path);We&&We.removeControl(ne.name)})}getFormGroup(ne){return this.form.get(ne.path)}updateModel(ne,We){Sn.then(()=>{this.form.get(ne.path).setValue(We)})}setValue(ne){this.control.setValue(ne)}onSubmit(ne){return this.submitted=!0,Tn(this.form,this._directives),this.ngSubmit.emit(ne),"dialog"===ne?.target?.method}onReset(){this.resetForm()}resetForm(ne){this.form.reset(ne),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(ne){return ne.pop(),ne.length?this.form.get(ne):this.form}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(lt,10),o.Y36(wt,10),o.Y36(et,8))},ye.\u0275dir=o.lG2({type:ye,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("submit",function(ki){return We.onSubmit(ki)})("reset",function(){return We.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([xi]),o.qOj]}),ye})();function Ri(ye,ve){const ne=ye.indexOf(ve);ne>-1&&ye.splice(ne,1)}function Pi(ye){return"object"==typeof ye&&null!==ye&&2===Object.keys(ye).length&&"value"in ye&&"disabled"in ye}const yr=class extends Ze{constructor(ve=null,ne,We){super(Qt(ne),se(We,ne)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ve),this._setUpdateStrategy(ne),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),re(ne)&&(ne.nonNullable||ne.initialValueIsDefault)&&(this.defaultValue=Pi(ve)?ve.value:ve)}setValue(ve,ne={}){this.value=this._pendingValue=ve,this._onChange.length&&!1!==ne.emitModelToViewChange&&this._onChange.forEach(We=>We(this.value,!1!==ne.emitViewToModelChange)),this.updateValueAndValidity(ne)}patchValue(ve,ne={}){this.setValue(ve,ne)}reset(ve=this.defaultValue,ne={}){this._applyFormState(ve),this.markAsPristine(ne),this.markAsUntouched(ne),this.setValue(this.value,ne),this._pendingChange=!1}_updateValue(){}_anyControls(ve){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ve){this._onChange.push(ve)}_unregisterOnChange(ve){Ri(this._onChange,ve)}registerOnDisabledChange(ve){this._onDisabledChange.push(ve)}_unregisterOnDisabledChange(ve){Ri(this._onDisabledChange,ve)}_forEachChild(ve){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ve){Pi(ve)?(this.value=this._pendingValue=ve.value,ve.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ve}},mo={provide:Mn,useExisting:(0,o.Gpc)(()=>wa)},Po=(()=>Promise.resolve())();let wa=(()=>{class ye extends Mn{constructor(ne,We,_n,ki,Wo,Nr){super(),this._changeDetectorRef=Wo,this.callSetDisabledState=Nr,this.control=new yr,this._registered=!1,this.update=new o.vpe,this._parent=ne,this._setValidators(We),this._setAsyncValidators(_n),this.valueAccessor=Hn(0,ki)}ngOnChanges(ne){if(this._checkForErrors(),!this._registered||"name"in ne){if(this._registered&&(this._checkName(),this.formDirective)){const We=ne.name.previousValue;this.formDirective.removeControl({name:We,path:this._getPath(We)})}this._setUpControl()}"isDisabled"in ne&&this._updateDisabled(ne),Ct(ne,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(ne){this.viewModel=ne,this.update.emit(ne)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(ne){Po.then(()=>{this.control.setValue(ne,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(ne){const We=ne.isDisabled.currentValue,_n=0!==We&&(0,o.D6c)(We);Po.then(()=>{_n&&!this.control.disabled?this.control.disable():!_n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(ne){return this._parent?Ye(ne,this._parent):[ne]}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(pi,9),o.Y36(lt,10),o.Y36(wt,10),o.Y36(de,10),o.Y36(o.sBO,8),o.Y36(et,8))},ye.\u0275dir=o.lG2({type:ye,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([mo]),o.qOj,o.TTD]}),ye})(),Za=(()=>{class ye{}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275dir=o.lG2({type:ye,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ye})();const Uo={provide:de,useExisting:(0,o.Gpc)(()=>Ia),multi:!0};let Ia=(()=>{class ye extends q{writeValue(ne){this.setProperty("value",ne??"")}registerOnChange(ne){this.onChange=We=>{ne(""==We?null:parseFloat(We))}}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("input",function(ki){return We.onChange(ki.target.value)})("blur",function(){return We.onTouched()})},features:[o._Bn([Uo]),o.qOj]}),ye})();const Iu={provide:de,useExisting:(0,o.Gpc)(()=>Oa),multi:!0};let fl=(()=>{class ye{}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({}),ye})(),zo=(()=>{class ye{constructor(){this._accessors=[]}add(ne,We){this._accessors.push([ne,We])}remove(ne){for(let We=this._accessors.length-1;We>=0;--We)if(this._accessors[We][1]===ne)return void this._accessors.splice(We,1)}select(ne){this._accessors.forEach(We=>{this._isSameGroup(We,ne)&&We[1]!==ne&&We[1].fireUncheck(ne.value)})}_isSameGroup(ne,We){return!!ne[0].control&&ne[0]._parent===We._control._parent&&ne[1].name===We.name}}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275prov=o.Yz7({token:ye,factory:ye.\u0275fac,providedIn:fl}),ye})(),Oa=(()=>{class ye extends q{constructor(ne,We,_n,ki){super(ne,We),this._registry=_n,this._injector=ki,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Mn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(ne){this._state=ne===this.value,this.setProperty("checked",this._state)}registerOnChange(ne){this._fn=ne,this.onChange=()=>{ne(this.value),this._registry.select(this)}}fireUncheck(ne){this.writeValue(ne)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(zo),o.Y36(o.zs3))},ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("change",function(){return We.onChange()})("blur",function(){return We.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[o._Bn([Iu]),o.qOj]}),ye})();const Yo=new o.OlP("NgModelWithFormControlWarning"),uo={provide:pi,useExisting:(0,o.Gpc)(()=>go)};let go=(()=>{class ye extends pi{constructor(ne,We,_n){super(),this.callSetDisabledState=_n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(ne),this._setAsyncValidators(We)}ngOnChanges(ne){this._checkFormPresent(),ne.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ai(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(ne){const We=this.form.get(ne.path);return bt(We,ne,this.callSetDisabledState),We.updateValueAndValidity({emitEvent:!1}),this.directives.push(ne),We}getControl(ne){return this.form.get(ne.path)}removeControl(ne){mt(ne.control||null,ne,!1),function ri(ye,ve){const ne=ye.indexOf(ve);ne>-1&&ye.splice(ne,1)}(this.directives,ne)}addFormGroup(ne){this._setUpFormContainer(ne)}removeFormGroup(ne){this._cleanUpFormContainer(ne)}getFormGroup(ne){return this.form.get(ne.path)}addFormArray(ne){this._setUpFormContainer(ne)}removeFormArray(ne){this._cleanUpFormContainer(ne)}getFormArray(ne){return this.form.get(ne.path)}updateModel(ne,We){this.form.get(ne.path).setValue(We)}onSubmit(ne){return this.submitted=!0,Tn(this.form,this.directives),this.ngSubmit.emit(ne),"dialog"===ne?.target?.method}onReset(){this.resetForm()}resetForm(ne){this.form.reset(ne),this.submitted=!1}_updateDomValue(){this.directives.forEach(ne=>{const We=ne.control,_n=this.form.get(ne.path);We!==_n&&(mt(We||null,ne),(ye=>ye instanceof yr)(_n)&&(bt(_n,ne,this.callSetDisabledState),ne.control=_n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(ne){const We=this.form.get(ne.path);cr(We,ne),We.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(ne){if(this.form){const We=this.form.get(ne.path);We&&function Wi(ye,ve){return ai(ye,ve)}(We,ne)&&We.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&ai(this._oldForm,this)}_checkFormPresent(){}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(lt,10),o.Y36(wt,10),o.Y36(et,8))},ye.\u0275dir=o.lG2({type:ye,selectors:[["","formGroup",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("submit",function(ki){return We.onSubmit(ki)})("reset",function(){return We.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([uo]),o.qOj,o.TTD]}),ye})();const to={provide:Mn,useExisting:(0,o.Gpc)(()=>hs)};let hs=(()=>{class ye extends Mn{set isDisabled(ne){}constructor(ne,We,_n,ki,Wo){super(),this._ngModelWarningConfig=Wo,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=ne,this._setValidators(We),this._setAsyncValidators(_n),this.valueAccessor=Hn(0,ki)}ngOnChanges(ne){this._added||this._setUpControl(),Ct(ne,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(ne){this.viewModel=ne,this.update.emit(ne)}get path(){return Ye(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return ye._ngModelWarningSentOnce=!1,ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(pi,13),o.Y36(lt,10),o.Y36(wt,10),o.Y36(de,10),o.Y36(Yo,8))},ye.\u0275dir=o.lG2({type:ye,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([to]),o.qOj,o.TTD]}),ye})();const Ll={provide:de,useExisting:(0,o.Gpc)(()=>la),multi:!0};function ml(ye,ve){return null==ye?`${ve}`:(ve&&"object"==typeof ve&&(ve="Object"),`${ye}: ${ve}`.slice(0,50))}let la=(()=>{class ye extends q{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ne){this._compareWith=ne}writeValue(ne){this.value=ne;const _n=ml(this._getOptionId(ne),ne);this.setProperty("value",_n)}registerOnChange(ne){this.onChange=We=>{this.value=this._getOptionValue(We),ne(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(ne){for(const We of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(We),ne))return We;return null}_getOptionValue(ne){const We=function aa(ye){return ye.split(":")[0]}(ne);return this._optionMap.has(We)?this._optionMap.get(We):ne}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("change",function(ki){return We.onChange(ki.target.value)})("blur",function(){return We.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Ll]),o.qOj]}),ye})(),ql=(()=>{class ye{constructor(ne,We,_n){this._element=ne,this._renderer=We,this._select=_n,this._select&&(this.id=this._select._registerOption())}set ngValue(ne){null!=this._select&&(this._select._optionMap.set(this.id,ne),this._setElementValue(ml(this.id,ne)),this._select.writeValue(this._select.value))}set value(ne){this._setElementValue(ne),this._select&&this._select.writeValue(this._select.value)}_setElementValue(ne){this._renderer.setProperty(this._element.nativeElement,"value",ne)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(la,9))},ye.\u0275dir=o.lG2({type:ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ye})();const Ou={provide:de,useExisting:(0,o.Gpc)(()=>ic),multi:!0};function du(ye,ve){return null==ye?`${ve}`:("string"==typeof ve&&(ve=`'${ve}'`),ve&&"object"==typeof ve&&(ve="Object"),`${ye}: ${ve}`.slice(0,50))}let ic=(()=>{class ye extends q{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ne){this._compareWith=ne}writeValue(ne){let We;if(this.value=ne,Array.isArray(ne)){const _n=ne.map(ki=>this._getOptionId(ki));We=(ki,Wo)=>{ki._setSelected(_n.indexOf(Wo.toString())>-1)}}else We=(_n,ki)=>{_n._setSelected(!1)};this._optionMap.forEach(We)}registerOnChange(ne){this.onChange=We=>{const _n=[],ki=We.selectedOptions;if(void 0!==ki){const Wo=ki;for(let Nr=0;Nr<Wo.length;Nr++){const js=this._getOptionValue(Wo[Nr].value);_n.push(js)}}else{const Wo=We.options;for(let Nr=0;Nr<Wo.length;Nr++){const Qs=Wo[Nr];if(Qs.selected){const js=this._getOptionValue(Qs.value);_n.push(js)}}}this.value=_n,ne(_n)}}_registerOption(ne){const We=(this._idCounter++).toString();return this._optionMap.set(We,ne),We}_getOptionId(ne){for(const We of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(We)._value,ne))return We;return null}_getOptionValue(ne){const We=function hu(ye){return ye.split(":")[0]}(ne);return this._optionMap.has(We)?this._optionMap.get(We)._value:ne}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ne,We){1&ne&&o.NdJ("change",function(ki){return We.onChange(ki.target)})("blur",function(){return We.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Ou]),o.qOj]}),ye})(),pu=(()=>{class ye{constructor(ne,We,_n){this._element=ne,this._renderer=We,this._select=_n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(ne){null!=this._select&&(this._value=ne,this._setElementValue(du(this.id,ne)),this._select.writeValue(this._select.value))}set value(ne){this._select?(this._value=ne,this._setElementValue(du(this.id,ne)),this._select.writeValue(this._select.value)):this._setElementValue(ne)}_setElementValue(ne){this._renderer.setProperty(this._element.nativeElement,"value",ne)}_setSelected(ne){this._renderer.setProperty(this._element.nativeElement,"selected",ne)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ye.\u0275fac=function(ne){return new(ne||ye)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(ic,9))},ye.\u0275dir=o.lG2({type:ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ye})();function Pu(ye){return"number"==typeof ye?ye:parseInt(ye,10)}function Jl(ye){return"number"==typeof ye?ye:parseFloat(ye)}let qr=(()=>{class ye{constructor(){this._validator=Zn}ngOnChanges(ne){if(this.inputName in ne){const We=this.normalizeInput(ne[this.inputName].currentValue);this._enabled=this.enabled(We),this._validator=this._enabled?this.createValidator(We):Zn,this._onChange&&this._onChange()}}validate(ne){return this._validator(ne)}registerOnValidatorChange(ne){this._onChange=ne}enabled(ne){return null!=ne}}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275dir=o.lG2({type:ye,features:[o.TTD]}),ye})();const ua={provide:lt,useExisting:(0,o.Gpc)(()=>gl),multi:!0};let gl=(()=>{class ye extends qr{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=ne=>Jl(ne),this.createValidator=ne=>Qe(ne)}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("max",We._enabled?We.max:null)},inputs:{max:"max"},features:[o._Bn([ua]),o.qOj]}),ye})();const Wl={provide:lt,useExisting:(0,o.Gpc)(()=>Ca),multi:!0};let Ca=(()=>{class ye extends qr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=ne=>Jl(ne),this.createValidator=ne=>at(ne)}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("min",We._enabled?We.min:null)},inputs:{min:"min"},features:[o._Bn([Wl]),o.qOj]}),ye})();const Js={provide:lt,useExisting:(0,o.Gpc)(()=>Ta),multi:!0},Pa={provide:lt,useExisting:(0,o.Gpc)(()=>_l),multi:!0};let Ta=(()=>{class ye extends qr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=ne=>ht}enabled(ne){return ne}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("required",We._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([Js]),o.qOj]}),ye})(),_l=(()=>{class ye extends Ta{constructor(){super(...arguments),this.createValidator=ne=>Bt}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("required",We._enabled?"":null)},features:[o._Bn([Pa]),o.qOj]}),ye})();const Kl={provide:lt,useExisting:(0,o.Gpc)(()=>$r),multi:!0};let $r=(()=>{class ye extends qr{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=ne=>Pu(ne),this.createValidator=ne=>kt(ne)}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("minlength",We._enabled?We.minlength:null)},inputs:{minlength:"minlength"},features:[o._Bn([Kl]),o.qOj]}),ye})();const rc={provide:lt,useExisting:(0,o.Gpc)(()=>$a),multi:!0};let $a=(()=>{class ye extends qr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=ne=>Pu(ne),this.createValidator=ne=>bn(ne)}}return ye.\u0275fac=function(){let ve;return function(We){return(ve||(ve=o.n5z(ye)))(We||ye)}}(),ye.\u0275dir=o.lG2({type:ye,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(ne,We){2&ne&&o.uIk("maxlength",We._enabled?We.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([rc]),o.qOj]}),ye})(),Ws=(()=>{class ye{}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({imports:[fl]}),ye})();class Is extends Ze{constructor(ve,ne,We){super(Qt(ne),se(We,ne)),this.controls=ve,this._initObservables(),this._setUpdateStrategy(ne),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ve){return this.controls[this._adjustIndex(ve)]}push(ve,ne={}){this.controls.push(ve),this._registerControl(ve),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}insert(ve,ne,We={}){this.controls.splice(ve,0,ne),this._registerControl(ne),this.updateValueAndValidity({emitEvent:We.emitEvent})}removeAt(ve,ne={}){let We=this._adjustIndex(ve);We<0&&(We=0),this.controls[We]&&this.controls[We]._registerOnCollectionChange(()=>{}),this.controls.splice(We,1),this.updateValueAndValidity({emitEvent:ne.emitEvent})}setControl(ve,ne,We={}){let _n=this._adjustIndex(ve);_n<0&&(_n=0),this.controls[_n]&&this.controls[_n]._registerOnCollectionChange(()=>{}),this.controls.splice(_n,1),ne&&(this.controls.splice(_n,0,ne),this._registerControl(ne)),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ve,ne={}){Le(this,0,ve),ve.forEach((We,_n)=>{_e(this,!1,_n),this.at(_n).setValue(We,{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne)}patchValue(ve,ne={}){null!=ve&&(ve.forEach((We,_n)=>{this.at(_n)&&this.at(_n).patchValue(We,{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne))}reset(ve=[],ne={}){this._forEachChild((We,_n)=>{We.reset(ve[_n],{onlySelf:!0,emitEvent:ne.emitEvent})}),this._updatePristine(ne),this._updateTouched(ne),this.updateValueAndValidity(ne)}getRawValue(){return this.controls.map(ve=>ve.getRawValue())}clear(ve={}){this.controls.length<1||(this._forEachChild(ne=>ne._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ve.emitEvent}))}_adjustIndex(ve){return ve<0?ve+this.length:ve}_syncPendingControls(){let ve=this.controls.reduce((ne,We)=>!!We._syncPendingControls()||ne,!1);return ve&&this.updateValueAndValidity({onlySelf:!0}),ve}_forEachChild(ve){this.controls.forEach((ne,We)=>{ve(ne,We)})}_updateValue(){this.value=this.controls.filter(ve=>ve.enabled||this.disabled).map(ve=>ve.value)}_anyControls(ve){return this.controls.some(ne=>ne.enabled&&ve(ne))}_setUpControls(){this._forEachChild(ve=>this._registerControl(ve))}_allControlsDisabled(){for(const ve of this.controls)if(ve.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ve){ve.setParent(this),ve._registerOnCollectionChange(this._onCollectionChange)}_find(ve){return this.at(ve)??null}}function Ya(ye){return!!ye&&(void 0!==ye.asyncValidators||void 0!==ye.validators||void 0!==ye.updateOn)}let Cs=(()=>{class ye{constructor(){this.useNonNullable=!1}get nonNullable(){const ne=new ye;return ne.useNonNullable=!0,ne}group(ne,We=null){const _n=this._reduceControls(ne);let ki={};return Ya(We)?ki=We:null!==We&&(ki.validators=We.validator,ki.asyncValidators=We.asyncValidator),new Pe(_n,ki)}record(ne,We=null){const _n=this._reduceControls(ne);return new rn(_n,We)}control(ne,We,_n){let ki={};return this.useNonNullable?(Ya(We)?ki=We:(ki.validators=We,ki.asyncValidators=_n),new yr(ne,{...ki,nonNullable:!0})):new yr(ne,We,_n)}array(ne,We,_n){const ki=ne.map(Wo=>this._createControl(Wo));return new Is(ki,We,_n)}_reduceControls(ne){const We={};return Object.keys(ne).forEach(_n=>{We[_n]=this._createControl(ne[_n])}),We}_createControl(ne){return ne instanceof yr||ne instanceof Ze?ne:Array.isArray(ne)?this.control(ne[0],ne.length>1?ne[1]:null,ne.length>2?ne[2]:null):this.control(ne)}}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275prov=o.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})(),ka=(()=>{class ye{static withConfig(ne){return{ngModule:ye,providers:[{provide:et,useValue:ne.callSetDisabledState??tt}]}}}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({imports:[Ws]}),ye})(),Jo=(()=>{class ye{static withConfig(ne){return{ngModule:ye,providers:[{provide:Yo,useValue:ne.warnOnNgModelWithFormControl??"always"},{provide:et,useValue:ne.callSetDisabledState??tt}]}}}return ye.\u0275fac=function(ne){return new(ne||ye)},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({imports:[Ws]}),ye})()},1481:(tn,nt,N)=>{"use strict";N.d(nt,{Dx:()=>j,H7:()=>ot,b2:()=>$n,q6:()=>Pn});var o=N(6895),O=N(1571);class u extends o.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends u{static makeCurrent(){(0,o.HT)(new fe)}onAndCancel(tt,Ye,bt){return tt.addEventListener(Ye,bt,!1),()=>{tt.removeEventListener(Ye,bt,!1)}}dispatchEvent(tt,Ye){tt.dispatchEvent(Ye)}remove(tt){tt.parentNode&&tt.parentNode.removeChild(tt)}createElement(tt,Ye){return(Ye=Ye||this.getDefaultDocument()).createElement(tt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(tt){return tt.nodeType===Node.ELEMENT_NODE}isShadowRoot(tt){return tt instanceof DocumentFragment}getGlobalEventTarget(tt,Ye){return"window"===Ye?window:"document"===Ye?tt:"body"===Ye?tt.body:null}getBaseHref(tt){const Ye=function i(){return Y=Y||document.querySelector("base"),Y?Y.getAttribute("href"):null}();return null==Ye?null:function de(et){q=q||document.createElement("a"),q.setAttribute("href",et);const tt=q.pathname;return"/"===tt.charAt(0)?tt:`/${tt}`}(Ye)}resetBaseElement(){Y=null}getUserAgent(){return window.navigator.userAgent}getCookie(tt){return(0,o.Mx)(document.cookie,tt)}}let q,Y=null;const we=new O.OlP("TRANSITION_ID"),De=[{provide:O.ip1,useFactory:function Ve(et,tt,Ye){return()=>{Ye.get(O.CZH).donePromise.then(()=>{const bt=(0,o.q)(),mt=tt.querySelectorAll(`style[ng-transition="${et}"]`);for(let cn=0;cn<mt.length;cn++)bt.remove(mt[cn])})}},deps:[we,o.K0,O.zs3],multi:!0}];let Ke=(()=>{class et{build(){return new XMLHttpRequest}}return et.\u0275fac=function(Ye){return new(Ye||et)},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();const je=new O.OlP("EventManagerPlugins");let Be=(()=>{class et{constructor(Ye,bt){this._zone=bt,this._eventNameToPlugin=new Map,Ye.forEach(mt=>mt.manager=this),this._plugins=Ye.slice().reverse()}addEventListener(Ye,bt,mt){return this._findPluginFor(bt).addEventListener(Ye,bt,mt)}addGlobalEventListener(Ye,bt,mt){return this._findPluginFor(bt).addGlobalEventListener(Ye,bt,mt)}getZone(){return this._zone}_findPluginFor(Ye){const bt=this._eventNameToPlugin.get(Ye);if(bt)return bt;const mt=this._plugins;for(let cn=0;cn<mt.length;cn++){const xn=mt[cn];if(xn.supports(Ye))return this._eventNameToPlugin.set(Ye,xn),xn}throw new Error(`No event manager plugin found for event ${Ye}`)}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(je),O.LFG(O.R0b))},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();class Je{constructor(tt){this._doc=tt}addGlobalEventListener(tt,Ye,bt){const mt=(0,o.q)().getGlobalEventTarget(this._doc,tt);if(!mt)throw new Error(`Unsupported event target ${mt} for event ${Ye}`);return this.addEventListener(mt,Ye,bt)}}let gt=(()=>{class et{constructor(){this._stylesSet=new Set}addStyles(Ye){const bt=new Set;Ye.forEach(mt=>{this._stylesSet.has(mt)||(this._stylesSet.add(mt),bt.add(mt))}),this.onStylesAdded(bt)}onStylesAdded(Ye){}getAllStyles(){return Array.from(this._stylesSet)}}return et.\u0275fac=function(Ye){return new(Ye||et)},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})(),lt=(()=>{class et extends gt{constructor(Ye){super(),this._doc=Ye,this._hostNodes=new Map,this._hostNodes.set(Ye.head,[])}_addStylesToHost(Ye,bt,mt){Ye.forEach(cn=>{const xn=this._doc.createElement("style");xn.textContent=cn,mt.push(bt.appendChild(xn))})}addHost(Ye){const bt=[];this._addStylesToHost(this._stylesSet,Ye,bt),this._hostNodes.set(Ye,bt)}removeHost(Ye){const bt=this._hostNodes.get(Ye);bt&&bt.forEach(wt),this._hostNodes.delete(Ye)}onStylesAdded(Ye){this._hostNodes.forEach((bt,mt)=>{this._addStylesToHost(Ye,mt,bt)})}ngOnDestroy(){this._hostNodes.forEach(Ye=>Ye.forEach(wt))}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(o.K0))},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();function wt(et){(0,o.q)().remove(et)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g;function bn(et,tt){return tt.flat(100).map(Ye=>Ye.replace(ct,et))}function Kt(et){return tt=>{if("__ngUnwrap__"===tt)return et;!1===et(tt)&&(tt.preventDefault(),tt.returnValue=!1)}}let Zn=(()=>{class et{constructor(Ye,bt,mt){this.eventManager=Ye,this.sharedStylesHost=bt,this.appId=mt,this.rendererByCompId=new Map,this.defaultRenderer=new wn(Ye)}createRenderer(Ye,bt){if(!Ye||!bt)return this.defaultRenderer;switch(bt.encapsulation){case O.ifc.Emulated:{let mt=this.rendererByCompId.get(bt.id);return mt||(mt=new Hr(this.eventManager,this.sharedStylesHost,bt,this.appId),this.rendererByCompId.set(bt.id,mt)),mt.applyToHost(Ye),mt}case O.ifc.ShadowDom:return new en(this.eventManager,this.sharedStylesHost,Ye,bt);default:if(!this.rendererByCompId.has(bt.id)){const mt=bn(bt.id,bt.styles);this.sharedStylesHost.addStyles(mt),this.rendererByCompId.set(bt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(Be),O.LFG(lt),O.LFG(O.AFp))},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();class wn{constructor(tt){this.eventManager=tt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(tt,Ye){return Ye?document.createElementNS(dt[Ye]||Ye,tt):document.createElement(tt)}createComment(tt){return document.createComment(tt)}createText(tt){return document.createTextNode(tt)}appendChild(tt,Ye){(Vi(tt)?tt.content:tt).appendChild(Ye)}insertBefore(tt,Ye,bt){tt&&(Vi(tt)?tt.content:tt).insertBefore(Ye,bt)}removeChild(tt,Ye){tt&&tt.removeChild(Ye)}selectRootElement(tt,Ye){let bt="string"==typeof tt?document.querySelector(tt):tt;if(!bt)throw new Error(`The selector "${tt}" did not match any elements`);return Ye||(bt.textContent=""),bt}parentNode(tt){return tt.parentNode}nextSibling(tt){return tt.nextSibling}setAttribute(tt,Ye,bt,mt){if(mt){Ye=mt+":"+Ye;const cn=dt[mt];cn?tt.setAttributeNS(cn,Ye,bt):tt.setAttribute(Ye,bt)}else tt.setAttribute(Ye,bt)}removeAttribute(tt,Ye,bt){if(bt){const mt=dt[bt];mt?tt.removeAttributeNS(mt,Ye):tt.removeAttribute(`${bt}:${Ye}`)}else tt.removeAttribute(Ye)}addClass(tt,Ye){tt.classList.add(Ye)}removeClass(tt,Ye){tt.classList.remove(Ye)}setStyle(tt,Ye,bt,mt){mt&(O.JOm.DashCase|O.JOm.Important)?tt.style.setProperty(Ye,bt,mt&O.JOm.Important?"important":""):tt.style[Ye]=bt}removeStyle(tt,Ye,bt){bt&O.JOm.DashCase?tt.style.removeProperty(Ye):tt.style[Ye]=""}setProperty(tt,Ye,bt){tt[Ye]=bt}setValue(tt,Ye){tt.nodeValue=Ye}listen(tt,Ye,bt){return"string"==typeof tt?this.eventManager.addGlobalEventListener(tt,Ye,Kt(bt)):this.eventManager.addEventListener(tt,Ye,Kt(bt))}}function Vi(et){return"TEMPLATE"===et.tagName&&void 0!==et.content}class Hr extends wn{constructor(tt,Ye,bt,mt){super(tt),this.component=bt;const cn=bn(mt+"-"+bt.id,bt.styles);Ye.addStyles(cn),this.contentAttr=function Ft(et){return"_ngcontent-%COMP%".replace(ct,et)}(mt+"-"+bt.id),this.hostAttr=function kt(et){return"_nghost-%COMP%".replace(ct,et)}(mt+"-"+bt.id)}applyToHost(tt){super.setAttribute(tt,this.hostAttr,"")}createElement(tt,Ye){const bt=super.createElement(tt,Ye);return super.setAttribute(bt,this.contentAttr,""),bt}}class en extends wn{constructor(tt,Ye,bt,mt){super(tt),this.sharedStylesHost=Ye,this.hostEl=bt,this.shadowRoot=bt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const cn=bn(mt.id,mt.styles);for(let xn=0;xn<cn.length;xn++){const In=document.createElement("style");In.textContent=cn[xn],this.shadowRoot.appendChild(In)}}nodeOrShadowRoot(tt){return tt===this.hostEl?this.shadowRoot:tt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(tt,Ye){return super.appendChild(this.nodeOrShadowRoot(tt),Ye)}insertBefore(tt,Ye,bt){return super.insertBefore(this.nodeOrShadowRoot(tt),Ye,bt)}removeChild(tt,Ye){return super.removeChild(this.nodeOrShadowRoot(tt),Ye)}parentNode(tt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(tt)))}}let Ot=(()=>{class et extends Je{constructor(Ye){super(Ye)}supports(Ye){return!0}addEventListener(Ye,bt,mt){return Ye.addEventListener(bt,mt,!1),()=>this.removeEventListener(Ye,bt,mt)}removeEventListener(Ye,bt,mt){return Ye.removeEventListener(bt,mt)}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(o.K0))},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();const Jt=["alt","control","meta","shift"],ln={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fn={alt:et=>et.altKey,control:et=>et.ctrlKey,meta:et=>et.metaKey,shift:et=>et.shiftKey};let qt=(()=>{class et extends Je{constructor(Ye){super(Ye)}supports(Ye){return null!=et.parseEventName(Ye)}addEventListener(Ye,bt,mt){const cn=et.parseEventName(bt),xn=et.eventCallback(cn.fullKey,mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,o.q)().onAndCancel(Ye,cn.domEventName,xn))}static parseEventName(Ye){const bt=Ye.toLowerCase().split("."),mt=bt.shift();if(0===bt.length||"keydown"!==mt&&"keyup"!==mt)return null;const cn=et._normalizeKey(bt.pop());let xn="",In=bt.indexOf("code");if(In>-1&&(bt.splice(In,1),xn="code."),Jt.forEach(Bn=>{const Ni=bt.indexOf(Bn);Ni>-1&&(bt.splice(Ni,1),xn+=Bn+".")}),xn+=cn,0!=bt.length||0===cn.length)return null;const ai={};return ai.domEventName=mt,ai.fullKey=xn,ai}static matchEventFullKeyCode(Ye,bt){let mt=ln[Ye.key]||Ye.key,cn="";return bt.indexOf("code.")>-1&&(mt=Ye.code,cn="code."),!(null==mt||!mt)&&(mt=mt.toLowerCase()," "===mt?mt="space":"."===mt&&(mt="dot"),Jt.forEach(xn=>{xn!==mt&&(0,fn[xn])(Ye)&&(cn+=xn+".")}),cn+=mt,cn===bt)}static eventCallback(Ye,bt,mt){return cn=>{et.matchEventFullKeyCode(cn,Ye)&&mt.runGuarded(()=>bt(cn))}}static _normalizeKey(Ye){return"esc"===Ye?"escape":Ye}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(o.K0))},et.\u0275prov=O.Yz7({token:et,factory:et.\u0275fac}),et})();const Pn=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:o.bD},{provide:O.g9A,useValue:function Xn(){fe.makeCurrent()},multi:!0},{provide:o.K0,useFactory:function pi(){return(0,O.RDi)(document),document},deps:[]}]),mn=new O.OlP(""),kn=[{provide:O.rWj,useClass:class it{addToWindow(tt){O.dqk.getAngularTestability=(bt,mt=!0)=>{const cn=tt.findTestabilityInTree(bt,mt);if(null==cn)throw new Error("Could not find testability for element.");return cn},O.dqk.getAllAngularTestabilities=()=>tt.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>tt.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(bt=>{const mt=O.dqk.getAllAngularTestabilities();let cn=mt.length,xn=!1;const In=function(ai){xn=xn||ai,cn--,0==cn&&bt(xn)};mt.forEach(function(ai){ai.whenStable(In)})})}findTestabilityInTree(tt,Ye,bt){return null==Ye?null:tt.getTestability(Ye)??(bt?(0,o.q)().isShadowRoot(Ye)?this.findTestabilityInTree(tt,Ye.host,!0):this.findTestabilityInTree(tt,Ye.parentElement,!0):null)}},deps:[]},{provide:O.lri,useClass:O.dDg,deps:[O.R0b,O.eoX,O.rWj]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b,O.eoX,O.rWj]}],ii=[{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function mi(){return new O.qLn},deps:[]},{provide:je,useClass:Ot,multi:!0,deps:[o.K0,O.R0b,O.Lbi]},{provide:je,useClass:qt,multi:!0,deps:[o.K0]},{provide:Zn,useClass:Zn,deps:[Be,lt,O.AFp]},{provide:O.FYo,useExisting:Zn},{provide:gt,useExisting:lt},{provide:lt,useClass:lt,deps:[o.K0]},{provide:Be,useClass:Be,deps:[je,O.R0b]},{provide:o.JF,useClass:Ke,deps:[]},[]];let $n=(()=>{class et{constructor(Ye){}static withServerTransition(Ye){return{ngModule:et,providers:[{provide:O.AFp,useValue:Ye.appId},{provide:we,useExisting:O.AFp},De]}}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(mn,12))},et.\u0275mod=O.oAB({type:et}),et.\u0275inj=O.cJS({providers:[...ii,...kn],imports:[o.ez,O.hGG]}),et})(),j=(()=>{class et{constructor(Ye){this._doc=Ye}getTitle(){return this._doc.title}setTitle(Ye){this._doc.title=Ye||""}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(o.K0))},et.\u0275prov=O.Yz7({token:et,factory:function(Ye){let bt=null;return bt=Ye?new Ye:function qi(){return new j((0,O.LFG)(o.K0))}(),bt},providedIn:"root"}),et})();typeof window<"u"&&window;let ot=(()=>{class et{}return et.\u0275fac=function(Ye){return new(Ye||et)},et.\u0275prov=O.Yz7({token:et,factory:function(Ye){let bt=null;return bt=Ye?new(Ye||et):O.LFG(rn),bt},providedIn:"root"}),et})(),rn=(()=>{class et extends ot{constructor(Ye){super(),this._doc=Ye}sanitize(Ye,bt){if(null==bt)return null;switch(Ye){case O.q3G.NONE:return bt;case O.q3G.HTML:return(0,O.qzn)(bt,"HTML")?(0,O.z3N)(bt):(0,O.EiD)(this._doc,String(bt)).toString();case O.q3G.STYLE:return(0,O.qzn)(bt,"Style")?(0,O.z3N)(bt):bt;case O.q3G.SCRIPT:if((0,O.qzn)(bt,"Script"))return(0,O.z3N)(bt);throw new Error("unsafe value used in a script context");case O.q3G.URL:return(0,O.qzn)(bt,"URL")?(0,O.z3N)(bt):(0,O.mCW)(String(bt));case O.q3G.RESOURCE_URL:if((0,O.qzn)(bt,"ResourceURL"))return(0,O.z3N)(bt);throw new Error(`unsafe value used in a resource URL context (see ${O.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Ye} (see ${O.JZr})`)}}bypassSecurityTrustHtml(Ye){return(0,O.JVY)(Ye)}bypassSecurityTrustStyle(Ye){return(0,O.L6k)(Ye)}bypassSecurityTrustScript(Ye){return(0,O.eBb)(Ye)}bypassSecurityTrustUrl(Ye){return(0,O.LAX)(Ye)}bypassSecurityTrustResourceUrl(Ye){return(0,O.pB0)(Ye)}}return et.\u0275fac=function(Ye){return new(Ye||et)(O.LFG(o.K0))},et.\u0275prov=O.Yz7({token:et,factory:function(Ye){let bt=null;return bt=Ye?new Ye:function Nt(et){return new rn(et.get(o.K0))}(O.LFG(O.zs3)),bt},providedIn:"root"}),et})()},7109:(tn,nt,N)=>{"use strict";N.d(nt,{gz:()=>vs,m2:()=>Pi,F0:()=>ei,rH:()=>ss,Od:()=>$s,Bz:()=>g,lC:()=>ua});var o=N(1571),O=N(2076),u=N(9646),fe=N(1135),Y=N(6805),i=N(9841),q=N(7272),de=N(9770),we=N(9635),Ve=N(2843),De=N(9751),it=N(515),Ke=N(4033),je=N(7579),Be=N(6895),Je=N(4004),gt=N(3900),lt=N(5698),wt=N(8675),dt=N(9300),ct=N(5577),at=N(590),Qe=N(4351),ht=N(8505),Bt=N(262),Ft=N(4482),kt=N(7359);function bn(I,R){return(0,Ft.e)((0,kt.U)(I,R,arguments.length>=2,!0))}var Kt=N(5403);function Zn(I){return I<=0?()=>it.E:(0,Ft.e)((R,S)=>{let U=[];R.subscribe((0,Kt.x)(S,$=>{U.push($),I<U.length&&U.shift()},()=>{for(const $ of U)S.next($);S.complete()},void 0,()=>{U=null}))})}var wn=N(8068),Vr=N(6590),Hi=N(4671);function Vi(I,R){const S=arguments.length>=2;return U=>U.pipe(I?(0,dt.h)(($,ue)=>I($,ue,U)):Hi.y,Zn(1),S?(0,Vr.d)(R):(0,wn.T)(()=>new Y.K))}var en=N(9718);function Ot(I){return(0,Ft.e)((R,S)=>{try{R.subscribe(S)}finally{S.add(I)}})}var Jt=N(8343),ln=N(8189),fn=N(1481);const qt="primary",On=Symbol("RouteTitle");class Nn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S[0]:S}return null}getAll(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Ui(I){return new Nn(I)}function Yn(I,R,S){const U=S.path.split("/");if(U.length>I.length||"full"===S.pathMatch&&(R.hasChildren()||U.length<I.length))return null;const $={};for(let ue=0;ue<U.length;ue++){const oe=U[ue],Ne=I[ue];if(oe.startsWith(":"))$[oe.substring(1)]=Ne;else if(oe!==Ne.path)return null}return{consumed:I.slice(0,U.length),posParams:$}}function Xn(I,R){const S=I?Object.keys(I):void 0,U=R?Object.keys(R):void 0;if(!S||!U||S.length!=U.length)return!1;let $;for(let ue=0;ue<S.length;ue++)if($=S[ue],!mi(I[$],R[$]))return!1;return!0}function mi(I,R){if(Array.isArray(I)&&Array.isArray(R)){if(I.length!==R.length)return!1;const S=[...I].sort(),U=[...R].sort();return S.every(($,ue)=>U[ue]===$)}return I===R}function pi(I){return Array.prototype.concat.apply([],I)}function Mn(I){return I.length>0?I[I.length-1]:null}function mn(I,R){for(const S in I)I.hasOwnProperty(S)&&R(I[S],S)}function kn(I){return(0,o.CqO)(I)?I:(0,o.QGY)(I)?(0,O.D)(Promise.resolve(I)):(0,u.of)(I)}const ii=!1,$n={exact:function qi(I,R,S){if(!hi(I.segments,R.segments)||!ut(I.segments,R.segments,S)||I.numberOfChildren!==R.numberOfChildren)return!1;for(const U in R.children)if(!I.children[U]||!qi(I.children[U],R.children[U],S))return!1;return!0},subset:Fe},mr={exact:function Mo(I,R){return Xn(I,R)},subset:function j(I,R){return Object.keys(R).length<=Object.keys(I).length&&Object.keys(R).every(S=>mi(I[S],R[S]))},ignored:()=>!0};function gr(I,R,S){return $n[S.paths](I.root,R.root,S.matrixParams)&&mr[S.queryParams](I.queryParams,R.queryParams)&&!("exact"===S.fragment&&I.fragment!==R.fragment)}function Fe(I,R,S){return Yt(I,R,R.segments,S)}function Yt(I,R,S,U){if(I.segments.length>S.length){const $=I.segments.slice(0,S.length);return!(!hi($,S)||R.hasChildren()||!ut($,S,U))}if(I.segments.length===S.length){if(!hi(I.segments,S)||!ut(I.segments,S,U))return!1;for(const $ in R.children)if(!I.children[$]||!Fe(I.children[$],R.children[$],U))return!1;return!0}{const $=S.slice(0,I.segments.length),ue=S.slice(I.segments.length);return!!(hi(I.segments,$)&&ut(I.segments,$,U)&&I.children[qt])&&Yt(I.children[qt],R,ue,U)}}function ut(I,R,S){return R.every((U,$)=>mr[S](I[$].parameters,U.parameters))}class It{constructor(R=new rt([],{}),S={},U=null){this.root=R,this.queryParams=S,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return bo.serialize(this)}}class rt{constructor(R,S){this.segments=R,this.children=S,this.parent=null,mn(S,(U,$)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yi(this)}}class Vt{constructor(R,S){this.path=R,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Ui(this.parameters)),this._parameterMap}toString(){return he(this)}}function hi(I,R){return I.length===R.length&&I.every((S,U)=>S.path===R[U].path)}let _r=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:function(){return new pr},providedIn:"root"}),I})();class pr{parse(R){const S=new dn(R);return new It(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(R){const S=`/${wr(R.root,!0)}`,U=function _e(I){const R=Object.keys(I).map(S=>{const U=I[S];return Array.isArray(U)?U.map($=>`${ao(S)}=${ao($)}`).join("&"):`${ao(S)}=${ao(U)}`}).filter(S=>!!S);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${S}${U}${"string"==typeof R.fragment?`#${function Zr(I){return encodeURI(I)}(R.fragment)}`:""}`}}const bo=new pr;function Yi(I){return I.segments.map(R=>he(R)).join("/")}function wr(I,R){if(!I.hasChildren())return Yi(I);if(R){const S=I.children[qt]?wr(I.children[qt],!1):"",U=[];return mn(I.children,($,ue)=>{ue!==qt&&U.push(`${ue}:${wr($,!1)}`)}),U.length>0?`${S}(${U.join("//")})`:S}{const S=function bi(I,R){let S=[];return mn(I.children,(U,$)=>{$===qt&&(S=S.concat(R(U,$)))}),mn(I.children,(U,$)=>{$!==qt&&(S=S.concat(R(U,$)))}),S}(I,(U,$)=>$===qt?[wr(I.children[qt],!1)]:[`${$}:${wr(U,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[qt]?`${Yi(I)}/${S[0]}`:`${Yi(I)}/(${S.join("//")})`}}function Gr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ao(I){return Gr(I).replace(/%3B/gi,";")}function Qt(I){return Gr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K(I){return decodeURIComponent(I)}function se(I){return K(I.replace(/\+/g,"%20"))}function he(I){return`${Qt(I.path)}${function re(I){return Object.keys(I).map(R=>`;${Qt(R)}=${Qt(I[R])}`).join("")}(I.parameters)}`}const Le=/^[^\/()?;=#]+/;function Ze(I){const R=I.match(Le);return R?R[0]:""}const Pe=/^[^=?&#]+/,Nt=/^[^&#]+/;class dn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(R.length>0||Object.keys(S).length>0)&&(U[qt]=new rt(R,S)),U}parseSegment(){const R=Ze(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new o.vHH(4009,ii);return this.capture(R),new Vt(K(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const S=Ze(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const $=Ze(this.remaining);$&&(U=$,this.capture(U))}R[K(S)]=K(U)}parseQueryParam(R){const S=function ot(I){const R=I.match(Pe);return R?R[0]:""}(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const oe=function rn(I){const R=I.match(Nt);return R?R[0]:""}(this.remaining);oe&&(U=oe,this.capture(U))}const $=se(S),ue=se(U);if(R.hasOwnProperty($)){let oe=R[$];Array.isArray(oe)||(oe=[oe],R[$]=oe),oe.push(ue)}else R[$]=ue}parseParens(R){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=Ze(this.remaining),$=this.remaining[U.length];if("/"!==$&&")"!==$&&";"!==$)throw new o.vHH(4010,ii);let ue;U.indexOf(":")>-1?(ue=U.slice(0,U.indexOf(":")),this.capture(ue),this.capture(":")):R&&(ue=qt);const oe=this.parseChildren();S[ue]=1===Object.keys(oe).length?oe[qt]:new rt([],oe),this.consumeOptional("//")}return S}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new o.vHH(4011,ii)}}function et(I){return I.segments.length>0?new rt([],{[qt]:I}):I}function tt(I){const R={};for(const U of Object.keys(I.children)){const ue=tt(I.children[U]);(ue.segments.length>0||ue.hasChildren())&&(R[U]=ue)}return function Ye(I){if(1===I.numberOfChildren&&I.children[qt]){const R=I.children[qt];return new rt(I.segments.concat(R.segments),R.children)}return I}(new rt(I.segments,R))}function bt(I){return I instanceof It}function ai(I,R,S,U,$){if(0===S.length)return ur(R.root,R.root,R.root,U,$);const ue=function Wi(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new cr(!0,0,I);let R=0,S=!1;const U=I.reduce(($,ue,oe)=>{if("object"==typeof ue&&null!=ue){if(ue.outlets){const Ne={};return mn(ue.outlets,(st,Mt)=>{Ne[Mt]="string"==typeof st?st.split("/"):st}),[...$,{outlets:Ne}]}if(ue.segmentPath)return[...$,ue.segmentPath]}return"string"!=typeof ue?[...$,ue]:0===oe?(ue.split("/").forEach((Ne,st)=>{0==st&&"."===Ne||(0==st&&""===Ne?S=!0:".."===Ne?R++:""!=Ne&&$.push(Ne))}),$):[...$,ue]},[]);return new cr(S,R,U)}(S);return ue.toRoot()?ur(R.root,R.root,new rt([],{}),U,$):function oe(st){const Mt=function Ae(I,R,S,U){if(I.isAbsolute)return new xo(R.root,!0,0);if(-1===U)return new xo(S,S===R.root,0);return function Te(I,R,S){let U=I,$=R,ue=S;for(;ue>$;){if(ue-=$,U=U.parent,!U)throw new o.vHH(4005,!1);$=U.segments.length}return new xo(U,!1,$-ue)}(S,U+(Bn(I.commands[0])?0:1),I.numberOfDoubleDots)}(ue,R,I.snapshot?._urlSegment,st),Lt=Mt.processChildren?St(Mt.segmentGroup,Mt.index,ue.commands):Ct(Mt.segmentGroup,Mt.index,ue.commands);return ur(R.root,Mt.segmentGroup,Lt,U,$)}(I.snapshot?._lastPathIndex)}function Bn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Ni(I){return"object"==typeof I&&null!=I&&I.outlets}function ur(I,R,S,U,$){let oe,ue={};U&&mn(U,(st,Mt)=>{ue[Mt]=Array.isArray(st)?st.map(Lt=>`${Lt}`):`${st}`}),oe=I===R?S:Gi(I,R,S);const Ne=et(tt(oe));return new It(Ne,ue,$)}function Gi(I,R,S){const U={};return mn(I.children,($,ue)=>{U[ue]=$===R?S:Gi($,R,S)}),new rt(I.segments,U)}class cr{constructor(R,S,U){if(this.isAbsolute=R,this.numberOfDoubleDots=S,this.commands=U,R&&U.length>0&&Bn(U[0]))throw new o.vHH(4003,!1);const $=U.find(Ni);if($&&$!==Mn(U))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xo{constructor(R,S,U){this.segmentGroup=R,this.processChildren=S,this.index=U}}function Ct(I,R,S){if(I||(I=new rt([],{})),0===I.segments.length&&I.hasChildren())return St(I,R,S);const U=function Tn(I,R,S){let U=0,$=R;const ue={match:!1,pathIndex:0,commandIndex:0};for(;$<I.segments.length;){if(U>=S.length)return ue;const oe=I.segments[$],Ne=S[U];if(Ni(Ne))break;const st=`${Ne}`,Mt=U<S.length-1?S[U+1]:null;if($>0&&void 0===st)break;if(st&&Mt&&"object"==typeof Mt&&void 0===Mt.outlets){if(!xi(st,Mt,oe))return ue;U+=2}else{if(!xi(st,{},oe))return ue;U++}$++}return{match:!0,pathIndex:$,commandIndex:U}}(I,R,S),$=S.slice(U.commandIndex);if(U.match&&U.pathIndex<I.segments.length){const ue=new rt(I.segments.slice(0,U.pathIndex),{});return ue.children[qt]=new rt(I.segments.slice(U.pathIndex),I.children),St(ue,0,$)}return U.match&&0===$.length?new rt(I.segments,{}):U.match&&!I.hasChildren()?Hn(I,R,S):U.match?St(I,0,$):Hn(I,R,S)}function St(I,R,S){if(0===S.length)return new rt(I.segments,{});{const U=function Xe(I){return Ni(I[0])?I[0].outlets:{[qt]:I}}(S),$={};return!U[qt]&&I.children[qt]&&1===I.numberOfChildren&&0===I.children[qt].segments.length?St(I.children[qt],R,S):(mn(U,(ue,oe)=>{"string"==typeof ue&&(ue=[ue]),null!==ue&&($[oe]=Ct(I.children[oe],R,ue))}),mn(I.children,(ue,oe)=>{void 0===U[oe]&&($[oe]=ue)}),new rt(I.segments,$))}}function Hn(I,R,S){const U=I.segments.slice(0,R);let $=0;for(;$<S.length;){const ue=S[$];if(Ni(ue)){const st=ri(ue.outlets);return new rt(U,st)}if(0===$&&Bn(S[0])){U.push(new Vt(I.segments[R].path,gi(S[0]))),$++;continue}const oe=Ni(ue)?ue.outlets[qt]:`${ue}`,Ne=$<S.length-1?S[$+1]:null;oe&&Ne&&Bn(Ne)?(U.push(new Vt(oe,gi(Ne))),$+=2):(U.push(new Vt(oe,{})),$++)}return new rt(U,{})}function ri(I){const R={};return mn(I,(S,U)=>{"string"==typeof S&&(S=[S]),null!==S&&(R[U]=Hn(new rt([],{}),0,S))}),R}function gi(I){const R={};return mn(I,(S,U)=>R[U]=`${S}`),R}function xi(I,R,S){return I==S.path&&Xn(R,S.parameters)}const Sn="imperative";class ci{constructor(R,S){this.id=R,this.url=S}}class Ri extends ci{constructor(R,S,U="imperative",$=null){super(R,S),this.type=0,this.navigationTrigger=U,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pi extends ci{constructor(R,S,U){super(R,S),this.urlAfterRedirects=U,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yr extends ci{constructor(R,S,U,$){super(R,S),this.reason=U,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xi extends ci{constructor(R,S,U,$){super(R,S),this.reason=U,this.code=$,this.type=16}}class Bo extends ci{constructor(R,S,U,$){super(R,S),this.error=U,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rr extends ci{constructor(R,S,U,$){super(R,S),this.urlAfterRedirects=U,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ga extends ci{constructor(R,S,U,$){super(R,S),this.urlAfterRedirects=U,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ds extends ci{constructor(R,S,U,$,ue){super(R,S),this.urlAfterRedirects=U,this.state=$,this.shouldActivate=ue,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ar extends ci{constructor(R,S,U,$){super(R,S),this.urlAfterRedirects=U,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xa extends ci{constructor(R,S,U,$){super(R,S),this.urlAfterRedirects=U,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oo{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sa{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mo{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Po{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wa{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Za{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(R,S,U){this.routerEvent=R,this.position=S,this.anchor=U,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let lo=(()=>{class I{createUrlTree(S,U,$,ue,oe,Ne){return ai(S||U.root,$,ue,oe,Ne)}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac}),I})(),zo=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:function(R){return lo.\u0275fac(R)},providedIn:"root"}),I})();class Oa{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const S=this.pathFromRoot(R);return S.length>1?S[S.length-2]:null}children(R){const S=Ls(R,this._root);return S?S.children.map(U=>U.value):[]}firstChild(R){const S=Ls(R,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(R){const S=Bs(R,this._root);return S.length<2?[]:S[S.length-2].children.map($=>$.value).filter($=>$!==R)}pathFromRoot(R){return Bs(R,this._root).map(S=>S.value)}}function Ls(I,R){if(I===R.value)return R;for(const S of R.children){const U=Ls(I,S);if(U)return U}return null}function Bs(I,R){if(I===R.value)return[R];for(const S of R.children){const U=Bs(I,S);if(U.length)return U.unshift(R),U}return[]}class Yo{constructor(R,S){this.value=R,this.children=S}toString(){return`TreeNode(${this.value})`}}function Go(I){const R={};return I&&I.children.forEach(S=>R[S.value.outlet]=S),R}class Us extends Oa{constructor(R,S){super(R),this.snapshot=S,to(this,R)}toString(){return this.snapshot.toString()}}function uo(I,R){const S=function go(I,R){const oe=new ko([],{},{},"",{},qt,R,null,I.root,-1,{});return new Zo("",new Yo(oe,[]))}(I,R),U=new fe.X([new Vt("",{})]),$=new fe.X({}),ue=new fe.X({}),oe=new fe.X({}),Ne=new fe.X(""),st=new vs(U,$,oe,Ne,ue,qt,R,S.root);return st.snapshot=S.root,new Us(new Yo(st,[]),S)}class vs{constructor(R,S,U,$,ue,oe,Ne,st){this.url=R,this.params=S,this.queryParams=U,this.fragment=$,this.data=ue,this.outlet=oe,this.component=Ne,this.title=this.data?.pipe((0,Je.U)(Mt=>Mt[On]))??(0,u.of)(void 0),this._futureSnapshot=st}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(R=>Ui(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(R=>Ui(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bs(I,R="emptyOnly"){const S=I.pathFromRoot;let U=0;if("always"!==R)for(U=S.length-1;U>=1;){const $=S[U],ue=S[U-1];if($.routeConfig&&""===$.routeConfig.path)U--;else{if(ue.component)break;U--}}return function xs(I){return I.reduce((R,S)=>({params:{...R.params,...S.params},data:{...R.data,...S.data},resolve:{...S.data,...R.resolve,...S.routeConfig?.data,...S._resolvedData}}),{params:{},data:{},resolve:{}})}(S.slice(U))}class ko{get title(){return this.data?.[On]}constructor(R,S,U,$,ue,oe,Ne,st,Mt,Lt,Rt){this.url=R,this.params=S,this.queryParams=U,this.fragment=$,this.data=ue,this.outlet=oe,this.component=Ne,this.routeConfig=st,this._urlSegment=Mt,this._lastPathIndex=Lt,this._resolve=Rt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zo extends Oa{constructor(R,S){super(S),this.url=R,to(this,S)}toString(){return hs(this._root)}}function to(I,R){R.value._routerState=I,R.children.forEach(S=>to(I,S))}function hs(I){const R=I.children.length>0?` { ${I.children.map(hs).join(", ")} } `:"";return`${I.value}${R}`}function Ll(I){if(I.snapshot){const R=I.snapshot,S=I._futureSnapshot;I.snapshot=S,Xn(R.queryParams,S.queryParams)||I.queryParams.next(S.queryParams),R.fragment!==S.fragment&&I.fragment.next(S.fragment),Xn(R.params,S.params)||I.params.next(S.params),function Gn(I,R){if(I.length!==R.length)return!1;for(let S=0;S<I.length;++S)if(!Xn(I[S],R[S]))return!1;return!0}(R.url,S.url)||I.url.next(S.url),Xn(R.data,S.data)||I.data.next(S.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function ml(I,R){const S=Xn(I.params,R.params)&&function di(I,R){return hi(I,R)&&I.every((S,U)=>Xn(S.parameters,R[U].parameters))}(I.url,R.url);return S&&!(!I.parent!=!R.parent)&&(!I.parent||ml(I.parent,R.parent))}function la(I,R,S){if(S&&I.shouldReuseRoute(R.value,S.value.snapshot)){const U=S.value;U._futureSnapshot=R.value;const $=function ql(I,R,S){return R.children.map(U=>{for(const $ of S.children)if(I.shouldReuseRoute(U.value,$.value.snapshot))return la(I,U,$);return la(I,U)})}(I,R,S);return new Yo(U,$)}{if(I.shouldAttach(R.value)){const ue=I.retrieve(R.value);if(null!==ue){const oe=ue.route;return oe.value._futureSnapshot=R.value,oe.children=R.children.map(Ne=>la(I,Ne)),oe}}const U=function Ou(I){return new vs(new fe.X(I.url),new fe.X(I.params),new fe.X(I.queryParams),new fe.X(I.fragment),new fe.X(I.data),I.outlet,I.component,I)}(R.value),$=R.children.map(ue=>la(I,ue));return new Yo(U,$)}}const du="ngNavigationCancelingError";function hu(I,R){const{redirectTo:S,navigationBehaviorOptions:U}=bt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,$=_c(!1,0,R);return $.url=S,$.navigationBehaviorOptions=U,$}function _c(I,R,S){const U=new Error("NavigationCancelingError: "+(I||""));return U[du]=!0,U.cancellationCode=R,S&&(U.url=S),U}function ic(I){return pu(I)&&bt(I.url)}function pu(I){return I&&I[du]}class Pu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jl,this.attachRef=null}}let Jl=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(S,U){const $=this.getOrCreateContext(S);$.outlet=U,this.contexts.set(S,$)}onChildOutletDestroyed(S){const U=this.getContext(S);U&&(U.outlet=null,U.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let U=this.getContext(S);return U||(U=new Pu,this.contexts.set(S,U)),U}getContext(S){return this.contexts.get(S)||null}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const qr=!1;let ua=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(Jl),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(S){if(S.name){const{firstChange:U,previousValue:$}=S.name;if(U)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(S){return this.parentContexts.getContext(S)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const S=this.parentContexts.getContext(this.name);S?.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,qr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,qr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,qr);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,U){this.activated=S,this._activatedRoute=U,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,U){if(this.isActivated)throw new o.vHH(4013,qr);this._activatedRoute=S;const $=this.location,oe=S.snapshot.component,Ne=this.parentContexts.getOrCreateContext(this.name).children,st=new gl(S,Ne,$.injector);if(U&&function Wl(I){return!!I.resolveComponentFactory}(U)){const Mt=U.resolveComponentFactory(oe);this.activated=$.createComponent(Mt,$.length,st)}else this.activated=$.createComponent(oe,{index:$.length,injector:st,environmentInjector:U??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275dir=o.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),I})();class gl{constructor(R,S,U){this.route=R,this.childContexts=S,this.parent=U}get(R,S){return R===vs?this.route:R===Jl?this.childContexts:this.parent.get(R,S)}}let Ca=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275cmp=o.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(S,U){1&S&&o._UZ(0,"router-outlet")},dependencies:[ua],encapsulation:2}),I})();function Js(I,R){return I.providers&&!I._injector&&(I._injector=(0,o.MMx)(I.providers,R,`Route: ${I.path}`)),I._injector??R}function $a(I){const R=I.children&&I.children.map($a),S=R?{...I,children:R}:{...I};return!S.component&&!S.loadComponent&&(R||S.loadChildren)&&S.outlet&&S.outlet!==qt&&(S.component=Ca),S}function ca(I){return I.outlet||qt}function ws(I,R){const S=I.filter(U=>ca(U)===R);return S.push(...I.filter(U=>ca(U)!==R)),S}function vl(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let R=I.parent;R;R=R.parent){const S=R.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class So{constructor(R,S,U,$){this.routeReuseStrategy=R,this.futureState=S,this.currState=U,this.forwardEvent=$}activate(R){const S=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,U,R),Ll(this.futureState.root),this.activateChildRoutes(S,U,R)}deactivateChildRoutes(R,S,U){const $=Go(S);R.children.forEach(ue=>{const oe=ue.value.outlet;this.deactivateRoutes(ue,$[oe],U),delete $[oe]}),mn($,(ue,oe)=>{this.deactivateRouteAndItsChildren(ue,U)})}deactivateRoutes(R,S,U){const $=R.value,ue=S?S.value:null;if($===ue)if($.component){const oe=U.getContext($.outlet);oe&&this.deactivateChildRoutes(R,S,oe.children)}else this.deactivateChildRoutes(R,S,U);else ue&&this.deactivateRouteAndItsChildren(S,U)}deactivateRouteAndItsChildren(R,S){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,S):this.deactivateRouteAndOutlet(R,S)}detachAndStoreRouteSubtree(R,S){const U=S.getContext(R.value.outlet),$=U&&R.value.component?U.children:S,ue=Go(R);for(const oe of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[oe],$);if(U&&U.outlet){const oe=U.outlet.detach(),Ne=U.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:oe,route:R,contexts:Ne})}}deactivateRouteAndOutlet(R,S){const U=S.getContext(R.value.outlet),$=U&&R.value.component?U.children:S,ue=Go(R);for(const oe of Object.keys(ue))this.deactivateRouteAndItsChildren(ue[oe],$);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(R,S,U){const $=Go(S);R.children.forEach(ue=>{this.activateRoutes(ue,$[ue.value.outlet],U),this.forwardEvent(new Za(ue.value.snapshot))}),R.children.length&&this.forwardEvent(new Po(R.value.snapshot))}activateRoutes(R,S,U){const $=R.value,ue=S?S.value:null;if(Ll($),$===ue)if($.component){const oe=U.getOrCreateContext($.outlet);this.activateChildRoutes(R,S,oe.children)}else this.activateChildRoutes(R,S,U);else if($.component){const oe=U.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Ne=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),oe.children.onOutletReAttached(Ne.contexts),oe.attachRef=Ne.componentRef,oe.route=Ne.route.value,oe.outlet&&oe.outlet.attach(Ne.componentRef,Ne.route.value),Ll(Ne.route.value),this.activateChildRoutes(R,null,oe.children)}else{const Ne=vl($.snapshot),st=Ne?.get(o._Vd)??null;oe.attachRef=null,oe.route=$,oe.resolver=st,oe.injector=Ne,oe.outlet&&oe.outlet.activateWith($,oe.injector),this.activateChildRoutes(R,null,oe.children)}}else this.activateChildRoutes(R,null,U)}}class Ws{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Is{constructor(R,S){this.component=R,this.route=S}}function gn(I,R,S){const U=I._root;return Cs(U,R?R._root:null,S,[U.value])}function Ya(I,R){const S=Symbol(),U=R.get(I,S);return U===S?"function"!=typeof I||(0,o.Z0I)(I)?R.get(I):I:U}function Cs(I,R,S,U,$={canDeactivateChecks:[],canActivateChecks:[]}){const ue=Go(R);return I.children.forEach(oe=>{(function da(I,R,S,U,$={canDeactivateChecks:[],canActivateChecks:[]}){const ue=I.value,oe=R?R.value:null,Ne=S?S.getContext(I.value.outlet):null;if(oe&&ue.routeConfig===oe.routeConfig){const st=function Da(I,R,S){if("function"==typeof S)return S(I,R);switch(S){case"pathParamsChange":return!hi(I.url,R.url);case"pathParamsOrQueryParamsChange":return!hi(I.url,R.url)||!Xn(I.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ml(I,R)||!Xn(I.queryParams,R.queryParams);default:return!ml(I,R)}}(oe,ue,ue.routeConfig.runGuardsAndResolvers);st?$.canActivateChecks.push(new Ws(U)):(ue.data=oe.data,ue._resolvedData=oe._resolvedData),Cs(I,R,ue.component?Ne?Ne.children:null:S,U,$),st&&Ne&&Ne.outlet&&Ne.outlet.isActivated&&$.canDeactivateChecks.push(new Is(Ne.outlet.component,oe))}else oe&&zs(R,Ne,$),$.canActivateChecks.push(new Ws(U)),Cs(I,null,ue.component?Ne?Ne.children:null:S,U,$)})(oe,ue[oe.value.outlet],S,U.concat([oe.value]),$),delete ue[oe.value.outlet]}),mn(ue,(oe,Ne)=>zs(oe,S.getContext(Ne),$)),$}function zs(I,R,S){const U=Go(I),$=I.value;mn(U,(ue,oe)=>{zs(ue,$.component?R?R.children.getContext(oe):null:R,S)}),S.canDeactivateChecks.push(new Is($.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,$))}function ka(I){return"function"==typeof I}function Nr(I){return I instanceof Y.K||"EmptyError"===I?.name}const Qs=Symbol("INITIAL_VALUE");function js(){return(0,gt.w)(I=>(0,i.a)(I.map(R=>R.pipe((0,lt.q)(1),(0,wt.O)(Qs)))).pipe((0,Je.U)(R=>{for(const S of R)if(!0!==S){if(S===Qs)return Qs;if(!1===S||S instanceof It)return S}return!0}),(0,dt.h)(R=>R!==Qs),(0,lt.q)(1)))}function nl(I){return(0,we.z)((0,ht.b)(R=>{if(bt(R))throw hu(0,R)}),(0,Je.U)(R=>!0===R))}const Fa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tu(I,R,S,U,$){const ue=mu(I,R,S);return ue.matched?function pa(I,R,S,U){const $=R.canMatch;if(!$||0===$.length)return(0,u.of)(!0);const ue=$.map(oe=>{const Ne=Ya(oe,I);return kn(function _n(I){return I&&ka(I.canMatch)}(Ne)?Ne.canMatch(R,S):I.runInContext(()=>Ne(R,S)))});return(0,u.of)(ue).pipe(js(),nl())}(U=Js(R,U),R,S).pipe((0,Je.U)(oe=>!0===oe?ue:{...Fa})):(0,u.of)(ue)}function mu(I,R,S){if(""===R.path)return"full"===R.pathMatch&&(I.hasChildren()||S.length>0)?{...Fa}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const $=(R.matcher||Yn)(S,I,R);if(!$)return{...Fa};const ue={};mn($.posParams,(Ne,st)=>{ue[st]=Ne.path});const oe=$.consumed.length>0?{...ue,...$.consumed[$.consumed.length-1].parameters}:ue;return{matched:!0,consumedSegments:$.consumed,remainingSegments:S.slice($.consumed.length),parameters:oe,positionalParamSegments:$.posParams??{}}}function Os(I,R,S,U){if(S.length>0&&function bl(I,R,S){return S.some(U=>qa(I,R,U)&&ca(U)!==qt)}(I,S,U)){const ue=new rt(R,function Ru(I,R,S,U){const $={};$[qt]=U,U._sourceSegment=I,U._segmentIndexShift=R.length;for(const ue of S)if(""===ue.path&&ca(ue)!==qt){const oe=new rt([],{});oe._sourceSegment=I,oe._segmentIndexShift=R.length,$[ca(ue)]=oe}return $}(I,R,U,new rt(S,I.children)));return ue._sourceSegment=I,ue._segmentIndexShift=R.length,{segmentGroup:ue,slicedSegments:[]}}if(0===S.length&&function fa(I,R,S){return S.some(U=>qa(I,R,U))}(I,S,U)){const ue=new rt(I.segments,function Na(I,R,S,U,$){const ue={};for(const oe of U)if(qa(I,S,oe)&&!$[ca(oe)]){const Ne=new rt([],{});Ne._sourceSegment=I,Ne._segmentIndexShift=R.length,ue[ca(oe)]=Ne}return{...$,...ue}}(I,R,S,U,I.children));return ue._sourceSegment=I,ue._segmentIndexShift=R.length,{segmentGroup:ue,slicedSegments:S}}const $=new rt(I.segments,I.children);return $._sourceSegment=I,$._segmentIndexShift=R.length,{segmentGroup:$,slicedSegments:S}}function qa(I,R,S){return(!(I.hasChildren()||R.length>0)||"full"!==S.pathMatch)&&""===S.path}function gu(I,R,S,U){return!!(ca(I)===U||U!==qt&&qa(R,S,I))&&("**"===I.path||mu(R,I,S).matched)}function yc(I,R,S){return 0===R.length&&!I.children[S]}const Ts=!1;class ts{constructor(R){this.segmentGroup=R||null}}class ma{constructor(R){this.urlTree=R}}function Eo(I){return(0,Ve._)(new ts(I))}function dr(I){return(0,Ve._)(new ma(I))}class Cr{constructor(R,S,U,$,ue){this.injector=R,this.configLoader=S,this.urlSerializer=U,this.urlTree=$,this.config=ue,this.allowRedirects=!0}apply(){const R=Os(this.urlTree.root,[],[],this.config).segmentGroup,S=new rt(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,S,qt).pipe((0,Je.U)(ue=>this.createUrlTree(tt(ue),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Bt.K)(ue=>{if(ue instanceof ma)return this.allowRedirects=!1,this.match(ue.urlTree);throw ue instanceof ts?this.noMatchError(ue):ue}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,qt).pipe((0,Je.U)($=>this.createUrlTree(tt($),R.queryParams,R.fragment))).pipe((0,Bt.K)($=>{throw $ instanceof ts?this.noMatchError($):$}))}noMatchError(R){return new o.vHH(4002,Ts)}createUrlTree(R,S,U){const $=et(R);return new It($,S,U)}expandSegmentGroup(R,S,U,$){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(R,S,U).pipe((0,Je.U)(ue=>new rt([],ue))):this.expandSegment(R,U,S,U.segments,$,!0)}expandChildren(R,S,U){const $=[];for(const ue of Object.keys(U.children))"primary"===ue?$.unshift(ue):$.push(ue);return(0,O.D)($).pipe((0,Qe.b)(ue=>{const oe=U.children[ue],Ne=ws(S,ue);return this.expandSegmentGroup(R,Ne,oe,ue).pipe((0,Je.U)(st=>({segment:st,outlet:ue})))}),bn((ue,oe)=>(ue[oe.outlet]=oe.segment,ue),{}),Vi())}expandSegment(R,S,U,$,ue,oe){return(0,O.D)(U).pipe((0,Qe.b)(Ne=>this.expandSegmentAgainstRoute(R,S,U,Ne,$,ue,oe).pipe((0,Bt.K)(Mt=>{if(Mt instanceof ts)return(0,u.of)(null);throw Mt}))),(0,at.P)(Ne=>!!Ne),(0,Bt.K)((Ne,st)=>{if(Nr(Ne))return yc(S,$,ue)?(0,u.of)(new rt([],{})):Eo(S);throw Ne}))}expandSegmentAgainstRoute(R,S,U,$,ue,oe,Ne){return gu($,S,ue,oe)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(R,S,$,ue,oe):Ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,S,U,$,ue,oe):Eo(S):Eo(S)}expandSegmentAgainstRouteUsingRedirect(R,S,U,$,ue,oe){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,U,$,oe):this.expandRegularSegmentAgainstRouteUsingRedirect(R,S,U,$,ue,oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,S,U,$){const ue=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?dr(ue):this.lineralizeSegments(U,ue).pipe((0,ct.z)(oe=>{const Ne=new rt(oe,{});return this.expandSegment(R,Ne,S,oe,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,S,U,$,ue,oe){const{matched:Ne,consumedSegments:st,remainingSegments:Mt,positionalParamSegments:Lt}=mu(S,$,ue);if(!Ne)return Eo(S);const Rt=this.applyRedirectCommands(st,$.redirectTo,Lt);return $.redirectTo.startsWith("/")?dr(Rt):this.lineralizeSegments($,Rt).pipe((0,ct.z)(Xt=>this.expandSegment(R,S,U,Xt.concat(Mt),oe,!1)))}matchSegmentAgainstRoute(R,S,U,$,ue){return"**"===U.path?(R=Js(U,R),U.loadChildren?(U._loadedRoutes?(0,u.of)({routes:U._loadedRoutes,injector:U._loadedInjector}):this.configLoader.loadChildren(R,U)).pipe((0,Je.U)(Ne=>(U._loadedRoutes=Ne.routes,U._loadedInjector=Ne.injector,new rt($,{})))):(0,u.of)(new rt($,{}))):tu(S,U,$,R).pipe((0,gt.w)(({matched:oe,consumedSegments:Ne,remainingSegments:st})=>oe?this.getChildConfig(R=U._injector??R,U,$).pipe((0,ct.z)(Lt=>{const Rt=Lt.injector??R,Xt=Lt.routes,{segmentGroup:yn,slicedSegments:zn}=Os(S,Ne,st,Xt),Rn=new rt(yn.segments,yn.children);if(0===zn.length&&Rn.hasChildren())return this.expandChildren(Rt,Xt,Rn).pipe((0,Je.U)(Ei=>new rt(Ne,Ei)));if(0===Xt.length&&0===zn.length)return(0,u.of)(new rt(Ne,{}));const qn=ca(U)===ue;return this.expandSegment(Rt,Rn,Xt,zn,qn?qt:ue,!0).pipe((0,Je.U)(Si=>new rt(Ne.concat(Si.segments),Si.children)))})):Eo(S)))}getChildConfig(R,S,U){return S.children?(0,u.of)({routes:S.children,injector:R}):S.loadChildren?void 0!==S._loadedRoutes?(0,u.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function ha(I,R,S,U){const $=R.canLoad;if(void 0===$||0===$.length)return(0,u.of)(!0);const ue=$.map(oe=>{const Ne=Ya(oe,I);return kn(function ye(I){return I&&ka(I.canLoad)}(Ne)?Ne.canLoad(R,S):I.runInContext(()=>Ne(R,S)))});return(0,u.of)(ue).pipe(js(),nl())}(R,S,U).pipe((0,ct.z)($=>$?this.configLoader.loadChildren(R,S).pipe((0,ht.b)(ue=>{S._loadedRoutes=ue.routes,S._loadedInjector=ue.injector})):function La(I){return(0,Ve._)(_c(Ts,3))}())):(0,u.of)({routes:[],injector:R})}lineralizeSegments(R,S){let U=[],$=S.root;for(;;){if(U=U.concat($.segments),0===$.numberOfChildren)return(0,u.of)(U);if($.numberOfChildren>1||!$.children[qt])return(0,Ve._)(new o.vHH(4e3,Ts));$=$.children[qt]}}applyRedirectCommands(R,S,U){return this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),R,U)}applyRedirectCreateUrlTree(R,S,U,$){const ue=this.createSegmentGroup(R,S.root,U,$);return new It(ue,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(R,S){const U={};return mn(R,($,ue)=>{if("string"==typeof $&&$.startsWith(":")){const Ne=$.substring(1);U[ue]=S[Ne]}else U[ue]=$}),U}createSegmentGroup(R,S,U,$){const ue=this.createSegments(R,S.segments,U,$);let oe={};return mn(S.children,(Ne,st)=>{oe[st]=this.createSegmentGroup(R,Ne,U,$)}),new rt(ue,oe)}createSegments(R,S,U,$){return S.map(ue=>ue.path.startsWith(":")?this.findPosParam(R,ue,$):this.findOrReturn(ue,U))}findPosParam(R,S,U){const $=U[S.path.substring(1)];if(!$)throw new o.vHH(4001,Ts);return $}findOrReturn(R,S){let U=0;for(const $ of S){if($.path===R.path)return S.splice(U),$;U++}return R}}class ga{}class Qc{constructor(R,S,U,$,ue,oe,Ne){this.injector=R,this.rootComponentType=S,this.config=U,this.urlTree=$,this.url=ue,this.paramsInheritanceStrategy=oe,this.urlSerializer=Ne}recognize(){const R=Os(this.urlTree.root,[],[],this.config.filter(S=>void 0===S.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,qt).pipe((0,Je.U)(S=>{if(null===S)return null;const U=new ko([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Yo(U,S),ue=new Zo(this.url,$);return this.inheritParamsAndData(ue._root),ue}))}inheritParamsAndData(R){const S=R.value,U=bs(S,this.paramsInheritanceStrategy);S.params=Object.freeze(U.params),S.data=Object.freeze(U.data),R.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(R,S,U,$){return 0===U.segments.length&&U.hasChildren()?this.processChildren(R,S,U):this.processSegment(R,S,U,U.segments,$)}processChildren(R,S,U){return(0,O.D)(Object.keys(U.children)).pipe((0,Qe.b)($=>{const ue=U.children[$],oe=ws(S,$);return this.processSegmentGroup(R,oe,ue,$)}),bn(($,ue)=>$&&ue?($.push(...ue),$):null),function Hr(I,R=!1){return(0,Ft.e)((S,U)=>{let $=0;S.subscribe((0,Kt.x)(U,ue=>{const oe=I(ue,$++);(oe||R)&&U.next(ue),!oe&&U.complete()}))})}($=>null!==$),(0,Vr.d)(null),Vi(),(0,Je.U)($=>{if(null===$)return null;const ue=Qa($);return function _a(I){I.sort((R,S)=>R.value.outlet===qt?-1:S.value.outlet===qt?1:R.value.outlet.localeCompare(S.value.outlet))}(ue),ue}))}processSegment(R,S,U,$,ue){return(0,O.D)(S).pipe((0,Qe.b)(oe=>this.processSegmentAgainstRoute(oe._injector??R,oe,U,$,ue)),(0,at.P)(oe=>!!oe),(0,Bt.K)(oe=>{if(Nr(oe))return yc(U,$,ue)?(0,u.of)([]):(0,u.of)(null);throw oe}))}processSegmentAgainstRoute(R,S,U,$,ue){if(S.redirectTo||!gu(S,U,$,ue))return(0,u.of)(null);let oe;if("**"===S.path){const Ne=$.length>0?Mn($).parameters:{},st=te(U)+$.length,Mt=new ko($,Ne,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,X(S),ca(S),S.component??S._loadedComponent??null,S,os(U),st,Ue(S));oe=(0,u.of)({snapshot:Mt,consumedSegments:[],remainingSegments:[]})}else oe=tu(U,S,$,R).pipe((0,Je.U)(({matched:Ne,consumedSegments:st,remainingSegments:Mt,parameters:Lt})=>{if(!Ne)return null;const Rt=te(U)+st.length;return{snapshot:new ko(st,Lt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,X(S),ca(S),S.component??S._loadedComponent??null,S,os(U),Rt,Ue(S)),consumedSegments:st,remainingSegments:Mt}}));return oe.pipe((0,gt.w)(Ne=>{if(null===Ne)return(0,u.of)(null);const{snapshot:st,consumedSegments:Mt,remainingSegments:Lt}=Ne;R=S._injector??R;const Rt=S._loadedInjector??R,Xt=function Ul(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(S),{segmentGroup:yn,slicedSegments:zn}=Os(U,Mt,Lt,Xt.filter(qn=>void 0===qn.redirectTo));if(0===zn.length&&yn.hasChildren())return this.processChildren(Rt,Xt,yn).pipe((0,Je.U)(qn=>null===qn?null:[new Yo(st,qn)]));if(0===Xt.length&&0===zn.length)return(0,u.of)([new Yo(st,[])]);const Rn=ca(S)===ue;return this.processSegment(Rt,Xt,yn,zn,Rn?qt:ue).pipe((0,Je.U)(qn=>null===qn?null:[new Yo(st,qn)]))}))}}function no(I){const R=I.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Qa(I){const R=[],S=new Set;for(const U of I){if(!no(U)){R.push(U);continue}const $=R.find(ue=>U.value.routeConfig===ue.value.routeConfig);void 0!==$?($.children.push(...U.children),S.add($)):R.push(U)}for(const U of S){const $=Qa(U.children);R.push(new Yo(U.value,$))}return R.filter(U=>!S.has(U))}function os(I){let R=I;for(;R._sourceSegment;)R=R._sourceSegment;return R}function te(I){let R=I,S=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,S+=R._segmentIndexShift??0;return S-1}function X(I){return I.data||{}}function Ue(I){return I.resolve||{}}function Tr(I){return"string"==typeof I.title||null===I.title}function er(I){return(0,gt.w)(R=>{const S=I(R);return S?(0,O.D)(S).pipe((0,Je.U)(()=>R)):(0,u.of)(R)})}const Pr=new o.OlP("ROUTES");let Vs=(()=>{class I{constructor(S,U){this.injector=S,this.compiler=U,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,u.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const U=kn(S.loadComponent()).pipe((0,Je.U)(fs),(0,ht.b)(ue=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=ue}),Ot(()=>{this.componentLoaders.delete(S)})),$=new Ke.c(U,()=>new je.x).pipe((0,Jt.x)());return this.componentLoaders.set(S,$),$}loadChildren(S,U){if(this.childrenLoaders.get(U))return this.childrenLoaders.get(U);if(U._loadedRoutes)return(0,u.of)({routes:U._loadedRoutes,injector:U._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(U);const ue=this.loadModuleFactoryOrRoutes(U.loadChildren).pipe((0,Je.U)(Ne=>{this.onLoadEndListener&&this.onLoadEndListener(U);let st,Mt,Lt=!1;Array.isArray(Ne)?Mt=Ne:(st=Ne.create(S).injector,Mt=pi(st.get(Pr,[],o.XFs.Self|o.XFs.Optional)));return{routes:Mt.map($a),injector:st}}),Ot(()=>{this.childrenLoaders.delete(U)})),oe=new Ke.c(ue,()=>new je.x).pipe((0,Jt.x)());return this.childrenLoaders.set(U,oe),oe}loadModuleFactoryOrRoutes(S){return kn(S()).pipe((0,Je.U)(fs),(0,ct.z)($=>$ instanceof o.YKP||Array.isArray($)?(0,u.of)($):(0,O.D)(this.compiler.compileModuleAsync($))))}}return I.\u0275fac=function(S){return new(S||I)(o.LFG(o.zs3),o.LFG(o.Sil))},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function fs(I){return function Hs(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Fo=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new je.x,this.configLoader=(0,o.f3M)(Vs),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(_r),this.rootContexts=(0,o.f3M)(Jl),this.navigationId=0,this.afterPreactivation=()=>(0,u.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new sa($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Oo($))}complete(){this.transitions?.complete()}handleNavigationRequest(S){const U=++this.navigationId;this.transitions?.next({...this.transitions.value,...S,id:U})}setupNavigations(S){return this.transitions=new fe.X({id:0,targetPageId:0,currentUrlTree:S.currentUrlTree,currentRawUrl:S.currentUrlTree,extractedUrl:S.urlHandlingStrategy.extract(S.currentUrlTree),urlAfterRedirects:S.urlHandlingStrategy.extract(S.currentUrlTree),rawUrl:S.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sn,restoredState:null,currentSnapshot:S.routerState.snapshot,targetSnapshot:null,currentRouterState:S.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,dt.h)(U=>0!==U.id),(0,Je.U)(U=>({...U,extractedUrl:S.urlHandlingStrategy.extract(U.rawUrl)})),(0,gt.w)(U=>{let $=!1,ue=!1;return(0,u.of)(U).pipe((0,ht.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gt.w)(oe=>{const Ne=S.browserUrlTree.toString(),st=!S.navigated||oe.extractedUrl.toString()!==Ne||Ne!==S.currentUrlTree.toString();if(!st&&"reload"!==(oe.extras.onSameUrlNavigation??S.onSameUrlNavigation)){const Lt="";return this.events.next(new Xi(oe.id,S.serializeUrl(U.rawUrl),Lt,0)),S.rawUrlTree=oe.rawUrl,oe.resolve(null),it.E}if(S.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return Ma(oe.source)&&(S.browserUrlTree=oe.extractedUrl),(0,u.of)(oe).pipe((0,gt.w)(Lt=>{const Rt=this.transitions?.getValue();return this.events.next(new Ri(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),Lt.source,Lt.restoredState)),Rt!==this.transitions?.getValue()?it.E:Promise.resolve(Lt)}),function co(I,R,S,U){return(0,gt.w)($=>function Ja(I,R,S,U,$){return new Cr(I,R,S,U,$).apply()}(I,R,S,$.extractedUrl,U).pipe((0,Je.U)(ue=>({...$,urlAfterRedirects:ue}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,S.config),(0,ht.b)(Lt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Lt.urlAfterRedirects},U.urlAfterRedirects=Lt.urlAfterRedirects}),function vt(I,R,S,U,$){return(0,ct.z)(ue=>function Vu(I,R,S,U,$,ue,oe="emptyOnly"){return new Qc(I,R,S,U,$,oe,ue).recognize().pipe((0,gt.w)(Ne=>null===Ne?function Wa(I){return new De.y(R=>R.error(I))}(new ga):(0,u.of)(Ne)))}(I,R,S,ue.urlAfterRedirects,U.serialize(ue.urlAfterRedirects),U,$).pipe((0,Je.U)(oe=>({...ue,targetSnapshot:oe}))))}(this.environmentInjector,this.rootComponentType,S.config,this.urlSerializer,S.paramsInheritanceStrategy),(0,ht.b)(Lt=>{if(U.targetSnapshot=Lt.targetSnapshot,"eager"===S.urlUpdateStrategy){if(!Lt.extras.skipLocationChange){const Xt=S.urlHandlingStrategy.merge(Lt.urlAfterRedirects,Lt.rawUrl);S.setBrowserUrl(Xt,Lt)}S.browserUrlTree=Lt.urlAfterRedirects}const Rt=new Rr(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects),Lt.targetSnapshot);this.events.next(Rt)}));if(st&&S.urlHandlingStrategy.shouldProcessUrl(S.rawUrlTree)){const{id:Lt,extractedUrl:Rt,source:Xt,restoredState:yn,extras:zn}=oe,Rn=new Ri(Lt,this.urlSerializer.serialize(Rt),Xt,yn);this.events.next(Rn);const qn=uo(Rt,this.rootComponentType).snapshot;return U={...oe,targetSnapshot:qn,urlAfterRedirects:Rt,extras:{...zn,skipLocationChange:!1,replaceUrl:!1}},(0,u.of)(U)}{const Lt="";return this.events.next(new Xi(oe.id,S.serializeUrl(U.extractedUrl),Lt,1)),S.rawUrlTree=oe.rawUrl,oe.resolve(null),it.E}}),(0,ht.b)(oe=>{const Ne=new Ga(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(oe.urlAfterRedirects),oe.targetSnapshot);this.events.next(Ne)}),(0,Je.U)(oe=>U={...oe,guards:gn(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function Xl(I,R){return(0,ct.z)(S=>{const{targetSnapshot:U,currentSnapshot:$,guards:{canActivateChecks:ue,canDeactivateChecks:oe}}=S;return 0===oe.length&&0===ue.length?(0,u.of)({...S,guardsResult:!0}):function Un(I,R,S,U){return(0,O.D)(I).pipe((0,ct.z)($=>function eu(I,R,S,U,$){const ue=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!ue||0===ue.length)return(0,u.of)(!0);const oe=ue.map(Ne=>{const st=vl(R)??$,Mt=Ya(Ne,st);return kn(function We(I){return I&&ka(I.canDeactivate)}(Mt)?Mt.canDeactivate(I,R,S,U):st.runInContext(()=>Mt(I,R,S,U))).pipe((0,at.P)())});return(0,u.of)(oe).pipe(js())}($.component,$.route,S,R,U)),(0,at.P)($=>!0!==$,!0))}(oe,U,$,I).pipe((0,ct.z)(Ne=>Ne&&function Jo(I){return"boolean"==typeof I}(Ne)?function vr(I,R,S,U){return(0,O.D)(R).pipe((0,Qe.b)($=>(0,q.z)(function Ra(I,R){return null!==I&&R&&R(new mo(I)),(0,u.of)(!0)}($.route.parent,U),function ku(I,R){return null!==I&&R&&R(new wa(I)),(0,u.of)(!0)}($.route,U),function fu(I,R,S){const U=R[R.length-1],ue=R.slice(0,R.length-1).reverse().map(oe=>function oc(I){const R=I.routeConfig?I.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:I,guards:R}:null}(oe)).filter(oe=>null!==oe).map(oe=>(0,de.P)(()=>{const Ne=oe.guards.map(st=>{const Mt=vl(oe.node)??S,Lt=Ya(st,Mt);return kn(function ne(I){return I&&ka(I.canActivateChild)}(Lt)?Lt.canActivateChild(U,I):Mt.runInContext(()=>Lt(U,I))).pipe((0,at.P)())});return(0,u.of)(Ne).pipe(js())}));return(0,u.of)(ue).pipe(js())}(I,$.path,S),function Ro(I,R,S){const U=R.routeConfig?R.routeConfig.canActivate:null;if(!U||0===U.length)return(0,u.of)(!0);const $=U.map(ue=>(0,de.P)(()=>{const oe=vl(R)??S,Ne=Ya(ue,oe);return kn(function ve(I){return I&&ka(I.canActivate)}(Ne)?Ne.canActivate(R,I):oe.runInContext(()=>Ne(R,I))).pipe((0,at.P)())}));return(0,u.of)($).pipe(js())}(I,$.route,S))),(0,at.P)($=>!0!==$,!0))}(U,ue,I,R):(0,u.of)(Ne)),(0,Je.U)(Ne=>({...S,guardsResult:Ne})))})}(this.environmentInjector,oe=>this.events.next(oe)),(0,ht.b)(oe=>{if(U.guardsResult=oe.guardsResult,bt(oe.guardsResult))throw hu(0,oe.guardsResult);const Ne=new ds(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.events.next(Ne)}),(0,dt.h)(oe=>!!oe.guardsResult||(S.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),er(oe=>{if(oe.guards.canActivateChecks.length)return(0,u.of)(oe).pipe((0,ht.b)(Ne=>{const st=new ar(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot);this.events.next(st)}),(0,gt.w)(Ne=>{let st=!1;return(0,u.of)(Ne).pipe(function an(I,R){return(0,ct.z)(S=>{const{targetSnapshot:U,guards:{canActivateChecks:$}}=S;if(!$.length)return(0,u.of)(S);let ue=0;return(0,O.D)($).pipe((0,Qe.b)(oe=>function En(I,R,S,U){const $=I.routeConfig,ue=I._resolve;return void 0!==$?.title&&!Tr($)&&(ue[On]=$.title),function oi(I,R,S,U){const $=function Jr(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===$.length)return(0,u.of)({});const ue={};return(0,O.D)($).pipe((0,ct.z)(oe=>function Dn(I,R,S,U){const $=vl(R)??U,ue=Ya(I,$);return kn(ue.resolve?ue.resolve(R,S):$.runInContext(()=>ue(R,S)))}(I[oe],R,S,U).pipe((0,at.P)(),(0,ht.b)(Ne=>{ue[oe]=Ne}))),Zn(1),(0,en.h)(ue),(0,Bt.K)(oe=>Nr(oe)?it.E:(0,Ve._)(oe)))}(ue,I,R,U).pipe((0,Je.U)(oe=>(I._resolvedData=oe,I.data=bs(I,S).resolve,$&&Tr($)&&(I.data[On]=$.title),null)))}(oe.route,U,I,R)),(0,ht.b)(()=>ue++),Zn(1),(0,ct.z)(oe=>ue===$.length?(0,u.of)(S):it.E))})}(S.paramsInheritanceStrategy,this.environmentInjector),(0,ht.b)({next:()=>st=!0,complete:()=>{st||(S.restoreHistory(Ne),this.cancelNavigationTransition(Ne,"",2))}}))}),(0,ht.b)(Ne=>{const st=new xa(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot);this.events.next(st)}))}),er(oe=>{const Ne=st=>{const Mt=[];st.routeConfig?.loadComponent&&!st.routeConfig._loadedComponent&&Mt.push(this.configLoader.loadComponent(st.routeConfig).pipe((0,ht.b)(Lt=>{st.component=Lt}),(0,Je.U)(()=>{})));for(const Lt of st.children)Mt.push(...Ne(Lt));return Mt};return(0,i.a)(Ne(oe.targetSnapshot.root)).pipe((0,Vr.d)(),(0,lt.q)(1))}),er(()=>this.afterPreactivation()),(0,Je.U)(oe=>{const Ne=function aa(I,R,S){const U=la(I,R._root,S?S._root:void 0);return new Us(U,R)}(S.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return U={...oe,targetRouterState:Ne}}),(0,ht.b)(oe=>{S.currentUrlTree=oe.urlAfterRedirects,S.rawUrlTree=S.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),S.routerState=oe.targetRouterState,"deferred"===S.urlUpdateStrategy&&(oe.extras.skipLocationChange||S.setBrowserUrl(S.rawUrlTree,oe),S.browserUrlTree=oe.urlAfterRedirects)}),((I,R,S)=>(0,Je.U)(U=>(new So(R,U.targetRouterState,U.currentRouterState,S).activate(I),U)))(this.rootContexts,S.routeReuseStrategy,oe=>this.events.next(oe)),(0,ht.b)({next:oe=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,S.navigated=!0,this.events.next(new Pi(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(S.currentUrlTree))),S.titleStrategy?.updateTitle(oe.targetRouterState.snapshot),oe.resolve(!0)},complete:()=>{$=!0}}),Ot(()=>{$||ue||this.cancelNavigationTransition(U,"",1),this.currentNavigation?.id===U.id&&(this.currentNavigation=null)}),(0,Bt.K)(oe=>{if(ue=!0,pu(oe)){ic(oe)||(S.navigated=!0,S.restoreHistory(U,!0));const Ne=new yr(U.id,this.urlSerializer.serialize(U.extractedUrl),oe.message,oe.cancellationCode);if(this.events.next(Ne),ic(oe)){const st=S.urlHandlingStrategy.merge(oe.url,S.rawUrlTree),Mt={skipLocationChange:U.extras.skipLocationChange,replaceUrl:"eager"===S.urlUpdateStrategy||Ma(U.source)};S.scheduleNavigation(st,Sn,null,Mt,{resolve:U.resolve,reject:U.reject,promise:U.promise})}else U.resolve(!1)}else{S.restoreHistory(U,!0);const Ne=new Bo(U.id,this.urlSerializer.serialize(U.extractedUrl),oe,U.targetSnapshot??void 0);this.events.next(Ne);try{U.resolve(S.errorHandler(oe))}catch(st){U.reject(st)}}return it.E}))}))}cancelNavigationTransition(S,U,$){const ue=new yr(S.id,this.urlSerializer.serialize(S.extractedUrl),U,$);this.events.next(ue),S.resolve(!1)}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ma(I){return I!==Sn}let zl=(()=>{class I{buildTitle(S){let U,$=S.root;for(;void 0!==$;)U=this.getResolvedTitleForRoute($)??U,$=$.children.find(ue=>ue.outlet===qt);return U}getResolvedTitleForRoute(S){return S.data[On]}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:function(){return(0,o.f3M)(yu)},providedIn:"root"}),I})(),yu=(()=>{class I extends zl{constructor(S){super(),this.title=S}updateTitle(S){const U=this.buildTitle(S);void 0!==U&&this.title.setTitle(U)}}return I.\u0275fac=function(S){return new(S||I)(o.LFG(fn.Dx))},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Ks=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:function(){return(0,o.f3M)(rr)},providedIn:"root"}),I})();class Gs{shouldDetach(R){return!1}store(R,S){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,S){return R.routeConfig===S.routeConfig}}let rr=(()=>{class I extends Gs{}return I.\u0275fac=function(){let R;return function(U){return(R||(R=o.n5z(I)))(U||I)}}(),I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const ns=new o.OlP("",{providedIn:"root",factory:()=>({})});let Ps=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:function(){return(0,o.f3M)(Ua)},providedIn:"root"}),I})(),Ua=(()=>{class I{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,U){return S}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function il(I){throw I}function Zs(I,R,S){return R.parse("/")}const sc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},li={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ei=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(ns,{optional:!0})||{},this.errorHandler=this.options.errorHandler||il,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Zs,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(Ps),this.routeReuseStrategy=(0,o.f3M)(Ks),this.urlCreationStrategy=(0,o.f3M)(zo),this.titleStrategy=(0,o.f3M)(zl),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pi((0,o.f3M)(Pr,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(Fo),this.urlSerializer=(0,o.f3M)(_r),this.location=(0,o.f3M)(Be.Ye),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new It,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=uo(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(S=>{this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}resetRootComponentType(S){this.routerState.root.component=S,this.navigationTransitions.rootComponentType=S}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const S=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Sn,S)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const U="popstate"===S.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{this.navigateToSyncWithBrowser(S.url,U,S.state)},0)}))}navigateToSyncWithBrowser(S,U,$){const ue={replaceUrl:!0},oe=$?.navigationId?$:null;if($){const st={...$};delete st.navigationId,delete st.\u0275routerPageId,0!==Object.keys(st).length&&(ue.state=st)}const Ne=this.parseUrl(S);this.scheduleNavigation(Ne,U,oe,ue)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(S){this.config=S.map($a),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,U={}){const{relativeTo:$,queryParams:ue,fragment:oe,queryParamsHandling:Ne,preserveFragment:st}=U,Mt=st?this.currentUrlTree.fragment:oe;let Lt=null;switch(Ne){case"merge":Lt={...this.currentUrlTree.queryParams,...ue};break;case"preserve":Lt=this.currentUrlTree.queryParams;break;default:Lt=ue||null}return null!==Lt&&(Lt=this.removeEmptyProps(Lt)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,S,Lt,Mt??null)}navigateByUrl(S,U={skipLocationChange:!1}){const $=bt(S)?S:this.parseUrl(S),ue=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(ue,Sn,null,U)}navigate(S,U={skipLocationChange:!1}){return function jl(I){for(let R=0;R<I.length;R++){if(null==I[R])throw new o.vHH(4008,!1)}}(S),this.navigateByUrl(this.createUrlTree(S,U),U)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let U;try{U=this.urlSerializer.parse(S)}catch($){U=this.malformedUriErrorHandler($,this.urlSerializer,S)}return U}isActive(S,U){let $;if($=!0===U?{...sc}:!1===U?{...li}:U,bt(S))return gr(this.currentUrlTree,S,$);const ue=this.parseUrl(S);return gr(this.currentUrlTree,ue,$)}removeEmptyProps(S){return Object.keys(S).reduce((U,$)=>{const ue=S[$];return null!=ue&&(U[$]=ue),U},{})}scheduleNavigation(S,U,$,ue,oe){if(this.disposed)return Promise.resolve(!1);let Ne,st,Mt,Lt;return oe?(Ne=oe.resolve,st=oe.reject,Mt=oe.promise):Mt=new Promise((Rt,Xt)=>{Ne=Rt,st=Xt}),Lt="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:ue.replaceUrl||ue.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Lt,source:U,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:S,extras:ue,resolve:Ne,reject:st,promise:Mt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Mt.catch(Rt=>Promise.reject(Rt))}setBrowserUrl(S,U){const $=this.urlSerializer.serialize(S),ue={...U.extras.state,...this.generateNgRouterState(U.id,U.targetPageId)};this.location.isCurrentPathEqualTo($)||U.extras.replaceUrl?this.location.replaceState($,"",ue):this.location.go($,"",ue)}restoreHistory(S,U=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===$?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(S,U){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:U}:{navigationId:S}}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),ss=(()=>{class I{constructor(S,U,$,ue,oe,Ne){this.router=S,this.route=U,this.tabIndexAttribute=$,this.renderer=ue,this.el=oe,this.locationStrategy=Ne,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new je.x;const st=oe.nativeElement.tagName;this.isAnchorElement="A"===st||"AREA"===st,this.isAnchorElement?this.subscription=S.events.subscribe(Mt=>{Mt instanceof Pi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(S){this._preserveFragment=(0,o.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,o.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,o.D6c)(S)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(S){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",S)}ngOnChanges(S){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(S,U,$,ue,oe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==S||U||$||ue||oe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const S=null===this.href?null:(0,o.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",S)}applyAttributeValue(S,U){const $=this.renderer,ue=this.el.nativeElement;null!==U?$.setAttribute(ue,S,U):$.removeAttribute(ue,S)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(S){return new(S||I)(o.Y36(ei),o.Y36(vs),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Be.S$))},I.\u0275dir=o.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(S,U){1&S&&o.NdJ("click",function(ue){return U.onClick(ue.button,ue.ctrlKey,ue.shiftKey,ue.altKey,ue.metaKey)}),2&S&&o.uIk("target",U.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),I})(),$s=(()=>{class I{get isActive(){return this._isActive}constructor(S,U,$,ue,oe){this.router=S,this.element=U,this.renderer=$,this.cdr=ue,this.link=oe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new o.vpe,this.routerEventsSubscription=S.events.subscribe(Ne=>{Ne instanceof Pi&&this.update()})}ngAfterContentInit(){(0,u.of)(this.links.changes,(0,u.of)(null)).pipe((0,ln.J)()).subscribe(S=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const S=[...this.links.toArray(),this.link].filter(U=>!!U).map(U=>U.onChanges);this.linkInputChangesSubscription=(0,O.D)(S).pipe((0,ln.J)()).subscribe(U=>{this._isActive!==this.isLinkActive(this.router)(U)&&this.update()})}set routerLinkActive(S){const U=Array.isArray(S)?S:S.split(" ");this.classes=U.filter($=>!!$)}ngOnChanges(S){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const S=this.hasActiveLinks();this._isActive!==S&&(this._isActive=S,this.cdr.markForCheck(),this.classes.forEach(U=>{S?this.renderer.addClass(this.element.nativeElement,U):this.renderer.removeClass(this.element.nativeElement,U)}),S&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(S))})}isLinkActive(S){const U=function ms(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return $=>!!$.urlTree&&S.isActive($.urlTree,U)}hasActiveLinks(){const S=this.isLinkActive(this.router);return this.link&&S(this.link)||this.links.some(S)}}return I.\u0275fac=function(S){return new(S||I)(o.Y36(ei),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(ss,8))},I.\u0275dir=o.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(S,U,$){if(1&S&&o.Suo($,ss,5),2&S){let ue;o.iGM(ue=o.CRH())&&(U.links=ue)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[o.TTD]}),I})();class rl{}let zr=(()=>{class I{constructor(S,U,$,ue,oe){this.router=S,this.injector=$,this.preloadingStrategy=ue,this.loader=oe}setUpPreloading(){this.subscription=this.router.events.pipe((0,dt.h)(S=>S instanceof Pi),(0,Qe.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,U){const $=[];for(const ue of U){ue.providers&&!ue._injector&&(ue._injector=(0,o.MMx)(ue.providers,S,`Route: ${ue.path}`));const oe=ue._injector??S,Ne=ue._loadedInjector??oe;ue.loadChildren&&!ue._loadedRoutes&&void 0===ue.canLoad||ue.loadComponent&&!ue._loadedComponent?$.push(this.preloadConfig(oe,ue)):(ue.children||ue._loadedRoutes)&&$.push(this.processRoutes(Ne,ue.children??ue._loadedRoutes))}return(0,O.D)($).pipe((0,ln.J)())}preloadConfig(S,U){return this.preloadingStrategy.preload(U,()=>{let $;$=U.loadChildren&&void 0===U.canLoad?this.loader.loadChildren(S,U):(0,u.of)(null);const ue=$.pipe((0,ct.z)(oe=>null===oe?(0,u.of)(void 0):(U._loadedRoutes=oe.routes,U._loadedInjector=oe.injector,this.processRoutes(oe.injector??S,oe.routes))));if(U.loadComponent&&!U._loadedComponent){const oe=this.loader.loadComponent(U);return(0,O.D)([ue,oe]).pipe((0,ln.J)())}return ue})}}return I.\u0275fac=function(S){return new(S||I)(o.LFG(ei),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(rl),o.LFG(Vs))},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Ge=new o.OlP("");let me=(()=>{class I{constructor(S,U,$,ue,oe={}){this.urlSerializer=S,this.transitions=U,this.viewportScroller=$,this.zone=ue,this.options=oe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},oe.scrollPositionRestoration=oe.scrollPositionRestoration||"disabled",oe.anchorScrolling=oe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof Ri?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Pi&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.urlSerializer.parse(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof Uo&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,U){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uo(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return I.\u0275fac=function(S){o.$Z()},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac}),I})();function hn(I,R){return{\u0275kind:I,\u0275providers:R}}function iu(){const I=(0,o.f3M)(o.zs3);return R=>{const S=I.get(o.z2F);if(R!==S.components[0])return;const U=I.get(ei),$=I.get(Hu);1===I.get(Gu)&&U.initialNavigation(),I.get(za,null,o.XFs.Optional)?.setUpPreloading(),I.get(Ge,null,o.XFs.Optional)?.init(),U.resetRootComponentType(S.componentTypes[0]),$.closed||($.next(),$.unsubscribe())}}const Hu=new o.OlP("",{factory:()=>new je.x}),Gu=new o.OlP("",{providedIn:"root",factory:()=>1});const za=new o.OlP("");function ru(I){return hn(0,[{provide:za,useExisting:zr},{provide:rl,useExisting:I}])}const ac=new o.OlP("ROUTER_FORROOT_GUARD"),Kr=[Be.Ye,{provide:_r,useClass:pr},ei,Jl,{provide:vs,useFactory:function zt(I){return I.routerState.root},deps:[ei]},Vs,[]];function p(){return new o.PXZ("Router",ei)}let g=(()=>{class I{constructor(S){}static forRoot(S,U){return{ngModule:I,providers:[Kr,[],{provide:Pr,multi:!0,useValue:S},{provide:ac,useFactory:B,deps:[[ei,new o.FiY,new o.tp0]]},{provide:ns,useValue:U||{}},U?.useHash?{provide:Be.S$,useClass:Be.Do}:{provide:Be.S$,useClass:Be.b0},{provide:Ge,useFactory:()=>{const I=(0,o.f3M)(Be.EM),R=(0,o.f3M)(o.R0b),S=(0,o.f3M)(ns),U=(0,o.f3M)(Fo),$=(0,o.f3M)(_r);return S.scrollOffset&&I.setOffset(S.scrollOffset),new me($,U,I,R,S)}},U?.preloadingStrategy?ru(U.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:p},U?.initialNavigation?V(U):[],[{provide:ee,useFactory:iu},{provide:o.tb,multi:!0,useExisting:ee}]]}}static forChild(S){return{ngModule:I,providers:[{provide:Pr,multi:!0,useValue:S}]}}}return I.\u0275fac=function(S){return new(S||I)(o.LFG(ac,8))},I.\u0275mod=o.oAB({type:I}),I.\u0275inj=o.cJS({imports:[Ca]}),I})();function B(I){return"guarded"}function V(I){return["disabled"===I.initialNavigation?hn(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const R=(0,o.f3M)(ei);return()=>{R.setUpLocationChangeListener()}}},{provide:Gu,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?hn(2,[{provide:Gu,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:R=>{const S=R.get(Be.V_,Promise.resolve());return()=>S.then(()=>new Promise($=>{const ue=R.get(ei),oe=R.get(Hu);(function U($){R.get(ei).events.pipe((0,dt.h)(oe=>oe instanceof Pi||oe instanceof yr||oe instanceof Bo),(0,Je.U)(oe=>oe instanceof Pi||oe instanceof yr&&(0===oe.code||1===oe.code)&&null),(0,dt.h)(oe=>null!==oe),(0,lt.q)(1)).subscribe(()=>{$()})})(()=>{$(!0)}),R.get(Fo).afterPreactivation=()=>($(!0),oe.closed?(0,u.of)(void 0):oe),ue.initialNavigation()}))}}]).\u0275providers:[]]}const ee=new o.OlP("")},1366:(tn,nt,N)=>{"use strict";N.d(nt,{Kz:()=>yh,vL:()=>R,jn:()=>ed,qj:()=>ho,NG:()=>ou,wf:()=>$,M:()=>mh,jt:()=>Jh,TH:()=>gh,Vi:()=>_h,XC:()=>zp,iD:()=>Nm,J4:()=>bu,FF:()=>Pg,bz:()=>Qh});var o=N(1571),O=N(9751),u=N(515),fe=N(9646),Y=N(7579),i=N(4968),q=N(5963),de=N(8421);const{isArray:we}=Array;function Ve(w){return 1===w.length&&we(w[0])?w[0]:w}var De=N(5403);function it(...w){return 1===(w=Ve(w)).length?(0,de.Xf)(w[0]):new O.y(function Ke(w){return k=>{let m=[];for(let M=0;m&&!k.closed&&M<w.length;M++)m.push((0,de.Xf)(w[M]).subscribe((0,De.x)(k,Z=>{if(m){for(let pe=0;pe<m.length;pe++)pe!==M&&m[pe].unsubscribe();m=null}k.next(Z)})))}}(w))}N(1135),N(9841);var Je=N(5032);new O.y(Je.Z);var wt=N(3269);function dt(...w){const k=(0,wt.jO)(w),m=Ve(w);return m.length?new O.y(M=>{let Z=m.map(()=>[]),pe=m.map(()=>!1);M.add(()=>{Z=pe=null});for(let _t=0;!M.closed&&_t<m.length;_t++)(0,de.Xf)(m[_t]).subscribe((0,De.x)(M,Pt=>{if(Z[_t].push(Pt),Z.every(jt=>jt.length)){const jt=Z.map(nn=>nn.shift());M.next(k?k(...jt):jt),Z.some((nn,vn)=>!nn.length&&pe[vn])&&M.complete()}},()=>{pe[_t]=!0,!Z[_t].length&&M.complete()}));return()=>{Z=pe=null}}):u.E}var ct=N(6451),at=N(7272),ht=N(2722),Bt=N(9300),Ft=N(5698),kt=N(4004),Zn=(N(8675),N(1884),N(3900)),wn=N(8505),Vr=N(4482),Hi=N(4671);function Vi(...w){const k=(0,wt.jO)(w);return(0,Vr.e)((m,M)=>{const Z=w.length,pe=new Array(Z);let _t=w.map(()=>!1),Pt=!1;for(let jt=0;jt<Z;jt++)(0,de.Xf)(w[jt]).subscribe((0,De.x)(M,nn=>{pe[jt]=nn,!Pt&&!_t[jt]&&(_t[jt]=!0,(Pt=_t.every(Hi.y))&&(_t=null))},Je.Z));m.subscribe((0,De.x)(M,jt=>{if(Pt){const nn=[jt,...pe];M.next(k?k(...nn):nn)}}))})}var Hr=N(1005),Ot=(N(5684),N(6895)),Jt=N(4006),ln={left:"right",right:"left",bottom:"top",top:"bottom"};function fn(w){return w.replace(/left|right|bottom|top/g,function(k){return ln[k]})}function qt(w){return w.split("-")[0]}var On={start:"end",end:"start"};function Nn(w){return w.replace(/start|end/g,function(k){return On[k]})}var Ui="top",Yn="bottom",Gn="right",Xn="left",mi="auto",pi=[Ui,Yn,Gn,Xn],Mn="start",Pn="end",kn="viewport",ii="popper",mr=pi.reduce(function(w,k){return w.concat([k+"-"+Mn,k+"-"+Pn])},[]),gr=[].concat(pi,[mi]).reduce(function(w,k){return w.concat([k,k+"-"+Mn,k+"-"+Pn])},[]),di=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function hi(w){if(null==w)return window;if("[object Window]"!==w.toString()){var k=w.ownerDocument;return k&&k.defaultView||window}return w}function bi(w){return w instanceof hi(w).Element||w instanceof Element}function _r(w){return w instanceof hi(w).HTMLElement||w instanceof HTMLElement}function pr(w){return!(typeof ShadowRoot>"u")&&(w instanceof hi(w).ShadowRoot||w instanceof ShadowRoot)}function bo(w){return((bi(w)?w.ownerDocument:w.document)||window.document).documentElement}var Yi=Math.max,wr=Math.min,Gr=Math.round;function ao(){var w=navigator.userAgentData;return null!=w&&w.brands&&Array.isArray(w.brands)?w.brands.map(function(k){return k.brand+"/"+k.version}).join(" "):navigator.userAgent}function Zr(){return!/^((?!chrome|android).)*safari/i.test(ao())}function Qt(w,k,m){void 0===k&&(k=!1),void 0===m&&(m=!1);var M=w.getBoundingClientRect(),Z=1,pe=1;k&&_r(w)&&(Z=w.offsetWidth>0&&Gr(M.width)/w.offsetWidth||1,pe=w.offsetHeight>0&&Gr(M.height)/w.offsetHeight||1);var Pt=(bi(w)?hi(w):window).visualViewport,jt=!Zr()&&m,nn=(M.left+(jt&&Pt?Pt.offsetLeft:0))/Z,vn=(M.top+(jt&&Pt?Pt.offsetTop:0))/pe,wi=M.width/Z,Qn=M.height/pe;return{width:wi,height:Qn,top:vn,right:nn+wi,bottom:vn+Qn,left:nn,x:nn,y:vn}}function K(w){var k=hi(w);return{scrollLeft:k.pageXOffset,scrollTop:k.pageYOffset}}function se(w){return Qt(bo(w)).left+K(w).scrollLeft}function re(w){return hi(w).getComputedStyle(w)}function Le(w){return w?(w.nodeName||"").toLowerCase():null}function Ze(w){return"html"===Le(w)?w:w.assignedSlot||w.parentNode||(pr(w)?w.host:null)||bo(w)}function Pe(w){var k=re(w);return/auto|scroll|overlay|hidden/.test(k.overflow+k.overflowY+k.overflowX)}function ot(w){return["html","body","#document"].indexOf(Le(w))>=0?w.ownerDocument.body:_r(w)&&Pe(w)?w:ot(Ze(w))}function Nt(w,k){var m;void 0===k&&(k=[]);var M=ot(w),Z=M===(null==(m=w.ownerDocument)?void 0:m.body),pe=hi(M),_t=Z?[pe].concat(pe.visualViewport||[],Pe(M)?M:[]):M,Pt=k.concat(_t);return Z?Pt:Pt.concat(Nt(Ze(_t)))}function rn(w){return["table","td","th"].indexOf(Le(w))>=0}function dn(w){return _r(w)&&"fixed"!==re(w).position?w.offsetParent:null}function tt(w){for(var k=hi(w),m=dn(w);m&&rn(m)&&"static"===re(m).position;)m=dn(m);return m&&("html"===Le(m)||"body"===Le(m)&&"static"===re(m).position)?k:m||function et(w){var k=/firefox/i.test(ao());if(/Trident/i.test(ao())&&_r(w)&&"fixed"===re(w).position)return null;var Z=Ze(w);for(pr(Z)&&(Z=Z.host);_r(Z)&&["html","body"].indexOf(Le(Z))<0;){var pe=re(Z);if("none"!==pe.transform||"none"!==pe.perspective||"paint"===pe.contain||-1!==["transform","perspective"].indexOf(pe.willChange)||k&&"filter"===pe.willChange||k&&pe.filter&&"none"!==pe.filter)return Z;Z=Z.parentNode}return null}(w)||k}function Ye(w,k){var m=k.getRootNode&&k.getRootNode();if(w.contains(k))return!0;if(m&&pr(m)){var M=k;do{if(M&&w.isSameNode(M))return!0;M=M.parentNode||M.host}while(M)}return!1}function bt(w){return Object.assign({},w,{left:w.x,top:w.y,right:w.x+w.width,bottom:w.y+w.height})}function cn(w,k,m){return k===kn?bt(function he(w,k){var m=hi(w),M=bo(w),Z=m.visualViewport,pe=M.clientWidth,_t=M.clientHeight,Pt=0,jt=0;if(Z){pe=Z.width,_t=Z.height;var nn=Zr();(nn||!nn&&"fixed"===k)&&(Pt=Z.offsetLeft,jt=Z.offsetTop)}return{width:pe,height:_t,x:Pt+se(w),y:jt}}(w,m)):bi(k)?function mt(w,k){var m=Qt(w,!1,"fixed"===k);return m.top=m.top+w.clientTop,m.left=m.left+w.clientLeft,m.bottom=m.top+w.clientHeight,m.right=m.left+w.clientWidth,m.width=w.clientWidth,m.height=w.clientHeight,m.x=m.left,m.y=m.top,m}(k,m):bt(function _e(w){var k,m=bo(w),M=K(w),Z=null==(k=w.ownerDocument)?void 0:k.body,pe=Yi(m.scrollWidth,m.clientWidth,Z?Z.scrollWidth:0,Z?Z.clientWidth:0),_t=Yi(m.scrollHeight,m.clientHeight,Z?Z.scrollHeight:0,Z?Z.clientHeight:0),Pt=-M.scrollLeft+se(w),jt=-M.scrollTop;return"rtl"===re(Z||m).direction&&(Pt+=Yi(m.clientWidth,Z?Z.clientWidth:0)-pe),{width:pe,height:_t,x:Pt,y:jt}}(bo(w)))}function ai(w){return w.split("-")[1]}function Bn(w){return["top","bottom"].indexOf(w)>=0?"x":"y"}function Ni(w){var jt,k=w.reference,m=w.element,M=w.placement,Z=M?qt(M):null,pe=M?ai(M):null,_t=k.x+k.width/2-m.width/2,Pt=k.y+k.height/2-m.height/2;switch(Z){case Ui:jt={x:_t,y:k.y-m.height};break;case Yn:jt={x:_t,y:k.y+k.height};break;case Gn:jt={x:k.x+k.width,y:Pt};break;case Xn:jt={x:k.x-m.width,y:Pt};break;default:jt={x:k.x,y:k.y}}var nn=Z?Bn(Z):null;if(null!=nn){var vn="y"===nn?"height":"width";switch(pe){case Mn:jt[nn]=jt[nn]-(k[vn]/2-m[vn]/2);break;case Pn:jt[nn]=jt[nn]+(k[vn]/2-m[vn]/2)}}return jt}function Gi(w){return Object.assign({},{top:0,right:0,bottom:0,left:0},w)}function cr(w,k){return k.reduce(function(m,M){return m[M]=w,m},{})}function Wi(w,k){void 0===k&&(k={});var M=k.placement,Z=void 0===M?w.placement:M,pe=k.strategy,_t=void 0===pe?w.strategy:pe,Pt=k.boundary,jt=void 0===Pt?"clippingParents":Pt,nn=k.rootBoundary,vn=void 0===nn?kn:nn,wi=k.elementContext,Qn=void 0===wi?ii:wi,_i=k.altBoundary,Xr=void 0!==_i&&_i,sr=k.padding,kr=void 0===sr?0:sr,jr=Gi("number"!=typeof kr?kr:cr(kr,pi)),as=w.rects.popper,Fr=w.elements[Xr?Qn===ii?"reference":ii:Qn],io=function In(w,k,m,M){var Z="clippingParents"===k?function xn(w){var k=Nt(Ze(w)),M=["absolute","fixed"].indexOf(re(w).position)>=0&&_r(w)?tt(w):w;return bi(M)?k.filter(function(Z){return bi(Z)&&Ye(Z,M)&&"body"!==Le(Z)}):[]}(w):[].concat(k),pe=[].concat(Z,[m]),Pt=pe.reduce(function(jt,nn){var vn=cn(w,nn,M);return jt.top=Yi(vn.top,jt.top),jt.right=wr(vn.right,jt.right),jt.bottom=wr(vn.bottom,jt.bottom),jt.left=Yi(vn.left,jt.left),jt},cn(w,pe[0],M));return Pt.width=Pt.right-Pt.left,Pt.height=Pt.bottom-Pt.top,Pt.x=Pt.left,Pt.y=Pt.top,Pt}(bi(Fr)?Fr:Fr.contextElement||bo(w.elements.popper),jt,vn,_t),Ao=Qt(w.elements.reference),Vo=Ni({reference:Ao,element:as,strategy:"absolute",placement:Z}),No=bt(Object.assign({},as,Vo)),Wr=Qn===ii?No:Ao,Dr={top:io.top-Wr.top+jr.top,bottom:Wr.bottom-io.bottom+jr.bottom,left:io.left-Wr.left+jr.left,right:Wr.right-io.right+jr.right},Ml=w.modifiersData.offset;if(Qn===ii&&Ml){var Ju=Ml[Z];Object.keys(Dr).forEach(function(Sl){var Lu=[Gn,Yn].indexOf(Sl)>=0?1:-1,ld=[Ui,Yn].indexOf(Sl)>=0?"y":"x";Dr[Sl]+=Ju[ld]*Lu})}return Dr}const Te={name:"flip",enabled:!0,phase:"main",fn:function Ae(w){var k=w.state,m=w.options,M=w.name;if(!k.modifiersData[M]._skip){for(var Z=m.mainAxis,pe=void 0===Z||Z,_t=m.altAxis,Pt=void 0===_t||_t,jt=m.fallbackPlacements,nn=m.padding,vn=m.boundary,wi=m.rootBoundary,Qn=m.altBoundary,_i=m.flipVariations,Xr=void 0===_i||_i,sr=m.allowedAutoPlacements,kr=k.options.placement,jr=qt(kr),as=jt||(jr!==kr&&Xr?function At(w){if(qt(w)===mi)return[];var k=fn(w);return[Nn(w),k,Nn(k)]}(kr):[fn(kr)]),Fr=[kr].concat(as).reduce(function(Bc,Du){return Bc.concat(qt(Du)===mi?function xo(w,k){void 0===k&&(k={});var Z=k.boundary,pe=k.rootBoundary,_t=k.padding,Pt=k.flipVariations,jt=k.allowedAutoPlacements,nn=void 0===jt?gr:jt,vn=ai(k.placement),wi=vn?Pt?mr:mr.filter(function(Xr){return ai(Xr)===vn}):pi,Qn=wi.filter(function(Xr){return nn.indexOf(Xr)>=0});0===Qn.length&&(Qn=wi);var _i=Qn.reduce(function(Xr,sr){return Xr[sr]=Wi(w,{placement:sr,boundary:Z,rootBoundary:pe,padding:_t})[qt(sr)],Xr},{});return Object.keys(_i).sort(function(Xr,sr){return _i[Xr]-_i[sr]})}(k,{placement:Du,boundary:vn,rootBoundary:wi,padding:nn,flipVariations:Xr,allowedAutoPlacements:sr}):Du)},[]),io=k.rects.reference,Ao=k.rects.popper,Vo=new Map,No=!0,Wr=Fr[0],Dr=0;Dr<Fr.length;Dr++){var Ml=Fr[Dr],Ju=qt(Ml),Sl=ai(Ml)===Mn,Lu=[Ui,Yn].indexOf(Ju)>=0,ld=Lu?"width":"height",lu=Wi(k,{placement:Ml,boundary:vn,rootBoundary:wi,altBoundary:Qn,padding:nn}),El=Lu?Sl?Gn:Xn:Sl?Yn:Ui;io[ld]>Ao[ld]&&(El=fn(El));var Wu=fn(El),ud=[];if(pe&&ud.push(lu[Ju]<=0),Pt&&ud.push(lu[El]<=0,lu[Wu]<=0),ud.every(function(Bc){return Bc})){Wr=Ml,No=!1;break}Vo.set(Ml,ud)}if(No)for(var Ad=function(Du){var Tc=Fr.find(function(Al){var Qu=Vo.get(Al);if(Qu)return Qu.slice(0,Du).every(function(up){return up})});if(Tc)return Wr=Tc,"break"},Tu=Xr?3:1;Tu>0&&"break"!==Ad(Tu);Tu--);k.placement!==Wr&&(k.modifiersData[M]._skip=!0,k.placement=Wr,k.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ct(w,k,m){return Yi(w,wr(k,m))}function Tn(w){var k=Qt(w),m=w.offsetWidth,M=w.offsetHeight;return Math.abs(k.width-m)<=1&&(m=k.width),Math.abs(k.height-M)<=1&&(M=k.height),{x:w.offsetLeft,y:w.offsetTop,width:m,height:M}}const ri={name:"preventOverflow",enabled:!0,phase:"main",fn:function Hn(w){var k=w.state,m=w.options,M=w.name,Z=m.mainAxis,pe=void 0===Z||Z,_t=m.altAxis,Pt=void 0!==_t&&_t,Qn=m.tether,_i=void 0===Qn||Qn,Xr=m.tetherOffset,sr=void 0===Xr?0:Xr,kr=Wi(k,{boundary:m.boundary,rootBoundary:m.rootBoundary,padding:m.padding,altBoundary:m.altBoundary}),jr=qt(k.placement),po=ai(k.placement),as=!po,Fr=Bn(jr),io=function Xe(w){return"x"===w?"y":"x"}(Fr),Ao=k.modifiersData.popperOffsets,Vo=k.rects.reference,No=k.rects.popper,Wr="function"==typeof sr?sr(Object.assign({},k.rects,{placement:k.placement})):sr,Dr="number"==typeof Wr?{mainAxis:Wr,altAxis:Wr}:Object.assign({mainAxis:0,altAxis:0},Wr),Ml=k.modifiersData.offset?k.modifiersData.offset[k.placement]:null,Ju={x:0,y:0};if(Ao){if(pe){var Sl,Lu="y"===Fr?Ui:Xn,ld="y"===Fr?Yn:Gn,lu="y"===Fr?"height":"width",El=Ao[Fr],Wu=El+kr[Lu],ud=El-kr[ld],_s=_i?-No[lu]/2:0,Ad=po===Mn?Vo[lu]:No[lu],Tu=po===Mn?-No[lu]:-Vo[lu],Jd=k.elements.arrow,Bc=_i&&Jd?Tn(Jd):{width:0,height:0},Du=k.modifiersData["arrow#persistent"]?k.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Tc=Du[Lu],Al=Du[ld],Qu=Ct(0,Vo[lu],Bc[lu]),up=as?Vo[lu]/2-_s-Qu-Tc-Dr.mainAxis:Ad-Qu-Tc-Dr.mainAxis,Jf=as?-Vo[lu]/2+_s+Qu+Al+Dr.mainAxis:Tu+Qu+Al+Dr.mainAxis,ea=k.elements.arrow&&tt(k.elements.arrow),Wp=null!=(Sl=Ml?.[Fr])?Sl:0,a=El+Jf-Wp,d=Ct(_i?wr(Wu,El+up-Wp-(ea?"y"===Fr?ea.clientTop||0:ea.clientLeft||0:0)):Wu,El,_i?Yi(ud,a):ud);Ao[Fr]=d,Ju[Fr]=d-El}if(Pt){var b,L=Ao[io],H="y"===io?"height":"width",ie=L+kr["x"===Fr?Ui:Xn],xe=L-kr["x"===Fr?Yn:Gn],Me=-1!==[Ui,Xn].indexOf(jr),Ie=null!=(b=Ml?.[io])?b:0,ze=Me?ie:L-Vo[H]-No[H]-Ie+Dr.altAxis,$e=Me?L+Vo[H]+No[H]-Ie-Dr.altAxis:xe,Oe=_i&&Me?function St(w,k,m){var M=Ct(w,k,m);return M>m?m:M}(ze,L,$e):Ct(_i?ze:ie,L,_i?$e:xe);Ao[io]=Oe,Ju[io]=Oe-L}k.modifiersData[M]=Ju}},requiresIfExists:["offset"]},ci={name:"arrow",enabled:!0,phase:"main",fn:function xi(w){var k,m=w.state,M=w.name,Z=w.options,pe=m.elements.arrow,_t=m.modifiersData.popperOffsets,Pt=qt(m.placement),jt=Bn(Pt),vn=[Xn,Gn].indexOf(Pt)>=0?"height":"width";if(pe&&_t){var wi=function(k,m){return Gi("number"!=typeof(k="function"==typeof k?k(Object.assign({},m.rects,{placement:m.placement})):k)?k:cr(k,pi))}(Z.padding,m),Qn=Tn(pe),_i="y"===jt?Ui:Xn,Xr="y"===jt?Yn:Gn,sr=m.rects.reference[vn]+m.rects.reference[jt]-_t[jt]-m.rects.popper[vn],kr=_t[jt]-m.rects.reference[jt],jr=tt(pe),po=jr?"y"===jt?jr.clientHeight||0:jr.clientWidth||0:0,Ao=po/2-Qn[vn]/2+(sr/2-kr/2),Vo=Ct(wi[_i],Ao,po-Qn[vn]-wi[Xr]);m.modifiersData[M]=((k={})[jt]=Vo,k.centerOffset=Vo-Ao,k)}},effect:function Sn(w){var k=w.state,M=w.options.element,Z=void 0===M?"[data-popper-arrow]":M;null!=Z&&("string"==typeof Z&&!(Z=k.elements.popper.querySelector(Z))||Ye(k.elements.popper,Z)&&(k.elements.arrow=Z))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xi(w,k,m){void 0===m&&(m=!1);var M=_r(k),Z=_r(k)&&function yr(w){var k=w.getBoundingClientRect(),m=Gr(k.width)/w.offsetWidth||1,M=Gr(k.height)/w.offsetHeight||1;return 1!==m||1!==M}(k),pe=bo(k),_t=Qt(w,Z,m),Pt={scrollLeft:0,scrollTop:0},jt={x:0,y:0};return(M||!M&&!m)&&(("body"!==Le(k)||Pe(pe))&&(Pt=function Pi(w){return w!==hi(w)&&_r(w)?function Ri(w){return{scrollLeft:w.scrollLeft,scrollTop:w.scrollTop}}(w):K(w)}(k)),_r(k)?((jt=Qt(k,!0)).x+=k.clientLeft,jt.y+=k.clientTop):pe&&(jt.x=se(pe))),{x:_t.left+Pt.scrollLeft-jt.x,y:_t.top+Pt.scrollTop-jt.y,width:_t.width,height:_t.height}}function Bo(w){var k=new Map,m=new Set,M=[];function Z(pe){m.add(pe.name),[].concat(pe.requires||[],pe.requiresIfExists||[]).forEach(function(Pt){if(!m.has(Pt)){var jt=k.get(Pt);jt&&Z(jt)}}),M.push(pe)}return w.forEach(function(pe){k.set(pe.name,pe)}),w.forEach(function(pe){m.has(pe.name)||Z(pe)}),M}function Ga(w){var k;return function(){return k||(k=new Promise(function(m){Promise.resolve().then(function(){k=void 0,m(w())})})),k}}var ar={placement:"bottom",modifiers:[],strategy:"absolute"};function xa(){for(var w=arguments.length,k=new Array(w),m=0;m<w;m++)k[m]=arguments[m];return!k.some(function(M){return!(M&&"function"==typeof M.getBoundingClientRect)})}function Oo(w){void 0===w&&(w={});var m=w.defaultModifiers,M=void 0===m?[]:m,Z=w.defaultOptions,pe=void 0===Z?ar:Z;return function(Pt,jt,nn){void 0===nn&&(nn=pe);var vn={placement:"bottom",orderedModifiers:[],options:Object.assign({},ar,pe),modifiersData:{},elements:{reference:Pt,popper:jt},attributes:{},styles:{}},wi=[],Qn=!1,_i={state:vn,setOptions:function(jr){var po="function"==typeof jr?jr(vn.options):jr;sr(),vn.options=Object.assign({},pe,vn.options,po),vn.scrollParents={reference:bi(Pt)?Nt(Pt):Pt.contextElement?Nt(Pt.contextElement):[],popper:Nt(jt)};var as=function Rr(w){var k=Bo(w);return di.reduce(function(m,M){return m.concat(k.filter(function(Z){return Z.phase===M}))},[])}(function ds(w){var k=w.reduce(function(m,M){var Z=m[M.name];return m[M.name]=Z?Object.assign({},Z,M,{options:Object.assign({},Z.options,M.options),data:Object.assign({},Z.data,M.data)}):M,m},{});return Object.keys(k).map(function(m){return k[m]})}([].concat(M,vn.options.modifiers)));return vn.orderedModifiers=as.filter(function(Fr){return Fr.enabled}),function Xr(){vn.orderedModifiers.forEach(function(kr){var po=kr.options,Fr=kr.effect;if("function"==typeof Fr){var io=Fr({state:vn,name:kr.name,instance:_i,options:void 0===po?{}:po});wi.push(io||function(){})}})}(),_i.update()},forceUpdate:function(){if(!Qn){var jr=vn.elements,po=jr.reference,as=jr.popper;if(xa(po,as)){vn.rects={reference:Xi(po,tt(as),"fixed"===vn.options.strategy),popper:Tn(as)},vn.reset=!1,vn.placement=vn.options.placement,vn.orderedModifiers.forEach(function(Dr){return vn.modifiersData[Dr.name]=Object.assign({},Dr.data)});for(var Fr=0;Fr<vn.orderedModifiers.length;Fr++)if(!0!==vn.reset){var io=vn.orderedModifiers[Fr],Ao=io.fn,Vo=io.options;"function"==typeof Ao&&(vn=Ao({state:vn,options:void 0===Vo?{}:Vo,name:io.name,instance:_i})||vn)}else vn.reset=!1,Fr=-1}}},update:Ga(function(){return new Promise(function(kr){_i.forceUpdate(),kr(vn)})}),destroy:function(){sr(),Qn=!0}};if(!xa(Pt,jt))return _i;function sr(){wi.forEach(function(kr){return kr()}),wi=[]}return _i.setOptions(nn).then(function(kr){!Qn&&nn.onFirstUpdate&&nn.onFirstUpdate(kr)}),_i}}var mo={passive:!0},Ia={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lo(w){var k,m=w.popper,M=w.popperRect,Z=w.placement,pe=w.variation,_t=w.offsets,Pt=w.position,jt=w.gpuAcceleration,nn=w.adaptive,vn=w.roundOffsets,wi=w.isFixed,Qn=_t.x,_i=void 0===Qn?0:Qn,Xr=_t.y,sr=void 0===Xr?0:Xr,kr="function"==typeof vn?vn({x:_i,y:sr}):{x:_i,y:sr};_i=kr.x,sr=kr.y;var jr=_t.hasOwnProperty("x"),po=_t.hasOwnProperty("y"),as=Xn,Fr=Ui,io=window;if(nn){var Ao=tt(m),Vo="clientHeight",No="clientWidth";Ao===hi(m)&&"static"!==re(Ao=bo(m)).position&&"absolute"===Pt&&(Vo="scrollHeight",No="scrollWidth"),(Z===Ui||(Z===Xn||Z===Gn)&&pe===Pn)&&(Fr=Yn,sr-=(wi&&Ao===io&&io.visualViewport?io.visualViewport.height:Ao[Vo])-M.height,sr*=jt?1:-1),Z!==Xn&&(Z!==Ui&&Z!==Yn||pe!==Pn)||(as=Gn,_i-=(wi&&Ao===io&&io.visualViewport?io.visualViewport.width:Ao[No])-M.width,_i*=jt?1:-1)}var Sl,Ml=Object.assign({position:Pt},nn&&Ia),Ju=!0===vn?function Iu(w,k){var M=w.y,Z=k.devicePixelRatio||1;return{x:Gr(w.x*Z)/Z||0,y:Gr(M*Z)/Z||0}}({x:_i,y:sr},hi(m)):{x:_i,y:sr};return _i=Ju.x,sr=Ju.y,Object.assign({},Ml,jt?((Sl={})[Fr]=po?"0":"",Sl[as]=jr?"0":"",Sl.transform=(io.devicePixelRatio||1)<=1?"translate("+_i+"px, "+sr+"px)":"translate3d("+_i+"px, "+sr+"px, 0)",Sl):((k={})[Fr]=po?sr+"px":"",k[as]=jr?_i+"px":"",k.transform="",k))}var Go=Oo({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Po(w){var k=w.state,m=w.instance,M=w.options,Z=M.scroll,pe=void 0===Z||Z,_t=M.resize,Pt=void 0===_t||_t,jt=hi(k.elements.popper),nn=[].concat(k.scrollParents.reference,k.scrollParents.popper);return pe&&nn.forEach(function(vn){vn.addEventListener("scroll",m.update,mo)}),Pt&&jt.addEventListener("resize",m.update,mo),function(){pe&&nn.forEach(function(vn){vn.removeEventListener("scroll",m.update,mo)}),Pt&&jt.removeEventListener("resize",m.update,mo)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function Za(w){var k=w.state;k.modifiersData[w.name]=Ni({reference:k.rects.reference,element:k.rects.popper,strategy:"absolute",placement:k.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function fl(w){var k=w.state,m=w.options,M=m.gpuAcceleration,Z=void 0===M||M,pe=m.adaptive,_t=void 0===pe||pe,Pt=m.roundOffsets,jt=void 0===Pt||Pt,nn={placement:qt(k.placement),variation:ai(k.placement),popper:k.elements.popper,popperRect:k.rects.popper,gpuAcceleration:Z,isFixed:"fixed"===k.options.strategy};null!=k.modifiersData.popperOffsets&&(k.styles.popper=Object.assign({},k.styles.popper,lo(Object.assign({},nn,{offsets:k.modifiersData.popperOffsets,position:k.options.strategy,adaptive:_t,roundOffsets:jt})))),null!=k.modifiersData.arrow&&(k.styles.arrow=Object.assign({},k.styles.arrow,lo(Object.assign({},nn,{offsets:k.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:jt})))),k.attributes.popper=Object.assign({},k.attributes.popper,{"data-popper-placement":k.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Oa(w){var k=w.state;Object.keys(k.elements).forEach(function(m){var M=k.styles[m]||{},Z=k.attributes[m]||{},pe=k.elements[m];!_r(pe)||!Le(pe)||(Object.assign(pe.style,M),Object.keys(Z).forEach(function(_t){var Pt=Z[_t];!1===Pt?pe.removeAttribute(_t):pe.setAttribute(_t,!0===Pt?"":Pt)}))})},effect:function Ls(w){var k=w.state,m={popper:{position:k.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(k.elements.popper.style,m.popper),k.styles=m,k.elements.arrow&&Object.assign(k.elements.arrow.style,m.arrow),function(){Object.keys(k.elements).forEach(function(M){var Z=k.elements[M],pe=k.attributes[M]||{},Pt=Object.keys(k.styles.hasOwnProperty(M)?k.styles[M]:m[M]).reduce(function(jt,nn){return jt[nn]="",jt},{});!_r(Z)||!Le(Z)||(Object.assign(Z.style,Pt),Object.keys(pe).forEach(function(jt){Z.removeAttribute(jt)}))})}},requires:["computeStyles"]}]});const go={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function uo(w){var k=w.state,M=w.name,Z=w.options.offset,pe=void 0===Z?[0,0]:Z,_t=gr.reduce(function(vn,wi){return vn[wi]=function Us(w,k,m){var M=qt(w),Z=[Xn,Ui].indexOf(M)>=0?-1:1,pe="function"==typeof m?m(Object.assign({},k,{placement:w})):m,_t=pe[0],Pt=pe[1];return _t=_t||0,Pt=(Pt||0)*Z,[Xn,Gn].indexOf(M)>=0?{x:Pt,y:_t}:{x:_t,y:Pt}}(wi,k.rects,pe),vn},{}),Pt=_t[k.placement],nn=Pt.y;null!=k.modifiersData.popperOffsets&&(k.modifiersData.popperOffsets.x+=Pt.x,k.modifiersData.popperOffsets.y+=nn),k.modifiersData[M]=_t}},ml=["*"],hu=["ngbDatepickerDayView",""],_c=["month"],ic=["year"];function pu(w,k){if(1&w&&(o.TgZ(0,"option",5),o._uU(1),o.qZA()),2&w){const m=k.$implicit,M=o.oxw();o.Q6J("value",m),o.uIk("aria-label",M.i18n.getMonthFullName(m,M.date.year)),o.xp6(1),o.Oqu(M.i18n.getMonthShortName(m,M.date.year))}}function Pu(w,k){if(1&w&&(o.TgZ(0,"option",5),o._uU(1),o.qZA()),2&w){const m=k.$implicit,M=o.oxw();o.Q6J("value",m),o.xp6(1),o.Oqu(M.i18n.getYearNumerals(m))}}function Jl(w,k){if(1&w){const m=o.EpF();o.TgZ(0,"ngb-datepicker-navigation-select",7),o.NdJ("select",function(Z){o.CHM(m);const pe=o.oxw();return o.KtG(pe.select.emit(Z))}),o.qZA()}if(2&w){const m=o.oxw();o.Q6J("date",m.date)("disabled",m.disabled)("months",m.selectBoxes.months)("years",m.selectBoxes.years)}}function qr(w,k){1&w&&o._UZ(0,"div",0)}function ua(w,k){1&w&&o._UZ(0,"div",0)}function gl(w,k){if(1&w&&(o.YNc(0,qr,1,0,"div",9),o.TgZ(1,"div",10),o._uU(2),o.qZA(),o.YNc(3,ua,1,0,"div",9)),2&w){const m=k.$implicit,M=k.index,Z=o.oxw(2);o.Q6J("ngIf",M>0),o.xp6(2),o.hij(" ",Z.i18n.getMonthLabel(m.firstDate)," "),o.xp6(1),o.Q6J("ngIf",M!==Z.months.length-1)}}function Wl(w,k){if(1&w&&o.YNc(0,gl,4,3,"ng-template",8),2&w){const m=o.oxw();o.Q6J("ngForOf",m.months)}}function Ca(w,k){if(1&w&&(o.TgZ(0,"div",5),o._uU(1),o.qZA()),2&w){const m=o.oxw(2);o.xp6(1),o.Oqu(m.i18n.getWeekLabel())}}function Js(w,k){if(1&w&&(o.TgZ(0,"div",6),o._uU(1),o.qZA()),2&w){const m=k.$implicit;o.xp6(1),o.Oqu(m)}}function Pa(w,k){if(1&w&&(o.TgZ(0,"div",2),o.YNc(1,Ca,2,1,"div",3),o.YNc(2,Js,2,1,"div",4),o.qZA()),2&w){const m=o.oxw();o.xp6(1),o.Q6J("ngIf",m.datepicker.showWeekNumbers),o.xp6(1),o.Q6J("ngForOf",m.viewModel.weekdays)}}function Ta(w,k){if(1&w&&(o.TgZ(0,"div",11),o._uU(1),o.qZA()),2&w){const m=o.oxw(2).$implicit,M=o.oxw();o.xp6(1),o.Oqu(M.i18n.getWeekNumerals(m.number))}}function _l(w,k){}function yl(w,k){if(1&w&&o.YNc(0,_l,0,0,"ng-template",14),2&w){const m=o.oxw().$implicit,M=o.oxw(3);o.Q6J("ngTemplateOutlet",M.datepicker.dayTemplate)("ngTemplateOutletContext",m.context)}}function Ql(w,k){if(1&w){const m=o.EpF();o.TgZ(0,"div",12),o.NdJ("click",function(Z){const _t=o.CHM(m).$implicit;return o.oxw(3).doSelect(_t),o.KtG(Z.preventDefault())}),o.YNc(1,yl,1,2,"ng-template",13),o.qZA()}if(2&w){const m=k.$implicit;o.ekj("disabled",m.context.disabled)("hidden",m.hidden)("ngb-dp-today",m.context.today),o.Q6J("tabindex",m.tabindex),o.uIk("aria-label",m.ariaLabel),o.xp6(1),o.Q6J("ngIf",!m.hidden)}}function Kl(w,k){if(1&w&&(o.TgZ(0,"div",8),o.YNc(1,Ta,2,1,"div",9),o.YNc(2,Ql,2,9,"div",10),o.qZA()),2&w){const m=o.oxw().$implicit,M=o.oxw();o.xp6(1),o.Q6J("ngIf",M.datepicker.showWeekNumbers),o.xp6(1),o.Q6J("ngForOf",m.days)}}function $r(w,k){1&w&&o.YNc(0,Kl,3,2,"div",7),2&w&&o.Q6J("ngIf",!k.$implicit.collapsed)}const rc=["defaultDayTemplate"],$a=["content"];function ca(w,k){if(1&w&&o._UZ(0,"div",8),2&w){const M=k.currentMonth,Z=k.selected,pe=k.disabled,_t=k.focused;o.Q6J("date",k.date)("currentMonth",M)("selected",Z)("disabled",pe)("focused",_t)}}function ws(w,k){if(1&w&&(o.TgZ(0,"div",13),o._uU(1),o.qZA()),2&w){const m=o.oxw().$implicit,M=o.oxw(2);o.xp6(1),o.hij(" ",M.i18n.getMonthLabel(m.firstDate)," ")}}function vl(w,k){if(1&w&&(o.TgZ(0,"div",10),o.YNc(1,ws,2,1,"div",11),o._UZ(2,"ngb-datepicker-month",12),o.qZA()),2&w){const m=k.$implicit,M=o.oxw(2);o.xp6(1),o.Q6J("ngIf","none"===M.navigation||M.displayMonths>1&&"select"===M.navigation),o.xp6(1),o.Q6J("month",m.firstDate)}}function Bl(w,k){if(1&w&&o.YNc(0,vl,3,2,"div",9),2&w){const m=o.oxw();o.Q6J("ngForOf",m.model.months)}}function So(w,k){if(1&w){const m=o.EpF();o.TgZ(0,"ngb-datepicker-navigation",14),o.NdJ("navigate",function(Z){o.CHM(m);const pe=o.oxw();return o.KtG(pe.onNavigateEvent(Z))})("select",function(Z){o.CHM(m);const pe=o.oxw();return o.KtG(pe.onNavigateDateSelect(Z))}),o.qZA()}if(2&w){const m=o.oxw();o.Q6J("date",m.model.firstDate)("months",m.model.months)("disabled",m.model.disabled)("showSelect","select"===m.model.navigation)("prevDisabled",m.model.prevDisabled)("nextDisabled",m.model.nextDisabled)("selectBoxes",m.model.selectBoxes)}}function Ws(w,k){}function Is(w,k){}const gn=function(w){return{$implicit:w}},oc=["dialog"];function os(w){return parseInt(`${w}`,10)}function X(w){return"string"==typeof w}function Ue(w){return!isNaN(os(w))}function vt(w){return"number"==typeof w&&isFinite(w)&&Math.floor(w)===w}function an(w){return null!=w}function oi(w){return Ue(w)?`0${w}`.slice(-2):""}function Dn(w,k){return w&&w.className&&w.className.split&&w.className.split(/\s+/).indexOf(k)>=0}function er(w){return(w||document.body).getBoundingClientRect()}const Vs={animation:!0,transitionTimerDelayMs:5},Hs=()=>{},{transitionTimerDelayMs:fs}=Vs,Ko=new Map,Fo=(w,k,m,M)=>{let Z=M.context||{};const pe=Ko.get(k);if(pe)switch(M.runningTransition){case"continue":return u.E;case"stop":w.run(()=>pe.transition$.complete()),Z=Object.assign(pe.context,Z),Ko.delete(k)}const _t=m(k,M.animation,Z)||Hs;if(!M.animation||"none"===window.getComputedStyle(k).transitionProperty)return w.run(()=>_t()),(0,fe.of)(void 0).pipe(function wo(w){return k=>new O.y(m=>k.subscribe({next:_t=>w.run(()=>m.next(_t)),error:_t=>w.run(()=>m.error(_t)),complete:()=>w.run(()=>m.complete())}))}(w));const Pt=new Y.x,jt=new Y.x,nn=Pt.pipe(function Qe(...w){return k=>(0,at.z)(k,(0,fe.of)(...w))}(!0));Ko.set(k,{transition$:Pt,complete:()=>{jt.next(),jt.complete()},context:Z});const vn=function Pr(w){const{transitionDelay:k,transitionDuration:m}=window.getComputedStyle(w);return 1e3*(parseFloat(k)+parseFloat(m))}(k);return w.runOutsideAngular(()=>{const wi=(0,i.R)(k,"transitionend").pipe((0,ht.R)(nn),(0,Bt.h)(({target:_i})=>_i===k));it((0,q.H)(vn+fs).pipe((0,ht.R)(nn)),wi,jt).pipe((0,ht.R)(nn)).subscribe(()=>{Ko.delete(k),w.run(()=>{_t(),Pt.next(),Pt.complete()})})}),Pt.asObservable()};let Ks=(()=>{class w{constructor(){this.animation=Vs.animation}}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class ho{constructor(k,m,M){this.year=vt(k)?k:null,this.month=vt(m)?m:null,this.day=vt(M)?M:null}static from(k){return k instanceof ho?k:k?new ho(k.year,k.month,k.day):null}equals(k){return null!=k&&this.year===k.year&&this.month===k.month&&this.day===k.day}before(k){return!!k&&(this.year===k.year?this.month===k.month?this.day!==k.day&&this.day<k.day:this.month<k.month:this.year<k.year)}after(k){return!!k&&(this.year===k.year?this.month===k.month?this.day!==k.day&&this.day>k.day:this.month>k.month:this.year>k.year)}}function Ds(w,k){return!function _d(w,k){return!w&&!k||!!w&&!!k&&w.equals(k)}(w,k)}function wl(w,k){return!(!w&&!k||w&&k&&w.year===k.year&&w.month===k.month)}function Kr(w,k,m){return w&&k&&w.before(k)?k:w&&m&&w.after(m)?m:w||null}function p(w,k){const{minDate:m,maxDate:M,disabled:Z,markDisabled:pe}=k;return!(null==w||Z||pe&&pe(w,{year:w.year,month:w.month})||m&&w.before(m)||M&&w.after(M))}function Ce(w){return new ho(w.getFullYear(),w.getMonth()+1,w.getDate())}function Re(w){const k=new Date(w.year,w.month-1,w.day,12);return isNaN(k.getTime())||k.setFullYear(w.year),k}let R=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:function(){return function I(){return new S}()},providedIn:"root"}),w})(),S=(()=>{class w extends R{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(m,M="d",Z=1){let pe=Re(m),_t=!0,Pt=pe.getMonth();switch(M){case"y":pe.setFullYear(pe.getFullYear()+Z);break;case"m":Pt+=Z,pe.setMonth(Pt),Pt%=12,Pt<0&&(Pt+=12);break;case"d":pe.setDate(pe.getDate()+Z),_t=!1;break;default:return m}return _t&&pe.getMonth()!==Pt&&pe.setDate(0),Ce(pe)}getPrev(m,M="d",Z=1){return this.getNext(m,M,-Z)}getWeekday(m){let Z=Re(m).getDay();return 0===Z?7:Z}getWeekNumber(m,M){7===M&&(M=0);const _t=Re(m[(11-M)%7]);_t.setDate(_t.getDate()+4-(_t.getDay()||7));const Pt=_t.getTime();return _t.setMonth(0),_t.setDate(1),Math.floor(Math.round((Pt-_t.getTime())/864e5)/7)+1}getToday(){return Ce(new Date)}isValid(m){if(!(m&&vt(m.year)&&vt(m.month)&&vt(m.day)&&0!==m.year))return!1;const M=Re(m);return!isNaN(M.getTime())&&M.getFullYear()===m.year&&M.getMonth()+1===m.month&&M.getDate()===m.day}}return w.\u0275fac=function(){let k;return function(M){return(k||(k=o.n5z(w)))(M||w)}}(),w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})(),$=(()=>{class w{getMonthLabel(m){return`${this.getMonthFullName(m.month,m.year)} ${this.getYearNumerals(m.year)}`}getDayNumerals(m){return`${m.day}`}getWeekNumerals(m){return`${m}`}getYearNumerals(m){return`${m}`}getWeekLabel(){return""}}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:function(m){let M=null;return M=m?new m:function U(w){return new ue(w)}(o.LFG(o.soG)),M},providedIn:"root"}),w})(),ue=(()=>{class w extends ${constructor(m){super(),this._locale=m,this._monthsShort=(0,Ot.UT)(m,Ot.x.Standalone,Ot.Tn.Abbreviated),this._monthsFull=(0,Ot.UT)(m,Ot.x.Standalone,Ot.Tn.Wide)}getWeekdayLabel(m,M){const Z=(0,Ot.Mn)(this._locale,Ot.x.Standalone,void 0===M?Ot.Tn.Short:M);return Z.map((_t,Pt)=>Z[(Pt+1)%7])[m-1]||""}getMonthShortName(m){return this._monthsShort[m-1]||""}getMonthFullName(m){return this._monthsFull[m-1]||""}getDayAriaLabel(m){const M=new Date(m.year,m.month-1,m.day);return(0,Ot.p6)(M,"fullDate",this._locale)}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(o.soG))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})(),oe=(()=>{class w{constructor(m,M){this._calendar=m,this._i18n=M,this._VALIDATORS={dayTemplateData:Z=>{if(this._state.dayTemplateData!==Z)return{dayTemplateData:Z}},displayMonths:Z=>{if(vt(Z=os(Z))&&Z>0&&this._state.displayMonths!==Z)return{displayMonths:Z}},disabled:Z=>{if(this._state.disabled!==Z)return{disabled:Z}},firstDayOfWeek:Z=>{if(vt(Z=os(Z))&&Z>=0&&this._state.firstDayOfWeek!==Z)return{firstDayOfWeek:Z}},focusVisible:Z=>{if(this._state.focusVisible!==Z&&!this._state.disabled)return{focusVisible:Z}},markDisabled:Z=>{if(this._state.markDisabled!==Z)return{markDisabled:Z}},maxDate:Z=>{const pe=this.toValidDate(Z,null);if(Ds(this._state.maxDate,pe))return{maxDate:pe}},minDate:Z=>{const pe=this.toValidDate(Z,null);if(Ds(this._state.minDate,pe))return{minDate:pe}},navigation:Z=>{if(this._state.navigation!==Z)return{navigation:Z}},outsideDays:Z=>{if(this._state.outsideDays!==Z)return{outsideDays:Z}},weekdays:Z=>{const pe=!0===Z||!1===Z?Ot.Tn.Short:Z,_t=!0!==Z&&!1!==Z||Z;if(this._state.weekdayWidth!==pe||this._state.weekdaysVisible!==_t)return{weekdayWidth:pe,weekdaysVisible:_t}}},this._model$=new Y.x,this._dateSelect$=new Y.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Ot.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,Bt.h)(m=>m.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,Bt.h)(m=>null!==m))}set(m){let M=Object.keys(m).map(Z=>this._VALIDATORS[Z](m[Z])).reduce((Z,pe)=>({...Z,...pe}),{});Object.keys(M).length>0&&this._nextState(M)}focus(m){const M=this.toValidDate(m,null);null!=M&&!this._state.disabled&&Ds(this._state.focusDate,M)&&this._nextState({focusDate:m})}focusSelect(){p(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(m){const M=this.toValidDate(m,this._calendar.getToday());null!=M&&!this._state.disabled&&(!this._state.firstDate||wl(this._state.firstDate,M))&&this._nextState({firstDate:M})}select(m,M={}){const Z=this.toValidDate(m,null);null!=Z&&!this._state.disabled&&(Ds(this._state.selectedDate,Z)&&this._nextState({selectedDate:Z}),M.emitEvent&&p(Z,this._state)&&this._dateSelect$.next(Z))}toValidDate(m,M){const Z=ho.from(m);return void 0===M&&(M=this._calendar.getToday()),this._calendar.isValid(Z)?Z:M}getMonth(m){for(let M of this._state.months)if(m.month===M.number&&m.year===M.year)return M;throw new Error(`month ${m.month} of year ${m.year} not found`)}_nextState(m){const M=this._updateState(m);this._patchContexts(M),this._state=M,this._model$.next(this._state)}_patchContexts(m){const{months:M,displayMonths:Z,selectedDate:pe,focusDate:_t,focusVisible:Pt,disabled:jt,outsideDays:nn}=m;m.months.forEach(vn=>{vn.weeks.forEach(wi=>{wi.days.forEach(Qn=>{_t&&(Qn.context.focused=_t.equals(Qn.date)&&Pt),Qn.tabindex=!jt&&_t&&Qn.date.equals(_t)&&_t.month===vn.number?0:-1,!0===jt&&(Qn.context.disabled=!0),void 0!==pe&&(Qn.context.selected=null!==pe&&pe.equals(Qn.date)),vn.number!==Qn.date.month&&(Qn.hidden="hidden"===nn||"collapsed"===nn||Z>1&&Qn.date.after(M[0].firstDate)&&Qn.date.before(M[Z-1].lastDate))})})})}_updateState(m){const M=Object.assign({},this._state,m);let Z=M.firstDate;if(("minDate"in m||"maxDate"in m)&&(function ac(w,k){if(k&&w&&k.before(w))throw new Error(`'maxDate' ${k} should be greater than 'minDate' ${w}`)}(M.minDate,M.maxDate),M.focusDate=Kr(M.focusDate,M.minDate,M.maxDate),M.firstDate=Kr(M.firstDate,M.minDate,M.maxDate),Z=M.focusDate),"disabled"in m&&(M.focusVisible=!1),"selectedDate"in m&&0===this._state.months.length&&(Z=M.selectedDate),"focusVisible"in m||"focusDate"in m&&(M.focusDate=Kr(M.focusDate,M.minDate,M.maxDate),Z=M.focusDate,0!==M.months.length&&M.focusDate&&!M.focusDate.before(M.firstDate)&&!M.focusDate.after(M.lastDate)))return M;if("firstDate"in m&&(M.firstDate=Kr(M.firstDate,M.minDate,M.maxDate),Z=M.firstDate),Z){const _t=function B(w,k,m,M,Z){const{displayMonths:pe,months:_t}=m,Pt=_t.splice(0,_t.length);return Array.from({length:pe},(nn,vn)=>{const wi=Object.assign(w.getNext(k,"m",vn),{day:1});if(_t[vn]=null,!Z){const Qn=Pt.findIndex(_i=>_i.firstDate.equals(wi));-1!==Qn&&(_t[vn]=Pt.splice(Qn,1)[0])}return wi}).forEach((nn,vn)=>{null===_t[vn]&&(_t[vn]=function V(w,k,m,M,Z={}){const{dayTemplateData:pe,minDate:_t,maxDate:Pt,firstDayOfWeek:jt,markDisabled:nn,outsideDays:vn,weekdayWidth:wi,weekdaysVisible:Qn}=m,_i=w.getToday();Z.firstDate=null,Z.lastDate=null,Z.number=k.month,Z.year=k.year,Z.weeks=Z.weeks||[],Z.weekdays=Z.weekdays||[],k=function ee(w,k,m){const M=w.getDaysPerWeek(),Z=new ho(k.year,k.month,1),pe=w.getWeekday(Z)%M;return w.getPrev(Z,"d",(M+pe-m)%M)}(w,k,jt),Qn||(Z.weekdays.length=0);for(let Xr=0;Xr<w.getWeeksPerMonth();Xr++){let sr=Z.weeks[Xr];sr||(sr=Z.weeks[Xr]={number:0,days:[],collapsed:!0});const kr=sr.days;for(let jr=0;jr<w.getDaysPerWeek();jr++){0===Xr&&Qn&&(Z.weekdays[jr]=M.getWeekdayLabel(w.getWeekday(k),wi));const po=new ho(k.year,k.month,k.day),as=w.getNext(po),Fr=M.getDayAriaLabel(po);let io=!!(_t&&po.before(_t)||Pt&&po.after(Pt));!io&&nn&&(io=nn(po,{month:Z.number,year:Z.year}));let Ao=po.equals(_i),Vo=pe?pe(po,{month:Z.number,year:Z.year}):void 0;null===Z.firstDate&&po.month===Z.number&&(Z.firstDate=po),po.month===Z.number&&as.month!==Z.number&&(Z.lastDate=po);let No=kr[jr];No||(No=kr[jr]={}),No.date=po,No.context=Object.assign(No.context||{},{$implicit:po,date:po,data:Vo,currentMonth:Z.number,currentYear:Z.year,disabled:io,focused:!1,selected:!1,today:Ao}),No.tabindex=-1,No.ariaLabel=Fr,No.hidden=!1,k=as}sr.number=w.getWeekNumber(kr.map(jr=>jr.date),jt),sr.collapsed="collapsed"===vn&&kr[0].date.month!==Z.number&&kr[kr.length-1].date.month!==Z.number}return Z}(w,nn,m,M,Pt.shift()||{}))}),_t}(this._calendar,Z,M,this._i18n,"dayTemplateData"in m||"firstDayOfWeek"in m||"markDisabled"in m||"minDate"in m||"maxDate"in m||"disabled"in m||"outsideDays"in m||"weekdaysVisible"in m);M.months=_t,M.firstDate=_t[0].firstDate,M.lastDate=_t[_t.length-1].lastDate,"selectedDate"in m&&!p(M.selectedDate,M)&&(M.selectedDate=null),"firstDate"in m&&(!M.focusDate||M.focusDate.before(M.firstDate)||M.focusDate.after(M.lastDate))&&(M.focusDate=Z);const Pt=!this._state.firstDate||this._state.firstDate.year!==M.firstDate.year,jt=!this._state.firstDate||this._state.firstDate.month!==M.firstDate.month;"select"===M.navigation?(("minDate"in m||"maxDate"in m||0===M.selectBoxes.years.length||Pt)&&(M.selectBoxes.years=function f(w,k,m){if(!w)return[];const M=k?Math.max(k.year,w.year-500):w.year-10,pe=(m?Math.min(m.year,w.year+500):w.year+10)-M+1,_t=Array(pe);for(let Pt=0;Pt<pe;Pt++)_t[Pt]=M+Pt;return _t}(M.firstDate,M.minDate,M.maxDate)),("minDate"in m||"maxDate"in m||0===M.selectBoxes.months.length||Pt)&&(M.selectBoxes.months=function g(w,k,m,M){if(!k)return[];let Z=w.getMonths(k.year);if(m&&k.year===m.year){const pe=Z.findIndex(_t=>_t===m.month);Z=Z.slice(pe)}if(M&&k.year===M.year){const pe=Z.findIndex(_t=>_t===M.month);Z=Z.slice(0,pe+1)}return Z}(this._calendar,M.firstDate,M.minDate,M.maxDate))):M.selectBoxes={years:[],months:[]},("arrows"===M.navigation||"select"===M.navigation)&&(jt||Pt||"minDate"in m||"maxDate"in m||"disabled"in m)&&(M.prevDisabled=M.disabled||function P(w,k,m){const M=Object.assign(w.getPrev(k,"m"),{day:1});return null!=m&&(M.year===m.year&&M.month<m.month||M.year<m.year&&1===m.month)}(this._calendar,M.firstDate,M.minDate),M.nextDisabled=M.disabled||function x(w,k,m){const M=Object.assign(w.getNext(k,"m"),{day:1});return null!=m&&M.after(m)}(this._calendar,M.lastDate,M.maxDate))}return M}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(R),o.LFG($))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})();var Ne=(()=>{return(w=Ne||(Ne={}))[w.PREV=0]="PREV",w[w.NEXT=1]="NEXT",Ne;var w})();let st=(()=>{class w{constructor(m){this.i18n=m}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return w.\u0275fac=function(m){return new(m||w)(o.Y36($))},w.\u0275cmp=o.Xpm({type:w,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(m,M){2&m&&o.ekj("bg-primary",M.selected)("text-white",M.selected)("text-muted",M.isMuted())("outside",M.isMuted())("active",M.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[o.jDz],attrs:hu,decls:1,vars:1,template:function(m,M){1&m&&o._uU(0),2&m&&o.Oqu(M.i18n.getDayNumerals(M.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),w})(),Mt=(()=>{class w{constructor(m,M){this.i18n=m,this._renderer=M,this.select=new o.vpe,this._month=-1,this._year=-1}changeMonth(m){this.select.emit(new ho(this.date.year,os(m),1))}changeYear(m){this.select.emit(new ho(os(m),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return w.\u0275fac=function(m){return new(m||w)(o.Y36($),o.Y36(o.Qsj))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(m,M){if(1&m&&(o.Gf(_c,7,o.SBq),o.Gf(ic,7,o.SBq)),2&m){let Z;o.iGM(Z=o.CRH())&&(M.monthSelect=Z.first),o.iGM(Z=o.CRH())&&(M.yearSelect=Z.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[o.jDz],decls:6,vars:4,consts:function(){let k,m,M,Z;return k=$localize`:@@ngb.datepicker.select-month:Select month`,m=$localize`:@@ngb.datepicker.select-month:Select month`,M=$localize`:@@ngb.datepicker.select-year:Select year`,Z=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",k,"title",m,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",M,"title",Z,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(m,M){1&m&&(o.TgZ(0,"select",0,1),o.NdJ("change",function(pe){return M.changeMonth(pe.target.value)}),o.YNc(2,pu,2,3,"option",2),o.qZA(),o.TgZ(3,"select",3,4),o.NdJ("change",function(pe){return M.changeYear(pe.target.value)}),o.YNc(5,Pu,2,2,"option",2),o.qZA()),2&m&&(o.Q6J("disabled",M.disabled),o.xp6(2),o.Q6J("ngForOf",M.months),o.xp6(1),o.Q6J("disabled",M.disabled),o.xp6(2),o.Q6J("ngForOf",M.years))},dependencies:[Ot.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),w})(),Lt=(()=>{class w{constructor(m){this.i18n=m,this.navigation=Ne,this.months=[],this.navigate=new o.vpe,this.select=new o.vpe}onClickPrev(m){m.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(m){m.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return w.\u0275fac=function(m){return new(m||w)(o.Y36($))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[o.jDz],decls:8,vars:4,consts:function(){let k,m,M,Z;return k=$localize`:@@ngb.datepicker.previous-month:Previous month`,m=$localize`:@@ngb.datepicker.previous-month:Previous month`,M=$localize`:@@ngb.datepicker.next-month:Next month`,Z=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",k,"title",m,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",M,"title",Z,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(m,M){1&m&&(o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(pe){return M.onClickPrev(pe)}),o._UZ(2,"span",2),o.qZA()(),o.YNc(3,Jl,1,4,"ngb-datepicker-navigation-select",3),o.YNc(4,Wl,1,1,null,4),o.TgZ(5,"div",5)(6,"button",6),o.NdJ("click",function(pe){return M.onClickNext(pe)}),o._UZ(7,"span",2),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("disabled",M.prevDisabled),o.xp6(2),o.Q6J("ngIf",M.showSelect),o.xp6(1),o.Q6J("ngIf",!M.showSelect),o.xp6(2),o.Q6J("disabled",M.nextDisabled))},dependencies:[Ot.O5,Ot.ax,Mt],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),w})();var Rt=(()=>{return(w=Rt||(Rt={}))[w.Tab=9]="Tab",w[w.Enter=13]="Enter",w[w.Escape=27]="Escape",w[w.Space=32]="Space",w[w.PageUp=33]="PageUp",w[w.PageDown=34]="PageDown",w[w.End=35]="End",w[w.Home=36]="Home",w[w.ArrowLeft=37]="ArrowLeft",w[w.ArrowUp=38]="ArrowUp",w[w.ArrowRight=39]="ArrowRight",w[w.ArrowDown=40]="ArrowDown",Rt;var w})();let Xt=(()=>{class w{processKey(m,M){const{state:Z,calendar:pe}=M;switch(m.which){case Rt.PageUp:M.focusDate(pe.getPrev(Z.focusedDate,m.shiftKey?"y":"m",1));break;case Rt.PageDown:M.focusDate(pe.getNext(Z.focusedDate,m.shiftKey?"y":"m",1));break;case Rt.End:M.focusDate(m.shiftKey?Z.maxDate:Z.lastDate);break;case Rt.Home:M.focusDate(m.shiftKey?Z.minDate:Z.firstDate);break;case Rt.ArrowLeft:M.focusDate(pe.getPrev(Z.focusedDate,"d",1));break;case Rt.ArrowUp:M.focusDate(pe.getPrev(Z.focusedDate,"d",pe.getDaysPerWeek()));break;case Rt.ArrowRight:M.focusDate(pe.getNext(Z.focusedDate,"d",1));break;case Rt.ArrowDown:M.focusDate(pe.getNext(Z.focusedDate,"d",pe.getDaysPerWeek()));break;case Rt.Enter:case Rt.Space:M.focusSelect();break;default:return}m.preventDefault(),m.stopPropagation()}}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),yn=(()=>{class w{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Ot.Tn.Short}}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Rn=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:function(){return function zn(){return new qn}()},providedIn:"root"}),w})(),qn=(()=>{class w extends Rn{fromModel(m){return m&&vt(m.year)&&vt(m.month)&&vt(m.day)?{year:m.year,month:m.month,day:m.day}:null}toModel(m){return m&&vt(m.year)&&vt(m.month)&&vt(m.day)?{year:m.year,month:m.month,day:m.day}:null}}return w.\u0275fac=function(){let k;return function(M){return(k||(k=o.n5z(w)))(M||w)}}(),w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})(),Mi=(()=>{class w{constructor(m){this.templateRef=m}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(o.Rgc))},w.\u0275dir=o.lG2({type:w,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),w})(),Si=(()=>{class w{constructor(m,M,Z,pe){this.i18n=m,this.datepicker=M,this._keyboardService=Z,this._service=pe}set month(m){this.viewModel=this._service.getMonth(m)}onKeyDown(m){this._keyboardService.processKey(m,this.datepicker)}doSelect(m){!m.context.disabled&&!m.hidden&&this.datepicker.onDateSelect(m.date)}}return w.\u0275fac=function(m){return new(m||w)(o.Y36($),o.Y36((0,o.Gpc)(()=>Ei)),o.Y36(Xt),o.Y36(oe))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(m,M){1&m&&o.NdJ("keydown",function(pe){return M.onKeyDown(pe)})},inputs:{month:"month"},standalone:!0,features:[o.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(m,M){1&m&&(o.YNc(0,Pa,3,2,"div",0),o.YNc(1,$r,1,1,"ng-template",1)),2&m&&(o.Q6J("ngIf",M.viewModel.weekdays.length>0),o.xp6(1),o.Q6J("ngForOf",M.viewModel.weeks))},dependencies:[Ot.O5,Ot.ax,Ot.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),w})(),Ei=(()=>{class w{constructor(m,M,Z,pe,_t,Pt,jt,nn){this._service=m,this._calendar=M,this._i18n=Z,this._elementRef=Pt,this._ngbDateAdapter=jt,this._ngZone=nn,this.injector=(0,o.f3M)(o.zs3),this._controlValue=null,this._destroyed$=new Y.x,this._publicState={},this.navigate=new o.vpe,this.dateSelect=new o.vpe,this.onChange=vn=>{},this.onTouched=()=>{},["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(vn=>this[vn]=pe[vn]),m.dateSelect$.pipe((0,ht.R)(this._destroyed$)).subscribe(vn=>{this.dateSelect.emit(vn)}),m.model$.pipe((0,ht.R)(this._destroyed$)).subscribe(vn=>{const wi=vn.firstDate,Qn=this.model?this.model.firstDate:null;this._publicState={maxDate:vn.maxDate,minDate:vn.minDate,firstDate:vn.firstDate,lastDate:vn.lastDate,focusedDate:vn.focusDate,months:vn.months.map(jr=>jr.firstDate)};let _i=!1;if(!wi.equals(Qn)&&(this.navigate.emit({current:Qn?{year:Qn.year,month:Qn.month}:null,next:{year:wi.year,month:wi.month},preventDefault:()=>_i=!0}),_i&&null!==Qn))return void this._service.open(Qn);const Xr=vn.selectedDate,sr=vn.focusDate,kr=this.model?this.model.focusDate:null;this.model=vn,Ds(Xr,this._controlValue)&&(this._controlValue=Xr,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Xr))),Ds(sr,kr)&&kr&&vn.focusVisible&&this.focus(),_t.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(m){this._service.focus(ho.from(m))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Ft.q)(1)).subscribe(()=>{const m=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');m&&m.focus()})}navigateTo(m){this._service.open(ho.from(m?m.day?m:{...m,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const m=(0,i.R)(this._contentEl.nativeElement,"focusin"),M=(0,i.R)(this._contentEl.nativeElement,"focusout"),{nativeElement:Z}=this._elementRef;(0,ct.T)(m,M).pipe((0,Bt.h)(({target:pe,relatedTarget:_t})=>!(Dn(pe,"ngb-dp-day")&&Dn(_t,"ngb-dp-day")&&Z.contains(pe)&&Z.contains(_t))),(0,ht.R)(this._destroyed$)).subscribe(({type:pe})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===pe})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const m={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(M=>m[M]=this[M]),this._service.set(m),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(m){const M={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(Z=>Z in m).forEach(Z=>M[Z]=this[Z]),this._service.set(M),"startDate"in m){const{currentValue:Z,previousValue:pe}=m.startDate;wl(pe,Z)&&this.navigateTo(this.startDate)}}onDateSelect(m){this._service.focus(m),this._service.select(m,{emitEvent:!0})}onNavigateDateSelect(m){this._service.open(m)}onNavigateEvent(m){switch(m){case Ne.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Ne.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}setDisabledState(m){this._service.set({disabled:m})}writeValue(m){this._controlValue=ho.from(this._ngbDateAdapter.fromModel(m)),this._service.select(this._controlValue)}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(oe),o.Y36(R),o.Y36($),o.Y36(yn),o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(Rn),o.Y36(o.R0b))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-datepicker"]],contentQueries:function(m,M,Z){if(1&m&&o.Suo(Z,Mi,7),2&m){let pe;o.iGM(pe=o.CRH())&&(M.contentTemplateFromContent=pe.first)}},viewQuery:function(m,M){if(1&m&&(o.Gf(rc,7),o.Gf($a,7)),2&m){let Z;o.iGM(Z=o.CRH())&&(M._defaultDayTemplate=Z.first),o.iGM(Z=o.CRH())&&(M._contentEl=Z.first)}},hostVars:2,hostBindings:function(m,M){2&m&&o.ekj("disabled",M.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[o._Bn([{provide:Jt.JU,useExisting:(0,o.Gpc)(()=>w),multi:!0},oe]),o.TTD,o.jDz],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(m,M){if(1&m&&(o.YNc(0,ca,1,5,"ng-template",null,0,o.W1O),o.YNc(2,Bl,1,1,"ng-template",null,1,o.W1O),o.TgZ(4,"div",2),o.YNc(5,So,1,7,"ngb-datepicker-navigation",3),o.qZA(),o.TgZ(6,"div",4,5),o.YNc(8,Ws,0,0,"ng-template",6),o.qZA(),o.YNc(9,Is,0,0,"ng-template",7)),2&m){const Z=o.MAs(3);o.xp6(5),o.Q6J("ngIf","none"!==M.navigation),o.xp6(1),o.ekj("ngb-dp-months",!M.contentTemplate),o.xp6(2),o.Q6J("ngTemplateOutlet",M.contentTemplate||(null==M.contentTemplateFromContent?null:M.contentTemplateFromContent.templateRef)||Z)("ngTemplateOutletContext",o.VKq(7,gn,M))("ngTemplateOutletInjector",M.injector),o.xp6(1),o.Q6J("ngTemplateOutlet",M.footerTemplate)}},dependencies:[Ot.O5,Ot.ax,Ot.tP,st,Si,Lt],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),w})();const Lr=(w,k)=>!!k&&k.some(m=>m.contains(w)),ui=(w,k)=>!k||null!=function Tr(w,k){return!k||typeof w.closest>"u"?null:w.closest(k)}(w,k),tr=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function Ji(w,k,m,M,Z,pe,_t,Pt){m&&w.runOutsideAngular((w=>tr?()=>setTimeout(()=>w(),100):w)(()=>{const nn=(0,i.R)(k,"keydown").pipe((0,ht.R)(Z),(0,Bt.h)(Qn=>Qn.which===Rt.Escape),(0,wn.b)(Qn=>Qn.preventDefault())),vn=(0,i.R)(k,"mousedown").pipe((0,kt.U)(Qn=>{const _i=Qn.target;return 2!==Qn.button&&!Lr(_i,_t)&&("inside"===m?Lr(_i,pe)&&ui(_i,Pt):"outside"===m?!Lr(_i,pe):ui(_i,Pt)||!Lr(_i,pe))}),(0,ht.R)(Z)),wi=(0,i.R)(k,"mouseup").pipe(Vi(vn),(0,Bt.h)(([Qn,_i])=>_i),(0,Hr.g)(0),(0,ht.R)(Z));it([nn.pipe((0,kt.U)(Qn=>0)),wi.pipe((0,kt.U)(Qn=>1))]).subscribe(Qn=>w.run(()=>M(Qn)))}))}const zi=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function nr(w){const k=Array.from(w.querySelectorAll(zi)).filter(m=>-1!==m.tabIndex);return[k[0],k[k.length-1]]}const Bi=(w,k,m,M=!1)=>{w.runOutsideAngular(()=>{const Z=(0,i.R)(k,"focusin").pipe((0,ht.R)(m),(0,kt.U)(pe=>pe.target));(0,i.R)(k,"keydown").pipe((0,ht.R)(m),(0,Bt.h)(pe=>pe.which===Rt.Tab),Vi(Z)).subscribe(([pe,_t])=>{const[Pt,jt]=nr(k);(_t===Pt||_t===k)&&pe.shiftKey&&(jt.focus(),pe.preventDefault()),_t===jt&&!pe.shiftKey&&(Pt.focus(),pe.preventDefault())}),M&&(0,i.R)(k,"click").pipe((0,ht.R)(m),Vi(Z),(0,kt.U)(pe=>pe[1])).subscribe(pe=>pe.focus())})};let Zi=(()=>{class w{constructor(m){this._element=m.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(Ot.K0))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Ms=/\s+/,Ss=/  +/gi,ja={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},$o=/^left/,is=/^right/,ol=/^start/,sl=/^end/;function Ys({placement:w,baseClass:k},m){let M=Array.isArray(w)?w:w.split(Ms),pe=M.findIndex(nn=>"auto"===nn);pe>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(nn){null==M.find(vn=>-1!==vn.search("^"+nn))&&M.splice(pe++,1,nn)});const _t=M.map(nn=>function ks(w,k){const[m,M]=ja[w];return k&&M||m}(nn,m.isRTL()));return{placement:_t.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!k,phase:"write",fn({state:nn}){const vn=new RegExp(k+"(-[a-z]+)*","gi"),wi=nn.elements.popper,Qn=nn.placement;let _i=wi.className;_i=_i.replace(vn,""),_i+=` ${function Cl(w,k){let[m,M]=k.split("-");const Z=m.replace($o,"start").replace(is,"end");let pe=[Z];if(M){let _t=M;("left"===m||"right"===m)&&(_t=_t.replace(ol,"top").replace(sl,"bottom")),pe.push(`${Z}-${_t}`)}return w&&(pe=pe.map(_t=>`${w}-${_t}`)),pe.join(" ")}(k,Qn)}`,_i=_i.trim().replace(Ss," "),wi.className=_i}},Te,ri,ci,{enabled:!0,name:"flip",options:{fallbackPlacements:_t}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Tl(w){return w}function vu(){const w=(0,o.f3M)(Zi);let k=null;return{createPopper(m){if(!k){let Z=(m.updatePopperOptions||Tl)(Ys(m,w));k=Go(m.hostElement,m.targetElement,Z)}},update(){k&&k.update()},setOptions(m){if(k){let Z=(m.updatePopperOptions||Tl)(Ys(m,w));k.setOptions(Z)}},destroy(){k&&(k.destroy(),k=null)}}}let Ac=(()=>{class w extends yn{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=m=>m,this.restoreFocus=!0}}return w.\u0275fac=function(){let k;return function(M){return(k||(k=o.n5z(w)))(M||w)}}(),w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Ic(w){return k=>(k.modifiers.push(go,{name:"offset",options:{offset:()=>w}}),k)}let ou=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:function(){return function Oc(){return new Ld}()},providedIn:"root"}),w})(),Ld=(()=>{class w extends ou{parse(m){if(null!=m){const M=m.trim().split("-");if(1===M.length&&Ue(M[0]))return{year:os(M[0]),month:null,day:null};if(2===M.length&&Ue(M[0])&&Ue(M[1]))return{year:os(M[0]),month:os(M[1]),day:null};if(3===M.length&&Ue(M[0])&&Ue(M[1])&&Ue(M[2]))return{year:os(M[0]),month:os(M[1]),day:os(M[2])}}return null}format(m){return m?`${m.year}-${Ue(m.month)?oi(m.month):""}-${Ue(m.day)?oi(m.day):""}`:""}}return w.\u0275fac=function(){let k;return function(M){return(k||(k=o.n5z(w)))(M||w)}}(),w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})(),bu=(()=>{class w{constructor(m,M,Z,pe,_t,Pt,jt,nn,vn,wi){this._parserFormatter=m,this._elRef=M,this._vcRef=Z,this._renderer=pe,this._ngZone=_t,this._calendar=Pt,this._dateAdapter=jt,this._document=nn,this._changeDetector=vn,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._destroyCloseHandlers$=new Y.x,this.dateSelect=new o.vpe,this.navigate=new o.vpe,this.closed=new o.vpe,this._onChange=Qn=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement","popperOptions"].forEach(Qn=>this[Qn]=wi[Qn]),this._positioning=vu()}get disabled(){return this._disabled}set disabled(m){this._disabled=""===m||m&&"false"!==m,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(m){this._onChange=m}registerOnTouched(m){this._onTouched=m}registerOnValidatorChange(m){this._validatorChange=m}setDisabledState(m){this.disabled=m}validate(m){const{value:M}=m;if(null!=M){const Z=this._fromDateStruct(this._dateAdapter.fromModel(M));if(!Z)return{ngbDate:{invalid:M}};if(this.minDate&&Z.before(ho.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:M}}};if(this.maxDate&&Z.after(ho.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:M}}}}return null}writeValue(m){this._model=this._fromDateStruct(this._dateAdapter.fromModel(m)),this._writeModelValue(this._model)}manualDateChange(m,M=!1){const Z=m!==this._inputValue;Z&&(this._inputValue=m,this._model=this._fromDateStruct(this._parserFormatter.parse(m))),(Z||!M)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):""===m?null:m),M&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){let m;if(this._cRef=this._vcRef.createComponent(Ei),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(M=>{this.writeValue(M),this._onChange(M),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,Bi(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus()),m=X(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this._ngZone.runOutsideAngular(()=>{this._cRef&&(this._positioning.createPopper({hostElement:m,targetElement:this._cRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:M=>this.popperOptions(Ic([0,2])(M))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this.positionTarget&&!m)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._setCloseHandlers()}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let m=this._elWithFocus;X(this.restoreFocus)?m=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(m=this.restoreFocus),m&&m.focus?m.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(m){this.isOpen()&&this._cRef.instance.navigateTo(m)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(m){if((m.minDate||m.maxDate)&&(this._validatorChange(),this.isOpen()&&(m.minDate&&(this._cRef.instance.minDate=this.minDate),m.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(m))),m.datepickerClass){const{currentValue:M,previousValue:Z}=m.datepickerClass;this._applyPopupClass(M,Z)}m.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(m){["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(M=>{void 0!==this[M]&&m.setInput(M,this[M])}),m.setInput("startDate",this.startDate||this._model)}_applyPopupClass(m,M){const Z=this._cRef?.location.nativeElement;Z&&(m&&this._renderer.addClass(Z,m),M&&this._renderer.removeClass(Z,M))}_applyPopupStyling(m){this._renderer.addClass(m,"dropdown-menu"),this._renderer.addClass(m,"show"),"body"===this.container&&this._renderer.addClass(m,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(m){m.navigate.subscribe(M=>this.navigate.emit(M)),m.dateSelect.subscribe(M=>{this.dateSelect.emit(M),(!0===this.autoClose||"inside"===this.autoClose)&&this.close()})}_writeModelValue(m){const M=this._parserFormatter.format(m);this._inputValue=M,this._renderer.setProperty(this._elRef.nativeElement,"value",M),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(m)),this._onTouched())}_fromDateStruct(m){const M=m?new ho(m.year,m.month,m.day):null;return this._calendar.isValid(M)?M:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Ji(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(ou),o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o.Qsj),o.Y36(o.R0b),o.Y36(R),o.Y36(Rn),o.Y36(Ot.K0),o.Y36(o.sBO),o.Y36(Ac))},w.\u0275dir=o.lG2({type:w,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(m,M){1&m&&o.NdJ("input",function(pe){return M.manualDateChange(pe.target.value)})("change",function(pe){return M.manualDateChange(pe.target.value,!0)})("focus",function(){return M.onFocus()})("blur",function(){return M.onBlur()}),2&m&&o.Ikx("disabled",M.disabled)},inputs:{autoClose:"autoClose",contentTemplate:"contentTemplate",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",popperOptions:"popperOptions",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],standalone:!0,features:[o._Bn([{provide:Jt.JU,useExisting:(0,o.Gpc)(()=>w),multi:!0},{provide:Jt.Cf,useExisting:(0,o.Gpc)(()=>w),multi:!0},{provide:yn,useExisting:Ac}]),o.TTD]}),w})();function Hh(w){let k=function ph(w,k,m){let M=$u(w);return hh(M.gy,3,M.march)+31*(k-1)-Rs(k,7)*(k-7)+m-1}(w.year,w.month,w.day),m=Pf(k);return m.setHours(6,30,3,200),m}function dh(w,k){return k=+k,w.year=w.year+Math.floor((k-1)/12),w.month=Math.floor(((k-1)%12+12)%12)+1,w}function Hl(w,k){return w-k*Math.floor(w/k)}function Rs(w,k){return Math.trunc(w/k)}function $u(w){let k=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];const m=k.length,M=w+621;let _t,Z=-14,pe=k[0];if(w<pe||w>=k[m-1])throw new Error("Invalid Jalali year "+w);for(let wi=1;wi<m;wi+=1){const Qn=k[wi];if(_t=Qn-pe,w<Qn)break;Z=Z+8*Rs(_t,33)+Rs(Hl(_t,33),4),pe=Qn}let Pt=w-pe;Z=Z+8*Rs(Pt,33)+Rs(Hl(Pt,33)+3,4),4===Hl(_t,33)&&_t-Pt==4&&(Z+=1);const nn=20+Z-(Rs(M,4)-Rs(3*(Rs(M,100)+1),4)-150);_t-Pt<6&&(Pt=Pt-_t+33*Rs(_t+4,33));let vn=Hl(Hl(Pt+1,33)-1,4);return-1===vn&&(vn=4),{leap:vn,gy:M,march:nn}}function Pf(w){let k=4*w+139361631;k=k+4*Rs(3*Rs(4*w+183187720,146097),4)-3908;const m=5*Rs(Hl(k,1461),4)+308,M=Rs(Hl(m,153),5)+1,Z=Hl(Rs(m,153),12)+1,pe=Rs(k,1461)-100100+Rs(8-Z,6);return new Date(pe,Z-1,M)}function hh(w,k,m){let M=Rs(1461*(w+Rs(k-8,6)+100100),4)+Rs(153*Hl(k+9,12)+2,5)+m-34840408;return M=M-Rs(3*Rs(w+100100+Rs(k-8,6),100),4)+752,M}function Ud(w,k){return w<=6?31:w<=11||0===$u(k).leap?30:29}new Date(1882,10,12),new Date(2174,10,25);let ed=(()=>{class w extends R{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(m,M="d",Z=1){switch(m=new ho(m.year,m.month,m.day),M){case"y":return m=function Dl(w,k){return w.year=+k,w}(m,m.year+Z),m.month=1,m.day=1,m;case"m":return(m=dh(m,m.month+Z)).day=1,m;case"d":return function Rp(w,k){let m=Ud(w.month,w.year);if(k<=0)for(;k<=0;)m=Ud((w=dh(w,w.month-1)).month,w.year),k+=m;else if(k>m)for(;k>m;)k-=m,m=Ud((w=dh(w,w.month+1)).month,w.year);return w.day=k,w}(m,m.day+Z);default:return m}}getPrev(m,M="d",Z=1){return this.getNext(m,M,-Z)}getWeekday(m){const M=Hh(m).getDay();return 0===M?7:M}getWeekNumber(m,M){7===M&&(M=0);const pe=m[(11-M)%7],_t=Hh(pe);_t.setDate(_t.getDate()+4-(_t.getDay()||7));const Pt=_t.getTime(),jt=Hh(new ho(pe.year,1,1));return Math.floor(Math.round((Pt-jt.getTime())/864e5)/7)+1}getToday(){return function Bd(w){return function Om(w){let pe,_t,Pt,k=Pf(w).getFullYear(),m=k-621,M=$u(m);if(Pt=w-hh(k,3,M.march),Pt>=0){if(Pt<=185)return _t=1+Rs(Pt,31),pe=Hl(Pt,31)+1,new ho(m,_t,pe);Pt-=186}else m-=1,Pt+=179,1===M.leap&&(Pt+=1);return _t=7+Rs(Pt,30),pe=Hl(Pt,30)+1,new ho(m,_t,pe)}(hh(w.getFullYear(),w.getMonth()+1,w.getDate()))}(new Date)}isValid(m){return null!=m&&vt(m.year)&&vt(m.month)&&vt(m.day)&&!isNaN(Hh(m).getTime())}}return w.\u0275fac=function(){let k;return function(M){return(k||(k=o.n5z(w)))(M||w)}}(),w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac}),w})(),mh=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275mod=o.oAB({type:w}),w.\u0275inj=o.cJS({imports:[Ei,Si]}),w})(),bd=(()=>{class w{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=m=>m}}return w.\u0275fac=function(m){return new(m||w)},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),gh=(()=>{class w{constructor(m,M){this.elementRef=m,this._renderer=M,this._disabled=!1}set disabled(m){this._disabled=""===m||!0===m,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(o.SBq),o.Y36(o.Qsj))},w.\u0275dir=o.lG2({type:w,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(m,M){2&m&&(o.Ikx("tabIndex",M.disabled?-1:0),o.ekj("disabled",M.disabled))},inputs:{disabled:"disabled"},standalone:!0}),w})(),_h=(()=>{class w{constructor(m,M){this.dropdown=m,this.placement="bottom",this.isOpen=!1,this.nativeElement=M.nativeElement}}return w.\u0275fac=function(m){return new(m||w)(o.Y36((0,o.Gpc)(()=>Jh)),o.Y36(o.SBq))},w.\u0275dir=o.lG2({type:w,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(m,M,Z){if(1&m&&o.Suo(Z,gh,4),2&m){let pe;o.iGM(pe=o.CRH())&&(M.menuItems=pe)}},hostVars:4,hostBindings:function(m,M){1&m&&o.NdJ("keydown.ArrowUp",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.ArrowDown",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Home",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.End",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Enter",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Space",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Tab",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Shift.Tab",function(pe){return M.dropdown.onKeyDown(pe)}),2&m&&o.ekj("dropdown-menu",!0)("show",M.dropdown.isOpen())},standalone:!0}),w})(),td=(()=>{class w{constructor(m,M){this.dropdown=m,this.nativeElement=M.nativeElement}}return w.\u0275fac=function(m){return new(m||w)(o.Y36((0,o.Gpc)(()=>Jh)),o.Y36(o.SBq))},w.\u0275dir=o.lG2({type:w,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(m,M){2&m&&o.uIk("aria-expanded",M.dropdown.isOpen())},standalone:!0}),w})(),Nm=(()=>{class w extends td{constructor(m,M){super(m,M)}}return w.\u0275fac=function(m){return new(m||w)(o.Y36((0,o.Gpc)(()=>Jh)),o.Y36(o.SBq))},w.\u0275dir=o.lG2({type:w,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(m,M){1&m&&o.NdJ("click",function(){return M.dropdown.toggle()})("keydown.ArrowUp",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.ArrowDown",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Home",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.End",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Tab",function(pe){return M.dropdown.onKeyDown(pe)})("keydown.Shift.Tab",function(pe){return M.dropdown.onKeyDown(pe)}),2&m&&o.uIk("aria-expanded",M.dropdown.isOpen())},standalone:!0,features:[o._Bn([{provide:td,useExisting:(0,o.Gpc)(()=>w)}]),o.qOj]}),w})(),Jh=(()=>{class w{constructor(m,M,Z,pe,_t,Pt){this._changeDetector=m,this._document=Z,this._ngZone=pe,this._elementRef=_t,this._renderer=Pt,this._destroyCloseHandlers$=new Y.x,this._bodyContainer=null,this._open=!1,this.openChange=new o.vpe,this.placement=M.placement,this.popperOptions=M.popperOptions,this.container=M.container,this.autoClose=M.autoClose,this._positioning=vu(),this.display=this._elementRef.nativeElement.closest(".navbar")?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe((0,Ft.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(m){if(m.container&&this._open&&this._applyContainer(this.container),m.placement&&!m.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),m.dropdownClass){const{currentValue:M,previousValue:Z}=m.dropdownClass;this._applyCustomDropdownClass(M,Z)}m.autoClose&&this._open&&(this.autoClose=m.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:m=>this.popperOptions(Ic([0,2])(m))}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Ji(this._ngZone,this._document,this.autoClose,m=>{this.close(),0===m&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(m){const M=m.which,Z=this._getMenuElements();let pe=-1,_t=null;const Pt=this._isEventFromToggle(m);if(!Pt&&Z.length&&Z.forEach((jt,nn)=>{jt.contains(m.target)&&(_t=jt),jt===this._document.activeElement&&(pe=nn)}),M!==Rt.Space&&M!==Rt.Enter){if(M!==Rt.Tab){if(Pt||_t){if(this.open(),Z.length){switch(M){case Rt.ArrowDown:pe=Math.min(pe+1,Z.length-1);break;case Rt.ArrowUp:if(this._isDropup()&&-1===pe){pe=Z.length-1;break}pe=Math.max(pe-1,0);break;case Rt.Home:pe=0;break;case Rt.End:pe=Z.length-1}Z[pe].focus()}m.preventDefault()}}else if(m.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===m.target)return void("body"!==this.container||m.shiftKey?m.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const jt=this._menu.nativeElement.querySelectorAll(zi);m.shiftKey&&m.target===jt[0]?(this._anchor.nativeElement.focus(),m.preventDefault()):!m.shiftKey&&m.target===jt[jt.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else(0,i.R)(m.target,"focusout").pipe((0,Ft.q)(1)).subscribe(({relatedTarget:jt})=>{this._elementRef.nativeElement.contains(jt)||this.close()})}}else _t&&(!0===this.autoClose||"inside"===this.autoClose)&&(0,i.R)(_t,"click").pipe((0,Ft.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(m){return this._anchor.nativeElement.contains(m.target)}_getMenuElements(){const m=this._menu;return null==m?[]:m.menuItems.filter(M=>!M.disabled).map(M=>M.elementRef.nativeElement)}_positionMenu(){const m=this._menu;this.isOpen()&&m&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(m){return Array.isArray(m)?m[0]:m.split(" ")[0]}_resetContainer(){const m=this._renderer;this._menu&&m.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(m.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(m=null){if(this._resetContainer(),"body"===m){const M=this._renderer,Z=this._menu.nativeElement,pe=this._bodyContainer=this._bodyContainer||M.createElement("div");M.setStyle(pe,"position","absolute"),M.setStyle(Z,"position","static"),M.setStyle(pe,"z-index","1055"),M.appendChild(pe,Z),M.appendChild(this._document.body,pe)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(m,M){const Z="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;Z&&(M&&this._renderer.removeClass(Z,M),m&&this._renderer.addClass(Z,m))}_applyPlacementClasses(m){const M=this._menu;if(M){m||(m=this._getFirstPlacement(this.placement));const Z=this._renderer,pe=this._elementRef.nativeElement;Z.removeClass(pe,"dropup"),Z.removeClass(pe,"dropdown");const{nativeElement:_t}=M;"static"===this.display?(M.placement=null,Z.setAttribute(_t,"data-bs-popper","static")):(M.placement=m,Z.removeAttribute(_t,"data-bs-popper"));const Pt=-1!==m.search("^top")?"dropup":"dropdown";Z.addClass(pe,Pt);const jt=this._bodyContainer;jt&&(Z.removeClass(jt,"dropup"),Z.removeClass(jt,"dropdown"),Z.addClass(jt,Pt))}}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(o.sBO),o.Y36(bd),o.Y36(Ot.K0),o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.Qsj))},w.\u0275dir=o.lG2({type:w,selectors:[["","ngbDropdown",""]],contentQueries:function(m,M,Z){if(1&m&&(o.Suo(Z,_h,5),o.Suo(Z,td,5)),2&m){let pe;o.iGM(pe=o.CRH())&&(M._menu=pe.first),o.iGM(pe=o.CRH())&&(M._anchor=pe.first)}},hostVars:2,hostBindings:function(m,M){2&m&&o.ekj("show",M.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],standalone:!0,features:[o.TTD]}),w})(),zp=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275mod=o.oAB({type:w}),w.\u0275inj=o.cJS({}),w})();class nd{constructor(k,m,M){this.nodes=k,this.viewRef=m,this.componentRef=M}}let xd=(()=>{class w{constructor(m,M){this._el=m,this._zone=M}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ft.q)(1)).subscribe(()=>{Fo(this._zone,this._el.nativeElement,(m,M)=>{M&&er(m),m.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fo(this._zone,this._el.nativeElement,({classList:m})=>m.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(o.SBq),o.Y36(o.R0b))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(m,M){2&m&&(o.Tol("modal-backdrop"+(M.backdropClass?" "+M.backdropClass:"")),o.ekj("show",!M.animation)("fade",M.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[o.jDz],decls:0,vars:0,template:function(m,M){},encapsulation:2}),w})();class yh{update(k){}close(k){}dismiss(k){}}const Lf=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Wh=["animation","backdropClass"];class cc{constructor(k,m,M,Z){this._windowCmptRef=k,this._contentRef=m,this._backdropCmptRef=M,this._beforeDismiss=Z,this._closed=new Y.x,this._dismissed=new Y.x,this._hidden=new Y.x,k.instance.dismissEvent.subscribe(pe=>{this.dismiss(pe)}),this.result=new Promise((pe,_t)=>{this._resolve=pe,this._reject=_t}),this.result.then(null,()=>{})}_applyWindowOptions(k,m){Lf.forEach(M=>{an(m[M])&&(k[M]=m[M])})}_applyBackdropOptions(k,m){Wh.forEach(M=>{an(m[M])&&(k[M]=m[M])})}update(k){this._applyWindowOptions(this._windowCmptRef.instance,k),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,k)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,ht.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,ht.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(k){this._windowCmptRef&&(this._closed.next(k),this._resolve(k),this._removeModalElements())}_dismiss(k){this._dismissed.next(k),this._reject(k),this._removeModalElements()}dismiss(k){if(this._windowCmptRef)if(this._beforeDismiss){const m=this._beforeDismiss();!function En(w){return w&&w.then}(m)?!1!==m&&this._dismiss(k):m.then(M=>{!1!==M&&this._dismiss(k)},()=>{})}else this._dismiss(k)}_removeModalElements(){const k=this._windowCmptRef.instance.hide(),m=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,fe.of)(void 0);k.subscribe(()=>{const{nativeElement:M}=this._windowCmptRef.location;M.parentNode.removeChild(M),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),m.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:M}=this._backdropCmptRef.location;M.parentNode.removeChild(M),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),dt(k,m).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vh=(()=>{return(w=vh||(vh={}))[w.BACKDROP_CLICK=0]="BACKDROP_CLICK",w[w.ESC=1]="ESC",vh;var w})();let jd=(()=>{class w{constructor(m,M,Z){this._document=m,this._elRef=M,this._zone=Z,this._closed$=new Y.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new Y.x,this.hidden=new Y.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":X(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(m){this.dismissEvent.emit(m)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ft.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:m}=this._elRef,M={animation:this.animation,runningTransition:"stop"},_t=dt(Fo(this._zone,m,()=>m.classList.remove("show"),M),Fo(this._zone,this._dialogEl.nativeElement,()=>{},M));return _t.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),_t}_show(){const m={animation:this.animation,runningTransition:"continue"};dt(Fo(this._zone,this._elRef.nativeElement,(pe,_t)=>{_t&&er(pe),pe.classList.add("show")},m),Fo(this._zone,this._dialogEl.nativeElement,()=>{},m)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:m}=this._elRef;this._zone.runOutsideAngular(()=>{(0,i.R)(m,"keydown").pipe((0,ht.R)(this._closed$),(0,Bt.h)(Z=>Z.which===Rt.Escape)).subscribe(Z=>{this.keyboard?requestAnimationFrame(()=>{Z.defaultPrevented||this._zone.run(()=>this.dismiss(vh.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let M=!1;(0,i.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,ht.R)(this._closed$),(0,wn.b)(()=>M=!1),(0,Zn.w)(()=>(0,i.R)(m,"mouseup").pipe((0,ht.R)(this._closed$),(0,Ft.q)(1))),(0,Bt.h)(({target:Z})=>m===Z)).subscribe(()=>{M=!0}),(0,i.R)(m,"click").pipe((0,ht.R)(this._closed$)).subscribe(({target:Z})=>{m===Z&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!M&&this._zone.run(()=>this.dismiss(vh.BACKDROP_CLICK))),M=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:m}=this._elRef;if(!m.contains(document.activeElement)){const M=m.querySelector("[ngbAutofocus]"),Z=nr(m)[0];(M||Z||m).focus()}}_restoreFocus(){const m=this._document.body,M=this._elWithFocus;let Z;Z=M&&M.focus&&m.contains(M)?M:m,this._zone.runOutsideAngular(()=>{setTimeout(()=>Z.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Fo(this._zone,this._elRef.nativeElement,({classList:m})=>(m.add("modal-static"),()=>m.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(Ot.K0),o.Y36(o.SBq),o.Y36(o.R0b))},w.\u0275cmp=o.Xpm({type:w,selectors:[["ngb-modal-window"]],viewQuery:function(m,M){if(1&m&&o.Gf(oc,7),2&m){let Z;o.iGM(Z=o.CRH())&&(M._dialogEl=Z.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(m,M){2&m&&(o.uIk("aria-modal",!0)("aria-labelledby",M.ariaLabelledBy)("aria-describedby",M.ariaDescribedBy),o.Tol("modal d-block"+(M.windowClass?" "+M.windowClass:"")),o.ekj("fade",M.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[o.jDz],ngContentSelectors:ml,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(m,M){1&m&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&m&&o.Tol("modal-dialog"+(M.size?" modal-"+M.size:"")+(M.centered?" modal-dialog-centered":"")+M.fullscreenClass+(M.scrollable?" modal-dialog-scrollable":"")+(M.modalDialogClass?" "+M.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),w})(),Bm=(()=>{class w{constructor(m){this._document=m}hide(){const m=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),M=this._document.body,Z=M.style,{overflow:pe,paddingRight:_t}=Z;if(m>0){const Pt=parseFloat(window.getComputedStyle(M).paddingRight);Z.paddingRight=`${Pt+m}px`}return Z.overflow="hidden",()=>{m>0&&(Z.paddingRight=_t),Z.overflow=pe}}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(Ot.K0))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),bh=(()=>{class w{constructor(m,M,Z,pe,_t,Pt,jt){this._applicationRef=m,this._injector=M,this._environmentInjector=Z,this._document=pe,this._scrollBar=_t,this._rendererFactory=Pt,this._ngZone=jt,this._activeWindowCmptHasChanged=new Y.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const nn=this._windowCmpts[this._windowCmpts.length-1];Bi(this._ngZone,nn.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(nn.location.nativeElement)}})}_restoreScrollBar(){const m=this._scrollBarRestoreFn;m&&(this._scrollBarRestoreFn=null,m())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(m,M,Z){const pe=Z.container instanceof HTMLElement?Z.container:an(Z.container)?this._document.querySelector(Z.container):this._document.body,_t=this._rendererFactory.createRenderer(null,null);if(!pe)throw new Error(`The specified modal container "${Z.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Pt=new yh,jt=(m=Z.injector||m).get(o.lqb,null)||this._environmentInjector,nn=this._getContentRef(m,jt,M,Pt,Z);let vn=!1!==Z.backdrop?this._attachBackdrop(pe):void 0,wi=this._attachWindowComponent(pe,nn.nodes),Qn=new cc(wi,nn,vn,Z.beforeDismiss);return this._registerModalRef(Qn),this._registerWindowCmpt(wi),Qn.hidden.pipe((0,Ft.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(_t.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Pt.close=_i=>{Qn.close(_i)},Pt.dismiss=_i=>{Qn.dismiss(_i)},Pt.update=_i=>{Qn.update(_i)},Qn.update(Z),1===this._modalRefs.length&&_t.addClass(this._document.body,"modal-open"),vn&&vn.instance&&vn.changeDetectorRef.detectChanges(),wi.changeDetectorRef.detectChanges(),Qn}get activeInstances(){return this._activeInstances}dismissAll(m){this._modalRefs.forEach(M=>M.dismiss(m))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(m){let M=(0,o.LMc)(xd,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(M.hostView),m.appendChild(M.location.nativeElement),M}_attachWindowComponent(m,M){let Z=(0,o.LMc)(jd,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:M});return this._applicationRef.attachView(Z.hostView),m.appendChild(Z.location.nativeElement),Z}_getContentRef(m,M,Z,pe,_t){return Z?Z instanceof o.Rgc?this._createFromTemplateRef(Z,pe):X(Z)?this._createFromString(Z):this._createFromComponent(m,M,Z,pe,_t):new nd([])}_createFromTemplateRef(m,M){const pe=m.createEmbeddedView({$implicit:M,close(_t){M.close(_t)},dismiss(_t){M.dismiss(_t)}});return this._applicationRef.attachView(pe),new nd([pe.rootNodes],pe)}_createFromString(m){const M=this._document.createTextNode(`${m}`);return new nd([[M]])}_createFromComponent(m,M,Z,pe,_t){const Pt=o.zs3.create({providers:[{provide:yh,useValue:pe}],parent:m}),jt=(0,o.LMc)(Z,{environmentInjector:M,elementInjector:Pt}),nn=jt.location.nativeElement;return _t.scrollable&&nn.classList.add("component-host-scrollable"),this._applicationRef.attachView(jt.hostView),new nd([[nn]],jt.hostView,jt)}_setAriaHidden(m){const M=m.parentElement;M&&m!==this._document.body&&(Array.from(M.children).forEach(Z=>{Z!==m&&"SCRIPT"!==Z.nodeName&&(this._ariaHiddenValues.set(Z,Z.getAttribute("aria-hidden")),Z.setAttribute("aria-hidden","true"))}),this._setAriaHidden(M))}_revertAriaHidden(){this._ariaHiddenValues.forEach((m,M)=>{m?M.setAttribute("aria-hidden",m):M.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(m){const M=()=>{const Z=this._modalRefs.indexOf(m);Z>-1&&(this._modalRefs.splice(Z,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(m),this._activeInstances.emit(this._modalRefs),m.result.then(M,M)}_registerWindowCmpt(m){this._windowCmpts.push(m),this._activeWindowCmptHasChanged.next(),m.onDestroy(()=>{const M=this._windowCmpts.indexOf(m);M>-1&&(this._windowCmpts.splice(M,1),this._activeWindowCmptHasChanged.next())})}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(o.lqb),o.LFG(Ot.K0),o.LFG(Bm),o.LFG(o.FYo),o.LFG(o.R0b))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Um=(()=>{class w{constructor(m){this._ngbConfig=m,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(m){this._animation=m}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(Ks))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Pg=(()=>{class w{constructor(m,M,Z){this._injector=m,this._modalStack=M,this._config=Z}open(m,M={}){const Z={...this._config,animation:this._config.animation,...M};return this._modalStack.open(this._injector,m,Z)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(m){this._modalStack.dismissAll(m)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return w.\u0275fac=function(m){return new(m||w)(o.LFG(o.zs3),o.LFG(bh),o.LFG(Um))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Qh=(()=>{class w{}return w.\u0275fac=function(m){return new(m||w)},w.\u0275mod=o.oAB({type:w}),w.\u0275inj=o.cJS({providers:[Pg]}),w})();new o.OlP("live announcer delay",{providedIn:"root",factory:function qd(){return 100}})},6601:(tn,nt,N)=>{"use strict";N.d(nt,{TT:()=>fn,Gd:()=>Yn,CI:()=>Gn,Wm:()=>Mo});var o=N(5861),O=N(1571),u=N(9898),fe=N(7579);class Y extends fe.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(j){const{hasError:Fe,_hasValue:Yt,_value:ut,thrownError:It,isStopped:rt,_isComplete:Vt}=this;Fe?j.error(It):(rt||Vt)&&(Yt&&j.next(ut),j.complete())}next(j){this.isStopped||(this._value=j,this._hasValue=!0)}complete(){const{_hasValue:j,_value:Fe,_isComplete:Yt}=this;Yt||(this._isComplete=!0,j&&super.next(Fe),super.complete())}}var i=N(727),q=N(4968),de=N(9808),we=N(6451),Ve=N(590),De=N(3900),it=N(9718),Ke=N(9300),je=N(8675),Be=N(8372),Je=N(8505),gt=N(2722),lt=N(5698),wt=N(6895);const dt=["content"],ct=["*"],at=["container"];function Qe(qi,j){1&qi&&O.GkF(0)}const ht=function(qi){return{$implicit:qi}};function Bt(qi,j){if(1&qi&&(O.ynx(0),O.TgZ(1,"mgl-marker",3),O.YNc(2,Qe,1,0,"ng-container",4),O.qZA(),O.BQk()),2&qi){const Fe=O.oxw().$implicit,Yt=O.oxw();O.xp6(1),O.Q6J("feature",Fe),O.xp6(1),O.Q6J("ngTemplateOutlet",Yt.clusterPointTpl)("ngTemplateOutletContext",O.VKq(3,ht,Fe))}}function Ft(qi,j){1&qi&&O.GkF(0)}function kt(qi,j){if(1&qi&&(O.ynx(0),O.TgZ(1,"mgl-marker",3),O.YNc(2,Ft,1,0,"ng-container",4),O.qZA(),O.BQk()),2&qi){const Fe=O.oxw().$implicit,Yt=O.oxw();O.xp6(1),O.Q6J("feature",Fe),O.xp6(1),O.Q6J("ngTemplateOutlet",Yt.pointTpl)("ngTemplateOutletContext",O.VKq(3,ht,Fe))}}function bn(qi,j){if(1&qi&&(O.ynx(0),O.YNc(1,Bt,3,5,"ng-container",2),O.YNc(2,kt,3,5,"ng-container",2),O.BQk()),2&qi){const Fe=j.$implicit;O.xp6(1),O.Q6J("ngIf",Fe.properties.cluster),O.xp6(1),O.Q6J("ngIf",!Fe.properties.cluster)}}const Kt=function(){return{"circle-radius":0}},Zn=new O.OlP("MapboxApiKey");class wn{constructor(j,Fe){this.zone=j,this.MAPBOX_API_KEY=Fe,this.mapCreated=new Y,this.mapLoaded=new Y,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new i.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(j){this.zone.onStable.pipe((0,Ve.P)()).subscribe(()=>{j.customMapboxApiUrl&&(u.baseApiUrl=j.customMapboxApiUrl),this.createMap({...j.mapOptions,accessToken:j.accessToken||this.MAPBOX_API_KEY||""}),this.hookEvents(j.mapEvents),this.mapEvents=j.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),j.mapEvents.mapCreate.observed&&this.zone.run(()=>{j.mapEvents.mapCreate.emit(this.mapInstance)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateProjection(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setProjection(j)})}updateMinZoom(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(j)})}updateMaxZoom(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(j)})}updateMinPitch(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(j)})}updateMaxPitch(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(j)})}updateRenderWorldCopies(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(j)})}updateScrollZoom(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(j){return this.zone.runOutsideAngular(()=>{j?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(j)})}updateMaxBounds(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(j)})}changeCanvasCursor(j){this.mapInstance.getCanvasContainer().style.cursor=j}queryRenderedFeatures(j,Fe){return this.mapInstance.queryRenderedFeatures(j,Fe)}panTo(j,Fe){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(j,Fe)})}move(j,Fe,Yt,ut,It,rt){return this.zone.runOutsideAngular(()=>{this.mapInstance[j]({...Fe,zoom:Yt??this.mapInstance.getZoom(),center:ut??this.mapInstance.getCenter(),bearing:It??this.mapInstance.getBearing(),pitch:rt??this.mapInstance.getPitch()})})}addLayer(j,Fe,Yt){this.zone.runOutsideAngular(()=>{Object.keys(j.layerOptions).forEach(ut=>{void 0===j.layerOptions[ut]&&delete j.layerOptions[ut]}),this.mapInstance.addLayer(j.layerOptions,Yt),Fe&&((j.layerEvents.layerClick.observed||j.layerEvents.click.observed)&&this.mapInstance.on("click",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerClick.emit(ut),j.layerEvents.click.emit(ut)})}),(j.layerEvents.layerDblClick.observed||j.layerEvents.dblClick.observed)&&this.mapInstance.on("dblclick",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerDblClick.emit(ut),j.layerEvents.dblClick.emit(ut)})}),(j.layerEvents.layerMouseDown.observed||j.layerEvents.mouseDown.observed)&&this.mapInstance.on("mousedown",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseDown.emit(ut),j.layerEvents.mouseDown.emit(ut)})}),(j.layerEvents.layerMouseUp.observed||j.layerEvents.mouseUp.observed)&&this.mapInstance.on("mouseup",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseUp.emit(ut),j.layerEvents.mouseUp.emit(ut)})}),(j.layerEvents.layerMouseEnter.observed||j.layerEvents.mouseEnter.observed)&&this.mapInstance.on("mouseenter",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseEnter.emit(ut),j.layerEvents.mouseEnter.emit(ut)})}),(j.layerEvents.layerMouseLeave.observed||j.layerEvents.mouseLeave.observed)&&this.mapInstance.on("mouseleave",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseLeave.emit(ut),j.layerEvents.mouseLeave.emit(ut)})}),(j.layerEvents.layerMouseMove.observed||j.layerEvents.mouseMove.observed)&&this.mapInstance.on("mousemove",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseMove.emit(ut),j.layerEvents.mouseMove.emit(ut)})}),(j.layerEvents.layerMouseOver.observed||j.layerEvents.mouseOver.observed)&&this.mapInstance.on("mouseover",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseOver.emit(ut),j.layerEvents.mouseOver.emit(ut)})}),(j.layerEvents.layerMouseOut.observed||j.layerEvents.mouseOut.observed)&&this.mapInstance.on("mouseout",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerMouseOut.emit(ut),j.layerEvents.mouseOut.emit(ut)})}),(j.layerEvents.layerContextMenu.observed||j.layerEvents.contextMenu.observed)&&this.mapInstance.on("contextmenu",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerContextMenu.emit(ut),j.layerEvents.contextMenu.emit(ut)})}),(j.layerEvents.layerTouchStart.observed||j.layerEvents.touchStart.observed)&&this.mapInstance.on("touchstart",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerTouchStart.emit(ut),j.layerEvents.touchStart.emit(ut)})}),(j.layerEvents.layerTouchEnd.observed||j.layerEvents.touchEnd.observed)&&this.mapInstance.on("touchend",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerTouchEnd.emit(ut),j.layerEvents.touchEnd.emit(ut)})}),(j.layerEvents.layerTouchCancel.observed||j.layerEvents.touchCancel.observed)&&this.mapInstance.on("touchcancel",j.layerOptions.id,ut=>{this.zone.run(()=>{j.layerEvents.layerTouchCancel.emit(ut),j.layerEvents.touchCancel.emit(ut)})}))})}removeLayer(j){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(j)&&this.mapInstance.removeLayer(j)})}addMarker(j){const Fe={offset:j.markersOptions.offset,anchor:j.markersOptions.anchor,draggable:!!j.markersOptions.draggable,rotationAlignment:j.markersOptions.rotationAlignment,pitchAlignment:j.markersOptions.pitchAlignment,clickTolerance:j.markersOptions.clickTolerance};j.markersOptions.element.childNodes.length>0&&(Fe.element=j.markersOptions.element);const Yt=new u.Marker(Fe);return(j.markersEvents.markerDragStart.observed||j.markersEvents.dragStart.observed)&&Yt.on("dragstart",It=>{if(It){const{target:rt}=It;this.zone.run(()=>{j.markersEvents.markerDragStart.emit(rt),j.markersEvents.dragStart.emit(rt)})}}),(j.markersEvents.markerDrag.observed||j.markersEvents.drag.observed)&&Yt.on("drag",It=>{if(It){const{target:rt}=It;this.zone.run(()=>{j.markersEvents.markerDrag.emit(rt),j.markersEvents.drag.emit(rt)})}}),(j.markersEvents.markerDragEnd.observed||j.markersEvents.dragEnd.observed)&&Yt.on("dragend",It=>{if(It){const{target:rt}=It;this.zone.run(()=>{j.markersEvents.markerDragEnd.emit(rt),j.markersEvents.dragEnd.emit(rt)})}}),Yt.setLngLat(j.markersOptions.feature?j.markersOptions.feature.geometry.coordinates:j.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(Yt.addTo(this.mapInstance),Yt))}removeMarker(j){this.markersToRemove.push(j)}createPopup(j,Fe){return this.zone.runOutsideAngular(()=>{Object.keys(j.popupOptions).forEach(ut=>void 0===j.popupOptions[ut]&&delete j.popupOptions[ut]);const Yt=new u.Popup(j.popupOptions);return Yt.setDOMContent(Fe),(j.popupEvents.popupClose.observed||j.popupEvents.close.observed)&&Yt.on("close",()=>{this.zone.run(()=>{j.popupEvents.popupClose.emit(),j.popupEvents.close.emit()})}),(j.popupEvents.popupOpen.observed||j.popupEvents.open.observed)&&Yt.on("open",()=>{this.zone.run(()=>{j.popupEvents.popupOpen.emit(),j.popupEvents.open.emit()})}),Yt})}addPopupToMap(j,Fe,Yt=!1){return this.zone.runOutsideAngular(()=>{Yt&&j._listeners&&delete j._listeners.open,j.setLngLat(Fe),j.addTo(this.mapInstance)})}addPopupToMarker(j,Fe){return this.zone.runOutsideAngular(()=>{j.setPopup(Fe)})}removePopupFromMap(j,Fe=!1){Fe&&j._listeners&&delete j._listeners.close,this.popupsToRemove.push(j)}removePopupFromMarker(j){return this.zone.runOutsideAngular(()=>{j.setPopup(void 0)})}addControl(j,Fe){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(j,Fe)})}removeControl(j){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(j)})}loadAndAddImage(j,Fe,Yt){var ut=this;return(0,o.Z)(function*(){return ut.zone.runOutsideAngular(()=>new Promise((It,rt)=>{ut.mapInstance.loadImage(Fe,(Vt,di)=>{Vt?rt(Vt):(ut.addImage(j,di,Yt),It())})}))})()}addImage(j,Fe,Yt){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(j,Fe,Yt)})}removeImage(j){this.imageIdsToRemove.push(j)}addSource(j,Fe){return this.zone.runOutsideAngular(()=>{Object.keys(Fe).forEach(Yt=>void 0===Fe[Yt]&&delete Fe[Yt]),this.mapInstance.addSource(j,Fe)})}getSource(j){return this.mapInstance.getSource(j)}removeSource(j){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(j).forEach(Fe=>this.mapInstance.removeLayer(Fe.id)),this.mapInstance.removeSource(j)})}setAllLayerPaintProperty(j,Fe){return this.zone.runOutsideAngular(()=>{Object.keys(Fe).forEach(Yt=>{this.mapInstance.setPaintProperty(j,Yt,Fe[Yt])})})}setAllLayerLayoutProperty(j,Fe){return this.zone.runOutsideAngular(()=>{Object.keys(Fe).forEach(Yt=>{this.mapInstance.setLayoutProperty(j,Yt,Fe[Yt])})})}setLayerFilter(j,Fe){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(j,Fe)})}setLayerBefore(j,Fe){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(j,Fe)})}setLayerZoomRange(j,Fe,Yt){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(j,Fe||0,Yt||20)})}fitBounds(j,Fe){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(j,Fe)})}fitScreenCoordinates(j,Fe,Yt){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(j[0],j[1],Fe,Yt)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(j){O.R0b.assertNotInAngularZone(),Object.keys(j).forEach(Yt=>{void 0===j[Yt]&&delete j[Yt]}),this.mapInstance=new u.Map(j),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(j.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const j of this.markersToRemove)j.remove();this.markersToRemove=[]}removePopups(){for(const j of this.popupsToRemove)j.remove();this.popupsToRemove=[]}removeImages(){for(const j of this.imageIdsToRemove)this.mapInstance.removeImage(j);this.imageIdsToRemove=[]}findLayersBySourceId(j){const Fe=this.mapInstance.getStyle().layers;return null==Fe?[]:Fe.filter(Yt=>"source"in Yt&&Yt.source===j)}hookEvents(j){this.mapInstance.on("load",Fe=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{j.mapLoad.emit(Fe),j.load.emit(Fe.target)})}),(j.mapResize.observed||j.resize.observed)&&this.mapInstance.on("resize",Fe=>this.zone.run(()=>{j.mapResize.emit(Fe),j.resize.emit(Fe)})),(j.mapRemove.observed||j.remove.observed)&&this.mapInstance.on("remove",Fe=>this.zone.run(()=>{j.mapRemove.emit(Fe),j.remove.emit(Fe)})),(j.mapMouseDown.observed||j.mouseDown.observed)&&this.mapInstance.on("mousedown",Fe=>this.zone.run(()=>{j.mapMouseDown.emit(Fe),j.mouseDown.emit(Fe)})),(j.mapMouseUp.observed||j.mouseUp.observed)&&this.mapInstance.on("mouseup",Fe=>this.zone.run(()=>{j.mapMouseUp.emit(Fe),j.mouseUp.emit(Fe)})),(j.mapMouseMove.observed||j.mouseMove.observed)&&this.mapInstance.on("mousemove",Fe=>this.zone.run(()=>{j.mapMouseMove.emit(Fe),j.mouseMove.emit(Fe)})),(j.mapClick.observed||j.click.observed)&&this.mapInstance.on("click",Fe=>this.zone.run(()=>{j.mapClick.emit(Fe),j.click.emit(Fe)})),(j.mapDblClick.observed||j.dblClick.observed)&&this.mapInstance.on("dblclick",Fe=>this.zone.run(()=>{j.mapDblClick.emit(Fe),j.dblClick.emit(Fe)})),(j.mapMouseOver.observed||j.mouseOver.observed)&&this.mapInstance.on("mouseover",Fe=>this.zone.run(()=>{j.mapMouseOver.emit(Fe),j.mouseOver.emit(Fe)})),(j.mapMouseOut.observed||j.mouseOut.observed)&&this.mapInstance.on("mouseout",Fe=>this.zone.run(()=>{j.mapMouseOut.emit(Fe),j.mouseOut.emit(Fe)})),(j.mapContextMenu.observed||j.contextMenu.observed)&&this.mapInstance.on("contextmenu",Fe=>this.zone.run(()=>{j.mapContextMenu.emit(Fe),j.contextMenu.emit(Fe)})),(j.mapTouchStart.observed||j.touchStart.observed)&&this.mapInstance.on("touchstart",Fe=>this.zone.run(()=>{j.mapTouchStart.emit(Fe),j.touchStart.emit(Fe)})),(j.mapTouchEnd.observed||j.touchEnd.observed)&&this.mapInstance.on("touchend",Fe=>this.zone.run(()=>{j.mapTouchEnd.emit(Fe),j.touchEnd.emit(Fe)})),(j.mapTouchMove.observed||j.touchMove.observed)&&this.mapInstance.on("touchmove",Fe=>this.zone.run(()=>{j.mapTouchMove.emit(Fe),j.touchMove.emit(Fe)})),(j.mapTouchCancel.observed||j.touchCancel.observed)&&this.mapInstance.on("touchcancel",Fe=>this.zone.run(()=>{j.mapTouchCancel.emit(Fe),j.touchCancel.emit(Fe)})),(j.mapWheel.observed||j.wheel.observed)&&this.mapInstance.on("wheel",Fe=>this.zone.run(()=>{j.mapWheel.emit(Fe),j.wheel.emit(Fe)})),j.moveStart.observed&&this.mapInstance.on("movestart",Fe=>this.zone.run(()=>j.moveStart.emit(Fe))),j.move.observed&&this.mapInstance.on("move",Fe=>this.zone.run(()=>j.move.emit(Fe))),j.moveEnd.observed&&this.mapInstance.on("moveend",Fe=>this.zone.run(()=>j.moveEnd.emit(Fe))),(j.mapDragStart.observed||j.dragStart.observed)&&this.mapInstance.on("dragstart",Fe=>this.zone.run(()=>{j.mapDragStart.emit(Fe),j.dragStart.emit(Fe)})),(j.mapDrag.observed||j.drag.observed)&&this.mapInstance.on("drag",Fe=>this.zone.run(()=>{j.mapDrag.emit(Fe),j.drag.emit(Fe)})),(j.mapDragEnd.observed||j.dragEnd.observed)&&this.mapInstance.on("dragend",Fe=>this.zone.run(()=>{j.mapDragEnd.emit(Fe),j.dragEnd.emit(Fe)})),j.zoomStart.observed&&this.mapInstance.on("zoomstart",Fe=>this.zone.run(()=>j.zoomStart.emit(Fe))),j.zoomEvt.observed&&this.mapInstance.on("zoom",Fe=>this.zone.run(()=>j.zoomEvt.emit(Fe))),j.zoomEnd.observed&&this.mapInstance.on("zoomend",Fe=>this.zone.run(()=>j.zoomEnd.emit(Fe))),j.rotateStart.observed&&this.mapInstance.on("rotatestart",Fe=>this.zone.run(()=>j.rotateStart.emit(Fe))),j.rotate.observed&&this.mapInstance.on("rotate",Fe=>this.zone.run(()=>j.rotate.emit(Fe))),j.rotateEnd.observed&&this.mapInstance.on("rotateend",Fe=>this.zone.run(()=>j.rotateEnd.emit(Fe))),j.pitchStart.observed&&this.mapInstance.on("pitchstart",Fe=>this.zone.run(()=>j.pitchStart.emit(Fe))),j.pitchEvt.observed&&this.mapInstance.on("pitch",Fe=>this.zone.run(()=>j.pitchEvt.emit(Fe))),j.pitchEnd.observed&&this.mapInstance.on("pitchend",Fe=>this.zone.run(()=>j.pitchEnd.emit(Fe))),j.boxZoomStart.observed&&this.mapInstance.on("boxzoomstart",Fe=>this.zone.run(()=>j.boxZoomStart.emit(Fe))),j.boxZoomEnd.observed&&this.mapInstance.on("boxzoomend",Fe=>this.zone.run(()=>j.boxZoomEnd.emit(Fe))),j.boxZoomCancel.observed&&this.mapInstance.on("boxzoomcancel",Fe=>this.zone.run(()=>j.boxZoomCancel.emit(Fe))),j.webGlContextLost.observed&&this.mapInstance.on("webglcontextlost",Fe=>this.zone.run(()=>j.webGlContextLost.emit(Fe))),j.webGlContextRestored.observed&&this.mapInstance.on("webglcontextrestored",Fe=>this.zone.run(()=>j.webGlContextRestored.emit(Fe))),j.render.observed&&this.mapInstance.on("render",Fe=>this.zone.run(()=>j.render.emit(Fe))),(j.mapError.observed||j.error.observed)&&this.mapInstance.on("error",Fe=>this.zone.run(()=>{j.mapError.emit(Fe),j.error.emit(Fe)})),j.data.observed&&this.mapInstance.on("data",Fe=>this.zone.run(()=>j.data.emit(Fe))),j.styleData.observed&&this.mapInstance.on("styledata",Fe=>this.zone.run(()=>j.styleData.emit(Fe))),j.sourceData.observed&&this.mapInstance.on("sourcedata",Fe=>this.zone.run(()=>j.sourceData.emit(Fe))),j.dataLoading.observed&&this.mapInstance.on("dataloading",Fe=>this.zone.run(()=>j.dataLoading.emit(Fe))),j.styleDataLoading.observed&&this.mapInstance.on("styledataloading",Fe=>this.zone.run(()=>j.styleDataLoading.emit(Fe))),j.sourceDataLoading.observed&&this.mapInstance.on("sourcedataloading",Fe=>this.zone.run(()=>j.sourceDataLoading.emit(Fe))),j.styleImageMissing.observed&&this.mapInstance.on("styleimagemissing",Fe=>this.zone.run(()=>j.styleImageMissing.emit(Fe))),j.idle.observed&&this.mapInstance.on("idle",Fe=>this.zone.run(()=>j.idle.emit(Fe)))}assign(j,Fe,Yt){if("string"==typeof Fe&&(Fe=Fe.split(".")),Fe.length>1){const ut=Fe.shift();this.assign(j[ut]="[object Object]"===Object.prototype.toString.call(j[ut])?j[ut]:{},Fe,Yt)}else j[Fe[0]]=Yt}static#e=this.\u0275fac=function(Fe){return new(Fe||wn)(O.LFG(O.R0b),O.LFG(Zn,8))};static#t=this.\u0275prov=O.Yz7({token:wn,factory:wn.\u0275fac})}class Vr{constructor(j){this.container=j}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}class Hi{constructor(j){this.mapService=j,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Vr(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}static#e=this.\u0275fac=function(Fe){return new(Fe||Hi)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:Hi,selectors:[["mgl-control"]],viewQuery:function(Fe,Yt){if(1&Fe&&O.Gf(dt,7),2&Fe){let ut;O.iGM(ut=O.CRH())&&(Yt.content=ut.first)}},inputs:{position:"position"},ngContentSelectors:ct,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(Fe,Yt){1&Fe&&(O.F$t(),O.TgZ(0,"div",0,1),O.Hsn(2),O.qZA())},encapsulation:2,changeDetection:0})}class Vi{constructor(j,Fe){this.mapService=j,this.controlComponent=Fe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const j={};void 0!==this.compact&&(j.compact=this.compact),void 0!==this.customAttribution&&(j.customAttribution=this.customAttribution),this.controlComponent.control=new u.AttributionControl(j),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(Fe){return new(Fe||Vi)(O.Y36(wn),O.Y36(Hi,1))};static#t=this.\u0275dir=O.lG2({type:Vi,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}})}class Hr{constructor(j,Fe){this.mapService=j,this.controlComponent=Fe}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new u.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(Fe){return new(Fe||Hr)(O.Y36(wn),O.Y36(Hi,1))};static#t=this.\u0275dir=O.lG2({type:Hr,selectors:[["","mglFullscreen",""]],hostBindings:function(Fe,Yt){1&Fe&&O.NdJ("webkitfullscreenchange",function(It){return Yt.onFullscreen(It.target)},!1,O.Jf7)},inputs:{container:"container"}})}class en{constructor(j,Fe){this.mapService=j,this.controlComponent=Fe,this.geolocate=new O.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const j={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation,showUserHeading:this.showUserHeading};Object.keys(j).forEach(Fe=>{void 0===j[Fe]&&delete j[Fe]}),this.controlComponent.control=new u.GeolocateControl(j),this.controlComponent.control.on("geolocate",Fe=>{this.geolocate.emit(Fe)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(Fe){return new(Fe||en)(O.Y36(wn),O.Y36(Hi,1))};static#t=this.\u0275dir=O.lG2({type:en,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation",showUserHeading:"showUserHeading"},outputs:{geolocate:"geolocate"}})}class Ot{constructor(j,Fe){this.mapService=j,this.controlComponent=Fe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const j={};void 0!==this.showCompass&&(j.showCompass=this.showCompass),void 0!==this.showZoom&&(j.showZoom=this.showZoom),this.controlComponent.control=new u.NavigationControl(j),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(Fe){return new(Fe||Ot)(O.Y36(wn),O.Y36(Hi,1))};static#t=this.\u0275dir=O.lG2({type:Ot,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}})}class Jt{constructor(j,Fe){this.mapService=j,this.controlComponent=Fe}ngOnChanges(j){j.unit&&!j.unit.isFirstChange()&&this.controlComponent.control.setUnit(j.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const j={};void 0!==this.maxWidth&&(j.maxWidth=this.maxWidth),void 0!==this.unit&&(j.unit=this.unit),this.controlComponent.control=new u.ScaleControl(j),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(Fe){return new(Fe||Jt)(O.Y36(wn),O.Y36(Hi,1))};static#t=this.\u0275dir=O.lG2({type:Jt,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[O.TTD]})}const ln=(qi,j,Fe)=>{console.warn(`[ngx-mapbox-gl]: ${qi}: ${j} is deprecated, please use ${Fe} instead.`)};class fn{constructor(j){this.mapService=j,this.layerClick=new O.vpe,this.layerDblClick=new O.vpe,this.layerMouseDown=new O.vpe,this.layerMouseUp=new O.vpe,this.layerMouseEnter=new O.vpe,this.layerMouseLeave=new O.vpe,this.layerMouseMove=new O.vpe,this.layerMouseOver=new O.vpe,this.layerMouseOut=new O.vpe,this.layerContextMenu=new O.vpe,this.layerTouchStart=new O.vpe,this.layerTouchEnd=new O.vpe,this.layerTouchCancel=new O.vpe,this.click=new O.vpe,this.dblClick=new O.vpe,this.mouseDown=new O.vpe,this.mouseUp=new O.vpe,this.mouseEnter=new O.vpe,this.mouseLeave=new O.vpe,this.mouseMove=new O.vpe,this.mouseOver=new O.vpe,this.mouseOut=new O.vpe,this.contextMenu=new O.vpe,this.touchStart=new O.vpe,this.touchEnd=new O.vpe,this.touchCancel=new O.vpe,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,De.w)(()=>(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,it.h)(!1),(0,Ke.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,je.O)(!0)))).subscribe(j=>this.init(j))}ngOnChanges(j){this.layerAdded&&(j.paint&&!j.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,j.paint.currentValue),j.layout&&!j.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,j.layout.currentValue),j.filter&&!j.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,j.filter.currentValue),j.before&&!j.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,j.before.currentValue),(j.minzoom&&!j.minzoom.isFirstChange()||j.maxzoom&&!j.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.mapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(j){this.mapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},j,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const j=ln.bind(void 0,fn.name);this.click.observed&&j("click","layerClick"),this.dblClick.observed&&j("dblClick","layerDblClick"),this.mouseDown.observed&&j("mouseDown","layerMouseDown"),this.mouseUp.observed&&j("mouseUp","layerMouseUp"),this.mouseEnter.observed&&j("mouseEnter","layerMouseEnter"),this.mouseLeave.observed&&j("mouseLeave","layerMouseLeave"),this.mouseMove.observed&&j("mouseMove","layerMouseMove"),this.mouseOver.observed&&j("mouseOver","layerMouseOver"),this.mouseOut.observed&&j("mouseOut","layerMouseOut"),this.contextMenu.observed&&j("contextMenu","layerContextMenu"),this.touchStart.observed&&j("touchStart","layerTouchStart"),this.touchEnd.observed&&j("touchEnd","layerTouchEnd"),this.touchCancel.observed&&j("touchCancel","layerTouchCancel")}static#e=this.\u0275fac=function(Fe){return new(Fe||fn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:fn,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2})}class qt{constructor(j,Fe){this.mapService=j,this.zone=Fe,this.updateFeatureData=new fe.x,this.sub=new i.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){if(this.sourceAdded&&((j.maxzoom&&!j.maxzoom.isFirstChange()||j.attribution&&!j.attribution.isFirstChange()||j.buffer&&!j.buffer.isFirstChange()||j.tolerance&&!j.tolerance.isFirstChange()||j.cluster&&!j.cluster.isFirstChange()||j.clusterRadius&&!j.clusterRadius.isFirstChange()||j.clusterMaxZoom&&!j.clusterMaxZoom.isFirstChange()||j.clusterMinPoints&&!j.clusterMinPoints.isFirstChange()||j.clusterProperties&&!j.clusterProperties.isFirstChange()||j.lineMetrics&&!j.lineMetrics.isFirstChange()||j.generateId&&!j.generateId.isFirstChange()||j.promoteId&&!j.promoteId.isFirstChange()||j.filter&&!j.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),j.data&&!j.data.isFirstChange())){const Fe=this.mapService.getSource(this.id);if(void 0===Fe)return;Fe.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(j){var Fe=this;return(0,o.Z)(function*(){const Yt=Fe.mapService.getSource(Fe.id);return Fe.zone.run((0,o.Z)(function*(){return new Promise((ut,It)=>{Yt.getClusterExpansionZoom(j,(rt,Vt)=>{rt?It(rt):ut(Vt)})})}))})()}getClusterChildren(j){var Fe=this;return(0,o.Z)(function*(){const Yt=Fe.mapService.getSource(Fe.id);return Fe.zone.run((0,o.Z)(function*(){return new Promise((ut,It)=>{Yt.getClusterChildren(j,(rt,Vt)=>{rt?It(rt):ut(Vt)})})}))})()}getClusterLeaves(j,Fe,Yt){var ut=this;return(0,o.Z)(function*(){const It=ut.mapService.getSource(ut.id);return ut.zone.run((0,o.Z)(function*(){return new Promise((rt,Vt)=>{It.getClusterLeaves(j,Fe,Yt,(di,hi)=>{di?Vt(di):rt(hi)})})}))})()}_addFeature(j){this.data.features.push(j),this.updateFeatureData.next(null)}_removeFeature(j){const Fe=this.data,Yt=Fe.features.indexOf(j);Yt>-1&&Fe.features.splice(Yt,1),this.updateFeatureData.next(null)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const Fe=this.updateFeatureData.pipe((0,Be.b)(0)).subscribe(()=>{const Yt=this.mapService.getSource(this.id);void 0!==Yt&&Yt.setData(this.data)});this.sub.add(Fe),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||qt)(O.Y36(wn),O.Y36(O.R0b))};static#t=this.\u0275cmp=O.Xpm({type:qt,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class On{constructor(j){this.GeoJSONSourceComponent=j,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(j){this.feature.geometry.coordinates=j,this.GeoJSONSourceComponent.updateFeatureData.next(null)}static#e=this.\u0275fac=function(Fe){return new(Fe||On)(O.Y36((0,O.Gpc)(()=>qt)))};static#t=this.\u0275cmp=O.Xpm({type:On,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class Nn{constructor(j,Fe,Yt){this.mapService=j,this.ngZone=Fe,this.featureComponent=Yt,this.featureDragStart=new O.vpe,this.featureDragEnd=new O.vpe,this.featureDrag=new O.vpe,this.dragStart=new O.vpe,this.dragEnd=new O.vpe,this.drag=new O.vpe,this.sub=new i.w0}ngOnInit(){let j,Fe,Yt;if(this.warnDeprecatedOutputs(),!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(j=this.layer.layerMouseEnter,Fe=this.layer.layerMouseLeave,Yt=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(j,Fe,Yt)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(j,Fe,Yt){let ut=!1,It=!1;this.mapService.mapCreated$.subscribe(()=>{const rt=(0,q.R)(this.mapService.mapInstance,"mouseup"),Vt=j.pipe((0,Ke.h)(()=>!ut),(0,Ke.h)(bi=>this.filterFeature(bi)),(0,Je.b)(()=>{It=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,De.w)(()=>(0,q.R)(this.mapService.mapInstance,"mousedown").pipe((0,gt.R)(Fe)))),di=Vt.pipe((0,De.w)(()=>(0,q.R)(this.mapService.mapInstance,"mousemove").pipe((0,gt.R)(rt)))),hi=Vt.pipe((0,De.w)(()=>rt.pipe((0,lt.q)(1))));this.sub.add(Vt.subscribe(bi=>{ut=!0,(this.featureDragStart.observed||this.dragStart.observed)&&this.ngZone.run(()=>{this.featureDragStart.emit(bi),this.dragStart.emit(bi)})})),this.sub.add(di.subscribe(bi=>{Yt([bi.lngLat.lng,bi.lngLat.lat]),(this.featureDrag.observed||this.drag.observed)&&this.ngZone.run(()=>{this.featureDrag.emit(bi),this.drag.emit(bi)})})),this.sub.add(hi.subscribe(bi=>{ut=!1,(this.featureDragEnd.observed||this.dragEnd.observed)&&this.ngZone.run(()=>{this.featureDragEnd.emit(bi),this.dragEnd.emit(bi)}),It||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(Fe.pipe((0,Je.b)(()=>It=!1),(0,Ke.h)(()=>!ut)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(j){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(j.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}warnDeprecatedOutputs(){const j=ln.bind(void 0,Nn.name);this.dragStart.observed&&j("dragStart","featureDragStart"),this.dragEnd.observed&&j("dragEnd","featureDragEnd"),this.drag.observed&&j("drag","featureDrag")}static#e=this.\u0275fac=function(Fe){return new(Fe||Nn)(O.Y36(wn),O.Y36(O.R0b),O.Y36(On,9))};static#t=this.\u0275dir=O.lG2({type:Nn,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"}})}class Ui{constructor(j,Fe){this.mapService=j,this.zone=Fe,this.imageError=new O.vpe,this.imageLoaded=new O.vpe,this.error=new O.vpe,this.loaded=new O.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,De.w)(()=>(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,je.O)(void 0),(0,Ke.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(j){(j.data&&!j.data.isFirstChange()||j.options&&!j.options.isFirstChange()||j.url&&!j.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var j=this;return(0,o.Z)(function*(){if(j.isAdding=!0,j.data)j.mapService.addImage(j.id,j.data,j.options),j.isAdded=!0,j.isAdding=!1;else if(j.url)try{yield j.mapService.loadAndAddImage(j.id,j.url,j.options),j.isAdded=!0,j.isAdding=!1,j.zone.run(()=>{j.imageLoaded.emit(),j.loaded.emit()})}catch(Fe){j.zone.run(()=>{j.imageError.emit(Fe),j.error.emit(Fe)})}})()}warnDeprecatedOutputs(){const j=ln.bind(void 0,Ui.name);this.error.observed&&j("error","imageError"),this.loaded.observed&&j("loaded","imageLoaded")}static#e=this.\u0275fac=function(Fe){return new(Fe||Ui)(O.Y36(wn),O.Y36(O.R0b))};static#t=this.\u0275cmp=O.Xpm({type:Ui,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded",error:"error",loaded:"loaded"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2})}class Yn{get mapInstance(){return this.mapService.mapInstance}constructor(j){this.mapService=j,this.movingMethod="flyTo",this.mapResize=new O.vpe,this.mapRemove=new O.vpe,this.mapMouseDown=new O.vpe,this.mapMouseUp=new O.vpe,this.mapMouseMove=new O.vpe,this.mapClick=new O.vpe,this.mapDblClick=new O.vpe,this.mapMouseOver=new O.vpe,this.mapMouseOut=new O.vpe,this.mapContextMenu=new O.vpe,this.mapTouchStart=new O.vpe,this.mapTouchEnd=new O.vpe,this.mapTouchMove=new O.vpe,this.mapTouchCancel=new O.vpe,this.mapWheel=new O.vpe,this.moveStart=new O.vpe,this.move=new O.vpe,this.moveEnd=new O.vpe,this.mapDragStart=new O.vpe,this.mapDrag=new O.vpe,this.mapDragEnd=new O.vpe,this.zoomStart=new O.vpe,this.zoomEvt=new O.vpe,this.zoomEnd=new O.vpe,this.rotateStart=new O.vpe,this.rotate=new O.vpe,this.rotateEnd=new O.vpe,this.pitchStart=new O.vpe,this.pitchEvt=new O.vpe,this.pitchEnd=new O.vpe,this.boxZoomStart=new O.vpe,this.boxZoomEnd=new O.vpe,this.boxZoomCancel=new O.vpe,this.webGlContextLost=new O.vpe,this.webGlContextRestored=new O.vpe,this.mapLoad=new O.vpe,this.mapCreate=new O.vpe,this.idle=new O.vpe,this.render=new O.vpe,this.mapError=new O.vpe,this.data=new O.vpe,this.styleData=new O.vpe,this.sourceData=new O.vpe,this.dataLoading=new O.vpe,this.styleDataLoading=new O.vpe,this.sourceDataLoading=new O.vpe,this.styleImageMissing=new O.vpe,this.resize=new O.vpe,this.remove=new O.vpe,this.mouseDown=new O.vpe,this.mouseUp=new O.vpe,this.mouseMove=new O.vpe,this.click=new O.vpe,this.dblClick=new O.vpe,this.mouseOver=new O.vpe,this.mouseOut=new O.vpe,this.contextMenu=new O.vpe,this.touchStart=new O.vpe,this.touchEnd=new O.vpe,this.touchMove=new O.vpe,this.touchCancel=new O.vpe,this.wheel=new O.vpe,this.dragStart=new O.vpe,this.drag=new O.vpe,this.dragEnd=new O.vpe,this.load=new O.vpe,this.error=new O.vpe}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.mapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,projection:this.projection},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(j){var Fe=this;return(0,o.Z)(function*(){yield(0,de.n)(Fe.mapService.mapCreated$),j.cursorStyle&&!j.cursorStyle.isFirstChange()&&Fe.mapService.changeCanvasCursor(j.cursorStyle.currentValue),j.projection&&!j.projection.isFirstChange()&&Fe.mapService.updateProjection(j.projection.currentValue),j.minZoom&&!j.minZoom.isFirstChange()&&Fe.mapService.updateMinZoom(j.minZoom.currentValue),j.maxZoom&&!j.maxZoom.isFirstChange()&&Fe.mapService.updateMaxZoom(j.maxZoom.currentValue),j.minPitch&&!j.minPitch.isFirstChange()&&Fe.mapService.updateMinPitch(j.minPitch.currentValue),j.maxPitch&&!j.maxPitch.isFirstChange()&&Fe.mapService.updateMaxPitch(j.maxPitch.currentValue),j.renderWorldCopies&&!j.renderWorldCopies.isFirstChange()&&Fe.mapService.updateRenderWorldCopies(j.renderWorldCopies.currentValue),j.scrollZoom&&!j.scrollZoom.isFirstChange()&&Fe.mapService.updateScrollZoom(j.scrollZoom.currentValue),j.dragRotate&&!j.dragRotate.isFirstChange()&&Fe.mapService.updateDragRotate(j.dragRotate.currentValue),j.touchPitch&&!j.touchPitch.isFirstChange()&&Fe.mapService.updateTouchPitch(j.touchPitch.currentValue),j.touchZoomRotate&&!j.touchZoomRotate.isFirstChange()&&Fe.mapService.updateTouchZoomRotate(j.touchZoomRotate.currentValue),j.doubleClickZoom&&!j.doubleClickZoom.isFirstChange()&&Fe.mapService.updateDoubleClickZoom(j.doubleClickZoom.currentValue),j.keyboard&&!j.keyboard.isFirstChange()&&Fe.mapService.updateKeyboard(j.keyboard.currentValue),j.dragPan&&!j.dragPan.isFirstChange()&&Fe.mapService.updateDragPan(j.dragPan.currentValue),j.boxZoom&&!j.boxZoom.isFirstChange()&&Fe.mapService.updateBoxZoom(j.boxZoom.currentValue),j.style&&!j.style.isFirstChange()&&Fe.mapService.updateStyle(j.style.currentValue),j.maxBounds&&!j.maxBounds.isFirstChange()&&Fe.mapService.updateMaxBounds(j.maxBounds.currentValue),j.fitBounds&&j.fitBounds.currentValue&&!j.fitBounds.isFirstChange()&&Fe.mapService.fitBounds(j.fitBounds.currentValue,Fe.fitBoundsOptions),j.fitScreenCoordinates&&j.fitScreenCoordinates.currentValue&&((Fe.center||Fe.zoom||Fe.pitch||Fe.fitBounds)&&j.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),Fe.mapService.fitScreenCoordinates(j.fitScreenCoordinates.currentValue,Fe.bearing?Fe.bearing[0]:0,Fe.movingOptions)),!Fe.centerWithPanTo||!j.center||j.center.isFirstChange()||j.zoom||j.bearing||j.pitch?(j.center&&!j.center.isFirstChange()||j.zoom&&!j.zoom.isFirstChange()||j.bearing&&!j.bearing.isFirstChange()&&!j.fitScreenCoordinates||j.pitch&&!j.pitch.isFirstChange())&&Fe.mapService.move(Fe.movingMethod,Fe.movingOptions,j.zoom&&Fe.zoom?Fe.zoom[0]:void 0,j.center?Fe.center:void 0,j.bearing&&Fe.bearing?Fe.bearing[0]:void 0,j.pitch&&Fe.pitch?Fe.pitch[0]:void 0):Fe.mapService.panTo(Fe.center,Fe.panToOptions)})()}warnDeprecatedOutputs(){const j=ln.bind(void 0,Yn.name);this.resize.observed&&j("resize","mapResize"),this.remove.observed&&j("remove","mapRemove"),this.mouseDown.observed&&j("mouseDown","mapMouseDown"),this.mouseUp.observed&&j("mouseUp","mapMouseUp"),this.mouseMove.observed&&j("mouseMove","mapMouseMove"),this.click.observed&&j("click","mapClick"),this.dblClick.observed&&j("dblClick","mapDblClick"),this.mouseOver.observed&&j("mouseOver","mapMouseOver"),this.mouseOut.observed&&j("mouseOut","mapMouseOut"),this.contextMenu.observed&&j("contextMenu","mapContextMenu"),this.touchStart.observed&&j("touchStart","mapTouchStart"),this.touchEnd.observed&&j("touchEnd","mapTouchEnd"),this.touchMove.observed&&j("touchMove","mapTouchMove"),this.touchCancel.observed&&j("touchCancel","mapTouchCancel"),this.wheel.observed&&j("wheel","mapWheel"),this.dragStart.observed&&j("dragStart","mapDragStart"),this.drag.observed&&j("drag","mapDrag"),this.dragEnd.observed&&j("dragEnd","mapDragEnd"),this.load.observed&&j("load","mapLoad"),this.error.observed&&j("error","mapError")}static#e=this.\u0275fac=function(Fe){return new(Fe||Yn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:Yn,selectors:[["mgl-map"]],viewQuery:function(Fe,Yt){if(1&Fe&&O.Gf(at,7),2&Fe){let ut;O.iGM(ut=O.CRH())&&(Yt.mapContainer=ut.first)}},inputs:{accessToken:"accessToken",collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",projection:"projection",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",mapCreate:"mapCreate",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[O._Bn([wn]),O.TTD],decls:2,vars:0,consts:[["container",""]],template:function(Fe,Yt){1&Fe&&O._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}class Gn{constructor(j){this.mapService=j,this.markerDragStart=new O.vpe,this.markerDragEnd=new O.vpe,this.markerDrag=new O.vpe,this.dragStart=new O.vpe,this.dragEnd=new O.vpe,this.drag=new O.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(j){j.lngLat&&!j.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),j.feature&&!j.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),j.draggable&&!j.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),j.popupShown&&!j.popupShown.isFirstChange()&&(j.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),j.pitchAlignment&&!j.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(j.pitchAlignment.currentValue),j.rotationAlignment&&!j.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(j.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd,dragStart:this.markerDragStart,drag:this.markerDrag,dragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(j){this.markerInstance.setLngLat(j)}warnDeprecatedOutputs(){const j=ln.bind(void 0,Gn.name);this.markerDragStart.observed&&j("dragStart","markerDragStart"),this.markerDragEnd.observed&&j("dragEnd","markerDragEnd"),this.markerDrag.observed&&j("drag","markerDrag")}static#e=this.\u0275fac=function(Fe){return new(Fe||Gn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:Gn,selectors:[["mgl-marker"]],viewQuery:function(Fe,Yt){if(1&Fe&&O.Gf(dt,7),2&Fe){let ut;O.iGM(ut=O.CRH())&&(Yt.content=ut.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"},features:[O.TTD],ngContentSelectors:ct,decls:3,vars:2,consts:[["content",""]],template:function(Fe,Yt){1&Fe&&(O.F$t(),O.TgZ(0,"div",null,0),O.Hsn(2),O.qZA()),2&Fe&&O.Tol(Yt.className)},encapsulation:2,changeDetection:0})}class Xn{static#e=this.\u0275fac=function(Fe){return new(Fe||Xn)};static#t=this.\u0275dir=O.lG2({type:Xn,selectors:[["ng-template","mglPoint",""]]})}class mi{static#e=this.\u0275fac=function(Fe){return new(Fe||mi)};static#t=this.\u0275dir=O.lG2({type:mi,selectors:[["ng-template","mglClusterPoint",""]]})}let pi=0;class Mn{constructor(j,Fe,Yt){this.mapService=j,this.ChangeDetectorRef=Fe,this.zone=Yt,this.layerId="mgl-markers-for-clusters-"+pi++,this.sub=new i.w0}ngAfterContentInit(){const Fe=this.mapService.mapCreated$.pipe((0,De.w)(()=>(0,q.R)(this.mapService.mapInstance,"data").pipe((0,Ke.h)(Yt=>Yt.sourceId===this.source&&"metadata"!==Yt.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,De.w)(()=>(0,we.T)((0,q.R)(this.mapService.mapInstance,"move"),(0,q.R)(this.mapService.mapInstance,"moveend")).pipe((0,je.O)(void 0)))).subscribe(()=>{this.zone.run(()=>{this.updateCluster()})});this.sub.add(Fe)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(j,Fe){return Fe.id}updateCluster(){const j={layers:[this.layerId]};this.pointTpl||(j.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(j),this.ChangeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(Fe){return new(Fe||Mn)(O.Y36(wn),O.Y36(O.sBO),O.Y36(O.R0b))};static#t=this.\u0275cmp=O.Xpm({type:Mn,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(Fe,Yt,ut){if(1&Fe&&(O.Suo(ut,Xn,5,O.Rgc),O.Suo(ut,mi,5,O.Rgc)),2&Fe){let It;O.iGM(It=O.CRH())&&(Yt.pointTpl=It.first),O.iGM(It=O.CRH())&&(Yt.clusterPointTpl=It.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(Fe,Yt){1&Fe&&(O._UZ(0,"mgl-layer",0),O.YNc(1,bn,3,2,"ng-container",1)),2&Fe&&(O.Q6J("id",Yt.layerId)("source",Yt.source)("paint",O.DdM(5,Kt)),O.xp6(1),O.Q6J("ngForOf",Yt.clusterPoints)("ngForTrackBy",Yt.trackByClusterPoint))},dependencies:[wt.sg,wt.O5,wt.tP,fn,Gn],encapsulation:2,changeDetection:0})}class Pn{constructor(j){this.mapService=j,this.popupClose=new O.vpe,this.popupOpen=new O.vpe,this.close=new O.vpe,this.open=new O.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(j){if(j.lngLat&&!j.lngLat.isFirstChange()||j.feature&&!j.feature.isFirstChange()){const Fe=j.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const Yt=this.createPopup();this.mapService.addPopupToMap(Yt,Fe,this.popupInstance.isOpen()),this.popupInstance=Yt}if(j.marker&&!j.marker.isFirstChange()){const Fe=j.marker.previousValue;Fe.markerInstance&&this.mapService.removePopupFromMarker(Fe.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}j.offset&&!j.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{open:this.open,close:this.close,popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(j){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(j,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,j)}})}warnDeprecatedOutputs(){const j=ln.bind(void 0,Pn.name);this.close.observed&&j("close","popupClose"),this.open.observed&&j("open","popupOpen")}static#e=this.\u0275fac=function(Fe){return new(Fe||Pn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:Pn,selectors:[["mgl-popup"]],viewQuery:function(Fe,Yt){if(1&Fe&&O.Gf(dt,7),2&Fe){let ut;O.iGM(ut=O.CRH())&&(Yt.content=ut.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen",close:"close",open:"open"},features:[O.TTD],ngContentSelectors:ct,decls:3,vars:0,consts:[["content",""]],template:function(Fe,Yt){1&Fe&&(O.F$t(),O.TgZ(0,"div",null,0),O.Hsn(2),O.qZA())},encapsulation:2,changeDetection:0})}class mn{constructor(j){this.mapService=j,this.sourceAdded=!1,this.sub=new i.w0}ngOnInit(){const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){if(this.sourceAdded)if(j.canvas&&!j.canvas.isFirstChange()||j.animate&&!j.animate.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(j.coordinates&&!j.coordinates.isFirstChange()){const Fe=this.mapService.getSource(this.id);if(void 0===Fe)return;Fe.setCoordinates(this.coordinates)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:"canvas",coordinates:this.coordinates,canvas:this.canvas,animate:this.animate}),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||mn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:mn,selectors:[["mgl-canvas-source"]],inputs:{id:"id",coordinates:"coordinates",canvas:"canvas",animate:"animate"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class kn{constructor(j){this.mapService=j}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(j){if(void 0===this.sourceId)return;const Fe=this.mapService.getSource(this.sourceId);void 0!==Fe&&Fe.updateImage({url:void 0===j.url?void 0:this.url,coordinates:void 0===j.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}static#e=this.\u0275fac=function(Fe){return new(Fe||kn)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:kn,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class ii{constructor(j){this.mapService=j,this.type="raster-dem",this.sourceAdded=!1,this.sub=new i.w0}ngOnInit(){const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){this.sourceAdded&&(j.url&&!j.url.isFirstChange()||j.tiles&&!j.tiles.isFirstChange()||j.bounds&&!j.bounds.isFirstChange()||j.minzoom&&!j.minzoom.isFirstChange()||j.maxzoom&&!j.maxzoom.isFirstChange()||j.tileSize&&!j.tileSize.isFirstChange()||j.attribution&&!j.attribution.isFirstChange()||j.encoding&&!j.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||ii)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:ii,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class $n{constructor(j){this.mapService=j,this.type="raster",this.sourceAdded=!1,this.sub=new i.w0}ngOnInit(){const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){this.sourceAdded&&(j.url&&!j.url.isFirstChange()||j.tiles&&!j.tiles.isFirstChange()||j.bounds&&!j.bounds.isFirstChange()||j.minzoom&&!j.minzoom.isFirstChange()||j.maxzoom&&!j.maxzoom.isFirstChange()||j.tileSize&&!j.tileSize.isFirstChange()||j.scheme&&!j.scheme.isFirstChange()||j.attribution&&!j.attribution.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,scheme:this.scheme,attribution:this.attribution}),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||$n)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:$n,selectors:[["mgl-raster-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",scheme:"scheme",attribution:"attribution"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class mr{constructor(j){this.mapService=j,this.type="vector",this.sourceAdded=!1,this.sub=new i.w0}ngOnInit(){const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){if(this.sourceAdded)if(j.bounds&&!j.bounds.isFirstChange()||j.scheme&&!j.scheme.isFirstChange()||j.minzoom&&!j.minzoom.isFirstChange()||j.maxzoom&&!j.maxzoom.isFirstChange()||j.attribution&&!j.attribution.isFirstChange()||j.promoteId&&!j.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(j.url&&!j.url.isFirstChange()||j.tiles&&!j.tiles.isFirstChange()){const Fe=this.mapService.getSource(this.id);if(void 0===Fe)return;j.url&&this.url&&Fe.setUrl(this.url),j.tiles&&this.tiles&&Fe.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||mr)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:mr,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class gr{constructor(j){this.mapService=j,this.sourceAdded=!1,this.sub=new i.w0}ngOnInit(){const j=this.mapService.mapLoaded$.subscribe(()=>{this.init();const Fe=(0,q.R)(this.mapService.mapInstance,"styledata").pipe((0,Ke.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(Fe)});this.sub.add(j)}ngOnChanges(j){if(this.sourceAdded)if(j.urls&&!j.urls.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(j.coordinates&&!j.coordinates.isFirstChange()){const Fe=this.mapService.getSource(this.id);if(void 0===Fe)return;Fe.setCoordinates(this.coordinates)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:"video",urls:this.urls,coordinates:this.coordinates}),this.sourceAdded=!0}static#e=this.\u0275fac=function(Fe){return new(Fe||gr)(O.Y36(wn))};static#t=this.\u0275cmp=O.Xpm({type:gr,selectors:[["mgl-video-source"]],inputs:{id:"id",urls:"urls",coordinates:"coordinates"},features:[O.TTD],decls:0,vars:0,template:function(Fe,Yt){},encapsulation:2,changeDetection:0})}class Mo{static withConfig(j){return{ngModule:Mo,providers:[{provide:Zn,useValue:j.accessToken}]}}static#e=this.\u0275fac=function(Fe){return new(Fe||Mo)};static#t=this.\u0275mod=O.oAB({type:Mo});static#n=this.\u0275inj=O.cJS({imports:[wt.ez]})}},5861:(tn,nt,N)=>{"use strict";function o(u,fe,Y,i,q,de,we){try{var Ve=u[de](we),De=Ve.value}catch(it){return void Y(it)}Ve.done?fe(De):Promise.resolve(De).then(i,q)}function O(u){return function(){var fe=this,Y=arguments;return new Promise(function(i,q){var de=u.apply(fe,Y);function we(De){o(de,i,q,we,Ve,"next",De)}function Ve(De){o(de,i,q,we,Ve,"throw",De)}we(void 0)})}}N.d(nt,{Z:()=>O})},7582:(tn,nt,N)=>{"use strict";function it(en,Ot,Jt,ln){return new(Jt||(Jt=Promise))(function(qt,On){function Nn(Gn){try{Yn(ln.next(Gn))}catch(Xn){On(Xn)}}function Ui(Gn){try{Yn(ln.throw(Gn))}catch(Xn){On(Xn)}}function Yn(Gn){Gn.done?qt(Gn.value):function fn(qt){return qt instanceof Jt?qt:new Jt(function(On){On(qt)})}(Gn.value).then(Nn,Ui)}Yn((ln=ln.apply(en,Ot||[])).next())})}function ct(en){return this instanceof ct?(this.v=en,this):new ct(en)}function at(en,Ot,Jt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fn,ln=Jt.apply(en,Ot||[]),qt=[];return fn={},On("next"),On("throw"),On("return"),fn[Symbol.asyncIterator]=function(){return this},fn;function On(mi){ln[mi]&&(fn[mi]=function(pi){return new Promise(function(Mn,Pn){qt.push([mi,pi,Mn,Pn])>1||Nn(mi,pi)})})}function Nn(mi,pi){try{!function Ui(mi){mi.value instanceof ct?Promise.resolve(mi.value.v).then(Yn,Gn):Xn(qt[0][2],mi)}(ln[mi](pi))}catch(Mn){Xn(qt[0][3],Mn)}}function Yn(mi){Nn("next",mi)}function Gn(mi){Nn("throw",mi)}function Xn(mi,pi){mi(pi),qt.shift(),qt.length&&Nn(qt[0][0],qt[0][1])}}function ht(en){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Jt,Ot=en[Symbol.asyncIterator];return Ot?Ot.call(en):(en=function Je(en){var Ot="function"==typeof Symbol&&Symbol.iterator,Jt=Ot&&en[Ot],ln=0;if(Jt)return Jt.call(en);if(en&&"number"==typeof en.length)return{next:function(){return en&&ln>=en.length&&(en=void 0),{value:en&&en[ln++],done:!en}}};throw new TypeError(Ot?"Object is not iterable.":"Symbol.iterator is not defined.")}(en),Jt={},ln("next"),ln("throw"),ln("return"),Jt[Symbol.asyncIterator]=function(){return this},Jt);function ln(qt){Jt[qt]=en[qt]&&function(On){return new Promise(function(Nn,Ui){!function fn(qt,On,Nn,Ui){Promise.resolve(Ui).then(function(Yn){qt({value:Yn,done:Nn})},On)}(Nn,Ui,(On=en[qt](On)).done,On.value)})}}}N.d(nt,{FC:()=>at,KL:()=>ht,mG:()=>it,qq:()=>ct}),"function"==typeof SuppressedError&&SuppressedError}},tn=>{tn(tn.s=1067)}]);