"use strict";(self.webpackChunkcodal_analysis=self.webpackChunkcodal_analysis||[]).push([[237],{8237:(Z,d,i)=>{i.r(d),i.d(d,{SigninModule:()=>c});var g=i(6895),p=i(20),l=i(3959),h=i(9287),f=i(2017),t=i(1571),m=i(7109),C=i(1481),s=i(4006),y=i(8008),v=i(9789);class r{constructor(n,a,e,o){this.router=n,this.sanitizer=a,this.securityService=e,this.identityManager=o,this.signin=new p.mp,this.showPassword=!1}ngOnInit(){this.getCaptcha()}_onShowPasswoedClick(){this.showPassword=!this.showPassword}getCaptcha(){this.securityService.getCaptcha().subscribe(n=>{this.captchaUrl=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(n))})}onSubmitClick(){this.securityService.signIn(this.signin).subscribe({next:n=>{console.log(n),this.identityManager.set(new f.O(n.id,n.token,n.displayName,n.permissions)),this.securityService.setUserToken(n.token),this.router.navigateByUrl("/"),this.securityService.setAuthenticateUser()},error:n=>{this.getCaptcha()}})}static#t=this.\u0275fac=function(a){return new(a||r)(t.Y36(m.F0),t.Y36(C.H7),t.Y36(h.I),t.Y36(l.cq))};static#n=this.\u0275cmp=t.Xpm({type:r,selectors:[["moneyon-signin"]],decls:22,vars:9,consts:[[1,"text-center"],[1,"text-center","mt-3"],["data-testid","form",1,"mt-5",3,"submit"],["form","ngForm"],["label","\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647"],["name","userName","mtsMobileNumber","","required","","data-testid","username",1,"form-control","text-end",3,"ngModel","ngModelChange"],["label","\u0631\u0645\u0632 \u0639\u0628\u0648\u0631"],[1,"input-group"],["name","password","autocomplete","on","required","",1,"form-control","direction-to-right","text-start",3,"type","ngModel","ngModelChange"],[1,"input-group-text","cursor-pointer",3,"click"],["label","\u06a9\u062f \u0627\u0645\u0646\u06cc\u062a\u06cc",1,"mt-3"],["type","text","id","captcha","name","captcha","placeholder","\u06a9\u062f \u0627\u0645\u0646\u06cc\u062a\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","tabindex","2","minlength","5","maxlength","5",1,"form-control",3,"ngModel","required","ngModelChange"],["id","basic-addon1",1,"input-group-text","p-0"],["alt","captcha","id","dntCaptchaImg",3,"src"],["type","button",1,"input-group-text",3,"click"],[1,"fa-solid","fa-rotate-right"],[1,"d-grid","mt-2"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(a,e){if(1&a&&(t.TgZ(0,"h4",0),t._uU(1,"\u0648\u0631\u0648\u062f \u06a9\u0627\u0631\u0628\u0631\u0627\u0646"),t.qZA(),t._UZ(2,"div",1),t.TgZ(3,"form",2,3),t.NdJ("submit",function(){return e.onSubmitClick()}),t.TgZ(5,"mts-form-field",4)(6,"input",5),t.NdJ("ngModelChange",function(u){return e.signin.userName=u}),t.qZA()(),t.TgZ(7,"mts-form-field",6)(8,"div",7)(9,"input",8),t.NdJ("ngModelChange",function(u){return e.signin.password=u}),t.qZA(),t.TgZ(10,"span",9),t.NdJ("click",function(){return e._onShowPasswoedClick()}),t._UZ(11,"i"),t.qZA()()(),t.TgZ(12,"mts-form-field",10)(13,"div",7)(14,"input",11),t.NdJ("ngModelChange",function(u){return e.signin.captchaValue=u}),t.qZA(),t.TgZ(15,"span",12),t._UZ(16,"img",13),t.qZA(),t.TgZ(17,"span",14),t.NdJ("click",function(){return e.getCaptcha()}),t._UZ(18,"i",15),t.qZA()()(),t.TgZ(19,"div",16)(20,"button",17),t._uU(21,"\u0648\u0631\u0648\u062f \u0628\u0647 \u0633\u0627\u0645\u0627\u0646\u0647"),t.qZA()()()),2&a){const o=t.MAs(4);t.xp6(6),t.Q6J("ngModel",e.signin.userName),t.xp6(3),t.Q6J("type",e.showPassword?"text":"password")("ngModel",e.signin.password),t.xp6(2),t.Tol(e.showPassword?"fa-solid fa-eye":"fa-solid fa-eye-slash"),t.xp6(3),t.Q6J("ngModel",e.signin.captchaValue)("required",!0),t.xp6(2),t.Q6J("src",e.captchaUrl,t.LSH),t.xp6(4),t.Q6J("disabled",o.invalid)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.On,s.F,y.h,v.s]})}class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#n=this.\u0275mod=t.oAB({type:c});static#e=this.\u0275inj=t.cJS({imports:[g.ez,s.u5,l.kx,l.n4,m.Bz.forChild([{path:"",component:r}])]})}}}]);