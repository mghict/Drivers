(self.webpackChunkcodal_analysis=self.webpackChunkcodal_analysis||[]).push([[179],{2017:(At,Le,k)=>{"use strict";k.d(Le,{O:()=>V,S:()=>t});var o=k(1481);class V extends o.s1{constructor(te,le,U,we,de){super(de),this.id=te,this.token=le,this.displayName=U}}const t="atd"},925:(At,Le,k)=>{"use strict";k.d(Le,{y:()=>o});var o=(()=>{return(V=o||(o={})).MineView="200",V.MineCreate="201",V.MineEdit="202",V.MineDelete="203",V.AutoBrandView="210",V.AutoBrandCreate="211",V.AutoBrandEdit="212",V.AutoBrandDelete="213",V.AutoModelView="220",V.AutoModelCreate="221",V.AutoModelEdit="222",V.AutoModelDelete="223",V.AutoView="230",V.AutoCreate="231",V.AutoEdit="232",V.AutoDelete="233",V.DriverView="240",V.DriverCreate="241",V.DriverEdit="242",V.DriverDelete="243",V.PersonView="250",V.PersonCreate="251",V.PersonEdit="252",V.PersonDelete="253",V.ProvinceView="260",V.ProvinceCreate="261",V.ProvinceEdit="262",V.ProvinceDelete="263",V.CityView="264",V.CityCreate="265",V.CityEdit="266",V.CityDelete="267",V.MaterialView="270",V.MaterialCreate="271",V.MaterialEdit="272",V.MaterialDelete="273",V.AutoHistoryReportView="300",V.ProvinceReportView="301",V.CityReportView="302",V.MineReportView="303",o;var V})()},107:(At,Le,k)=>{"use strict";k.d(Le,{_:()=>ie});var o=k(1481),V=k(1571),t=k(8136);class ie{constructor(le,U){this.router=le,this.userStore=U}canActivate(le,U){return null==this.userStore.get()||this.router.createUrlTree(["user","dashboard"])}static#e=this.\u0275fac=function(U){return new(U||ie)(V.LFG(t.F0),V.LFG(o.cq))};static#t=this.\u0275prov=V.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}},7910:(At,Le,k)=>{"use strict";k.d(Le,{sK:()=>Be,IZ:()=>Zn,OW:()=>Er,n:()=>jn,cK:()=>wn,ug:()=>In,uD:()=>ce,vx:()=>je,gq:()=>Se,u:()=>de,UY:()=>tt,Zp:()=>gn,Cf:()=>St,Ip:()=>V,tB:()=>ln,Ft:()=>Ei.F,ld:()=>Qe,CU:()=>ze,Wc:()=>Kt,CO:()=>Zi.C,DB:()=>Ve,fU:()=>Qn,Nj:()=>qt.N,Il:()=>sr.I,jw:()=>t,hs:()=>bt,hb:()=>De,fz:()=>Ot});var o=k(945),V=(()=>{return(Jt=V||(V={}))[Jt.DriverPicture=0]="DriverPicture",Jt[Jt.AutoPicture=1]="AutoPicture",V;var Jt})(),t=(()=>{return(Jt=t||(t={})).SUCCESSFUL_CREATING="\u062b\u0628\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",Jt.SUCCESSFUL_EDITING="\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",Jt.SUCCESSFUL_DELETING="\u062d\u0630\u0641 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",Jt.SUCCESSFUL_OPERATION="\u0639\u0645\u0644\u06cc\u0627\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f.",t;var Jt})(),ie=k(727),te=k(1481),le=k(1571),U=k(8136),we=k(4006);class de{constructor(xt,Gt,bn){this._router=xt,this._toastService=Gt,this._fb=bn}get router(){return this._router}get toastService(){return this._toastService}get formBuilderService(){return this._fb}static#e=this.\u0275fac=function(Gt){return new(Gt||de)(le.LFG(U.F0),le.LFG(te.kl),le.LFG(we.qu))};static#t=this.\u0275prov=le.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"})}var Pe=k(925);class Se{constructor(xt,Gt){this.baseService=xt,this.childService=Gt,this.nextTitle=o.o.dictionary.searchButtonTitle,this.backTitle=o.o.dictionary.clearButtonTitle,this.defaultSelection=o.o.dictionary.defaultSelectOption,this.pleaseSelect=o.o.dictionary.pleaseSelect,this.permision=Pe.y,this.filter=[],this._subscription=new ie.w0,this.toggleSearchBox=!1,this._dataSource=new te.P3([]),this.sucessDeleteObserver={next:bn=>{this.toastService.show(t.SUCCESSFUL_DELETING,{style:"success"}),this.search()},error:bn=>{},complete:()=>{}},this.searchModel={}}ngOnDestroy(){this.resetSubscriptions()}removeAndPushToFilterArr(xt){if(console.log(xt),xt.value){const Gt=this.filter.findIndex(bn=>bn.fieldName===xt.fieldName&&bn.operator===xt.operator);-1!==Gt&&this.filter.splice(Gt,1),this.filter.push({fieldName:xt.fieldName,value:xt.value,operator:xt.operator})}}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(xt){this._subscription.add(xt)}set dataSource(xt){this._dataSource=xt}get dataSource(){return this._dataSource}set searchModel(xt){this._searchModel=xt}get searchModel(){return this._searchModel}clearSearchForm(){this.searchModel={}}clearAndRefreshSearchForm(){this.searchModel={},this.search()}clearDataSource(){this.dataSource=new te.P3([])}reload(){this.search()}cleanData(xt){for(const Gt in xt)"undefined"===xt[Gt]&&delete xt[Gt];return xt}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}static#e=this.\u0275fac=function(Gt){le.$Z()};static#t=this.\u0275prov=le.Yz7({token:Se,factory:Se.\u0275fac})}const Ye=(Jt,xt)=>xt.id;class je{constructor(xt){this.baseService=xt,this.nextTitle=o.o.dictionary.submitButtonTitle,this.backTitle=o.o.dictionary.backButtonTitle,this.defaultSelection=o.o.dictionary.defaultSelectOption,this.pleaseSelect=o.o.dictionary.pleaseSelect,this._subscription=new ie.w0,this.sucessObserver={next:Gt=>{this.toastService.show(t.SUCCESSFUL_CREATING,{style:"success"}),this.back()},error:Gt=>{},complete:()=>{}},this.trackByFn=Ye,this.formModel={}}ngOnDestroy(){this.resetSubscriptions()}findMode(){const xt=history.state;xt&&xt.mode&&(this.mode=xt.mode)}get isAddMode(){return"add"===this.mode}get isEditMode(){return"edit"===this.mode}get isShowMode(){return"show"===this.mode}setPropertyValue(xt,Gt,bn){xt[Gt]=bn}areAllPropsUndefined(xt){return Object.values(xt).every(Gt=>void 0===Gt)}areAllRequiredKeysAssigned(xt,Gt){return Gt.every(bn=>null!=xt[bn])}getRequiredKeys(xt){return Object.keys(xt).filter(Gt=>null!=xt[Gt])}filterObjectByKeyList(xt,Gt){return Object.keys(xt).reduce((bn,di)=>(Gt.includes(di)&&(bn[di]=xt[di]),bn),{})}resetSubscriptions(){this._subscription&&this._subscription.unsubscribe()}set anotherSubscription(xt){this._subscription.add(xt)}get router(){return this.baseService.router}get toastService(){return this.baseService.toastService}get formBuilderService(){return this.baseService.formBuilderService}static#e=this.\u0275fac=function(Gt){return new(Gt||je)(le.LFG(de))};static#t=this.\u0275prov=le.Yz7({token:je,factory:je.\u0275fac})}class ke{}class De{constructor(){this.role=new ke,this.provinces=[],this.mines=[]}}class ze{}class Qe{constructor(){this.roles=[]}}class tt{}class Ve{constructor(){this.cities=[]}}var Ne=k(2017);class Be{constructor(){this.balance=0,this.availableBalance=0}}class St{}class Kt{constructor(){this.location=new ze,this.materialIds=[]}}class wn{}class ln{}class jn{constructor(){this.autoModel=new wn,this.person=new ln,this.mine=new Kt}}class Zn{}var sr=k(9287),Ji=k(4004);class bt{constructor(xt,Gt,bn){this.securityService=xt,this.identityManager=Gt,this.router=bn}resolve(xt,Gt){return localStorage.getItem("token")?this.securityService.getUserIdentity().pipe((0,Ji.U)(bn=>(bn&&(console.log(bn),this.identityManager.set(new Ne.O(bn.personCode,bn.token,bn.displayName,bn.roles,bn.permissions))),!0))):(this.router.navigate(["access/signin"]),!1)}static#e=this.\u0275fac=function(Gt){return new(Gt||bt)(le.LFG(sr.I),le.LFG(te.cq),le.LFG(U.F0))};static#t=this.\u0275prov=le.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"})}var at=k(8702);class Vt extends at.e{constructor(xt){super(xt,"permission")}getCheckedItems(xt){const Gt=[];return xt.filter(bn=>bn.isChecked).forEach(bn=>{bn.permisionId&&Gt.push(bn.permisionId)}),Gt}static#e=this.\u0275fac=function(Gt){return new(Gt||Vt)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"root"})}var qt=k(3739);const _t="person";class Ot extends at.e{constructor(xt){super(xt,_t)}editPersonRole(xt){return this.http.put(_t+"/change-role",xt)}profile(){return this.http.get(_t+"/profile")}editProfile(xt){return this.http.put(_t+"/edit-profile",xt)}static#e=this.\u0275fac=function(Gt){return new(Gt||Ot)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Ot,factory:Ot.\u0275fac})}class Qn extends at.e{constructor(xt){super(xt,"province")}getCheckedItems(xt){const Gt=[];return xt.filter(bn=>bn.isChecked).forEach(bn=>{bn.id&&Gt.push(bn)}),Gt}static#e=this.\u0275fac=function(Gt){return new(Gt||Qn)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Qn,factory:Qn.\u0275fac,providedIn:"root"})}class gn extends at.e{constructor(xt){super(xt,"city")}static#e=this.\u0275fac=function(Gt){return new(Gt||gn)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:gn,factory:gn.\u0275fac,providedIn:"root"})}class Kn extends at.e{constructor(xt){super(xt,"report")}static#e=this.\u0275fac=function(Gt){return new(Gt||Kn)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Kn,factory:Kn.\u0275fac})}k(4853);const Zt="payment";class nn extends at.e{constructor(xt){super(xt,Zt)}getPayment(xt){return this.http.get(Zt+`/${xt}/payment-item`)}static#e=this.\u0275fac=function(Gt){return new(Gt||nn)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:nn,factory:nn.\u0275fac,providedIn:"root"})}const zt="purches";class Xt extends at.e{constructor(xt){super(xt,zt)}uploadDocument(xt){return this.http.post(`${zt}/receipt-image`,xt,{contentType:"multipart/form-data",reportProgress:!0,observe:"events"})}static#e=this.\u0275fac=function(Gt){return new(Gt||Xt)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Xt,factory:Xt.\u0275fac,providedIn:"root"})}class ui extends at.e{constructor(xt){super(xt,"subscription")}static#e=this.\u0275fac=function(Gt){return new(Gt||ui)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:ui,factory:ui.\u0275fac,providedIn:"root"})}var Zi=k(871);class Er extends at.e{constructor(xt){super(xt,"auto-brand")}static#e=this.\u0275fac=function(Gt){return new(Gt||Er)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:Er,factory:Er.\u0275fac,providedIn:"root"})}class In extends at.e{constructor(xt){super(xt,"auto-model")}static#e=this.\u0275fac=function(Gt){return new(Gt||In)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:In,factory:In.\u0275fac,providedIn:"root"})}var Ei=k(686);const N="auto";class ce extends at.e{constructor(xt){super(xt,N)}getAutosList(xt,Gt){return this.http.getPagable(`${N}/autos-list`,this.filter(xt,Gt))}getAutoOffList(xt,Gt){return this.http.getPagable(`${N}/auto-offdevice`,this.filter(xt,Gt))}getAutoErrorList(xt,Gt,bn){return this.http.getPagable(`${N}/${Gt}/auto-errors`,this.filter(xt,bn))}getAutosHistory(xt,Gt){return this.http.getPagable(`${N}/autos-history`,this.filter(xt,Gt))}getByIdAutoTransport(xt,Gt,bn="",di){return this.http.get(`${N}/${xt}/autos-history-details`)}getByIdAutoOnline(xt,Gt,bn="",di){return this.http.get(`${N}/${xt}/auto-online`)}static#e=this.\u0275fac=function(Gt){return new(Gt||ce)(le.LFG(te.OE))};static#t=this.\u0275prov=le.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"})}k(1968),k(107)},1968:(At,Le,k)=>{"use strict";k.d(Le,{b:()=>V});var o=k(1571);class V{intercept(ie,te){const le=this.getToken();if(""!==le){const U=ie.clone({headers:ie.headers.append("Authorization","Bearer "+le)});return te.handle(U)}return te.handle(ie)}getToken(){return localStorage.getItem("token")||""}static#e=this.\u0275fac=function(te){return new(te||V)};static#t=this.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac})}},945:(At,Le,k)=>{"use strict";k.d(Le,{o:()=>V});const V=k(1481).zl.extend({dictionary:{},enum:{AllowedUserCountEnum:{SingleUser:"\u062a\u06a9 \u06a9\u0627\u0631\u0628\u0631\u0647",TwoUser:"\u062f\u0648 \u06a9\u0627\u0631\u0628\u0631\u0647 ",NoLimited:"\u0628\u062f\u0648\u0646 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a"},DocumentTypeEnum:{ReceiptPicture:"\u062a\u0635\u0648\u06cc\u0631 \u0631\u0648\u06cc \u06a9\u0627\u0631\u062a \u0645\u0644\u06cc"},PaymentStatusEnum:{Pending:"\u062f\u0631 \u0627\u0646\u062a\u0638\u0627\u0631",Success:"\u0645\u0648\u0641\u0642\u06cc\u062a",Failed:"\u062e\u0637\u0627",Rejected:"\u0631\u062f \u0634\u062f\u0647"}},errorTranslators:{}})},8702:(At,Le,k)=>{"use strict";k.d(Le,{e:()=>t}),k(1481);var V=k(1571);class t{constructor(te,le){this.http=te,this.baseUrl=le}set setBaseUrl(te){this.baseUrl=te}get getBaseUrl(){return this.baseUrl}save(te,le="",U,we){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(le)}`,te,{...U,query:we})}getById(te,le="",U="",we,de){return this.http.get(`${this.baseUrl}${le}/${te}${this.makeConcatUrl(U)}`,{...we,query:de})}post(te,le="",U,we){return this.http.post(`${this.baseUrl}${this.makeConcatUrl(le)}`,te,{...U,query:we})}get(te,le,U="",we){return this.http.getPagable(`${this.baseUrl}${this.makeConcatUrl(U)}`,te,{...we,query:le})}read(te,le="",U){return this.http.get(`${this.baseUrl}${this.makeConcatUrl(le)}`,{...U,query:te})}put(te,le,U="",we,de){const Pe=le?`${this.baseUrl}/${le}${this.makeConcatUrl(U)}`:`${this.baseUrl}${this.makeConcatUrl(U)}`;return this.http.put(Pe,te,{...we,query:de})}patch(te,le,U="",we,de){const Pe=le?`${this.baseUrl}/${le}${this.makeConcatUrl(U)}`:`${this.baseUrl}${this.makeConcatUrl(U)}`;return this.http.patch(Pe,te,{...de,query:we})}delete(te,le="",U,we){return this.http.delete(`${this.baseUrl}/${te}${this.makeConcatUrl(le)}`,{...U,query:we})}makeConcatUrl(te){return te?`/${te}`:""}filter(te,le){return console.log(te),te.filters=[],le&&le.length>0&&le.forEach(U=>te.addFilter(U.fieldName,U.value,U.operator)),te}static#e=this.\u0275fac=function(le){V.$Z()};static#t=this.\u0275prov=V.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}},9287:(At,Le,k)=>{"use strict";k.d(Le,{I:()=>te});var o=k(1481),V=k(2017),t=k(1571),ie=k(529);class te{constructor(U,we,de){this.http=U,this.httpClient=we,this.identityStore=de,this.baseUrl="security",this.UserbaseUrl="user",this.personbaseUrl="person"}signUp(U){return this.httpClient.post(`api/${this.baseUrl}/user-register`,U)}activate(U){return this.http.post(`${this.baseUrl}/user-register-active`,U)}signIn(U){return this.httpClient.post(`api/${this.baseUrl}/login`,U)}signout(){this.clearUser()}getUserIdentity(){return this.http.get(`${this.baseUrl}/identity`)}setAuthenticateUser(){localStorage.setItem(V.S,"true")}isAuthenticateUser(){return!!localStorage.getItem(V.S)}clearUser(){this.identityStore.set(void 0),localStorage.clear()}setUserToken(U){localStorage.setItem("token",U)}getCaptcha(){return this.http.get(`${this.baseUrl}/get-captcha`,{responseType:"blob"})}sendOtpForgetPassword(U){return this.httpClient.post(`api/${this.baseUrl}/forget-pass`,U)}onChangeForgetPassword(U){return this.http.post(`${this.baseUrl}/forget-pass-validate`,U)}resetPassword(U){return this.http.put(`api/${this.personbaseUrl}/reset-pass`,U)}static#e=this.\u0275fac=function(we){return new(we||te)(t.LFG(o.OE),t.LFG(ie.eN),t.LFG(o.cq))};static#t=this.\u0275prov=t.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}},4853:(At,Le,k)=>{"use strict";k.d(Le,{B:()=>te});var o=k(8702),V=k(1481),t=k(1571);const ie="account";class te extends o.e{constructor(U){super(U,ie)}getBalance(){return this.http.get(`/${ie}/sum-accounts`)}static#e=this.\u0275fac=function(we){return new(we||te)(t.LFG(V.OE))};static#t=this.\u0275prov=t.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}},686:(At,Le,k)=>{"use strict";k.d(Le,{F:()=>te});var o=k(1481),V=k(8702),t=k(1571);class te extends V.e{constructor(U){super(U,"driver")}static#e=this.\u0275fac=function(we){return new(we||te)(t.LFG(o.OE))};static#t=this.\u0275prov=t.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}},871:(At,Le,k)=>{"use strict";k.d(Le,{C:()=>te});var o=k(8702),V=k(1481),t=k(1571);class te extends o.e{constructor(U){super(U,"mine")}getCheckedItems(U){const we=[];return U.filter(de=>de.isChecked).forEach(de=>{de&&we.push(de)}),we}static#e=this.\u0275fac=function(we){return new(we||te)(t.LFG(V.OE))};static#t=this.\u0275prov=t.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}},3739:(At,Le,k)=>{"use strict";k.d(Le,{N:()=>te});var o=k(8702),V=k(1481),t=k(1571);class te extends o.e{constructor(U){super(U,"role")}getCheckedItems(U){const we=[];return U.filter(de=>de.isChecked).forEach(de=>{de.id&&we.push(de.id)}),we}static#e=this.\u0275fac=function(we){return new(we||te)(t.LFG(V.OE))};static#t=this.\u0275prov=t.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}},1067:(At,Le,k)=>{"use strict";var o=k(8255),V=k(1481),t=k(7910),ie=k(1571),te=k(8136);class le{constructor(je,ke,De,ze){this.router=je,this.toast=ke,this.httpErrorService=De,this.securityService=ze,this.title="driver",this.httpErrorService.error.subscribe(Qe=>{console.log(Qe),Qe.message&&this.toast.show(Qe.message,{title:"\u062e\u0637\u0627",style:"error"}),(Qe.status===V.VY.Unauthorized||Qe.status===V.VY.InvalidAccessToken)&&(console.log(Qe.status),this.securityService.clearUser(),this.router.navigate(["access/signin"]))})}static#e=this.\u0275fac=function(ke){return new(ke||le)(ie.Y36(te.F0),ie.Y36(V.kl),ie.Y36(V.BN),ie.Y36(t.Il))};static#t=this.\u0275cmp=ie.Xpm({type:le,selectors:[["moneyon-root"]],decls:1,vars:0,template:function(ke,De){1&ke&&ie._UZ(0,"router-outlet")},dependencies:[te.lC],styles:["body[_ngcontent-%COMP%]{direction:rtl}"]})}const U=[{path:"",loadChildren:()=>k.e(296).then(k.bind(k,8856)).then(Ye=>Ye.SubsystemModule)}];var we=k(529),de=k(1968),Pe=k(4523);class Se{static#e=this.\u0275fac=function(ke){return new(ke||Se)};static#t=this.\u0275mod=ie.oAB({type:Se,bootstrap:[le]});static#n=this.\u0275inj=ie.cJS({providers:[V.cq,V.NX,{provide:V.p4,useValue:"/api/"},{provide:we.TP,useClass:de.b,multi:!0},{provide:we.TP,useClass:V.n_,multi:!0}],imports:[o.b2,Pe.Wm,we.JF,te.Bz.forRoot(U,{initialNavigation:"enabledBlocking"})]})}o.q6().bootstrapModule(Se).catch(Ye=>console.error(Ye))},1481:(At,Le,k)=>{"use strict";k.d(Le,{Rm:()=>Lo,U8:()=>Uc,jn:()=>wu,P3:()=>gn,NX:()=>di,Jk:()=>Hn,Td:()=>_t.Td,zl:()=>Wa.zl,kx:()=>ks.k,lv:()=>nn,n_:()=>Cn.n_,BN:()=>Cn.BN,OE:()=>Cn.OE,p4:()=>Cn.p4,VY:()=>Cn.VY,G8:()=>Tu.G8,SK:()=>Mu,in:()=>En,kO:()=>cs,n0:()=>hc.n,uO:()=>ml,rL:()=>Cs.r,lX:()=>Cs.l,fv:()=>zt,EV:()=>_o,kl:()=>Nr.k,Ah:()=>Wa.Qp,s1:()=>It.s,cq:()=>bn.c,n4:()=>at,N5:()=>N.N,OR:()=>ia.OR});var o=k(4006),t=k(1571);class ie{constructor(){this.mtsEqualWith="",this.inequalityMessage=""}validate(y){return function V(P,y){return p=>p.value===P?null:{equalWith:{value:p.value,message:y}}}(this.mtsEqualWith,this.inequalityMessage)(y)}static#e=this.\u0275fac=function(p){return new(p||ie)};static#t=this.\u0275dir=t.lG2({type:ie,selectors:[["","mtsEqualWith",""]],inputs:{mtsEqualWith:"mtsEqualWith",inequalityMessage:"inequalityMessage"},exportAs:["mtsEqualWith"],features:[t._Bn([{provide:o.Cf,useExisting:ie,multi:!0}])]})}k(9789),k(8975);class de{validate(y){return function U(){return P=>function we(P){if(P){if(P?.length<11||0===parseInt(P,10)||0===parseInt(P.substr(3,6),10))return!1;const p=parseInt(P.substr(10,1),10),S=parseInt(P.substr(9,1),10)+2,J=new Array(29,27,23,19,17);let me=0;for(let rt=0;rt<10;rt++)me+=(S+parseInt(P.substr(rt,1),10))*J[rt%5];return me%=11,10===me&&(me=0),p===me}return!1}(P.value)||!P.value?null:{iranianNationalId:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||de)};static#t=this.\u0275dir=t.lG2({type:de,selectors:[["","mtsNationalId",""]],exportAs:["mtsNationalId"],features:[t._Bn([{provide:o.Cf,useExisting:de,multi:!0}])]})}k(4148),k(6089);class je{constructor(){}validate(y){return function Ye(){const P=new RegExp("^[a-zA-Z0-9$@-_.]+$");return y=>P.test(y.value)||!y.value?null:{password:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||je)};static#t=this.\u0275dir=t.lG2({type:je,selectors:[["","mtsPassword",""]],exportAs:["mtsPassword"],features:[t._Bn([{provide:o.Cf,useExisting:je,multi:!0}])]})}class De{constructor(){this.maxSize=5120}validate(y){return function ke(P){return y=>{let p=y?.value;return p instanceof File&&p.size>1024*P?{maxFileSize:{maxSize:P,value:p}}:null}}(this.maxSize)(y)}static#e=this.\u0275fac=function(p){return new(p||De)};static#t=this.\u0275dir=t.lG2({type:De,selectors:[["","mtsMaxFileSize",""]],inputs:{maxSize:"maxSize"},exportAs:["mtsMaxFileSize"],features:[t._Bn([{provide:o.Cf,useExisting:De,multi:!0}])]})}var Qe=k(2868);class lt{constructor(){this.fileExtensions=Qe.RY.ordinaries}validate(y){return function ze(P){return y=>{let p=y?.value;if(p instanceof File&&P&&P?.length>0){const S=p.name,J=S.split("."),me=J[J.length-1].toLowerCase();return P.find(Bt=>Bt===me)?null:{fileExtension:{fileName:S,fileExtensions:P}}}return null}}(this.fileExtensions)(y)}static#e=this.\u0275fac=function(p){return new(p||lt)};static#t=this.\u0275dir=t.lG2({type:lt,selectors:[["","mtsFileExtension",""]],inputs:{fileExtensions:["fileExtension","fileExtensions"]},exportAs:["mtsFileExtension"],features:[t._Bn([{provide:o.Cf,useExisting:lt,multi:!0}])]})}k(1726);class Fe{constructor(){this.mtsMinDate=""}validate(y){return function Ve(P){const y=new Date(P);return p=>{const S=new Date(p.value);let J=!0;return J=null==p.value||null==p.value||!p.value||null==P||null==P||!P||y<S,J?null:{invalidDate:!0}}}(this.mtsMinDate)(y)}static#e=this.\u0275fac=function(p){return new(p||Fe)};static#t=this.\u0275dir=t.lG2({type:Fe,selectors:[["","mtsMinDate",""]],inputs:{mtsMinDate:"mtsMinDate"},exportAs:["mtsMinDate"],features:[t._Bn([{provide:o.Cf,useExisting:Fe,multi:!0}])]})}class Be{validate(y){return function Ne(){let P=new RegExp("\\b(?!(\\d)\\1{3})[13-9]{4}[1346-9][013-9]{5}\\b");return y=>P.test(y.value)||!y.value?null:{postalCode:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||Be)};static#t=this.\u0275dir=t.lG2({type:Be,selectors:[["","mtsPostalCode",""]],exportAs:["mtsPostalCode"],features:[t._Bn([{provide:o.Cf,useExisting:Be,multi:!0}])]})}k(5665);const Mt=new RegExp("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?");class Kt{validate(y){return function St(P){return y=>{const p=y.value;return null==p||Mt.test(p)?null:{url:{value:p}}}}()(y)}static#e=this.\u0275fac=function(p){return new(p||Kt)};static#t=this.\u0275dir=t.lG2({type:Kt,selectors:[["","mtsUrl",""]],exportAs:["mtsUrl"],features:[t._Bn([{provide:o.Cf,useExisting:Kt,multi:!0}])]})}class ln{constructor(){this.hasIR=!0}validate(y){return function wn(P){const y=new RegExp(`^${P?"IR":""}[0-9]{24}$`);return p=>y.test(p.value)||!p.value?null:{sheba:!0}}(this.hasIR)(y)}static#e=this.\u0275fac=function(p){return new(p||ln)};static#t=this.\u0275dir=t.lG2({type:ln,selectors:[["","mtsSheba",""]],inputs:{hasIR:"hasIR"},exportAs:["mtsSheba"],features:[t._Bn([{provide:o.Cf,useExisting:ln,multi:!0}])]})}class yn{constructor(){}validate(y){return function jn(){let P=new RegExp(/^[\u0600-\u06FF\s]+$/);return y=>P.test(y.value)||!y.value?null:{persianCharacter:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||yn)};static#t=this.\u0275dir=t.lG2({type:yn,selectors:[["","mtsPersianCharacter",""]],exportAs:["mtsPersianCharacter"],features:[t._Bn([{provide:o.Cf,useExisting:yn,multi:!0}])]})}class Zn{validate(y){return function Yr(){let P=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$");return y=>P.test(y.value)||!y.value?null:{email:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||Zn)};static#t=this.\u0275dir=t.lG2({type:Zn,selectors:[["","mtsEmail",""]],exportAs:["mtsEmail"],features:[t._Bn([{provide:o.Cf,useExisting:Zn,multi:!0}])]})}class Ji{validate(y){return function sr(){const P=new RegExp("((http|https)://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?");return y=>P.test(y.value)||!y.value?null:{website:!0}}()(y)}static#e=this.\u0275fac=function(p){return new(p||Ji)};static#t=this.\u0275dir=t.lG2({type:Ji,selectors:[["","mtsWebsite",""]],exportAs:["mtsWebsite"],features:[t._Bn([{provide:o.Cf,useExisting:Ji,multi:!0}])]})}class at{static#e=this.\u0275fac=function(p){return new(p||at)};static#t=this.\u0275mod=t.oAB({type:at});static#n=this.\u0275inj=t.cJS({})}k(8838);class qt{static#e=this.\u0275fac=function(p){return new(p||qt)};static#t=this.\u0275mod=t.oAB({type:qt});static#n=this.\u0275inj=t.cJS({})}var _t=k(1343),Ot=k(7579),un=k(8122);class Qn{constructor(){this._isSupportedDownload=!1,this._loading=!1,this.changeSubject=new Ot.x,this.change=this.changeSubject.asObservable()}get isSupportedDownload(){return this._isSupportedDownload}set isSupportedDownload(y){this._isSupportedDownload=y}get loading(){return this._loading}set loading(y){this._loading=y}get data(){return this._data}set data(y){this._data=y}get totalRecords(){return this._totalRecords}set totalRecords(y){this._totalRecords=y}remove(y){var p=this._data.findIndex(S=>S===y);p>-1&&(this._data?.splice(p,1),this.changeSubject.next(new un.i(this._data,this._totalRecords)))}}class En extends Qn{constructor(y){if(super(),this.isSupportedDownload=!0,"function"!=typeof y)throw"Invalid data loader";this._loader=y}load(y){this._lastRequest=y,this.loading=!0,this._loader(y).subscribe({next:p=>{let S=p;this.loading=!1,this.data=S.data,this.totalRecords=S.total,this.changeSubject.next(p)},error:p=>{this.loading=!1}})}downloadFile(y){this._loader(y).subscribe({next:p=>{this.changeSubject.next(p)},error:p=>{}})}reload(){this.load(this._lastRequest)}}class gn extends Qn{constructor(y){super(),this.allData=y,this.isSupportedDownload=!1}load(y){this._lastRequest=y,this.data=this.allData,this.totalRecords=this.allData.length,this.changeSubject.next(new un.i(this.allData,this.totalRecords))}reload(){this.changeSubject.next(new un.i(this.allData,this.totalRecords))}add(y){y&&(this.allData?.push(y),this.totalRecords=this.allData?.length,this.changeSubject.next(new un.i(this.allData,this.totalRecords)))}downloadFile(y){throw new Error("download in arrayDataSource is not supported.")}}var Cn=k(5487);class Kn{constructor(y){this.text=y?.text,this.icon=y?.icon,this.show=y?.show,this.disabled=y?.disabled,this.style=y?.style,this.click=y?.click}}class Hn extends Kn{constructor(y){super(y)}}class Zt{constructor(y){this.id=y?.id,this.parent=y?.parent,this.disabled=Boolean(y?.disabled),this.active=Boolean(y?.active),this.show=null==y?.show||1==y.show,this.showCondition=y?.showCondition,this.data=y?.data}get depth(){if(typeof this._depth>"u"){this._depth=0;let y=this.parent;for(;null!=y;)y=y.parent,this._depth++}return this._depth}}class nn extends Zt{constructor(y){super(y),this.text=y.text,this.icon=y?.icon,this.children=y.children,this.expanded=Boolean(y.expanded),this.children.forEach(p=>p.parent=this)}}class zt extends Zt{constructor(y){super(y),this.text=y?.text,this.icon=y?.icon,this.routerLink=y?.routerLink}}class Xt extends Zt{constructor(y){super(y)}}var Ht=k(6895);const ui=[[["","card-content",""]],[["","presentation-content",""]]],Zi=["[card-content]","[presentation-content]"];class qi{constructor(){this.bgPresentation={"background-image":"linear-gradient(to bottom , #006564 , #004E4F, #003738 , #001215)"}}static#e=this.\u0275fac=function(p){return new(p||qi)};static#t=this.\u0275cmp=t.Xpm({type:qi,selectors:[["mts-access-layout-1"]],inputs:{cssStyle:"cssStyle"},ngContentSelectors:Zi,decls:12,vars:1,consts:[[1,"container-fluid"],[1,"row","no-gutter"],[1,"d-flex","flex-column","justify-content-center","align-items-xl-end","col-lg-12","col-xl-2","min-vh-100","bg-light"],[1,"register-form"],[1,"container"],[1,"row","d-flex","flex-column","align-items-center"],[1,"card","col-12","col-sm-8","col-md-6","col-lg-6","col-xl-12","h-100","p-0"],[1,"card-body"],[1,"d-none","d-xl-block","col-xl-10","p-0","min-vh-100",3,"ngStyle"],[1,"d-lg-flex","flex-column","justify-content-center","text-center","h-100"]],template:function(p,S){1&p&&(t.F$t(ui),t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t.Hsn(8),t.qZA()()()()()(),t.TgZ(9,"div",8)(10,"div",9),t.Hsn(11,1),t.qZA()()()()),2&p&&(t.xp6(9),t.Q6J("ngStyle",S.cssStyle?S.cssStyle:S.bgPresentation))},dependencies:[Ht.PC],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow-y:auto}.card[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #b5b5b54d;border:none}@media (min-width: 1200px){.register-form[_ngcontent-%COMP%]{min-width:370px;transform:translate(-53%)}}"]})}class Er{static#e=this.\u0275fac=function(p){return new(p||Er)};static#t=this.\u0275mod=t.oAB({type:Er});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}k(8710),k(8989);class Ei{static#e=this.\u0275fac=function(p){return new(p||Ei)};static#t=this.\u0275mod=t.oAB({type:Ei});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}var N=k(8326),ce=k(3139),ht=k(8136),It=k(8152);class Jt{constructor(y,p,S){this.templateRef=y,this.viewContainer=p,this.userStore=S,this._viewCreated=!1,this._subscription=S?.userChange.subscribe(J=>this._decide())}set show(y){this._condition=y,this._decide()}_decide(){let y;const p=this.userStore?.get(),{user:S,permission:J}=this._condition;y="any"===S||("set"===S?null!=p&&(null==J||p.hasCriteria(J)):null==p),y&&!this._viewCreated?(this.viewContainer.createEmbeddedView(this.templateRef),this._viewCreated=!0):!y&&this._viewCreated&&(this.viewContainer.clear(),this._viewCreated=!1)}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(p){return new(p||Jt)(t.Y36(t.Rgc),t.Y36(t.s_b),t.Y36(bn.c,8))};static#t=this.\u0275dir=t.lG2({type:Jt,selectors:[["","mtsShow",""]],inputs:{show:["mtsShow","show"]},exportAs:["mtsShow"]})}k(535);class Gt{static#e=this.\u0275fac=function(p){return new(p||Gt)};static#t=this.\u0275mod=t.oAB({type:Gt});static#n=this.\u0275inj=t.cJS({})}var bn=k(9433);class di{constructor(y){this.userStore=y}canActivateChild(y,p){return this._canActivate(y)}canActivate(y,p){return this._canActivate(y)}_canActivate(y){let p=y;do{const J=p.routeConfig?.data?.claim;let me=this.userStore?.get();if(!me)return!1;if(J)return me.hasCriteria(J);p=p?.children[0]}while(p);return!0}static#e=this.\u0275fac=function(p){return new(p||di)(t.LFG(bn.c,8))};static#t=this.\u0275prov=t.Yz7({token:di,factory:di.\u0275fac})}function Pr(P,y){1&P&&t.GkF(0)}function eo(P,y){1&P&&t.GkF(0)}function to(P,y){if(1&P&&(t.TgZ(0,"h5",17),t._uU(1),t.qZA()),2&P){const p=t.oxw(2);t.xp6(1),t.Oqu(p.secondAsideMenuItem.text)}}function Dt(P,y){1&P&&t.GkF(0)}k(8036),k(4663),k(5516),k(3302);const H=function(P){return{$implicit:P}};function X(P,y){if(1&P&&(t.TgZ(0,"div",11)(1,"ul",12),t.YNc(2,to,2,1,"h5",13),t.TgZ(3,"div",14),t.YNc(4,Dt,1,0,"ng-container",6),t.qZA()(),t.TgZ(5,"div",15)(6,"div",16),t._uU(7),t.qZA()()()),2&P){const p=t.oxw(),S=t.MAs(13);t.xp6(2),t.Q6J("ngIf",null==p.secondAsideMenuItem?null:p.secondAsideMenuItem.text),t.xp6(2),t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.VKq(4,H,p.secondAsideMenuItem.children)),t.xp6(3),t.hij("\u0622\u062e\u0631\u06cc\u0646 \u0646\u0633\u062e\u0647: ",null==p.config||null==p.config.asideMenu?null:p.config.asideMenu.latestVersion,"")}}const fe=function(P){return{active:P}};function _e(P,y){if(1&P&&(t.TgZ(0,"a",27),t._uU(1),t.qZA()),2&P){const p=t.oxw(4).$implicit,S=t.oxw(2);t.Q6J("ngClass",t.VKq(2,fe,p.id===S.selectedGroupItemId)),t.xp6(1),t.Oqu(p.text)}}function Re(P,y){1&P&&t.GkF(0)}function Je(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Re,1,0,"ng-container",6),t.BQk()),2&P){const p=t.oxw(4).$implicit,S=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",S._groupTemplateFirstMenu.templateRef)("ngTemplateOutletContext",t.VKq(2,H,p))}}function Xe(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",24),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(3).$implicit,rt=t.oxw(2);return t.KtG(rt.onGroupItemClick(me,J))}),t.TgZ(1,"a",25),t._UZ(2,"i"),t.qZA(),t.YNc(3,_e,2,4,"a",26),t.YNc(4,Je,2,4,"ng-container",19),t.qZA()}if(2&P){const p=t.oxw(3).$implicit,S=t.oxw(2);t.xp6(2),t.Tol(p.icon),t.xp6(1),t.Q6J("ngIf",!S._groupTemplateFirstMenu&&p.text),t.xp6(1),t.Q6J("ngIf",S._groupTemplateFirstMenu)}}function xe(P,y){if(1&P&&(t.TgZ(0,"a",30),t._uU(1),t.qZA()),2&P){const p=t.oxw(4).$implicit;t.xp6(1),t.Oqu(p.text)}}function Ge(P,y){1&P&&t.GkF(0)}function ft(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Ge,1,0,"ng-container",6),t.BQk()),2&P){const p=t.oxw(4).$implicit,S=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",S._textTemplateFirstMenu.templateRef)("ngTemplateOutletContext",t.VKq(2,H,p))}}function Lt(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",28),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(3).$implicit,rt=t.oxw(2);return t.KtG(rt.onTextMenuItemClick(me,J))}),t.YNc(1,xe,2,1,"a",29),t.YNc(2,ft,2,4,"ng-container",19),t.qZA()}if(2&P){const p=t.oxw(3).$implicit,S=t.oxw(2);t.Q6J("routerLink",p.routerLink),t.xp6(1),t.Q6J("ngIf",!S._textTemplateFirstMenu),t.xp6(1),t.Q6J("ngIf",S._textTemplateFirstMenu)}}function Ut(P,y){1&P&&(t.TgZ(0,"li",31),t._UZ(1,"hr"),t.qZA())}function Ie(P,y){if(1&P&&(t.YNc(0,Xe,5,4,"li",21),t.YNc(1,Lt,3,3,"li",22),t.YNc(2,Ut,2,0,"li",23)),2&P){const p=t.oxw(2).$implicit,S=t.oxw(2);t.Q6J("ngIf",S.isGroupMenuItem(p)),t.xp6(1),t.Q6J("ngIf",S.isTextMenuItem(p)),t.xp6(1),t.Q6J("ngIf",S.isDividerMenuItem(p))}}const Ae=function(P,y){return{user:P,permission:y}};function Me(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Ie,3,3,"ng-template",20),t.BQk()),2&P){const p=t.oxw().$implicit;t.xp6(1),t.Q6J("mtsShow",t.WLB(1,Ae,null!=(null==p||null==p.showCondition?null:p.showCondition.user)?null==p||null==p.showCondition?null:p.showCondition.user:"any",null==p.showCondition?null:p.showCondition.permission))}}function qe(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Me,2,4,"ng-container",19),t.BQk()),2&P){const p=y.$implicit;t.xp6(1),t.Q6J("ngIf",null==(null==p?null:p.show)||1==(null==p?null:p.show))}}function He(P,y){1&P&&t.YNc(0,qe,2,1,"ng-container",18),2&P&&t.Q6J("ngForOf",y.$implicit)}function Rt(P,y){if(1&P&&(t.TgZ(0,"a",38),t._uU(1),t.qZA()),2&P){const p=t.oxw(4).$implicit;t.xp6(1),t.Oqu(p.text)}}function jt(P,y){1&P&&t.GkF(0)}function en(P,y){if(1&P&&(t.ynx(0),t.YNc(1,jt,1,0,"ng-container",6),t.BQk()),2&P){const p=t.oxw(4).$implicit,S=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",S._groupTemplateSecondMenu.templateRef)("ngTemplateOutletContext",t.VKq(2,H,p))}}function An(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",34),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(3).$implicit,rt=t.oxw(2);return t.KtG(rt.onGroupItemClick(me,J))}),t.TgZ(1,"span",35),t._UZ(2,"span",36),t.qZA(),t.YNc(3,Rt,2,1,"a",37),t.YNc(4,en,2,4,"ng-container",19),t.qZA()}if(2&P){const p=t.oxw(3).$implicit,S=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(3,fe,p.id===S.selectedMenuItemId)),t.xp6(1),t.Q6J("ngIf",!S._groupTemplateSecondMenu&&p.text),t.xp6(1),t.Q6J("ngIf",S._groupTemplateSecondMenu)}}function sn(P,y){if(1&P&&(t.TgZ(0,"a",42),t._uU(1),t.qZA()),2&P){const p=t.oxw(4).$implicit;t.xp6(1),t.hij(" ",p.text," ")}}function ei(P,y){1&P&&t.GkF(0)}function Si(P,y){if(1&P&&(t.ynx(0),t.YNc(1,ei,1,0,"ng-container",6),t.BQk()),2&P){const p=t.oxw(4).$implicit,S=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",S._textTemplateSecondMenu.templateRef)("ngTemplateOutletContext",t.VKq(2,H,p))}}function oi(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",39),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(3).$implicit,rt=t.oxw(2);return t.KtG(rt.onSecondMenuItemClick(me,J))}),t.TgZ(1,"span",35),t._UZ(2,"span",40),t.qZA(),t.YNc(3,sn,2,1,"a",41),t.YNc(4,Si,2,4,"ng-container",19),t.qZA()}if(2&P){const p=t.oxw(3).$implicit,S=t.oxw(2);t.Q6J("ngClass",t.VKq(4,fe,p.id===S.selectedMenuItemId))("routerLink",p.routerLink),t.xp6(3),t.Q6J("ngIf",!S._textTemplateSecondMenu&&p.text),t.xp6(1),t.Q6J("ngIf",S._textTemplateSecondMenu)}}function Ti(P,y){1&P&&(t.TgZ(0,"li",31),t._UZ(1,"hr"),t.qZA())}function mi(P,y){if(1&P&&(t.YNc(0,An,5,5,"li",32),t.YNc(1,oi,5,6,"li",33),t.YNc(2,Ti,2,0,"li",23)),2&P){const p=t.oxw(2).$implicit,S=t.oxw(2);t.Q6J("ngIf",S.isGroupMenuItem(p)),t.xp6(1),t.Q6J("ngIf",S.isTextMenuItem(p)),t.xp6(1),t.Q6J("ngIf",S.isDividerMenuItem(p))}}function Wr(P,y){if(1&P&&(t.ynx(0),t.YNc(1,mi,3,3,"ng-template",20),t.BQk()),2&P){const p=t.oxw().$implicit;t.xp6(1),t.Q6J("mtsShow",t.WLB(1,Ae,null!=(null==p||null==p.showCondition?null:p.showCondition.user)?null==p||null==p.showCondition?null:p.showCondition.user:"any",null==p.showCondition?null:p.showCondition.permission))}}function Ii(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Wr,2,4,"ng-container",19),t.BQk()),2&P){const p=y.$implicit;t.xp6(1),t.Q6J("ngIf",null==(null==p?null:p.show)||1==(null==p?null:p.show))}}function mr(P,y){1&P&&t.YNc(0,Ii,2,1,"ng-container",18),2&P&&t.Q6J("ngForOf",y.$implicit)}const $i=function(P){return{width:P}};class li{constructor(y,p){this.router=y,this.userStore=p,this.menuItemClick=new t.vpe,this.isSecondaryAsideMenu=new t.vpe,this.selectedMenuItemId="",this.selectedGroupItemId=""}get secondAsideMenuItem(){return this._secondAsideMenuItem}isGroupMenuItem(y){return y instanceof nn}isTextMenuItem(y){return y instanceof zt}isDividerMenuItem(y){return y instanceof Xt}onTextMenuItemClick(y,p){p.stopPropagation(),this.hasChildrenMenuItem(y)||(this.showSecondAsideMenu=!1,this.isSecondaryAsideMenu.emit(!1)),this.menuItemClick.emit(y)}onGroupItemClick(y,p){p.stopPropagation(),this.routeToFirstMenuItem(y),this._secondAsideMenuItem=this.config?.asideMenu?.first?.start?.find(S=>S===y),this.isSecondaryAsideMenu.emit(!0),this.menuItemClick.emit(y)}onSecondMenuItemClick(y,p){this.selectedMenuItemId=y.id,this.selectedGroupItemId=y.parent?.id,this.isSecondaryAsideMenu.emit(!0),this.menuItemClick.emit(y)}hasChildrenMenuItem(y){return y instanceof nn&&y.children.length}lookupFirstMenuItem(y){let p=this.userStore.get();return y.children.find(J=>J.showCondition?.permission?p?.hasCriteria(J.showCondition?.permission):y.children)}routeToFirstMenuItem(y){if(this.hasChildrenMenuItem(y)){let p=this.lookupFirstMenuItem(y);const S=p.routerLink;this.selectedMenuItemId=p.id,S&&this.router.navigate(S),this.showSecondAsideMenu=!0}}static#e=this.\u0275fac=function(p){return new(p||li)(t.Y36(ht.F0),t.Y36(bn.c))};static#t=this.\u0275cmp=t.Xpm({type:li,selectors:[["mts-aside"]],inputs:{config:"config",_textTemplateFirstMenu:"_textTemplateFirstMenu",_groupTemplateFirstMenu:"_groupTemplateFirstMenu",_textTemplateSecondMenu:"_textTemplateSecondMenu",_groupTemplateSecondMenu:"_groupTemplateSecondMenu"},outputs:{menuItemClick:"menuItemClick",isSecondaryAsideMenu:"isSecondaryAsideMenu"},decls:14,vars:13,consts:[[1,"d-flex","h-100","w-100"],[1,"first-aside-wrapper","d-flex","flex-column"],[1,"aside-logo","d-flex","flex-column","align-items-center","justify-content-center"],["routerLink","/",1,"text-center"],["alt","","height","auto",1,"d-inline-block",3,"src","ngStyle"],[1,"first-aside-nav-start","text-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"first-aside-nav-end","text-center","mt-auto"],["class","second-aside-wrapper",4,"ngIf"],["firstAsideMenuTemplate",""],["secondAsideMenuTemplate",""],[1,"second-aside-wrapper"],[1,"second-aside-nav-start","px-2"],["class","ms-3",4,"ngIf"],[1,"mt-4"],[1,"second-aside-nav-end","mt-auto","p-2","me-4"],[1,"latest-version","p-2"],[1,"ms-3"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"mtsShow"],["class","cursor-pointer group-menu-item d-flex flex-column align-items-center p-2",3,"click",4,"ngIf"],["class","cursor-pointer text-menu-item d-flex flex-column align-items-center p-2",3,"routerLink","click",4,"ngIf"],["class","divider-menu-item",4,"ngIf"],[1,"cursor-pointer","group-menu-item","d-flex","flex-column","align-items-center","p-2",3,"click"],[1,"menu-item-link","d-inline-flex","justify-content-center","align-items-center"],["class","menu-item-link-text mt-2 text-muted",3,"ngClass",4,"ngIf"],[1,"menu-item-link-text","mt-2","text-muted",3,"ngClass"],[1,"cursor-pointer","text-menu-item","d-flex","flex-column","align-items-center","p-2",3,"routerLink","click"],["class","mt-2","routerLinkActive","active",4,"ngIf"],["routerLinkActive","active",1,"mt-2"],[1,"divider-menu-item"],["class","cursor-pointer group-menu-item d-flex flex-column",3,"click",4,"ngIf"],["class","text-menu-item cursor-pointer d-flex py-2",3,"ngClass","routerLink","click",4,"ngIf"],[1,"cursor-pointer","group-menu-item","d-flex","flex-column",3,"click"],[1,"menu-bullet"],[1,"bullet-dot",3,"ngClass"],["class","group-text",4,"ngIf"],[1,"group-text"],[1,"text-menu-item","cursor-pointer","d-flex","py-2",3,"ngClass","routerLink","click"],[1,"bullet-dot"],["class","py-1 px-2",4,"ngIf"],[1,"py-1","px-2"]],template:function(p,S){if(1&p&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),t._UZ(4,"img",4),t.qZA()(),t.TgZ(5,"ul",5),t.YNc(6,Pr,1,0,"ng-container",6),t.qZA(),t.TgZ(7,"ul",7),t.YNc(8,eo,1,0,"ng-container",6),t.qZA()(),t.YNc(9,X,8,6,"div",8),t.qZA(),t.YNc(10,He,1,1,"ng-template",null,9,t.W1O),t.YNc(12,mr,1,1,"ng-template",null,10,t.W1O)),2&p){const J=t.MAs(11);let me;t.xp6(4),t.Q6J("src",null==S.config||null==S.config.general||null==S.config.general.logo?null:S.config.general.logo.url,t.LSH)("ngStyle",t.VKq(7,$i,null!==(me=null==S.config||null==S.config.general||null==S.config.general.logo?null:S.config.general.logo.width)&&void 0!==me?me:"45px")),t.xp6(2),t.Q6J("ngTemplateOutlet",J)("ngTemplateOutletContext",t.VKq(9,H,null==S.config||null==S.config.asideMenu||null==S.config.asideMenu.first?null:S.config.asideMenu.first.start)),t.xp6(2),t.Q6J("ngTemplateOutlet",J)("ngTemplateOutletContext",t.VKq(11,H,null==S.config||null==S.config.asideMenu||null==S.config.asideMenu.first?null:S.config.asideMenu.first.end)),t.xp6(1),t.Q6J("ngIf",S.showSecondAsideMenu)}},styles:["[_nghost-%COMP%]{overflow:hidden}.first-aside-wrapper[_ngcontent-%COMP%]{width:8.1rem;border-left:1px dashed #cecece}.first-aside-wrapper[_ngcontent-%COMP%]   .aside-logo[_ngcontent-%COMP%]{border-bottom:1px dashed #cecece;height:85px}.first-aside-wrapper[_ngcontent-%COMP%]   .first-aside-nav-start[_ngcontent-%COMP%]{height:calc(100% - 5.2rem);overflow-y:scroll;font-size:.75rem}.first-aside-wrapper[_ngcontent-%COMP%]   .first-aside-nav-end[_ngcontent-%COMP%]{height:5.2rem}.second-aside-wrapper[_ngcontent-%COMP%]{padding:2rem 0;border-left:1px dashed #cecece}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]{width:16rem;height:calc(100% - 2rem);overflow-y:scroll}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]   .text-menu-item.active[_ngcontent-%COMP%]{background-color:var(--bs-soft-primary);border-radius:7px}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-start[_ngcontent-%COMP%]   .text-menu-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--bs-primary)!important}.second-aside-wrapper[_ngcontent-%COMP%]   .second-aside-nav-end[_ngcontent-%COMP%]   .latest-version[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#999cae;border-radius:7px}button[_ngcontent-%COMP%]{transform:translate(120%,-50%)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cecece}.menu-bullet[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:1.25rem;margin-right:.5rem}.menu-bullet[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%]{width:5px;height:5px;border-radius:100%!important;background-color:var(--bs-gray-500);font-size:.6rem}.group-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .text-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:gray!important}.group-menu-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .group-menu-item.active[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%], .text-menu-item.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .text-menu-item.active[_ngcontent-%COMP%]   .bullet-dot[_ngcontent-%COMP%]{color:var(--bs-primary)!important}"]})}var pi=k(4004),ii=k(1135);class Tr{constructor(y,p){this.activatedRoute=y,this.data=p}}class Ai{constructor(y){this.pathFromRoot=y}}class Mr{constructor(y){this._router=y,this._navigateSubject=new ii.X(this._createNavigationEvent()),this.navigation=this._navigateSubject.asObservable(),this._subscription=this._router.events.subscribe({next:p=>{p instanceof ht.m2&&this._navigateSubject.next(this._createNavigationEvent())}})}_createNavigationEvent(){const y=new Array;let{root:p}=this._router.routerState.snapshot;do{p=p?.children[0];const S=p?.routeConfig?.data,J=new Tr(p,{title:S?.title,description:S?.description,keywords:S?.keywords,resolvedTitle:S?.title,resolvedDescription:S?.description,resolvedKeywords:S?.keywords});y.push(J)}while(p?.children.length>0);return new Ai(y)}static#e=this.\u0275fac=function(p){return new(p||Mr)(t.LFG(ht.F0))};static#t=this.\u0275prov=t.Yz7({token:Mr,factory:Mr.\u0275fac,providedIn:"root"})}function zo(P,y){if(1&P&&(t.TgZ(0,"button",9),t._UZ(1,"i"),t._uU(2),t.qZA()),2&P){const p=y.$implicit,S=t.oxw();t.Tol(S.displayBtnStyle(p)),t.xp6(1),t.Tol(p.icon),t.xp6(1),t.hij(" ",p.text," ")}}function Vo(P,y){1&P&&t.GkF(0)}const cn=function(P){return{$implicit:P}};function Yn(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Vo,1,0,"ng-container",10),t.BQk()),2&P){const p=t.oxw(),S=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.VKq(2,cn,null==p.config||null==p.config.header||null==p.config.header.menuItems?null:p.config.header.menuItems.end))}}function vi(P,y){1&P&&t.GkF(0)}function Oi(P,y){if(1&P&&t.YNc(0,vi,1,0,"ng-container",10),2&P){const p=t.oxw(3).$implicit;t.oxw(3);const S=t.MAs(15);t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.VKq(2,cn,p))}}function xr(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(3).$implicit,rt=t.oxw(3);return t.KtG(rt.onMenuItemClick(me,J))}),t.TgZ(1,"a",17),t._uU(2),t.qZA()()}if(2&P){const p=t.oxw(3).$implicit;t.xp6(1),t.Q6J("routerLink",p.routerLink),t.xp6(1),t.Oqu(p.text)}}function gi(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Oi,1,4,"ng-template",14),t.YNc(2,xr,3,2,"ng-template",null,15,t.W1O),t.BQk()),2&P){const p=t.MAs(3),S=t.oxw(2).$implicit,J=t.oxw(3);t.xp6(1),t.Q6J("ngIf",J.isGroupMenuItem(S))("ngIfElse",p)}}const mo=function(P,y){return{user:P,permission:y}};function Ui(P,y){if(1&P&&(t.ynx(0),t.YNc(1,gi,4,2,"ng-container",13),t.BQk()),2&P){const p=t.oxw().$implicit;t.xp6(1),t.Q6J("mtsShow",t.WLB(1,mo,null!=(null==p||null==p.showCondition?null:p.showCondition.user)?null==p||null==p.showCondition?null:p.showCondition.user:"any",null==p.showCondition?null:p.showCondition.permission))}}function ka(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Ui,2,4,"ng-container",6),t.BQk()),2&P){const p=y.$implicit;t.xp6(1),t.Q6J("ngIf",null===(null==p?null:p.show)||!0===(null==p?null:p.show))}}function go(P,y){if(1&P&&(t.TgZ(0,"ul",4),t.YNc(1,ka,2,1,"ng-container",12),t.qZA()),2&P){const p=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",p)}}function Ci(P,y){1&P&&t.YNc(0,go,2,1,"ul",11),2&P&&t.Q6J("ngIf",y.$implicit)}function ws(P,y){1&P&&t.GkF(0)}function Kr(P,y){1&P&&t._UZ(0,"div",23)}function ls(P,y){1&P&&t.GkF(0)}function kr(P,y){if(1&P&&(t.ynx(0),t.YNc(1,ls,1,0,"ng-container",10),t.BQk()),2&P){const p=y.$implicit;t.oxw(3);const S=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.VKq(2,cn,p))}}function Rr(P,y){if(1&P&&(t.ynx(0),t.TgZ(1,"h6",24),t._uU(2),t.qZA(),t.YNc(3,kr,2,4,"ng-container",12),t.BQk()),2&P){const p=t.oxw().$implicit;t.xp6(2),t.Oqu(p.text),t.xp6(1),t.Q6J("ngForOf",p.children)}}function ra(P,y){if(1&P&&(t.ynx(0),t.YNc(1,ws,1,0,"ng-container",10),t.YNc(2,Kr,1,0,"div",22),t.YNc(3,Rr,4,2,"ng-container",6),t.BQk()),2&P){const p=y.$implicit;t.oxw();const S=t.MAs(6),J=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.VKq(4,cn,p)),t.xp6(1),t.Q6J("ngIf",J.isDividerMenuItem(p)&&p.show),t.xp6(1),t.Q6J("ngIf",J.isGroupMenuItem(p)&&p.show)}}function Ra(P,y){if(1&P&&t._UZ(0,"i",28),2&P){const p=t.oxw(2).$implicit;t.Q6J("ngClass",p.icon)}}function zr(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"a",26),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw().$implicit,rt=t.oxw(2);return t.KtG(rt.onMenuItemClick(me,J))}),t.YNc(1,Ra,1,1,"i",27),t._uU(2),t.qZA()}if(2&P){const p=t.oxw().$implicit;t.ekj("active",p.active),t.Q6J("routerLink",p.routerLink),t.xp6(1),t.Q6J("ngIf",p.icon),t.xp6(1),t.hij(" ",p.text," ")}}function ga(P,y){if(1&P&&t.YNc(0,zr,3,5,"a",25),2&P){const p=y.$implicit,S=t.oxw(2);t.Q6J("ngIf",S.isTextMenuItem(p)&&p.show)}}function Ql(P,y){if(1&P&&(t.TgZ(0,"div",18)(1,"button",19),t._uU(2),t.qZA(),t.TgZ(3,"div",20),t.YNc(4,ra,4,6,"ng-container",12),t.qZA()(),t.YNc(5,ga,1,1,"ng-template",null,21,t.W1O)),2&P){const p=y.$implicit,S=t.oxw();t.xp6(1),t.Q6J("ngClass",S.displayBtnStyle(p)),t.xp6(1),t.hij(" ",p.text," "),t.xp6(2),t.Q6J("ngForOf",p.children)}}class ar{constructor(y,p){this.routerService=y,this.layoutService=p,this.menuItemClick=new t.vpe,this.expanderClick=new t.vpe,this.pageActions$=this.layoutService.pageActionsChange,this.pageTitle$=this.layoutService.pageTitleSubject,this.page$=this.routerService.navigation.pipe((0,pi.U)(S=>({routeTitle:S.pathFromRoot[S.pathFromRoot?.length-1].data.title,breadcrumbItems:S.pathFromRoot.filter(J=>J.data.resolvedTitle).map(J=>J.data.resolvedTitle)})))}displayBtnStyle(y){return y instanceof Hn?`btn btn-${y.style}`:`btn btn-${y.data.style}`}isDividerMenuItem(y){return y instanceof Xt}isTextMenuItem(y){return y instanceof zt}isGroupMenuItem(y){return y instanceof nn}onMenuItemClick(y,p){p.stopPropagation(),this.menuItemClick.emit(y)}static#e=this.\u0275fac=function(p){return new(p||ar)(t.Y36(Mr),t.Y36(N.N))};static#t=this.\u0275cmp=t.Xpm({type:ar,selectors:[["mts-header"]],inputs:{config:"config"},outputs:{menuItemClick:"menuItemClick",expanderClick:"expanderClick"},decls:16,vars:11,consts:[[1,"d-flex","justify-content-between"],[1,"align-self-center","fw-bolder","my-0","d-none","d-lg-block"],[1,"d-block","d-lg-none",3,"click"],[1,"fa-solid","fa-bars"],[1,"d-flex"],["class","ms-2",3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],["headerMenuItemTemplate",""],["dropdownMenuTemplate",""],[1,"ms-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","d-flex",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"mtsShow"],[3,"ngIf","ngIfElse"],["leafMenuItem",""],[1,"nav-item",3,"click"],["routerLinkActive","active",1,"nav-link","cursor-pointer",3,"routerLink"],["ngbDropdown","","placement","bottom-start",1,"nav-item","dropdown","ms-2"],["type","button","ngbDropdownToggle","",1,"dropdown-toggle",3,"ngClass"],["ngbDropdownMenu",""],["dropdownMenuItemTemplate",""],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-divider"],[1,"dropdown-header"],["ngbDropdownItem","","class","cursor-pointer",3,"routerLink","active","click",4,"ngIf"],["ngbDropdownItem","",1,"cursor-pointer",3,"routerLink","click"],["class","me-1",3,"ngClass",4,"ngIf"],[1,"me-1",3,"ngClass"]],template:function(p,S){if(1&p&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"span",2),t.NdJ("click",function(){return S.expanderClick.emit(!0)}),t._UZ(7,"i",3),t.qZA(),t.TgZ(8,"div",4),t.YNc(9,zo,3,5,"button",5),t.ALo(10,"async"),t.YNc(11,Yn,2,4,"ng-container",6),t.qZA()(),t.YNc(12,Ci,1,1,"ng-template",null,7,t.W1O),t.YNc(14,Ql,7,3,"ng-template",null,8,t.W1O)),2&p){let J;t.xp6(2),t.hij(" ",null!=(J=t.lcZ(3,3,S.page$))&&J.routeTitle?null==(J=t.lcZ(4,5,S.page$))?null:J.routeTitle:t.lcZ(5,7,S.pageTitle$)," "),t.xp6(7),t.Q6J("ngForOf",t.lcZ(10,9,S.pageActions$)),t.xp6(2),t.Q6J("ngIf",null==S.config||null==S.config.header||null==S.config.header.menuItems?null:S.config.header.menuItems.end)}},styles:[".close[_ngcontent-%COMP%]{font-size:1.6rem!important}.dropdown-toggle[_ngcontent-%COMP%]{line-height:28px}"]})}var So=k(1366);class Xo{static#e=this.\u0275fac=function(p){return new(p||Xo)};static#t=this.\u0275mod=t.oAB({type:Xo});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,ht.Bz,Gt,So.XC]})}t.B6R(ar,[Ht.mk,Ht.sg,Ht.O5,Ht.tP,ht.rH,ht.Od,Jt,So.jt,So.iD,So.Vi,So.TH],[Ht.Ov]),t.B6R(li,[Ht.mk,Ht.sg,Ht.O5,Ht.tP,Ht.PC,ht.rH,ht.Od,Jt],[]),t.B6R(ce.F,[Ht.O5,ar,li],[Ht.Ov]);class cs{static#e=this.\u0275fac=function(p){return new(p||cs)};static#t=this.\u0275mod=t.oAB({type:cs});static#n=this.\u0275inj=t.cJS({imports:[Er,Ei,Xo]})}var Cs=k(2821),Nr=(k(5779),k(7390));class _o{static#e=this.\u0275fac=function(p){return new(p||_o)};static#t=this.\u0275mod=t.oAB({type:_o});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}class Fr{constructor(y){this.templateRef=y}static#e=this.\u0275fac=function(p){return new(p||Fr)(t.Y36(t.Rgc))};static#t=this.\u0275dir=t.lG2({type:Fr,selectors:[["","mtsTreeNodeTemplate",""]]})}var gr=k(9751),Ao=k(576);function yo(P){return!!P&&(P instanceof gr.y||(0,Ao.m)(P.lift)&&(0,Ao.m)(P.subscribe))}var Ds=k(4033);class oa{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(y=!1,p,S=!0,J){this._multiple=y,this._emitChanges=S,this.compareWith=J,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ot.x,p&&p.length&&(y?p.forEach(me=>this._markSelected(me)):this._markSelected(p[0]),this._selectedToEmit.length=0)}select(...y){this._verifyValueAssignment(y),y.forEach(S=>this._markSelected(S));const p=this._hasQueuedChanges();return this._emitChangeEvent(),p}deselect(...y){this._verifyValueAssignment(y),y.forEach(S=>this._unmarkSelected(S));const p=this._hasQueuedChanges();return this._emitChangeEvent(),p}setSelection(...y){this._verifyValueAssignment(y);const p=this.selected,S=new Set(y);y.forEach(me=>this._markSelected(me)),p.filter(me=>!S.has(me)).forEach(me=>this._unmarkSelected(me));const J=this._hasQueuedChanges();return this._emitChangeEvent(),J}toggle(y){return this.isSelected(y)?this.deselect(y):this.select(y)}clear(y=!0){this._unmarkAll();const p=this._hasQueuedChanges();return y&&this._emitChangeEvent(),p}isSelected(y){if(this.compareWith){for(const p of this._selection)if(this.compareWith(p,y))return!0;return!1}return this._selection.has(y)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(y){this._multiple&&this.selected&&this._selected.sort(y)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(y){this.isSelected(y)||(this._multiple||this._unmarkAll(),this.isSelected(y)||this._selection.add(y),this._emitChanges&&this._selectedToEmit.push(y))}_unmarkSelected(y){this.isSelected(y)&&(this._selection.delete(y),this._emitChanges&&this._deselectedToEmit.push(y))}_unmarkAll(){this.isEmpty()||this._selection.forEach(y=>this._unmarkSelected(y))}_verifyValueAssignment(y){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}var Ja=k(9646),_r=k(2722),ji=k(1281);const Xl=new t.OlP("cdk-dir-doc",{providedIn:"root",factory:function Fl(){return(0,t.f3M)(Ht.K0)}}),Na=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Po=(()=>{class P{constructor(p){this.value="ltr",this.change=new t.vpe,p&&(this.value=function qa(P){const y=P?.toLowerCase()||"";return"auto"===y&&typeof navigator<"u"&&navigator?.language?Na.test(navigator.language)?"rtl":"ltr":"rtl"===y?"rtl":"ltr"}((p.body?p.body.dir:null)||(p.documentElement?p.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Xl,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),_a=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({}),P})();class sa{constructor(){this.expansionModel=new oa(!0)}toggle(y){this.expansionModel.toggle(this._trackByValue(y))}expand(y){this.expansionModel.select(this._trackByValue(y))}collapse(y){this.expansionModel.deselect(this._trackByValue(y))}isExpanded(y){return this.expansionModel.isSelected(this._trackByValue(y))}toggleDescendants(y){this.expansionModel.isSelected(this._trackByValue(y))?this.collapseDescendants(y):this.expandDescendants(y)}collapseAll(){this.expansionModel.clear()}expandDescendants(y){let p=[y];p.push(...this.getDescendants(y)),this.expansionModel.select(...p.map(S=>this._trackByValue(S)))}collapseDescendants(y){let p=[y];p.push(...this.getDescendants(y)),this.expansionModel.deselect(...p.map(S=>this._trackByValue(S)))}_trackByValue(y){return this.trackBy?this.trackBy(y):y}}class Fa extends sa{constructor(y,p,S){super(),this.getLevel=y,this.isExpandable=p,this.options=S,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(y){const S=[];for(let J=this.dataNodes.indexOf(y)+1;J<this.dataNodes.length&&this.getLevel(y)<this.getLevel(this.dataNodes[J]);J++)S.push(this.dataNodes[J]);return S}expandAll(){this.expansionModel.select(...this.dataNodes.map(y=>this._trackByValue(y)))}}const Uo=new t.OlP("CDK_TREE_NODE_OUTLET_NODE");let Es=(()=>{class P{constructor(p,S){this.viewContainer=p,this._node=S}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.s_b),t.Y36(Uo,8))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdkTreeNodeOutlet",""]]}),P})();class Ts{constructor(y){this.$implicit=y}}let Zs=(()=>{class P{constructor(p){this.template=p}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.Rgc))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),P})(),jo=(()=>{class P{get dataSource(){return this._dataSource}set dataSource(p){this._dataSource!==p&&this._switchDataSource(p)}constructor(p,S){this._differs=p,this._changeDetectorRef=S,this._onDestroy=new Ot.x,this._levels=new Map,this.viewChange=new ii.X({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const p=this._nodeDefs.filter(S=>!S.when);this._defaultNodeDef=p[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(p){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),p||this._nodeOutlet.viewContainer.clear(),this._dataSource=p,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let p;!function Oo(P){return P&&"function"==typeof P.connect&&!(P instanceof Ds.c)}(this._dataSource)?yo(this._dataSource)?p=this._dataSource:Array.isArray(this._dataSource)&&(p=(0,Ja.of)(this._dataSource)):p=this._dataSource.connect(this),p&&(this._dataSubscription=p.pipe((0,_r.R)(this._onDestroy)).subscribe(S=>this.renderNodeChanges(S)))}renderNodeChanges(p,S=this._dataDiffer,J=this._nodeOutlet.viewContainer,me){const rt=S.diff(p);rt&&(rt.forEachOperation((Bt,Tn,Rn)=>{if(null==Bt.previousIndex)this.insertNode(p[Rn],Rn,J,me);else if(null==Rn)J.remove(Tn),this._levels.delete(Bt.item);else{const ri=J.get(Tn);J.move(ri,Rn)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(p,S){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(me=>me.when&&me.when(S,p))||this._defaultNodeDef}insertNode(p,S,J,me){const rt=this._getNodeDef(p,S),Bt=new Ts(p);Bt.level=this.treeControl.getLevel?this.treeControl.getLevel(p):typeof me<"u"&&this._levels.has(me)?this._levels.get(me)+1:0,this._levels.set(p,Bt.level),(J||this._nodeOutlet.viewContainer).createEmbeddedView(rt.template,Bt,S),qr.mostRecentTreeNode&&(qr.mostRecentTreeNode.data=p)}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.ZZ4),t.Y36(t.sBO))},P.\u0275cmp=t.Xpm({type:P,selectors:[["cdk-tree"]],contentQueries:function(p,S,J){if(1&p&&t.Suo(J,Zs,5),2&p){let me;t.iGM(me=t.CRH())&&(S._nodeDefs=me)}},viewQuery:function(p,S){if(1&p&&t.Gf(Es,7),2&p){let J;t.iGM(J=t.CRH())&&(S._nodeOutlet=J.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(p,S){1&p&&t.GkF(0,0)},dependencies:[Es],encapsulation:2}),P})(),qr=(()=>{class P{get role(){return"treeitem"}set role(p){this._elementRef.nativeElement.setAttribute("role",p)}get data(){return this._data}set data(p){p!==this._data&&(this._data=p,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(p,S){this._elementRef=p,this._tree=S,this._destroyed=new Ot.x,this._dataChanges=new Ot.x,P.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=function ko(P){let y=P.parentElement;for(;y&&!Ba(y);)y=y.parentElement;return y?y.classList.contains("cdk-nested-tree-node")?(0,ji.su)(y.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){P.mostRecentTreeNode===this&&(P.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return P.mostRecentTreeNode=null,P.\u0275fac=function(p){return new(p||P)(t.Y36(t.SBq),t.Y36(jo))},P.\u0275dir=t.lG2({type:P,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(p,S){2&p&&t.uIk("aria-expanded",S.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),P})();function Ba(P){const y=P.classList;return!(!y?.contains("cdk-nested-tree-node")&&!y?.contains("cdk-tree"))}const Hr=/([A-Za-z%]+)$/;let Ms=(()=>{class P{get level(){return this._level}set level(p){this._setLevelInput(p)}get indent(){return this._indent}set indent(p){this._setIndentInput(p)}constructor(p,S,J,me){this._treeNode=p,this._tree=S,this._element=J,this._dir=me,this._destroyed=new Ot.x,this.indentUnits="px",this._indent=40,this._setPadding(),me&&me.change.pipe((0,_r.R)(this._destroyed)).subscribe(()=>this._setPadding(!0)),p._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const p=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,S=null==this._level?p:this._level;return"number"==typeof S?`${S*this._indent}${this.indentUnits}`:null}_setPadding(p=!1){const S=this._paddingIndent();if(S!==this._currentPadding||p){const J=this._element.nativeElement,me=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",rt="paddingLeft"===me?"paddingRight":"paddingLeft";J.style[me]=S||"",J.style[rt]="",this._currentPadding=S}}_setLevelInput(p){this._level=(0,ji.su)(p,null),this._setPadding()}_setIndentInput(p){let S=p,J="px";if("string"==typeof p){const me=p.split(Hr);S=me[0],J=me[1]||J}this.indentUnits=J,this._indent=(0,ji.su)(S),this._setPadding()}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(qr),t.Y36(jo),t.Y36(t.SBq),t.Y36(Po,8))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),P})(),Yo=(()=>{class P{get recursive(){return this._recursive}set recursive(p){this._recursive=(0,ji.Ig)(p)}constructor(p,S){this._tree=p,this._treeNode=S,this._recursive=!1}_toggle(p){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),p.stopPropagation()}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(jo),t.Y36(qr))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(p,S){1&p&&t.NdJ("click",function(me){return S._toggle(me)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),P})(),fc=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({}),P})();function Fs(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"div",8)(1,"input",9),t.NdJ("change",function(){t.CHM(p);const J=t.oxw().$implicit,me=t.oxw();return t.KtG(me.checklistSelection.toggle(J))}),t.qZA()()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.MGl("name","node-",p.level,""),t.Q6J("checked",S.checklistSelection.isSelected(p))}}function Ro(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"a",10),t.NdJ("contextmenu",function(){t.CHM(p);const J=t.oxw().$implicit,me=t.oxw();return t.KtG(me.nodeClick.emit(J))}),t._uU(1),t.qZA()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.Oqu(S.titleFieldFunc(p.data))}}function us(P,y){1&P&&t.GkF(0)}const ya=function(P){return{$implicit:P}};function ns(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"div",10),t.NdJ("contextmenu",function(){t.CHM(p);const J=t.oxw().$implicit,me=t.oxw();return t.KtG(me.nodeClick.emit(J))}),t.YNc(1,us,1,0,"ng-container",11),t.qZA()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",S._treeNodeTemplate.templateRef)("ngTemplateOutletContext",t.VKq(2,ya,p))}}function za(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"cdk-tree-node",3),t.NdJ("click",function(J){const rt=t.CHM(p).$implicit,Bt=t.oxw();return t.KtG(Bt._lazyLoadTreeNode(rt,J))}),t.TgZ(1,"button",4),t._UZ(2,"i",5),t.qZA(),t._uU(3,"\xa0 "),t.YNc(4,Fs,2,2,"div",6),t.YNc(5,Ro,2,1,"a",7),t.YNc(6,ns,2,4,"div",7),t.qZA()}if(2&P){const p=y.$implicit,S=t.oxw();t.Udp("display",S.shouldRender(p)?"flex":"none"),t.xp6(4),t.Q6J("ngIf",S.selectable),t.xp6(1),t.Q6J("ngIf",!S._treeNodeTemplate),t.xp6(1),t.Q6J("ngIf",S._treeNodeTemplate)}}function ds(P,y){if(1&P&&(t.TgZ(0,"div",8),t._UZ(1,"input",15),t.qZA()),2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.MGl("name","node-",p.level,""),t.Q6J("checked",S.descendantsAllSelected(p))}}function re(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"a",10),t.NdJ("contextmenu",function(){t.CHM(p);const J=t.oxw().$implicit,me=t.oxw();return t.KtG(me.nodeClick.emit(J))}),t._uU(1),t.qZA()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.Oqu(S.titleFieldFunc(p.data))}}function ne(P,y){1&P&&t.GkF(0)}function Y(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"div",10),t.NdJ("contextmenu",function(){t.CHM(p);const J=t.oxw().$implicit,me=t.oxw();return t.KtG(me.nodeClick.emit(J))}),t.YNc(1,ne,1,0,"ng-container",11),t.qZA()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",S._treeNodeTemplate.templateRef)("ngTemplateOutletContext",t.VKq(2,ya,p))}}function Te(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"cdk-tree-node",12)(1,"button",13),t.NdJ("click",function(J){const rt=t.CHM(p).$implicit;return t.oxw()._lazyLoadTreeNode(rt,J),t.KtG(rt.isExpanded=!rt.isExpanded)}),t._UZ(2,"i",14),t.qZA(),t.YNc(3,ds,2,2,"div",6),t.YNc(4,re,2,1,"a",7),t.YNc(5,Y,2,4,"div",7),t.qZA()}if(2&P){const p=y.$implicit,S=t.oxw();t.Udp("display",S.shouldRender(p)?"flex":"none"),t.xp6(1),t.Udp("visibility",p.expandable?"visible":"hidden"),t.uIk("aria-label","Toggle "+p.name),t.xp6(1),t.Udp("transform",S._transformSort(p)),t.xp6(1),t.Q6J("ngIf",S.selectable),t.xp6(1),t.Q6J("ngIf",!S._treeNodeTemplate),t.xp6(1),t.Q6J("ngIf",S._treeNodeTemplate)}}class kt{constructor(){this.dataSource=[],this.treeControl=new Fa(y=>y.level,y=>y.expandable),this.selectable=!1,this.nodeClick=new t.vpe,this.checklistSelection=new oa(!0),this.hasChild=(y,p)=>p.expandable}set loader(y){if("function"!=typeof y)throw"Invalid data loader";this._loader=y}_transformSort(y){return`rotate(${this.treeControl.isExpanded(y)?-90:0}deg)`}ngOnInit(){if(!this.titleFieldFunc)throw"titleFieldFunc is required";if(!this.expandableNode)throw"expandableNode is required";let y=this._loader(null);y instanceof gr.y&&y.subscribe(p=>{let S=[];S=[...p],this.dataSource.push(...this._mapDataToTreeControlFormat(S,null)),this.dataSource=[...this.dataSource]})}_lazyLoadTreeNode(y,p){if(p.stopPropagation(),y.children&&!y.isLoadedChild){const S=this._loader(y);yo(S)&&S.subscribe(J=>{this.addChildren(J,y)})}}addChildren(y,p){const S=this.dataSource.findIndex(J=>J===p);this.nodeClick.emit(p.data),p.children=this._mapDataToTreeControlFormat(y,p),p.isLoadedChild||this.dataSource.splice(S+1,0,...p.children),p.isLoadedChild=!0,this.dataSource=[...this.dataSource]}_mapDataToTreeControlFormat(y,p){const S=[];for(let J of y){let me=Object.assign(new Qr,J);me.parent=p,me.data=J,me.expandable=this.expandableNode?.(J),S.push(me)}return S}getParentNode(y){for(let S=this.dataSource.indexOf(y)-1;S>=0;S--)if(this.dataSource[S].level===y.level-1)return this.dataSource[S];return null}shouldRender(y){let p=this.getParentNode(y);for(;p;){if(!p.isExpanded)return!1;p=this.getParentNode(p)}return!0}descendantsAllSelected(y){}static#e=this.\u0275fac=function(p){return new(p||kt)};static#t=this.\u0275cmp=t.Xpm({type:kt,selectors:[["mts-tree"]],contentQueries:function(p,S,J){if(1&p&&t.Suo(J,Fr,5),2&p){let me;t.iGM(me=t.CRH())&&(S._treeNodeTemplate=me.first)}},inputs:{selectable:"selectable",titleFieldFunc:"titleFieldFunc",expandableNode:"expandableNode",loader:"loader"},outputs:{nodeClick:"nodeClick"},decls:3,vars:3,consts:[[3,"dataSource","treeControl"],["class","example-tree-node","cdkTreeNodePadding","",3,"display","click",4,"cdkTreeNodeDef"],["cdkTreeNodePadding","","class","example-tree-node",3,"display",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkTreeNodePadding","",1,"example-tree-node",3,"click"],["disabled","",1,"btn","btn-light"],[1,"fa-solid","fa-period"],["class","form-check",4,"ngIf"],[3,"contextmenu",4,"ngIf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"name","checked","change"],[3,"contextmenu"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkTreeNodePadding","",1,"example-tree-node"],["cdkTreeNodeToggle","",1,"btn","me-2",3,"click"],[1,"fa-solid","fa-chevron-left","d-inline-block"],["type","checkbox",1,"form-check-input",3,"name","checked"]],template:function(p,S){1&p&&(t.TgZ(0,"cdk-tree",0),t.YNc(1,za,7,5,"cdk-tree-node",1),t.YNc(2,Te,6,10,"cdk-tree-node",2),t.qZA()),2&p&&(t.Q6J("dataSource",S.dataSource)("treeControl",S.treeControl),t.xp6(2),t.Q6J("cdkTreeNodeDefWhen",S.hasChild))},dependencies:[Ht.O5,Ht.tP,Zs,Ms,Yo,jo,qr],styles:[".example-tree-node[_ngcontent-%COMP%]{display:flex;align-items:center}.example-tree-node[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:baseline}"]})}class Bn{static#e=this.\u0275fac=function(p){return new(p||Bn)};static#t=this.\u0275mod=t.oAB({type:Bn});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,fc,o.u5]})}class Qr{constructor(y){this.id=y?.id,this.parent=y?.parent,this.children=y?.children?.length?y?.children:[],this.expanded=null==y?.expanded||0==y.expanded,this.expandable=null==y?.expandable||1==y.expandable,this.data=y?.data,this.isLoadedChild=y?.isLoadedChild}get level(){if(typeof this._level>"u"){this._level=0;let y=this.parent;for(;null!=y;)y=y.parent,this._level++}return this._level}}k(9541);var hs=k(8658),Ss=k(5795);class Xa{static#e=this.\u0275fac=function(p){return new(p||Xa)};static#t=this.\u0275mod=t.oAB({type:Xa});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}const on=new t.OlP("APP_DIALOG_DATA");class Pi{constructor(){this.size="md"}}var Yi=k(3353),Ys=k(727);var z=k(8505),Q=k(8372),K=k(9300),ye=k(5698),Oe=k(5684),et=k(1884);let ut=(()=>{class P{create(p){return typeof MutationObserver>"u"?null:new MutationObserver(p)}}return P.\u0275fac=function(p){return new(p||P)},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Ft=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({providers:[ut]}),P})();var rn=k(2289);let io=(()=>{class P{constructor(p){this._platform=p}isDisabled(p){return p.hasAttribute("disabled")}isVisible(p){return function Do(P){return!!(P.offsetWidth||P.offsetHeight||"function"==typeof P.getClientRects&&P.getClientRects().length)}(p)&&"visible"===getComputedStyle(p).visibility}isTabbable(p){if(!this._platform.isBrowser)return!1;const S=function ms(P){try{return P.frameElement}catch{return null}}(function vc(P){return P.ownerDocument&&P.ownerDocument.defaultView||window}(p));if(S&&(-1===Ta(S)||!this.isVisible(S)))return!1;let J=p.nodeName.toLowerCase(),me=Ta(p);return p.hasAttribute("contenteditable")?-1!==me:!("iframe"===J||"object"===J||this._platform.WEBKIT&&this._platform.IOS&&!function Ga(P){let y=P.nodeName.toLowerCase(),p="input"===y&&P.type;return"text"===p||"password"===p||"select"===y||"textarea"===y}(p))&&("audio"===J?!!p.hasAttribute("controls")&&-1!==me:"video"===J?-1!==me&&(null!==me||this._platform.FIREFOX||p.hasAttribute("controls")):p.tabIndex>=0)}isFocusable(p,S){return function yc(P){return!function po(P){return function Us(P){return"input"==P.nodeName.toLowerCase()}(P)&&"hidden"==P.type}(P)&&(function $r(P){let y=P.nodeName.toLowerCase();return"input"===y||"select"===y||"button"===y||"textarea"===y}(P)||function ha(P){return function Ea(P){return"a"==P.nodeName.toLowerCase()}(P)&&P.hasAttribute("href")}(P)||P.hasAttribute("contenteditable")||Go(P))}(p)&&!this.isDisabled(p)&&(S?.ignoreVisibility||this.isVisible(p))}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Yi.t4))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Go(P){if(!P.hasAttribute("tabindex")||void 0===P.tabIndex)return!1;let y=P.getAttribute("tabindex");return!(!y||isNaN(parseInt(y,10)))}function Ta(P){if(!Go(P))return null;const y=parseInt(P.getAttribute("tabindex")||"",10);return isNaN(y)?-1:y}class bc{get enabled(){return this._enabled}set enabled(y){this._enabled=y,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(y,this._startAnchor),this._toggleAnchorTabIndex(y,this._endAnchor))}constructor(y,p,S,J,me=!1){this._element=y,this._checker=p,this._ngZone=S,this._document=J,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,me||this.attachAnchors()}destroy(){const y=this._startAnchor,p=this._endAnchor;y&&(y.removeEventListener("focus",this.startAnchorListener),y.remove()),p&&(p.removeEventListener("focus",this.endAnchorListener),p.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(y){return new Promise(p=>{this._executeOnStable(()=>p(this.focusInitialElement(y)))})}focusFirstTabbableElementWhenReady(y){return new Promise(p=>{this._executeOnStable(()=>p(this.focusFirstTabbableElement(y)))})}focusLastTabbableElementWhenReady(y){return new Promise(p=>{this._executeOnStable(()=>p(this.focusLastTabbableElement(y)))})}_getRegionBoundary(y){const p=this._element.querySelectorAll(`[cdk-focus-region-${y}], [cdkFocusRegion${y}], [cdk-focus-${y}]`);return"start"==y?p.length?p[0]:this._getFirstTabbableElement(this._element):p.length?p[p.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(y){const p=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(p){if(!this._checker.isFocusable(p)){const S=this._getFirstTabbableElement(p);return S?.focus(y),!!S}return p.focus(y),!0}return this.focusFirstTabbableElement(y)}focusFirstTabbableElement(y){const p=this._getRegionBoundary("start");return p&&p.focus(y),!!p}focusLastTabbableElement(y){const p=this._getRegionBoundary("end");return p&&p.focus(y),!!p}hasAttached(){return this._hasAttached}_getFirstTabbableElement(y){if(this._checker.isFocusable(y)&&this._checker.isTabbable(y))return y;const p=y.children;for(let S=0;S<p.length;S++){const J=p[S].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(p[S]):null;if(J)return J}return null}_getLastTabbableElement(y){if(this._checker.isFocusable(y)&&this._checker.isTabbable(y))return y;const p=y.children;for(let S=p.length-1;S>=0;S--){const J=p[S].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(p[S]):null;if(J)return J}return null}_createAnchor(){const y=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,y),y.classList.add("cdk-visually-hidden"),y.classList.add("cdk-focus-trap-anchor"),y.setAttribute("aria-hidden","true"),y}_toggleAnchorTabIndex(y,p){y?p.setAttribute("tabindex","0"):p.removeAttribute("tabindex")}toggleAnchors(y){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(y,this._startAnchor),this._toggleAnchorTabIndex(y,this._endAnchor))}_executeOnStable(y){this._ngZone.isStable?y():this._ngZone.onStable.pipe((0,ye.q)(1)).subscribe(y)}}let nc=(()=>{class P{constructor(p,S,J){this._checker=p,this._ngZone=S,this._document=J}create(p,S=!1){return new bc(p,this._checker,this._ngZone,this._document,S)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(io),t.LFG(t.R0b),t.LFG(Ht.K0))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const hr=new t.OlP("cdk-input-modality-detector-options"),$a={ignoreKeys:[18,17,224,91,16]},Ma=(0,Yi.i$)({passive:!0,capture:!0});let Ld=(()=>{class P{get mostRecentModality(){return this._modality.value}constructor(p,S,J,me){this._platform=p,this._mostRecentTarget=null,this._modality=new ii.X(null),this._lastTouchMs=0,this._onKeydown=rt=>{this._options?.ignoreKeys?.some(Bt=>Bt===rt.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Yi.sA)(rt))},this._onMousedown=rt=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function Lc(P){return 0===P.buttons||0===P.offsetX&&0===P.offsetY}(rt)?"keyboard":"mouse"),this._mostRecentTarget=(0,Yi.sA)(rt))},this._onTouchstart=rt=>{!function xc(P){const y=P.touches&&P.touches[0]||P.changedTouches&&P.changedTouches[0];return!(!y||-1!==y.identifier||null!=y.radiusX&&1!==y.radiusX||null!=y.radiusY&&1!==y.radiusY)}(rt)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Yi.sA)(rt)):this._modality.next("keyboard")},this._options={...$a,...me},this.modalityDetected=this._modality.pipe((0,Oe.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,et.x)()),p.isBrowser&&S.runOutsideAngular(()=>{J.addEventListener("keydown",this._onKeydown,Ma),J.addEventListener("mousedown",this._onMousedown,Ma),J.addEventListener("touchstart",this._onTouchstart,Ma)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ma),document.removeEventListener("mousedown",this._onMousedown,Ma),document.removeEventListener("touchstart",this._onTouchstart,Ma))}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Yi.t4),t.LFG(t.R0b),t.LFG(Ht.K0),t.LFG(hr,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const Bu=new t.OlP("cdk-focus-monitor-default-options"),rc=(0,Yi.i$)({passive:!0,capture:!0});let Xs=(()=>{class P{constructor(p,S,J,me,rt){this._ngZone=p,this._platform=S,this._inputModalityDetector=J,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ot.x,this._rootNodeFocusAndBlurListener=Bt=>{for(let Rn=(0,Yi.sA)(Bt);Rn;Rn=Rn.parentElement)"focus"===Bt.type?this._onFocus(Bt,Rn):this._onBlur(Bt,Rn)},this._document=me,this._detectionMode=rt?.detectionMode||0}monitor(p,S=!1){const J=(0,ji.fI)(p);if(!this._platform.isBrowser||1!==J.nodeType)return(0,Ja.of)(null);const me=(0,Yi.kV)(J)||this._getDocument(),rt=this._elementInfo.get(J);if(rt)return S&&(rt.checkChildren=!0),rt.subject;const Bt={checkChildren:S,subject:new Ot.x,rootNode:me};return this._elementInfo.set(J,Bt),this._registerGlobalListeners(Bt),Bt.subject}stopMonitoring(p){const S=(0,ji.fI)(p),J=this._elementInfo.get(S);J&&(J.subject.complete(),this._setClasses(S),this._elementInfo.delete(S),this._removeGlobalListeners(J))}focusVia(p,S,J){const me=(0,ji.fI)(p);me===this._getDocument().activeElement?this._getClosestElementsInfo(me).forEach(([Bt,Tn])=>this._originChanged(Bt,S,Tn)):(this._setOrigin(S),"function"==typeof me.focus&&me.focus(J))}ngOnDestroy(){this._elementInfo.forEach((p,S)=>this.stopMonitoring(S))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(p){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(p)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:p&&this._isLastInteractionFromInputLabel(p)?"mouse":"program"}_shouldBeAttributedToTouch(p){return 1===this._detectionMode||!!p?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(p,S){p.classList.toggle("cdk-focused",!!S),p.classList.toggle("cdk-touch-focused","touch"===S),p.classList.toggle("cdk-keyboard-focused","keyboard"===S),p.classList.toggle("cdk-mouse-focused","mouse"===S),p.classList.toggle("cdk-program-focused","program"===S)}_setOrigin(p,S=!1){this._ngZone.runOutsideAngular(()=>{this._origin=p,this._originFromTouchInteraction="touch"===p&&S,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(p,S){const J=this._elementInfo.get(S),me=(0,Yi.sA)(p);!J||!J.checkChildren&&S!==me||this._originChanged(S,this._getFocusOrigin(me),J)}_onBlur(p,S){const J=this._elementInfo.get(S);!J||J.checkChildren&&p.relatedTarget instanceof Node&&S.contains(p.relatedTarget)||(this._setClasses(S),this._emitOrigin(J,null))}_emitOrigin(p,S){p.subject.observers.length&&this._ngZone.run(()=>p.subject.next(S))}_registerGlobalListeners(p){if(!this._platform.isBrowser)return;const S=p.rootNode,J=this._rootNodeFocusListenerCount.get(S)||0;J||this._ngZone.runOutsideAngular(()=>{S.addEventListener("focus",this._rootNodeFocusAndBlurListener,rc),S.addEventListener("blur",this._rootNodeFocusAndBlurListener,rc)}),this._rootNodeFocusListenerCount.set(S,J+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,_r.R)(this._stopInputModalityDetector)).subscribe(me=>{this._setOrigin(me,!0)}))}_removeGlobalListeners(p){const S=p.rootNode;if(this._rootNodeFocusListenerCount.has(S)){const J=this._rootNodeFocusListenerCount.get(S);J>1?this._rootNodeFocusListenerCount.set(S,J-1):(S.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rc),S.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rc),this._rootNodeFocusListenerCount.delete(S))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(p,S,J){this._setClasses(p,S),this._emitOrigin(J,S),this._lastFocusOrigin=S}_getClosestElementsInfo(p){const S=[];return this._elementInfo.forEach((J,me)=>{(me===p||J.checkChildren&&me.contains(p))&&S.push([me,J])}),S}_isLastInteractionFromInputLabel(p){const{_mostRecentTarget:S,mostRecentModality:J}=this._inputModalityDetector;if("mouse"!==J||!S||S===p||"INPUT"!==p.nodeName&&"TEXTAREA"!==p.nodeName||p.disabled)return!1;const me=p.labels;if(me)for(let rt=0;rt<me.length;rt++)if(me[rt].contains(S))return!0;return!1}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(t.R0b),t.LFG(Yi.t4),t.LFG(Ld),t.LFG(Ht.K0,8),t.LFG(Bu,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const ld="cdk-high-contrast-black-on-white",cl="cdk-high-contrast-white-on-black",ro="cdk-high-contrast-active";let Il=(()=>{class P{constructor(p,S){this._platform=p,this._document=S,this._breakpointSubscription=(0,t.f3M)(rn.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const p=this._document.createElement("div");p.style.backgroundColor="rgb(1,2,3)",p.style.position="absolute",this._document.body.appendChild(p);const S=this._document.defaultView||window,J=S&&S.getComputedStyle?S.getComputedStyle(p):null,me=(J&&J.backgroundColor||"").replace(/ /g,"");switch(p.remove(),me){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const p=this._document.body.classList;p.remove(ro,ld,cl),this._hasCheckedHighContrastMode=!0;const S=this.getHighContrastMode();1===S?p.add(ro,ld):2===S&&p.add(ro,cl)}}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Yi.t4),t.LFG(Ht.K0))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),oh=(()=>{class P{constructor(p){p._applyBodyHighContrastModeCssClasses()}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Il))},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({imports:[Ft]}),P})();var Al=k(4968),sh=k(4408);const wc={schedule(P){let y=requestAnimationFrame,p=cancelAnimationFrame;const{delegate:S}=wc;S&&(y=S.requestAnimationFrame,p=S.cancelAnimationFrame);const J=y(me=>{p=void 0,P(me)});return new Ys.w0(()=>p?.(J))},requestAnimationFrame(...P){const{delegate:y}=wc;return(y?.requestAnimationFrame||requestAnimationFrame)(...P)},cancelAnimationFrame(...P){const{delegate:y}=wc;return(y?.cancelAnimationFrame||cancelAnimationFrame)(...P)},delegate:void 0};var Cc=k(640);const cd=new class Dc extends Cc.v{flush(y){this._active=!0;const p=this._scheduled;this._scheduled=void 0;const{actions:S}=this;let J;y=y||S.shift();do{if(J=y.execute(y.state,y.delay))break}while((y=S[0])&&y.id===p&&S.shift());if(this._active=!1,J){for(;(y=S[0])&&y.id===p&&S.shift();)y.unsubscribe();throw J}}}(class lu extends sh.o{constructor(y,p){super(y,p),this.scheduler=y,this.work=p}requestAsyncId(y,p,S=0){return null!==S&&S>0?super.requestAsyncId(y,p,S):(y.actions.push(this),y._scheduled||(y._scheduled=wc.requestAnimationFrame(()=>y.flush(void 0))))}recycleAsyncId(y,p,S=0){var J;if(null!=S?S>0:this.delay>0)return super.recycleAsyncId(y,p,S);const{actions:me}=y;null!=p&&(null===(J=me[me.length-1])||void 0===J?void 0:J.id)!==p&&(wc.cancelAnimationFrame(p),y._scheduled=void 0)}});let Vd,zh=1;const ea={};function ud(P){return P in ea&&(delete ea[P],!0)}const Wc={setImmediate(P){const y=zh++;return ea[y]=!0,Vd||(Vd=Promise.resolve()),Vd.then(()=>ud(y)&&P()),y},clearImmediate(P){ud(P)}},{setImmediate:_s,clearImmediate:ul}=Wc,cu={setImmediate(...P){const{delegate:y}=cu;return(y?.setImmediate||_s)(...P)},clearImmediate(P){const{delegate:y}=cu;return(y?.clearImmediate||ul)(P)},delegate:void 0},dd=new class sc extends Cc.v{flush(y){this._active=!0;const p=this._scheduled;this._scheduled=void 0;const{actions:S}=this;let J;y=y||S.shift();do{if(J=y.execute(y.state,y.delay))break}while((y=S[0])&&y.id===p&&S.shift());if(this._active=!1,J){for(;(y=S[0])&&y.id===p&&S.shift();)y.unsubscribe();throw J}}}(class oo extends sh.o{constructor(y,p){super(y,p),this.scheduler=y,this.work=p}requestAsyncId(y,p,S=0){return null!==S&&S>0?super.requestAsyncId(y,p,S):(y.actions.push(this),y._scheduled||(y._scheduled=cu.setImmediate(y.flush.bind(y,void 0))))}recycleAsyncId(y,p,S=0){var J;if(null!=S?S>0:this.delay>0)return super.recycleAsyncId(y,p,S);const{actions:me}=y;null!=p&&(null===(J=me[me.length-1])||void 0===J?void 0:J.id)!==p&&(cu.clearImmediate(p),y._scheduled=void 0)}});var hd=k(4986),pd=k(4482),fd=k(8421),ch=k(5403),gd=k(5963);function uu(P,y=hd.z){return function md(P){return(0,pd.e)((y,p)=>{let S=!1,J=null,me=null,rt=!1;const Bt=()=>{if(me?.unsubscribe(),me=null,S){S=!1;const Rn=J;J=null,p.next(Rn)}rt&&p.complete()},Tn=()=>{me=null,rt&&p.complete()};y.subscribe((0,ch.x)(p,Rn=>{S=!0,J=Rn,me||(0,fd.Xf)(P(Rn)).subscribe(me=(0,ch.x)(p,Bt,Tn))},()=>{rt=!0,(!S||!me||me.closed)&&p.complete()}))})}(()=>(0,gd.H)(P,y))}var zu=k(8675);const Bc=["contentWrapper"],up=["*"],uh=new t.OlP("VIRTUAL_SCROLL_STRATEGY");let Kc=(()=>{class P{constructor(p,S,J){this._ngZone=p,this._platform=S,this._scrolled=new Ot.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=J}register(p){this.scrollContainers.has(p)||this.scrollContainers.set(p,p.elementScrolled().subscribe(()=>this._scrolled.next(p)))}deregister(p){const S=this.scrollContainers.get(p);S&&(S.unsubscribe(),this.scrollContainers.delete(p))}scrolled(p=20){return this._platform.isBrowser?new gr.y(S=>{this._globalSubscription||this._addGlobalListener();const J=p>0?this._scrolled.pipe(uu(p)).subscribe(S):this._scrolled.subscribe(S);return this._scrolledCount++,()=>{J.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Ja.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((p,S)=>this.deregister(S)),this._scrolled.complete()}ancestorScrolled(p,S){const J=this.getAncestorScrollContainers(p);return this.scrolled(S).pipe((0,K.h)(me=>!me||J.indexOf(me)>-1))}getAncestorScrollContainers(p){const S=[];return this.scrollContainers.forEach((J,me)=>{this._scrollableContainsElement(me,p)&&S.push(me)}),S}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(p,S){let J=(0,ji.fI)(S),me=p.getElementRef().nativeElement;do{if(J==me)return!0}while(J=J.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const p=this._getWindow();return(0,Al.R)(p.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(t.R0b),t.LFG(Yi.t4),t.LFG(Ht.K0,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),jd=(()=>{class P{constructor(p,S,J,me){this.elementRef=p,this.scrollDispatcher=S,this.ngZone=J,this.dir=me,this._destroyed=new Ot.x,this._elementScrolled=new gr.y(rt=>this.ngZone.runOutsideAngular(()=>(0,Al.R)(this.elementRef.nativeElement,"scroll").pipe((0,_r.R)(this._destroyed)).subscribe(rt)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(p){const S=this.elementRef.nativeElement,J=this.dir&&"rtl"==this.dir.value;null==p.left&&(p.left=J?p.end:p.start),null==p.right&&(p.right=J?p.start:p.end),null!=p.bottom&&(p.top=S.scrollHeight-S.clientHeight-p.bottom),J&&0!=(0,Yi._i)()?(null!=p.left&&(p.right=S.scrollWidth-S.clientWidth-p.left),2==(0,Yi._i)()?p.left=p.right:1==(0,Yi._i)()&&(p.left=p.right?-p.right:p.right)):null!=p.right&&(p.left=S.scrollWidth-S.clientWidth-p.right),this._applyScrollToOptions(p)}_applyScrollToOptions(p){const S=this.elementRef.nativeElement;(0,Yi.Mq)()?S.scrollTo(p):(null!=p.top&&(S.scrollTop=p.top),null!=p.left&&(S.scrollLeft=p.left))}measureScrollOffset(p){const S="left",J="right",me=this.elementRef.nativeElement;if("top"==p)return me.scrollTop;if("bottom"==p)return me.scrollHeight-me.clientHeight-me.scrollTop;const rt=this.dir&&"rtl"==this.dir.value;return"start"==p?p=rt?J:S:"end"==p&&(p=rt?S:J),rt&&2==(0,Yi._i)()?p==S?me.scrollWidth-me.clientWidth-me.scrollLeft:me.scrollLeft:rt&&1==(0,Yi._i)()?p==S?me.scrollLeft+me.scrollWidth-me.clientWidth:-me.scrollLeft:p==S?me.scrollLeft:me.scrollWidth-me.clientWidth-me.scrollLeft}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.SBq),t.Y36(Kc),t.Y36(t.R0b),t.Y36(Po,8))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),P})(),Jc=(()=>{class P{constructor(p,S,J){this._platform=p,this._change=new Ot.x,this._changeListener=me=>{this._change.next(me)},this._document=J,S.runOutsideAngular(()=>{if(p.isBrowser){const me=this._getWindow();me.addEventListener("resize",this._changeListener),me.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const p=this._getWindow();p.removeEventListener("resize",this._changeListener),p.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const p={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),p}getViewportRect(){const p=this.getViewportScrollPosition(),{width:S,height:J}=this.getViewportSize();return{top:p.top,left:p.left,bottom:p.top+J,right:p.left+S,height:J,width:S}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const p=this._document,S=this._getWindow(),J=p.documentElement,me=J.getBoundingClientRect();return{top:-me.top||p.body.scrollTop||S.scrollY||J.scrollTop||0,left:-me.left||p.body.scrollLeft||S.scrollX||J.scrollLeft||0}}change(p=20){return p>0?this._change.pipe(uu(p)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const p=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:p.innerWidth,height:p.innerHeight}:{width:0,height:0}}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Yi.t4),t.LFG(t.R0b),t.LFG(Ht.K0,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const Vu=new t.OlP("VIRTUAL_SCROLLABLE");let Ec=(()=>{class P extends jd{constructor(p,S,J,me){super(p,S,J,me)}measureViewportSize(p){const S=this.elementRef.nativeElement;return"horizontal"===p?S.clientWidth:S.clientHeight}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.SBq),t.Y36(Kc),t.Y36(t.R0b),t.Y36(Po,8))},P.\u0275dir=t.lG2({type:P,features:[t.qOj]}),P})();const Uu=typeof requestAnimationFrame<"u"?cd:dd;let Uh=(()=>{class P extends Ec{get orientation(){return this._orientation}set orientation(p){this._orientation!==p&&(this._orientation=p,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(p){this._appendOnly=(0,ji.Ig)(p)}constructor(p,S,J,me,rt,Bt,Tn,Rn){super(p,Bt,J,rt),this.elementRef=p,this._changeDetectorRef=S,this._scrollStrategy=me,this.scrollable=Rn,this._platform=(0,t.f3M)(Yi.t4),this._detachedSubject=new Ot.x,this._renderedRangeSubject=new Ot.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new gr.y(ri=>this._scrollStrategy.scrolledIndexChange.subscribe(Ki=>Promise.resolve().then(()=>this.ngZone.run(()=>ri.next(Ki))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ys.w0.EMPTY,this._viewportChanges=Tn.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,zu.O)(null),uu(0,Uu)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(p){this.ngZone.runOutsideAngular(()=>{this._forOf=p,this._forOf.dataStream.pipe((0,_r.R)(this._detachedSubject)).subscribe(S=>{const J=S.length;J!==this._dataLength&&(this._dataLength=J,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(p){return this.getElementRef().nativeElement.getBoundingClientRect()[p]}setTotalContentSize(p){this._totalContentSize!==p&&(this._totalContentSize=p,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(p){(function hh(P,y){return P.start==y.start&&P.end==y.end})(this._renderedRange,p)||(this.appendOnly&&(p={start:0,end:Math.max(this._renderedRange.end,p.end)}),this._renderedRangeSubject.next(this._renderedRange=p),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(p,S="to-start"){p=this.appendOnly&&"to-start"===S?0:p;const me="horizontal"==this.orientation,rt=me?"X":"Y";let Tn=`translate${rt}(${Number((me&&this.dir&&"rtl"==this.dir.value?-1:1)*p)}px)`;this._renderedContentOffset=p,"to-end"===S&&(Tn+=` translate${rt}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=Tn&&(this._renderedContentTransform=Tn,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(p,S="auto"){const J={behavior:S};"horizontal"===this.orientation?J.start=p:J.top=p,this.scrollable.scrollTo(J)}scrollToIndex(p,S="auto"){this._scrollStrategy.scrollToIndex(p,S)}measureScrollOffset(p){let S;return S=this.scrollable==this?J=>super.measureScrollOffset(J):J=>this.scrollable.measureScrollOffset(J),Math.max(0,S(p??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(p){let S;const J="left",rt="rtl"==this.dir?.value;S="start"==p?rt?"right":J:"end"==p?rt?J:"right":p||("horizontal"===this.orientation?"left":"top");const Bt=this.scrollable.measureBoundingClientRectWithScrollOffset(S);return this.elementRef.nativeElement.getBoundingClientRect()[S]-Bt}measureRenderedContentSize(){const p=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?p.offsetWidth:p.offsetHeight}measureRangeSize(p){return this._forOf?this._forOf.measureRangeSize(p,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(p){p&&this._runAfterChangeDetection.push(p),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const p=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const S of p)S()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(uh,8),t.Y36(Po,8),t.Y36(Kc),t.Y36(Jc),t.Y36(Vu,8))},P.\u0275cmp=t.Xpm({type:P,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(p,S){if(1&p&&t.Gf(Bc,7),2&p){let J;t.iGM(J=t.CRH())&&(S._contentWrapper=J.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(p,S){2&p&&t.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===S.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==S.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[t._Bn([{provide:jd,useFactory:(y,p)=>y||p,deps:[[new t.FiY,new t.tBr(Vu)],P]}]),t.qOj,t.jDz],ngContentSelectors:up,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(p,S){1&p&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA(),t._UZ(3,"div",2)),2&p&&(t.xp6(3),t.Udp("width",S._totalContentWidth)("height",S._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),P})(),hu=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({}),P})(),_d=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({imports:[_a,hu,Uh,_a,hu]}),P})();class vd{attach(y){return this._attachedHost=y,y.attach(this)}detach(){let y=this._attachedHost;null!=y&&(this._attachedHost=null,y.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(y){this._attachedHost=y}}class Hd extends vd{constructor(y,p,S,J,me){super(),this.component=y,this.viewContainerRef=p,this.injector=S,this.componentFactoryResolver=J,this.projectableNodes=me}}class Qc extends vd{constructor(y,p,S,J){super(),this.templateRef=y,this.viewContainerRef=p,this.context=S,this.injector=J}get origin(){return this.templateRef.elementRef}attach(y,p=this.context){return this.context=p,super.attach(y)}detach(){return this.context=void 0,super.detach()}}class Gh extends vd{constructor(y){super(),this.element=y instanceof t.SBq?y.nativeElement:y}}class Gu{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(y){return y instanceof Hd?(this._attachedPortal=y,this.attachComponentPortal(y)):y instanceof Qc?(this._attachedPortal=y,this.attachTemplatePortal(y)):this.attachDomPortal&&y instanceof Gh?(this._attachedPortal=y,this.attachDomPortal(y)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(y){this._disposeFn=y}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ps extends Gu{constructor(y,p,S,J,me){super(),this.outletElement=y,this._componentFactoryResolver=p,this._appRef=S,this._defaultInjector=J,this.attachDomPortal=rt=>{const Bt=rt.element,Tn=this._document.createComment("dom-portal");Bt.parentNode.insertBefore(Tn,Bt),this.outletElement.appendChild(Bt),this._attachedPortal=rt,super.setDisposeFn(()=>{Tn.parentNode&&Tn.parentNode.replaceChild(Bt,Tn)})},this._document=me}attachComponentPortal(y){const S=(y.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(y.component);let J;return y.viewContainerRef?(J=y.viewContainerRef.createComponent(S,y.viewContainerRef.length,y.injector||y.viewContainerRef.injector,y.projectableNodes||void 0),this.setDisposeFn(()=>J.destroy())):(J=S.create(y.injector||this._defaultInjector||t.zs3.NULL),this._appRef.attachView(J.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(J.hostView),J.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(J)),this._attachedPortal=y,J}attachTemplatePortal(y){let p=y.viewContainerRef,S=p.createEmbeddedView(y.templateRef,y.context,{injector:y.injector});return S.rootNodes.forEach(J=>this.outletElement.appendChild(J)),S.detectChanges(),this.setDisposeFn(()=>{let J=p.indexOf(S);-1!==J&&p.remove(J)}),this._attachedPortal=y,S}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(y){return y.hostView.rootNodes[0]}}let zc=(()=>{class P extends Gu{constructor(p,S,J){super(),this._componentFactoryResolver=p,this._viewContainerRef=S,this._isInitialized=!1,this.attached=new t.vpe,this.attachDomPortal=me=>{const rt=me.element,Bt=this._document.createComment("dom-portal");me.setAttachedHost(this),rt.parentNode.insertBefore(Bt,rt),this._getRootNode().appendChild(rt),this._attachedPortal=me,super.setDisposeFn(()=>{Bt.parentNode&&Bt.parentNode.replaceChild(rt,Bt)})},this._document=J}get portal(){return this._attachedPortal}set portal(p){this.hasAttached()&&!p&&!this._isInitialized||(this.hasAttached()&&super.detach(),p&&super.attach(p),this._attachedPortal=p||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(p){p.setAttachedHost(this);const S=null!=p.viewContainerRef?p.viewContainerRef:this._viewContainerRef,me=(p.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(p.component),rt=S.createComponent(me,S.length,p.injector||S.injector,p.projectableNodes||void 0);return S!==this._viewContainerRef&&this._getRootNode().appendChild(rt.hostView.rootNodes[0]),super.setDisposeFn(()=>rt.destroy()),this._attachedPortal=p,this._attachedRef=rt,this.attached.emit(rt),rt}attachTemplatePortal(p){p.setAttachedHost(this);const S=this._viewContainerRef.createEmbeddedView(p.templateRef,p.context,{injector:p.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=p,this._attachedRef=S,this.attached.emit(S),S}_getRootNode(){const p=this._viewContainerRef.element.nativeElement;return p.nodeType===p.ELEMENT_NODE?p:p.parentNode}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36(Ht.K0))},P.\u0275dir=t.lG2({type:P,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[t.qOj]}),P})(),$u=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({}),P})();var mu=k(6451);const Mc=(0,Yi.Mq)();class yh{constructor(y,p){this._viewportRuler=y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=p}attach(){}enable(){if(this._canBeEnabled()){const y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=y.style.left||"",this._previousHTMLStyles.top=y.style.top||"",y.style.left=(0,ji.HM)(-this._previousScrollPosition.left),y.style.top=(0,ji.HM)(-this._previousScrollPosition.top),y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const y=this._document.documentElement,S=y.style,J=this._document.body.style,me=S.scrollBehavior||"",rt=J.scrollBehavior||"";this._isEnabled=!1,S.left=this._previousHTMLStyles.left,S.top=this._previousHTMLStyles.top,y.classList.remove("cdk-global-scrollblock"),Mc&&(S.scrollBehavior=J.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Mc&&(S.scrollBehavior=me,J.scrollBehavior=rt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const p=this._document.body,S=this._viewportRuler.getViewportSize();return p.scrollHeight>S.height||p.scrollWidth>S.width}}class Zu{constructor(y,p,S,J){this._scrollDispatcher=y,this._ngZone=p,this._viewportRuler=S,this._config=J,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(y){this._overlayRef=y}enable(){if(this._scrollSubscription)return;const y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=y.subscribe(()=>{const p=this._viewportRuler.getViewportScrollPosition().top;Math.abs(p-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Gd{enable(){}disable(){}attach(){}}function Yu(P,y){return y.some(p=>P.bottom<p.top||P.top>p.bottom||P.right<p.left||P.left>p.right)}function Xc(P,y){return y.some(p=>P.top<p.top||P.bottom>p.bottom||P.left<p.left||P.right>p.right)}class Ir{constructor(y,p,S,J){this._scrollDispatcher=y,this._viewportRuler=p,this._ngZone=S,this._config=J,this._scrollSubscription=null}attach(y){this._overlayRef=y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const p=this._overlayRef.overlayElement.getBoundingClientRect(),{width:S,height:J}=this._viewportRuler.getViewportSize();Yu(p,[{width:S,height:J,bottom:J,right:S,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let gu=(()=>{class P{constructor(p,S,J,me){this._scrollDispatcher=p,this._viewportRuler=S,this._ngZone=J,this.noop=()=>new Gd,this.close=rt=>new Zu(this._scrollDispatcher,this._ngZone,this._viewportRuler,rt),this.block=()=>new yh(this._viewportRuler,this._document),this.reposition=rt=>new Ir(this._scrollDispatcher,this._viewportRuler,this._ngZone,rt),this._document=me}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Kc),t.LFG(Jc),t.LFG(t.R0b),t.LFG(Ht.K0))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();class Ia{constructor(y){if(this.scrollStrategy=new Gd,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,y){const p=Object.keys(y);for(const S of p)void 0!==y[S]&&(this[S]=y[S])}}}class bh{constructor(y,p){this.connectionPair=y,this.scrollableViewProperties=p}}let bd=(()=>{class P{constructor(p){this._attachedOverlays=[],this._document=p}ngOnDestroy(){this.detach()}add(p){this.remove(p),this._attachedOverlays.push(p)}remove(p){const S=this._attachedOverlays.indexOf(p);S>-1&&this._attachedOverlays.splice(S,1),0===this._attachedOverlays.length&&this.detach()}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Ht.K0))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),$h=(()=>{class P extends bd{constructor(p,S){super(p),this._ngZone=S,this._keydownListener=J=>{const me=this._attachedOverlays;for(let rt=me.length-1;rt>-1;rt--)if(me[rt]._keydownEvents.observers.length>0){const Bt=me[rt]._keydownEvents;this._ngZone?this._ngZone.run(()=>Bt.next(J)):Bt.next(J);break}}}add(p){super.add(p),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Ht.K0),t.LFG(t.R0b,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),xh=(()=>{class P extends bd{constructor(p,S,J){super(p),this._platform=S,this._ngZone=J,this._cursorStyleIsSet=!1,this._pointerDownListener=me=>{this._pointerDownEventTarget=(0,Yi.sA)(me)},this._clickListener=me=>{const rt=(0,Yi.sA)(me),Bt="click"===me.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:rt;this._pointerDownEventTarget=null;const Tn=this._attachedOverlays.slice();for(let Rn=Tn.length-1;Rn>-1;Rn--){const ri=Tn[Rn];if(ri._outsidePointerEvents.observers.length<1||!ri.hasAttached())continue;if(ri.overlayElement.contains(rt)||ri.overlayElement.contains(Bt))break;const Ki=ri._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Ki.next(me)):Ki.next(me)}}}add(p){if(super.add(p),!this._isAttached){const S=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(S)):this._addEventListeners(S),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=S.style.cursor,S.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const p=this._document.body;p.removeEventListener("pointerdown",this._pointerDownListener,!0),p.removeEventListener("click",this._clickListener,!0),p.removeEventListener("auxclick",this._clickListener,!0),p.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(p.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(p){p.addEventListener("pointerdown",this._pointerDownListener,!0),p.addEventListener("click",this._clickListener,!0),p.addEventListener("auxclick",this._clickListener,!0),p.addEventListener("contextmenu",this._clickListener,!0)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Ht.K0),t.LFG(Yi.t4),t.LFG(t.R0b,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),_u=(()=>{class P{constructor(p,S){this._platform=S,this._document=p}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const p="cdk-overlay-container";if(this._platform.isBrowser||(0,Yi.Oy)()){const J=this._document.querySelectorAll(`.${p}[platform="server"], .${p}[platform="test"]`);for(let me=0;me<J.length;me++)J[me].remove()}const S=this._document.createElement("div");S.classList.add(p),(0,Yi.Oy)()?S.setAttribute("platform","test"):this._platform.isBrowser||S.setAttribute("platform","server"),this._document.body.appendChild(S),this._containerElement=S}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Ht.K0),t.LFG(Yi.t4))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();class yu{constructor(y,p,S,J,me,rt,Bt,Tn,Rn,ri=!1){this._portalOutlet=y,this._host=p,this._pane=S,this._config=J,this._ngZone=me,this._keyboardDispatcher=rt,this._document=Bt,this._location=Tn,this._outsideClickDispatcher=Rn,this._animationsDisabled=ri,this._backdropElement=null,this._backdropClick=new Ot.x,this._attachments=new Ot.x,this._detachments=new Ot.x,this._locationChanges=Ys.w0.EMPTY,this._backdropClickHandler=Ki=>this._backdropClick.next(Ki),this._backdropTransitionendHandler=Ki=>{this._disposeBackdrop(Ki.target)},this._keydownEvents=new Ot.x,this._outsidePointerEvents=new Ot.x,J.scrollStrategy&&(this._scrollStrategy=J.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=J.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(y){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const p=this._portalOutlet.attach(y);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ye.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof p?.onDestroy&&p.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),p}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),y}dispose(){const y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(y){y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=y,this.hasAttached()&&(y.attach(this),this.updatePosition()))}updateSize(y){this._config={...this._config,...y},this._updateElementSize()}setDirection(y){this._config={...this._config,direction:y},this._updateElementDirection()}addPanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!0)}removePanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!1)}getDirection(){const y=this._config.direction;return y?"string"==typeof y?y:y.value:"ltr"}updateScrollStrategy(y){y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=y,this.hasAttached()&&(y.attach(this),y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const y=this._pane.style;y.width=(0,ji.HM)(this._config.width),y.height=(0,ji.HM)(this._config.height),y.minWidth=(0,ji.HM)(this._config.minWidth),y.minHeight=(0,ji.HM)(this._config.minHeight),y.maxWidth=(0,ji.HM)(this._config.maxWidth),y.maxHeight=(0,ji.HM)(this._config.maxHeight)}_togglePointerEvents(y){this._pane.style.pointerEvents=y?"":"none"}_attachBackdrop(){const y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(y)})}):this._backdropElement.classList.add(y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const y=this._backdropElement;if(y){if(this._animationsDisabled)return void this._disposeBackdrop(y);y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{y.addEventListener("transitionend",this._backdropTransitionendHandler)}),y.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(y)},500))}}_toggleClasses(y,p,S){const J=(0,ji.Eq)(p||[]).filter(me=>!!me);J.length&&(S?y.classList.add(...J):y.classList.remove(...J))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const y=this._ngZone.onStable.pipe((0,_r.R)((0,mu.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),y.unsubscribe())})})}_disposeScrollStrategy(){const y=this._scrollStrategy;y&&(y.disable(),y.detach&&y.detach())}_disposeBackdrop(y){y&&(y.removeEventListener("click",this._backdropClickHandler),y.removeEventListener("transitionend",this._backdropTransitionendHandler),y.remove(),this._backdropElement===y&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $d="cdk-overlay-connected-position-bounding-box",xd=/([A-Za-z%]+)$/;class vu{get positions(){return this._preferredPositions}constructor(y,p,S,J,me){this._viewportRuler=p,this._document=S,this._platform=J,this._overlayContainer=me,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ot.x,this._resizeSubscription=Ys.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(y)}attach(y){this._validatePositions(),y.hostElement.classList.add($d),this._overlayRef=y,this._boundingBox=y.hostElement,this._pane=y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const y=this._originRect,p=this._overlayRect,S=this._viewportRect,J=this._containerRect,me=[];let rt;for(let Bt of this._preferredPositions){let Tn=this._getOriginPoint(y,J,Bt),Rn=this._getOverlayPoint(Tn,p,Bt),ri=this._getOverlayFit(Rn,p,S,Bt);if(ri.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Bt,Tn);this._canFitWithFlexibleDimensions(ri,Rn,S)?me.push({position:Bt,origin:Tn,overlayRect:p,boundingBoxRect:this._calculateBoundingBoxRect(Tn,Bt)}):(!rt||rt.overlayFit.visibleArea<ri.visibleArea)&&(rt={overlayFit:ri,overlayPoint:Rn,originPoint:Tn,position:Bt,overlayRect:p})}if(me.length){let Bt=null,Tn=-1;for(const Rn of me){const ri=Rn.boundingBoxRect.width*Rn.boundingBoxRect.height*(Rn.position.weight||1);ri>Tn&&(Tn=ri,Bt=Rn)}return this._isPushed=!1,void this._applyPosition(Bt.position,Bt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(rt.position,rt.originPoint);this._applyPosition(rt.position,rt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&dl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($d),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const y=this._lastPosition;if(y){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const p=this._getOriginPoint(this._originRect,this._containerRect,y);this._applyPosition(y,p)}else this.apply()}withScrollableContainers(y){return this._scrollables=y,this}withPositions(y){return this._preferredPositions=y,-1===y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(y){return this._viewportMargin=y,this}withFlexibleDimensions(y=!0){return this._hasFlexibleDimensions=y,this}withGrowAfterOpen(y=!0){return this._growAfterOpen=y,this}withPush(y=!0){return this._canPush=y,this}withLockedPosition(y=!0){return this._positionLocked=y,this}setOrigin(y){return this._origin=y,this}withDefaultOffsetX(y){return this._offsetX=y,this}withDefaultOffsetY(y){return this._offsetY=y,this}withTransformOriginOn(y){return this._transformOriginSelector=y,this}_getOriginPoint(y,p,S){let J,me;if("center"==S.originX)J=y.left+y.width/2;else{const rt=this._isRtl()?y.right:y.left,Bt=this._isRtl()?y.left:y.right;J="start"==S.originX?rt:Bt}return p.left<0&&(J-=p.left),me="center"==S.originY?y.top+y.height/2:"top"==S.originY?y.top:y.bottom,p.top<0&&(me-=p.top),{x:J,y:me}}_getOverlayPoint(y,p,S){let J,me;return J="center"==S.overlayX?-p.width/2:"start"===S.overlayX?this._isRtl()?-p.width:0:this._isRtl()?0:-p.width,me="center"==S.overlayY?-p.height/2:"top"==S.overlayY?0:-p.height,{x:y.x+J,y:y.y+me}}_getOverlayFit(y,p,S,J){const me=Yh(p);let{x:rt,y:Bt}=y,Tn=this._getOffset(J,"x"),Rn=this._getOffset(J,"y");Tn&&(rt+=Tn),Rn&&(Bt+=Rn);let ql=0-Bt,Ka=Bt+me.height-S.height,xs=this._subtractOverflows(me.width,0-rt,rt+me.width-S.width),_l=this._subtractOverflows(me.height,ql,Ka),Ad=xs*_l;return{visibleArea:Ad,isCompletelyWithinViewport:me.width*me.height===Ad,fitsInViewportVertically:_l===me.height,fitsInViewportHorizontally:xs==me.width}}_canFitWithFlexibleDimensions(y,p,S){if(this._hasFlexibleDimensions){const J=S.bottom-p.y,me=S.right-p.x,rt=Zh(this._overlayRef.getConfig().minHeight),Bt=Zh(this._overlayRef.getConfig().minWidth);return(y.fitsInViewportVertically||null!=rt&&rt<=J)&&(y.fitsInViewportHorizontally||null!=Bt&&Bt<=me)}return!1}_pushOverlayOnScreen(y,p,S){if(this._previousPushAmount&&this._positionLocked)return{x:y.x+this._previousPushAmount.x,y:y.y+this._previousPushAmount.y};const J=Yh(p),me=this._viewportRect,rt=Math.max(y.x+J.width-me.width,0),Bt=Math.max(y.y+J.height-me.height,0),Tn=Math.max(me.top-S.top-y.y,0),Rn=Math.max(me.left-S.left-y.x,0);let ri=0,Ki=0;return ri=J.width<=me.width?Rn||-rt:y.x<this._viewportMargin?me.left-S.left-y.x:0,Ki=J.height<=me.height?Tn||-Bt:y.y<this._viewportMargin?me.top-S.top-y.y:0,this._previousPushAmount={x:ri,y:Ki},{x:y.x+ri,y:y.y+Ki}}_applyPosition(y,p){if(this._setTransformOrigin(y),this._setOverlayElementStyles(p,y),this._setBoundingBoxStyles(p,y),y.panelClass&&this._addPanelClasses(y.panelClass),this._lastPosition=y,this._positionChanges.observers.length){const S=this._getScrollVisibility(),J=new bh(y,S);this._positionChanges.next(J)}this._isInitialRender=!1}_setTransformOrigin(y){if(!this._transformOriginSelector)return;const p=this._boundingBox.querySelectorAll(this._transformOriginSelector);let S,J=y.overlayY;S="center"===y.overlayX?"center":this._isRtl()?"start"===y.overlayX?"right":"left":"start"===y.overlayX?"left":"right";for(let me=0;me<p.length;me++)p[me].style.transformOrigin=`${S} ${J}`}_calculateBoundingBoxRect(y,p){const S=this._viewportRect,J=this._isRtl();let me,rt,Bt,ri,Ki,ql;if("top"===p.overlayY)rt=y.y,me=S.height-rt+this._viewportMargin;else if("bottom"===p.overlayY)Bt=S.height-y.y+2*this._viewportMargin,me=S.height-Bt+this._viewportMargin;else{const Ka=Math.min(S.bottom-y.y+S.top,y.y),xs=this._lastBoundingBoxSize.height;me=2*Ka,rt=y.y-Ka,me>xs&&!this._isInitialRender&&!this._growAfterOpen&&(rt=y.y-xs/2)}if("end"===p.overlayX&&!J||"start"===p.overlayX&&J)ql=S.width-y.x+this._viewportMargin,ri=y.x-this._viewportMargin;else if("start"===p.overlayX&&!J||"end"===p.overlayX&&J)Ki=y.x,ri=S.right-y.x;else{const Ka=Math.min(S.right-y.x+S.left,y.x),xs=this._lastBoundingBoxSize.width;ri=2*Ka,Ki=y.x-Ka,ri>xs&&!this._isInitialRender&&!this._growAfterOpen&&(Ki=y.x-xs/2)}return{top:rt,left:Ki,bottom:Bt,right:ql,width:ri,height:me}}_setBoundingBoxStyles(y,p){const S=this._calculateBoundingBoxRect(y,p);!this._isInitialRender&&!this._growAfterOpen&&(S.height=Math.min(S.height,this._lastBoundingBoxSize.height),S.width=Math.min(S.width,this._lastBoundingBoxSize.width));const J={};if(this._hasExactPosition())J.top=J.left="0",J.bottom=J.right=J.maxHeight=J.maxWidth="",J.width=J.height="100%";else{const me=this._overlayRef.getConfig().maxHeight,rt=this._overlayRef.getConfig().maxWidth;J.height=(0,ji.HM)(S.height),J.top=(0,ji.HM)(S.top),J.bottom=(0,ji.HM)(S.bottom),J.width=(0,ji.HM)(S.width),J.left=(0,ji.HM)(S.left),J.right=(0,ji.HM)(S.right),J.alignItems="center"===p.overlayX?"center":"end"===p.overlayX?"flex-end":"flex-start",J.justifyContent="center"===p.overlayY?"center":"bottom"===p.overlayY?"flex-end":"flex-start",me&&(J.maxHeight=(0,ji.HM)(me)),rt&&(J.maxWidth=(0,ji.HM)(rt))}this._lastBoundingBoxSize=S,dl(this._boundingBox.style,J)}_resetBoundingBoxStyles(){dl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){dl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(y,p){const S={},J=this._hasExactPosition(),me=this._hasFlexibleDimensions,rt=this._overlayRef.getConfig();if(J){const ri=this._viewportRuler.getViewportScrollPosition();dl(S,this._getExactOverlayY(p,y,ri)),dl(S,this._getExactOverlayX(p,y,ri))}else S.position="static";let Bt="",Tn=this._getOffset(p,"x"),Rn=this._getOffset(p,"y");Tn&&(Bt+=`translateX(${Tn}px) `),Rn&&(Bt+=`translateY(${Rn}px)`),S.transform=Bt.trim(),rt.maxHeight&&(J?S.maxHeight=(0,ji.HM)(rt.maxHeight):me&&(S.maxHeight="")),rt.maxWidth&&(J?S.maxWidth=(0,ji.HM)(rt.maxWidth):me&&(S.maxWidth="")),dl(this._pane.style,S)}_getExactOverlayY(y,p,S){let J={top:"",bottom:""},me=this._getOverlayPoint(p,this._overlayRect,y);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,S)),"bottom"===y.overlayY?J.bottom=this._document.documentElement.clientHeight-(me.y+this._overlayRect.height)+"px":J.top=(0,ji.HM)(me.y),J}_getExactOverlayX(y,p,S){let rt,J={left:"",right:""},me=this._getOverlayPoint(p,this._overlayRect,y);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,S)),rt=this._isRtl()?"end"===y.overlayX?"left":"right":"end"===y.overlayX?"right":"left","right"===rt?J.right=this._document.documentElement.clientWidth-(me.x+this._overlayRect.width)+"px":J.left=(0,ji.HM)(me.x),J}_getScrollVisibility(){const y=this._getOriginRect(),p=this._pane.getBoundingClientRect(),S=this._scrollables.map(J=>J.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Xc(y,S),isOriginOutsideView:Yu(y,S),isOverlayClipped:Xc(p,S),isOverlayOutsideView:Yu(p,S)}}_subtractOverflows(y,...p){return p.reduce((S,J)=>S-Math.max(J,0),y)}_getNarrowedViewportRect(){const y=this._document.documentElement.clientWidth,p=this._document.documentElement.clientHeight,S=this._viewportRuler.getViewportScrollPosition();return{top:S.top+this._viewportMargin,left:S.left+this._viewportMargin,right:S.left+y-this._viewportMargin,bottom:S.top+p-this._viewportMargin,width:y-2*this._viewportMargin,height:p-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(y,p){return"x"===p?null==y.offsetX?this._offsetX:y.offsetX:null==y.offsetY?this._offsetY:y.offsetY}_validatePositions(){}_addPanelClasses(y){this._pane&&(0,ji.Eq)(y).forEach(p=>{""!==p&&-1===this._appliedPanelClasses.indexOf(p)&&(this._appliedPanelClasses.push(p),this._pane.classList.add(p))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(y=>{this._pane.classList.remove(y)}),this._appliedPanelClasses=[])}_getOriginRect(){const y=this._origin;if(y instanceof t.SBq)return y.nativeElement.getBoundingClientRect();if(y instanceof Element)return y.getBoundingClientRect();const p=y.width||0,S=y.height||0;return{top:y.y,bottom:y.y+S,left:y.x,right:y.x+p,height:S,width:p}}}function dl(P,y){for(let p in y)y.hasOwnProperty(p)&&(P[p]=y[p]);return P}function Zh(P){if("number"!=typeof P&&null!=P){const[y,p]=P.split(xd);return p&&"px"!==p?null:parseFloat(y)}return P||null}function Yh(P){return{top:Math.floor(P.top),right:Math.floor(P.right),bottom:Math.floor(P.bottom),left:Math.floor(P.left),width:Math.floor(P.width),height:Math.floor(P.height)}}const Wu="cdk-global-overlay-wrapper";class hl{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(y){const p=y.getConfig();this._overlayRef=y,this._width&&!p.width&&y.updateSize({width:this._width}),this._height&&!p.height&&y.updateSize({height:this._height}),y.hostElement.classList.add(Wu),this._isDisposed=!1}top(y=""){return this._bottomOffset="",this._topOffset=y,this._alignItems="flex-start",this}left(y=""){return this._xOffset=y,this._xPosition="left",this}bottom(y=""){return this._topOffset="",this._bottomOffset=y,this._alignItems="flex-end",this}right(y=""){return this._xOffset=y,this._xPosition="right",this}start(y=""){return this._xOffset=y,this._xPosition="start",this}end(y=""){return this._xOffset=y,this._xPosition="end",this}width(y=""){return this._overlayRef?this._overlayRef.updateSize({width:y}):this._width=y,this}height(y=""){return this._overlayRef?this._overlayRef.updateSize({height:y}):this._height=y,this}centerHorizontally(y=""){return this.left(y),this._xPosition="center",this}centerVertically(y=""){return this.top(y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const y=this._overlayRef.overlayElement.style,p=this._overlayRef.hostElement.style,S=this._overlayRef.getConfig(),{width:J,height:me,maxWidth:rt,maxHeight:Bt}=S,Tn=!("100%"!==J&&"100vw"!==J||rt&&"100%"!==rt&&"100vw"!==rt),Rn=!("100%"!==me&&"100vh"!==me||Bt&&"100%"!==Bt&&"100vh"!==Bt),ri=this._xPosition,Ki=this._xOffset,ql="rtl"===this._overlayRef.getConfig().direction;let Ka="",xs="",_l="";Tn?_l="flex-start":"center"===ri?(_l="center",ql?xs=Ki:Ka=Ki):ql?"left"===ri||"end"===ri?(_l="flex-end",Ka=Ki):("right"===ri||"start"===ri)&&(_l="flex-start",xs=Ki):"left"===ri||"start"===ri?(_l="flex-start",Ka=Ki):("right"===ri||"end"===ri)&&(_l="flex-end",xs=Ki),y.position=this._cssPosition,y.marginLeft=Tn?"0":Ka,y.marginTop=Rn?"0":this._topOffset,y.marginBottom=this._bottomOffset,y.marginRight=Tn?"0":xs,p.justifyContent=_l,p.alignItems=Rn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const y=this._overlayRef.overlayElement.style,p=this._overlayRef.hostElement,S=p.style;p.classList.remove(Wu),S.justifyContent=S.alignItems=y.marginTop=y.marginBottom=y.marginLeft=y.marginRight=y.position="",this._overlayRef=null,this._isDisposed=!0}}let ac=(()=>{class P{constructor(p,S,J,me){this._viewportRuler=p,this._document=S,this._platform=J,this._overlayContainer=me}global(){return new hl}flexibleConnectedTo(p){return new vu(p,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Jc),t.LFG(Ht.K0),t.LFG(Yi.t4),t.LFG(_u))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Za=0,Yl=(()=>{class P{constructor(p,S,J,me,rt,Bt,Tn,Rn,ri,Ki,ql,Ka){this.scrollStrategies=p,this._overlayContainer=S,this._componentFactoryResolver=J,this._positionBuilder=me,this._keyboardDispatcher=rt,this._injector=Bt,this._ngZone=Tn,this._document=Rn,this._directionality=ri,this._location=Ki,this._outsideClickDispatcher=ql,this._animationsModuleType=Ka}create(p){const S=this._createHostElement(),J=this._createPaneElement(S),me=this._createPortalOutlet(J),rt=new Ia(p);return rt.direction=rt.direction||this._directionality.value,new yu(me,S,J,rt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(p){const S=this._document.createElement("div");return S.id="cdk-overlay-"+Za++,S.classList.add("cdk-overlay-pane"),p.appendChild(S),S}_createHostElement(){const p=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(p),p}_createPortalOutlet(p){return this._appRef||(this._appRef=this._injector.get(t.z2F)),new Ps(p,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(gu),t.LFG(_u),t.LFG(t._Vd),t.LFG(ac),t.LFG($h),t.LFG(t.zs3),t.LFG(t.R0b),t.LFG(Ht.K0),t.LFG(Po),t.LFG(Ht.Ye),t.LFG(xh),t.LFG(t.QbO,8))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const Dh={provide:new t.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Yl],useFactory:function Yd(P){return()=>P.scrollStrategies.reposition()}};let Wd=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({providers:[Yl,Dh],imports:[_a,$u,_d,_d]}),P})();var Ku=k(9770);function bu(P,y){}class Wl{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let eu=(()=>{class P extends Gu{constructor(p,S,J,me,rt,Bt,Tn,Rn){super(),this._elementRef=p,this._focusTrapFactory=S,this._config=me,this._interactivityChecker=rt,this._ngZone=Bt,this._overlayRef=Tn,this._focusMonitor=Rn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ri=>{this._portalOutlet.hasAttached();const Ki=this._portalOutlet.attachDomPortal(ri);return this._contentAttached(),Ki},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=J}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(p){this._portalOutlet.hasAttached();const S=this._portalOutlet.attachComponentPortal(p);return this._contentAttached(),S}attachTemplatePortal(p){this._portalOutlet.hasAttached();const S=this._portalOutlet.attachTemplatePortal(p);return this._contentAttached(),S}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(p,S){this._interactivityChecker.isFocusable(p)||(p.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const J=()=>{p.removeEventListener("blur",J),p.removeEventListener("mousedown",J),p.removeAttribute("tabindex")};p.addEventListener("blur",J),p.addEventListener("mousedown",J)})),p.focus(S)}_focusByCssSelector(p,S){let J=this._elementRef.nativeElement.querySelector(p);J&&this._forceFocus(J,S)}_trapFocus(){const p=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||p.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(S=>{S||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const p=this._config.restoreFocus;let S=null;if("string"==typeof p?S=this._document.querySelector(p):"boolean"==typeof p?S=p?this._elementFocusedBeforeDialogWasOpened:null:p&&(S=p),this._config.restoreFocus&&S&&"function"==typeof S.focus){const J=(0,Yi.ht)(),me=this._elementRef.nativeElement;(!J||J===this._document.body||J===me||me.contains(J))&&(this._focusMonitor?(this._focusMonitor.focusVia(S,this._closeInteractionType),this._closeInteractionType=null):S.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const p=this._elementRef.nativeElement,S=(0,Yi.ht)();return p===S||p.contains(S)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,Yi.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return P.\u0275fac=function(p){return new(p||P)(t.Y36(t.SBq),t.Y36(nc),t.Y36(Ht.K0,8),t.Y36(Wl),t.Y36(io),t.Y36(t.R0b),t.Y36(yu),t.Y36(Xs))},P.\u0275cmp=t.Xpm({type:P,selectors:[["cdk-dialog-container"]],viewQuery:function(p,S){if(1&p&&t.Gf(zc,7),2&p){let J;t.iGM(J=t.CRH())&&(S._portalOutlet=J.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(p,S){2&p&&t.uIk("id",S._config.id||null)("role",S._config.role)("aria-modal",S._config.ariaModal)("aria-labelledby",S._config.ariaLabel?null:S._ariaLabelledBy)("aria-label",S._config.ariaLabel)("aria-describedby",S._config.ariaDescribedBy||null)},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(p,S){1&p&&t.YNc(0,bu,0,0,"ng-template",0)},dependencies:[zc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),P})();class Vc{constructor(y,p){this.overlayRef=y,this.config=p,this.closed=new Ot.x,this.disableClose=p.disableClose,this.backdropClick=y.backdropClick(),this.keydownEvents=y.keydownEvents(),this.outsidePointerEvents=y.outsidePointerEvents(),this.id=p.id,this.keydownEvents.subscribe(S=>{27===S.keyCode&&!this.disableClose&&!function A(P,...y){return y.length?y.some(p=>P[p]):P.altKey||P.shiftKey||P.ctrlKey||P.metaKey}(S)&&(S.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(y,p){if(this.containerInstance){const S=this.closed;this.containerInstance._closeInteractionType=p?.focusOrigin||"program",this.overlayRef.dispose(),S.next(y),S.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(y="",p=""){return this.overlayRef.updateSize({width:y,height:p}),this}addPanelClass(y){return this.overlayRef.addPanelClass(y),this}removePanelClass(y){return this.overlayRef.removePanelClass(y),this}}const Cd=new t.OlP("DialogScrollStrategy"),Kh=new t.OlP("DialogData"),fp=new t.OlP("DefaultDialogConfig"),Kd={provide:Cd,deps:[Yl],useFactory:function mp(P){return()=>P.scrollStrategies.block()}};let Jd=0,Eh=(()=>{class P{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(p,S,J,me,rt,Bt){this._overlay=p,this._injector=S,this._defaultOptions=J,this._parentDialog=me,this._overlayContainer=rt,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ot.x,this._afterOpenedAtThisLevel=new Ot.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Ku.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,zu.O)(void 0))),this._scrollStrategy=Bt}open(p,S){(S={...this._defaultOptions||new Wl,...S}).id=S.id||"cdk-dialog-"+Jd++,S.id&&this.getDialogById(S.id);const me=this._getOverlayConfig(S),rt=this._overlay.create(me),Bt=new Vc(rt,S),Tn=this._attachContainer(rt,Bt,S);return Bt.containerInstance=Tn,this._attachDialogContent(p,Bt,Tn,S),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Bt),Bt.closed.subscribe(()=>this._removeOpenDialog(Bt,!0)),this.afterOpened.next(Bt),Bt}closeAll(){Th(this.openDialogs,p=>p.close())}getDialogById(p){return this.openDialogs.find(S=>S.id===p)}ngOnDestroy(){Th(this._openDialogsAtThisLevel,p=>{!1===p.config.closeOnDestroy&&this._removeOpenDialog(p,!1)}),Th(this._openDialogsAtThisLevel,p=>p.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(p){const S=new Ia({positionStrategy:p.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:p.scrollStrategy||this._scrollStrategy(),panelClass:p.panelClass,hasBackdrop:p.hasBackdrop,direction:p.direction,minWidth:p.minWidth,minHeight:p.minHeight,maxWidth:p.maxWidth,maxHeight:p.maxHeight,width:p.width,height:p.height,disposeOnNavigation:p.closeOnNavigation});return p.backdropClass&&(S.backdropClass=p.backdropClass),S}_attachContainer(p,S,J){const me=J.injector||J.viewContainerRef?.injector,rt=[{provide:Wl,useValue:J},{provide:Vc,useValue:S},{provide:yu,useValue:p}];let Bt;J.container?"function"==typeof J.container?Bt=J.container:(Bt=J.container.type,rt.push(...J.container.providers(J))):Bt=eu;const Tn=new Hd(Bt,J.viewContainerRef,t.zs3.create({parent:me||this._injector,providers:rt}),J.componentFactoryResolver);return p.attach(Tn).instance}_attachDialogContent(p,S,J,me){if(p instanceof t.Rgc){const rt=this._createInjector(me,S,J,void 0);let Bt={$implicit:me.data,dialogRef:S};me.templateContext&&(Bt={...Bt,..."function"==typeof me.templateContext?me.templateContext():me.templateContext}),J.attachTemplatePortal(new Qc(p,null,Bt,rt))}else{const rt=this._createInjector(me,S,J,this._injector),Bt=J.attachComponentPortal(new Hd(p,me.viewContainerRef,rt,me.componentFactoryResolver));S.componentInstance=Bt.instance}}_createInjector(p,S,J,me){const rt=p.injector||p.viewContainerRef?.injector,Bt=[{provide:Kh,useValue:p.data},{provide:Vc,useValue:S}];return p.providers&&("function"==typeof p.providers?Bt.push(...p.providers(S,p,J)):Bt.push(...p.providers)),p.direction&&(!rt||!rt.get(Po,null,{optional:!0}))&&Bt.push({provide:Po,useValue:{value:p.direction,change:(0,Ja.of)()}}),t.zs3.create({parent:rt||me,providers:Bt})}_removeOpenDialog(p,S){const J=this.openDialogs.indexOf(p);J>-1&&(this.openDialogs.splice(J,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((me,rt)=>{me?rt.setAttribute("aria-hidden",me):rt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),S&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const p=this._overlayContainer.getContainerElement();if(p.parentElement){const S=p.parentElement.children;for(let J=S.length-1;J>-1;J--){const me=S[J];me!==p&&"SCRIPT"!==me.nodeName&&"STYLE"!==me.nodeName&&!me.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(me,me.getAttribute("aria-hidden")),me.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const p=this._parentDialog;return p?p._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return P.\u0275fac=function(p){return new(p||P)(t.LFG(Yl),t.LFG(t.zs3),t.LFG(fp,8),t.LFG(P,12),t.LFG(_u),t.LFG(Cd))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac}),P})();function Th(P,y){let p=P.length;for(;p--;)y(P[p])}let Mh=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({providers:[Eh,Kd],imports:[Wd,$u,oh,$u]}),P})();class Uc{constructor(y,p){this.ref=y,this.config=p,this.afterClosedSubject=new Ot.x,this.dialogConfig=p}close(y){this.afterClosedSubject?.next(y),this.afterClosedSubject.complete(),this.ref.close(y)}cancel(){this.ref.close()}get data(){return this.ref.config.data}static#e=this.\u0275fac=function(p){return new(p||Uc)(t.LFG(Vc),t.LFG(Pi,8))};static#t=this.\u0275prov=t.Yz7({token:Uc,factory:Uc.\u0275fac})}class qu{constructor(y){this.viewContainerRef=y}static#e=this.\u0275fac=function(p){return new(p||qu)(t.Y36(t.s_b))};static#t=this.\u0275dir=t.lG2({type:qu,selectors:[["","app-dialog-container-host",""]]})}function qd(P,y){1&P&&t.GkF(0)}function Sh(P,y){if(1&P&&(t.TgZ(0,"div",4)(1,"h5"),t._uU(2),t.qZA(),t.YNc(3,qd,1,0,"ng-container",5),t.qZA()),2&P){const p=t.oxw(2),S=t.MAs(4);t.xp6(2),t.Oqu(null==p.dialogConfig?null:p.dialogConfig.headerTitle),t.xp6(1),t.Q6J("ngTemplateOutlet",S)}}function Dd(P,y){1&P&&(t.ynx(0),t.YNc(1,Sh,4,2,"ng-template",3),t.BQk())}function xu(P,y){}function Ed(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(p);const J=t.oxw();return t.KtG(J.close())}),t._UZ(1,"i",7),t.qZA()}if(2&P){const p=t.oxw();t.Q6J("disabled",null==p.dialogConfig?null:p.dialogConfig.disableClose)}}class lc{constructor(y){this.ref=y}ngOnInit(){const y=this.host.viewContainerRef;y.clear(),this.ref.data.component instanceof t.Rgc?y.createEmbeddedView(this.ref.data.component):y.createComponent(this.ref.data.component),this.dialogConfig=this.ref.dialogConfig}close(){this.ref.cancel()}static#e=this.\u0275fac=function(p){return new(p||lc)(t.Y36(Uc))};static#t=this.\u0275cmp=t.Xpm({type:lc,selectors:[["mts-dialog-container"]],viewQuery:function(p,S){if(1&p&&t.Gf(qu,7),2&p){let J;t.iGM(J=t.CRH())&&(S.host=J.first)}},decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["app-dialog-container-host",""],["closeBtn",""],["mts-card-header",""],[1,"d-flex","align-items-end"],[4,"ngTemplateOutlet"],["type","button",1,"btn","btn-light","ms-auto",3,"disabled","click"],[1,"fa-solid","fa-xmark"]],template:function(p,S){if(1&p&&(t.TgZ(0,"mts-card"),t.YNc(1,Dd,2,0,"ng-container",0),t.YNc(2,xu,0,0,"ng-template",1),t.qZA(),t.YNc(3,Ed,2,1,"ng-template",null,2,t.W1O)),2&p){const J=t.MAs(4);t.xp6(1),t.Q6J("ngIf",null==S.dialogConfig?null:S.dialogConfig.headerTitle)("ngIfElse",J)}},dependencies:[Ht.O5,Ht.tP,Ss.A,hs.v,qu],styles:["[_nghost-%COMP%]{display:block;background:#FFFFFF;border-radius:8px}"]})}class wu{constructor(y,p){this.dialog=y,this.injector=p}open(y,p){return this.dialogRef=this.dialog.open(lc,{injector:p?.injector?p.injector:this.injector,disableClose:p?.disableClose,width:this.calculateSize(p?.size),data:{component:y},providers:(S,J,me)=>[{provide:Uc,useValue:this.appDialogRef=new Uc(S,p)},{provide:on,useValue:p?.data}]}),this.appDialogRef}close(){this.dialogRef?.close()}calculateSize(y="md"){let p="";switch(y){case"sm":p="500px";break;case"md":p="700px";break;case"lg":p="992px";break;case"xl":p="1200px"}return p}static#e=this.\u0275fac=function(p){return new(p||wu)(t.LFG(Eh),t.LFG(t.zs3))};static#t=this.\u0275prov=t.Yz7({token:wu,factory:wu.\u0275fac})}class Lo{static#e=this.\u0275fac=function(p){return new(p||Lo)};static#t=this.\u0275mod=t.oAB({type:Lo});static#n=this.\u0275inj=t.cJS({providers:[wu],imports:[Ht.ez,Xa,Mh]})}const gp=new t.OlP("LOOKUP_DATA");class Sc{constructor(y){this.ref=y,this.closed=new Ot.x}close(y,p,S){this.closed?.next({value:y,text:p,hint:S}),this.closed.complete(),this.ref.close(y)}cancel(){this.ref.close()}get data(){return this.ref.config.data}static#e=this.\u0275fac=function(p){return new(p||Sc)(t.LFG(Vc))};static#t=this.\u0275prov=t.Yz7({token:Sc,factory:Sc.\u0275fac})}class tu{constructor(y,p){this.dialog=y,this.injector=p}open(y,p){return this.dialogRef=this.dialog.open(y,{injector:p?.injector?p.injector:this.injector,width:this.calculateSize(p?.size),disableClose:p?.disableClose,providers:(S,J,me)=>[{provide:Sc,useValue:this.appDialogRef=new Sc(S)},{provide:gp,useValue:p?.data}]}),this.appDialogRef}close(){this.dialogRef?.close()}calculateSize(y="md"){let p="";switch(y){case"sm":p="576px";break;case"md":p="700px";break;case"lg":p="992px";break;case"xl":p="1200px"}return p}static#e=this.\u0275fac=function(p){return new(p||tu)(t.LFG(Eh),t.LFG(t.zs3))};static#t=this.\u0275prov=t.Yz7({token:tu,factory:tu.\u0275fac})}class Qu{constructor(y){this.template=y}static#e=this.\u0275fac=function(p){return new(p||Qu)(t.Y36(t.Rgc))};static#t=this.\u0275dir=t.lG2({type:Qu,selectors:[["","mts-lookup-template",""]]})}function Jh(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(p);const J=t.oxw();return t.KtG(J._onClear())}),t._UZ(1,"i",6),t.qZA()}if(2&P){const p=t.oxw();t.Q6J("disabled",p.disabled)}}function qh(P,y){if(1&P&&(t.TgZ(0,"small",7),t._uU(1),t.qZA()),2&P){const p=t.oxw();t.xp6(1),t.Oqu(p._hint)}}class Qd{constructor(y){this.dialog=y,this.placeholder="",this.size="md",this.disableClose=!0,this.hintChange=new t.vpe,this.textChange=new t.vpe,this.clear=new t.vpe,this.selectedItem=new t.vpe,this._onChangeCallback=p=>{},this._onTouchedCallback=()=>{}}writeValue(y){if(null==y||null==y)return this._value=null,void(this._hint=this._text="");"string"==typeof this.text&&(this._text=this.text),"string"==typeof this.hint&&(this._hint=this.hint)}registerOnChange(y){this._onChangeCallback=y}registerOnTouched(y){this._onTouchedCallback=y}setDisabledState(y){this.disabled=y}_onSearch(){this.dialog.open(this._component.template,{size:this.size,disableClose:this.disableClose})?.closed.subscribe(p=>{this._onSelectItem(p)})}_onSelectItem(y){this._value=y?.value,this._text=y?.text,this._hint=y?.hint,this.hintChange.emit(this._hint),this.textChange.emit(this._text),this.selectedItem.emit(y),this._onTouchedCallback(),this._onChangeCallback(this._value)}_onKeyup(){this._text||this._onClear()}_onClear(){this._value=null,this._text=this._hint="",this.clear.emit(),this._onChangeCallback(this._value)}static#e=this.\u0275fac=function(p){return new(p||Qd)(t.Y36(tu))};static#t=this.\u0275cmp=t.Xpm({type:Qd,selectors:[["mts-lookup"]],contentQueries:function(p,S,J){if(1&p&&t.Suo(J,Qu,5),2&p){let me;t.iGM(me=t.CRH())&&(S._component=me.first)}},inputs:{disabled:"disabled",required:"required",name:"name",placeholder:"placeholder",size:"size",disableClose:"disableClose",text:"text",hint:"hint"},outputs:{hintChange:"hintChange",textChange:"textChange",clear:"clear",selectedItem:"selectedItem"},features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>Qd),multi:!0}])],decls:6,vars:7,consts:[[1,"input-group"],["name","lookup",1,"form-control",3,"ngModel","disabled","readOnly","required","ngModelChange","keyup"],["type","button","class","input-group-text cursor-pointer",3,"disabled","click",4,"ngIf"],["type","button",1,"input-group-text","cursor-pointer",3,"disabled","click"],[1,"fa-solid","fa-magnifying-glass"],["class","text-primary",4,"ngIf"],[1,"fa-solid","fa-xmark"],[1,"text-primary"]],template:function(p,S){1&p&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("ngModelChange",function(me){return S._text=me})("keyup",function(){return S._onKeyup()}),t.qZA(),t.YNc(2,Jh,2,1,"button",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return S._onSearch()}),t._UZ(4,"i",4),t.qZA()(),t.YNc(5,qh,2,1,"small",5)),2&p&&(t.xp6(1),t.Q6J("ngModel",S._text)("disabled",S.disabled)("readOnly",!0)("required",S.required),t.xp6(1),t.Q6J("ngIf",S._value||S._text),t.xp6(1),t.Q6J("disabled",S.disabled),t.xp6(2),t.Q6J("ngIf",S._hint))},dependencies:[Ht.O5,o.Fj,o.JJ,o.Q7,o.On],styles:["button[_ngcontent-%COMP%]{border:none}"]})}class Md{static#e=this.\u0275fac=function(p){return new(p||Md)};static#t=this.\u0275mod=t.oAB({type:Md});static#n=this.\u0275inj=t.cJS({providers:[tu],imports:[Ht.ez,o.u5]})}const Gp=["id",""];function g(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"div",3)(1,"label",4),t._uU(2),t.qZA(),t.TgZ(3,"input",5),t.NdJ("click",function(J){t.CHM(p);const me=t.oxw(2);return t.KtG(me.onInputClick(J))})("blur",function(J){t.CHM(p);const me=t.oxw(2);return t.KtG(me.onInputBlur(J))})("ngModelChange",function(J){t.CHM(p);const me=t.oxw(2);return t.KtG(me.value=J)}),t.qZA()()}if(2&P){const p=t.oxw().$implicit,S=t.oxw();t.Tol(null==p?null:p.classes),t.Udp("property",null==p?null:p.styles),t.xp6(1),t.Q6J("for",S.id+p.value),t.xp6(1),t.Oqu(p.title),t.xp6(1),t.Q6J("disabled",S.disabled)("id",S.id+p.value)("name",S.id+p.value)("value",p.value)("ngModel",S.value)("required",S.required)}}function T(P,y){if(1&P&&(t.ynx(0),t.YNc(1,g,4,12,"div",2),t.BQk()),2&P){const p=y.$implicit;let S;t.xp6(1),t.Q6J("ngIf",null===(S=null==p?null:p.condition)||void 0===S||S)}}const u={provide:o.JU,useExisting:(0,t.Gpc)(()=>b),multi:!0};class b{constructor(){this.items=[{title:"\u0628\u0644\u0647",value:!0},{title:"\u062e\u06cc\u0631",value:!1}],this.inputOnBlur=new t.vpe,this.inputOnClick=new t.vpe}get value(){return this.innerValue}set value(y){this.innerValue!==y&&(this.innerValue=y,this.onChange&&this.onChange(y))}writeValue(y){this.innerValue=y}registerOnChange(y){this.onChange=y}registerOnTouched(y){this.onTouched=y}setDisabledState(y){this.disabled=y}onInputBlur(y){this.inputOnBlur.emit(y),this.onTouched&&this.onTouched()}onInputClick(y){this.inputOnClick.emit(y),this.onTouched&&this.onTouched()}static#e=this.\u0275fac=function(p){return new(p||b)};static#t=this.\u0275cmp=t.Xpm({type:b,selectors:[["mts-radio-button","id",""]],inputs:{items:"items",id:"id",disabled:"disabled",required:"required"},outputs:{inputOnBlur:"inputOnBlur",inputOnClick:"inputOnClick"},features:[t._Bn([u])],attrs:Gp,decls:2,vars:1,consts:[[1,"form-check"],[4,"ngFor","ngForOf"],["class","form-check form-check-inline",3,"class","property",4,"ngIf"],[1,"form-check","form-check-inline"],[1,"form-check-label",3,"for"],["type","radio",1,"form-check-input",3,"disabled","id","name","value","ngModel","required","click","blur","ngModelChange"]],template:function(p,S){1&p&&(t.TgZ(0,"div",0),t.YNc(1,T,2,1,"ng-container",1),t.qZA()),2&p&&(t.xp6(1),t.Q6J("ngForOf",S.items))},dependencies:[Ht.sg,Ht.O5,o.Fj,o._,o.JJ,o.Q7,o.On],changeDetection:0})}class B{static#e=this.\u0275fac=function(p){return new(p||B)};static#t=this.\u0275mod=t.oAB({type:B});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5]})}k(4572),k(273),k(8071);class yt{static#e=this.\u0275fac=function(p){return new(p||yt)};static#t=this.\u0275mod=t.oAB({type:yt});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}var Nt=k(3900);class Pn{constructor(y){this.templateRef=y}static#e=this.\u0275fac=function(p){return new(p||Pn)(t.Y36(t.Rgc))};static#t=this.\u0275dir=t.lG2({type:Pn,selectors:[["","mtsAutocompleteOption",""]]})}const fn=["searchInput"];function On(P,y){1&P&&(t.TgZ(0,"li",6)(1,"div",7)(2,"span",8),t._uU(3,"Loading..."),t.qZA()(),t.TgZ(4,"span"),t._uU(5,"\u062f\u0631 \u062d\u0627\u0644 \u062c\u0633\u062a\u062c\u0648..."),t.qZA()())}const Xi=function(P,y){return{active:P,"fw-bold":y}};function ci(P,y){if(1&P&&(t.TgZ(0,"a",14),t._uU(1),t.qZA()),2&P){const p=t.oxw(),S=p.index,J=p.$implicit,me=t.oxw(3);t.Q6J("ngClass",t.WLB(2,Xi,me.selectedOptionIndex===S,me.selectedOptionIndex===S)),t.xp6(1),t.hij(" ",me.getItemText(J)," ")}}function Fi(P,y){1&P&&t._UZ(0,"i",15)}function Hi(P,y){1&P&&t.GkF(0)}const lr=function(P){return{$implicit:P}};function Xr(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Hi,1,0,"ng-container",16),t.BQk()),2&P){const p=t.oxw().$implicit,S=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",S._textTemplate.templateRef)("ngTemplateOutletContext",t.VKq(2,lr,p))}}function Li(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"li",11),t.NdJ("click",function(){const me=t.CHM(p).$implicit,rt=t.oxw(3);return t.KtG(rt._onSelectOption(me))}),t.YNc(1,ci,2,5,"a",12),t.YNc(2,Fi,1,0,"i",13),t.YNc(3,Xr,2,4,"ng-container",4),t.qZA()}if(2&P){const p=y.index,S=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!S._textTemplate),t.xp6(1),t.Q6J("ngIf",S.selectedOptionIndex===p),t.xp6(1),t.Q6J("ngIf",S._textTemplate)}}function ir(P,y){if(1&P&&(t.ynx(0),t.YNc(1,Li,4,3,"li",10),t.BQk()),2&P){const p=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",p._dataResult)}}function br(P,y){if(1&P&&(t.ynx(0),t.YNc(1,ir,2,1,"ng-container",9),t.BQk()),2&P){const p=t.oxw(),S=t.MAs(6);t.xp6(1),t.Q6J("ngIf",p._dataResult.length>0)("ngIfElse",S)}}function Ar(P,y){1&P&&(t.TgZ(0,"li",17),t._uU(1,"\u0645\u0642\u062f\u0627\u0631\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"),t.qZA())}class dr{constructor(y,p){this.el=y,this.renderer=p,this.placeholder="\u062c\u0633\u062a\u062c\u0648 \u06a9\u0646\u06cc\u062f....",this.minLength=2,this.optionSelect=new t.vpe,this._dataResult=[],this._loading=!1,this._showData=!1,this.error=!1,this.selectedOptionIndex=null,this._onChangeCallback=J=>{},this._onTouchedCallback=()=>{},this._validateCallback=J=>{};const S=this.el.nativeElement;this.renderer.addClass(S,"dropdown-menu"),this.renderer.addClass(S,"d-block")}set dataProvider(y){if("function"!=typeof y)throw"Invalid data provider";this._dataProvider=y}ngOnInit(){this._onSearch()}writeValue(y){this._value=y,this.text instanceof gr.y?this.text.subscribe(p=>{this._text=p}):this._text=this.text}registerOnChange(y){this._onChangeCallback=y}registerOnTouched(y){this._onTouchedCallback=y}registerOnValidatorChange(y){this._validateCallback=y}setDisabledState(y){this.disabled=y}validate(y){let p={};return this._value?(this.error&&(p={defaultMessage:!0}),p):null}_onSearch(){this._checkDataProvider();let y=this.searchInput?.nativeElement;const p=(0,Al.R)(y,"keyup").pipe((0,K.h)(S=>y.value.length>=this.minLength),(0,Q.b)(1e3),(0,et.x)(),(0,z.b)(()=>this._loading=!0),(0,Nt.w)(S=>this._dataProvider(y)instanceof gr.y?this._dataProvider(y.value):(0,Ja.of)([])));this._onTouchedCallback(),this._subscription=p.subscribe({next:S=>{this.selectedOptionIndex=null,this._showData=!0,this._loading=!1,this._dataResult=S},error:S=>{this._dataResult=[],this._loading=!1,this.error=!0}})}_onSelectOption(y){this._text=this.getItemText(y),this.getItemValue(y),this.selectedOptionIndex=this._dataResult.indexOf(y),this._showData=!1,this._onChangeCallback(this._value),this.optionSelect.emit(y)}getItemText(y){let p="";return"string"==typeof this.textField?p=y[this.textField]:"function"==typeof this.textField&&(p=this.textField(y)),p}getItemValue(y){"string"==typeof this.valueField?this._value=y[this.valueField]:"function"==typeof this.valueField&&(this._value=this.valueField(y))}_onInput(y){""===y.target.value&&this._resetValue()}_onBlur(){this._onTouchedCallback()}_onFocusIn(){this._showData=!!this._dataResult.length}_checkDataProvider(){if(!this._dataProvider)throw new Error("dataProvider is not defined")}_resetValue(){this._dataResult=[],this._value=this.selectedOptionIndex=null,this._showData=this._loading=this.error=!1,this._onChangeCallback(this._value)}_onDocumentClicked(y){this.el.nativeElement.contains(y.target)||(this._showData=!1)}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(p){return new(p||dr)(t.Y36(t.SBq),t.Y36(t.Qsj))};static#t=this.\u0275cmp=t.Xpm({type:dr,selectors:[["mts-autocomplete"]],contentQueries:function(p,S,J){if(1&p&&t.Suo(J,Pn,5),2&p){let me;t.iGM(me=t.CRH())&&(S._textTemplate=me.first)}},viewQuery:function(p,S){if(1&p&&t.Gf(fn,7,t.SBq),2&p){let J;t.iGM(J=t.CRH())&&(S.searchInput=J.first)}},hostBindings:function(p,S){1&p&&t.NdJ("click",function(me){return S._onDocumentClicked(me,me.target)},!1,t.evT)},inputs:{placeholder:"placeholder",required:"required",disabled:"disabled",textField:"textField",valueField:"valueField",text:"text",minLength:"minLength",dataProvider:"dataProvider"},outputs:{optionSelect:"optionSelect"},features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>dr),multi:!0},{provide:o.Cf,useExisting:(0,t.Gpc)(()=>dr),multi:!0}])],decls:7,vars:7,consts:[["name","autocomplete","type","text","aria-autocomplete","list","autocomplete","off",1,"form-control","dropdown-toggle",3,"placeholder","required","disabled","ngModel","blur","input","focus","ngModelChange"],["searchInput",""],[1,"mt-1"],["class","dropdown-item p-2",4,"ngIf"],[4,"ngIf"],["noResult",""],[1,"dropdown-item","p-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"visually-hidden"],[4,"ngIf","ngIfElse"],["class","dropdown-item d-flex p-1",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","d-flex","p-1",3,"click"],[3,"ngClass",4,"ngIf"],["class","fa-solid fa-check ms-auto me-2 text-primary fw-bold",4,"ngIf"],[3,"ngClass"],[1,"fa-solid","fa-check","ms-auto","me-2","text-primary","fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-item","d-flex","p-1"]],template:function(p,S){1&p&&(t.TgZ(0,"input",0,1),t.NdJ("blur",function(){return S._onBlur()})("input",function(me){return S._onInput(me)})("focus",function(){return S._onFocusIn()})("ngModelChange",function(me){return S._text=me}),t.qZA(),t.TgZ(2,"ul",2),t.YNc(3,On,6,0,"li",3),t.YNc(4,br,2,2,"ng-container",4),t.qZA(),t.YNc(5,Ar,2,0,"ng-template",null,5,t.W1O)),2&p&&(t.Q6J("placeholder",S.placeholder)("required",S.required)("disabled",S.disabled)("ngModel",S._text),t.uIk("aria-expanded",S._dataResult.length>0),t.xp6(3),t.Q6J("ngIf",S._loading),t.xp6(1),t.Q6J("ngIf",S._showData))},dependencies:[Ht.mk,Ht.sg,Ht.O5,Ht.tP,o.Fj,o.JJ,o.Q7,o.On],styles:["[_nghost-%COMP%]{position:relative;padding:0;border:none}ul[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #b5b5b54d}li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(181,181,181,.3)}"]})}class Vi{static#e=this.\u0275fac=function(p){return new(p||Vi)};static#t=this.\u0275mod=t.oAB({type:Vi});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5]})}var ta=k(9251);const Pl=["input"];function na(P,y){if(1&P&&(t.TgZ(0,"span",4),t._uU(1),t.qZA()),2&P){const p=t.oxw();t.xp6(1),t.Oqu(p.currency)}}function pl(P,y){if(1&P&&(t.TgZ(0,"span",5),t._uU(1),t.ALo(2,"numberToPersian"),t.qZA()),2&P){const p=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,p.value))}}class Kl{constructor(y){this.inj=y,this.inputVal="",this.showCurrency=!0,this.showHint=!0,this.currency="\u0631\u06cc\u0627\u0644",this.important=!1,this.propagateChange=p=>{},this.onTouch=()=>{}}ngAfterViewInit(){this.ngControl=this.inj.get(o.a5)}writeValue(y){typeof y<"u"&&""!==y&&null!==y?this.formater(y):this.inputVal="",setTimeout(()=>{this.propagateChange(y)})}registerOnChange(y){this.propagateChange=y}registerOnTouched(y){this.onTouch=y}preventNonNumeric(y){const p=y.which;(p<48||p>57)&&y.preventDefault()}onChanged(y){this.formater(y.target.value),this.onTouch()}addComma(y){let p="",S=0;if(y){const J=y.split("").reverse();for(const me in J)S++,p=S%3==1&&1!==S?J[me]+","+p:J[me]+p}return p}formater(y){if(this.value=y,"number"==typeof this.value&&(this.value=this.value.toString()),this.value=this.value.replace(/,/g,""),/^[\u06F0-\u06F90-9]+$/.test(this.value)){if(void 0!==this.maxValue&&this.value>this.maxValue)setTimeout(()=>{const p=this.createErrorObject("maxValue",this.maxValue);this.setControlErrors(p)},0);else if(void 0!==this.minValue&&this.value<this.minValue){const p=this.createErrorObject("minValue",this.minValue);this.setControlErrors(p)}this.inputVal=this.addComma(this.value),this.value=function Di(P){return P.replace(/[\u0660-\u0669]/g,y=>y.charCodeAt(0)-1632).replace(/[\u06f0-\u06f9]/g,y=>y.charCodeAt(0)-1776)}(this.value)}this.value||(this.inputVal=""),this.propagateChange(this.value)}createErrorObject(y,p){return{[y]:{requiredValue:p,currency:this.currency}}}setControlErrors(y){this.control?.setErrors(y)}get showPersianChar(){return(this.control?.valid||this.control?.disabled)&&this.showHint}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(p){return new(p||Kl)(t.Y36(t.zs3))};static#t=this.\u0275cmp=t.Xpm({type:Kl,selectors:[["mts-input-number"]],viewQuery:function(p,S){if(1&p&&t.Gf(Pl,5),2&p){let J;t.iGM(J=t.CRH())&&(S.input=J.first)}},hostBindings:function(p,S){1&p&&t.NdJ("keypress",function(me){return S.preventNonNumeric(me)})},inputs:{inputVal:"inputVal",name:"name",label:"label",disabled:"disabled",required:"required",showCurrency:"showCurrency",showHint:"showHint",currency:"currency",maxValue:"maxValue",minValue:"minValue",important:"important"},features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>Kl),multi:!0}])],decls:4,vars:8,consts:[[1,"input-group"],["type","text","ngModel","","dir","ltr",1,"form-control","text-start",3,"name","value","disabled","required","input"],["class","input-group-text",4,"ngIf"],["class","mt-3 text-primary","style","font-size: 11px",4,"ngIf"],[1,"input-group-text"],[1,"mt-3","text-primary",2,"font-size","11px"]],template:function(p,S){1&p&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("input",function(me){return S.onChanged(me)}),t.qZA(),t.YNc(2,na,2,1,"span",2),t.qZA(),t.YNc(3,pl,3,3,"span",3)),2&p&&(t.xp6(1),t.Tol(S.important?"bg-warning bg-opacity-50":""),t.Q6J("name",S.name)("value",S.inputVal)("disabled",S.disabled)("required",S.required),t.xp6(1),t.Q6J("ngIf",S.showCurrency),t.xp6(1),t.Q6J("ngIf",S.inputVal&&S.showPersianChar))},dependencies:[Ht.O5,o.Fj,o.JJ,o.Q7,o.On,ta.M]})}var ks=k(4588);class os{static#e=this.\u0275fac=function(p){return new(p||os)};static#t=this.\u0275mod=t.oAB({type:os});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5,ks.k,Qe.As]})}var fl=k(2766),Ya=(k(546),k(4376),k(408),k(1079));const Du=["\u062f","\u0633","\u0686","\u067e","\u062c","\u0634","\u06cc"],cc=["\u0641\u0631\u0648\u0631\u062f\u06cc\u0646","\u0627\u0631\u062f\u06cc\u0628\u0647\u0634\u062a","\u062e\u0631\u062f\u0627\u062f","\u062a\u06cc\u0631","\u0645\u0631\u062f\u0627\u062f","\u0634\u0647\u0631\u06cc\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062f\u06cc","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062f"];class Rs extends So.wf{getWeekdayLabel(y){return Du[y-1]}getMonthShortName(y){return cc[y-1]}getMonthFullName(y){return cc[y-1]}getDayAriaLabel(y){return`${y.year}-${this.getMonthFullName(y.month)}-${y.day}`}static#e=this.\u0275fac=function(){let y;return function(S){return(y||(y=t.n5z(Rs)))(S||Rs)}}();static#t=this.\u0275prov=t.Yz7({token:Rs,factory:Rs.\u0275fac})}var Wa=k(6854);class Qo extends So.NG{constructor(){super(...arguments),this.DELIMITER="/"}parse(y){try{const p=y.split(this.DELIMITER),S=new So.qj(+p[0],+p[1],+p[2]);return(0,Wa.xD)(S)?S:null}catch{return null}}format(y){return y?y.year+this.DELIMITER+y.month+this.DELIMITER+y.day:""}static#e=this.\u0275fac=function(){let y;return function(S){return(y||(y=t.n5z(Qo)))(S||Qo)}}();static#t=this.\u0275prov=t.Yz7({token:Qo,factory:Qo.\u0275fac,providedIn:"root"})}class pa{static#e=this.\u0275fac=function(p){return new(p||pa)};static#t=this.\u0275mod=t.oAB({type:pa});static#n=this.\u0275inj=t.cJS({providers:[{provide:So.vL,useClass:So.jn},{provide:So.wf,useClass:Rs},{provide:So.NG,useClass:Qo}],imports:[Ht.ez,o.u5,So.M,o.u5,Ya.k]})}k(5577),k(9718),k(8189);let Gn=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({imports:[Wd]}),P})(),To=(()=>{class P{}return P.\u0275fac=function(p){return new(p||P)},P.\u0275mod=t.oAB({type:P}),P.\u0275inj=t.cJS({}),P})();k(2508),k(7140),k(4086),k(6521);class lo{static#e=this.\u0275fac=function(p){return new(p||lo)};static#t=this.\u0275mod=t.oAB({type:lo});static#n=this.\u0275inj=t.cJS({providers:[fl.Je],imports:[Ht.ez,o.u5,Qe.As,at,fl.u3,Wa.v,So.XC,pa,ks.k,Gn,To,os]})}var Ns=k(529);const Gi=["fileInput"];function Zr(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(p);const J=t.oxw();return t.KtG(J._onInputClick())}),t._UZ(1,"i",7),t.qZA()}}function Dr(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(p);const J=t.oxw();return t.KtG(J._onClearFile())}),t._UZ(1,"i",9),t.qZA()}if(2&P){const p=t.oxw();t.Q6J("disabled",p._disabled)}}function er(P,y){if(1&P){const p=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(p);const J=t.oxw();return t.KtG(J._onDownloadFile())}),t._UZ(1,"i",10),t.qZA()}if(2&P){const p=t.oxw();t.Q6J("disabled",p._disabled)}}class Bo{constructor(y,p){this._http=y,this.toast=p,this._onChangeCallback=S=>{},this._onTouchedCallback=()=>{}}writeValue(y){if(this._fileName=this.fileName??"",!(null==this._value||this._value instanceof File))throw Error("Invalid file value");this._value=this._value}registerOnChange(y){this._onChangeCallback=y}registerOnTouched(y){this._onTouchedCallback=y}setDisabledState(y){this._disabled=y}_onFileChange(y){const p=y.target?.files[0];p&&(this._value=p,this._fileName=p.name,this._onChangeCallback(this._value))}_onInputClick(){this._onTouchedCallback&&this._onTouchedCallback(),this._fileInput?.nativeElement.click()}_onClearFile(){this._value=null,this._fileName=null,this._onChangeCallback(this._value)}_onDownloadFile(){if(this.downloadUrl){let y;y=this._http.get(this.downloadUrl,{responseType:"blob"}),this._disabled=!0,y.subscribe(p=>{Qe.iK.saveBlob(p,"file"),this._disabled=!1},p=>{this._disabled=!1,this.toast.show("\u0647\u0646\u06af\u0627\u0645 \u062f\u0627\u0646\u0644\u0648\u062f \u0641\u0627\u06cc\u0644 \u062e\u0637\u0627\u06cc\u06cc \u0631\u062e \u062f\u0627\u062f",{style:"error"})})}}static#e=this.\u0275fac=function(p){return new(p||Bo)(t.Y36(Ns.eN),t.Y36(Nr.k))};static#t=this.\u0275cmp=t.Xpm({type:Bo,selectors:[["mts-file-input"]],viewQuery:function(p,S){if(1&p&&t.Gf(Gi,5,t.SBq),2&p){let J;t.iGM(J=t.CRH())&&(S._fileInput=J.first)}},inputs:{accept:"accept",required:"required",downloadUrl:"downloadUrl",fileName:"fileName"},features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>Bo),multi:!0}])],decls:7,vars:7,consts:[["type","file","ngModel","","name","fileInput",1,"d-none",3,"accept","change"],["fileInput",""],[1,"mts-file-upload-wrapper","input-group"],["name","fileInput","readonly","",1,"form-control","cursor-pointer",3,"ngModel","disabled","required","click"],["type","button","class","input-group-text cursor-pointer",3,"click",4,"ngIf"],["type","button","class","input-group-text cursor-pointer pe-3",3,"disabled","click",4,"ngIf"],["type","button",1,"input-group-text","cursor-pointer",3,"click"],[1,"fa-regular","fa-paperclip-vertical"],["type","button",1,"input-group-text","cursor-pointer","pe-3",3,"disabled","click"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-download"]],template:function(p,S){1&p&&(t.TgZ(0,"input",0,1),t.NdJ("change",function(me){return S._onFileChange(me)}),t.qZA(),t.TgZ(2,"div",2)(3,"input",3),t.NdJ("click",function(){return S._onInputClick()}),t.qZA(),t.YNc(4,Zr,2,0,"button",4),t.YNc(5,Dr,2,1,"button",5),t.YNc(6,er,2,1,"button",5),t.qZA()),2&p&&(t.Q6J("accept",S.accept),t.xp6(3),t.Q6J("ngModel",S._fileName)("disabled",S._disabled)("required",S.required),t.xp6(1),t.Q6J("ngIf",!S._value),t.xp6(1),t.Q6J("ngIf",S._value),t.xp6(1),t.Q6J("ngIf",S.downloadUrl))},dependencies:[Ht.O5,o.Fj,o.JJ,o.Q7,o.On],styles:[".mts-file-upload-wrapper[_ngcontent-%COMP%]{position:relative}button[_ngcontent-%COMP%]{border:none}"]})}class bs{static#e=this.\u0275fac=function(p){return new(p||bs)};static#t=this.\u0275mod=t.oAB({type:bs});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5,at]})}k(5624);class co{static#e=this.\u0275fac=function(p){return new(p||co)};static#t=this.\u0275mod=t.oAB({type:co});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}var ia=k(7856);k(2608);k(9391);class Jl{static#e=this.\u0275fac=function(p){return new(p||Jl)};static#t=this.\u0275mod=t.oAB({type:Jl});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez]})}k(8557);class dc{static#e=this.\u0275fac=function(p){return new(p||dc)};static#t=this.\u0275mod=t.oAB({type:dc});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,qt]})}var hc=k(1260);class ml{static#e=this.\u0275fac=function(p){return new(p||ml)};static#t=this.\u0275mod=t.oAB({type:ml});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5]})}var Tu=k(8362);k(3279);class gl{static#e=this.\u0275fac=function(p){return new(p||gl)};static#t=this.\u0275mod=t.oAB({type:gl});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,o.u5,o.UX,ks.k,at]})}class ru{static#e=this.\u0275fac=function(p){return new(p||ru)};static#t=this.\u0275mod=t.oAB({type:ru});static#n=this.\u0275inj=t.cJS({imports:[Bn,Xa,_o,Md,yt,ks.k,pa,B,co,bs,Lo,lo,os,Vi,dc,ml,Jl,Tu.G8,gl]})}class Mu{static#e=this.\u0275fac=function(p){return new(p||Mu)};static#t=this.\u0275mod=t.oAB({type:Mu});static#n=this.\u0275inj=t.cJS({imports:[Ht.ez,ht.Bz,o.u5,cs,ru,Wa.v,Qe.As,Gt,qt,at,So.XC,So.bz]})}},9541:(At,Le,k)=>{"use strict";k.d(Le,{Q:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mts-card-footer",""]],exportAs:["mts-card-footer"]})}},8658:(At,Le,k)=>{"use strict";k.d(Le,{v:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mts-card-header",""]],exportAs:["mts-card-header"]})}},5795:(At,Le,k)=>{"use strict";k.d(Le,{A:()=>we});var o=k(8658),V=k(9541),t=k(1571),ie=k(6895);function te(de,Pe){if(1&de&&(t.TgZ(0,"div",3),t.GkF(1,4),t.qZA()),2&de){const Se=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",Se._header.templateRef)}}function le(de,Pe){if(1&de&&(t.TgZ(0,"div",5),t.GkF(1,4),t.qZA()),2&de){const Se=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",Se._footer.templateRef)}}const U=["*"];class we{constructor(Pe,Se){this._element=Pe,this._renderer=Se}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"card")}static#e=this.\u0275fac=function(Se){return new(Se||we)(t.Y36(t.SBq),t.Y36(t.Qsj))};static#t=this.\u0275cmp=t.Xpm({type:we,selectors:[["mts-card"]],contentQueries:function(Se,Ye,je){if(1&Se&&(t.Suo(je,o.v,5),t.Suo(je,V.Q,5)),2&Se){let ke;t.iGM(ke=t.CRH())&&(Ye._header=ke.first),t.iGM(ke=t.CRH())&&(Ye._footer=ke.first)}},ngContentSelectors:U,decls:4,vars:2,consts:[["class","card-header",4,"ngIf"],[1,"card-body"],["class","card-footer",4,"ngIf"],[1,"card-header"],[3,"ngTemplateOutlet"],[1,"card-footer"]],template:function(Se,Ye){1&Se&&(t.F$t(),t.YNc(0,te,2,1,"div",0),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.YNc(3,le,2,1,"div",2)),2&Se&&(t.Q6J("ngIf",Ye._header),t.xp6(3),t.Q6J("ngIf",Ye._footer))},dependencies:[ie.O5,ie.tP]})}},9391:(At,Le,k)=>{"use strict";k.d(Le,{z:()=>te});var o=k(1571),V=k(1366),t=k(6895);function ie(le,U){if(1&le){const we=o.EpF();o.ynx(0),o.TgZ(1,"div",1)(2,"h5"),o._UZ(3,"i",2),o._uU(4),o.qZA(),o.TgZ(5,"button",3),o.NdJ("click",function(){o.CHM(we);const Pe=o.oxw();return o.KtG(Pe.reject())}),o.qZA()(),o.TgZ(6,"div",4)(7,"div",5),o._uU(8),o.qZA()(),o.TgZ(9,"div",6)(10,"button",7),o.NdJ("click",function(){o.CHM(we);const Pe=o.oxw();return o.KtG(Pe.reject())}),o._uU(11),o.qZA(),o.TgZ(12,"button",8),o.NdJ("click",function(){o.CHM(we);const Pe=o.oxw();return o.KtG(Pe.accept())}),o._uU(13),o.qZA()(),o.BQk()}if(2&le){const we=o.oxw();o.xp6(4),o.hij("\xa0 ",we.dialogProps.title," "),o.xp6(4),o.Oqu(we.dialogProps.content),o.xp6(3),o.Oqu(we.dialogProps.rejectTitle),o.xp6(2),o.Oqu(we.dialogProps.acceptTitle)}}class te{constructor(U){this.activeModal=U}ngOnInit(){}accept(){this.activeModal.close("accept")}reject(){this.activeModal.close("close")}static#e=this.\u0275fac=function(we){return new(we||te)(o.Y36(V.Kz))};static#t=this.\u0275cmp=o.Xpm({type:te,selectors:[["rbc-confirmation-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"modal-header"],[1,"bi","bi-info-circle","text-primary"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"ms-2"],[1,"modal-footer"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-primary","ms-1",3,"click"]],template:function(we,de){1&we&&o.YNc(0,ie,14,4,"ng-container",0),2&we&&o.Q6J("ngIf",de.dialogProps)},dependencies:[t.O5],styles:["button[_ngcontent-%COMP%]{width:75px}.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:.8rem!important}.modal-footer[_ngcontent-%COMP%]{padding:.6rem!important}"]})}},2608:(At,Le,k)=>{"use strict";k.d(Le,{Z:()=>te});var o=k(1571),V=k(9391);class t{}var ie=k(1366);class te{constructor(U){this.modalService=U,this._confirmationPropsConfig=new t,this.confirm=new o.vpe,this.reject=new o.vpe}set appConfirmation(U){this._confirmationPropsConfig.title=U.title?U.title:"\u062a\u0627\u06cc\u06cc\u062f",this._confirmationPropsConfig.content=U.content?U.content:"\u0622\u06cc\u0627 \u0627\u0632 \u0627\u0646\u062c\u0627\u0645 \u0639\u0645\u0644\u06cc\u0627\u062a \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f",this._confirmationPropsConfig.acceptTitle=U.acceptTitle?U.acceptTitle:"\u0628\u0644\u06cc",this._confirmationPropsConfig.rejectTitle=U.rejectTitle?U.rejectTitle:"\u062e\u06cc\u0631",this._confirmationPropsConfig.centered=!U.centered||U.centered,this._confirmationPropsConfig.size=U.size?U.size:"500"}onClick(){const U=this.modalService.open(V.z,{size:this._confirmationPropsConfig.size,centered:this._confirmationPropsConfig.centered});U.componentInstance.dialogProps=this._confirmationPropsConfig,U.result.then(we=>{"accept"===we?this.confirm.emit():this.reject.emit()},we=>{})}static#e=this.\u0275fac=function(we){return new(we||te)(o.Y36(ie.FF))};static#t=this.\u0275dir=o.lG2({type:te,selectors:[["","appConfirmation",""]],hostBindings:function(we,de){1&we&&o.NdJ("click",function(Se){return de.onClick(Se)})},inputs:{appConfirmation:"appConfirmation"},outputs:{confirm:"confirm",reject:"reject"},exportAs:["appConfirmation"]})}},7140:(At,Le,k)=>{"use strict";k.d(Le,{v:()=>V});var o=k(1571);class V{constructor(ie){this.template=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mts-action-data-table",""]]})}},2508:(At,Le,k)=>{"use strict";k.d(Le,{U:()=>t});var o=k(1571),V=k(6521);class t{constructor(){this.filterComponentModel=new V._,this.filterValue=null,this.type="text",this.shrink=!1,this.bold=!1}static#e=this.\u0275fac=function(le){return new(le||t)};static#t=this.\u0275dir=o.lG2({type:t,selectors:[["mts-data-table-col"]],contentQueries:function(le,U,we){if(1&le&&(o.Suo(we,o.Rgc,5),o.Suo(we,V.U,5)),2&le){let de;o.iGM(de=o.CRH())&&(U.template=de.first),o.iGM(de=o.CRH())&&(U.externalFilterColumn=de.first)}},inputs:{filterValue:"filterValue",name:"name",fieldName:"fieldName",title:"title",type:"type",option:"option",filter:"filter",sort:"sort",cellClass:"cellClass",shrink:"shrink",bold:"bold"}})}},6521:(At,Le,k)=>{"use strict";k.d(Le,{U:()=>t,_:()=>V});var o=k(1571);class V{}class t{constructor(te){this.componentFilterTemplate=te}static#e=this.\u0275fac=function(le){return new(le||t)(o.Y36(o.Rgc,8))};static#t=this.\u0275dir=o.lG2({type:t,selectors:[["data-table-filter-column"],["","data-table-filter-column",""]]})}},4086:(At,Le,k)=>{"use strict";k.d(Le,{o:()=>Fe});var o=k(1571),V=k(6854);class t{constructor(Be){this.filterValue=null,this.filterValue=Be?.filterValue,this.name=Be?.name,this.fieldName=Be?.fieldName,this.title=Be?.title,this.type=Be?.type??"text",this.option=Be?.option,this.filter=Be?.filter,this.translatedEnumFilter=Be?.translatedEnumFilter,this.externalFilterColumn=Be?.externalFilterColumn,this.filterComponentModel=Be?.filterComponentModel,Be?.name&&!Be?.fieldName&&(this.fieldName=Be?.name?.charAt(0).toUpperCase()+Be?.name?.slice(1))}get required(){return this.filter.required}get min(){return this.filter.min}get max(){return this.filter.max}get minLength(){return this.filter.minLength}get maxLength(){return this.filter.maxLength}get minDate(){return this.filter.minDate}get maxDate(){return this.filter.maxDate}}var ie=k(1343),te=k(6895),le=k(4006),U=k(4148),we=k(408),de=k(8008),Pe=k(1250);function Se(Ne,Be){1&Ne&&o.GkF(0)}const Ye=function(Ne){return{$implicit:Ne}};function je(Ne,Be){if(1&Ne&&(o.TgZ(0,"div",13),o.YNc(1,Se,1,0,"ng-container",14),o.qZA()),2&Ne){const it=o.oxw().$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",it.externalFilterColumn.componentFilterTemplate)("ngTemplateOutletContext",o.VKq(2,Ye,it.filterComponentModel))}}function ke(Ne,Be){if(1&Ne){const it=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"input",18),o.NdJ("ngModelChange",function(St){o.CHM(it);const Kt=o.oxw(2).$implicit;return o.KtG(Kt.filterValue=St)}),o.qZA()(),o.BQk()}if(2&Ne){const it=o.oxw(2).$implicit,Mt=o.oxw();o.xp6(1),o.Q6J("label",it.title),o.xp6(1),o.Q6J("name",Mt.columnName(it))("ngModel",it.filterValue)("minlength",it.minLength)("maxlength",it.maxLength)("required",it.required)}}function De(Ne,Be){if(1&Ne){const it=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"input",19),o.NdJ("ngModelChange",function(St){o.CHM(it);const Kt=o.oxw(2).$implicit;return o.KtG(Kt.filterValue=St)}),o.qZA()(),o.BQk()}if(2&Ne){const it=o.oxw(2).$implicit,Mt=o.oxw();o.xp6(1),o.Q6J("label",it.title),o.xp6(1),o.Q6J("name",Mt.columnName(it))("ngModel",it.filterValue)("min",it.min)("max",it.max)("required",it.required)}}function ze(Ne,Be){if(1&Ne&&(o.TgZ(0,"option",23),o._uU(1),o.qZA()),2&Ne){const it=Be.$implicit;o.Q6J("ngValue",it.key),o.xp6(1),o.hij(" ",it.value," ")}}function Qe(Ne,Be){if(1&Ne){const it=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"select",20),o.NdJ("ngModelChange",function(St){o.CHM(it);const Kt=o.oxw(2).$implicit;return o.KtG(Kt.filterValue=St)}),o.TgZ(3,"option",21),o._uU(4,"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f"),o.qZA(),o.YNc(5,ze,2,2,"option",22),o.ALo(6,"enumKeyValue"),o.qZA()(),o.BQk()}if(2&Ne){const it=o.oxw(2).$implicit,Mt=o.oxw();o.xp6(1),o.Q6J("label",it.title),o.xp6(1),o.Q6J("name",Mt.columnName(it))("ngModel",it.filterValue)("required",it.required),o.xp6(1),o.Q6J("ngValue",null),o.xp6(2),o.Q6J("ngForOf",o.lcZ(6,6,it.translatedEnumFilter))}}function lt(Ne,Be){if(1&Ne){const it=o.EpF();o.ynx(0),o.TgZ(1,"mts-form-field",17)(2,"mts-date-picker",24),o.NdJ("ngModelChange",function(St){o.CHM(it);const Kt=o.oxw(2).$implicit;return o.KtG(Kt.filterValue=St)})("ngModelChange",function(){o.CHM(it);const St=o.oxw(2).$implicit,Kt=o.oxw();return o.KtG(Kt._changeDateValue(St))}),o.qZA()(),o.BQk()}if(2&Ne){const it=o.oxw(2).$implicit,Mt=o.oxw();o.xp6(1),o.Q6J("label",it.title),o.xp6(1),o.Q6J("name",Mt.columnName(it))("ngModel",it.filterValue)("minDate",it.minDate)("maxDate",it.maxDate)("required",it.required)}}function tt(Ne,Be){if(1&Ne&&(o.ynx(0,15),o.YNc(1,ke,3,6,"ng-container",16),o.YNc(2,De,3,6,"ng-container",16),o.YNc(3,Qe,7,8,"ng-container",16),o.YNc(4,lt,3,6,"ng-container",16),o.BQk()),2&Ne){const it=o.oxw().$implicit;o.Q6J("ngSwitch",it.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","number"),o.xp6(1),o.Q6J("ngSwitchCase","enum"),o.xp6(1),o.Q6J("ngSwitchCase","date")}}function Ve(Ne,Be){if(1&Ne&&(o.ynx(0),o.YNc(1,je,2,4,"div",11),o.YNc(2,tt,5,5,"ng-template",12),o.BQk()),2&Ne){const it=Be.$implicit;o.xp6(1),o.Q6J("ngIf",it.externalFilterColumn&&it.externalFilterColumn.componentFilterTemplate),o.xp6(1),o.Q6J("ngIf",!(null!=it.externalFilterColumn&&it.externalFilterColumn.componentFilterTemplate))}}class Fe{constructor(Be){this.translatorService=Be,this.header="\u0641\u06cc\u0644\u062a\u0631\u0647\u0627\u06cc \u062c\u0633\u062a\u062c\u0648",this.search=new o.vpe,this.clear=new o.vpe,this._filterDescriptors=[],this._filterableColumns=[]}columnName(Be){return Be.fieldName??Be.name}ngAfterContentInit(){[...this.columns].filter(it=>it.filter).map(it=>{this._mapFilterToFilterDescriptor(it)}),this._translationEnumKeys()}_mapFilterToFilterDescriptor(Be){if("boolean"==typeof Be.filter)this._filterDescriptors.push(new t({filterValue:null,name:Be.name,fieldName:Be.fieldName,title:Be.title,type:Be.type,option:Be.option,externalFilterColumn:Be.externalFilterColumn,filterComponentModel:Be.filterComponentModel,filter:{min:Be.min,max:Be.max,minLength:Be.minLength,maxLength:Be.maxLength,operator:"text"===Be.type?ie.Td.LI:Be.filter.operator}}));else if(Be.filter?.operator===ie.Td.BT){let it=new t({filterValue:null,name:Be.name,fieldName:Be.fieldName,title:Be.title+" (\u0627\u0632 \u062a\u0627\u0631\u06cc\u062e)",type:Be.type,option:Be.option,externalFilterColumn:Be.externalFilterColumn,filterComponentModel:Be.filterComponentModel,filter:{operator:ie.Td.GEQ,minDate:Be.filter.minDate,isBetween:!0}}),Mt=new t({filterValue:null,name:Be.name,fieldName:Be.fieldName,title:Be.title+" (\u062a\u0627 \u062a\u0627\u0631\u06cc\u062e)",type:Be.type,option:Be.option,externalFilterColumn:Be.externalFilterColumn,filterComponentModel:Be.filterComponentModel,filter:{operator:ie.Td.LEQ,maxDate:Be.filter.maxDate,required:it.filterValue,isBetween:!0}});this._filterDescriptors.push(it,Mt)}}_translationEnumKeys(){this._filterDescriptors.map(Be=>{"enum"===Be.type&&Be.option&&(Be.translatedEnumFilter=this.translatorService.lookupEnumKeyValueByEnumClass(Be.option.enum))})}_changeDateValue(Be){if(Be.filter.isBetween&&Be.filterValue){let it=this._filterDescriptors.find(Mt=>Mt.name===Be.name&&Mt.filter.operator===ie.Td.LEQ);it&&(it.filter.required=!0)}}_onSearch(){this.search.emit(this._filterDescriptors)}_clear(){this._filterDescriptors.map(Be=>Be.filterValue=null),this.clear.emit(this.columns)}static#e=this.\u0275fac=function(it){return new(it||Fe)(o.Y36(V.Qp))};static#t=this.\u0275cmp=o.Xpm({type:Fe,selectors:[["mts-data-table-filter"]],inputs:{columns:"columns",header:"header",collapseFilter:"collapseFilter"},outputs:{search:"search",clear:"clear"},decls:16,vars:4,consts:[["form","ngForm"],["id","accordionFilters",1,"accordion","accordion-flush"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed","border-bottom","border-primary","fw-bold"],["id","flush-collapseOne","data-bs-parent","#accordionFilters",1,"accordion-collapse","collapse","p-3",3,"ngClass"],[1,"row"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"fa-solid","fa-magnifying-glass"],[1,"btn","btn-light","ms-2",3,"click"],["class","col-md-3",4,"ngIf"],[3,"ngIf"],[1,"col-md-3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-md-3",3,"label"],["type","text",1,"form-control",3,"name","ngModel","minlength","maxlength","required","ngModelChange"],["type","number","mtsOnlyNumber","",1,"form-control",3,"name","ngModel","min","max","required","ngModelChange"],[1,"form-select",3,"name","ngModel","required","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"name","ngModel","minDate","maxDate","required","ngModelChange"]],template:function(it,Mt){if(1&it&&(o.TgZ(0,"form",null,0)(2,"div",1)(3,"div",2)(4,"h2",3)(5,"button",4),o._uU(6),o.qZA()(),o.TgZ(7,"div",5)(8,"div",6),o.YNc(9,Ve,3,2,"ng-container",7),o.TgZ(10,"div")(11,"button",8),o.NdJ("click",function(){return Mt._onSearch()}),o._UZ(12,"i",9),o._uU(13,"\xa0\u062c\u0633\u062a\u062c\u0648"),o.qZA(),o.TgZ(14,"button",10),o.NdJ("click",function(){return Mt._clear()}),o._uU(15,"\u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06cc"),o.qZA()()()()()()()),2&it){const St=o.MAs(1);o.xp6(6),o.hij(" ",Mt.header," "),o.xp6(1),o.Q6J("ngClass",Mt.collapseFilter?"show":""),o.xp6(2),o.Q6J("ngForOf",Mt._filterDescriptors),o.xp6(2),o.Q6J("disabled",St.invalid)}},dependencies:[te.mk,te.sg,te.O5,te.tP,te.RF,te.n9,le._Y,le.YN,le.Kr,le.Fj,le.wV,le.EJ,le.JJ,le.JL,le.Q7,le.wO,le.nD,le.qQ,le.Fd,le.On,le.F,U.p,we.L,de.h,Pe.u]})}},4376:(At,Le,k)=>{"use strict";k.d(Le,{Q:()=>Hn});var o=k(2868),V=k(2766),t=k(8122),ie=k(2508),te=k(7140),le=k(1343),U=k(1571),we=k(6854),de=k(546),Pe=k(6521),Se=k(6895),Ye=k(6556),je=k(1366),ke=k(4086),De=k(5556),ze=k(5064);function Qe(Zt,nn){if(1&Zt){const zt=U.EpF();U.TgZ(0,"div",8)(1,"mts-data-table-filter",9),U.NdJ("search",function(Ht){U.CHM(zt);const ui=U.oxw();return U.KtG(ui._onSearch(Ht))})("clear",function(){U.CHM(zt);const Ht=U.oxw();return U.KtG(Ht._onClear())}),U.qZA()()}if(2&Zt){const zt=U.oxw();U.xp6(1),U.Q6J("columns",zt._columns)}}function lt(Zt,nn){1&Zt&&U.GkF(0)}function tt(Zt,nn){if(1&Zt&&(U.TgZ(0,"div"),U.YNc(1,lt,1,0,"ng-container",10),U.qZA()),2&Zt){const zt=U.oxw();U.xp6(1),U.Q6J("ngTemplateOutlet",zt._action.template)}}function Ve(Zt,nn){1&Zt&&U._UZ(0,"i",17)}function Fe(Zt,nn){1&Zt&&(U.TgZ(0,"div",18)(1,"span",19),U._uU(2,"Loading..."),U.qZA()())}function Ne(Zt,nn){1&Zt&&(U.ynx(0),U._UZ(1,"i",23),U._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),U.BQk())}function Be(Zt,nn){1&Zt&&(U.ynx(0),U._UZ(1,"i",24),U._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u0627\u06a9\u0633\u0644 \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a "),U.BQk())}function it(Zt,nn){1&Zt&&(U.ynx(0),U._UZ(1,"i",25),U._uU(2," \u062e\u0631\u0648\u062c\u06cc PDF \u0635\u0641\u062d\u0647 \u062c\u0627\u0631\u06cc "),U.BQk())}function Mt(Zt,nn){1&Zt&&(U.ynx(0),U._UZ(1,"i",26),U._uU(2,"\xa0 \u062e\u0631\u0648\u062c\u06cc \u062a\u0645\u0627\u0645 \u0635\u0641\u062d\u0627\u062a PDF "),U.BQk())}function St(Zt,nn){if(1&Zt){const zt=U.EpF();U.TgZ(0,"button",20),U.NdJ("click",function(){const ui=U.CHM(zt).$implicit,Zi=U.oxw(2);return U.KtG(Zi._downloadFile(ui))}),U.ynx(1,21),U.YNc(2,Ne,3,0,"ng-container",22),U.YNc(3,Be,3,0,"ng-container",22),U.YNc(4,it,3,0,"ng-container",22),U.YNc(5,Mt,3,0,"ng-container",22),U.BQk(),U.qZA()}if(2&Zt){const zt=nn.$implicit,Xt=U.oxw(2);U.xp6(1),U.Q6J("ngSwitch",zt),U.xp6(1),U.Q6J("ngSwitchCase",Xt.exportTypeEnum.excel),U.xp6(1),U.Q6J("ngSwitchCase",Xt.exportTypeEnum.excelAllPage),U.xp6(1),U.Q6J("ngSwitchCase",Xt.exportTypeEnum.pdf),U.xp6(1),U.Q6J("ngSwitchCase",Xt.exportTypeEnum.pdfAllPage)}}function Kt(Zt,nn){if(1&Zt&&(U.TgZ(0,"div",11)(1,"button",12),U.YNc(2,Ve,1,0,"i",13),U._uU(3,"\xa0 "),U.YNc(4,Fe,3,0,"ng-template",null,14,U.W1O),U._uU(6," \u062f\u0627\u0646\u0644\u0648\u062f "),U.qZA(),U.TgZ(7,"div",15),U.YNc(8,St,6,5,"button",16),U.qZA()()),2&Zt){const zt=U.MAs(5),Xt=U.oxw();U.xp6(2),U.Q6J("ngIf",!Xt._loadingFile)("ngIfElse",zt),U.xp6(6),U.Q6J("ngForOf",Xt.exportTypes)}}function wn(Zt,nn){1&Zt&&(U.TgZ(0,"th",29),U._uU(1,"#"),U.qZA())}function ln(Zt,nn){if(1&Zt&&U._UZ(0,"i",32),2&Zt){const zt=U.oxw().$implicit,Xt=U.oxw(2);U.Udp("transform",Xt._transformSort(zt))}}const jn=function(){return{cursor:"pointer"}};function yn(Zt,nn){if(1&Zt){const zt=U.EpF();U.TgZ(0,"th",30),U.NdJ("click",function(){const ui=U.CHM(zt).$implicit,Zi=U.oxw(2);return U.KtG(Zi._onHeaderClick(ui))}),U._uU(1),U.YNc(2,ln,1,2,"i",31),U.qZA()}if(2&Zt){const zt=nn.$implicit,Xt=U.oxw(2);U.Akn(Xt._isSortable(zt)?U.DdM(4,jn):""),U.xp6(1),U.hij(" ",zt.title," "),U.xp6(1),U.Q6J("ngIf",Xt._isSortable(zt)&&Xt._hasSortDirection(zt))}}function Yr(Zt,nn){if(1&Zt&&(U.TgZ(0,"thead")(1,"tr"),U.YNc(2,wn,2,0,"th",27),U.YNc(3,yn,3,5,"th",28),U.qZA()()),2&Zt){const zt=U.oxw();U.xp6(2),U.Q6J("ngIf",zt.showRowNumber),U.xp6(1),U.Q6J("ngForOf",zt._columns)}}function Zn(Zt,nn){if(1&Zt&&(U.TgZ(0,"td",29),U._uU(1),U.qZA()),2&Zt){const zt=U.oxw().index,Xt=U.oxw(2);U.xp6(1),U.hij("",Xt.activeIndex*Xt.pageSize+(zt+1)," ")}}function sr(Zt,nn){if(1&Zt&&(U.ynx(0),U._uU(1),U.BQk()),2&Zt){const zt=U.oxw(2).$implicit,Xt=U.oxw().$implicit,Ht=U.oxw(2);U.xp6(1),U.hij(" ",Ht._getCellValue(Xt,zt)," ")}}function Ji(Zt,nn){if(1&Zt&&(U.ynx(0),U._uU(1),U.ALo(2,"jalaliDate"),U.BQk()),2&Zt){const zt=U.oxw(2).$implicit,Xt=U.oxw().$implicit,Ht=U.oxw(2);U.xp6(1),U.hij(" ",U.lcZ(2,1,Ht._getCellValue(Xt,zt))," ")}}function bt(Zt,nn){if(1&Zt&&(U.ynx(0),U._uU(1),U.ALo(2,"number"),U.BQk()),2&Zt){const zt=U.oxw(2).$implicit,Xt=U.oxw().$implicit,Ht=U.oxw(2);U.xp6(1),U.hij(" ",U.lcZ(2,1,Ht._getCellValue(Xt,zt))," ")}}function at(Zt,nn){if(1&Zt&&(U.ynx(0),U._uU(1),U.ALo(2,"mtsTranslateEnum"),U.BQk()),2&Zt){const zt=U.oxw(2).$implicit,Xt=U.oxw().$implicit,Ht=U.oxw(2);U.xp6(1),U.hij(" ",U.xi3(2,1,Ht._getCellValue(Xt,zt),zt.option.enum)," ")}}function Pt(Zt,nn){if(1&Zt&&(U.TgZ(0,"span",36),U.YNc(1,sr,2,1,"ng-container",2),U.YNc(2,Ji,3,3,"ng-container",2),U.YNc(3,bt,3,3,"ng-container",2),U.YNc(4,at,3,4,"ng-container",2),U.qZA()),2&Zt){const zt=U.oxw().$implicit;U.xp6(1),U.Q6J("ngIf","text"==zt.type),U.xp6(1),U.Q6J("ngIf","date"==zt.type),U.xp6(1),U.Q6J("ngIf","number"==zt.type),U.xp6(1),U.Q6J("ngIf","enum"==zt.type&&zt.option)}}function Vt(Zt,nn){1&Zt&&U.GkF(0)}const qt=function(Zt,nn){return{$implicit:Zt,index:nn}};function _t(Zt,nn){if(1&Zt&&U.YNc(0,Vt,1,0,"ng-container",37),2&Zt){const zt=U.oxw().$implicit,Xt=U.oxw(),Ht=Xt.$implicit,ui=Xt.index;U.Q6J("ngTemplateOutlet",zt.template)("ngTemplateOutletContext",U.WLB(2,qt,Ht,ui))}}function Ot(Zt,nn){if(1&Zt&&(U.TgZ(0,"td"),U.YNc(1,Pt,5,4,"ng-template",35),U.YNc(2,_t,1,5,"ng-template",35),U.qZA()),2&Zt){const zt=nn.$implicit;U.Tol(zt.cellClass),U.ekj("shrinked",zt.shrink)("fw-bold",zt.bold),U.xp6(1),U.Q6J("ngIf",zt.name),U.xp6(1),U.Q6J("ngIf",zt.template&&!(null!=zt.externalFilterColumn&&zt.externalFilterColumn.componentFilterTemplate))}}function un(Zt,nn){if(1&Zt&&(U.TgZ(0,"tr"),U.YNc(1,Zn,2,1,"td",27),U.YNc(2,Ot,3,8,"td",34),U.qZA()),2&Zt){const zt=U.oxw(2);U.xp6(1),U.Q6J("ngIf",zt.showRowNumber),U.xp6(1),U.Q6J("ngForOf",zt._columns)}}function Qn(Zt,nn){if(1&Zt&&(U.ynx(0),U.YNc(1,un,3,2,"tr",33),U.BQk()),2&Zt){const zt=U.oxw();U.xp6(1),U.Q6J("ngForOf",zt.data)}}function En(Zt,nn){if(1&Zt&&(U.TgZ(0,"tr")(1,"td",38),U._uU(2," \u0631\u06a9\u0648\u0631\u062f\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f. "),U.qZA()()),2&Zt){const zt=U.oxw();U.xp6(1),U.Q6J("colSpan",zt._columns.length+(zt.showRowNumber?1:0))}}function gn(Zt,nn){if(1&Zt&&(U.TgZ(0,"tr",39)(1,"td",40),U._UZ(2,"div",41),U.qZA()()),2&Zt){const zt=U.oxw();U.xp6(1),U.Q6J("colSpan",zt._columns.length+(zt.showRowNumber?1:0))}}function Cn(Zt,nn){if(1&Zt){const zt=U.EpF();U.TgZ(0,"mts-pagination",42),U.NdJ("pageChange",function(){U.CHM(zt);const Ht=U.oxw();return U.KtG(Ht._pageChange())}),U.qZA()}if(2&Zt){const zt=U.oxw();U.Q6J("totalRecords",zt.totalRecords)}}const Kn=function(Zt,nn,zt){return{border:Zt,"table-bordered":nn,"table-striped":zt}};class Hn{constructor(nn,zt){this.paginationConfig=nn,this.translatorService=zt,this.showRowNumber=!0,this.showExportBtn=!1,this.showHeader=!0,this.pagable=!0,this.borderless=!1,this.tableBordered=!1,this.tableStripped=!0,this.small=!1,this.filterable=!1,this.sortable=!1,this.exportTypes=[de.t.excel,de.t.excelAllPage],this.collapsedFilter=!1,this.pageChange=new U.vpe,this.filterEnumOptions=[],this.exportTypeEnum=de.t,this._request=le.i8.page(this.activeIndex,this.pageSize)}get data(){return this._data}get filters(){return this._request?.filters}get totalRecords(){return this._totalRecords}get pageSize(){return this.paginationConfig.pageSize}get activeIndex(){return this.paginationConfig.activeIndex}getColumnName(nn){return nn.fieldName??nn.name}ngOnChanges(nn){nn.dataSource&&this.dataSource&&(this.load(),this._data=this.dataSource.data,this._totalRecords=this.dataSource.totalRecords,this._changeSubscription=this.dataSource.change.subscribe(zt=>{zt instanceof t.i&&(this._data=zt.data,this._totalRecords=zt.total)}))}ngOnInit(){}get _showDownloadFile(){return this.data?.length&&this.dataSource.isSupportedDownload&&this.showExportBtn}_isSortable(nn){return this.sortable&&nn.sort}_isFilterable(nn){return this.filterable&&nn.filter}_hasSortDirection(nn){return"asc"===nn.sort||"desc"===nn.sort}_transformSort(nn){return`rotate(${"asc"===nn.sort?180:0}deg)`}_onHeaderClick(nn){let zt=this.getColumnName(nn);this._isSortable(nn)&&zt&&(this._hasSortDirection(nn)?"asc"===nn.sort?(nn.sort="desc",this._request?.sortDescending(zt)):"desc"===nn.sort&&(nn.sort=!0,this._request?.resetSort()):(nn.sort="asc",this._request?.sortAscending(zt)),this.load())}_onSearch(nn){this._request?.page&&(this._request.page.index=0),nn.map(Xt=>{let Ht=this.getColumnName(Xt);this._request?.filters.map(ui=>{"date"==Xt.type&&Xt.filter.isBetween||(ui.field===Xt.fieldName&&(Xt.filterValue||Xt.filterComponentModel?.value)||0===Xt.filterValue||0===Xt.filterComponentModel?.value)&&this._request?.removeFilter(Ht)}),(Xt.filterValue??Xt.filterComponentModel?.value)||0===Xt.filterValue||0===Xt.filterComponentModel?.value?this._request?.addFilter(Ht,Xt.filterValue??Xt.filterComponentModel?.value,Xt.filter?.operator):this._request?.removeFilter(Ht)}),this.load()}_onClear(){this._request?.removeAllFilters(),this.load()}load(){this.dataSource.load(this._request)}_getCellValue(nn,zt){var Xt=zt.name.split(".");let Ht=nn[Xt[0]];for(let ui=1;ui<Xt.length;ui++){if(null==Ht)return;Ht=Ht[Xt[ui]]}return Ht}_pageChange(){this._request?.page&&(this._request.page.size=this.pageSize,this._request.page.index=this.activeIndex),this.pageChange.emit({activeIndex:this.activeIndex,pageSize:this.pageSize}),this.load()}_downloadFile(nn){this._loadingFile=!0,this._constructBinaryDataRequest(nn),this.dataSource.downloadFile(this._binaryDataRequest),this._changeSubscription=this.dataSource.change.subscribe(zt=>{zt.data&&this._loadingFile&&(o.iK.saveBlob(zt.data,zt.fileName),this._loadingFile=!1)})}_constructBinaryDataRequest(nn){(nn===de.t.excelAllPage||nn===de.t.pdfAllPage)&&(this._binaryDataRequest=le.i8.page(this.activeIndex,2e6)),(nn===de.t.excel||nn===de.t.pdf)&&(this._binaryDataRequest=le.i8.page(this.activeIndex,this.pageSize)),this._binaryDataRequest?.exportType(le.dU.excel)}ngOnDestroy(){this._changeSubscription?.unsubscribe()}static#e=this.\u0275fac=function(zt){return new(zt||Hn)(U.Y36(V.Je),U.Y36(we.Qp))};static#t=this.\u0275cmp=U.Xpm({type:Hn,selectors:[["mts-data-table"]],contentQueries:function(zt,Xt,Ht){if(1&zt&&(U.Suo(Ht,te.v,5),U.Suo(Ht,ie.U,4),U.Suo(Ht,Pe.U,4)),2&zt){let ui;U.iGM(ui=U.CRH())&&(Xt._action=ui.first),U.iGM(ui=U.CRH())&&(Xt._columns=ui),U.iGM(ui=U.CRH())&&(Xt._externalFilters=ui)}},inputs:{dataSource:"dataSource",showRowNumber:"showRowNumber",showExportBtn:"showExportBtn",showHeader:"showHeader",pagable:"pagable",borderless:"borderless",tableBordered:"tableBordered",tableStripped:"tableStripped",small:"small",filterable:"filterable",sortable:"sortable",exportTypes:"exportTypes",collapsedFilter:"collapsedFilter"},outputs:{pageChange:"pageChange"},features:[U.TTD],decls:12,vars:17,consts:[["class","mb-2",4,"ngIf"],[1,"d-flex","my-2"],[4,"ngIf"],["ngbDropdown","","class","ms-auto",4,"ngIf"],[1,"table-responsive"],[1,"table","m-0",3,"ngClass"],["class","loading-row",4,"ngIf"],["class","mt-3",3,"totalRecords","pageChange",4,"ngIf"],[1,"mb-2"],[3,"columns","search","clear"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"ms-auto"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["class","fa-solid fa-download",4,"ngIf","ngIfElse"],["downloadTemplate",""],["ngbDropdownMenu","","aria-labelledby","exportType","name","type"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"fa-solid","fa-download"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["ngbDropdownItem","",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa-regular","fa-file-excel"],[1,"fa-solid","fa-file-excel"],[1,"fa-regular","fa-file-pdf"],[1,"fa-solid","fa-file-pdf"],["class","row-number text-muted",4,"ngIf"],[3,"style","click",4,"ngFor","ngForOf"],[1,"row-number","text-muted"],[3,"click"],["class","fa-solid fa-arrow-down ms-2 d-inline-block text-primary",3,"transform",4,"ngIf"],[1,"fa-solid","fa-arrow-down","ms-2","d-inline-block","text-primary"],[4,"ngFor","ngForOf"],[3,"class","shrinked","fw-bold",4,"ngFor","ngForOf"],[3,"ngIf"],[1,"text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-center","text-muted","small","p-3",3,"colSpan"],[1,"loading-row"],[1,"text-center",3,"colSpan"],["role","status",1,"spinner-border","text-primary"],[1,"mt-3",3,"totalRecords","pageChange"]],template:function(zt,Xt){1&zt&&(U.YNc(0,Qe,2,1,"div",0),U.TgZ(1,"div",1),U.YNc(2,tt,2,1,"div",2),U.YNc(3,Kt,9,3,"div",3),U.qZA(),U.TgZ(4,"div",4)(5,"table",5),U.YNc(6,Yr,4,2,"thead",2),U.TgZ(7,"tbody"),U.YNc(8,Qn,2,1,"ng-container",2),U.YNc(9,En,3,1,"tr",2),U.YNc(10,gn,3,1,"tr",6),U.qZA()()(),U.YNc(11,Cn,1,1,"mts-pagination",7)),2&zt&&(U.Q6J("ngIf",Xt.filterable),U.xp6(2),U.Q6J("ngIf",Xt._action),U.xp6(1),U.Q6J("ngIf",Xt._showDownloadFile),U.xp6(2),U.ekj("table-borderless",Xt.borderless)("table-sm",Xt.small),U.Q6J("ngClass",U.kEZ(13,Kn,!Xt.borderless,Xt.tableBordered,Xt.tableStripped)),U.xp6(1),U.Q6J("ngIf",Xt.showHeader),U.xp6(2),U.Q6J("ngIf",Xt.data),U.xp6(1),U.Q6J("ngIf",!Xt.data||0==Xt.data.length),U.xp6(1),U.Q6J("ngIf",Xt.dataSource&&Xt.dataSource.loading),U.xp6(1),U.Q6J("ngIf",Xt.pagable&&Xt.totalRecords))},dependencies:[Se.mk,Se.sg,Se.O5,Se.tP,Se.RF,Se.n9,Ye.Q,je.jt,je.iD,je.Vi,je.TH,ke.o,Se.JJ,De.K,ze.E],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;border-color:#e4e6ef}i[_ngcontent-%COMP%]{font-size:var(--bs-body-font-size)!important}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}td[_ngcontent-%COMP%]{min-width:50px}td.row-number[_ngcontent-%COMP%]{width:0;min-width:0}td.shrinked[_ngcontent-%COMP%]{width:0}tr.loading-row[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000014;transition:background-color 1s;z-index:1000}tr.loading-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;height:100%;display:flex;justify-content:center;align-items:center}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(161,165,183,.3)!important}"]})}},546:(At,Le,k)=>{"use strict";k.d(Le,{t:()=>o});var o=(()=>{return(t=o||(o={})).excel="Excel",t.excelAllPage="ExcelAllPage",t.pdf="PDF",t.pdfAllPage="PDFAllPage",o;var t})()},408:(At,Le,k)=>{"use strict";k.d(Le,{L:()=>de});var o=k(1366),V=k(1571),t=k(6854),ie=k(4006);const te=["ngbInput"],le=["datepicker"],U=["toggleBtn"];function we(Pe,Se){if(1&Pe){const Ye=V.EpF();V.TgZ(0,"div",7)(1,"button",8),V.NdJ("click",function(){V.CHM(Ye);const ke=V.oxw();return V.KtG(ke._onTodayClick())}),V._uU(2,"\u0627\u0645\u0631\u0648\u0632"),V.qZA()()}}class de{constructor(Se,Ye,je){this.el=Se,this.renderer=Ye,this.ngbCalendar=je,this.minDate={year:1300,month:1,day:1},this.open=!0,this.transparent=!0,this.closed=new V.vpe,this.selectDate=new V.vpe,this._controlValue=null,this._onChangeCallback=ke=>{},this._onTouchedCallback=()=>{},this._validateCallback=ke=>{}}ngAfterViewInit(){this.transparent&&this.renderer.addClass(this.datepicker.nativeElement,"transparent"),this.transparent&&this.renderer.addClass(this.toggleBtn.nativeElement,"transparent")}writeValue(Se){if(null==Se||""===Se)this._controlValue=null,this._datePickerValue=null;else{if("string"!=typeof Se)throw this._onChangeCallback("invalid_date"),new Error("invalid date value");{const Ye=(0,t.bI)(Se);this._datePickerValue=(0,t.PX)(Ye),this._controlValue=Se}}}registerOnChange(Se){this._onChangeCallback=Se}registerOnTouched(Se){this._onTouchedCallback=Se}registerOnValidatorChange(Se){this._validateCallback=Se}setDisabledState(Se){this.disabled=Se}validate(Se){let Ye={};return this._datePickerValue?(this._datePickerValue&&!(0,t.xD)(this._datePickerValue)&&(Ye={invalidDate:!0}),Ye):null}_onDateSelect(Se){this._onChangeValue(Se),this._closeCalendar()}_onTodayClick(){this._onDateSelect(this.ngbCalendar.getToday())}_updateValueToIso(Se){this._controlValue=(0,t.HA)(Se)}_onInput(){this._datePickerValue instanceof Object&&(this._datePickerValue=new o.qj(this._datePickerValue.year,this._datePickerValue.month,this._datePickerValue.day)),this._datePickerValue instanceof o.qj?this._onDateSelect(this._datePickerValue):this._onChangeValue(this._datePickerValue)}_onToggleCalendar(Se){Se.cancelBubble=!0,this.ngbInput.toggle()}_openCalendar(){this.ngbInput.open()}_closeCalendar(){this.ngbInput.close(),this.closed.emit()}_onChangeValue(Se){if(Se)if(Se instanceof o.qj&&(0,t.xD)(Se)){this._onTouchedCallback(),this._datePickerValue=Se;const Ye=(0,t.$C)(Se);this._updateValueToIso(Ye),this.selectDate.emit(Se),this._onChangeCallback(this._controlValue)}else this._onChangeCallback("invalid_date");else this._onChangeCallback(null),this.selectDate.emit(null)}_onDocumentClicked(Se){this.el.nativeElement.contains(Se.target)||this._closeCalendar()}static#e=this.\u0275fac=function(Ye){return new(Ye||de)(V.Y36(V.SBq),V.Y36(V.Qsj),V.Y36(o.vL))};static#t=this.\u0275cmp=V.Xpm({type:de,selectors:[["mts-date-picker"]],viewQuery:function(Ye,je){if(1&Ye&&(V.Gf(te,5),V.Gf(le,5),V.Gf(U,5)),2&Ye){let ke;V.iGM(ke=V.CRH())&&(je.ngbInput=ke.first),V.iGM(ke=V.CRH())&&(je.datepicker=ke.first),V.iGM(ke=V.CRH())&&(je.toggleBtn=ke.first)}},hostBindings:function(Ye,je){1&Ye&&V.NdJ("click",function(De){return je._onDocumentClicked(De,De.target)},!1,V.evT)},inputs:{disabled:"disabled",readonly:"readonly",required:"required",minDate:"minDate",maxDate:"maxDate",open:"open",transparent:"transparent"},outputs:{closed:"closed",selectDate:"selectDate"},features:[V._Bn([{provide:ie.JU,useExisting:(0,V.Gpc)(()=>de),multi:!0},{provide:ie.Cf,useExisting:(0,V.Gpc)(()=>de),multi:!0}])],decls:9,vars:9,consts:[[1,"input-group"],["type","text","placeholder","\u0631\u0648\u0632/\u0645\u0627\u0647/\u0633\u0627\u0644","id","mtsDate","name","dp","maxlength","10","ngbDatepicker","",1,"form-control",3,"firstDayOfWeek","footerTemplate","ngModel","minDate","maxDate","disabled","readOnly","required","ngModelChange","dateSelect","input"],["ngbInput","ngbDatepicker","datepicker",""],["role","button","type","button",1,"input-group-text",3,"disabled","click"],["toggleBtn",""],[1,"fa-solid","fa-calendar-days","text-primary"],["footerTemplate",""],[1,"mts-date-picker-footer","text-center","p-2"],["type","button","type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(Ye,je){if(1&Ye&&(V.TgZ(0,"div",0)(1,"input",1,2),V.NdJ("ngModelChange",function(De){return je._datePickerValue=De})("dateSelect",function(De){return je._onDateSelect(De)})("input",function(){return je._onInput()}),V.qZA(),V.TgZ(4,"button",3,4),V.NdJ("click",function(De){return je._onToggleCalendar(De)}),V._UZ(6,"i",5),V.qZA(),V.YNc(7,we,3,0,"ng-template",null,6,V.W1O),V.qZA()),2&Ye){const ke=V.MAs(8);V.xp6(1),V.Q6J("firstDayOfWeek",6)("footerTemplate",ke)("ngModel",je._datePickerValue)("minDate",je.minDate)("maxDate",je.maxDate)("disabled",je.disabled)("readOnly",je.readonly)("required",je.required),V.xp6(3),V.Q6J("disabled",je.disabled)}},dependencies:[ie.Fj,ie.JJ,ie.Q7,ie.nD,ie.On,o.J4],styles:[".mts-date-picker-toggle-btn[_ngcontent-%COMP%]{height:100%;width:1em;background:transparent;border:none;padding:0;top:0;left:.8rem;position:absolute}button[_ngcontent-%COMP%]{border:none}.transparent[_ngcontent-%COMP%]{background-color:transparent;border:1px solid rgba(161,165,183,.3)!important}"]})}},5624:(At,Le,k)=>{"use strict";k.d(Le,{Y:()=>ze});var o=k(9751),V=k(8362),t=k(7856),ie=k(1571),te=k(6895);const le=["fileInput"];function U(Qe,lt){if(1&Qe){const tt=ie.EpF();ie.TgZ(0,"img",14),ie.NdJ("click",function(){ie.CHM(tt);const Fe=ie.oxw();return ie.KtG(Fe._openFullScreenImage())}),ie.qZA()}if(2&Qe){const tt=ie.oxw();ie.Q6J("src",tt.thumbnailUrl,ie.LSH)}}function we(Qe,lt){if(1&Qe&&(ie.TgZ(0,"h6",15),ie._uU(1),ie.qZA()),2&Qe){const tt=ie.oxw();ie.Q6J("ngClass",tt.star?"card-title-star":""),ie.xp6(1),ie.hij(" ",tt.header," ")}}function de(Qe,lt){if(1&Qe&&(ie.TgZ(0,"p",16),ie._uU(1),ie.qZA()),2&Qe){const tt=ie.oxw();ie.xp6(1),ie.hij(" ",tt.footer," ")}}function Pe(Qe,lt){if(1&Qe&&(ie.TgZ(0,"span",19),ie._uU(1),ie.qZA()),2&Qe){const tt=ie.oxw(2);ie.xp6(1),ie.hij("",tt._getUploadPercentage(),"%")}}function Se(Qe,lt){if(1&Qe&&(ie.ynx(0),ie.YNc(1,Pe,2,1,"span",17),ie._UZ(2,"div",18),ie.BQk()),2&Qe){const tt=ie.oxw();ie.xp6(1),ie.Q6J("ngIf",tt._lastProgress)}}function Ye(Qe,lt){1&Qe&&(ie.ynx(0),ie._UZ(1,"i",20),ie.BQk())}function je(Qe,lt){1&Qe&&(ie.ynx(0),ie._UZ(1,"i",21),ie.BQk())}function ke(Qe,lt){if(1&Qe){const tt=ie.EpF();ie.TgZ(0,"button",22),ie.NdJ("click",function(){ie.CHM(tt);const Fe=ie.oxw();return ie.KtG(Fe.showDialog())}),ie._uU(1," \u0627\u0646\u062a\u062e\u0627\u0628 \u0641\u0627\u06cc\u0644 "),ie.qZA()}if(2&Qe){const tt=ie.oxw();ie.Q6J("disabled",tt.uploading||tt.disabled)}}function De(Qe,lt){if(1&Qe&&(ie.TgZ(0,"a",23),ie._UZ(1,"i",24),ie.qZA()),2&Qe){const tt=ie.oxw();ie.Q6J("href",tt.downloadUrl,ie.LSH)}}class ze{constructor(lt){this.imageViewerService=lt,this.disabled=!1,this.autoUpload=!1,this.fullScreenThumbnail=!0,this.star=!1,this.uploadStart=new ie.vpe,this.uploadProgress=new ie.vpe,this.uploadComplete=new ie.vpe,this.uploadError=new ie.vpe}get uploading(){return"uploading"===this._status}showDialog(){this._fileInput.nativeElement.click()}uploadFile(){if("function"!=typeof this.uploader)throw Error("No uploader function is set.");if(!(this._file instanceof File))throw Error("No File object is selected to upload.");let lt;try{lt=this.uploader(this._file,this.uploaderData)}catch{throw Error("upload error.")}if(!(lt instanceof o.y))throw Error("Uploader function should return an Observable.");this.uploadStart.emit(),this._status="uploading",this._uploaderSubscription=lt.subscribe({next:tt=>{tt instanceof t.md?(this._lastProgress=tt,this.uploadProgress.emit(tt)):tt instanceof t.D3&&(this.uploadComplete.emit(tt),this._status="uploadComplete")},complete:()=>{},error:tt=>{this.uploadError.emit(tt),this._status="error"}})}_onFileChange(lt){var tt=lt.target.files[0];tt&&(this._file=tt,this._status=void 0,this._lastProgress=void 0,this.uploader&&this.autoUpload&&this.uploadFile())}_getUploadPercentage(){if(this._lastProgress){const{uploaded:lt,total:tt}=this._lastProgress;return Math.floor(lt/tt*100)}return 0}_openFullScreenImage(){this.fullScreenThumbnail&&this.imageViewerService.show(this.thumbnailUrl)}ngOnDestroy(){this._uploaderSubscription?.unsubscribe()}static#e=this.\u0275fac=function(tt){return new(tt||ze)(ie.Y36(V.OX))};static#t=this.\u0275cmp=ie.Xpm({type:ze,selectors:[["app-file-upload"]],viewQuery:function(tt,Ve){if(1&tt&&ie.Gf(le,5,ie.SBq),2&tt){let Fe;ie.iGM(Fe=ie.CRH())&&(Ve._fileInput=Fe.first)}},hostVars:2,hostBindings:function(tt,Ve){2&tt&&ie.ekj("uploading",Ve.uploading)},inputs:{disabled:"disabled",autoUpload:"autoUpload",uploader:"uploader",uploaderData:"uploaderData",accept:"accept",header:"header",footer:"footer",thumbnailUrl:"thumbnailUrl",downloadUrl:"downloadUrl",fullScreenThumbnail:"fullScreenThumbnail",star:"star"},outputs:{uploadStart:"uploadStart",uploadProgress:"uploadProgress",uploadComplete:"uploadComplete",uploadError:"uploadError"},decls:16,vars:9,consts:[["type","file",3,"accept","input"],["fileInput",""],[1,"card","h-100"],[1,"image-holder"],["class","card-img-top",3,"src","click",4,"ngIf"],[1,"card-body"],["class","card-title",3,"ngClass",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"ms-auto"],[4,"ngIf"],[1,"card-footer","d-flex"],["type","button","class","btn btn-sm btn-light flex-fill",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-light ms-2","title","\u062f\u0627\u0646\u0644\u0648\u062f",3,"href",4,"ngIf"],[1,"card-img-top",3,"src","click"],[1,"card-title",3,"ngClass"],[1,"text-muted"],["class","text-sucess",4,"ngIf"],[1,"spinner-grow","text-success","ms-2"],[1,"text-sucess"],[1,"bi","bi-check-circle","text-success"],[1,"bi","bi-exclamation-triangle-fill","text-danger"],["type","button",1,"btn","btn-sm","btn-light","flex-fill",3,"disabled","click"],["title","\u062f\u0627\u0646\u0644\u0648\u062f",1,"btn","btn-sm","btn-light","ms-2",3,"href"],[1,"fa-solid","fa-download"]],template:function(tt,Ve){1&tt&&(ie.TgZ(0,"input",0,1),ie.NdJ("input",function(Ne){return Ve._onFileChange(Ne)}),ie.qZA(),ie.TgZ(2,"div",2)(3,"div",3),ie.YNc(4,U,1,1,"img",4),ie.qZA(),ie.TgZ(5,"div",5),ie.YNc(6,we,2,2,"h6",6),ie.YNc(7,de,2,1,"p",7),ie.TgZ(8,"div",8)(9,"div",9),ie.YNc(10,Se,3,1,"ng-container",10),ie.YNc(11,Ye,2,0,"ng-container",10),ie.YNc(12,je,2,0,"ng-container",10),ie.qZA()()(),ie.TgZ(13,"div",11),ie.YNc(14,ke,2,1,"button",12),ie.YNc(15,De,2,1,"a",13),ie.qZA()()),2&tt&&(ie.Q6J("accept",Ve.accept),ie.xp6(4),ie.Q6J("ngIf",Ve.thumbnailUrl),ie.xp6(2),ie.Q6J("ngIf",Ve.header),ie.xp6(1),ie.Q6J("ngIf",Ve.footer),ie.xp6(3),ie.Q6J("ngIf",Ve.uploading),ie.xp6(1),ie.Q6J("ngIf","uploadComplete"===Ve._status),ie.xp6(1),ie.Q6J("ngIf","error"===Ve._status),ie.xp6(2),ie.Q6J("ngIf",Ve.uploader),ie.xp6(1),ie.Q6J("ngIf",Ve.downloadUrl))},dependencies:[te.mk,te.O5],styles:['[_nghost-%COMP%]{display:block}.uploading[_nghost-%COMP%]   img[_ngcontent-%COMP%]{cursor:wait}[_nghost-%COMP%]:not(.uploading)   img[_ngcontent-%COMP%]{cursor:pointer}input[type=file][_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #E4E6EF!important}.card[_ngcontent-%COMP%]   .image-holder[_ngcontent-%COMP%]{height:150px;overflow:hidden;text-align:center}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:70%;margin-top:20px;background-size:cover}.thumbnail-col[_ngcontent-%COMP%]{background:repeating-conic-gradient(rgba(169,227,227,.2823529412) 0% 25%,transparent 0% 50%) 50%/20px 20px;display:flex;align-items:center}.spinner-grow[_ngcontent-%COMP%]{width:.7rem;height:.7rem}.card-title-star[_ngcontent-%COMP%]:after{content:"*";color:var(--bs-danger)}']})}},7856:(At,Le,k)=>{"use strict";k.d(Le,{D3:()=>te,OR:()=>le,md:()=>ie});var o=k(529),V=k(9751);class t{}class ie extends t{constructor(we,de){super(),this.total=we,this.uploaded=de}}class te extends t{constructor(we){super(),this.response=we}}function le(){return function(U){return new V.y(we=>{U.subscribe({next(de){de.type==o.dt.UploadProgress?we.next(new ie(de.total,de.loaded)):de.type===o.dt.Response&&we.next(new te(de))},error(de){we.error(de)},complete(){we.complete()}})})}}},8008:(At,Le,k)=>{"use strict";k.d(Le,{h:()=>Se});var o=k(4006),V=k(6854),t=k(1571),ie=k(6895);function te(Ye,je){1&Ye&&(t.TgZ(0,"span",5),t._uU(1,"*"),t.qZA())}function le(Ye,je){if(1&Ye&&(t.TgZ(0,"label",3),t._uU(1),t.YNc(2,te,2,0,"span",4),t.qZA()),2&Ye){const ke=t.oxw();t.xp6(1),t.hij(" ",ke.label," "),t.xp6(1),t.Q6J("ngIf",ke.isRequiredField||ke.showRequiredMarker)}}function U(Ye,je){if(1&Ye&&(t.TgZ(0,"small",6),t._uU(1),t.qZA()),2&Ye){const ke=t.oxw();t.xp6(1),t.hij(" ",null==ke.firstError?null:ke.firstError.text,"\n")}}function we(Ye,je){if(1&Ye&&(t.TgZ(0,"small",8),t._uU(1),t.qZA()),2&Ye){const ke=t.oxw(2);t.xp6(1),t.Oqu(ke.hint)}}function de(Ye,je){if(1&Ye&&t.YNc(0,we,2,1,"small",7),2&Ye){const ke=t.oxw();t.Q6J("ngIf",ke.hint)}}const Pe=["*"];class Se{constructor(je,ke){this.renderer=je,this.translatorService=ke,this.showError=!0,this.showRequiredMarker=!1}get firstError(){return this._firstError}get touched(){return this._ngControl?.touched}get dirty(){return this._ngControl?.dirty}get isRequiredField(){return this._isRequiredField()}ngOnChanges(){this._onChangeLabel()}ngOnInit(){if(!this._ngControl)throw Error("FormFieldComponent requires a NgControl");this._subscription=this._ngControl.statusChanges?.subscribe(je=>this._onChangeState())}_onFocus(){this._onChangeState()}_onFocusout(){this._onChangeState()}_onChangeLabel(){return this.labelKey&&(this.label=this.translatorService.translate(this.labelKey)),this.label}_onChangeState(){const je="INVALID"===this._ngControl?.status;if(je&&this.touched){const ke=this._ngControl.errors,De=Object.keys(ke)[0],ze=ke?this.translatorService.translateFirstError(ke):"";this._firstError={key:De,text:ze}}else this._firstError=null;return this.touched&&(this.renderer.addClass(this._ngControlElement.nativeElement,je?"is-invalid":"is-valid"),this.renderer.removeClass(this._ngControlElement.nativeElement,je?"is-valid":"is-invalid")),this._firstError}_isRequiredField(){const je=this._ngControl?.control?.validator,ke=je&&je(new o.NI(null));return null!=ke&&!0===ke?.required}ngOnDestroy(){this._subscription?.unsubscribe()}static#e=this.\u0275fac=function(ke){return new(ke||Se)(t.Y36(t.Qsj),t.Y36(V.Qp))};static#t=this.\u0275cmp=t.Xpm({type:Se,selectors:[["mts-form-field"]],contentQueries:function(ke,De,ze){if(1&ke&&(t.Suo(ze,o.a5,7),t.Suo(ze,o.a5,7,t.SBq)),2&ke){let Qe;t.iGM(Qe=t.CRH())&&(De._ngControl=Qe.first),t.iGM(Qe=t.CRH())&&(De._ngControlElement=Qe.first)}},hostBindings:function(ke,De){1&ke&&t.NdJ("focusin",function(){return De._onFocus()})("focusout",function(){return De._onFocusout()})},inputs:{label:"label",titleFieldFunc:"titleFieldFunc",labelKey:"labelKey",hint:"hint",showError:"showError",showRequiredMarker:"showRequiredMarker"},features:[t.TTD],ngContentSelectors:Pe,decls:5,vars:3,consts:[["class","form-label",4,"ngIf"],["class","text-danger",4,"ngIf","ngIfElse"],["hintRef",""],[1,"form-label"],["class","text-danger form-field-required",4,"ngIf"],[1,"text-danger","form-field-required"],[1,"text-danger"],["class","form-field-hint text-muted",4,"ngIf"],[1,"form-field-hint","text-muted"]],template:function(ke,De){if(1&ke&&(t.F$t(),t.YNc(0,le,3,2,"label",0),t.Hsn(1),t.YNc(2,U,2,1,"small",1),t.YNc(3,de,1,1,"ng-template",null,2,t.W1O)),2&ke){const ze=t.MAs(4);t.Q6J("ngIf",De.label),t.xp6(2),t.Q6J("ngIf",De.showError&&De.touched&&(null==De.firstError?null:De.firstError.text))("ngIfElse",ze)}},dependencies:[ie.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:6rem}.form-field-hint[_ngcontent-%COMP%]{font-size:.7rem}[_nghost-%COMP%]:has(textarea){height:auto}"]})}},1079:(At,Le,k)=>{"use strict";k.d(Le,{k:()=>t});var o=k(6895),V=k(1571);class t{static#e=this.\u0275fac=function(le){return new(le||t)};static#t=this.\u0275mod=V.oAB({type:t});static#n=this.\u0275inj=V.cJS({imports:[o.ez]})}},4588:(At,Le,k)=>{"use strict";k.d(Le,{k:()=>V.k}),k(8008);var V=k(1079)},4934:(At,Le,k)=>{"use strict";k.d(Le,{X:()=>te});var o=k(1442),V=k(1571),t=k(6895);const ie=function(le){return{display:le}};class te{constructor(U){this.imageViewerService=U,this.thumbnailUrl="",this.showFullImage="none"}ngOnInit(){this.imageViewerService.showImageEventChange.subscribe(U=>{U&&(this.showFullImage="block",this.thumbnailUrl=U)})}static#e=this.\u0275fac=function(we){return new(we||te)(V.Y36(o.O))};static#t=this.\u0275cmp=V.Xpm({type:te,selectors:[["mts-image-thumbnail-viewer"]],decls:4,vars:4,consts:[[1,"fullPageImgModal",3,"ngStyle"],[1,"text-light","close",3,"click"],[1,"modal-content",3,"src"]],template:function(we,de){1&we&&(V.TgZ(0,"div",0)(1,"span",1),V.NdJ("click",function(){return de.showFullImage="none"}),V._uU(2,"\xd7"),V.qZA(),V._UZ(3,"img",2),V.qZA()),2&we&&(V.Q6J("ngStyle",V.VKq(2,ie,de.showFullImage)),V.xp6(3),V.Q6J("src",de.thumbnailUrl,V.LSH))},dependencies:[t.PC],styles:[".fullPageImgModal[_ngcontent-%COMP%]{display:none;position:fixed;padding-top:5rem;inset:0;width:100%;height:100%;overflow:auto;background-color:#4c4c4ce6;z-index:1200}.fullPageImgModal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{margin:auto;display:block;width:80%;max-width:40rem}.modal-content[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_zoom;-webkit-animation-duration:.6s;animation-name:_ngcontent-%COMP%_zoom;animation-duration:.6s}@keyframes _ngcontent-%COMP%_zoom{0%{transform:scale(0)}to{transform:scale(1)}}.close[_ngcontent-%COMP%]{position:absolute;top:1rem;left:3rem;font-size:3rem;font-weight:700;transition:.3s}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{text-decoration:none;cursor:pointer}"]})}},1442:(At,Le,k)=>{"use strict";k.d(Le,{O:()=>t});var o=k(7579),V=k(1571);class t{constructor(){this._showImageEventSubject=new o.x,this.showImageEventChange=this._showImageEventSubject.asObservable()}show(te){this._showImageEventSubject.next(te)}static#e=this.\u0275fac=function(le){return new(le||t)};static#t=this.\u0275prov=V.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}},8362:(At,Le,k)=>{"use strict";k.d(Le,{G8:()=>ie,OX:()=>te.O}),k(4934);var V=k(6895),t=k(1571);class ie{static#e=this.\u0275fac=function(we){return new(we||ie)};static#t=this.\u0275mod=t.oAB({type:ie});static#n=this.\u0275inj=t.cJS({imports:[V.ez]})}var te=k(1442)},8557:(At,Le,k)=>{"use strict";k.d(Le,{J:()=>ze});var o=k(1571),V=k(6895),t=k(8838);function ie(Qe,lt){1&Qe&&o.GkF(0)}function te(Qe,lt){if(1&Qe){const tt=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(tt);const Fe=o.oxw(2);return o.KtG(Fe.onNext())})("disabledStatus",function(Fe){o.CHM(tt);const Ne=o.oxw(2);return o.KtG(Ne._onDisabledStatus(Fe))}),o.YNc(1,ie,1,0,"ng-container",7),o.qZA()}if(2&Qe){const tt=o.oxw(2),Ve=o.MAs(6);o.Q6J("disabled",tt.nextDisabled)("requestId",tt.requestId),o.xp6(1),o.Q6J("ngTemplateOutlet",Ve)}}function le(Qe,lt){if(1&Qe&&(o.ynx(0),o.YNc(1,te,2,3,"button",5),o.BQk()),2&Qe){const tt=o.oxw();o.xp6(1),o.Q6J("ngIf",tt.showNext)}}function U(Qe,lt){1&Qe&&o.GkF(0)}function we(Qe,lt){if(1&Qe){const tt=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){o.CHM(tt);const Fe=o.oxw(2);return o.KtG(Fe.onNext())}),o.YNc(1,U,1,0,"ng-container",7),o.qZA()}if(2&Qe){const tt=o.oxw(2),Ve=o.MAs(6);o.Q6J("disabled",tt.nextDisabled),o.xp6(1),o.Q6J("ngTemplateOutlet",Ve)}}function de(Qe,lt){if(1&Qe&&o.YNc(0,we,2,2,"button",8),2&Qe){const tt=o.oxw();o.Q6J("ngIf",tt.showNext)}}function Pe(Qe,lt){1&Qe&&(o.O4$(),o.TgZ(0,"svg",13),o._UZ(1,"path",14)(2,"path",15),o.qZA())}const Se=function(Qe){return{"me-4":Qe}};function Ye(Qe,lt){if(1&Qe){const tt=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){o.CHM(tt);const Fe=o.oxw();return o.KtG(Fe.onBack())}),o.YNc(1,Pe,3,0,"svg",11),o.TgZ(2,"small",12),o._uU(3),o.qZA()()}if(2&Qe){const tt=o.oxw();o.Tol(o.VKq(4,Se,tt.showNext)),o.xp6(1),o.Q6J("ngIf",tt.withBackArrow),o.xp6(2),o.Oqu(tt.backTitle)}}function je(Qe,lt){1&Qe&&(o.O4$(),o.TgZ(0,"svg",18),o._UZ(1,"path",19)(2,"path",20),o.qZA())}function ke(Qe,lt){if(1&Qe&&(o.TgZ(0,"small",16),o._uU(1),o.qZA(),o.YNc(2,je,3,0,"svg",17)),2&Qe){const tt=o.oxw();o.xp6(1),o.Oqu(tt.nextTitle),o.xp6(1),o.Q6J("ngIf",tt.withNextArrow)}}const De=function(Qe){return{"justify-content-center":Qe}};class ze{constructor(){this.nextTitle="\u062b\u0628\u062a",this.backTitle="\u0628\u0627\u0632\u06af\u0634\u062a",this.btnsCenter=!1,this.withBackArrow=!0,this.withNextArrow=!0,this.nextDisabled=!1,this.showNext=!0,this.showBack=!0,this.direction="right",this.next=new o.vpe,this.back=new o.vpe}onBack(){this.back.emit(!0)}onNext(){this.next.emit(!0)}_onDisabledStatus(lt){this.withNextArrow=!lt}static#e=this.\u0275fac=function(tt){return new(tt||ze)};static#t=this.\u0275cmp=o.Xpm({type:ze,selectors:[["mts-next-back-btns"]],inputs:{requestId:"requestId",nextTitle:"nextTitle",backTitle:"backTitle",btnsCenter:"btnsCenter",withBackArrow:"withBackArrow",withNextArrow:"withNextArrow",nextDisabled:"nextDisabled",showNext:"showNext",showBack:"showBack",direction:"direction"},outputs:{next:"next",back:"back"},decls:7,vars:6,consts:[[1,"d-flex","flex-row-reverse","align-items-center","w-100",3,"ngClass"],[4,"ngIf","ngIfElse"],["generalNextBtn",""],["type","button","class","text-primary btn bg-primary bg-opacity-10 ps-3 pe-4 py-2","data-testid","back",3,"class","click",4,"ngIf"],["nextBtnContent",""],["type","submit","class","btn btn-primary py-2","data-testid","next","mtsDisabled","",3,"disabled","requestId","click","disabledStatus",4,"ngIf"],["type","submit","data-testid","next","mtsDisabled","",1,"btn","btn-primary","py-2",3,"disabled","requestId","click","disabledStatus"],[4,"ngTemplateOutlet"],["type","submit","class","btn btn-primary py-2","data-testid","next",3,"disabled","click",4,"ngIf"],["type","submit","data-testid","next",1,"btn","btn-primary","py-2",3,"disabled","click"],["type","button","data-testid","back",1,"text-primary","btn","bg-primary","bg-opacity-10","ps-3","pe-4","py-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16","class","me-2",4,"ngIf"],[1,"ps-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16",1,"me-2"],["data-name","Path 100","d","M118 419h-11.414a1 1 0 1 0 0 2H118z","transform","translate(-105.586 -412)",2,"fill","#099885"],["data-name","Path 101","d","M98 428v-16l7.293 7.293a1 1 0 0 1 0 1.414z","transform","translate(-85.586 -412)",2,"opacity","0.3","fill","#099885"],[1,"pe-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16","class","ms-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","16","viewBox","0 0 20 16",1,"ms-2"],["data-name","Path 100","d","M105.586 419H117a1 1 0 0 1 0 2h-11.414z","transform","translate(-98 -412)",2,"fill","#fff"],["data-name","Path 101","d","M105.586 428v-16l-7.293 7.293a1 1 0 0 0 0 1.414z","transform","translate(-98 -412)",2,"opacity","0.3","fill","#fff"]],template:function(tt,Ve){if(1&tt&&(o.TgZ(0,"div",0),o.YNc(1,le,2,1,"ng-container",1),o.YNc(2,de,1,1,"ng-template",null,2,o.W1O),o.YNc(4,Ye,4,6,"button",3),o.qZA(),o.YNc(5,ke,3,2,"ng-template",null,4,o.W1O)),2&tt){const Fe=o.MAs(3);o.Q6J("ngClass",o.VKq(4,De,Ve.btnsCenter)),o.xp6(1),o.Q6J("ngIf",Ve.requestId)("ngIfElse",Fe),o.xp6(3),o.Q6J("ngIf",Ve.showBack)}},dependencies:[V.mk,V.O5,V.tP,t.l],styles:["[_nghost-%COMP%]{width:100%}"]})}},1260:(At,Le,k)=>{"use strict";k.d(Le,{n:()=>U});var o=k(1571),V=k(4006),t=k(6895);function ie(we,de){if(1&we){const Pe=o.EpF();o.TgZ(0,"input",5),o.NdJ("keyup",function(Ye){const ke=o.CHM(Pe).index,De=o.oxw();return o.KtG(De._changeFocus(Ye,ke))}),o.qZA()}if(2&we){const Pe=de.index;o.MGl("name","otp-",Pe,"")("id","otp-",Pe,"")}}function te(we,de){if(1&we&&(o.TgZ(0,"p",6),o._uU(1),o.qZA()),2&we){const Pe=o.oxw();o.xp6(1),o.hij("\u0627\u0631\u0633\u0627\u0644 \u0645\u062c\u062f\u062f \u06a9\u062f \u062a\u0627 ",Pe.display," \u062f\u06cc\u06af\u0631")}}function le(we,de){if(1&we){const Pe=o.EpF();o.TgZ(0,"p",7),o.NdJ("click",function(){o.CHM(Pe);const Ye=o.oxw();return o.KtG(Ye.reSend())}),o._uU(1,"\u0627\u0631\u0633\u0627\u0644 \u0645\u062c\u062f\u062f"),o.qZA()}}class U{constructor(){this.otpLength=5,this.required=!1,this.minute=2,this.reSendOtp=new o.vpe,this.display="",this.showTimer=!1,this.showResend=!1,this._generateInputCollection=[],this._changeCallback=de=>{},this._touchedCallback=()=>{},this._validateCallback=de=>{}}ngOnInit(){this.initInputCollection(),setTimeout(()=>{this.initFocus()},0)}initInputCollection(){this._generateInputCollection=[...Array(this.otpLength).fill(0).map((de,Pe)=>({value:"",disabled:0!==Pe}))]}writeValue(de){this._value=null==de?"":de,this._changeCallback(this._value)}registerOnValidatorChange(de){this._validateCallback=de}registerOnChange(de){this._changeCallback=de}registerOnTouched(de){this._touchedCallback=de}validate(de){let Pe;return this.required&&this._value?.length!==this.otpLength&&(Pe={required:!0}),Pe}reSend(){this.clearInput(),this.reSendOtp.emit(!0),this.showResend=!1,this.start(),setTimeout(()=>{this.initFocus()},0)}timer(){let de=60*this.minute,Pe="00",Se=60;const Ye=this.minute<10?"0":"";this.clearTimer?.(),this.display=`${Ye}${Math.floor(de/60)}:${Pe}`;const je=setInterval(()=>{de--,0!=Se?Se--:Se=59,Pe=Se<10?"0"+Se:Se,this.display=`${Ye}${Math.floor(de/60)}:${Pe}`,0==de&&(this.showTimer=!1,this.showResend=!0,this.display="")},1e3);this.clearTimer=()=>clearInterval(je)}start(){this.timer(),setTimeout(()=>{this.showTimer=!0},0)}getElement(de){return document.querySelector(`#otp-${de}`)}_changeFocus(de,Pe){const Se=de.target.value;this._generateInputCollection[Pe].value="","Backspace"===de.key||"Delete"===de.key?this.moveBackward(Pe):Se&&/^[\u06F0-\u06F90-9]+$/.test(de.target.value)&&(this._generateInputCollection[Pe].value=Se,this.moveForward(Pe)),this._computeValue()}_computeValue(){let de="";this._generateInputCollection.forEach(Pe=>{Pe.value?de+=Pe.value:de=""}),this._value=de,this._changeCallback(this._value)}moveForward(de){const Pe=this.getElement(de+1);Pe&&Pe.focus()}moveBackward(de){const Pe=this.getElement(de-1);Pe&&Pe.focus(),this._validateCallback()}initFocus(){const de=this.getElement(0);de&&de.focus()}clearInput(){this.initInputCollection(),this._value="",this._changeCallback(this._value)}preventNonNumeric(de){const Pe=de.which;(Pe<48||Pe>57)&&de.preventDefault()}ngOnDestroy(){this.clearTimer?.()}static#e=this.\u0275fac=function(Pe){return new(Pe||U)};static#t=this.\u0275cmp=o.Xpm({type:U,selectors:[["mts-otp-verification"]],hostBindings:function(Pe,Se){1&Pe&&o.NdJ("keypress",function(je){return Se.preventNonNumeric(je)})},inputs:{otpLength:"otpLength",required:"required",minute:"minute"},outputs:{reSendOtp:"reSendOtp"},features:[o._Bn([{provide:V.JU,useExisting:(0,o.Gpc)(()=>U),multi:!0},{provide:V.Cf,useExisting:(0,o.Gpc)(()=>U),multi:!0}])],decls:5,vars:3,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row-reverse","justify-content-center","justify-content-lg-between"],["type","text","class","form-control otp text-center ms-1","min","0","max","9","maxlength","1","autocomplete","off",3,"name","id","keyup",4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],["class","text-center mt-4 fw-bold text-primary","role","button",3,"click",4,"ngIf"],["type","text","min","0","max","9","maxlength","1","autocomplete","off",1,"form-control","otp","text-center","ms-1",3,"name","id","keyup"],[1,"text-center","mt-4"],["role","button",1,"text-center","mt-4","fw-bold","text-primary",3,"click"]],template:function(Pe,Se){1&Pe&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,ie,1,2,"input",2),o.qZA(),o.YNc(3,te,2,1,"p",3),o.YNc(4,le,2,0,"p",4),o.qZA()),2&Pe&&(o.xp6(2),o.Q6J("ngForOf",Se._generateInputCollection),o.xp6(1),o.Q6J("ngIf",Se.showTimer),o.xp6(1),o.Q6J("ngIf",Se.showResend))},dependencies:[t.sg,t.O5],styles:[".otp[_ngcontent-%COMP%]{width:3rem;font-size:1.3rem;font-weight:600}@media (max-width: 768px){.otp[_ngcontent-%COMP%]{width:2.8rem}}"]})}},2766:(At,Le,k)=>{"use strict";k.d(Le,{Je:()=>o.J,u3:()=>U});var o=k(2306),t=(k(6556),k(4006)),ie=k(6895),te=k(4588),le=k(1571);class U{static#e=this.\u0275fac=function(Pe){return new(Pe||U)};static#t=this.\u0275mod=le.oAB({type:U});static#n=this.\u0275inj=le.cJS({providers:[o.J],imports:[t.u5,ie.ez,te.k]})}},2306:(At,Le,k)=>{"use strict";k.d(Le,{J:()=>V});var o=k(1571);class V{constructor(){this.activeIndex=0,this.pageCount=0,this.pageSize=10,this.disabled=!1,this.pageSizeList=[5,10,20,30],this.navigationLinks=!0,this.boundaryLinks=!0}static#e=this.\u0275fac=function(te){return new(te||V)};static#t=this.\u0275prov=o.Yz7({token:V,factory:V.\u0275fac})}},6556:(At,Le,k)=>{"use strict";k.d(Le,{Q:()=>Ye});var o=k(1571),V=k(2306),t=k(4006),ie=k(6895);function te(je,ke){if(1&je){const De=o.EpF();o.TgZ(0,"li",10)(1,"a",11),o.NdJ("click",function(){o.CHM(De);const Qe=o.oxw();return o.KtG(Qe._onClickPage(1))}),o._UZ(2,"i",12)(3,"i",12),o.qZA()()}if(2&je){const De=o.oxw();o.ekj("disabled",De._previousDisabled()),o.xp6(1),o.uIk("aria-disabled",De._previousDisabled()?"true":null)}}function le(je,ke){if(1&je){const De=o.EpF();o.TgZ(0,"li",10)(1,"a",13),o.NdJ("click",function(){o.CHM(De);const Qe=o.oxw();return o.KtG(Qe._onClickPage(Qe.currentPage-1))}),o._UZ(2,"i",12),o.qZA()()}if(2&je){const De=o.oxw();o.ekj("disabled",De._previousDisabled()),o.xp6(1),o.uIk("aria-disabled",De._previousDisabled()?"true":null)}}function U(je,ke){if(1&je){const De=o.EpF();o.TgZ(0,"li",15),o.NdJ("click",function(){const lt=o.CHM(De).$implicit,tt=o.oxw(2);return o.KtG(tt._onClickPage(lt))}),o.TgZ(1,"a",16),o._uU(2),o.qZA()()}if(2&je){const De=ke.$implicit,ze=o.oxw(2);o.ekj("active",De===ze.currentPage),o.xp6(2),o.Oqu(De)}}function we(je,ke){if(1&je&&(o.ynx(0),o.YNc(1,U,3,3,"li",14),o.BQk()),2&je){const De=o.oxw();o.xp6(1),o.Q6J("ngForOf",De._pages)}}function de(je,ke){if(1&je){const De=o.EpF();o.TgZ(0,"li",10)(1,"a",17),o.NdJ("click",function(){o.CHM(De);const Qe=o.oxw();return o.KtG(Qe._onClickPage(Qe.currentPage+1))}),o._UZ(2,"i",18),o.qZA()()}if(2&je){const De=o.oxw();o.ekj("disabled",De._nextDisabled()),o.xp6(1),o.uIk("aria-disabled",De._nextDisabled()?"true":null)}}function Pe(je,ke){if(1&je){const De=o.EpF();o.TgZ(0,"li",10)(1,"a",19),o.NdJ("click",function(){o.CHM(De);const Qe=o.oxw();return o.KtG(Qe._onClickPage(Qe._pages.length))}),o._UZ(2,"i",18)(3,"i",18),o.qZA()()}if(2&je){const De=o.oxw();o.ekj("disabled",De._nextDisabled()),o.xp6(1),o.uIk("aria-disabled",De._nextDisabled()?"true":null)}}function Se(je,ke){if(1&je&&(o.TgZ(0,"option",20),o._uU(1),o.qZA()),2&je){const De=ke.$implicit;o.Q6J("value",De),o.xp6(1),o.Oqu(De)}}class Ye{constructor(ke){this.config=ke,this.currentPage=1,this.pageChange=new o.vpe(!0),this.disabled=ke.disabled,this._pageCount=ke.pageCount,this._pageSize=ke.pageSize,this._pageSizeList=ke.pageSizeList,this.navigationLinks=ke.navigationLinks,this.boundaryLinks=ke.boundaryLinks}ngOnChanges(ke){ke.totalRecords&&this._updatePagination()}_previousDisabled(){return 1===this.currentPage||this.disabled}_nextDisabled(){return this.currentPage>=this._pageCount||this.disabled}_onClickPage(ke){ke>=1&&ke<=this._pages.length&&(this.currentPage=ke,this.config.activeIndex=this.currentPage-1,this.pageChange.emit())}_pageSizeChange(ke){this._pageSize=this.config.pageSize=+ke.target?.value,this._updatePagination(),this.pageChange.emit()}_updatePagination(){this.totalRecords&&this.totalRecords&&this._pageSize&&(this._pageCount=Math.ceil(this.totalRecords/this._pageSize),this._pages=Array.from(Array(this._pageCount),(ke,De)=>De+1),this.currentPage>=this._pageCount&&(this.currentPage=1,this.config.activeIndex=0))}ngOnDestroy(){this.config.activeIndex=0}static#e=this.\u0275fac=function(De){return new(De||Ye)(o.Y36(V.J))};static#t=this.\u0275cmp=o.Xpm({type:Ye,selectors:[["mts-pagination"]],inputs:{disabled:"disabled",currentPage:"currentPage",totalRecords:"totalRecords",navigationLinks:"navigationLinks",boundaryLinks:"boundaryLinks",size:"size"},outputs:{pageChange:"pageChange"},features:[o.TTD],decls:16,vars:12,consts:[[1,"row","d-flex","align-items-center"],[1,"col-12","col-md-7"],["class","page-item cursor-pointer",3,"disabled",4,"ngIf"],[4,"ngIf"],[1,"page-count","col-md-5","mt-2","mt-sm-0"],[1,"row"],[1,"col-4","col-sm-3"],["dir","rtl","name","pageSize",1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-9","d-flex","align-items-center","mt-2","mt-sm-0"],[1,"page-item","cursor-pointer"],["aria-label","First",1,"page-link",3,"click"],[1,"fa-solid","fa-chevron-right"],["aria-label","Previous",1,"page-link",3,"click"],["class","page-item cursor-pointer px-1",3,"active","click",4,"ngFor","ngForOf"],[1,"page-item","cursor-pointer","px-1",3,"click"],[1,"page-link"],["aria-label","Next",1,"page-link",3,"click"],[1,"fa-solid","fa-chevron-left"],["aria-label","Last",1,"page-link",3,"click"],[3,"value"]],template:function(De,ze){1&De&&(o.TgZ(0,"div",0)(1,"div",1)(2,"ul"),o.YNc(3,te,4,3,"li",2),o.YNc(4,le,3,3,"li",2),o.YNc(5,we,2,1,"ng-container",3),o.YNc(6,de,3,3,"li",2),o.YNc(7,Pe,4,3,"li",2),o.qZA()(),o.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"select",7),o.NdJ("ngModelChange",function(lt){return ze._pageSize=lt})("change",function(lt){return ze._pageSizeChange(lt)}),o.YNc(12,Se,2,2,"option",8),o.qZA()(),o.TgZ(13,"div",9)(14,"span"),o._uU(15),o.qZA()()()()()),2&De&&(o.xp6(2),o.Tol("pagination"+(ze.size?" pagination-"+ze.size:"")),o.xp6(1),o.Q6J("ngIf",ze.boundaryLinks),o.xp6(1),o.Q6J("ngIf",ze.navigationLinks),o.xp6(1),o.Q6J("ngIf",ze._pageCount<15),o.xp6(1),o.Q6J("ngIf",ze.navigationLinks),o.xp6(1),o.Q6J("ngIf",ze.boundaryLinks),o.xp6(4),o.Q6J("ngModel",ze._pageSize),o.xp6(1),o.Q6J("ngForOf",ze._pageSizeList),o.xp6(3),o.lnq("\u0635\u0641\u062d\u0647 ",ze.currentPage," \u0627\u0632 ",ze._pageCount," (\u0645\u062c\u0645\u0648\u0639 \u0631\u06a9\u0648\u0631\u062f\u0647\u0627 : ",ze.totalRecords,")"))},dependencies:[t.YN,t.Kr,t.EJ,t.JJ,t.On,ie.sg,ie.O5],styles:["select[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--bs-gray-300)!important}i[_ngcontent-%COMP%]{font-size:.6rem!important}@media (min-width: 568px){.page-count[_ngcontent-%COMP%]{direction:ltr}}"]})}},3279:(At,Le,k)=>{"use strict";k.d(Le,{G:()=>de});var o=k(1571),V=k(4006),t=k(727),ie=k(6895),te=k(8008),le=k(1726),U=k(5665);const we=function(){return["password","rePassword"]};class de{constructor(Se){this.fb=Se,this.required=!1,this.reSendOtp=new o.vpe,this.form=this.fb.group({password:[""],rePassword:[""]}),this.showPass=!1,this.showRepass=!1,this._passStep1="",this._passStep2="",this._passStep3="",this.grabage=new t.w0,this._generateInputCollection=[],this._changeCallback=Ye=>{},this._touchedCallback=()=>{},this._validateCallback=Ye=>{},this.formListener=()=>{this.grabage.add(this.form.valueChanges.subscribe(Ye=>{setTimeout(()=>{this._value=this.password?.valid&&this.rePassword?.valid?this.password.value:"",this._changeCallback(this._value),this._touchedCallback()},0)}))}}ngOnInit(){this.formListener()}get password(){return this.form.get("password")}get rePassword(){return this.form.get("rePassword")}writeValue(Se){null==Se?this._value="":(this._value=Se,this._changeCallback(Se))}registerOnValidatorChange(Se){this._validateCallback=Se}registerOnChange(Se){this._changeCallback=Se}registerOnTouched(Se){this._touchedCallback=Se}validate(Se){let Ye;return this.required&&!this._value?.length&&(Ye={required:!0}),Ye}coveragePersent(Se){Se<50&&Se>10?(this._passStep1="bg-danger bg-opacity-100",this._passStep2="",this._passStep3=""):Se<85&&Se>50?(this._passStep1="bg-warning bg-opacity-100",this._passStep2="bg-warning bg-opacity-100",this._passStep3=""):Se>85&&(this._passStep1="bg-success bg-opacity-100",this._passStep2="bg-success bg-opacity-100",this._passStep3="bg-success bg-opacity-100"),""===this.password?.value&&(this._passStep1="",this._passStep2="",this._passStep3="")}get passStep1(){return this._passStep1}get passStep2(){return this._passStep2}get passStep3(){return this._passStep3}ngOnDestroy(){this.grabage.unsubscribe()}static#e=this.\u0275fac=function(Ye){return new(Ye||de)(o.Y36(V.qu))};static#t=this.\u0275cmp=o.Xpm({type:de,selectors:[["mts-password-strength-checker"]],inputs:{required:"required"},outputs:{reSendOtp:"reSendOtp"},features:[o._Bn([{provide:V.JU,useExisting:(0,o.Gpc)(()=>de),multi:!0},{provide:V.Cf,useExisting:(0,o.Gpc)(()=>de),multi:!0}])],decls:18,vars:12,consts:[[1,"d-flex","flex-column",3,"formGroup","mtsMatchPassword"],["labelKey","password","hint","\u0627\u0632 \u062d\u062f\u0627\u0642\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627 \u062a\u0631\u06a9\u06cc\u0628\u06cc \u0627\u0632 \u062d\u0631\u0648\u0641 \u0628\u0632\u0631\u06af \u0648 \u06a9\u0648\u0686\u06a9 \u0627\u0646\u06af\u0644\u06cc\u0633\u06cc\u060c \u0627\u0639\u062f\u0627\u062f \u0648 \u0646\u0645\u0627\u062f\u0647\u0627(~+%&!@#$) \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f"],[1,"input-group"],["name","password","formControlName","password","minlength","8","mtsPasswordStrengthCheckers","","autocomplete","new-password","data-testid","password","required","",1,"form-control","direction-to-right","text-start",3,"type","coveragePersent"],["data-testid","show-password",1,"input-group-text","cursor-pointer",3,"click"],[1,"row","gx-2","mt-2"],[1,"col-4"],[1,"bg-secondary","bg-opacity-10","w-100","rounded",2,"height","5px",3,"ngClass"],["labelKey","rePassword",1,"pt-4"],["name","rePassword","formControlName","rePassword","minlength","8","autocomplete","new-password","mtsPasswordStrengthCheckers","","required","",1,"form-control","direction-to-right","text-start",3,"type"],[1,"input-group-text","cursor-pointer",3,"click"]],template:function(Ye,je){1&Ye&&(o.TgZ(0,"div",0)(1,"mts-form-field",1)(2,"div",2)(3,"input",3),o.NdJ("coveragePersent",function(De){return je.coveragePersent(De)}),o.qZA(),o.TgZ(4,"span",4),o.NdJ("click",function(){return je.showPass=!je.showPass}),o._UZ(5,"i"),o.qZA()(),o.TgZ(6,"ul",5)(7,"li",6),o._UZ(8,"div",7),o.qZA(),o.TgZ(9,"li",6),o._UZ(10,"div",7),o.qZA(),o.TgZ(11,"li",6),o._UZ(12,"div",7),o.qZA()()(),o.TgZ(13,"mts-form-field",8)(14,"div",2),o._UZ(15,"input",9),o.TgZ(16,"span",10),o.NdJ("click",function(){return je.showRepass=!je.showRepass}),o._UZ(17,"i"),o.qZA()()()()),2&Ye&&(o.Q6J("formGroup",je.form)("mtsMatchPassword",o.DdM(11,we)),o.xp6(3),o.Q6J("type",je.showPass?"text":"password"),o.xp6(2),o.Tol(je.showPass?"fa-solid fa-eye":"fa-solid fa-eye-slash"),o.xp6(3),o.Q6J("ngClass",je.passStep1),o.xp6(2),o.Q6J("ngClass",je.passStep2),o.xp6(2),o.Q6J("ngClass",je.passStep3),o.xp6(3),o.Q6J("type",je.showRepass?"text":"password"),o.xp6(2),o.Tol(je.showRepass?"fa-solid fa-eye":"fa-solid fa-eye-slash"))},dependencies:[ie.mk,V.Fj,V.JJ,V.JL,V.Q7,V.wO,V.sg,V.u,te.h,le.A,U.e]})}},8071:(At,Le,k)=>{"use strict";k.d(Le,{Z:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mtsTabContent",""]]})}},273:(At,Le,k)=>{"use strict";k.d(Le,{Q:()=>tt});var o=k(1571),V=k(4572),t=k(6895);const ie=["tabList"];function te(Ve,Fe){if(1&Ve){const Ne=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(Ne);const it=o.oxw();return o.KtG(it.navigateTabs("left"))}),o._uU(1,"\u2039"),o.qZA()}if(2&Ve){const Ne=o.oxw();o.Q6J("disabled",Ne.isFirstTabActive())}}const le=function(Ve){return{$implicit:Ve}};function U(Ve,Fe){if(1&Ve&&(o.ynx(0),o.GkF(1,10),o.BQk()),2&Ve){const Ne=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",Ne.titleTemplate)("ngTemplateOutletContext",o.VKq(2,le,Ne))}}function we(Ve,Fe){1&Ve&&o._UZ(0,"i",13)}function de(Ve,Fe){if(1&Ve&&(o.TgZ(0,"a",11),o.YNc(1,we,1,0,"i",12),o._uU(2),o.qZA()),2&Ve){const Ne=o.oxw(2).$implicit;o.ekj("active",Ne.active)("disabled",Ne.disabled),o.xp6(1),o.Q6J("ngIf",Ne.icon),o.xp6(1),o.hij(" ",Ne.title," ")}}function Pe(Ve,Fe){if(1&Ve){const Ne=o.EpF();o.TgZ(0,"li",7),o.NdJ("click",function(){o.CHM(Ne);const it=o.oxw().$implicit,Mt=o.oxw();return o.KtG(Mt.selectTab(it))}),o.YNc(1,U,2,4,"ng-container",8),o.YNc(2,de,3,6,"ng-template",null,9,o.W1O),o.qZA()}if(2&Ve){const Ne=o.MAs(3),Be=o.oxw().$implicit;o.ekj("active",Be.active)("disabled",Be.disabled),o.xp6(1),o.Q6J("ngIf",Be.titleTemplate)("ngIfElse",Ne)}}function Se(Ve,Fe){if(1&Ve&&(o.ynx(0),o.YNc(1,Pe,4,6,"li",6),o.BQk()),2&Ve){const Ne=Fe.$implicit;o.xp6(1),o.Q6J("ngIf",Ne.show)}}function Ye(Ve,Fe){if(1&Ve){const Ne=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(Ne);const it=o.oxw();return o.KtG(it.navigateTabs("right"))}),o._uU(1,"\u203a"),o.qZA()}if(2&Ve){const Ne=o.oxw();o.Q6J("disabled",Ne.isLastTabActive())}}function je(Ve,Fe){1&Ve&&o.GkF(0)}function ke(Ve,Fe){1&Ve&&o.Hsn(0,0,["*ngIf","!tab.templateContent"])}function De(Ve,Fe){if(1&Ve&&o.YNc(0,ke,1,0,"ng-content",14),2&Ve){const Ne=o.oxw(2).$implicit;o.Q6J("ngIf",!Ne.templateContent)}}function ze(Ve,Fe){if(1&Ve&&(o.TgZ(0,"div"),o.YNc(1,je,1,0,"ng-container",15),o.YNc(2,De,1,1,"ng-template",null,16,o.W1O),o.qZA()),2&Ve){const Ne=o.MAs(3),Be=o.oxw().$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",Be.hasContent?Be.templateContent:Ne)("ngTemplateOutletContext",o.VKq(2,le,Be))}}function Qe(Ve,Fe){if(1&Ve&&(o.ynx(0),o.YNc(1,ze,4,4,"div",14),o.BQk()),2&Ve){const Ne=Fe.$implicit;o.xp6(1),o.Q6J("ngIf",Ne.active)}}const lt=["*"];class tt{constructor(){this.activeIndex=0,this.scroll=!1,this.canChange=!0,this.orientation="horizontal",this.align="start",this.activeIndexChange=new o.vpe,this.afterSelectTab=new o.vpe}ngOnChanges(Fe){Fe.activeIndex&&this.tabs&&this.activeTabWithIndex()}ngAfterContentInit(){0===this.tabs.filter(Ne=>Ne.active).length&&this.activeIndex>-1&&this.activeIndex<this.tabs.length&&this.selectTab(this.tabs.toArray()[this.activeIndex])}activeTabWithIndex(){this.activeIndex>-1&&this.activeIndex<this.tabs.length&&this.selectTab(this.tabs.toArray()[this.activeIndex])}selectTab(Fe){if(this.change){if(this.afterSelectTab.emit(Fe),Fe.disabled)return;this.tabs.toArray().forEach(Be=>Be.setActive(Be===Fe));const Ne=this.tabs.toArray().findIndex(Be=>Be.active);this.scrollToTab(Ne),this.activeIndexChange.emit(Ne)}}navigateTabs(Fe){const Ne=this.tabs.toArray().findIndex(it=>it.active);let Be=Ne;"left"===Fe&&Ne>0?Be=Ne-1:"right"===Fe&&Ne<this.tabs.length-1&&(Be=Ne+1),this.change&&this.selectTab(this.tabs.toArray()[Be]),this.scrollToTab(Be)}scrollToTab(Fe){if(this.change&&this.tabList){const Ne=this.tabList.nativeElement.children;if(Ne[Fe]){const Be=Ne[Fe],it=this.tabList.nativeElement,Mt=it.getBoundingClientRect(),St=Be.getBoundingClientRect();it.scrollTo({left:Be.offsetLeft-Mt.width/2+St.width/2,behavior:"smooth"})}}}get change(){return"boolean"==typeof this.canChange?this.canChange:"function"!=typeof this.canChange||this.canChange()}isFirstTabActive(){return this.tabs.first.active}isLastTabActive(){return this.tabs.last.active}get titlesStyle(){return`justify-content:${this.align?this.align:"start"};`}static#e=this.\u0275fac=function(Ne){return new(Ne||tt)};static#t=this.\u0275cmp=o.Xpm({type:tt,selectors:[["mts-tab-group"]],contentQueries:function(Ne,Be,it){if(1&Ne&&o.Suo(it,V.i,4),2&Ne){let Mt;o.iGM(Mt=o.CRH())&&(Be.tabs=Mt)}},viewQuery:function(Ne,Be){if(1&Ne&&o.Gf(ie,5),2&Ne){let it;o.iGM(it=o.CRH())&&(Be.tabList=it.first)}},inputs:{activeIndex:"activeIndex",scroll:"scroll",canChange:"canChange",orientation:"orientation",align:"align"},outputs:{activeIndexChange:"activeIndexChange",afterSelectTab:"afterSelectTab"},features:[o.TTD],ngContentSelectors:lt,decls:7,vars:8,consts:[[1,"tab-navigation"],[3,"disabled","click",4,"ngIf"],[1,"nav","nav-tabs","w-100"],["tabList",""],[4,"ngFor","ngForOf"],[3,"disabled","click"],["class","nav-item",3,"active","disabled","click",4,"ngIf"],[1,"nav-item",3,"click"],[4,"ngIf","ngIfElse"],["defaultTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","button","aria-current","page",1,"nav-link"],["class","fa fa-bell",4,"ngIf"],[1,"fa","fa-bell"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["withoutLazyContent",""]],template:function(Ne,Be){1&Ne&&(o.F$t(),o.TgZ(0,"div",0),o.YNc(1,te,2,1,"button",1),o.TgZ(2,"ul",2,3),o.YNc(4,Se,2,1,"ng-container",4),o.qZA(),o.YNc(5,Ye,2,1,"button",1),o.qZA(),o.YNc(6,Qe,2,1,"ng-container",4)),2&Ne&&(o.xp6(1),o.Q6J("ngIf",Be.scroll),o.xp6(1),o.Akn(Be.titlesStyle),o.ekj("tabtiles",Be.scroll),o.xp6(2),o.Q6J("ngForOf",Be.tabs),o.xp6(1),o.Q6J("ngIf",Be.scroll),o.xp6(1),o.Q6J("ngForOf",Be.tabs))},dependencies:[t.sg,t.O5,t.tP],styles:[".tab-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;overflow:hidden}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;padding:5px 15px;font-size:20px}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e7e7e7}.tab-navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:default;color:#ccc}.tabtiles[_ngcontent-%COMP%]{list-style:none;width:100%;display:flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;white-space:nowrap}.horizontal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.tab-titles.vertical[_ngcontent-%COMP%]{flex-direction:column}.tab-content[_ngcontent-%COMP%]{flex-grow:1}.tab-content.vertical[_ngcontent-%COMP%]{width:100%}.nav[_ngcontent-%COMP%]::-webkit-scrollbar{height:2px}.nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f0f0f0}.nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:silver;border-radius:8px}.tab-content[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-top:none}"]})}},4572:(At,Le,k)=>{"use strict";k.d(Le,{i:()=>we});var o=k(1571),V=k(8071),t=k(6895);const ie=["titleTemplate"];function te(de,Pe){1&de&&o.Hsn(0,0,["*ngIf","!hasContent"])}function le(de,Pe){if(1&de&&(o.ynx(0),o.YNc(1,te,1,0,"ng-content",0),o.BQk()),2&de){const Se=o.oxw();o.xp6(1),o.Q6J("ngIf",!Se.hasContent)}}const U=["*"];class we{constructor(){this.title="",this.icon="",this.active=!1,this.disabled=!1,this.show=!0,this.activeChange=new o.vpe,this.disabledChange=new o.vpe,this.showChange=new o.vpe}ngAfterContentInit(){!this.title&&!this.hasContent&&(this.title="\u062a\u0628")}setActive(Pe){this.disabled||(this.active=Pe,this.activeChange.emit(this.active))}setDisabled(Pe){this.disabled=Pe,this.disabledChange.emit(this.disabled)}setShow(Pe){this.show=Pe,this.showChange.emit(this.show)}get templateContent(){return this.tabContent?this.tabContent.templateRef:null}get hasContent(){return!!this.tabContent}static#e=this.\u0275fac=function(Se){return new(Se||we)};static#t=this.\u0275cmp=o.Xpm({type:we,selectors:[["mts-tab"]],contentQueries:function(Se,Ye,je){if(1&Se&&(o.Suo(je,V.Z,7),o.Suo(je,ie,5,o.Rgc)),2&Se){let ke;o.iGM(ke=o.CRH())&&(Ye.tabContent=ke.first),o.iGM(ke=o.CRH())&&(Ye.titleTemplate=ke.first)}},inputs:{title:"title",icon:"icon",active:"active",disabled:"disabled",show:"show"},outputs:{activeChange:"activeChange",disabledChange:"disabledChange",showChange:"showChange"},ngContentSelectors:U,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(Se,Ye){1&Se&&(o.F$t(),o.YNc(0,le,2,1,"ng-container",0)),2&Se&&o.Q6J("ngIf",Ye.active&&Ye.show)},dependencies:[t.O5]})}},5779:(At,Le,k)=>{"use strict";k.d(Le,{q:()=>Ye});var o=k(7390),V=k(1571),t=k(6895);function ie(je,ke){1&je&&V.GkF(0)}const te=function(je){return{$implicit:je}};function le(je,ke){if(1&je&&(V.TgZ(0,"div",6),V._UZ(1,"i",7),V.TgZ(2,"span"),V._uU(3),V.qZA(),V.YNc(4,ie,1,0,"ng-container",8),V.qZA()),2&je){const De=V.oxw().$implicit;V.oxw();const ze=V.MAs(2);V.xp6(1),V.Q6J("ngClass",null==De.options?null:De.options.titleIcon),V.xp6(2),V.Oqu(null==De.options?null:De.options.title),V.xp6(1),V.Q6J("ngTemplateOutlet",ze)("ngTemplateOutletContext",V.VKq(4,te,De))}}function U(je,ke){1&je&&V.GkF(0)}function we(je,ke){if(1&je&&(V.ynx(0),V.YNc(1,U,1,0,"ng-container",8),V.BQk()),2&je){const De=V.oxw().$implicit;V.oxw();const ze=V.MAs(2);V.xp6(1),V.Q6J("ngTemplateOutlet",ze)("ngTemplateOutletContext",V.VKq(2,te,De))}}function de(je,ke){if(1&je&&(V.TgZ(0,"div",2),V.YNc(1,le,5,6,"div",3),V.TgZ(2,"div",4)(3,"span"),V._uU(4),V.qZA(),V.YNc(5,we,2,4,"ng-container",5),V.qZA()()),2&je){const De=ke.$implicit,ze=V.oxw();V.Q6J("ngClass",ze.displayToastStyle(De)),V.xp6(1),V.Q6J("ngIf",(null==De.options?null:De.options.titleIcon)||(null==De.options?null:De.options.title)),V.xp6(3),V.Oqu(De.text),V.xp6(1),V.Q6J("ngIf",!(null!=De.options&&De.options.titleIcon||null!=De.options&&De.options.title))}}function Pe(je,ke){if(1&je){const De=V.EpF();V.TgZ(0,"button",10),V.NdJ("click",function(){V.CHM(De);const Qe=V.oxw().$implicit,lt=V.oxw();return V.KtG(lt.close(Qe))}),V.qZA()}}function Se(je,ke){if(1&je&&V.YNc(0,Pe,1,0,"button",9),2&je){const De=ke.$implicit;V.Q6J("ngIf",null==De.options?null:De.options.closable)}}class Ye{constructor(ke){this.toastService=ke,this._toastQueue=[],this.DEFAULT_DURATION=5e3}get toastQueue(){return this._toastQueue}ngOnInit(){this.toastService.toastEventChange.subscribe(ke=>{this._toastQueue.push({text:ke.text,options:this.setDefaultConfig(ke)}),this.hideAfterDuration()})}setDefaultConfig(ke){return{title:ke.options?.title||"error"!==ke.options?.style?ke.options?.title:"\u062e\u0637\u0627",titleIcon:ke.options?.titleIcon,style:ke.options?.style?ke.options.style:"success",duration:ke.options?.duration?ke.options.duration:this.DEFAULT_DURATION,closable:ke.options?.closable??!0,autoClose:ke.options?.autoClose??!0}}displayToastStyle(ke){switch(ke.options?.style){case"success":return"text-bg-success";case"warning":return"text-bg-warning";case"error":return"text-bg-danger";case"info":return"text-bg-info";default:return}}close(ke){this._toastQueue=this._toastQueue.filter(De=>De!=ke)}hideAfterDuration(){this._toastQueue.forEach(ke=>{ke.options?.closable&&ke.options?.duration&&ke.options.autoClose&&setTimeout(()=>this.close(ke),ke.options?.duration)})}static#e=this.\u0275fac=function(De){return new(De||Ye)(V.Y36(o.k))};static#t=this.\u0275cmp=V.Xpm({type:Ye,selectors:[["mts-toast"]],decls:3,vars:1,consts:[["class","toast align-items-center border-0 fade show m-2","role","alert",3,"ngClass",4,"ngFor","ngForOf"],["closeBtnTemplate",""],["role","alert",1,"toast","align-items-center","border-0","fade","show","m-2",3,"ngClass"],["class","toast-header fw-bold",4,"ngIf"],[1,"d-flex","toast-body"],[4,"ngIf"],[1,"toast-header","fw-bold"],[1,"me-2",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","btn-close me-2 ms-auto","aria-label","Close",3,"click",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close","me-2","ms-auto",3,"click"]],template:function(De,ze){1&De&&(V.YNc(0,de,6,4,"div",0),V.YNc(1,Se,1,1,"ng-template",null,1,V.W1O)),2&De&&V.Q6J("ngForOf",ze.toastQueue)},dependencies:[t.mk,t.sg,t.O5,t.tP],styles:["[_nghost-%COMP%]{position:fixed;top:1.1rem;left:1.1rem;z-index:100000;display:flex;flex-direction:column;flex-wrap:wrap;direction:ltr;height:max-content}.toast[_ngcontent-%COMP%]{direction:rtl}i[_ngcontent-%COMP%]{font-size:1rem!important}@media (min-width: 1024px){[_nghost-%COMP%]{bottom:0}}"]})}},7390:(At,Le,k)=>{"use strict";k.d(Le,{k:()=>t});var o=k(7579),V=k(1571);class t{constructor(){this._toastEventSubject=new o.x,this.toastEventChange=this._toastEventSubject.asObservable()}show(te,le){this._toastEventSubject.next({text:te,options:le})}static#e=this.\u0275fac=function(le){return new(le||t)};static#t=this.\u0275prov=V.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}},1343:(At,Le,k)=>{"use strict";k.d(Le,{Td:()=>U,dU:()=>le,i8:()=>o});class o{constructor(de,Pe,Se=[],Ye=!0,je){this.page=de,this.sort=Pe,this.filters=Se,this.computeTotal=Ye,this.exportAs=je}static page(de,Pe){return new o(new V(de,Pe))}addFilter(de,Pe,Se=U.EQ){return this.filters.push(new ie(de,Pe,Se)),this}removeFilter(de){return this.filters=this.filters.filter(Pe=>Pe.field!==de),this}removeFilterByIndex(de){return this.filters=this.filters.splice(de,1),this}removeAllFilters(){return this.filters=[],this}exportType(de){return this.exportAs=new te(de),this}sortDescending(de){return this.sort=new t(de,!1),this}sortAscending(de){return this.sort=new t(de,!0),this}resetSort(){return this.sort=void 0,this}}class V{constructor(de=0,Pe=10){this.index=de,this.size=Pe}}class t{constructor(de,Pe=!0){this.field=de,this.asc=Pe}}class ie{constructor(de,Pe,Se=U.EQ){this.field=de,this.value=Pe,this.operator=Se}}class te{constructor(de){this.type=de}}var le=(()=>((le||(le={})).excel="Excel",le))(),U=(()=>{return(we=U||(U={})).EQ="EQ",we.NEQ="NEQ",we.LT="LT",we.GT="GT",we.LI="LI",we.LEQ="LEQ",we.GEQ="GEQ",we.SW="SW",we.BT="BT",U;var we})()},854:(At,Le,k)=>{"use strict";k.d(Le,{R:()=>o});class o{}},8122:(At,Le,k)=>{"use strict";k.d(Le,{i:()=>V});var o=k(854);class V extends o.R{constructor(ie,te){super(),this.data=ie,this.total=te}}},8838:(At,Le,k)=>{"use strict";k.d(Le,{l:()=>ie});var o=k(1571),V=k(5487),t=k(1005);class ie{constructor(le,U,we){this.httpService=le,this.elementRef=U,this._renderer=we,this.disabledStatus=new o.vpe,this._disabled=!1,this.requestId||(this._disabled=void 0)}ngOnInit(){this.httpService.beforeCallHttpRequest.subscribe({next:le=>{this.requestId===le?.requestId&&(this.emitState(!0),this.createSpinnerAndAppend())}}),this.httpService.afterCallHttpRequest.pipe((0,t.g)(500)).subscribe({next:le=>{this.spinner&&this._renderer.removeChild(this.elementRef.nativeElement,this.spinner),this.emitState(void 0)},error:le=>{this.emitState(void 0)}})}createSpinnerAndAppend(){this.spinner=this._renderer.createElement("span"),this._renderer.addClass(this.spinner,"spinner-border"),this._renderer.addClass(this.spinner,"spinner-border-sm"),this._renderer.appendChild(this.elementRef.nativeElement,this.spinner)}emitState(le){this._disabled=le,this.disabledStatus.emit(le)}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}static#e=this.\u0275fac=function(U){return new(U||ie)(o.Y36(V.OE),o.Y36(o.SBq),o.Y36(o.Qsj))};static#t=this.\u0275dir=o.lG2({type:ie,selectors:[["","mtsDisabled",""]],hostVars:1,hostBindings:function(U,we){2&U&&o.uIk("disabled",we._disabled)},inputs:{requestId:"requestId"},outputs:{disabledStatus:"disabledStatus"}})}},1726:(At,Le,k)=>{"use strict";k.d(Le,{A:()=>ie});var o=k(4006),t=k(1571);class ie{constructor(){this.MatchPassword=[]}validate(le){return function V(te,le){return U=>{const we=U.controls[te],de=U.controls[le],Pe=we?.value,Se=de?.value;return!we||!de||de.errors&&!de.errors.passwordMismatch||de.setErrors(Pe!==Se?{passwordMismatch:!0}:null),null}}(this.MatchPassword[0],this.MatchPassword[1])(le)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275dir=t.lG2({type:ie,selectors:[["","mtsMatchPassword",""]],inputs:{MatchPassword:["mtsMatchPassword","MatchPassword"]},exportAs:["mtsMatchPassword"],features:[t._Bn([{provide:o.Cf,useExisting:ie,multi:!0}])]})}},9789:(At,Le,k)=>{"use strict";k.d(Le,{s:()=>ie});var o=k(4006),t=k(1571);class ie{validate(le){return function V(){const te=new RegExp("09([0-9]){9}$");return le=>te.test(le.value)||!le.value?null:{iranianMobileNumber:{mobileNumber:le.value}}}()(le)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275dir=t.lG2({type:ie,selectors:[["","mtsMobileNumber",""]],exportAs:["mtsMobileNumber"],features:[t._Bn([{provide:o.Cf,useExisting:ie,multi:!0}])]})}},8975:(At,Le,k)=>{"use strict";k.d(Le,{b:()=>te});var o=k(4006);var ie=k(1571);class te{validate(U){return function V(){return le=>function t(le){if(!le)return!0;if("1111111111"===le||"2222222222"===le||"3333333333"===le||"4444444444"===le||"5555555555"===le||"6666666666"===le||"7777777777"===le||"8888888888"===le||"9999999999"===le||!/^\d{10}$/.test(le))return!1;{const U=parseInt(le[9],void 0);let de,we=0;for(de=0;de<9;++de)we+=parseInt(le[de],void 0)*(10-de);return we%=11,we<2&&U===we||we>=2&&U+we===11}}(le.value)||!le.value?null:{iranianNationalCode:!0}}()(U)}static#e=this.\u0275fac=function(we){return new(we||te)};static#t=this.\u0275dir=ie.lG2({type:te,selectors:[["","mtsNationalCode",""]],exportAs:["mtsNationalCode"],features:[ie._Bn([{provide:o.Cf,useExisting:te,multi:!0}])]})}},4148:(At,Le,k)=>{"use strict";k.d(Le,{p:()=>ie});var o=k(4006),t=k(1571);class ie{constructor(){}validate(le){return(te=>{let le=te?.value;return/^[0-9]+$/g.test(le)||!le?null:{onlyNumber:!0}})(le)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275dir=t.lG2({type:ie,selectors:[["","mtsOnlyNumber",""]],exportAs:["mtsOnlyNumber"],features:[t._Bn([{provide:o.Cf,useExisting:ie,multi:!0}])]})}},5665:(At,Le,k)=>{"use strict";k.d(Le,{e:()=>ie});var o=k(1571),V=k(4006);function t(){return te=>{const le={noSpace:!1,noUppercase:!1,noLowercase:!1,noNumber:!1,noSymbol:!1,invalidLength:!1};let U=null;/^\S*$/.test(te.value)?te.value&&(le.noSpace=!0):(le.noSpace=!1,U={noSpace:!0}),/^(?=.*[A-Z]).*$/.test(te.value)?te.value&&(le.noUppercase=!0):(le.noUppercase=!1,U={noUppercase:!0}),/^(?=.*[a-z]).*$/.test(te.value)?te.value&&(le.noLowercase=!0):(le.noLowercase=!1,U={noLowercase:!0}),/^(?=.*[0-9]).*$/.test(te.value)?te.value&&(le.noNumber=!0):U={noNumber:!0},/(?=.*?[!@#$%^&*()_+={};:<>|./?,-])/.test(te.value)?te.value&&(le.noSymbol=!0):(le.noSymbol=!1,U={noSymbol:!0}),/^.{8,16}$/.test(te.value)?te.value&&(le.invalidLength=!0):(le.invalidLength=!1,U={invalidLength:!0});const ke=Object.values(le),De=ke.length;let ze=0;return ke.forEach(lt=>{lt&&ze++}),{validateRes:U,coveragePersent:(ze/De*100).toFixed()}}}class ie{constructor(){this.coveragePersent=new o.vpe}validate(le){return this.coveragePersent.emit(t()(le)?.coveragePersent),t()(le)?.validateRes}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275dir=o.lG2({type:ie,selectors:[["","mtsPasswordStrengthCheckers",""]],outputs:{coveragePersent:"coveragePersent"},exportAs:["mtsPasswordStrengthCheckers"],features:[o._Bn([{provide:V.Cf,useExisting:ie,multi:!0}])]})}},6089:(At,Le,k)=>{"use strict";k.d(Le,{x:()=>ie});var o=k(4006),t=k(1571);class ie{validate(le){return function V(){let te=new RegExp("0([0-9]){10}$");return le=>te.test(le.value)||!le.value?null:{iranianPhoneNumber:!0}}()(le)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275dir=t.lG2({type:ie,selectors:[["","mtsPhoneValidator",""]],exportAs:["mtsPhoneValidator"],features:[t._Bn([{provide:o.Cf,useExisting:ie,multi:!0}])]})}},5487:(At,Le,k)=>{"use strict";k.d(Le,{n_:()=>Qe,BN:()=>ke,OE:()=>je,p4:()=>V,VY:()=>t});var o=k(1571);const V=new o.OlP("HttpServiceBaseUrl");var t=(()=>{return(lt=t||(t={}))[lt.OK=200]="OK",lt[lt.InvalidAccessToken=403]="InvalidAccessToken",lt[lt.Unauthorized=401]="Unauthorized",lt[lt.NotFound=404]="NotFound",lt[lt.InternalServerError=500]="InternalServerError",t;var lt})(),ie=k(7579),te=k(4004),le=k(8505),U=k(8122),we=k(529),de=k(854);class Pe extends de.R{constructor(tt,Ve){super(),this.data=tt,this.fileName=Ve}}class Se{}class Ye{}class je{constructor(tt,Ve,Fe,Ne){this._http=tt,this._beforeCallHttpRequest=new ie.x,this.beforeCallHttpRequest=this._beforeCallHttpRequest.asObservable(),this._afterCallHttpRequest=new ie.x,this.afterCallHttpRequest=this._afterCallHttpRequest.asObservable(),this._baseUrl="string"==typeof Ve?Ve:"",this._dataRequestSerializer=Fe,this._dataResultSerializer=Ne}get(tt,Ve){const Fe=this.makeUrl(tt,Ve),Ne=this.makeHttpClientOptions(Ve);return this.mapResponse(this._http.get(Fe,Ne),Ve)}getPagable(tt,Ve,Fe){const Ne=this.makeUrl(tt,Fe);(Fe=Fe||{}).responseType=Ve.exportAs?.type?"blob":"json",Fe.observe=Ve.exportAs?.type?"response":"body";let Be=this._dataRequestSerializer?this._dataRequestSerializer?.serialize(Ve):this.mapDataRequestToQueryObject(Ve);Fe.query={...Fe.query,...Be};const it=this.makeHttpClientOptions(Fe);return this._http.get(Ne,it).pipe((0,te.U)(Mt=>this._dataResultSerializer?this._dataResultSerializer.serialize(Mt):this.mapResultToDataResult(Mt)))}post(tt,Ve,Fe){const Ne=this.makeUrl(tt,Fe),Be=this.makeBody(Ve,Fe),it=this.makeHttpClientOptions(Fe);return this.mapResponse(this._http.post(Ne,Be,it),Fe)}put(tt,Ve,Fe){const Ne=this.makeUrl(tt,Fe),Be=this.makeBody(Ve,Fe),it=this.makeHttpClientOptions(Fe);return this.mapResponse(this._http.put(Ne,Be,it),Fe)}patch(tt,Ve,Fe){const Ne=this.makeUrl(tt,Fe),Be=this.makeBody(Ve,Fe),it=this.makeHttpClientOptions(Fe);return this.mapResponse(this._http.patch(Ne,Be,it),Fe)}delete(tt,Ve){const Fe=this.makeUrl(tt,Ve),Ne=this.makeHttpClientOptions(Ve);return this.mapResponse(this._http.delete(Fe,Ne),Ve)}makeUrl(tt,Ve){return Ve&&Ve.pathType&&"absolute"===Ve.pathType?tt:this._baseUrl+tt}makeHttpClientOptions(tt){if(!tt)return{};const Ve={},Fe=tt.query;if("object"==typeof Fe){let Ne=new we.LE;for(const Be in Fe)if(Fe.hasOwnProperty(Be)){const it=Fe[Be],Mt=typeof it;("string"===Mt||"number"===Mt||"boolean"===Mt)&&(Ne=Ne.set(Be,it))}Ve.params=Ne}return"blob"===tt.responseType&&(Ve.responseType="blob"),tt.requestId&&(Ve.requestId=tt.requestId,this._beforeCallHttpRequest.next(tt)),Ve.reportProgress=tt.reportProgress,Ve.observe=tt.observe,Ve}makeBody(tt,Ve){if(tt=this.processBodyFields(tt),!Ve||!Ve.contentType||"multipart/form-data"!==Ve.contentType)return tt;const Fe=new FormData;for(const Ne in tt)if(tt.hasOwnProperty(Ne)){const Be=tt[Ne];let it;"string"==typeof Be||Be instanceof File?it=Be:"number"==typeof Be?it=Be.toString():"object"==typeof Be&&(it=JSON.stringify(Be)),it&&Fe.append(Ne,it)}return Fe}processBodyFields(tt){return tt}mapResponse(tt,Ve){return tt.pipe((0,le.b)(Fe=>Ve?.requestId?this._afterCallHttpRequest.next(Ve):Fe))}mapResultToDataResult(tt){return tt.body instanceof Blob?new Pe(tt.body,"file"):new U.i(tt.data,tt.total)}mapDataRequestToQueryObject(tt){var Ve={};if(tt.computeTotal&&(Ve.computeTotal="true"),tt.page&&(Ve["page.size"]=tt.page.size,Ve["page.index"]=tt.page.index),tt.sort&&(Ve["sort.field"]=tt.sort.field,Ve["sort.asc"]=`${tt.sort.asc}`),tt.filters)for(let Fe=0;Fe<tt.filters.length;Fe++){const Ne=tt.filters[Fe];Ve[`filters[${Fe}].field`]=Ne.field,Ve[`filters[${Fe}].operator`]=Ne.operator,Ve[`filters[${Fe}].value`]=Ne.value}return tt.exportAs&&(Ve["exportAs.type"]=`${tt.exportAs.type}`),Ve}static#e=this.\u0275fac=function(Ve){return new(Ve||je)(o.LFG(we.eN),o.LFG(V,8),o.LFG(Ye,8),o.LFG(Se,8))};static#t=this.\u0275prov=o.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"})}class ke{constructor(){this._errorSubject=new ie.x,this.error=this._errorSubject.asObservable()}emitError(tt){this._errorSubject.next(tt)}static#e=this.\u0275fac=function(Ve){return new(Ve||ke)};static#t=this.\u0275prov=o.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"})}var De=k(2843),ze=k(262);class Qe{constructor(tt){this.httpErrorService=tt}intercept(tt,Ve){return Ve.handle(tt).pipe((0,ze.K)(Fe=>(this.httpErrorService.emitError({status:Fe.status,message:Fe.error?.message?Fe.error.message:Fe.message}),(0,De._)(()=>Fe))))}static#e=this.\u0275fac=function(Ve){return new(Ve||Qe)(o.LFG(ke))};static#t=this.\u0275prov=o.Yz7({token:Qe,factory:Qe.\u0275fac})}},8710:(At,Le,k)=>{"use strict";k.d(Le,{H:()=>Pe});var o=k(8989),V=k(1571),t=k(6895);function ie(Se,Ye){1&Se&&V._UZ(0,"div",10)}function te(Se,Ye){if(1&Se&&(V.TgZ(0,"p",11),V._uU(1),V.qZA()),2&Se){const je=V.oxw(2).ngIf;V.xp6(1),V.Oqu(je.text)}}function le(Se,Ye){if(1&Se&&(V.TgZ(0,"div",7),V.YNc(1,ie,1,0,"div",8),V.YNc(2,te,2,1,"p",9),V.qZA()),2&Se){const je=V.oxw().ngIf;V.xp6(1),V.Q6J("ngIf",je.spinner),V.xp6(1),V.Q6J("ngIf",je.text)}}function U(Se,Ye){if(1&Se&&(V.ynx(0),V.YNc(1,le,3,2,"div",6),V.BQk()),2&Se){const je=Ye.ngIf;V.xp6(1),V.Q6J("ngIf",je.show)}}const we=[[["header"]],[["main"]],[["footer"]]],de=["header","main","footer"];class Pe{constructor(Ye){this._backdropChange$=Ye.backdropChange}ngOnDestroy(){}static#e=this.\u0275fac=function(je){return new(je||Pe)(V.Y36(o.E))};static#t=this.\u0275cmp=V.Xpm({type:Pe,selectors:[["mts-access-layout-2"]],features:[V._Bn([o.E])],ngContentSelectors:de,decls:10,vars:3,consts:[[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-12","col-sm-10","col-md-8","col-lg-6","col-xl-5","col-xxl-4"],[1,"card","shadow"],[1,"card-body","px-4"],[4,"ngIf"],["class","backdrop",4,"ngIf"],[1,"backdrop"],["class","spinner-border text-light","role","status",4,"ngIf"],["class","text-light mt-2",4,"ngIf"],["role","status",1,"spinner-border","text-light"],[1,"text-light","mt-2"]],template:function(je,ke){1&je&&(V.F$t(we),V.TgZ(0,"div",0)(1,"div",1)(2,"div",2),V.Hsn(3),V.TgZ(4,"div",3)(5,"div",4),V.Hsn(6,1),V.YNc(7,U,2,1,"ng-container",5),V.ALo(8,"async"),V.qZA()(),V.Hsn(9,2),V.qZA()()()),2&je&&(V.xp6(7),V.Q6J("ngIf",V.lcZ(8,1,ke._backdropChange$)))},dependencies:[t.O5,t.Ov],styles:["[_nghost-%COMP%]{display:block;height:100vh}.card-body[_ngcontent-%COMP%]{position:relative}.backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;animation:_ngcontent-%COMP%_fadeInAnimation ease 1s;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#0009}@keyframes _ngcontent-%COMP%_fadeInAnimation{0%{background-color:unset}to{background-color:#0009}}"]})}},8989:(At,Le,k)=>{"use strict";k.d(Le,{E:()=>t});var o=k(1135),V=k(1571);class t{constructor(){this._backdropChangeSubject=new o.X({show:!1}),this.backdropChange=this._backdropChangeSubject.asObservable()}backdrop(te){this._backdropChangeSubject.next(te)}static#e=this.\u0275fac=function(le){return new(le||t)};static#t=this.\u0275prov=V.Yz7({token:t,factory:t.\u0275fac})}},4663:(At,Le,k)=>{"use strict";k.d(Le,{g:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mtsGroupMenuItemFirstTemplate",""]],exportAs:["mtsGroupMenuItemFirstTemplate"]})}},3302:(At,Le,k)=>{"use strict";k.d(Le,{G:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mtsGroupMenuItemSecondTemplate",""]]})}},8036:(At,Le,k)=>{"use strict";k.d(Le,{o:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mtsTextMenuItemFirstTemplate",""]],exportAs:["mtsTextMenuItemFirstTemplate"]})}},5516:(At,Le,k)=>{"use strict";k.d(Le,{w:()=>V});var o=k(1571);class V{constructor(ie){this.templateRef=ie}static#e=this.\u0275fac=function(te){return new(te||V)(o.Y36(o.Rgc))};static#t=this.\u0275dir=o.lG2({type:V,selectors:[["","mtsTextMenuItemSecondTemplate",""]],exportAs:["mtsTextMenuItemSecondTemplate"]})}},3139:(At,Le,k)=>{"use strict";k.d(Le,{F:()=>ke});var o=(()=>{return(De=o||(o={}))[De.xs=0]="xs",De.sm="576px",De.md="768px",De.lg="992px",De.xl="1200px",De.xxl="1400px",o;var De})(),V=k(8036),t=k(1571),ie=k(8326),te=k(4663),le=k(5516),U=k(3302),we=k(2289);const de=["asideMenu"];function Pe(De,ze){if(1&De){const Qe=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){t.CHM(Qe);const tt=t.oxw();return t.KtG(tt._onClickDrawerLayer())}),t.qZA()}}function Se(De,ze){if(1&De&&(t.TgZ(0,"div",9)(1,"div",10),t._UZ(2,"div",11),t.TgZ(3,"h5",12),t._uU(4),t.qZA()()()),2&De){const Qe=t.oxw().ngIf;t.xp6(4),t.Oqu(Qe.text)}}function Ye(De,ze){if(1&De&&(t.ynx(0),t.YNc(1,Se,5,1,"div",8),t.BQk()),2&De){const Qe=ze.ngIf;t.xp6(1),t.Q6J("ngIf",Qe.show)}}const je=["*"];class ke{constructor(ze,Qe,lt){this.renderer=ze,this.layoutService=Qe,this.breakpointObserver=lt,this._smallDevice=!1,this._sidenavOpen=!0,this.asideMenuItemClick=new t.vpe,this.headerMenuItemClick=new t.vpe,this._waiting$=Qe.waitingChange,this.mediaSubscription=this.breakpointObserver.observe(`(max-width: ${o.lg})`).subscribe(tt=>{this._smallDevice=tt.matches,this._sidenavOpen=!tt.matches,this._configAsideStyle(),this._handleSecondAsideMenu()})}ngAfterContentInit(){this._handleSecondAsideMenu()}_onClickDrawerLayer(){this._smallDevice&&this._sidenavOpen&&this._configAsideStyle()}_configAsideStyle(ze){this.asideMenu?.nativeElement&&(this._sidenavOpen=!1,this.renderer.removeClass(this.asideMenu.nativeElement,"aside-drawer"),this.renderer.removeClass(this.asideMenu.nativeElement,"drawer-overlay"),this.asideMenuItemClick.emit(ze))}_handleSecondAsideMenu(ze){this.asideMenu?.nativeElement&&(this._spacingContentFromAside=this._smallDevice?"0":ze?"24.1rem":"8.5rem",this.renderer.addClass(this.asideMenu?.nativeElement,ze?"wide-aside-menu":"short-aside-menu"),this.renderer.removeClass(this.asideMenu?.nativeElement,ze?"short-aside-menu":"wide-aside-menu"))}_openExpanderMenuClick(){this._sidenavOpen=!0,this.asideMenu?.nativeElement&&this.renderer.addClass(this.asideMenu?.nativeElement,"aside-drawer")}ngOnDestroy(){this.mediaSubscription.unsubscribe()}static#e=this.\u0275fac=function(Qe){return new(Qe||ke)(t.Y36(t.Qsj),t.Y36(ie.N),t.Y36(we.Yg))};static#t=this.\u0275cmp=t.Xpm({type:ke,selectors:[["mts-workspace-layout-1"]],contentQueries:function(Qe,lt,tt){if(1&Qe&&(t.Suo(tt,V.o,5),t.Suo(tt,te.g,5),t.Suo(tt,le.w,5),t.Suo(tt,U.G,5)),2&Qe){let Ve;t.iGM(Ve=t.CRH())&&(lt._textTemplateFirst=Ve.first),t.iGM(Ve=t.CRH())&&(lt._groupTemplateFirst=Ve.first),t.iGM(Ve=t.CRH())&&(lt._textTemplateSecond=Ve.first),t.iGM(Ve=t.CRH())&&(lt._groupTemplateSecond=Ve.first)}},viewQuery:function(Qe,lt){if(1&Qe&&t.Gf(de,7,t.SBq),2&Qe){let tt;t.iGM(tt=t.CRH())&&(lt.asideMenu=tt.first)}},hostVars:2,hostBindings:function(Qe,lt){2&Qe&&t.Udp("padding-right",lt._spacingContentFromAside)},inputs:{config:"config"},outputs:{asideMenuItemClick:"asideMenuItemClick",headerMenuItemClick:"headerMenuItemClick"},ngContentSelectors:je,decls:9,vars:10,consts:[[1,"d-none","d-lg-block","aside",3,"config","_textTemplateFirstMenu","_groupTemplateFirstMenu","_textTemplateSecondMenu","_groupTemplateSecondMenu","menuItemClick","isSecondaryAsideMenu"],["asideMenu",""],["id","content",1,"container-fluid","container-lg","my-4"],[1,"header",3,"config","expanderClick","menuItemClick"],[1,"header-underline","my-3"],["class","drawer-overlay",3,"click",4,"ngIf"],[4,"ngIf"],[1,"drawer-overlay",3,"click"],["class","wait-overlay",4,"ngIf"],[1,"wait-overlay"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],["role","status","aria-hidden","true",1,"spinner-border","text-light"],[1,"text-light","pt-2"]],template:function(Qe,lt){1&Qe&&(t.F$t(),t.TgZ(0,"mts-aside",0,1),t.NdJ("menuItemClick",function(Ve){return lt._configAsideStyle(Ve)})("isSecondaryAsideMenu",function(Ve){return lt._handleSecondAsideMenu(Ve)}),t.qZA(),t.TgZ(2,"div",2)(3,"mts-header",3),t.NdJ("expanderClick",function(){return lt._openExpanderMenuClick()})("menuItemClick",function(Ve){return lt.headerMenuItemClick.emit(Ve)}),t.qZA(),t._UZ(4,"div",4),t.Hsn(5),t.qZA(),t.YNc(6,Pe,1,0,"div",5),t.YNc(7,Ye,2,1,"ng-container",6),t.ALo(8,"async")),2&Qe&&(t.Q6J("config",lt.config)("_textTemplateFirstMenu",lt._textTemplateFirst)("_groupTemplateFirstMenu",lt._groupTemplateFirst)("_textTemplateSecondMenu",lt._textTemplateSecond)("_groupTemplateSecondMenu",lt._groupTemplateSecond),t.xp6(3),t.Q6J("config",lt.config),t.xp6(3),t.Q6J("ngIf",lt._smallDevice&&lt._sidenavOpen),t.xp6(1),t.Q6J("ngIf",t.lcZ(8,8,lt._waiting$)))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}#content[_ngcontent-%COMP%]{min-height:100vh}#content[_ngcontent-%COMP%]   .header-underline[_ngcontent-%COMP%]{border:1px dashed #CECECE}.wide-aside-menu[_ngcontent-%COMP%]{width:24.1rem}.aside[_ngcontent-%COMP%]{background-color:#fff;position:fixed;top:0;bottom:0;right:0}.aside-drawer[_ngcontent-%COMP%]{display:flex!important;z-index:110;position:fixed;top:0;bottom:0;right:0}.drawer-overlay[_ngcontent-%COMP%]{overflow:hidden;z-index:109;background-color:#0003;animation:.3s ease-in-out 1;position:fixed;inset:0}.wait-overlay[_ngcontent-%COMP%]{background-color:#1e1c1cc7;position:fixed;inset:0;z-index:1000;opacity:.7;display:flex;flex-direction:column;align-items:center;justify-content:center}"]})}},8326:(At,Le,k)=>{"use strict";k.d(Le,{N:()=>ie});var o=k(7579),V=k(1135),t=k(1571);class ie{constructor(){this._pageTitleSubject=new o.x,this.pageTitleSubject=this._pageTitleSubject.asObservable(),this._pageActions=[],this._pageActionsSubject=new V.X(this._pageActions),this.pageActionsChange=this._pageActionsSubject.asObservable(),this._waitingSubject=new V.X({show:!1}),this.waitingChange=this._waitingSubject.asObservable()}setPageTitle(le){this._pageTitleSubject.next(le)}setPageActions(le){this._pageActions=le,this._pageActionsSubject.next(this._pageActions)}addPageActions(le){this._pageActions=this._pageActions.concat(le).reverse(),this._pageActionsSubject.next(this._pageActions)}clearPageActions(){this.setPageActions([])}showWaiting(le){let U;U="boolean"==typeof(le=le??!0)?{show:le,text:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a"}:le,this._waitingSubject.next(U)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275prov=t.Yz7({token:ie,factory:ie.\u0275fac})}},6854:(At,Le,k)=>{"use strict";k.d(Le,{zl:()=>ke,v:()=>tt,X$:()=>ze,Qp:()=>De.Q,xD:()=>U,bI:()=>le,$C:()=>ie,HA:()=>te,PX:()=>t});var o=k(6775),V=k(1366);function t(Ve){const Fe=o.toJalaali(Ve.year,Ve.month,Ve.day);return V.qj.from({year:Fe.jy,month:Fe.jm,day:Fe.jd})}function ie(Ve){const Fe=o.toGregorian(Ve.year,Ve.month,Ve.day);return V.qj.from({year:Fe.gy,month:Fe.gm,day:Fe.gd})}function te(Ve){return Ve.year+"-"+(Ve.month<10?`0${Ve.month}`:Ve.month)+"-"+(Ve.day<10?`0${Ve.day}`:Ve.day)+"T00:00:00Z"}function le(Ve){const Fe=new Date(Date.parse(Ve));if(Fe instanceof Date&&!isNaN(Fe.getTime()))return new V.qj(Fe.getFullYear(),Fe.getMonth()+1,Fe.getDate());throw Error("Invalid Date")}function U(Ve){return o.isValidJalaaliDate(Ve.year,Ve.month,Ve.day)}var Pe=k(1571);new Pe.OlP("LOCALE");var Ye=k(3901);new Ye.g({name:"enUS",rtl:!1,dictionary:{},enum:{},form:{validation:{error:{defaultMessage:"\u062e\u0637\u0627",translators:{required:Ve=>"Required",min:Ve=>`Minimum value: ${Ve.requiredMin}`,max:Ve=>`Maximum value: ${Ve.requiredMax}`,minlength:Ve=>`Minimum length: ${Ve.minlength}`,maxlength:Ve=>`Maximum length: ${Ve.maxlength}`,email:Ve=>"Invalid email",invalidDate:Ve=>"Invalid date",pattern:Ve=>"Invalid input",noSymbol:Ve=>"password should contains symbols (! @ # $ % ^ & *)",noUppercase:Ve=>"password should contains uppercase",noLowercase:Ve=>"password should contains lowercase",noNumber:Ve=>"password should contains number",noSpace:Ve=>"password shouldn't contains space",passwordMismatch:Ve=>"the password and password confirm should be equal"}}}}});const ke=new Ye.g({name:"faIR",rtl:!0,dictionary:{password:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631",rePassword:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631"},enum:{},form:{validation:{error:{defaultMessage:"\u062e\u0637\u0627",translators:{required:Ve=>"\u0627\u0644\u0632\u0627\u0645\u06cc",min:Ve=>`\u062d\u062f\u0627\u0642\u0644: ${Ve.min}`,max:Ve=>`\u062d\u062f\u0627\u06a9\u062b\u0631: ${Ve.max}`,minlength:Ve=>`\u062d\u062f\u0627\u0642\u0644 ${Ve.requiredLength} \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631`,maxlength:Ve=>`\u062d\u062f\u0627\u06a9\u062b\u0631 ${Ve.requiredLength} \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631`,persianCharacter:Ve=>"\u062a\u0646\u0647\u0627 \u062d\u0631\u0648\u0641 \u0641\u0627\u0631\u0633\u06cc \u0645\u062c\u0627\u0632 \u0645\u06cc \u0628\u0627\u0634\u062f",email:Ve=>"\u0627\u06cc\u0645\u06cc\u0644 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",invalidDate:Ve=>"\u062a\u0627\u0631\u06cc\u062e \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",iranianPhoneNumber:Ve=>"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0646 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",postalCode:Ve=>"\u06a9\u062f \u067e\u0633\u062a\u06cc \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",fileExtension:Ve=>"\u0646\u0648\u0639 \u0641\u0627\u06cc\u0644 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",sheba:Ve=>"\u0634\u0645\u0627\u0631\u0647 \u0634\u0628\u0627 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",maxFileSize:Ve=>`\u062d\u062c\u0645 \u0641\u0627\u06cc\u0644 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ${Ve.maxSize.toFixed(1)<1024?`${Ve.maxSize.toFixed(1)} \u06a9\u06cc\u0644\u0648\u0628\u0627\u06cc\u062a`:Ve.maxSize.toFixed(1)/1024+" \u0645\u06af\u0627\u0628\u0627\u06cc\u062a"} \u0628\u0627\u0634\u062f.`,pattern:Ve=>"\u0645\u0642\u062f\u0627\u0631 \u0648\u0627\u0631\u062f \u0634\u062f\u0647 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",website:Ve=>"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a",noSymbol:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0639\u0644\u0627\u0645\u062a \u06cc\u0627 \u0646\u0645\u0627\u062f (\u0627\u0632 \u0642\u0628\u06cc\u0644 @ # $ \u0648...) \u0628\u0627\u0634\u062f",noUppercase:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0641 \u0628\u0632\u0631\u06af \u0628\u0627\u0634\u062f",noLowercase:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0641 \u06a9\u0648\u0686\u06a9 \u0628\u0627\u0634\u062f",noNumber:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0639\u062f\u062f \u0628\u0627\u0634\u062f",noSpace:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0646\u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 \u0641\u0627\u0635\u0644\u0647 \u0628\u0627\u0634\u062f",passwordMismatch:Ve=>"\u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u0633\u0627\u0646 \u0628\u0627\u0634\u0646\u062f",minValue:Ve=>`\u062d\u062f\u0627\u0642\u0644 ${Ve.requiredValue} ${Ve.currency} \u0645\u062c\u0627\u0632 \u0627\u0633\u062a`,maxValue:Ve=>`\u062d\u062f\u0627\u06a9\u062b\u0631 ${Ve.requiredValue} ${Ve.currency} \u0645\u062c\u0627\u0632 \u0627\u0633\u062a`}}}}});var De=k(6879);class ze{constructor(Fe){this.translator=Fe}transform(Fe,...Ne){return this.translator?.translate(Fe)??""}static#e=this.\u0275fac=function(Ne){return new(Ne||ze)(Pe.Y36(De.Q,16))};static#t=this.\u0275pipe=Pe.Yjl({name:"mtsTranslate",type:ze,pure:!1})}k(5064);class tt{static#e=this.\u0275fac=function(Ne){return new(Ne||tt)};static#t=this.\u0275mod=Pe.oAB({type:tt});static#n=this.\u0275inj=Pe.cJS({})}},3901:(At,Le,k)=>{"use strict";k.d(Le,{g:()=>o});class o{constructor(t){this._data=t,Object.freeze(t),Object.freeze(t.dictionary),Object.freeze(t.enum),Object.freeze(t.form.validation.error),Object.freeze(t.form.validation.error.translators)}get name(){return this._data.name}get rtl(){return this._data.rtl}get data(){return this._data}get dictionary(){return this._data.dictionary}get enum(){return this._data.enum}get formValidationError(){return this._data.form.validation.error}clone(t){return new o({name:t?.name??this._data.name,rtl:t?.rtl??this._data.rtl,dictionary:t?.dictionary??this._data.dictionary,enum:t?.enum??this._data.enum,form:t?.form??this._data.form})}extend(t){return this.clone({dictionary:{...this._data.dictionary,...t?.dictionary},enum:{...this._data.enum,...t?.enum},form:{validation:{error:{defaultMessage:this._data.form.validation.error.defaultMessage,translators:{...this._data.form.validation.error.translators,...t.errorTranslators}}}}})}translateFirstError(t){const ie=Object.keys(t)[0],le=this._data.form.validation.error.translators[ie];return"function"==typeof le?le(t[ie]):""}lookup(t){return this._data.dictionary[t]}lookupEnumKeyValuesByEnumClass(t){return this._data.enum[t]}lookupEnum(t,ie){return void 0===this._data.enum[ie][t]||void 0===this._data.enum[ie]?"":this._data.enum[ie][t]}}},5064:(At,Le,k)=>{"use strict";k.d(Le,{E:()=>t});var o=k(6879),V=k(1571);class t{constructor(te){this.translator=te}transform(te,le){return this.translator.transalteEnum(te,le)}static#e=this.\u0275fac=function(le){return new(le||t)(V.Y36(o.Q,16))};static#t=this.\u0275pipe=V.Yjl({name:"mtsTranslateEnum",type:t,pure:!0})}},6879:(At,Le,k)=>{"use strict";k.d(Le,{Q:()=>ie});var o=k(3901),V=k(2821),t=k(1571);class ie{constructor(le,U){this.subsystem=le,this.parentSubsystem=U,le instanceof V.l&&le.locale?.data&&(this.injectedSubsystem=new o.g(le.locale?.data)),U instanceof V.l&&U.locale?.data&&(this.injectedParentSubsystem=new o.g(U.locale?.data))}translate(le){return this.injectedSubsystem?.lookup(le)||this.injectedParentSubsystem?.lookup(le)||le}translateFirstError(le){return this.injectedSubsystem?.translateFirstError(le)||this.injectedParentSubsystem?.translateFirstError(le)||this.injectedSubsystem?.formValidationError.defaultMessage||this.injectedParentSubsystem?.formValidationError.defaultMessage}transalteEnum(le,U){return this.injectedSubsystem.lookupEnum(le,U)||this.injectedParentSubsystem?.lookupEnum(le,U)||le}lookupEnumKeyValueByEnumClass(le){return this.injectedSubsystem.lookupEnumKeyValuesByEnumClass(le)}static#e=this.\u0275fac=function(U){return new(U||ie)(t.LFG(V.r,8),t.LFG(V.r,12))};static#t=this.\u0275prov=t.Yz7({token:ie,factory:ie.\u0275fac})}},535:(At,Le,k)=>{"use strict";k.d(Le,{k:()=>t});var o=k(9433),V=k(1571);class t{constructor(te,le,U){this.templateRef=te,this.viewContainer=le,this.identity=U,this._viewCreated=!1}set claim(te){let le=!1;const U=this.identity.get();le=null==te||null!=U&&U.hasCriteria(te),this._show(le)}_show(te){te&&!this._viewCreated?(this.viewContainer.createEmbeddedView(this.templateRef),this._viewCreated=!0):!te&&this._viewCreated&&(this.viewContainer.clear(),this._viewCreated=!1)}static#e=this.\u0275fac=function(le){return new(le||t)(V.Y36(V.Rgc),V.Y36(V.s_b),V.Y36(o.c))};static#t=this.\u0275dir=V.lG2({type:t,selectors:[["","mtsClaim",""]],inputs:{claim:["mtsClaim","claim"]},exportAs:["mtsClaim"]})}},9433:(At,Le,k)=>{"use strict";k.d(Le,{c:()=>ie});var o=k(7579),V=k(8152),t=k(1571);class ie{constructor(){this._userSubject=new o.x,this.userChange=this._userSubject.asObservable()}get(){return this._user}set(le){if(!(le instanceof V.s||null==le))throw Error("Invalid UserIdentity.");this._user=le,this._userSubject.next(le)}static#e=this.\u0275fac=function(U){return new(U||ie)};static#t=this.\u0275prov=t.Yz7({token:ie,factory:ie.\u0275fac})}},8152:(At,Le,k)=>{"use strict";k.d(Le,{s:()=>o});class o{constructor(t){this._claims=new Array,Array.isArray(t)&&(this._claims=[...t])}get claims(){return[...this._claims]}hasClaim(t){return this._claims.some(ie=>ie===t)}hasAllClaims(t){return t.every(ie=>this._claims.some(te=>ie===te))}hasAnyClaim(t){return t.some(ie=>this._claims.some(te=>ie===te))}hasCriteria(t){if("string"==typeof t)return this._claims.some(ie=>ie===t);if("object"==typeof t&&t?.any&&t?.all)throw Error('Setting "any" and "all" at the same time is not valid.');if(Array.isArray(t?.any))return this.hasAnyClaim(t.any);if(Array.isArray(t?.all))return this.hasAllClaims(t.all);throw Error("Invalid criteria")}}},2821:(At,Le,k)=>{"use strict";k.d(Le,{r:()=>V,l:()=>t});const V=new(k(1571).OlP)("Subsystem");class t{constructor(te,le,U,we){this.key=te,this.icon=le,this.titleKey=U,this.locale=we}}},5556:(At,Le,k)=>{"use strict";k.d(Le,{K:()=>V});var o=k(1571);class V{transform(ie,te=!1){return te?ie?new Date(ie).toLocaleTimeString("fa-IR",{hour12:!1})+" - "+new Date(ie).toLocaleDateString("fa-IR"):"":ie?new Date(ie).toLocaleDateString("fa-IR"):""}static#e=this.\u0275fac=function(te){return new(te||V)};static#t=this.\u0275pipe=o.Yjl({name:"jalaliDate",type:V,pure:!0})}},1250:(At,Le,k)=>{"use strict";k.d(Le,{u:()=>V});var o=k(1571);class V{transform(ie){return Object.keys(ie).filter(U=>{const we=Number(U);return isNaN(we)}).map(U=>({key:U,value:ie[U]}))}static#e=this.\u0275fac=function(te){return new(te||V)};static#t=this.\u0275pipe=o.Yjl({name:"enumKeyValue",type:V,pure:!0})}},2868:(At,Le,k)=>{"use strict";k.d(Le,{iK:()=>Se,As:()=>we,RY:()=>Ye}),k(5556),k(1250);var t=k(1571);class ie{transform(ke,De){let ze=Object.keys(De).filter(Qe=>De[Qe]==ke);return ze.length>0?ze[0]:""}static#e=this.\u0275fac=function(De){return new(De||ie)};static#t=this.\u0275pipe=t.Yjl({name:"enumKeyByValue",type:ie,pure:!0})}class te{transform(ke){return Array(ke).fill(0).map((De,ze)=>ze)}static#e=this.\u0275fac=function(De){return new(De||te)};static#t=this.\u0275pipe=t.Yjl({name:"numberToArray",type:te,pure:!0})}k(9251);class we{static#e=this.\u0275fac=function(De){return new(De||we)};static#t=this.\u0275mod=t.oAB({type:we});static#n=this.\u0275inj=t.cJS({})}var de=k(1135);class Pe{constructor(){this.previousUrl=new de.X(""),this.previousUrl$=this.previousUrl.asObservable()}setPreviousUrl(ke){this.previousUrl.next(ke)}static#e=this.\u0275fac=function(De){return new(De||Pe)};static#t=this.\u0275prov=t.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}class Se{constructor(){}static saveBlob(ke,De){const ze=window.URL.createObjectURL(ke),Qe=document.createElement("a");Qe.href=ze,Qe.download=De,document.body.appendChild(Qe),Qe.click(),Qe.remove(),window.URL.revokeObjectURL(ze)}static getBase64(ke){return new Promise((De,ze)=>{const Qe=new FileReader;Qe.readAsDataURL(ke),Qe.onload=()=>De(Qe.result),Qe.onerror=lt=>ze(lt)})}}const Ye={photo:["jpg","png","jpeg","JPG","PNG","JPEG"],word:["doc","docx","txt","DOC","DOCX","TXT"],Excel:["xls","xlsx","XLS","XLSX"],pdf:["pdf","PDF"],compressed:["zip","rar"],ordinaries:["jpg","png","jpeg","doc","docx","txt","xls","xlsx","pdf","zip","rar","JPG","PNG","JPEG","DOC","DOCX","TXT","XLS","XLSX","PDF"]}},9251:(At,Le,k)=>{"use strict";k.d(Le,{M:()=>V});var o=k(1571);class V{constructor(){this.spliter=" \u0648 ",this.zero="\u0635\u0641\u0631",this.Letters=[["","\u06cc\u0643","\u062f\u0648","\u0633\u0647","\u0686\u0647\u0627\u0631","\u067e\u0646\u062c","\u0634\u0634","\u0647\u0641\u062a","\u0647\u0634\u062a","\u0646\u0647"],["\u062f\u0647","\u06cc\u0627\u0632\u062f\u0647","\u062f\u0648\u0627\u0632\u062f\u0647","\u0633\u06cc\u0632\u062f\u0647","\u0686\u0647\u0627\u0631\u062f\u0647","\u067e\u0627\u0646\u0632\u062f\u0647","\u0634\u0627\u0646\u0632\u062f\u0647","\u0647\u0641\u062f\u0647","\u0647\u062c\u062f\u0647","\u0646\u0648\u0632\u062f\u0647","\u0628\u06cc\u0633\u062a"],["","","\u0628\u06cc\u0633\u062a","\u0633\u06cc","\u0686\u0647\u0644","\u067e\u0646\u062c\u0627\u0647","\u0634\u0635\u062a","\u0647\u0641\u062a\u0627\u062f","\u0647\u0634\u062a\u0627\u062f","\u0646\u0648\u062f"],["","\u06cc\u0643\u0635\u062f","\u062f\u0648\u06cc\u0633\u062a","\u0633\u06cc\u0635\u062f","\u0686\u0647\u0627\u0631\u0635\u062f","\u067e\u0627\u0646\u0635\u062f","\u0634\u0634\u0635\u062f","\u0647\u0641\u062a\u0635\u062f","\u0647\u0634\u062a\u0635\u062f","\u0646\u0647\u0635\u062f"],[""," \u0647\u0632\u0627\u0631 "," \u0645\u06cc\u0644\u06cc\u0648\u0646 "," \u0645\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0628\u06cc\u0644\u06cc\u0648\u0646 "," \u0628\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u062a\u0631\u06cc\u0644\u06cc\u0648\u0646 "," \u062a\u0631\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u06a9\u0648\u0622\u062f\u0631\u06cc\u0644\u06cc\u0648\u0646 "," \u06a9\u0627\u062f\u0631\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u06a9\u0648\u06cc\u0646\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u06a9\u0648\u0627\u0646\u062a\u06cc\u0646\u06cc\u0627\u0631\u062f "," \u0633\u06a9\u0633\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0633\u06a9\u0633\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0633\u067e\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0633\u067e\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0627\u06a9\u062a\u06cc\u0644\u06cc\u0648\u0646 "," \u0627\u06a9\u062a\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u0646\u0627\u0646\u06cc\u0644\u06cc\u0648\u0646 "," \u0646\u0627\u0646\u06cc\u0644\u06cc\u0627\u0631\u062f "," \u062f\u0633\u06cc\u0644\u06cc\u0648\u0646 "," \u062f\u0633\u06cc\u0644\u06cc\u0627\u0631\u062f "]]}ThreeNumbersToLetter(ie){if(0===parseInt(ie,0))return"";const te=parseInt(ie,0);if(te<10)return this.Letters[0][te];if(te<=20)return this.Letters[1][te-10];if(te<100){const Se=te%10,Ye=(te-Se)/10;return Se>0?this.Letters[2][Ye]+this.spliter+this.Letters[0][Se]:this.Letters[2][Ye]}const le=te%10,U=(te-te%100)/100,we=(te-(100*U+le))/10,de=[this.Letters[3][U]],Pe=10*we+le;return Pe>0&&(Pe<10?de.push(this.Letters[0][Pe]):Pe<=20?de.push(this.Letters[1][Pe-10]):(de.push(this.Letters[2][we]),le>0&&de.push(this.Letters[0][le]))),de.join(this.spliter)}PrepareNumber(ie){const te=(ie=ie.slice(0,-1)).length%3;return 1===te?ie="00"+ie:2===te&&(ie="0"+ie),ie.replace(/\d{3}(?=\d)/g,"$&*").split("*")}transform(ie,te){if(0===ie)return this.zero;if("number"==typeof ie&&(ie=ie.toString()),ie.length>25)return"\u062e\u0627\u0631\u062c \u0627\u0632 \u0645\u062d\u062f\u0648\u062f\u0647";const le=this.PrepareNumber(ie),U=[],we=le.length;for(let Pe=0;Pe<we;Pe++){const Se=this.Letters[4][we-(Pe+1)],Ye=this.ThreeNumbersToLetter(le[Pe]);""!==Ye&&U.push(Ye+Se)}let de=U.join(this.spliter);return ie.length>1&&(de=`${U.join(this.spliter)} \u062a\u0648\u0645\u0627\u0646`),de}static#e=this.\u0275fac=function(te){return new(te||V)};static#t=this.\u0275pipe=o.Yjl({name:"numberToPersian",type:V,pure:!0})}},6775:At=>{At.exports={toJalaali:function k(De,ze,Qe){return"[object Date]"===Object.prototype.toString.call(De)&&(Qe=De.getDate(),ze=De.getMonth()+1,De=De.getFullYear()),we(de(De,ze,Qe))},toGregorian:o,isValidJalaaliDate:function V(De,ze,Qe){return De>=-61&&De<=3177&&ze>=1&&ze<=12&&Qe>=1&&Qe<=ie(De,ze)},isLeapJalaaliYear:t,jalaaliMonthLength:ie,jalCal:le,j2d:U,d2j:we,g2d:de,d2g:Pe,jalaaliToDateObject:Ye,jalaaliWeek:function Se(De,ze,Qe){var lt=Ye(De,ze,Qe).getDay(),tt=6==lt?0:-(lt+1),Ve=6+tt;return{saturday:we(U(De,ze,Qe+tt)),friday:we(U(De,ze,Qe+Ve))}}};var Le=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function o(De,ze,Qe){return Pe(U(De,ze,Qe))}function t(De){return 0===function te(De){var lt,tt,Ve,Fe,Ne,ze=Le.length,Qe=Le[0];if(De<Qe||De>=Le[ze-1])throw new Error("Invalid Jalaali year "+De);for(Ne=1;Ne<ze&&(tt=(lt=Le[Ne])-Qe,!(De<lt));Ne+=1)Qe=lt;return tt-(Fe=De-Qe)<6&&(Fe=Fe-tt+33*je(tt+4,33)),-1===(Ve=ke(ke(Fe+1,33)-1,4))&&(Ve=4),Ve}(De)}function ie(De,ze){return ze<=6?31:ze<=11||t(De)?30:29}function le(De,ze){var Fe,Ne,Be,Mt,St,Kt,Qe=Le.length,lt=De+621,tt=-14,Ve=Le[0];if(De<Ve||De>=Le[Qe-1])throw new Error("Invalid Jalaali year "+De);for(Kt=1;Kt<Qe&&(Ne=(Fe=Le[Kt])-Ve,!(De<Fe));Kt+=1)tt=tt+8*je(Ne,33)+je(ke(Ne,33),4),Ve=Fe;return tt=tt+8*je(St=De-Ve,33)+je(ke(St,33)+3,4),4===ke(Ne,33)&&Ne-St==4&&(tt+=1),Mt=20+tt-(je(lt,4)-je(3*(je(lt,100)+1),4)-150),ze?{gy:lt,march:Mt}:(Ne-St<6&&(St=St-Ne+33*je(Ne+4,33)),-1===(Be=ke(ke(St+1,33)-1,4))&&(Be=4),{leap:Be,gy:lt,march:Mt})}function U(De,ze,Qe){var lt=le(De,!0);return de(lt.gy,3,lt.march)+31*(ze-1)-je(ze,7)*(ze-7)+Qe-1}function we(De){var Ne,ze=Pe(De).gy,Qe=ze-621,lt=le(Qe,!1);if((Ne=De-de(ze,3,lt.march))>=0){if(Ne<=185)return{jy:Qe,jm:1+je(Ne,31),jd:ke(Ne,31)+1};Ne-=186}else Qe-=1,Ne+=179,1===lt.leap&&(Ne+=1);return{jy:Qe,jm:7+je(Ne,30),jd:ke(Ne,30)+1}}function de(De,ze,Qe){var lt=je(1461*(De+je(ze-8,6)+100100),4)+je(153*ke(ze+9,12)+2,5)+Qe-34840408;return lt-je(3*je(De+100100+je(ze-8,6),100),4)+752}function Pe(De){var ze,Qe,lt,tt;return ze=(ze=4*De+139361631)+4*je(3*je(4*De+183187720,146097),4)-3908,Qe=5*je(ke(ze,1461),4)+308,lt=je(ke(Qe,153),5)+1,tt=ke(je(Qe,153),12)+1,{gy:je(ze,1461)-100100+je(8-tt,6),gm:tt,gd:lt}}function Ye(De,ze,Qe,lt,tt,Ve,Fe){var Ne=o(De,ze,Qe);return new Date(Ne.gy,Ne.gm-1,Ne.gd,lt||0,tt||0,Ve||0,Fe||0)}function je(De,ze){return~~(De/ze)}function ke(De,ze){return De-~~(De/ze)*ze}},9898:function(At){At.exports=function(){"use strict";var Le,k,o;function V(t,ie){if(Le)if(k){var te="var sharedChunk = {}; ("+Le+")(sharedChunk); ("+k+")(sharedChunk);",le={};Le(le),o=ie(le),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([te],{type:"text/javascript"})))}else k=ie;else Le=ie}return V(0,function(t){function ie(e,i){return e(i={exports:{}},i.exports),i.exports}var te=le;function le(e,i,a,f){this.cx=3*e,this.bx=3*(a-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=f,this.p2x=a,this.p2y=f}le.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},le.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},le.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},le.prototype.solveCurveX=function(e,i){var a,f,v,w,I;for(void 0===i&&(i=1e-6),v=e,I=0;I<8;I++){if(w=this.sampleCurveX(v)-e,Math.abs(w)<i)return v;var L=this.sampleCurveDerivativeX(v);if(Math.abs(L)<1e-6)break;v-=w/L}if((v=e)<(a=0))return a;if(v>(f=1))return f;for(;a<f;){if(w=this.sampleCurveX(v),Math.abs(w-e)<i)return v;e>w?a=v:f=v,v=.5*(f-a)+a}return v},le.prototype.solve=function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))};var U=we;function we(e,i){this.x=e,this.y=i}we.prototype={clone:function(){return new we(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,a=e.y-this.y;return i*i+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),a=Math.sin(e),f=a*this.x+i*this.y;return this.x=i*this.x-a*this.y,this.y=f,this},_rotateAround:function(e,i){var a=Math.cos(e),f=Math.sin(e),v=i.y+f*(this.x-i.x)+a*(this.y-i.y);return this.x=i.x+a*(this.x-i.x)-f*(this.y-i.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},we.convert=function(e){return e instanceof we?e:Array.isArray(e)?new we(e[0],e[1]):e};var de=typeof self<"u"?self:{},Pe=Math.pow(2,53)-1;function Se(e,i,a,f){var v=new te(e,i,a,f);return function(w){return v.solve(w)}}var Ye=Se(.25,.1,.25,1);function je(e,i,a){return Math.min(a,Math.max(i,e))}function ke(e,i,a){var f=a-i,v=((e-i)%f+f)%f+i;return v===i?a:v}function De(e){for(var i=[],a=arguments.length-1;a-- >0;)i[a]=arguments[a+1];for(var f=0,v=i;f<v.length;f+=1){var w=v[f];for(var I in w)e[I]=w[I]}return e}var ze=1;function Qe(){return ze++}function lt(){return function e(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function tt(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Ve(e,i){e.forEach(function(a){i[a]&&(i[a]=i[a].bind(i))})}function Fe(e,i){return-1!==e.indexOf(i,e.length-i.length)}function Ne(e,i,a){var f={};for(var v in e)f[v]=i.call(a||this,e[v],v,e);return f}function Be(e,i,a){var f={};for(var v in e)i.call(a||this,e[v],v,e)&&(f[v]=e[v]);return f}function it(e){return Array.isArray(e)?e.map(it):"object"==typeof e&&e?Ne(e,it):e}var Mt={};function St(e){Mt[e]||(typeof console<"u"&&console.warn(e),Mt[e]=!0)}function Kt(e,i,a){return(a.y-e.y)*(i.x-e.x)>(i.y-e.y)*(a.x-e.x)}function wn(e){for(var i=0,a=0,f=e.length,v=f-1,w=void 0,I=void 0;a<f;v=a++)i+=((I=e[v]).x-(w=e[a]).x)*(w.y+I.y);return i}function ln(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function jn(e){var i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(f,v,w,I){var L=w||I;return i[v]=!L||L.toLowerCase(),""}),i["max-age"]){var a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i}var yn=null;function Yr(e){if(null==yn){var i=e.navigator?e.navigator.userAgent:null;yn=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return yn}function Zn(e){try{var i=de[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var sr,Ji,bt,at,Pt=de.performance&&de.performance.now?de.performance.now.bind(de.performance):Date.now.bind(Date),Vt=de.requestAnimationFrame||de.mozRequestAnimationFrame||de.webkitRequestAnimationFrame||de.msRequestAnimationFrame,qt=de.cancelAnimationFrame||de.mozCancelAnimationFrame||de.webkitCancelAnimationFrame||de.msCancelAnimationFrame,_t={now:Pt,frame:function(e){var i=Vt(e);return{cancel:function(){return qt(i)}}},getImageData:function(e,i){void 0===i&&(i=0);var a=de.document.createElement("canvas"),f=a.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return a.width=e.width,a.height=e.height,f.drawImage(e,0,0,e.width,e.height),f.getImageData(-i,-i,e.width+2*i,e.height+2*i)},resolveURL:function(e){return sr||(sr=de.document.createElement("a")),sr.href=e,sr.href},hardwareConcurrency:de.navigator&&de.navigator.hardwareConcurrency||4,get devicePixelRatio(){return de.devicePixelRatio},get prefersReducedMotion(){return!!de.matchMedia&&(null==Ji&&(Ji=de.matchMedia("(prefers-reduced-motion: reduce)")),Ji.matches)}},Ot={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},un={supported:!1,testSupport:function(e){!Qn&&at&&(En?gn(e):bt=e)}},Qn=!1,En=!1;function gn(e){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,at),e.isContextLost())return;un.supported=!0}catch{}e.deleteTexture(i),Qn=!0}de.document&&((at=de.document.createElement("img")).onload=function(){bt&&gn(bt),bt=null,En=!0},at.onerror=function(){Qn=!0,bt=null},at.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Cn="01",Kn=function(e,i){this._transformRequestFn=e,this._customAccessToken=i,this._createSkuToken()};function Hn(e){return 0===e.indexOf("mapbox:")}Kn.prototype._createSkuToken=function(){var e=function(){for(var i="",a=0;a<10;a++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Cn,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Kn.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Kn.prototype.transformRequest=function(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}},Kn.prototype.normalizeStyleURL=function(e,i){if(!Hn(e))return e;var a=Xt(e);return a.path="/styles/v1"+a.path,this._makeAPIURL(a,this._customAccessToken||i)},Kn.prototype.normalizeGlyphsURL=function(e,i){if(!Hn(e))return e;var a=Xt(e);return a.path="/fonts/v1"+a.path,this._makeAPIURL(a,this._customAccessToken||i)},Kn.prototype.normalizeSourceURL=function(e,i){if(!Hn(e))return e;var a=Xt(e);return a.path="/v4/"+a.authority+".json",a.params.push("secure"),this._makeAPIURL(a,this._customAccessToken||i)},Kn.prototype.normalizeSpriteURL=function(e,i,a,f){var v=Xt(e);return Hn(e)?(v.path="/styles/v1"+v.path+"/sprite"+i+a,this._makeAPIURL(v,this._customAccessToken||f)):(v.path+=""+i+a,Ht(v))},Kn.prototype.normalizeTileURL=function(e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Hn(e))return e;var a=Xt(e);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,(_t.devicePixelRatio>=2||512===i?"@2x":"")+(un.supported?".webp":"$1")),a.path=a.path.replace(/^.+\/v4\//,"/"),a.path="/v4"+a.path;var f=this._customAccessToken||function(v){for(var w=0,I=v;w<I.length;w+=1){var L=I[w].match(/^access_token=(.*)$/);if(L)return L[1]}return null}(a.params)||Ot.ACCESS_TOKEN;return Ot.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&a.params.push("sku="+this._skuToken),this._makeAPIURL(a,f)},Kn.prototype.canonicalizeTileURL=function(e,i){var a=Xt(e);if(!a.path.match(/(^\/v4\/)/)||!a.path.match(/\.[\w]+$/))return e;var f="mapbox://tiles/";f+=a.path.replace("/v4/","");var v=a.params;return i&&(v=v.filter(function(w){return!w.match(/^access_token=/)})),v.length&&(f+="?"+v.join("&")),f},Kn.prototype.canonicalizeTileset=function(e,i){for(var a=!!i&&Hn(i),f=[],v=0,w=e.tiles||[];v<w.length;v+=1){var I=w[v];nn(I)?f.push(this.canonicalizeTileURL(I,a)):f.push(I)}return f},Kn.prototype._makeAPIURL=function(e,i){var a="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",f=Xt(Ot.API_URL);if(e.protocol=f.protocol,e.authority=f.authority,"http"===e.protocol){var v=e.params.indexOf("secure");v>=0&&e.params.splice(v,1)}if("/"!==f.path&&(e.path=""+f.path+e.path),!Ot.REQUIRE_ACCESS_TOKEN)return Ht(e);if(!(i=i||Ot.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+a);if("s"===i[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+a);return e.params=e.params.filter(function(w){return-1===w.indexOf("access_token")}),e.params.push("access_token="+i),Ht(e)};var Zt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function nn(e){return Zt.test(e)}var zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Xt(e){var i=e.match(zt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Ht(e){var i=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+i}function ui(e){if(!e)return null;var i=e.split(".");if(!i||3!==i.length)return null;try{return JSON.parse(decodeURIComponent(de.atob(i[1]).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Zi=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Zi.prototype.getStorageKey=function(e){var i,a=ui(Ot.ACCESS_TOKEN);return i=a&&a.u?de.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,function(f,v){return String.fromCharCode(Number("0x"+v))})):Ot.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+i:"mapbox.eventData:"+i},Zi.prototype.fetchEventData=function(){var e=Zn("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{var f=de.localStorage.getItem(i);f&&(this.eventData=JSON.parse(f));var v=de.localStorage.getItem(a);v&&(this.anonId=v)}catch{St("Unable to read from LocalStorage")}},Zi.prototype.saveEventData=function(){var e=Zn("localStorage"),i=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{de.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&de.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{St("Unable to write to LocalStorage")}},Zi.prototype.processRequests=function(e){},Zi.prototype.postEvent=function(e,i,a,f){var v=this;if(Ot.EVENTS_URL){var w=Xt(Ot.EVENTS_URL);w.params.push("access_token="+(f||Ot.ACCESS_TOKEN||""));var I={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Cn,userId:this.anonId},L=i?De(I,i):I,W={url:Ht(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=Dt(W,function(oe){v.pendingRequest=null,a(oe),v.saveEventData(),v.processRequests(f)})}},Zi.prototype.queueRequest=function(e,i){this.queue.push(e),this.processRequests(i)};var qi,Er,Or=function(e){function i(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(a,f,v,w){this.skuToken=v;var I=!(!w&&!Ot.ACCESS_TOKEN),L=Array.isArray(a)&&a.some(function(W){return Hn(W)||nn(W)});Ot.EVENTS_URL&&I&&L&&this.queueRequest({id:f,timestamp:Date.now()},w)},i.prototype.processRequests=function(a){var f=this;if(!this.pendingRequest&&0!==this.queue.length){var v=this.queue.shift(),w=v.id,I=v.timestamp;w&&this.success[w]||(this.anonId||this.fetchEventData(),tt(this.anonId)||(this.anonId=lt()),this.postEvent(I,{skuToken:this.skuToken},function(L){L||w&&(f.success[w]=!0)},a))}},i}(Zi),In=new(function(e){function i(a){e.call(this,"appUserTurnstile"),this._customAccessToken=a}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(a,f){Ot.EVENTS_URL&&Ot.ACCESS_TOKEN&&Array.isArray(a)&&a.some(function(v){return Hn(v)||nn(v)})&&this.queueRequest(Date.now(),f)},i.prototype.processRequests=function(a){var f=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var v=ui(Ot.ACCESS_TOKEN),w=v?v.u:Ot.ACCESS_TOKEN,I=w!==this.eventData.tokenU;tt(this.anonId)||(this.anonId=lt(),I=!0);var L=this.queue.shift();if(this.eventData.lastSuccess){var W=new Date(this.eventData.lastSuccess),oe=new Date(L),ae=(L-this.eventData.lastSuccess)/864e5;I=I||ae>=1||ae<-1||W.getDate()!==oe.getDate()}else I=!0;if(!I)return this.processRequests();this.postEvent(L,{"enabled.telemetry":!1},function(pe){pe||(f.eventData.lastSuccess=L,f.eventData.tokenU=w)},a)}},i}(Zi)),Ei=In.postTurnstileEvent.bind(In),N=new Or,ce=N.postMapLoadEvent.bind(N),ht=500,It=50;function Jt(){de.caches&&!qi&&(qi=de.caches.open("mapbox-tiles"))}function xt(e){var i=e.indexOf("?");return i<0?e:e.slice(0,i)}var Gt,bn=1/0;function di(){return null==Gt&&(Gt=de.OffscreenCanvas&&new de.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof de.createImageBitmap),Gt}var fi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fi);var Br,Pr,Mo=function(e){function i(a,f,v){401===f&&nn(v)&&(a+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,a),this.status=f,this.url=v,this.name=this.constructor.name,this.message=a}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),hi=ln()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===de.location.protocol?de.parent:de).location.href},eo=function(e,i){if(!(/^file:/.test(a=e.url)||/^file:/.test(hi())&&!/^\w+:/.test(a))){if(de.fetch&&de.Request&&de.AbortController&&de.Request.prototype.hasOwnProperty("signal"))return function(f,v){var w,I=new de.AbortController,L=new de.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:hi(),signal:I.signal}),W=!1,oe=!1,ae=(w=L.url).indexOf("sku=")>0&&nn(w);"json"===f.type&&L.headers.set("Accept","application/json");var pe=function(Ce,$e,Ze){if(!oe){if(Ce&&"SecurityError"!==Ce.message&&St(Ce),$e&&Ze)return ve($e);var ot=Date.now();de.fetch(L).then(function(nt){if(nt.ok){var mt=ae?nt.clone():null;return ve(nt,mt,ot)}return v(new Mo(nt.statusText,nt.status,f.url))}).catch(function(nt){20!==nt.code&&v(new Error(nt.message))})}},ve=function(Ce,$e,Ze){("arrayBuffer"===f.type?Ce.arrayBuffer():"json"===f.type?Ce.json():Ce.text()).then(function(ot){oe||($e&&Ze&&function(nt,mt,gt){if(Jt(),qi){var wt={status:mt.status,statusText:mt.statusText,headers:new de.Headers};mt.headers.forEach(function($t,an){return wt.headers.set(an,$t)});var Et=jn(mt.headers.get("Cache-Control")||"");Et["no-store"]||(Et["max-age"]&&wt.headers.set("Expires",new Date(gt+1e3*Et["max-age"]).toUTCString()),new Date(wt.headers.get("Expires")).getTime()-gt<42e4||function($t,an){if(void 0===Er)try{new Response(new ReadableStream),Er=!0}catch{Er=!1}Er?an($t.body):$t.blob().then(an)}(mt,function($t){var an=new de.Response($t,wt);Jt(),qi&&qi.then(function(dn){return dn.put(xt(nt.url),an)}).catch(function(dn){return St(dn.message)})}))}}(L,$e,Ze),W=!0,v(null,ot,Ce.headers.get("Cache-Control"),Ce.headers.get("Expires")))}).catch(function(ot){oe||v(new Error(ot.message))})};return ae?function(Ce,$e){if(Jt(),!qi)return $e(null);var Ze=xt(Ce.url);qi.then(function(ot){ot.match(Ze).then(function(nt){var mt=function(gt){if(!gt)return!1;var wt=new Date(gt.headers.get("Expires")||0),Et=jn(gt.headers.get("Cache-Control")||"");return wt>Date.now()&&!Et["no-cache"]}(nt);ot.delete(Ze),mt&&ot.put(Ze,nt.clone()),$e(null,nt,mt)}).catch($e)}).catch($e)}(L,pe):pe(null,null),{cancel:function(){oe=!0,W||I.abort()}}}(e,i);if(ln()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}var a;return function(f,v){var w=new de.XMLHttpRequest;for(var I in w.open(f.method||"GET",f.url,!0),"arrayBuffer"===f.type&&(w.responseType="arraybuffer"),f.headers)w.setRequestHeader(I,f.headers[I]);return"json"===f.type&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials="include"===f.credentials,w.onerror=function(){v(new Error(w.statusText))},w.onload=function(){if((w.status>=200&&w.status<300||0===w.status)&&null!==w.response){var L=w.response;if("json"===f.type)try{L=JSON.parse(w.response)}catch(W){return v(W)}v(null,L,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else v(new Mo(w.statusText,w.status,f.url))},w.send(f.body),{cancel:function(){return w.abort()}}}(e,i)},to=function(e,i){return eo(De(e,{type:"arrayBuffer"}),i)},Dt=function(e,i){return eo(De(e,{method:"POST"}),i)},H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Br=[],Pr=0;var X=function(e,i){if(un.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Pr>=Ot.MAX_PARALLEL_IMAGE_REQUESTS){var a={requestParameters:e,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return Br.push(a),a}Pr++;var f=!1,v=function(){if(!f)for(f=!0,Pr--;Br.length&&Pr<Ot.MAX_PARALLEL_IMAGE_REQUESTS;){var I=Br.shift();I.cancelled||(I.cancel=X(I.requestParameters,I.callback).cancel)}},w=to(e,function(I,L,W,oe){var pe,ve;v(),I?i(I):L&&(di()?(pe=i,ve=new de.Blob([new Uint8Array(L)],{type:"image/png"}),de.createImageBitmap(ve).then(function(Ce){pe(null,Ce)}).catch(function(Ce){pe(new Error("Could not load image because of "+Ce.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(ae,pe,ve,Ce){var $e=new de.Image,Ze=de.URL;$e.onload=function(){pe(null,$e),Ze.revokeObjectURL($e.src),$e.onload=null,de.requestAnimationFrame(function(){$e.src=H})},$e.onerror=function(){return pe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ot=new de.Blob([new Uint8Array(ae)],{type:"image/png"});$e.cacheControl=ve,$e.expires=Ce,$e.src=ae.byteLength?Ze.createObjectURL(ot):H}(L,i,W,oe))});return{cancel:function(){w.cancel(),v()}}};function fe(e,i,a){a[e]&&-1!==a[e].indexOf(i)||(a[e]=a[e]||[],a[e].push(i))}function _e(e,i,a){if(a&&a[e]){var f=a[e].indexOf(i);-1!==f&&a[e].splice(f,1)}}var Re=function(e,i){void 0===i&&(i={}),De(this,i),this.type=e},Je=function(e){function i(a,f){void 0===f&&(f={}),e.call(this,"error",De({error:a},f))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Re),Xe=function(){};Xe.prototype.on=function(e,i){return this._listeners=this._listeners||{},fe(e,i,this._listeners),this},Xe.prototype.off=function(e,i){return _e(e,i,this._listeners),_e(e,i,this._oneTimeListeners),this},Xe.prototype.once=function(e,i){return this._oneTimeListeners=this._oneTimeListeners||{},fe(e,i,this._oneTimeListeners),this},Xe.prototype.fire=function(e,i){"string"==typeof e&&(e=new Re(e,i||{}));var a=e.type;if(this.listens(a)){e.target=this;for(var f=0,v=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];f<v.length;f+=1)v[f].call(this,e);for(var w=0,I=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];w<I.length;w+=1){var L=I[w];_e(a,L,this._oneTimeListeners),L.call(this,e)}var W=this._eventedParent;W&&(De(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),W.fire(e))}else e instanceof Je&&console.error(e.error);return this},Xe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Xe.prototype.setEventedParent=function(e,i){return this._eventedParent=e,this._eventedParentData=i,this};var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ge=function(e,i,a,f){this.message=(e?e+": ":"")+a,f&&(this.identifier=f),null!=i&&i.__line__&&(this.line=i.__line__)};function ft(e){var i=e.value;return i?[new Ge(e.key,i,"constants have been deprecated as of v8")]:[]}function Lt(e){for(var i=[],a=arguments.length-1;a-- >0;)i[a]=arguments[a+1];for(var f=0,v=i;f<v.length;f+=1){var w=v[f];for(var I in w)e[I]=w[I]}return e}function Ut(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ie(e){if(Array.isArray(e))return e.map(Ie);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var a in e)i[a]=Ie(e[a]);return i}return Ut(e)}var Ae=function(e){function i(a,f){e.call(this,f),this.message=f,this.key=a}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Error),Me=function(e,i){void 0===i&&(i=[]),this.parent=e,this.bindings={};for(var a=0,f=i;a<f.length;a+=1){var v=f[a];this.bindings[v[0]]=v[1]}};Me.prototype.concat=function(e){return new Me(this,e)},Me.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Me.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var qe={kind:"null"},He={kind:"number"},Rt={kind:"string"},jt={kind:"boolean"},en={kind:"color"},An={kind:"object"},sn={kind:"value"},ei={kind:"collator"},Si={kind:"formatted"},oi={kind:"resolvedImage"};function Ti(e,i){return{kind:"array",itemType:e,N:i}}function mi(e){if("array"===e.kind){var i=mi(e.itemType);return"number"==typeof e.N?"array<"+i+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+i+">"}return e.kind}var Wr=[qe,He,Rt,jt,en,Si,An,Ti(sn),oi];function Ii(e,i){if("error"===i.kind)return null;if("array"===e.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!Ii(e.itemType,i.itemType))&&("number"!=typeof e.N||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if("value"===e.kind)for(var a=0,f=Wr;a<f.length;a+=1)if(!Ii(f[a],i))return null}return"Expected "+mi(e)+" but found "+mi(i)+" instead."}function mr(e,i){return i.some(function(a){return a.kind===e.kind})}function $i(e,i){return i.some(function(a){return"null"===a?null===e:"array"===a?Array.isArray(e):"object"===a?e&&!Array.isArray(e)&&"object"==typeof e:a===typeof e})}var li=ie(function(e,i){var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(L){return(L=Math.round(L))<0?0:L>255?255:L}function v(L){return f("%"===L[L.length-1]?parseFloat(L)/100*255:parseInt(L))}function w(L){return(W="%"===L[L.length-1]?parseFloat(L)/100:parseFloat(L))<0?0:W>1?1:W;var W}function I(L,W,oe){return oe<0?oe+=1:oe>1&&(oe-=1),6*oe<1?L+(W-L)*oe*6:2*oe<1?W:3*oe<2?L+(W-L)*(2/3-oe)*6:L}try{i.parseCSSColor=function(L){var W,oe=L.replace(/ /g,"").toLowerCase();if(oe in a)return a[oe].slice();if("#"===oe[0])return 4===oe.length?(W=parseInt(oe.substr(1),16))>=0&&W<=4095?[(3840&W)>>4|(3840&W)>>8,240&W|(240&W)>>4,15&W|(15&W)<<4,1]:null:7===oe.length&&(W=parseInt(oe.substr(1),16))>=0&&W<=16777215?[(16711680&W)>>16,(65280&W)>>8,255&W,1]:null;var ae=oe.indexOf("("),pe=oe.indexOf(")");if(-1!==ae&&pe+1===oe.length){var ve=oe.substr(0,ae),Ce=oe.substr(ae+1,pe-(ae+1)).split(","),$e=1;switch(ve){case"rgba":if(4!==Ce.length)return null;$e=w(Ce.pop());case"rgb":return 3!==Ce.length?null:[v(Ce[0]),v(Ce[1]),v(Ce[2]),$e];case"hsla":if(4!==Ce.length)return null;$e=w(Ce.pop());case"hsl":if(3!==Ce.length)return null;var Ze=(parseFloat(Ce[0])%360+360)%360/360,ot=w(Ce[1]),nt=w(Ce[2]),mt=nt<=.5?nt*(ot+1):nt+ot-nt*ot,gt=2*nt-mt;return[f(255*I(gt,mt,Ze+1/3)),f(255*I(gt,mt,Ze)),f(255*I(gt,mt,Ze-1/3)),$e];default:return null}}return null}}catch{}}).parseCSSColor,pi=function(e,i,a,f){void 0===f&&(f=1),this.r=e,this.g=i,this.b=a,this.a=f};pi.parse=function(e){if(e){if(e instanceof pi)return e;if("string"==typeof e){var i=li(e);if(i)return new pi(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},pi.prototype.toString=function(){var e=this.toArray(),i=e[1],a=e[2],f=e[3];return"rgba("+Math.round(e[0])+","+Math.round(i)+","+Math.round(a)+","+f+")"},pi.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},pi.black=new pi(0,0,0,1),pi.white=new pi(1,1,1,1),pi.transparent=new pi(0,0,0,0),pi.red=new pi(1,0,0,1);var ii=function(e,i,a){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ii.prototype.compare=function(e,i){return this.collator.compare(e,i)},ii.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Tr=function(e,i,a,f,v){this.text=e,this.image=i,this.scale=a,this.fontStack=f,this.textColor=v},Ai=function(e){this.sections=e};Ai.fromString=function(e){return new Ai([new Tr(e,null,null,null,null)])},Ai.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},Ai.factory=function(e){return e instanceof Ai?e:Ai.fromString(e)},Ai.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},Ai.prototype.serialize=function(){for(var e=["format"],i=0,a=this.sections;i<a.length;i+=1){var f=a[i];if(f.image)e.push(["image",f.image.name]);else{e.push(f.text);var v={};f.fontStack&&(v["text-font"]=["literal",f.fontStack.split(",")]),f.scale&&(v["font-scale"]=f.scale),f.textColor&&(v["text-color"]=["rgba"].concat(f.textColor.toArray())),e.push(v)}}return e};var Mr=function(e){this.name=e.name,this.available=e.available};function zo(e,i,a,f){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===f||"number"==typeof f&&f>=0&&f<=1?null:"Invalid rgba value ["+[e,i,a,f].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof f?[e,i,a,f]:[e,i,a]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Vo(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof pi||e instanceof ii||e instanceof Ai||e instanceof Mr)return!0;if(Array.isArray(e)){for(var i=0,a=e;i<a.length;i+=1)if(!Vo(a[i]))return!1;return!0}if("object"==typeof e){for(var f in e)if(!Vo(e[f]))return!1;return!0}return!1}function cn(e){if(null===e)return qe;if("string"==typeof e)return Rt;if("boolean"==typeof e)return jt;if("number"==typeof e)return He;if(e instanceof pi)return en;if(e instanceof ii)return ei;if(e instanceof Ai)return Si;if(e instanceof Mr)return oi;if(Array.isArray(e)){for(var i,a=e.length,f=0,v=e;f<v.length;f+=1){var w=cn(v[f]);if(i){if(i===w)continue;i=sn;break}i=w}return Ti(i||sn,a)}return An}function Yn(e){var i=typeof e;return null===e?"":"string"===i||"number"===i||"boolean"===i?String(e):e instanceof pi||e instanceof Ai||e instanceof Mr?e.toString():JSON.stringify(e)}Mr.prototype.toString=function(){return this.name},Mr.fromString=function(e){return e?new Mr({name:e,available:!1}):null},Mr.prototype.serialize=function(){return["image",this.name]};var vi=function(e,i){this.type=e,this.value=i};vi.parse=function(e,i){if(2!==e.length)return i.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Vo(e[1]))return i.error("invalid value");var a=e[1],f=cn(a),v=i.expectedType;return"array"!==f.kind||0!==f.N||!v||"array"!==v.kind||"number"==typeof v.N&&0!==v.N||(f=v),new vi(f,a)},vi.prototype.evaluate=function(){return this.value},vi.prototype.eachChild=function(){},vi.prototype.outputDefined=function(){return!0},vi.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof pi?["rgba"].concat(this.value.toArray()):this.value instanceof Ai?this.value.serialize():this.value};var Oi=function(e){this.name="ExpressionEvaluationError",this.message=e};Oi.prototype.toJSON=function(){return this.message};var xr={string:Rt,number:He,boolean:jt,object:An},gi=function(e,i){this.type=e,this.args=i};gi.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var a,f=1,v=e[0];if("array"===v){var w,I;if(e.length>2){var L=e[1];if("string"!=typeof L||!(L in xr)||"object"===L)return i.error('The item type argument of "array" must be one of string, number, boolean',1);w=xr[L],f++}else w=sn;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);I=e[2],f++}a=Ti(w,I)}else a=xr[v];for(var W=[];f<e.length;f++){var oe=i.parse(e[f],f,sn);if(!oe)return null;W.push(oe)}return new gi(a,W)},gi.prototype.evaluate=function(e){for(var i=0;i<this.args.length;i++){var a=this.args[i].evaluate(e);if(!Ii(this.type,cn(a)))return a;if(i===this.args.length-1)throw new Oi("Expected value to be of type "+mi(this.type)+", but found "+mi(cn(a))+" instead.")}return null},gi.prototype.eachChild=function(e){this.args.forEach(e)},gi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},gi.prototype.serialize=function(){var e=this.type,i=[e.kind];if("array"===e.kind){var a=e.itemType;if("string"===a.kind||"number"===a.kind||"boolean"===a.kind){i.push(a.kind);var f=e.N;("number"==typeof f||this.args.length>1)&&i.push(f)}}return i.concat(this.args.map(function(v){return v.serialize()}))};var mo=function(e){this.type=Si,this.sections=e};mo.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var a=e[1];if(!Array.isArray(a)&&"object"==typeof a)return i.error("First argument must be an image or text section.");for(var f=[],v=!1,w=1;w<=e.length-1;++w){var I=e[w];if(v&&"object"==typeof I&&!Array.isArray(I)){v=!1;var L=null;if(I["font-scale"]&&!(L=i.parse(I["font-scale"],1,He)))return null;var W=null;if(I["text-font"]&&!(W=i.parse(I["text-font"],1,Ti(Rt))))return null;var oe=null;if(I["text-color"]&&!(oe=i.parse(I["text-color"],1,en)))return null;var ae=f[f.length-1];ae.scale=L,ae.font=W,ae.textColor=oe}else{var pe=i.parse(e[w],1,sn);if(!pe)return null;var ve=pe.type.kind;if("string"!==ve&&"value"!==ve&&"null"!==ve&&"resolvedImage"!==ve)return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:pe,scale:null,font:null,textColor:null})}}return new mo(f)},mo.prototype.evaluate=function(e){return new Ai(this.sections.map(function(i){var a=i.content.evaluate(e);return cn(a)===oi?new Tr("",a,null,null,null):new Tr(Yn(a),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))},mo.prototype.eachChild=function(e){for(var i=0,a=this.sections;i<a.length;i+=1){var f=a[i];e(f.content),f.scale&&e(f.scale),f.font&&e(f.font),f.textColor&&e(f.textColor)}},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){for(var e=["format"],i=0,a=this.sections;i<a.length;i+=1){var f=a[i];e.push(f.content.serialize());var v={};f.scale&&(v["font-scale"]=f.scale.serialize()),f.font&&(v["text-font"]=f.font.serialize()),f.textColor&&(v["text-color"]=f.textColor.serialize()),e.push(v)}return e};var Ui=function(e){this.type=oi,this.input=e};Ui.parse=function(e,i){if(2!==e.length)return i.error("Expected two arguments.");var a=i.parse(e[1],1,Rt);return a?new Ui(a):i.error("No image name provided.")},Ui.prototype.evaluate=function(e){var i=this.input.evaluate(e),a=Mr.fromString(i);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(i)>-1),a},Ui.prototype.eachChild=function(e){e(this.input)},Ui.prototype.outputDefined=function(){return!1},Ui.prototype.serialize=function(){return["image",this.input.serialize()]};var ka={"to-boolean":jt,"to-color":en,"to-number":He,"to-string":Rt},go=function(e,i){this.type=e,this.args=i};go.parse=function(e,i){if(e.length<2)return i.error("Expected at least one argument.");var a=e[0];if(("to-boolean"===a||"to-string"===a)&&2!==e.length)return i.error("Expected one argument.");for(var f=ka[a],v=[],w=1;w<e.length;w++){var I=i.parse(e[w],w,sn);if(!I)return null;v.push(I)}return new go(f,v)},go.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var i,a,f=0,v=this.args;f<v.length;f+=1){if(a=null,(i=v[f].evaluate(e))instanceof pi)return i;if("string"==typeof i){var w=e.parseColor(i);if(w)return w}else if(Array.isArray(i)&&!(a=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":zo(i[0],i[1],i[2],i[3])))return new pi(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Oi(a||"Could not parse color from value '"+("string"==typeof i?i:String(JSON.stringify(i)))+"'")}if("number"===this.type.kind){for(var I=null,L=0,W=this.args;L<W.length;L+=1){if(null===(I=W[L].evaluate(e)))return 0;var oe=Number(I);if(!isNaN(oe))return oe}throw new Oi("Could not convert "+JSON.stringify(I)+" to number.")}return"formatted"===this.type.kind?Ai.fromString(Yn(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Mr.fromString(Yn(this.args[0].evaluate(e))):Yn(this.args[0].evaluate(e))},go.prototype.eachChild=function(e){this.args.forEach(e)},go.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},go.prototype.serialize=function(){if("formatted"===this.type.kind)return new mo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ui(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(i){e.push(i.serialize())}),e};var Ci=["Unknown","Point","LineString","Polygon"],ws=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ws.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ws.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ci[this.feature.type]:this.feature.type:null},ws.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ws.prototype.canonicalID=function(){return this.canonical},ws.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ws.prototype.parseColor=function(e){var i=this._parseColorCache[e];return i||(i=this._parseColorCache[e]=pi.parse(e)),i};var Kr=function(e,i,a,f){this.name=e,this.type=i,this._evaluate=a,this.args=f};Kr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Kr.prototype.eachChild=function(e){this.args.forEach(e)},Kr.prototype.outputDefined=function(){return!1},Kr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Kr.parse=function(e,i){var a,f=e[0],v=Kr.definitions[f];if(!v)return i.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0);for(var w=Array.isArray(v)?v[0]:v.type,I=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,L=I.filter(function(Ln){var mn=Ln[0];return!Array.isArray(mn)||mn.length===e.length-1}),W=null,oe=0,ae=L;oe<ae.length;oe+=1){var pe=ae[oe],ve=pe[0],Ce=pe[1];W=new Ds(i.registry,i.path,null,i.scope);for(var $e=[],Ze=!1,ot=1;ot<e.length;ot++){var nt=e[ot],mt=Array.isArray(ve)?ve[ot-1]:ve.type,gt=W.parse(nt,1+$e.length,mt);if(!gt){Ze=!0;break}$e.push(gt)}if(!Ze)if(Array.isArray(ve)&&ve.length!==$e.length)W.error("Expected "+ve.length+" arguments, but found "+$e.length+" instead.");else{for(var wt=0;wt<$e.length;wt++){var Et=Array.isArray(ve)?ve[wt]:ve.type,$t=$e[wt];W.concat(wt+1).checkSubtype(Et,$t.type)}if(0===W.errors.length)return new Kr(f,w,Ce,$e)}}if(1===L.length)(a=i.errors).push.apply(a,W.errors);else{for(var an=(L.length?L:I).map(function(Ln){var mn;return mn=Ln[0],Array.isArray(mn)?"("+mn.map(mi).join(", ")+")":"("+mi(mn.type)+"...)"}).join(" | "),dn=[],Un=1;Un<e.length;Un++){var xn=i.parse(e[Un],1+dn.length);if(!xn)return null;dn.push(mi(xn.type))}i.error("Expected arguments of type "+an+", but found ("+dn.join(", ")+") instead.")}return null},Kr.register=function(e,i){for(var a in Kr.definitions=i,i)e[a]=Kr};var ls=function(e,i,a){this.type=ei,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=i};function kr(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function Rr(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function ra(e,i){var a=(180+e[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(a*v*8192),Math.round(f*v*8192)]}function Ra(e,i,a){return i[1]>e[1]!=a[1]>e[1]&&e[0]<(a[0]-i[0])*(e[1]-i[1])/(a[1]-i[1])+i[0]}function zr(e,i){for(var a,f,v,w,I,L,W,oe=!1,ae=0,pe=i.length;ae<pe;ae++)for(var ve=i[ae],Ce=0,$e=ve.length;Ce<$e-1;Ce++){if((w=(a=e)[0]-(f=ve[Ce])[0])*(W=a[1]-(v=ve[Ce+1])[1])-(L=a[0]-v[0])*(I=a[1]-f[1])==0&&w*L<=0&&I*W<=0)return!1;Ra(e,ve[Ce],ve[Ce+1])&&(oe=!oe)}return oe}function ga(e,i){for(var a=0;a<i.length;a++)if(zr(e,i[a]))return!0;return!1}function Ql(e,i,a,f){var v=f[0]-a[0],w=f[1]-a[1],I=(e[0]-a[0])*w-v*(e[1]-a[1]),L=(i[0]-a[0])*w-v*(i[1]-a[1]);return I>0&&L<0||I<0&&L>0}function ar(e,i,a){for(var f=0,v=a;f<v.length;f+=1)for(var w=v[f],I=0;I<w.length-1;++I)if((pe=[(ae=w[I+1])[0]-(oe=w[I])[0],ae[1]-oe[1]])[0]*(ve=[(W=i)[0]-(L=e)[0],W[1]-L[1]])[1]-pe[1]*ve[0]!=0&&Ql(L,W,oe,ae)&&Ql(oe,ae,L,W))return!0;var L,W,oe,ae,pe,ve;return!1}function So(e,i){for(var a=0;a<e.length;++a)if(!zr(e[a],i))return!1;for(var f=0;f<e.length-1;++f)if(ar(e[f],e[f+1],i))return!1;return!0}function vl(e,i){for(var a=0;a<i.length;a++)if(So(e,i[a]))return!0;return!1}function Xo(e,i,a){for(var f=[],v=0;v<e.length;v++){for(var w=[],I=0;I<e[v].length;I++){var L=ra(e[v][I],a);kr(i,L),w.push(L)}f.push(w)}return f}function cs(e,i,a){for(var f=[],v=0;v<e.length;v++){var w=Xo(e[v],i,a);f.push(w)}return f}function Cs(e,i,a,f){if(e[0]<a[0]||e[0]>a[2]){var v=.5*f,w=e[0]-a[0]>v?-f:a[0]-e[0]>v?f:0;0===w&&(w=e[0]-a[2]>v?-f:a[2]-e[0]>v?f:0),e[0]+=w}kr(i,e)}function Io(e,i,a,f){for(var v=8192*Math.pow(2,f.z),w=[8192*f.x,8192*f.y],I=[],L=0,W=e;L<W.length;L+=1)for(var oe=0,ae=W[L];oe<ae.length;oe+=1){var pe=ae[oe],ve=[pe.x+w[0],pe.y+w[1]];Cs(ve,i,a,v),I.push(ve)}return I}function Nr(e,i,a,f){for(var v,w=8192*Math.pow(2,f.z),I=[8192*f.x,8192*f.y],L=[],W=0,oe=e;W<oe.length;W+=1){for(var ae=[],pe=0,ve=oe[W];pe<ve.length;pe+=1){var Ce=ve[pe],$e=[Ce.x+I[0],Ce.y+I[1]];kr(i,$e),ae.push($e)}L.push(ae)}if(i[2]-i[0]<=w/2){(v=i)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(var Ze=0,ot=L;Ze<ot.length;Ze+=1)for(var nt=0,mt=ot[Ze];nt<mt.length;nt+=1)Cs(mt[nt],i,a,w)}return L}ls.parse=function(e,i){if(2!==e.length)return i.error("Expected one argument.");var a=e[1];if("object"!=typeof a||Array.isArray(a))return i.error("Collator options argument must be an object.");var f=i.parse(void 0!==a["case-sensitive"]&&a["case-sensitive"],1,jt);if(!f)return null;var v=i.parse(void 0!==a["diacritic-sensitive"]&&a["diacritic-sensitive"],1,jt);if(!v)return null;var w=null;return a.locale&&!(w=i.parse(a.locale,1,Rt))?null:new ls(f,v,w)},ls.prototype.evaluate=function(e){return new ii(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ls.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ls.prototype.outputDefined=function(){return!1},ls.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var _o=function(e,i){this.type=jt,this.geojson=e,this.geometries=i};function Fr(e){if(e instanceof Kr&&("get"===e.name&&1===e.args.length||"feature-state"===e.name||"has"===e.name&&1===e.args.length||"properties"===e.name||"geometry-type"===e.name||"id"===e.name||/^filter-/.test(e.name))||e instanceof _o)return!1;var i=!0;return e.eachChild(function(a){i&&!Fr(a)&&(i=!1)}),i}function gr(e){if(e instanceof Kr&&"feature-state"===e.name)return!1;var i=!0;return e.eachChild(function(a){i&&!gr(a)&&(i=!1)}),i}function Ao(e,i){if(e instanceof Kr&&i.indexOf(e.name)>=0)return!1;var a=!0;return e.eachChild(function(f){a&&!Ao(f,i)&&(a=!1)}),a}_o.parse=function(e,i){if(2!==e.length)return i.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Vo(e[1])){var a=e[1];if("FeatureCollection"===a.type)for(var f=0;f<a.features.length;++f){var v=a.features[f].geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new _o(a,a.features[f].geometry)}else if("Feature"===a.type){var w=a.geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new _o(a,a.geometry)}else if("Polygon"===a.type||"MultiPolygon"===a.type)return new _o(a,a)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},_o.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(i,a){var f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=i.canonicalID();if("Polygon"===a.type){var I=Xo(a.coordinates,v,w),L=Io(i.geometry(),f,v,w);if(!Rr(f,v))return!1;for(var W=0,oe=L;W<oe.length;W+=1)if(!zr(oe[W],I))return!1}if("MultiPolygon"===a.type){var ae=cs(a.coordinates,v,w),pe=Io(i.geometry(),f,v,w);if(!Rr(f,v))return!1;for(var ve=0,Ce=pe;ve<Ce.length;ve+=1)if(!ga(Ce[ve],ae))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(i,a){var f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=i.canonicalID();if("Polygon"===a.type){var I=Xo(a.coordinates,v,w),L=Nr(i.geometry(),f,v,w);if(!Rr(f,v))return!1;for(var W=0,oe=L;W<oe.length;W+=1)if(!So(oe[W],I))return!1}if("MultiPolygon"===a.type){var ae=cs(a.coordinates,v,w),pe=Nr(i.geometry(),f,v,w);if(!Rr(f,v))return!1;for(var ve=0,Ce=pe;ve<Ce.length;ve+=1)if(!vl(Ce[ve],ae))return!1}return!0}(e,this.geometries)}return!1},_o.prototype.eachChild=function(){},_o.prototype.outputDefined=function(){return!0},_o.prototype.serialize=function(){return["within",this.geojson]};var yo=function(e,i){this.type=i.type,this.name=e,this.boundExpression=i};yo.parse=function(e,i){if(2!==e.length||"string"!=typeof e[1])return i.error("'var' expression requires exactly one string literal argument.");var a=e[1];return i.scope.has(a)?new yo(a,i.scope.get(a)):i.error('Unknown variable "'+a+'". Make sure "'+a+'" has been bound in an enclosing "let" expression before using it.',1)},yo.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},yo.prototype.eachChild=function(){},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){return["var",this.name]};var Ds=function(e,i,a,f,v){void 0===i&&(i=[]),void 0===f&&(f=new Me),void 0===v&&(v=[]),this.registry=e,this.path=i,this.key=i.map(function(w){return"["+w+"]"}).join(""),this.scope=f,this.errors=v,this.expectedType=a};function uo(e,i){for(var a,f=e.length-1,v=0,w=f,I=0;v<=w;)if((a=e[I=Math.floor((v+w)/2)])<=i){if(I===f||i<e[I+1])return I;v=I+1}else{if(!(a>i))throw new Oi("Input is not a number.");w=I-1}return 0}Ds.prototype.parse=function(e,i,a,f,v){return void 0===v&&(v={}),i?this.concat(i,a,f)._parse(e,v):this._parse(e,v)},Ds.prototype._parse=function(e,i){function a(oe,ae,pe){return"assert"===pe?new gi(ae,[oe]):"coerce"===pe?new go(ae,[oe]):oe}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var f=e[0];if("string"!=typeof f)return this.error("Expression name must be a string, but found "+typeof f+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var v=this.registry[f];if(v){var w=v.parse(e,this);if(!w)return null;if(this.expectedType){var I=this.expectedType,L=w.type;if("string"!==I.kind&&"number"!==I.kind&&"boolean"!==I.kind&&"object"!==I.kind&&"array"!==I.kind||"value"!==L.kind)if("color"!==I.kind&&"formatted"!==I.kind&&"resolvedImage"!==I.kind||"value"!==L.kind&&"string"!==L.kind){if(this.checkSubtype(I,L))return null}else w=a(w,I,i.typeAnnotation||"coerce");else w=a(w,I,i.typeAnnotation||"assert")}if(!(w instanceof vi)&&"resolvedImage"!==w.type.kind&&function oe(ae){if(ae instanceof yo)return oe(ae.boundExpression);if(ae instanceof Kr&&"error"===ae.name||ae instanceof ls||ae instanceof _o)return!1;var pe=ae instanceof go||ae instanceof gi,ve=!0;return ae.eachChild(function(Ce){ve=pe?ve&&oe(Ce):ve&&Ce instanceof vi}),!!ve&&Fr(ae)&&Ao(ae,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(w)){var W=new ws;try{w=new vi(w.type,w.evaluate(W))}catch(oe){return this.error(oe.message),null}}return w}return this.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ds.prototype.concat=function(e,i,a){var f="number"==typeof e?this.path.concat(e):this.path,v=a?this.scope.concat(a):this.scope;return new Ds(this.registry,f,i||null,v,this.errors)},Ds.prototype.error=function(e){for(var i=[],a=arguments.length-1;a-- >0;)i[a]=arguments[a+1];var f=""+this.key+i.map(function(v){return"["+v+"]"}).join("");this.errors.push(new Ae(f,e))},Ds.prototype.checkSubtype=function(e,i){var a=Ii(e,i);return a&&this.error(a),a};var Oo=function(e,i,a){this.type=e,this.input=i,this.labels=[],this.outputs=[];for(var f=0,v=a;f<v.length;f+=1){var w=v[f],I=w[1];this.labels.push(w[0]),this.outputs.push(I)}};function jr(e,i,a){return e*(1-a)+i*a}Oo.parse=function(e,i){if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");var a=i.parse(e[1],1,He);if(!a)return null;var f=[],v=null;i.expectedType&&"value"!==i.expectedType.kind&&(v=i.expectedType);for(var w=1;w<e.length;w+=2){var I=1===w?-1/0:e[w],L=e[w+1],W=w,oe=w+1;if("number"!=typeof I)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(f.length&&f[f.length-1][0]>=I)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);var ae=i.parse(L,oe,v);if(!ae)return null;v=v||ae.type,f.push([I,ae])}return new Oo(v,a,f)},Oo.prototype.evaluate=function(e){var i=this.labels,a=this.outputs;if(1===i.length)return a[0].evaluate(e);var f=this.input.evaluate(e);if(f<=i[0])return a[0].evaluate(e);var v=i.length;return f>=i[v-1]?a[v-1].evaluate(e):a[uo(i,f)].evaluate(e)},Oo.prototype.eachChild=function(e){e(this.input);for(var i=0,a=this.outputs;i<a.length;i+=1)e(a[i])},Oo.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Oo.prototype.serialize=function(){for(var e=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e};var Gs=Object.freeze({__proto__:null,number:jr,color:function(e,i,a){return new pi(jr(e.r,i.r,a),jr(e.g,i.g,a),jr(e.b,i.b,a),jr(e.a,i.a,a))},array:function(e,i,a){return e.map(function(f,v){return jr(f,i[v],a)})}}),bl=6/29*3*(6/29),oa=Math.PI/180,Gc=180/Math.PI;function es(e){return e>.008856451679035631?Math.pow(e,1/3):e/bl+4/29}function xl(e){return e>6/29?e*e*e:bl*(e-4/29)}function Ja(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _r(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ji(e){var i=_r(e.r),a=_r(e.g),f=_r(e.b),v=es((.4124564*i+.3575761*a+.1804375*f)/.95047),w=es((.2126729*i+.7151522*a+.072175*f)/1);return{l:116*w-16,a:500*(v-w),b:200*(w-es((.0193339*i+.119192*a+.9503041*f)/1.08883)),alpha:e.a}}function Xl(e){var i=(e.l+16)/116,a=isNaN(e.a)?i:i+e.a/500,f=isNaN(e.b)?i:i-e.b/200;return i=1*xl(i),a=.95047*xl(a),f=1.08883*xl(f),new pi(Ja(3.2404542*a-1.5371385*i-.4985314*f),Ja(-.969266*a+1.8760108*i+.041556*f),Ja(.0556434*a-.2040259*i+1.0572252*f),e.alpha)}function Fl(e,i,a){var f=i-e;return e+a*(f>180||f<-180?f-360*Math.round(f/360):f)}var Na={forward:ji,reverse:Xl,interpolate:function(e,i,a){return{l:jr(e.l,i.l,a),a:jr(e.a,i.a,a),b:jr(e.b,i.b,a),alpha:jr(e.alpha,i.alpha,a)}}},qa={forward:function(e){var i=ji(e),a=i.l,f=i.a,v=i.b,w=Math.atan2(v,f)*Gc;return{h:w<0?w+360:w,c:Math.sqrt(f*f+v*v),l:a,alpha:e.a}},reverse:function(e){var i=e.h*oa,a=e.c;return Xl({l:e.l,a:Math.cos(i)*a,b:Math.sin(i)*a,alpha:e.alpha})},interpolate:function(e,i,a){return{h:Fl(e.h,i.h,a),c:jr(e.c,i.c,a),l:jr(e.l,i.l,a),alpha:jr(e.alpha,i.alpha,a)}}},Po=Object.freeze({__proto__:null,lab:Na,hcl:qa}),wr=function(e,i,a,f,v){this.type=e,this.operator=i,this.interpolation=a,this.input=f,this.labels=[],this.outputs=[];for(var w=0,I=v;w<I.length;w+=1){var L=I[w],W=L[1];this.labels.push(L[0]),this.outputs.push(W)}};function _a(e,i,a,f){var v=f-a,w=e-a;return 0===v?0:1===i?w/v:(Math.pow(i,w)-1)/(Math.pow(i,v)-1)}wr.interpolationFactor=function(e,i,a,f){var v=0;if("exponential"===e.name)v=_a(i,e.base,a,f);else if("linear"===e.name)v=_a(i,1,a,f);else if("cubic-bezier"===e.name){var w=e.controlPoints;v=new te(w[0],w[1],w[2],w[3]).solve(_a(i,1,a,f))}return v},wr.parse=function(e,i){var a=e[0],f=e[1],v=e[2],w=e.slice(3);if(!Array.isArray(f)||0===f.length)return i.error("Expected an interpolation type expression.",1);if("linear"===f[0])f={name:"linear"};else if("exponential"===f[0]){var I=f[1];if("number"!=typeof I)return i.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:I}}else{if("cubic-bezier"!==f[0])return i.error("Unknown interpolation type "+String(f[0]),1,0);var L=f.slice(1);if(4!==L.length||L.some(function(ot){return"number"!=typeof ot||ot<0||ot>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:L}}if(e.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(v=i.parse(v,2,He)))return null;var W=[],oe=null;"interpolate-hcl"===a||"interpolate-lab"===a?oe=en:i.expectedType&&"value"!==i.expectedType.kind&&(oe=i.expectedType);for(var ae=0;ae<w.length;ae+=2){var pe=w[ae],ve=w[ae+1],Ce=ae+3,$e=ae+4;if("number"!=typeof pe)return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ce);if(W.length&&W[W.length-1][0]>=pe)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ce);var Ze=i.parse(ve,$e,oe);if(!Ze)return null;oe=oe||Ze.type,W.push([pe,Ze])}return"number"===oe.kind||"color"===oe.kind||"array"===oe.kind&&"number"===oe.itemType.kind&&"number"==typeof oe.N?new wr(oe,a,f,v,W):i.error("Type "+mi(oe)+" is not interpolatable.")},wr.prototype.evaluate=function(e){var i=this.labels,a=this.outputs;if(1===i.length)return a[0].evaluate(e);var f=this.input.evaluate(e);if(f<=i[0])return a[0].evaluate(e);var v=i.length;if(f>=i[v-1])return a[v-1].evaluate(e);var w=uo(i,f),I=wr.interpolationFactor(this.interpolation,f,i[w],i[w+1]),L=a[w].evaluate(e),W=a[w+1].evaluate(e);return"interpolate"===this.operator?Gs[this.type.kind.toLowerCase()](L,W,I):"interpolate-hcl"===this.operator?qa.reverse(qa.interpolate(qa.forward(L),qa.forward(W),I)):Na.reverse(Na.interpolate(Na.forward(L),Na.forward(W),I))},wr.prototype.eachChild=function(e){e(this.input);for(var i=0,a=this.outputs;i<a.length;i+=1)e(a[i])},wr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},wr.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,e,this.input.serialize()],a=0;a<this.labels.length;a++)i.push(this.labels[a],this.outputs[a].serialize());return i};var sa=function(e,i){this.type=e,this.args=i};sa.parse=function(e,i){if(e.length<2)return i.error("Expectected at least one argument.");var a=null,f=i.expectedType;f&&"value"!==f.kind&&(a=f);for(var v=[],w=0,I=e.slice(1);w<I.length;w+=1){var L=i.parse(I[w],1+v.length,a,void 0,{typeAnnotation:"omit"});if(!L)return null;a=a||L.type,v.push(L)}var W=f&&v.some(function(oe){return Ii(f,oe.type)});return new sa(W?sn:a,v)},sa.prototype.evaluate=function(e){for(var i,a=null,f=0,v=0,w=this.args;v<w.length&&(f++,(a=w[v].evaluate(e))&&a instanceof Mr&&!a.available&&(i||(i=a.name),a=null,f===this.args.length&&(a=i)),null===a);v+=1);return a},sa.prototype.eachChild=function(e){this.args.forEach(e)},sa.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},sa.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Fa=function(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i};Fa.prototype.evaluate=function(e){return this.result.evaluate(e)},Fa.prototype.eachChild=function(e){for(var i=0,a=this.bindings;i<a.length;i+=1)e(a[i][1]);e(this.result)},Fa.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var a=[],f=1;f<e.length-1;f+=2){var v=e[f];if("string"!=typeof v)return i.error("Expected string, but found "+typeof v+" instead.",f);if(/[^a-zA-Z0-9_]/.test(v))return i.error("Variable names must contain only alphanumeric characters or '_'.",f);var w=i.parse(e[f+1],f+1);if(!w)return null;a.push([v,w])}var I=i.parse(e[e.length-1],e.length-1,i.expectedType,a);return I?new Fa(a,I):null},Fa.prototype.outputDefined=function(){return this.result.outputDefined()},Fa.prototype.serialize=function(){for(var e=["let"],i=0,a=this.bindings;i<a.length;i+=1){var f=a[i];e.push(f[0],f[1].serialize())}return e.push(this.result.serialize()),e};var $s=function(e,i,a){this.type=e,this.index=i,this.input=a};$s.parse=function(e,i){if(3!==e.length)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var a=i.parse(e[1],1,He),f=i.parse(e[2],2,Ti(i.expectedType||sn));return a&&f?new $s(f.type.itemType,a,f):null},$s.prototype.evaluate=function(e){var i=this.index.evaluate(e),a=this.input.evaluate(e);if(i<0)throw new Oi("Array index out of bounds: "+i+" < 0.");if(i>=a.length)throw new Oi("Array index out of bounds: "+i+" > "+(a.length-1)+".");if(i!==Math.floor(i))throw new Oi("Array index must be an integer, but found "+i+" instead.");return a[i]},$s.prototype.eachChild=function(e){e(this.index),e(this.input)},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Uo=function(e,i){this.type=jt,this.needle=e,this.haystack=i};Uo.parse=function(e,i){if(3!==e.length)return i.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var a=i.parse(e[1],1,sn),f=i.parse(e[2],2,sn);return a&&f?mr(a.type,[jt,Rt,He,qe,sn])?new Uo(a,f):i.error("Expected first argument to be of type boolean, string, number or null, but found "+mi(a.type)+" instead"):null},Uo.prototype.evaluate=function(e){var i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!a)return!1;if(!$i(i,["boolean","string","number","null"]))throw new Oi("Expected first argument to be of type boolean, string, number or null, but found "+mi(cn(i))+" instead.");if(!$i(a,["string","array"]))throw new Oi("Expected second argument to be of type array or string, but found "+mi(cn(a))+" instead.");return a.indexOf(i)>=0},Uo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Uo.prototype.outputDefined=function(){return!0},Uo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Es=function(e,i,a){this.type=He,this.needle=e,this.haystack=i,this.fromIndex=a};Es.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var a=i.parse(e[1],1,sn),f=i.parse(e[2],2,sn);if(!a||!f)return null;if(!mr(a.type,[jt,Rt,He,qe,sn]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+mi(a.type)+" instead");if(4===e.length){var v=i.parse(e[3],3,He);return v?new Es(a,f,v):null}return new Es(a,f)},Es.prototype.evaluate=function(e){var i=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!$i(i,["boolean","string","number","null"]))throw new Oi("Expected first argument to be of type boolean, string, number or null, but found "+mi(cn(i))+" instead.");if(!$i(a,["string","array"]))throw new Oi("Expected second argument to be of type array or string, but found "+mi(cn(a))+" instead.");if(this.fromIndex){var f=this.fromIndex.evaluate(e);return a.indexOf(i,f)}return a.indexOf(i)},Es.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ts=function(e,i,a,f,v,w){this.inputType=e,this.type=i,this.input=a,this.cases=f,this.outputs=v,this.otherwise=w};Ts.parse=function(e,i){if(e.length<5)return i.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return i.error("Expected an even number of arguments.");var a,f;i.expectedType&&"value"!==i.expectedType.kind&&(f=i.expectedType);for(var v={},w=[],I=2;I<e.length-1;I+=2){var L=e[I],W=e[I+1];Array.isArray(L)||(L=[L]);var oe=i.concat(I);if(0===L.length)return oe.error("Expected at least one branch label.");for(var ae=0,pe=L;ae<pe.length;ae+=1){var ve=pe[ae];if("number"!=typeof ve&&"string"!=typeof ve)return oe.error("Branch labels must be numbers or strings.");if("number"==typeof ve&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return oe.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof ve&&Math.floor(ve)!==ve)return oe.error("Numeric branch labels must be integer values.");if(a){if(oe.checkSubtype(a,cn(ve)))return null}else a=cn(ve);if(void 0!==v[String(ve)])return oe.error("Branch labels must be unique.");v[String(ve)]=w.length}var Ce=i.parse(W,I,f);if(!Ce)return null;f=f||Ce.type,w.push(Ce)}var $e=i.parse(e[1],1,sn);if(!$e)return null;var Ze=i.parse(e[e.length-1],e.length-1,f);return Ze?"value"!==$e.type.kind&&i.concat(1).checkSubtype(a,$e.type)?null:new Ts(a,f,$e,v,w,Ze):null},Ts.prototype.evaluate=function(e){var i=this.input.evaluate(e);return(cn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)},Ts.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ts.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ts.prototype.serialize=function(){for(var e=this,i=["match",this.input.serialize()],a=[],f={},v=0,w=Object.keys(this.cases).sort();v<w.length;v+=1){var I=w[v];void 0===(pe=f[this.cases[I]])?(f[this.cases[I]]=a.length,a.push([this.cases[I],[I]])):a[pe][1].push(I)}for(var L=function(Ce){return"number"===e.inputType.kind?Number(Ce):Ce},W=0,oe=a;W<oe.length;W+=1){var ae=oe[W],pe=ae[0],ve=ae[1];i.push(1===ve.length?L(ve[0]):ve.map(L)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var Zs=function(e,i,a){this.type=e,this.branches=i,this.otherwise=a};Zs.parse=function(e,i){if(e.length<4)return i.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return i.error("Expected an odd number of arguments.");var a;i.expectedType&&"value"!==i.expectedType.kind&&(a=i.expectedType);for(var f=[],v=1;v<e.length-1;v+=2){var w=i.parse(e[v],v,jt);if(!w)return null;var I=i.parse(e[v+1],v+1,a);if(!I)return null;f.push([w,I]),a=a||I.type}var L=i.parse(e[e.length-1],e.length-1,a);return L?new Zs(a,f,L):null},Zs.prototype.evaluate=function(e){for(var i=0,a=this.branches;i<a.length;i+=1){var f=a[i],v=f[1];if(f[0].evaluate(e))return v.evaluate(e)}return this.otherwise.evaluate(e)},Zs.prototype.eachChild=function(e){for(var i=0,a=this.branches;i<a.length;i+=1){var f=a[i],v=f[1];e(f[0]),e(v)}e(this.otherwise)},Zs.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Zs.prototype.serialize=function(){var e=["case"];return this.eachChild(function(i){e.push(i.serialize())}),e};var La=function(e,i,a,f){this.type=e,this.input=i,this.beginIndex=a,this.endIndex=f};function Ll(e,i){return"=="===e||"!="===e?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function wl(e,i,a,f){return 0===f.compare(i,a)}function Qi(e,i,a){var f="=="!==e&&"!="!==e;return function(){function v(w,I,L){this.type=jt,this.lhs=w,this.rhs=I,this.collator=L,this.hasUntypedArgument="value"===w.type.kind||"value"===I.type.kind}return v.parse=function(w,I){if(3!==w.length&&4!==w.length)return I.error("Expected two or three arguments.");var L=w[0],W=I.parse(w[1],1,sn);if(!W)return null;if(!Ll(L,W.type))return I.concat(1).error('"'+L+"\" comparisons are not supported for type '"+mi(W.type)+"'.");var oe=I.parse(w[2],2,sn);if(!oe)return null;if(!Ll(L,oe.type))return I.concat(2).error('"'+L+"\" comparisons are not supported for type '"+mi(oe.type)+"'.");if(W.type.kind!==oe.type.kind&&"value"!==W.type.kind&&"value"!==oe.type.kind)return I.error("Cannot compare types '"+mi(W.type)+"' and '"+mi(oe.type)+"'.");f&&("value"===W.type.kind&&"value"!==oe.type.kind?W=new gi(oe.type,[W]):"value"!==W.type.kind&&"value"===oe.type.kind&&(oe=new gi(W.type,[oe])));var ae=null;if(4===w.length){if("string"!==W.type.kind&&"string"!==oe.type.kind&&"value"!==W.type.kind&&"value"!==oe.type.kind)return I.error("Cannot use collator to compare non-string types.");if(!(ae=I.parse(w[3],3,ei)))return null}return new v(W,oe,ae)},v.prototype.evaluate=function(w){var I=this.lhs.evaluate(w),L=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){var W=cn(I),oe=cn(L);if(W.kind!==oe.kind||"string"!==W.kind&&"number"!==W.kind)throw new Oi('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+W.kind+", "+oe.kind+") instead.")}if(this.collator&&!f&&this.hasUntypedArgument){var ae=cn(I),pe=cn(L);if("string"!==ae.kind||"string"!==pe.kind)return i(w,I,L)}return this.collator?a(w,I,L,this.collator.evaluate(w)):i(w,I,L)},v.prototype.eachChild=function(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)},v.prototype.outputDefined=function(){return!0},v.prototype.serialize=function(){var w=[e];return this.eachChild(function(I){w.push(I.serialize())}),w},v}()}La.parse=function(e,i){if(e.length<=2||e.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var a=i.parse(e[1],1,sn),f=i.parse(e[2],2,He);if(!a||!f)return null;if(!mr(a.type,[Ti(sn),Rt,sn]))return i.error("Expected first argument to be of type array or string, but found "+mi(a.type)+" instead");if(4===e.length){var v=i.parse(e[3],3,He);return v?new La(a.type,a,f,v):null}return new La(a.type,a,f)},La.prototype.evaluate=function(e){var i=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!$i(i,["string","array"]))throw new Oi("Expected first argument to be of type array or string, but found "+mi(cn(i))+" instead.");if(this.endIndex){var f=this.endIndex.evaluate(e);return i.slice(a,f)}return i.slice(a)},La.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ac=Qi("==",function(e,i,a){return i===a},wl),jo=Qi("!=",function(e,i,a){return i!==a},function(e,i,a,f){return!wl(0,i,a,f)}),qr=Qi("<",function(e,i,a){return i<a},function(e,i,a,f){return f.compare(i,a)<0}),ko=Qi(">",function(e,i,a){return i>a},function(e,i,a,f){return f.compare(i,a)>0}),Ba=Qi("<=",function(e,i,a){return i<=a},function(e,i,a,f){return f.compare(i,a)<=0}),Qa=Qi(">=",function(e,i,a){return i>=a},function(e,i,a,f){return f.compare(i,a)>=0}),Hr=function(e,i,a,f,v){this.type=Rt,this.number=e,this.locale=i,this.currency=a,this.minFractionDigits=f,this.maxFractionDigits=v};Hr.parse=function(e,i){if(3!==e.length)return i.error("Expected two arguments.");var a=i.parse(e[1],1,He);if(!a)return null;var f=e[2];if("object"!=typeof f||Array.isArray(f))return i.error("NumberFormat options argument must be an object.");var v=null;if(f.locale&&!(v=i.parse(f.locale,1,Rt)))return null;var w=null;if(f.currency&&!(w=i.parse(f.currency,1,Rt)))return null;var I=null;if(f["min-fraction-digits"]&&!(I=i.parse(f["min-fraction-digits"],1,He)))return null;var L=null;return f["max-fraction-digits"]&&!(L=i.parse(f["max-fraction-digits"],1,He))?null:new Hr(a,v,w,I,L)},Hr.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Hr.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Hr.prototype.outputDefined=function(){return!1},Hr.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ms=function(e){this.type=He,this.input=e};Ms.parse=function(e,i){if(2!==e.length)return i.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var a=i.parse(e[1],1);return a?"array"!==a.type.kind&&"string"!==a.type.kind&&"value"!==a.type.kind?i.error("Expected argument of type string or array, but found "+mi(a.type)+" instead."):new Ms(a):null},Ms.prototype.evaluate=function(e){var i=this.input.evaluate(e);if("string"==typeof i||Array.isArray(i))return i.length;throw new Oi("Expected value to be of type string or array, but found "+mi(cn(i))+" instead.")},Ms.prototype.eachChild=function(e){e(this.input)},Ms.prototype.outputDefined=function(){return!1},Ms.prototype.serialize=function(){var e=["length"];return this.eachChild(function(i){e.push(i.serialize())}),e};var Yo={"==":Ac,"!=":jo,">":ko,"<":qr,">=":Qa,"<=":Ba,array:gi,at:$s,boolean:gi,case:Zs,coalesce:sa,collator:ls,format:mo,image:Ui,in:Uo,"index-of":Es,interpolate:wr,"interpolate-hcl":wr,"interpolate-lab":wr,length:Ms,let:Fa,literal:vi,match:Ts,number:gi,"number-format":Hr,object:gi,slice:La,step:Oo,string:gi,"to-boolean":go,"to-color":go,"to-number":go,"to-string":go,var:yo,within:_o};function ts(e,i){var a=i[0],f=i[1],v=i[2],w=i[3];a=a.evaluate(e),f=f.evaluate(e),v=v.evaluate(e);var I=w?w.evaluate(e):1,L=zo(a,f,v,I);if(L)throw new Oi(L);return new pi(a/255*I,f/255*I,v/255*I,I)}function fc(e,i){return e in i}function Fs(e,i){var a=i[e];return void 0===a?null:a}function Ro(e){return{type:e}}function us(e){return{result:"success",value:e}}function ya(e){return{result:"error",value:e}}function ns(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function za(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ds(e){return!!e.expression&&e.expression.interpolated}function re(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ne(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Y(e){return e}function Te(e,i,a){return void 0!==e?e:void 0!==i?i:void 0!==a?a:void 0}function kt(e,i,a,f,v){return Te(typeof a===v?f[a]:void 0,e.default,i.default)}function Bn(e,i,a){if("number"!==re(a))return Te(e.default,i.default);var f=e.stops.length;if(1===f||a<=e.stops[0][0])return e.stops[0][1];if(a>=e.stops[f-1][0])return e.stops[f-1][1];var v=uo(e.stops.map(function(w){return w[0]}),a);return e.stops[v][1]}function Qr(e,i,a){var f=void 0!==e.base?e.base:1;if("number"!==re(a))return Te(e.default,i.default);var v=e.stops.length;if(1===v||a<=e.stops[0][0])return e.stops[0][1];if(a>=e.stops[v-1][0])return e.stops[v-1][1];var ve,Ce,Ze,ot,w=uo(e.stops.map(function(pe){return pe[0]}),a),I=(ve=f,ot=a-(Ce=e.stops[w][0]),0==(Ze=e.stops[w+1][0]-Ce)?0:1===ve?ot/Ze:(Math.pow(ve,ot)-1)/(Math.pow(ve,Ze)-1)),L=e.stops[w][1],W=e.stops[w+1][1],oe=Gs[i.type]||Y;if(e.colorSpace&&"rgb"!==e.colorSpace){var ae=Po[e.colorSpace];oe=function(pe,ve){return ae.reverse(ae.interpolate(ae.forward(pe),ae.forward(ve),I))}}return"function"==typeof L.evaluate?{evaluate:function(){for(var pe=[],ve=arguments.length;ve--;)pe[ve]=arguments[ve];var Ce=L.evaluate.apply(void 0,pe),$e=W.evaluate.apply(void 0,pe);if(void 0!==Ce&&void 0!==$e)return oe(Ce,$e,I)}}:oe(L,W,I)}function tr(e,i,a){return"color"===i.type?a=pi.parse(a):"formatted"===i.type?a=Ai.fromString(a.toString()):"resolvedImage"===i.type?a=Mr.fromString(a.toString()):re(a)===i.type||"enum"===i.type&&i.values[a]||(a=void 0),Te(a,e.default,i.default)}Kr.register(Yo,{error:[{kind:"error"},[Rt],function(e,i){throw new Oi(i[0].evaluate(e))}],typeof:[Rt,[sn],function(e,i){return mi(cn(i[0].evaluate(e)))}],"to-rgba":[Ti(He,4),[en],function(e,i){return i[0].evaluate(e).toArray()}],rgb:[en,[He,He,He],ts],rgba:[en,[He,He,He,He],ts],has:{type:jt,overloads:[[[Rt],function(e,i){return fc(i[0].evaluate(e),e.properties())}],[[Rt,An],function(e,i){var a=i[1];return fc(i[0].evaluate(e),a.evaluate(e))}]]},get:{type:sn,overloads:[[[Rt],function(e,i){return Fs(i[0].evaluate(e),e.properties())}],[[Rt,An],function(e,i){var a=i[1];return Fs(i[0].evaluate(e),a.evaluate(e))}]]},"feature-state":[sn,[Rt],function(e,i){return Fs(i[0].evaluate(e),e.featureState||{})}],properties:[An,[],function(e){return e.properties()}],"geometry-type":[Rt,[],function(e){return e.geometryType()}],id:[sn,[],function(e){return e.id()}],zoom:[He,[],function(e){return e.globals.zoom}],"heatmap-density":[He,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[He,[],function(e){return e.globals.lineProgress||0}],accumulated:[sn,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[He,Ro(He),function(e,i){for(var a=0,f=0,v=i;f<v.length;f+=1)a+=v[f].evaluate(e);return a}],"*":[He,Ro(He),function(e,i){for(var a=1,f=0,v=i;f<v.length;f+=1)a*=v[f].evaluate(e);return a}],"-":{type:He,overloads:[[[He,He],function(e,i){var a=i[1];return i[0].evaluate(e)-a.evaluate(e)}],[[He],function(e,i){return-i[0].evaluate(e)}]]},"/":[He,[He,He],function(e,i){var a=i[1];return i[0].evaluate(e)/a.evaluate(e)}],"%":[He,[He,He],function(e,i){var a=i[1];return i[0].evaluate(e)%a.evaluate(e)}],ln2:[He,[],function(){return Math.LN2}],pi:[He,[],function(){return Math.PI}],e:[He,[],function(){return Math.E}],"^":[He,[He,He],function(e,i){var a=i[1];return Math.pow(i[0].evaluate(e),a.evaluate(e))}],sqrt:[He,[He],function(e,i){return Math.sqrt(i[0].evaluate(e))}],log10:[He,[He],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN10}],ln:[He,[He],function(e,i){return Math.log(i[0].evaluate(e))}],log2:[He,[He],function(e,i){return Math.log(i[0].evaluate(e))/Math.LN2}],sin:[He,[He],function(e,i){return Math.sin(i[0].evaluate(e))}],cos:[He,[He],function(e,i){return Math.cos(i[0].evaluate(e))}],tan:[He,[He],function(e,i){return Math.tan(i[0].evaluate(e))}],asin:[He,[He],function(e,i){return Math.asin(i[0].evaluate(e))}],acos:[He,[He],function(e,i){return Math.acos(i[0].evaluate(e))}],atan:[He,[He],function(e,i){return Math.atan(i[0].evaluate(e))}],min:[He,Ro(He),function(e,i){return Math.min.apply(Math,i.map(function(a){return a.evaluate(e)}))}],max:[He,Ro(He),function(e,i){return Math.max.apply(Math,i.map(function(a){return a.evaluate(e)}))}],abs:[He,[He],function(e,i){return Math.abs(i[0].evaluate(e))}],round:[He,[He],function(e,i){var a=i[0].evaluate(e);return a<0?-Math.round(-a):Math.round(a)}],floor:[He,[He],function(e,i){return Math.floor(i[0].evaluate(e))}],ceil:[He,[He],function(e,i){return Math.ceil(i[0].evaluate(e))}],"filter-==":[jt,[Rt,sn],function(e,i){var a=i[0],f=i[1];return e.properties()[a.value]===f.value}],"filter-id-==":[jt,[sn],function(e,i){var a=i[0];return e.id()===a.value}],"filter-type-==":[jt,[Rt],function(e,i){var a=i[0];return e.geometryType()===a.value}],"filter-<":[jt,[Rt,sn],function(e,i){var a=i[0],f=i[1],v=e.properties()[a.value],w=f.value;return typeof v==typeof w&&v<w}],"filter-id-<":[jt,[sn],function(e,i){var a=i[0],f=e.id(),v=a.value;return typeof f==typeof v&&f<v}],"filter->":[jt,[Rt,sn],function(e,i){var a=i[0],f=i[1],v=e.properties()[a.value],w=f.value;return typeof v==typeof w&&v>w}],"filter-id->":[jt,[sn],function(e,i){var a=i[0],f=e.id(),v=a.value;return typeof f==typeof v&&f>v}],"filter-<=":[jt,[Rt,sn],function(e,i){var a=i[0],f=i[1],v=e.properties()[a.value],w=f.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[jt,[sn],function(e,i){var a=i[0],f=e.id(),v=a.value;return typeof f==typeof v&&f<=v}],"filter->=":[jt,[Rt,sn],function(e,i){var a=i[0],f=i[1],v=e.properties()[a.value],w=f.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[jt,[sn],function(e,i){var a=i[0],f=e.id(),v=a.value;return typeof f==typeof v&&f>=v}],"filter-has":[jt,[sn],function(e,i){return i[0].value in e.properties()}],"filter-has-id":[jt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[jt,[Ti(Rt)],function(e,i){return i[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[jt,[Ti(sn)],function(e,i){return i[0].value.indexOf(e.id())>=0}],"filter-in-small":[jt,[Rt,Ti(sn)],function(e,i){var a=i[0];return i[1].value.indexOf(e.properties()[a.value])>=0}],"filter-in-large":[jt,[Rt,Ti(sn)],function(e,i){var a=i[0],f=i[1];return function(v,w,I,L){for(;I<=L;){var W=I+L>>1;if(w[W]===v)return!0;w[W]>v?L=W-1:I=W+1}return!1}(e.properties()[a.value],f.value,0,f.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(e,i){var a=i[1];return i[0].evaluate(e)&&a.evaluate(e)}],[Ro(jt),function(e,i){for(var a=0,f=i;a<f.length;a+=1)if(!f[a].evaluate(e))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(e,i){var a=i[1];return i[0].evaluate(e)||a.evaluate(e)}],[Ro(jt),function(e,i){for(var a=0,f=i;a<f.length;a+=1)if(f[a].evaluate(e))return!0;return!1}]]},"!":[jt,[jt],function(e,i){return!i[0].evaluate(e)}],"is-supported-script":[jt,[Rt],function(e,i){var a=e.globals&&e.globals.isSupportedScript;return!a||a(i[0].evaluate(e))}],upcase:[Rt,[Rt],function(e,i){return i[0].evaluate(e).toUpperCase()}],downcase:[Rt,[Rt],function(e,i){return i[0].evaluate(e).toLowerCase()}],concat:[Rt,Ro(sn),function(e,i){return i.map(function(a){return Yn(a.evaluate(e))}).join("")}],"resolved-locale":[Rt,[ei],function(e,i){return i[0].evaluate(e).resolvedLocale()}]});var hs=function(e,i){var a;this.expression=e,this._warningHistory={},this._evaluator=new ws,this._defaultValue=i?"color"===(a=i).type&&ne(a.default)?new pi(0,0,0,0):"color"===a.type?pi.parse(a.default)||null:void 0===a.default?null:a.default:null,this._enumValues=i&&"enum"===i.type?i.values:null};function Ss(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Yo}function Xa(e,i){var v,w,a=new Ds(Yo,[],i?(w={color:en,string:Rt,number:He,enum:Rt,boolean:jt,formatted:Si,resolvedImage:oi},"array"===(v=i).type?Ti(w[v.value]||sn,v.length):w[v.type]):void 0),f=a.parse(e,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return f?us(new hs(f,i)):ya(a.errors)}hs.prototype.evaluateWithoutErrorHandling=function(e,i,a,f,v,w){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=a,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)},hs.prototype.evaluate=function(e,i,a,f,v,w){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=a||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w||null;try{var I=this.expression.evaluate(this._evaluator);if(null==I||"number"==typeof I&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Oi("Expected value to be one of "+Object.keys(this._enumValues).map(function(L){return JSON.stringify(L)}).join(", ")+", but found "+JSON.stringify(I)+" instead.");return I}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}};var on=function(e,i){this.kind=e,this._styleExpression=i,this.isStateDependent="constant"!==e&&!gr(i.expression)};on.prototype.evaluateWithoutErrorHandling=function(e,i,a,f,v,w){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,f,v,w)},on.prototype.evaluate=function(e,i,a,f,v,w){return this._styleExpression.evaluate(e,i,a,f,v,w)};var Pi=function(e,i,a,f){this.kind=e,this.zoomStops=a,this._styleExpression=i,this.isStateDependent="camera"!==e&&!gr(i.expression),this.interpolationType=f};function Yi(e,i){if("error"===(e=Xa(e,i)).result)return e;var a=e.value.expression,f=Fr(a);if(!f&&!ns(i))return ya([new Ae("","data expressions not supported")]);var v=Ao(a,["zoom"]);if(!v&&!za(i))return ya([new Ae("","zoom expressions not supported")]);var w=function I(L){var W=null;if(L instanceof Fa)W=I(L.result);else if(L instanceof sa)for(var oe=0,ae=L.args;oe<ae.length&&!(W=I(ae[oe]));oe+=1);else(L instanceof Oo||L instanceof wr)&&L.input instanceof Kr&&"zoom"===L.input.name&&(W=L);return W instanceof Ae||L.eachChild(function(pe){var ve=I(pe);ve instanceof Ae?W=ve:!W&&ve?W=new Ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):W&&ve&&W!==ve&&(W=new Ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),W}(a);return w||v?w instanceof Ae?ya([w]):w instanceof wr&&!ds(i)?ya([new Ae("",'"interpolate" expressions cannot be used with this property')]):us(w?new Pi(f?"camera":"composite",e.value,w.labels,w instanceof wr?w.interpolation:void 0):new on(f?"constant":"source",e.value)):ya([new Ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Pi.prototype.evaluateWithoutErrorHandling=function(e,i,a,f,v,w){return this._styleExpression.evaluateWithoutErrorHandling(e,i,a,f,v,w)},Pi.prototype.evaluate=function(e,i,a,f,v,w){return this._styleExpression.evaluate(e,i,a,f,v,w)},Pi.prototype.interpolationFactor=function(e,i,a){return this.interpolationType?wr.interpolationFactor(this.interpolationType,e,i,a):0};var Ys=function(e,i){this._parameters=e,this._specification=i,Lt(this,function a(f,v){var w,I,L,W="color"===v.type,oe=f.stops&&"object"==typeof f.stops[0][0],ae=oe||!(oe||void 0!==f.property),pe=f.type||(ds(v)?"exponential":"interval");if(W&&((f=Lt({},f)).stops&&(f.stops=f.stops.map(function(xn){return[xn[0],pi.parse(xn[1])]})),f.default=pi.parse(f.default?f.default:v.default)),f.colorSpace&&"rgb"!==f.colorSpace&&!Po[f.colorSpace])throw new Error("Unknown color space: "+f.colorSpace);if("exponential"===pe)w=Qr;else if("interval"===pe)w=Bn;else if("categorical"===pe){w=kt,I=Object.create(null);for(var ve=0,Ce=f.stops;ve<Ce.length;ve+=1){var $e=Ce[ve];I[$e[0]]=$e[1]}L=typeof f.stops[0][0]}else{if("identity"!==pe)throw new Error('Unknown function type "'+pe+'"');w=tr}if(oe){for(var Ze={},ot=[],nt=0;nt<f.stops.length;nt++){var mt=f.stops[nt],gt=mt[0].zoom;void 0===Ze[gt]&&(Ze[gt]={zoom:gt,type:f.type,property:f.property,default:f.default,stops:[]},ot.push(gt)),Ze[gt].stops.push([mt[0].value,mt[1]])}for(var wt=[],Et=0,$t=ot;Et<$t.length;Et+=1){var an=$t[Et];wt.push([Ze[an].zoom,a(Ze[an],v)])}var dn={name:"linear"};return{kind:"composite",interpolationType:dn,interpolationFactor:wr.interpolationFactor.bind(void 0,dn),zoomStops:wt.map(function(xn){return xn[0]}),evaluate:function(xn,Ln){var mn=xn.zoom;return Qr({stops:wt,base:f.base},v,mn).evaluate(mn,Ln)}}}if(ae){var Un="exponential"===pe?{name:"exponential",base:void 0!==f.base?f.base:1}:null;return{kind:"camera",interpolationType:Un,interpolationFactor:wr.interpolationFactor.bind(void 0,Un),zoomStops:f.stops.map(function(xn){return xn[0]}),evaluate:function(xn){return w(f,v,xn.zoom,I,L)}}}return{kind:"source",evaluate:function(xn,Ln){var mn=Ln&&Ln.properties?Ln.properties[f.property]:void 0;return void 0===mn?Te(f.default,v.default):w(f,v,mn,I,L)}}}(this._parameters,this._specification))};function Vr(e){var i=e.key,a=e.value,f=e.valueSpec||{},v=e.objectElementValidators||{},w=e.style,I=e.styleSpec,L=[],W=re(a);if("object"!==W)return[new Ge(i,a,"object expected, "+W+" found")];for(var oe in a){var ae=oe.split(".")[0],pe=f[ae]||f["*"],ve=void 0;if(v[ae])ve=v[ae];else if(f[ae])ve=ki;else if(v["*"])ve=v["*"];else{if(!f["*"]){L.push(new Ge(i,a[oe],'unknown property "'+oe+'"'));continue}ve=ki}L=L.concat(ve({key:(i&&i+".")+oe,value:a[oe],valueSpec:pe,style:w,styleSpec:I,object:a,objectKey:oe},a))}for(var Ce in f)v[Ce]||f[Ce].required&&void 0===f[Ce].default&&void 0===a[Ce]&&L.push(new Ge(i,a,'missing required property "'+Ce+'"'));return L}function $c(e){var i=e.value,a=e.valueSpec,f=e.style,v=e.styleSpec,w=e.key,I=e.arrayElementValidator||ki;if("array"!==re(i))return[new Ge(w,i,"array expected, "+re(i)+" found")];if(a.length&&i.length!==a.length)return[new Ge(w,i,"array length "+a.length+" expected, length "+i.length+" found")];if(a["min-length"]&&i.length<a["min-length"])return[new Ge(w,i,"array length at least "+a["min-length"]+" expected, length "+i.length+" found")];var L={type:a.value,values:a.values};v.$version<7&&(L.function=a.function),"object"===re(a.value)&&(L=a.value);for(var W=[],oe=0;oe<i.length;oe++)W=W.concat(I({array:i,arrayIndex:oe,value:i[oe],valueSpec:L,style:f,styleSpec:v,key:w+"["+oe+"]"}));return W}function el(e){var i=e.key,a=e.value,f=e.valueSpec,v=re(a);return"number"===v&&a!=a&&(v="NaN"),"number"!==v?[new Ge(i,a,"number expected, "+v+" found")]:"minimum"in f&&a<f.minimum?[new Ge(i,a,a+" is less than the minimum value "+f.minimum)]:"maximum"in f&&a>f.maximum?[new Ge(i,a,a+" is greater than the maximum value "+f.maximum)]:[]}function Ws(e){var i,a,f,v=e.valueSpec,w=Ut(e.value.type),I={},L="categorical"!==w&&void 0===e.value.property,W=!L,oe="array"===re(e.value.stops)&&"array"===re(e.value.stops[0])&&"object"===re(e.value.stops[0][0]),ae=Vr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(Ce){if("identity"===w)return[new Ge(Ce.key,Ce.value,'identity function may not have a "stops" property')];var $e=[],Ze=Ce.value;return $e=$e.concat($c({key:Ce.key,value:Ze,valueSpec:Ce.valueSpec,style:Ce.style,styleSpec:Ce.styleSpec,arrayElementValidator:pe})),"array"===re(Ze)&&0===Ze.length&&$e.push(new Ge(Ce.key,Ze,"array must have at least one stop")),$e},default:function(Ce){return ki({key:Ce.key,value:Ce.value,valueSpec:v,style:Ce.style,styleSpec:Ce.styleSpec})}}});return"identity"===w&&L&&ae.push(new Ge(e.key,e.value,'missing required property "property"')),"identity"===w||e.value.stops||ae.push(new Ge(e.key,e.value,'missing required property "stops"')),"exponential"===w&&e.valueSpec.expression&&!ds(e.valueSpec)&&ae.push(new Ge(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(W&&!ns(e.valueSpec)?ae.push(new Ge(e.key,e.value,"property functions not supported")):L&&!za(e.valueSpec)&&ae.push(new Ge(e.key,e.value,"zoom functions not supported"))),"categorical"!==w&&!oe||void 0!==e.value.property||ae.push(new Ge(e.key,e.value,'"property" property is required')),ae;function pe(Ce){var $e=[],Ze=Ce.value,ot=Ce.key;if("array"!==re(Ze))return[new Ge(ot,Ze,"array expected, "+re(Ze)+" found")];if(2!==Ze.length)return[new Ge(ot,Ze,"array length 2 expected, length "+Ze.length+" found")];if(oe){if("object"!==re(Ze[0]))return[new Ge(ot,Ze,"object expected, "+re(Ze[0])+" found")];if(void 0===Ze[0].zoom)return[new Ge(ot,Ze,"object stop key must have zoom")];if(void 0===Ze[0].value)return[new Ge(ot,Ze,"object stop key must have value")];if(f&&f>Ut(Ze[0].zoom))return[new Ge(ot,Ze[0].zoom,"stop zoom values must appear in ascending order")];Ut(Ze[0].zoom)!==f&&(f=Ut(Ze[0].zoom),a=void 0,I={}),$e=$e.concat(Vr({key:ot+"[0]",value:Ze[0],valueSpec:{zoom:{}},style:Ce.style,styleSpec:Ce.styleSpec,objectElementValidators:{zoom:el,value:ve}}))}else $e=$e.concat(ve({key:ot+"[0]",value:Ze[0],valueSpec:{},style:Ce.style,styleSpec:Ce.styleSpec},Ze));return Ss(Ie(Ze[1]))?$e.concat([new Ge(ot+"[1]",Ze[1],"expressions are not allowed in function stops.")]):$e.concat(ki({key:ot+"[1]",value:Ze[1],valueSpec:v,style:Ce.style,styleSpec:Ce.styleSpec}))}function ve(Ce,$e){var Ze=re(Ce.value),ot=Ut(Ce.value),nt=null!==Ce.value?Ce.value:$e;if(i){if(Ze!==i)return[new Ge(Ce.key,nt,Ze+" stop domain type must match previous stop domain type "+i)]}else i=Ze;if("number"!==Ze&&"string"!==Ze&&"boolean"!==Ze)return[new Ge(Ce.key,nt,"stop domain value must be a number, string, or boolean")];if("number"!==Ze&&"categorical"!==w){var mt="number expected, "+Ze+" found";return ns(v)&&void 0===w&&(mt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Ce.key,nt,mt)]}return"categorical"!==w||"number"!==Ze||isFinite(ot)&&Math.floor(ot)===ot?"categorical"!==w&&"number"===Ze&&void 0!==a&&ot<a?[new Ge(Ce.key,nt,"stop domain values must appear in ascending order")]:(a=ot,"categorical"===w&&ot in I?[new Ge(Ce.key,nt,"stop domain values must be unique")]:(I[ot]=!0,[])):[new Ge(Ce.key,nt,"integer expected, found "+ot)]}}function Ks(e){var i=("property"===e.expressionContext?Yi:Xa)(Ie(e.value),e.valueSpec);if("error"===i.result)return i.value.map(function(f){return new Ge(""+e.key+f.key,e.value,f.message)});var a=i.value.expression||i.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!a.outputDefined())return[new Ge(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!gr(a))return[new Ge(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!gr(a))return[new Ge(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Ao(a,["zoom","feature-state"]))return[new Ge(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Fr(a))return[new Ge(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tl(e){var i=e.key,a=e.value,f=e.valueSpec,v=[];return Array.isArray(f.values)?-1===f.values.indexOf(Ut(a))&&v.push(new Ge(i,a,"expected one of ["+f.values.join(", ")+"], "+JSON.stringify(a)+" found")):-1===Object.keys(f.values).indexOf(Ut(a))&&v.push(new Ge(i,a,"expected one of ["+Object.keys(f.values).join(", ")+"], "+JSON.stringify(a)+" found")),v}function Va(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,a=e.slice(1);i<a.length;i+=1){var f=a[i];if(!Va(f)&&"boolean"!=typeof f)return!1}return!0;default:return!0}}Ys.deserialize=function(e){return new Ys(e._parameters,e._specification)},Ys.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bl(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};Va(e)||(e=ps(e));var i=Xa(e,nl);if("error"===i.result)throw new Error(i.value.map(function(a){return a.key+": "+a.message}).join(", "));return{filter:function(a,f,v){return i.value.evaluate(a,f,{},v)},needGeometry:function a(f){if(!Array.isArray(f))return!1;if("within"===f[0])return!0;for(var v=1;v<f.length;v++)if(a(f[v]))return!0;return!1}(e)}}function Wo(e,i){return e<i?-1:e>i?1:0}function ps(e){if(!e)return!0;var i,a=e[0];return e.length<=1?"any"!==a:"=="===a?il(e[1],e[2],"=="):"!="===a?rl(il(e[1],e[2],"==")):"<"===a||">"===a||"<="===a||">="===a?il(e[1],e[2],a):"any"===a?(i=e.slice(1),["any"].concat(i.map(ps))):"all"===a?["all"].concat(e.slice(1).map(ps)):"none"===a?["all"].concat(e.slice(1).map(ps).map(rl)):"in"===a?Cl(e[1],e.slice(2)):"!in"===a?rl(Cl(e[1],e.slice(2))):"has"===a?va(e[1]):"!has"===a?rl(va(e[1])):"within"!==a||e}function il(e,i,a){switch(e){case"$type":return["filter-type-"+a,i];case"$id":return["filter-id-"+a,i];default:return["filter-"+a,e,i]}}function Cl(e,i){if(0===i.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(a){return typeof a!=typeof i[0]})?["filter-in-large",e,["literal",i.sort(Wo)]]:["filter-in-small",e,["literal",i]]}}function va(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function rl(e){return["!",e]}function Dl(e){return Va(Ie(e.value))?Ks(Lt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(a){var f=a.value,v=a.key;if("array"!==re(f))return[new Ge(v,f,"array expected, "+re(f)+" found")];var w,I=a.styleSpec,L=[];if(f.length<1)return[new Ge(v,f,"filter array must have at least 1 element")];switch(L=L.concat(tl({key:v+"[0]",value:f[0],valueSpec:I.filter_operator,style:a.style,styleSpec:a.styleSpec})),Ut(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&"$type"===Ut(f[1])&&L.push(new Ge(v,f,'"$type" cannot be use with operator "'+f[0]+'"'));case"==":case"!=":3!==f.length&&L.push(new Ge(v,f,'filter array for operator "'+f[0]+'" must have 3 elements'));case"in":case"!in":f.length>=2&&"string"!==(w=re(f[1]))&&L.push(new Ge(v+"[1]",f[1],"string expected, "+w+" found"));for(var W=2;W<f.length;W++)w=re(f[W]),"$type"===Ut(f[1])?L=L.concat(tl({key:v+"["+W+"]",value:f[W],valueSpec:I.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"!==w&&"number"!==w&&"boolean"!==w&&L.push(new Ge(v+"["+W+"]",f[W],"string, number, or boolean expected, "+w+" found"));break;case"any":case"all":case"none":for(var oe=1;oe<f.length;oe++)L=L.concat(i({key:v+"["+oe+"]",value:f[oe],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":w=re(f[1]),2!==f.length?L.push(new Ge(v,f,'filter array for "'+f[0]+'" operator must have 2 elements')):"string"!==w&&L.push(new Ge(v+"[1]",f[1],"string expected, "+w+" found"));break;case"within":w=re(f[1]),2!==f.length?L.push(new Ge(v,f,'filter array for "'+f[0]+'" operator must have 2 elements')):"object"!==w&&L.push(new Ge(v+"[1]",f[1],"object expected, "+w+" found"))}return L}(e)}function Ua(e,i){var a=e.key,f=e.style,v=e.styleSpec,w=e.value,I=e.objectKey,L=v[i+"_"+e.layerType];if(!L)return[];var W=I.match(/^(.*)-transition$/);if("paint"===i&&W&&L[W[1]]&&L[W[1]].transition)return ki({key:a,value:w,valueSpec:v.transition,style:f,styleSpec:v});var oe,ae=e.valueSpec||L[I];if(!ae)return[new Ge(a,w,'unknown property "'+I+'"')];if("string"===re(w)&&ns(ae)&&!ae.tokens&&(oe=/^{([^}]+)}$/.exec(w)))return[new Ge(a,w,'"'+I+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(oe[1])+" }`.")];var pe=[];return"symbol"===e.layerType&&("text-field"===I&&f&&!f.glyphs&&pe.push(new Ge(a,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===I&&ne(Ie(w))&&"identity"===Ut(w.type)&&pe.push(new Ge(a,w,'"text-font" does not support identity functions'))),pe.concat(ki({key:e.key,value:w,valueSpec:ae,style:f,styleSpec:v,expressionContext:"property",propertyType:i,propertyKey:I}))}function ol(e){return Ua(e,"paint")}function fs(e){return Ua(e,"layout")}function sl(e){var i=[],a=e.value,f=e.key,v=e.style,w=e.styleSpec;a.type||a.ref||i.push(new Ge(f,a,'either "type" or "ref" is required'));var I,L=Ut(a.type),W=Ut(a.ref);if(a.id)for(var oe=Ut(a.id),ae=0;ae<e.arrayIndex;ae++){var pe=v.layers[ae];Ut(pe.id)===oe&&i.push(new Ge(f,a.id,'duplicate layer id "'+a.id+'", previously used at line '+pe.id.__line__))}if("ref"in a)["type","source","source-layer","filter","layout"].forEach(function($e){$e in a&&i.push(new Ge(f,a[$e],'"'+$e+'" is prohibited for ref layers'))}),v.layers.forEach(function($e){Ut($e.id)===W&&(I=$e)}),I?I.ref?i.push(new Ge(f,a.ref,"ref cannot reference another ref layer")):L=Ut(I.type):i.push(new Ge(f,a.ref,'ref layer "'+W+'" not found'));else if("background"!==L)if(a.source){var ve=v.sources&&v.sources[a.source],Ce=ve&&Ut(ve.type);ve?"vector"===Ce&&"raster"===L?i.push(new Ge(f,a.source,'layer "'+a.id+'" requires a raster source')):"raster"===Ce&&"raster"!==L?i.push(new Ge(f,a.source,'layer "'+a.id+'" requires a vector source')):"vector"!==Ce||a["source-layer"]?"raster-dem"===Ce&&"hillshade"!==L?i.push(new Ge(f,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==L||!a.paint||!a.paint["line-gradient"]||"geojson"===Ce&&ve.lineMetrics||i.push(new Ge(f,a,'layer "'+a.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new Ge(f,a,'layer "'+a.id+'" must specify a "source-layer"')):i.push(new Ge(f,a.source,'source "'+a.source+'" not found'))}else i.push(new Ge(f,a,'missing required property "source"'));return i=i.concat(Vr({key:f,value:a,valueSpec:w.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ki({key:f+".type",value:a.type,valueSpec:w.layer.type,style:e.style,styleSpec:e.styleSpec,object:a,objectKey:"type"})},filter:Dl,layout:function($e){return Vr({layer:a,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(Ze){return fs(Lt({layerType:L},Ze))}}})},paint:function($e){return Vr({layer:a,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(Ze){return ol(Lt({layerType:L},Ze))}}})}}}))}function aa(e){var i=e.value,a=e.key,f=re(i);return"string"!==f?[new Ge(a,i,"string expected, "+f+" found")]:[]}var Cr={promoteId:function(e){var i=e.key,a=e.value;if("string"===re(a))return aa({key:i,value:a});var f=[];for(var v in a)f.push.apply(f,aa({key:i+"."+v,value:a[v]}));return f}};function Oc(e){var i=e.value,a=e.key,f=e.styleSpec,v=e.style;if(!i.type)return[new Ge(a,i,'"type" is required')];var w,I=Ut(i.type);switch(I){case"vector":case"raster":case"raster-dem":return Vr({key:a,value:i,valueSpec:f["source_"+I.replace("-","_")],style:e.style,styleSpec:f,objectElementValidators:Cr});case"geojson":if(w=Vr({key:a,value:i,valueSpec:f.source_geojson,style:v,styleSpec:f,objectElementValidators:Cr}),i.cluster)for(var L in i.clusterProperties){var W=i.clusterProperties[L],oe=W[0],ae="string"==typeof oe?[oe,["accumulated"],["get",L]]:oe;w.push.apply(w,Ks({key:a+"."+L+".map",value:W[1],expressionContext:"cluster-map"})),w.push.apply(w,Ks({key:a+"."+L+".reduce",value:ae,expressionContext:"cluster-reduce"}))}return w;case"video":return Vr({key:a,value:i,valueSpec:f.source_video,style:v,styleSpec:f});case"image":return Vr({key:a,value:i,valueSpec:f.source_image,style:v,styleSpec:f});case"canvas":return[new Ge(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tl({key:a+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,styleSpec:f})}}function El(e){var i=e.value,a=e.styleSpec,f=a.light,v=e.style,w=[],I=re(i);if(void 0===i)return w;if("object"!==I)return w.concat([new Ge("light",i,"object expected, "+I+" found")]);for(var L in i){var W=L.match(/^(.*)-transition$/);w=w.concat(W&&f[W[1]]&&f[W[1]].transition?ki({key:L,value:i[L],valueSpec:a.transition,style:v,styleSpec:a}):f[L]?ki({key:L,value:i[L],valueSpec:f[L],style:v,styleSpec:a}):[new Ge(L,i[L],'unknown property "'+L+'"')])}return w}var ba={"*":function(){return[]},array:$c,boolean:function(e){var i=e.value,a=e.key,f=re(i);return"boolean"!==f?[new Ge(a,i,"boolean expected, "+f+" found")]:[]},number:el,color:function(e){var i=e.key,a=e.value,f=re(a);return"string"!==f?[new Ge(i,a,"color expected, "+f+" found")]:null===li(a)?[new Ge(i,a,'color expected, "'+a+'" found')]:[]},constants:ft,enum:tl,filter:Dl,function:Ws,layer:sl,object:Vr,source:Oc,light:El,string:aa,formatted:function(e){return 0===aa(e).length?[]:Ks(e)},resolvedImage:function(e){return 0===aa(e).length?[]:Ks(e)}};function ki(e){var i=e.value,a=e.valueSpec,f=e.styleSpec;return a.expression&&ne(Ut(i))?Ws(e):a.expression&&Ss(Ie(i))?Ks(e):a.type&&ba[a.type]?ba[a.type](e):Vr(Lt({},e,{valueSpec:a.type?f[a.type]:a}))}function yr(e){var i=e.value,a=e.key,f=aa(e);return f.length||(-1===i.indexOf("{fontstack}")&&f.push(new Ge(a,i,'"glyphs" url must include a "{fontstack}" token')),-1===i.indexOf("{range}")&&f.push(new Ge(a,i,'"glyphs" url must include a "{range}" token'))),f}function Is(e,i){void 0===i&&(i=xe);var a=[];return a=a.concat(ki({key:"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:yr,"*":function(){return[]}}})),e.constants&&(a=a.concat(ft({key:"constants",value:e.constants,style:e,styleSpec:i}))),zl(a)}function zl(e){return[].concat(e).sort(function(i,a){return i.line-a.line})}function al(e){return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];return zl(e.apply(this,i))}}Is.source=al(Oc),Is.light=al(El),Is.layer=al(sl),Is.filter=al(Dl),Is.paintProperty=al(ol),Is.layoutProperty=al(fs);var mc=Is,Nu=mc.light,As=mc.paintProperty,xa=mc.layoutProperty;function Ur(e,i){var a=!1;if(i&&i.length)for(var f=0,v=i;f<v.length;f+=1)e.fire(new Je(new Error(v[f].message))),a=!0;return a}var wa=No;function No(e,i,a){var f=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var v=new Int32Array(this.arrayBuffer);e=v[0],this.d=(i=v[1])+2*(a=v[2]);for(var w=0;w<this.d*this.d;w++){var I=v[3+w],L=v[3+w+1];f.push(I===L?null:v.subarray(I,L))}var W=v[3+f.length+1];this.keys=v.subarray(v[3+f.length],W),this.bboxes=v.subarray(W),this.insert=this._insertReadonly}else{this.d=i+2*a;for(var oe=0;oe<this.d*this.d;oe++)f.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=a,this.scale=i/e,this.uid=0;var ae=a/i*e;this.min=-ae,this.max=e+ae}No.prototype.insert=function(e,i,a,f,v){this._forEachCell(i,a,f,v,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(v)},No.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},No.prototype._insertCell=function(e,i,a,f,v,w){this.cells[v].push(w)},No.prototype.query=function(e,i,a,f,v){var w=this.min,I=this.max;if(e<=w&&i<=w&&I<=a&&I<=f&&!v)return Array.prototype.slice.call(this.keys);var L=[];return this._forEachCell(e,i,a,f,this._queryCell,L,{},v),L},No.prototype._queryCell=function(e,i,a,f,v,w,I,L){var W=this.cells[v];if(null!==W)for(var oe=this.keys,ae=this.bboxes,pe=0;pe<W.length;pe++){var ve=W[pe];if(void 0===I[ve]){var Ce=4*ve;(L?L(ae[Ce+0],ae[Ce+1],ae[Ce+2],ae[Ce+3]):e<=ae[Ce+2]&&i<=ae[Ce+3]&&a>=ae[Ce+0]&&f>=ae[Ce+1])?(I[ve]=!0,w.push(oe[ve])):I[ve]=!1}}},No.prototype._forEachCell=function(e,i,a,f,v,w,I,L){for(var W=this._convertToCellCoord(e),oe=this._convertToCellCoord(i),ae=this._convertToCellCoord(a),pe=this._convertToCellCoord(f),ve=W;ve<=ae;ve++)for(var Ce=oe;Ce<=pe;Ce++){var $e=this.d*Ce+ve;if((!L||L(this._convertFromCellCoord(ve),this._convertFromCellCoord(Ce),this._convertFromCellCoord(ve+1),this._convertFromCellCoord(Ce+1)))&&v.call(this,e,i,a,f,$e,w,I,L))return}},No.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},No.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},No.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,a=0,f=0;f<this.cells.length;f++)a+=this.cells[f].length;var v=new Int32Array(i+a+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var w=i,I=0;I<e.length;I++){var L=e[I];v[3+I]=w,v.set(L,w),w+=L.length}return v[3+e.length]=w,v.set(this.keys,w),v[3+e.length+1]=w+=this.keys.length,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer};var ho=de.ImageData,Z=de.ImageBitmap,he={};function G(e,i,a){void 0===a&&(a={}),Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),he[e]={klass:i,omit:a.omit||[],shallow:a.shallow||[]}}for(var be in G("Object",Object),wa.serialize=function(e,i){var a=e.toArrayBuffer();return i&&i.push(a),{buffer:a}},wa.deserialize=function(e){return new wa(e.buffer)},G("Grid",wa),G("Color",pi),G("Error",Error),G("ResolvedImage",Mr),G("StylePropertyFunction",Ys),G("StyleExpression",hs,{omit:["_evaluator"]}),G("ZoomDependentExpression",Pi),G("ZoomConstantExpression",on),G("CompoundExpression",Kr,{omit:["_evaluate"]}),Yo)Yo[be]._classRegistryKey||G("Expression_"+be,Yo[be]);function We(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Tt(e){return Z&&e instanceof Z}function Yt(e,i){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(We(e)||Tt(e))return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var a=e;return i&&i.push(a.buffer),a}if(e instanceof ho)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var f=[],v=0,w=e;v<w.length;v+=1)f.push(Yt(w[v],i));return f}if("object"==typeof e){var I=e.constructor,L=I._classRegistryKey;if(!L)throw new Error("can't serialize object of unregistered class");var W=I.serialize?I.serialize(e,i):{};if(!I.serialize){for(var oe in e)if(e.hasOwnProperty(oe)&&!(he[L].omit.indexOf(oe)>=0)){var ae=e[oe];W[oe]=he[L].shallow.indexOf(oe)>=0?ae:Yt(ae,i)}e instanceof Error&&(W.message=e.message)}if(W.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==L&&(W.$name=L),W}throw new Error("can't serialize object of type "+typeof e)}function Dn(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||We(e)||Tt(e)||ArrayBuffer.isView(e)||e instanceof ho)return e;if(Array.isArray(e))return e.map(Dn);if("object"==typeof e){var i=e.$name||"Object",a=he[i].klass;if(!a)throw new Error("can't deserialize unregistered class "+i);if(a.deserialize)return a.deserialize(e);for(var f=Object.create(a.prototype),v=0,w=Object.keys(e);v<w.length;v+=1){var I=w[v];if("$name"!==I){var L=e[I];f[I]=he[i].shallow.indexOf(I)>=0?L:Dn(L)}}return f}throw new Error("can't deserialize object of type "+typeof e)}var cr=function(){this.first=!0};cr.prototype.update=function(e,i){var a=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=a,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=a,!0):(this.lastFloorZoom>a?(this.lastIntegerZoom=a+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<a&&(this.lastIntegerZoom=a,this.lastIntegerZoomTime=i),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=a,!0))};var Wt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Wi(e){for(var i=0,a=e;i<a.length;i+=1)if(bi(a[i].charCodeAt(0)))return!0;return!1}function bi(e){return!(746!==e&&747!==e&&(e<4352||!(Wt["Bopomofo Extended"](e)||Wt.Bopomofo(e)||Wt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Wt["CJK Compatibility Ideographs"](e)||Wt["CJK Compatibility"](e)||Wt["CJK Radicals Supplement"](e)||Wt["CJK Strokes"](e)||!(!Wt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Wt["CJK Unified Ideographs Extension A"](e)||Wt["CJK Unified Ideographs"](e)||Wt["Enclosed CJK Letters and Months"](e)||Wt["Hangul Compatibility Jamo"](e)||Wt["Hangul Jamo Extended-A"](e)||Wt["Hangul Jamo Extended-B"](e)||Wt["Hangul Jamo"](e)||Wt["Hangul Syllables"](e)||Wt.Hiragana(e)||Wt["Ideographic Description Characters"](e)||Wt.Kanbun(e)||Wt["Kangxi Radicals"](e)||Wt["Katakana Phonetic Extensions"](e)||Wt.Katakana(e)&&12540!==e||!(!Wt["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Wt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Wt["Unified Canadian Aboriginal Syllabics"](e)||Wt["Unified Canadian Aboriginal Syllabics Extended"](e)||Wt["Vertical Forms"](e)||Wt["Yijing Hexagram Symbols"](e)||Wt["Yi Syllables"](e)||Wt["Yi Radicals"](e))))}function vo(e){return!(bi(e)||(i=e,Wt["Latin-1 Supplement"](i)&&(167===i||169===i||174===i||177===i||188===i||189===i||190===i||215===i||247===i)||Wt["General Punctuation"](i)&&(8214===i||8224===i||8225===i||8240===i||8241===i||8251===i||8252===i||8258===i||8263===i||8264===i||8265===i||8273===i)||Wt["Letterlike Symbols"](i)||Wt["Number Forms"](i)||Wt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||9003===i||i>=9085&&i<=9114||i>=9150&&i<=9165||9167===i||i>=9169&&i<=9179||i>=9186&&i<=9215)||Wt["Control Pictures"](i)&&9251!==i||Wt["Optical Character Recognition"](i)||Wt["Enclosed Alphanumerics"](i)||Wt["Geometric Shapes"](i)||Wt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Wt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Wt["CJK Symbols and Punctuation"](i)||Wt.Katakana(i)||Wt["Private Use Area"](i)||Wt["CJK Compatibility Forms"](i)||Wt["Small Form Variants"](i)||Wt["Halfwidth and Fullwidth Forms"](i)||8734===i||8756===i||8757===i||i>=9984&&i<=10087||i>=10102&&i<=10131||65532===i||65533===i));var i}function Ri(e){return e>=1424&&e<=2303||Wt["Arabic Presentation Forms-A"](e)||Wt["Arabic Presentation Forms-B"](e)}function nr(e,i){return!(!i&&Ri(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Wt.Khmer(e))}function Ls(e){for(var i=0,a=e;i<a.length;i+=1)if(Ri(a[i].charCodeAt(0)))return!0;return!1}var Bs=null,bo="unavailable",no=null,Sr=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(bo="error"),Bs&&Bs(e)};function ja(){Vl.fire(new Re("pluginStateChange",{pluginStatus:bo,pluginURL:no}))}var Vl=new Xe,Tl=function(){return bo},is=function(){if("deferred"!==bo||!no)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bo="loading",ja(),no&&to({url:no},function(e){e?Sr(e):(bo="loaded",ja())})},zs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===bo||null!=zs.applyArabicShaping},isLoading:function(){return"loading"===bo},setState:function(e){bo=e.pluginStatus,no=e.pluginURL},isParsed:function(){return null!=zs.applyArabicShaping&&null!=zs.processBidirectionalText&&null!=zs.processStyledBidirectionalText},getPluginURL:function(){return no}},_i=function(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cr,this.transition={})};_i.prototype.isSupportedScript=function(e){return function(i,a){for(var f=0,v=i;f<v.length;f+=1)if(!nr(v[f].charCodeAt(0),a))return!1;return!0}(e,zs.isLoaded())},_i.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},_i.prototype.getCrossfadeParameters=function(){var e=this.zoom,i=e-Math.floor(e),a=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*a}:{fromScale:.5,toScale:1,t:1-(1-a)*i}};var la=function(e,i){this.property=e,this.value=i,this.expression=function(a,f){if(ne(a))return new Ys(a,f);if(Ss(a)){var v=Yi(a,f);if("error"===v.result)throw new Error(v.value.map(function(I){return I.key+": "+I.message}).join(", "));return v.value}var w=a;return"string"==typeof a&&"color"===f.type&&(w=pi.parse(a)),{kind:"constant",evaluate:function(){return w}}}(void 0===i?e.specification.default:i,e.specification)};la.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},la.prototype.possiblyEvaluate=function(e,i,a){return this.property.possiblyEvaluate(this,e,i,a)};var Ko=function(e){this.property=e,this.value=new la(e,void 0)};Ko.prototype.transitioned=function(e,i){return new Ca(this.property,this.value,i,De({},e.transition,this.transition),e.now)},Ko.prototype.untransitioned=function(){return new Ca(this.property,this.value,null,{},0)};var Fo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Fo.prototype.getValue=function(e){return it(this._values[e].value.value)},Fo.prototype.setValue=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ko(this._values[e].property)),this._values[e].value=new la(this._values[e].property,null===i?void 0:it(i))},Fo.prototype.getTransition=function(e){return it(this._values[e].transition)},Fo.prototype.setTransition=function(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new Ko(this._values[e].property)),this._values[e].transition=it(i)||void 0},Fo.prototype.serialize=function(){for(var e={},i=0,a=Object.keys(this._values);i<a.length;i+=1){var f=a[i],v=this.getValue(f);void 0!==v&&(e[f]=v);var w=this.getTransition(f);void 0!==w&&(e[f+"-transition"]=w)}return e},Fo.prototype.transitioned=function(e,i){for(var a=new Ul(this._properties),f=0,v=Object.keys(this._values);f<v.length;f+=1){var w=v[f];a._values[w]=this._values[w].transitioned(e,i._values[w])}return a},Fo.prototype.untransitioned=function(){for(var e=new Ul(this._properties),i=0,a=Object.keys(this._values);i<a.length;i+=1){var f=a[i];e._values[f]=this._values[f].untransitioned()}return e};var Ca=function(e,i,a,f,v){this.property=e,this.value=i,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,e.specification.transition&&(f.delay||f.duration)&&(this.prior=a)};Ca.prototype.possiblyEvaluate=function(e,i,a){var f=e.now||0,v=this.value.possiblyEvaluate(e,i,a),w=this.prior;if(w){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return w.possiblyEvaluate(e,i,a);var I=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(e,i,a),v,function(L){if(L<=0)return 0;if(L>=1)return 1;var W=L*L,oe=W*L;return 4*(L<.5?oe:3*(L-W)+oe-.75)}(I))}return v};var Ul=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Ul.prototype.possiblyEvaluate=function(e,i,a){for(var f=new Pc(this._properties),v=0,w=Object.keys(this._values);v<w.length;v+=1){var I=w[v];f._values[I]=this._values[I].possiblyEvaluate(e,i,a)}return f},Ul.prototype.hasTransition=function(){for(var e=0,i=Object.keys(this._values);e<i.length;e+=1)if(this._values[i[e]].prior)return!0;return!1};var ca=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ca.prototype.getValue=function(e){return it(this._values[e].value)},ca.prototype.setValue=function(e,i){this._values[e]=new la(this._values[e].property,null===i?void 0:it(i))},ca.prototype.serialize=function(){for(var e={},i=0,a=Object.keys(this._values);i<a.length;i+=1){var f=a[i],v=this.getValue(f);void 0!==v&&(e[f]=v)}return e},ca.prototype.possiblyEvaluate=function(e,i,a){for(var f=new Pc(this._properties),v=0,w=Object.keys(this._values);v<w.length;v+=1){var I=w[v];f._values[I]=this._values[I].possiblyEvaluate(e,i,a)}return f};var Jo=function(e,i,a){this.property=e,this.value=i,this.parameters=a};Jo.prototype.isConstant=function(){return"constant"===this.value.kind},Jo.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Jo.prototype.evaluate=function(e,i,a,f){return this.property.evaluate(this.value,this.parameters,e,i,a,f)};var Pc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Pc.prototype.get=function(e){return this._values[e]};var Sn=function(e){this.specification=e};Sn.prototype.possiblyEvaluate=function(e,i){return e.expression.evaluate(i)},Sn.prototype.interpolate=function(e,i,a){var f=Gs[this.specification.type];return f?f(e,i,a):e};var _n=function(e,i){this.specification=e,this.overrides=i};_n.prototype.possiblyEvaluate=function(e,i,a,f){return new Jo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(i,null,{},a,f)}:e.expression,i)},_n.prototype.interpolate=function(e,i,a){if("constant"!==e.value.kind||"constant"!==i.value.kind)return e;if(void 0===e.value.value||void 0===i.value.value)return new Jo(this,{kind:"constant",value:void 0},e.parameters);var f=Gs[this.specification.type];return f?new Jo(this,{kind:"constant",value:f(e.value.value,i.value.value,a)},e.parameters):e},_n.prototype.evaluate=function(e,i,a,f,v,w){return"constant"===e.kind?e.value:e.evaluate(i,a,f,v,w)};var ec=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(a,f,v,w){if(void 0===a.value)return new Jo(this,{kind:"constant",value:void 0},f);if("constant"===a.expression.kind){var I=a.expression.evaluate(f,null,{},v,w),L="resolvedImage"===a.property.specification.type&&"string"!=typeof I?I.name:I,W=this._calculate(L,L,L,f);return new Jo(this,{kind:"constant",value:W},f)}if("camera"===a.expression.kind){var oe=this._calculate(a.expression.evaluate({zoom:f.zoom-1}),a.expression.evaluate({zoom:f.zoom}),a.expression.evaluate({zoom:f.zoom+1}),f);return new Jo(this,{kind:"constant",value:oe},f)}return new Jo(this,a.expression,f)},i.prototype.evaluate=function(a,f,v,w,I,L){if("source"===a.kind){var W=a.evaluate(f,v,w,I,L);return this._calculate(W,W,W,f)}return"composite"===a.kind?this._calculate(a.evaluate({zoom:Math.floor(f.zoom)-1},v,w),a.evaluate({zoom:Math.floor(f.zoom)},v,w),a.evaluate({zoom:Math.floor(f.zoom)+1},v,w),f):a.value},i.prototype._calculate=function(a,f,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:a,to:f}:{from:v,to:f}},i.prototype.interpolate=function(a){return a},i}(_n),xo=function(e){this.specification=e};xo.prototype.possiblyEvaluate=function(e,i,a,f){if(void 0!==e.value){if("constant"===e.expression.kind){var v=e.expression.evaluate(i,null,{},a,f);return this._calculate(v,v,v,i)}return this._calculate(e.expression.evaluate(new _i(Math.floor(i.zoom-1),i)),e.expression.evaluate(new _i(Math.floor(i.zoom),i)),e.expression.evaluate(new _i(Math.floor(i.zoom+1),i)),i)}},xo.prototype._calculate=function(e,i,a,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:e,to:i}:{from:a,to:i}},xo.prototype.interpolate=function(e){return e};var Js=function(e){this.specification=e};Js.prototype.possiblyEvaluate=function(e,i,a,f){return!!e.expression.evaluate(i,null,{},a,f)},Js.prototype.interpolate=function(){return!1};var Ho=function(e){for(var i in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var a=e[i];a.specification.overridable&&this.overridableProperties.push(i);var f=this.defaultPropertyValues[i]=new la(a,void 0),v=this.defaultTransitionablePropertyValues[i]=new Ko(a);this.defaultTransitioningPropertyValues[i]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=f.possiblyEvaluate({})}};G("DataDrivenProperty",_n),G("DataConstantProperty",Sn),G("CrossFadedDataDrivenProperty",ec),G("CrossFadedProperty",xo),G("ColorRampProperty",Js);var ua=function(e){function i(a,f){if(e.call(this),this.id=a.id,this.type=a.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==a.type&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,"background"!==a.type&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),f.layout&&(this._unevaluatedLayout=new ca(f.layout)),f.paint)){for(var v in this._transitionablePaint=new Fo(f.paint),a.paint)this.setPaintProperty(v,a.paint[v],{validate:!1});for(var w in a.layout)this.setLayoutProperty(w,a.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pc(f.paint)}}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(a){return"visibility"===a?this.visibility:this._unevaluatedLayout.getValue(a)},i.prototype.setLayoutProperty=function(a,f,v){void 0===v&&(v={}),null!=f&&this._validate(xa,"layers."+this.id+".layout."+a,a,f,v)||("visibility"!==a?this._unevaluatedLayout.setValue(a,f):this.visibility=f)},i.prototype.getPaintProperty=function(a){return Fe(a,"-transition")?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)},i.prototype.setPaintProperty=function(a,f,v){if(void 0===v&&(v={}),null!=f&&this._validate(As,"layers."+this.id+".paint."+a,a,f,v))return!1;if(Fe(a,"-transition"))return this._transitionablePaint.setTransition(a.slice(0,-11),f||void 0),!1;var w=this._transitionablePaint._values[a],I="cross-faded-data-driven"===w.property.specification["property-type"],L=w.value.isDataDriven(),W=w.value;this._transitionablePaint.setValue(a,f),this._handleSpecialPaintPropertyUpdate(a);var oe=this._transitionablePaint._values[a].value;return oe.isDataDriven()||L||I||this._handleOverridablePaintPropertyUpdate(a,W,oe)},i.prototype._handleSpecialPaintPropertyUpdate=function(a){},i.prototype._handleOverridablePaintPropertyUpdate=function(a,f,v){return!1},i.prototype.isHidden=function(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.visibility},i.prototype.updateTransitions=function(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(a,f){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,f)},i.prototype.serialize=function(){var a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Be(a,function(f,v){return!(void 0===f||"layout"===v&&!Object.keys(f).length||"paint"===v&&!Object.keys(f).length)})},i.prototype._validate=function(a,f,v,w,I){return void 0===I&&(I={}),(!I||!1!==I.validate)&&Ur(this,a.call(mc,{key:f,layerType:this.type,objectKey:v,value:w,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var a in this.paint._values){var f=this.paint.get(a);if(f instanceof Jo&&ns(f.property.specification)&&("source"===f.value.kind||"composite"===f.value.kind)&&f.value.isStateDependent)return!0}return!1},i}(Xe),jl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},gc=function(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ur=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wo(e,i){void 0===i&&(i=1);var a=0,f=0;return{members:e.map(function(v){var w=jl[v.type].BYTES_PER_ELEMENT,I=a=Zc(a,Math.max(i,w)),L=v.components||1;return f=Math.max(f,w),a+=w*L,{name:v.name,type:v.type,components:L,offset:I}}),size:Zc(a,Math.max(f,i)),alignment:i}}function Zc(e,i){return Math.ceil(e/i)*i}ur.serialize=function(e,i){return e._trim(),i&&(e.isTransferred=!0,i.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},ur.deserialize=function(e){var i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},ur.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ur.prototype.clear=function(){this.length=0},ur.prototype.resize=function(e){this.reserve(e),this.length=e},ur.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},ur.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Da=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f){var v=this.length;return this.resize(v+1),this.emplace(v,a,f)},i.prototype.emplace=function(a,f,v){var w=2*a;return this.int16[w+0]=f,this.int16[w+1]=v,a},i}(ur);Da.prototype.bytesPerElement=4,G("StructArrayLayout2i4",Da);var kc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w){var I=this.length;return this.resize(I+1),this.emplace(I,a,f,v,w)},i.prototype.emplace=function(a,f,v,w,I){var L=4*a;return this.int16[L+0]=f,this.int16[L+1]=v,this.int16[L+2]=w,this.int16[L+3]=I,a},i}(ur);kc.prototype.bytesPerElement=8,G("StructArrayLayout4i8",kc);var Os=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L){var W=this.length;return this.resize(W+1),this.emplace(W,a,f,v,w,I,L)},i.prototype.emplace=function(a,f,v,w,I,L,W){var oe=6*a;return this.int16[oe+0]=f,this.int16[oe+1]=v,this.int16[oe+2]=w,this.int16[oe+3]=I,this.int16[oe+4]=L,this.int16[oe+5]=W,a},i}(ur);Os.prototype.bytesPerElement=12,G("StructArrayLayout2i4i12",Os);var Gr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L){var W=this.length;return this.resize(W+1),this.emplace(W,a,f,v,w,I,L)},i.prototype.emplace=function(a,f,v,w,I,L,W){var oe=4*a,ae=8*a;return this.int16[oe+0]=f,this.int16[oe+1]=v,this.uint8[ae+4]=w,this.uint8[ae+5]=I,this.uint8[ae+6]=L,this.uint8[ae+7]=W,a},i}(ur);Gr.prototype.bytesPerElement=8,G("StructArrayLayout2i4ub8",Gr);var ll=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f){var v=this.length;return this.resize(v+1),this.emplace(v,a,f)},i.prototype.emplace=function(a,f,v){var w=2*a;return this.float32[w+0]=f,this.float32[w+1]=v,a},i}(ur);ll.prototype.bytesPerElement=8,G("StructArrayLayout2f8",ll);var Vs=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L,W,oe,ae,pe){var ve=this.length;return this.resize(ve+1),this.emplace(ve,a,f,v,w,I,L,W,oe,ae,pe)},i.prototype.emplace=function(a,f,v,w,I,L,W,oe,ae,pe,ve){var Ce=10*a;return this.uint16[Ce+0]=f,this.uint16[Ce+1]=v,this.uint16[Ce+2]=w,this.uint16[Ce+3]=I,this.uint16[Ce+4]=L,this.uint16[Ce+5]=W,this.uint16[Ce+6]=oe,this.uint16[Ce+7]=ae,this.uint16[Ce+8]=pe,this.uint16[Ce+9]=ve,a},i}(ur);Vs.prototype.bytesPerElement=20,G("StructArrayLayout10ui20",Vs);var Ha=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce){var $e=this.length;return this.resize($e+1),this.emplace($e,a,f,v,w,I,L,W,oe,ae,pe,ve,Ce)},i.prototype.emplace=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e){var Ze=12*a;return this.int16[Ze+0]=f,this.int16[Ze+1]=v,this.int16[Ze+2]=w,this.int16[Ze+3]=I,this.uint16[Ze+4]=L,this.uint16[Ze+5]=W,this.uint16[Ze+6]=oe,this.uint16[Ze+7]=ae,this.int16[Ze+8]=pe,this.int16[Ze+9]=ve,this.int16[Ze+10]=Ce,this.int16[Ze+11]=$e,a},i}(ur);Ha.prototype.bytesPerElement=24,G("StructArrayLayout4i4ui4i24",Ha);var Rc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v){var w=this.length;return this.resize(w+1),this.emplace(w,a,f,v)},i.prototype.emplace=function(a,f,v,w){var I=3*a;return this.float32[I+0]=f,this.float32[I+1]=v,this.float32[I+2]=w,a},i}(ur);Rc.prototype.bytesPerElement=12,G("StructArrayLayout3f12",Rc);var tc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a){var f=this.length;return this.resize(f+1),this.emplace(f,a)},i.prototype.emplace=function(a,f){return this.uint32[1*a+0]=f,a},i}(ur);tc.prototype.bytesPerElement=4,G("StructArrayLayout1ul4",tc);var _c=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L,W,oe,ae){var pe=this.length;return this.resize(pe+1),this.emplace(pe,a,f,v,w,I,L,W,oe,ae)},i.prototype.emplace=function(a,f,v,w,I,L,W,oe,ae,pe){var ve=10*a,Ce=5*a;return this.int16[ve+0]=f,this.int16[ve+1]=v,this.int16[ve+2]=w,this.int16[ve+3]=I,this.int16[ve+4]=L,this.int16[ve+5]=W,this.uint32[Ce+3]=oe,this.uint16[ve+8]=ae,this.uint16[ve+9]=pe,a},i}(ur);_c.prototype.bytesPerElement=20,G("StructArrayLayout6i1ul2ui20",_c);var Hl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L){var W=this.length;return this.resize(W+1),this.emplace(W,a,f,v,w,I,L)},i.prototype.emplace=function(a,f,v,w,I,L,W){var oe=6*a;return this.int16[oe+0]=f,this.int16[oe+1]=v,this.int16[oe+2]=w,this.int16[oe+3]=I,this.int16[oe+4]=L,this.int16[oe+5]=W,a},i}(ur);Hl.prototype.bytesPerElement=12,G("StructArrayLayout2i2i2i12",Hl);var Gl=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I){var L=this.length;return this.resize(L+1),this.emplace(L,a,f,v,w,I)},i.prototype.emplace=function(a,f,v,w,I,L){var W=4*a,oe=8*a;return this.float32[W+0]=f,this.float32[W+1]=v,this.float32[W+2]=w,this.int16[oe+6]=I,this.int16[oe+7]=L,a},i}(ur);Gl.prototype.bytesPerElement=16,G("StructArrayLayout2f1f2i16",Gl);var Nc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w){var I=this.length;return this.resize(I+1),this.emplace(I,a,f,v,w)},i.prototype.emplace=function(a,f,v,w,I){var L=12*a,W=3*a;return this.uint8[L+0]=f,this.uint8[L+1]=v,this.float32[W+1]=w,this.float32[W+2]=I,a},i}(ur);Nc.prototype.bytesPerElement=12,G("StructArrayLayout2ub2f12",Nc);var qo=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v){var w=this.length;return this.resize(w+1),this.emplace(w,a,f,v)},i.prototype.emplace=function(a,f,v,w){var I=3*a;return this.uint16[I+0]=f,this.uint16[I+1]=v,this.uint16[I+2]=w,a},i}(ur);qo.prototype.bytesPerElement=6,G("StructArrayLayout3ui6",qo);var qs=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt)},i.prototype.emplace=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt,gt){var wt=24*a,Et=12*a,$t=48*a;return this.int16[wt+0]=f,this.int16[wt+1]=v,this.uint16[wt+2]=w,this.uint16[wt+3]=I,this.uint32[Et+2]=L,this.uint32[Et+3]=W,this.uint32[Et+4]=oe,this.uint16[wt+10]=ae,this.uint16[wt+11]=pe,this.uint16[wt+12]=ve,this.float32[Et+7]=Ce,this.float32[Et+8]=$e,this.uint8[$t+36]=Ze,this.uint8[$t+37]=ot,this.uint8[$t+38]=nt,this.uint32[Et+10]=mt,this.int16[wt+22]=gt,a},i}(ur);qs.prototype.bytesPerElement=48,G("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qs);var Ml=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt,gt,wt,Et,$t,an,dn,Un,xn,Ln,mn,Mi){var ni=this.length;return this.resize(ni+1),this.emplace(ni,a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt,gt,wt,Et,$t,an,dn,Un,xn,Ln,mn,Mi)},i.prototype.emplace=function(a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze,ot,nt,mt,gt,wt,Et,$t,an,dn,Un,xn,Ln,mn,Mi,ni){var kn=34*a,Bi=17*a;return this.int16[kn+0]=f,this.int16[kn+1]=v,this.int16[kn+2]=w,this.int16[kn+3]=I,this.int16[kn+4]=L,this.int16[kn+5]=W,this.int16[kn+6]=oe,this.int16[kn+7]=ae,this.uint16[kn+8]=pe,this.uint16[kn+9]=ve,this.uint16[kn+10]=Ce,this.uint16[kn+11]=$e,this.uint16[kn+12]=Ze,this.uint16[kn+13]=ot,this.uint16[kn+14]=nt,this.uint16[kn+15]=mt,this.uint16[kn+16]=gt,this.uint16[kn+17]=wt,this.uint16[kn+18]=Et,this.uint16[kn+19]=$t,this.uint16[kn+20]=an,this.uint16[kn+21]=dn,this.uint16[kn+22]=Un,this.uint32[Bi+12]=xn,this.float32[Bi+13]=Ln,this.float32[Bi+14]=mn,this.float32[Bi+15]=Mi,this.float32[Bi+16]=ni,a},i}(ur);Ml.prototype.bytesPerElement=68,G("StructArrayLayout8i15ui1ul4f68",Ml);var Lr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a){var f=this.length;return this.resize(f+1),this.emplace(f,a)},i.prototype.emplace=function(a,f){return this.float32[1*a+0]=f,a},i}(ur);Lr.prototype.bytesPerElement=4,G("StructArrayLayout1f4",Lr);var rs=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v){var w=this.length;return this.resize(w+1),this.emplace(w,a,f,v)},i.prototype.emplace=function(a,f,v,w){var I=3*a;return this.int16[I+0]=f,this.int16[I+1]=v,this.int16[I+2]=w,a},i}(ur);rs.prototype.bytesPerElement=6,G("StructArrayLayout3i6",rs);var da=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v){var w=this.length;return this.resize(w+1),this.emplace(w,a,f,v)},i.prototype.emplace=function(a,f,v,w){var I=4*a;return this.uint32[2*a+0]=f,this.uint16[I+2]=v,this.uint16[I+3]=w,a},i}(ur);da.prototype.bytesPerElement=8,G("StructArrayLayout1ul2ui8",da);var su=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f){var v=this.length;return this.resize(v+1),this.emplace(v,a,f)},i.prototype.emplace=function(a,f,v){var w=2*a;return this.uint16[w+0]=f,this.uint16[w+1]=v,a},i}(ur);su.prototype.bytesPerElement=4,G("StructArrayLayout2ui4",su);var Yc=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a){var f=this.length;return this.resize(f+1),this.emplace(f,a)},i.prototype.emplace=function(a,f){return this.uint16[1*a+0]=f,a},i}(ur);Yc.prototype.bytesPerElement=2,G("StructArrayLayout1ui2",Yc);var vr=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(a,f,v,w){var I=this.length;return this.resize(I+1),this.emplace(I,a,f,v,w)},i.prototype.emplace=function(a,f,v,w,I){var L=4*a;return this.float32[L+0]=f,this.float32[L+1]=v,this.float32[L+2]=w,this.float32[L+3]=I,a},i}(ur);vr.prototype.bytesPerElement=16,G("StructArrayLayout4f16",vr);var l=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var a={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return a.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},a.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},a.x1.get=function(){return this._structArray.int16[this._pos2+2]},a.y1.get=function(){return this._structArray.int16[this._pos2+3]},a.x2.get=function(){return this._structArray.int16[this._pos2+4]},a.y2.get=function(){return this._structArray.int16[this._pos2+5]},a.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},a.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},a.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},a.anchorPoint.get=function(){return new U(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,a),i}(gc);l.prototype.size=20;var d=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(a){return new l(this,a)},i}(_c);G("CollisionBoxArray",d);var c=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var a={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return a.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},a.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},a.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},a.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},a.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},a.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},a.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},a.segment.get=function(){return this._structArray.uint16[this._pos2+10]},a.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},a.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},a.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},a.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},a.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},a.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},a.placedOrientation.set=function(f){this._structArray.uint8[this._pos1+37]=f},a.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},a.hidden.set=function(f){this._structArray.uint8[this._pos1+38]=f},a.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},a.crossTileID.set=function(f){this._structArray.uint32[this._pos4+10]=f},a.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,a),i}(gc);c.prototype.size=48;var m=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(a){return new c(this,a)},i}(qs);G("PlacedSymbolArray",m);var E=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var a={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return a.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},a.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},a.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},a.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},a.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},a.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},a.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},a.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},a.key.get=function(){return this._structArray.uint16[this._pos2+8]},a.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},a.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},a.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},a.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},a.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},a.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},a.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},a.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},a.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},a.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},a.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},a.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},a.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},a.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},a.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},a.crossTileID.set=function(f){this._structArray.uint32[this._pos4+12]=f},a.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},a.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},a.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},a.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,a),i}(gc);E.prototype.size=68;var O=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(a){return new E(this,a)},i}(Ml);G("SymbolInstanceArray",O);var F=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getoffsetX=function(a){return this.float32[1*a+0]},i}(Lr);G("GlyphOffsetArray",F);var $=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getx=function(a){return this.int16[3*a+0]},i.prototype.gety=function(a){return this.int16[3*a+1]},i.prototype.gettileUnitDistanceFromAnchor=function(a){return this.int16[3*a+2]},i}(rs);G("SymbolLineVertexArray",$);var se=function(e){function i(){e.apply(this,arguments)}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var a={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return a.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},a.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},a.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,a),i}(gc);se.prototype.size=8;var ge=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.get=function(a){return new se(this,a)},i}(da);G("FeatureIndexArray",ge);var D=wo([{name:"a_pos",components:2,type:"Int16"}],4).members,M=function(e){void 0===e&&(e=[]),this.segments=e};function x(e,i){return 256*(e=je(Math.floor(e),0,255))+je(Math.floor(i),0,255)}M.prototype.prepareSegment=function(e,i,a,f){var v=this.segments[this.segments.length-1];return e>M.MAX_VERTEX_ARRAY_LENGTH&&St("Max vertices per segment is "+M.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!v||v.vertexLength+e>M.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:i.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},void 0!==f&&(v.sortKey=f),this.segments.push(v)),v},M.prototype.get=function(){return this.segments},M.prototype.destroy=function(){for(var e=0,i=this.segments;e<i.length;e+=1){var a=i[e];for(var f in a.vaos)a.vaos[f].destroy()}},M.simpleSegment=function(e,i,a,f){return new M([{vertexOffset:e,primitiveOffset:i,vertexLength:a,primitiveLength:f,vaos:{},sortKey:0}])},M.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,G("SegmentVector",M);var A=wo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),z=ie(function(e){e.exports=function(i,a){var f,v,w,I,L,W,oe,ae;for(v=i.length-(f=3&i.length),w=a,L=3432918353,W=461845907,ae=0;ae<v;)oe=255&i.charCodeAt(ae)|(255&i.charCodeAt(++ae))<<8|(255&i.charCodeAt(++ae))<<16|(255&i.charCodeAt(++ae))<<24,++ae,w=27492+(65535&(I=5*(65535&(w=(w^=oe=(65535&(oe=(oe=(65535&oe)*L+(((oe>>>16)*L&65535)<<16)&4294967295)<<15|oe>>>17))*W+(((oe>>>16)*W&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(I>>>16)&65535)<<16);switch(oe=0,f){case 3:oe^=(255&i.charCodeAt(ae+2))<<16;case 2:oe^=(255&i.charCodeAt(ae+1))<<8;case 1:w^=oe=(65535&(oe=(oe=(65535&(oe^=255&i.charCodeAt(ae)))*L+(((oe>>>16)*L&65535)<<16)&4294967295)<<15|oe>>>17))*W+(((oe>>>16)*W&65535)<<16)&4294967295}return w^=i.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}}),Q=ie(function(e){e.exports=function(i,a){for(var f,v=i.length,w=a^v,I=0;v>=4;)f=1540483477*(65535&(f=255&i.charCodeAt(I)|(255&i.charCodeAt(++I))<<8|(255&i.charCodeAt(++I))<<16|(255&i.charCodeAt(++I))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),v-=4,++I;switch(v){case 3:w^=(255&i.charCodeAt(I+2))<<16;case 2:w^=(255&i.charCodeAt(I+1))<<8;case 1:w=1540483477*(65535&(w^=255&i.charCodeAt(I)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}}),K=z,ye=Q;K.murmur3=z,K.murmur2=ye;var Oe=function(){this.ids=[],this.positions=[],this.indexed=!1};Oe.prototype.add=function(e,i,a,f){this.ids.push(ut(e)),this.positions.push(i,a,f)},Oe.prototype.getPositions=function(e){for(var i=ut(e),a=0,f=this.ids.length-1;a<f;){var v=a+f>>1;this.ids[v]>=i?f=v:a=v+1}for(var w=[];this.ids[a]===i;)w.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return w},Oe.serialize=function(e,i){var a=new Float64Array(e.ids),f=new Uint32Array(e.positions);return function v(w,I,L,W){for(;L<W;){for(var oe=w[L+W>>1],ae=L-1,pe=W+1;;){do{ae++}while(w[ae]<oe);do{pe--}while(w[pe]>oe);if(ae>=pe)break;ct(w,ae,pe),ct(I,3*ae,3*pe),ct(I,3*ae+1,3*pe+1),ct(I,3*ae+2,3*pe+2)}pe-L<W-pe?(v(w,I,L,pe),L=pe+1):(v(w,I,pe+1,W),W=pe)}}(a,f,0,a.length-1),i&&i.push(a.buffer,f.buffer),{ids:a,positions:f}},Oe.deserialize=function(e){var i=new Oe;return i.ids=e.ids,i.positions=e.positions,i.indexed=!0,i};var et=Math.pow(2,53)-1;function ut(e){var i=+e;return!isNaN(i)&&i<=et?i:K(String(e))}function ct(e,i,a){var f=e[i];e[i]=e[a],e[a]=f}G("FeaturePositionMap",Oe);var vt=function(e,i){this.gl=e.gl,this.location=i},Ft=function(e){function i(a,f){e.call(this,a,f),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))},i}(vt),rn=function(e){function i(a,f){e.call(this,a,f),this.current=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))},i}(vt),Qt=function(e){function i(a,f){e.call(this,a,f),this.current=[0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))},i}(vt),pn=function(e){function i(a,f){e.call(this,a,f),this.current=[0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))},i}(vt),zn=function(e){function i(a,f){e.call(this,a,f),this.current=[0,0,0,0]}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))},i}(vt),Nn=function(e){function i(a,f){e.call(this,a,f),this.current=pi.transparent}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))},i}(vt),Vn=new Float32Array(16),zi=function(e){function i(a,f){e.call(this,a,f),this.current=Vn}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.set=function(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(var f=1;f<16;f++)if(a[f]!==this.current[f]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}},i}(vt);function Mn(e){return[x(255*e.r,255*e.g),x(255*e.b,255*e.a)]}var si=function(e,i,a){this.value=e,this.uniformNames=i.map(function(f){return"u_"+f}),this.type=a};si.prototype.setUniform=function(e,i,a){e.set(a.constantOr(this.value))},si.prototype.getBinding=function(e,i,a){return"color"===this.type?new Nn(e,i):new rn(e,i)};var xi=function(e,i){this.uniformNames=i.map(function(a){return"u_"+a}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xi.prototype.setConstantPatternPositions=function(e,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=e.tlbr},xi.prototype.setUniform=function(e,i,a,f){var v="u_pattern_to"===f?this.patternTo:"u_pattern_from"===f?this.patternFrom:"u_pixel_ratio_to"===f?this.pixelRatioTo:"u_pixel_ratio_from"===f?this.pixelRatioFrom:null;v&&e.set(v)},xi.prototype.getBinding=function(e,i,a){return"u_pattern"===a.substr(0,9)?new zn(e,i):new rn(e,i)};var ti=function(e,i,a,f){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=i.map(function(v){return{name:"a_"+v,type:"Float32",components:"color"===a?2:1,offset:0}}),this.paintVertexArray=new f};ti.prototype.populatePaintArray=function(e,i,a,f,v){var w=this.paintVertexArray.length,I=this.expression.evaluate(new _i(0),i,{},f,[],v);this.paintVertexArray.resize(e),this._setPaintValue(w,e,I)},ti.prototype.updatePaintArray=function(e,i,a,f){var v=this.expression.evaluate({zoom:0},a,f);this._setPaintValue(e,i,v)},ti.prototype._setPaintValue=function(e,i,a){if("color"===this.type)for(var f=Mn(a),v=e;v<i;v++)this.paintVertexArray.emplace(v,f[0],f[1]);else{for(var w=e;w<i;w++)this.paintVertexArray.emplace(w,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}},ti.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ti.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Xn=function(e,i,a,f,v,w){this.expression=e,this.uniformNames=i.map(function(I){return"u_"+I+"_t"}),this.type=a,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=i.map(function(I){return{name:"a_"+I,type:"Float32",components:"color"===a?4:2,offset:0}}),this.paintVertexArray=new w};Xn.prototype.populatePaintArray=function(e,i,a,f,v){var w=this.expression.evaluate(new _i(this.zoom),i,{},f,[],v),I=this.expression.evaluate(new _i(this.zoom+1),i,{},f,[],v),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,w,I)},Xn.prototype.updatePaintArray=function(e,i,a,f){var v=this.expression.evaluate({zoom:this.zoom},a,f),w=this.expression.evaluate({zoom:this.zoom+1},a,f);this._setPaintValue(e,i,v,w)},Xn.prototype._setPaintValue=function(e,i,a,f){if("color"===this.type)for(var v=Mn(a),w=Mn(f),I=e;I<i;I++)this.paintVertexArray.emplace(I,v[0],v[1],w[0],w[1]);else{for(var L=e;L<i;L++)this.paintVertexArray.emplace(L,a,f);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(f))}},Xn.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Xn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Xn.prototype.setUniform=function(e,i){var a=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,f=je(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);e.set(f)},Xn.prototype.getBinding=function(e,i,a){return new rn(e,i)};var ai=function(e,i,a,f,v,w){this.expression=e,this.type=i,this.useIntegerZoom=a,this.zoom=f,this.layerId=w,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v};ai.prototype.populatePaintArray=function(e,i,a){var f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(f,e,i.patterns&&i.patterns[this.layerId],a)},ai.prototype.updatePaintArray=function(e,i,a,f,v){this._setPaintValues(e,i,a.patterns&&a.patterns[this.layerId],v)},ai.prototype._setPaintValues=function(e,i,a,f){if(f&&a){var v=f[a.min],w=f[a.mid],I=f[a.max];if(v&&w&&I)for(var L=e;L<i;L++)this.zoomInPaintVertexArray.emplace(L,w.tl[0],w.tl[1],w.br[0],w.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],w.pixelRatio,v.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,w.tl[0],w.tl[1],w.br[0],w.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],w.pixelRatio,I.pixelRatio)}},ai.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,A.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,A.members,this.expression.isStateDependent))},ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Wn=function(e,i,a){this.binders={},this._buffers=[];var f=[];for(var v in e.paint._values)if(a(v)){var w=e.paint.get(v);if(w instanceof Jo&&ns(w.property.specification)){var I=Co(v,e.type),L=w.value,W=w.property.specification.type,oe=w.property.useIntegerZoom,ae=w.property.specification["property-type"],pe="cross-faded"===ae||"cross-faded-data-driven"===ae;if("constant"===L.kind)this.binders[v]=pe?new xi(L.value,I):new si(L.value,I,W),f.push("/u_"+v);else if("source"===L.kind||pe){var ve=io(v,W,"source");this.binders[v]=pe?new ai(L,W,oe,i,ve,e.id):new ti(L,I,W,ve),f.push("/a_"+v)}else{var Ce=io(v,W,"composite");this.binders[v]=new Xn(L,I,W,oe,i,Ce),f.push("/z_"+v)}}}this.cacheKey=f.sort().join("")};Wn.prototype.getMaxValue=function(e){var i=this.binders[e];return i instanceof ti||i instanceof Xn?i.maxValue:0},Wn.prototype.populatePaintArrays=function(e,i,a,f,v){for(var w in this.binders){var I=this.binders[w];(I instanceof ti||I instanceof Xn||I instanceof ai)&&I.populatePaintArray(e,i,a,f,v)}},Wn.prototype.setConstantPatternPositions=function(e,i){for(var a in this.binders){var f=this.binders[a];f instanceof xi&&f.setConstantPatternPositions(e,i)}},Wn.prototype.updatePaintArrays=function(e,i,a,f,v){var w=!1;for(var I in e)for(var L=0,W=i.getPositions(I);L<W.length;L+=1){var oe=W[L],ae=a.feature(oe.index);for(var pe in this.binders){var ve=this.binders[pe];if((ve instanceof ti||ve instanceof Xn||ve instanceof ai)&&!0===ve.expression.isStateDependent){var Ce=f.paint.get(pe);ve.expression=Ce.value,ve.updatePaintArray(oe.start,oe.end,ae,e[I],v),w=!0}}}return w},Wn.prototype.defines=function(){var e=[];for(var i in this.binders){var a=this.binders[i];(a instanceof si||a instanceof xi)&&e.push.apply(e,a.uniformNames.map(function(f){return"#define HAS_UNIFORM_"+f}))}return e},Wn.prototype.getBinderAttributes=function(){var e=[];for(var i in this.binders){var a=this.binders[i];if(a instanceof ti||a instanceof Xn)for(var f=0;f<a.paintVertexAttributes.length;f++)e.push(a.paintVertexAttributes[f].name);else if(a instanceof ai)for(var v=0;v<A.members.length;v++)e.push(A.members[v].name)}return e},Wn.prototype.getBinderUniforms=function(){var e=[];for(var i in this.binders){var a=this.binders[i];if(a instanceof si||a instanceof xi||a instanceof Xn)for(var f=0,v=a.uniformNames;f<v.length;f+=1)e.push(v[f])}return e},Wn.prototype.getPaintVertexBuffers=function(){return this._buffers},Wn.prototype.getUniforms=function(e,i){var a=[];for(var f in this.binders){var v=this.binders[f];if(v instanceof si||v instanceof xi||v instanceof Xn)for(var w=0,I=v.uniformNames;w<I.length;w+=1){var L=I[w];if(i[L]){var W=v.getBinding(e,i[L],L);a.push({name:L,property:f,binding:W})}}}return a},Wn.prototype.setUniforms=function(e,i,a,f){for(var v=0,w=i;v<w.length;v+=1){var I=w[v],L=I.name,W=I.property;this.binders[W].setUniform(I.binding,f,a.get(W),L)}},Wn.prototype.updatePaintBuffers=function(e){for(var i in this._buffers=[],this.binders){var a=this.binders[i];if(e&&a instanceof ai){var f=2===e.fromScale?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(a instanceof ti||a instanceof Xn)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}},Wn.prototype.upload=function(e){for(var i in this.binders){var a=this.binders[i];(a instanceof ti||a instanceof Xn||a instanceof ai)&&a.upload(e)}this.updatePaintBuffers()},Wn.prototype.destroy=function(){for(var e in this.binders){var i=this.binders[e];(i instanceof ti||i instanceof Xn||i instanceof ai)&&i.destroy()}};var Jn=function(e,i,a){void 0===a&&(a=function(){return!0}),this.programConfigurations={};for(var f=0,v=e;f<v.length;f+=1){var w=v[f];this.programConfigurations[w.id]=new Wn(w,i,a)}this.needsUpload=!1,this._featureMap=new Oe,this._bufferOffset=0};function Co(e,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(i+"-","").replace(/-/g,"_")]}function io(e,i,a){var v={"line-pattern":{source:Vs,composite:Vs},"fill-pattern":{source:Vs,composite:Vs},"fill-extrusion-pattern":{source:Vs,composite:Vs}}[e];return v&&v[a]||{color:{source:ll,composite:vr},number:{source:Lr,composite:ll}}[i][a]}Jn.prototype.populatePaintArrays=function(e,i,a,f,v,w){for(var I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(e,i,f,v,w);void 0!==i.id&&this._featureMap.add(i.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Jn.prototype.updatePaintArrays=function(e,i,a,f){for(var v=0,w=a;v<w.length;v+=1){var I=w[v];this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(e,this._featureMap,i,I,f)||this.needsUpload}},Jn.prototype.get=function(e){return this.programConfigurations[e]},Jn.prototype.upload=function(e){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}},Jn.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},G("ConstantBinder",si),G("CrossFadedConstantBinder",xi),G("SourceExpressionBinder",ti),G("CrossFadedCompositeBinder",ai),G("CompositeExpressionBinder",Xn),G("ProgramConfiguration",Wn,{omit:["_buffers"]}),G("ProgramConfigurationSet",Jn);var ms=Math.pow(2,14)-1,Do=-ms-1;function $r(e){for(var i=8192/e.extent,a=e.loadGeometry(),f=0;f<a.length;f++)for(var v=a[f],w=0;w<v.length;w++){var I=v[w],L=Math.round(I.x*i),W=Math.round(I.y*i);I.x=je(L,Do,ms),I.y=je(W,Do,ms),(L<I.x||L>I.x+1||W<I.y||W>I.y+1)&&St("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return a}function po(e,i){return{type:e.type,id:e.id,properties:e.properties,geometry:i?$r(e):[]}}function ha(e,i,a,f,v){e.emplaceBack(2*i+(f+1)/2,2*a+(v+1)/2)}var Us=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new qo,this.segments=new M,this.programConfigurations=new Jn(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Ea(e,i){for(var a=0;a<e.length;a++)if(Sl(i,e[a]))return!0;for(var f=0;f<i.length;f++)if(Sl(e,i[f]))return!0;return!!yc(e,i)}function Go(e,i,a){return!!Sl(e,i)||!!bc(i,e,a)}function Ta(e,i){if(1===e.length)return au(i,e[0]);for(var a=0;a<i.length;a++)for(var f=i[a],v=0;v<f.length;v++)if(Sl(e,f[v]))return!0;for(var w=0;w<e.length;w++)if(au(i,e[w]))return!0;for(var I=0;I<i.length;I++)if(yc(e,i[I]))return!0;return!1}function Ga(e,i,a){if(e.length>1){if(yc(e,i))return!0;for(var f=0;f<i.length;f++)if(bc(i[f],e,a))return!0}for(var v=0;v<e.length;v++)if(bc(e[v],i,a))return!0;return!1}function yc(e,i){if(0===e.length||0===i.length)return!1;for(var a=0;a<e.length-1;a++)for(var f=e[a],v=e[a+1],w=0;w<i.length-1;w++)if(vc(f,v,i[w],i[w+1]))return!0;return!1}function vc(e,i,a,f){return Kt(e,a,f)!==Kt(i,a,f)&&Kt(e,i,a)!==Kt(e,i,f)}function bc(e,i,a){var f=a*a;if(1===i.length)return e.distSqr(i[0])<f;for(var v=1;v<i.length;v++)if(nc(e,i[v-1],i[v])<f)return!0;return!1}function nc(e,i,a){var f=i.distSqr(a);if(0===f)return e.distSqr(i);var v=((e.x-i.x)*(a.x-i.x)+(e.y-i.y)*(a.y-i.y))/f;return e.distSqr(v<0?i:v>1?a:a.sub(i)._mult(v)._add(i))}function au(e,i){for(var a,f,v,w=!1,I=0;I<e.length;I++)for(var L=0,W=(a=e[I]).length-1;L<a.length;W=L++)(f=a[L]).y>i.y!=(v=a[W]).y>i.y&&i.x<(v.x-f.x)*(i.y-f.y)/(v.y-f.y)+f.x&&(w=!w);return w}function Sl(e,i){for(var a=!1,f=0,v=e.length-1;f<e.length;v=f++){var w=e[f],I=e[v];w.y>i.y!=I.y>i.y&&i.x<(I.x-w.x)*(i.y-w.y)/(I.y-w.y)+w.x&&(a=!a)}return a}function Fc(e,i,a){var f=a[0],v=a[2];if(e.x<f.x&&i.x<f.x||e.x>v.x&&i.x>v.x||e.y<f.y&&i.y<f.y||e.y>v.y&&i.y>v.y)return!1;var w=Kt(e,i,a[0]);return w!==Kt(e,i,a[1])||w!==Kt(e,i,a[2])||w!==Kt(e,i,a[3])}function $l(e,i,a){var f=i.paint.get(e).value;return"constant"===f.kind?f.value:a.programConfigurations.get(i.id).getMaxValue(e)}function gs(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ic(e,i,a,f,v){if(!i[0]&&!i[1])return e;var w=U.convert(i)._mult(v);"viewport"===a&&w._rotate(-f);for(var I=[],L=0;L<e.length;L++)I.push(e[L].sub(w));return I}Us.prototype.populate=function(e,i,a){var f=this.layers[0],v=[],w=null;"circle"===f.type&&(w=f.layout.get("circle-sort-key"));for(var I=0,L=e;I<L.length;I+=1){var W=L[I],oe=W.feature,ae=W.id,pe=W.index,ve=W.sourceLayerIndex,Ce=this.layers[0]._featureFilter.needGeometry,$e=po(oe,Ce);if(this.layers[0]._featureFilter.filter(new _i(this.zoom),$e,a)){var Ze=w?w.evaluate($e,{},a):void 0,ot={id:ae,properties:oe.properties,type:oe.type,sourceLayerIndex:ve,index:pe,geometry:Ce?$e.geometry:$r(oe),patterns:{},sortKey:Ze};v.push(ot)}}w&&v.sort(function(dn,Un){return dn.sortKey-Un.sortKey});for(var nt=0,mt=v;nt<mt.length;nt+=1){var gt=mt[nt],wt=gt.geometry,Et=gt.index,$t=gt.sourceLayerIndex,an=e[Et].feature;this.addFeature(gt,wt,Et,a),i.featureIndex.insert(an,wt,Et,$t,this.index)}},Us.prototype.update=function(e,i,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a)},Us.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,D),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Us.prototype.addFeature=function(e,i,a,f){for(var v=0,w=i;v<w.length;v+=1)for(var I=0,L=w[v];I<L.length;I+=1){var W=L[I],oe=W.x,ae=W.y;if(!(oe<0||oe>=8192||ae<0||ae>=8192)){var pe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),ve=pe.vertexLength;ha(this.layoutVertexArray,oe,ae,-1,-1),ha(this.layoutVertexArray,oe,ae,1,-1),ha(this.layoutVertexArray,oe,ae,1,1),ha(this.layoutVertexArray,oe,ae,-1,1),this.indexArray.emplaceBack(ve,ve+1,ve+2),this.indexArray.emplaceBack(ve,ve+3,ve+2),pe.vertexLength+=4,pe.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},f)},G("CircleBucket",Us,{omit:["layers"]});var Lc=new Ho({"circle-sort-key":new _n(xe.layout_circle["circle-sort-key"])}),xc={paint:new Ho({"circle-radius":new _n(xe.paint_circle["circle-radius"]),"circle-color":new _n(xe.paint_circle["circle-color"]),"circle-blur":new _n(xe.paint_circle["circle-blur"]),"circle-opacity":new _n(xe.paint_circle["circle-opacity"]),"circle-translate":new Sn(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Sn(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sn(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sn(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _n(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _n(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _n(xe.paint_circle["circle-stroke-opacity"])}),layout:Lc},hr=typeof Float32Array<"u"?Float32Array:Array;function $a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qs(e,i,a){var f=i[0],v=i[1],w=i[2],I=i[3],L=i[4],W=i[5],oe=i[6],ae=i[7],pe=i[8],ve=i[9],Ce=i[10],$e=i[11],Ze=i[12],ot=i[13],nt=i[14],mt=i[15],gt=a[0],wt=a[1],Et=a[2],$t=a[3];return e[0]=gt*f+wt*L+Et*pe+$t*Ze,e[1]=gt*v+wt*W+Et*ve+$t*ot,e[2]=gt*w+wt*oe+Et*Ce+$t*nt,e[3]=gt*I+wt*ae+Et*$e+$t*mt,e[4]=(gt=a[4])*f+(wt=a[5])*L+(Et=a[6])*pe+($t=a[7])*Ze,e[5]=gt*v+wt*W+Et*ve+$t*ot,e[6]=gt*w+wt*oe+Et*Ce+$t*nt,e[7]=gt*I+wt*ae+Et*$e+$t*mt,e[8]=(gt=a[8])*f+(wt=a[9])*L+(Et=a[10])*pe+($t=a[11])*Ze,e[9]=gt*v+wt*W+Et*ve+$t*ot,e[10]=gt*w+wt*oe+Et*Ce+$t*nt,e[11]=gt*I+wt*ae+Et*$e+$t*mt,e[12]=(gt=a[12])*f+(wt=a[13])*L+(Et=a[14])*pe+($t=a[15])*Ze,e[13]=gt*v+wt*W+Et*ve+$t*ot,e[14]=gt*w+wt*oe+Et*Ce+$t*nt,e[15]=gt*I+wt*ae+Et*$e+$t*mt,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,i=0,a=arguments.length;a--;)i+=e[a]*e[a];return Math.sqrt(i)});var Ma,e,Ld=Qs;function Bd(e,i,a){var f=i[0],v=i[1],w=i[2],I=i[3];return e[0]=a[0]*f+a[4]*v+a[8]*w+a[12]*I,e[1]=a[1]*f+a[5]*v+a[9]*w+a[13]*I,e[2]=a[2]*f+a[6]*v+a[10]*w+a[14]*I,e[3]=a[3]*f+a[7]*v+a[11]*w+a[15]*I,e}Ma=new hr(3),hr!=Float32Array&&(Ma[0]=0,Ma[1]=0,Ma[2]=0),e=new hr(4),hr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);var sd=(function(){var e=new hr(2);hr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function i(a){e.call(this,a,xc)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(a){return new Us(a)},i.prototype.queryRadius=function(a){var f=a;return $l("circle-radius",this,f)+$l("circle-stroke-width",this,f)+gs(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(a,f,v,w,I,L,W,oe){for(var ae=ic(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,W),pe=this.paint.get("circle-radius").evaluate(f,v)+this.paint.get("circle-stroke-width").evaluate(f,v),ve="map"===this.paint.get("circle-pitch-alignment"),Ce=ve?ae:function(an,dn){return an.map(function(Un){return Fu(Un,dn)})}(ae,oe),$e=ve?pe*W:pe,Ze=0,ot=w;Ze<ot.length;Ze+=1)for(var nt=0,mt=ot[Ze];nt<mt.length;nt+=1){var gt=mt[nt],wt=ve?gt:Fu(gt,oe),Et=$e,$t=Bd([],[gt.x,gt.y,0,1],oe);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Et*=$t[3]/L.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Et*=L.cameraToCenterDistance/$t[3]),Go(Ce,wt,Et))return!0}return!1},i}(ua));function Fu(e,i){var a=Bd([],[e.x,e.y,0,1],i);return new U(a[0]/a[3],a[1]/a[3])}var Bh=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(Us);function Lu(e,i,a,f){var v=i.width,w=i.height;if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==v*w*a)throw new RangeError("mismatched image size")}else f=new Uint8Array(v*w*a);return e.width=v,e.height=w,e.data=f,e}function zd(e,i,a){var f=i.width,v=i.height;if(f!==e.width||v!==e.height){var w=Lu({},{width:f,height:v},a);Bu(e,w,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,f),height:Math.min(e.height,v)},a),e.width=f,e.height=v,e.data=w.data}}function Bu(e,i,a,f,v,w){if(0===v.width||0===v.height)return i;if(v.width>e.width||v.height>e.height||a.x>e.width-v.width||a.y>e.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||f.x>i.width-v.width||f.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");for(var I=e.data,L=i.data,W=0;W<v.height;W++)for(var oe=((a.y+W)*e.width+a.x)*w,ae=((f.y+W)*i.width+f.x)*w,pe=0;pe<v.width*w;pe++)L[ae+pe]=I[oe+pe];return i}G("HeatmapBucket",Bh,{omit:["layers"]});var rc=function(e,i){Lu(this,e,1,i)};rc.prototype.resize=function(e){zd(this,e,1)},rc.prototype.clone=function(){return new rc({width:this.width,height:this.height},new Uint8Array(this.data))},rc.copy=function(e,i,a,f,v){Bu(e,i,a,f,v,1)};var Xs=function(e,i){Lu(this,e,4,i)};Xs.prototype.resize=function(e){zd(this,e,4)},Xs.prototype.replace=function(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Xs.prototype.clone=function(){return new Xs({width:this.width,height:this.height},new Uint8Array(this.data))},Xs.copy=function(e,i,a,f,v){Bu(e,i,a,f,v,4)},G("AlphaImage",rc),G("RGBAImage",Xs);var ad={paint:new Ho({"heatmap-radius":new _n(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _n(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sn(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Js(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sn(xe.paint_heatmap["heatmap-opacity"])})};function ld(e){var i={},a=e.resolution||256,f=e.clips?e.clips.length:1,v=e.image||new Xs({width:a,height:f}),w=function($e,Ze,ot){i[e.evaluationKey]=ot;var nt=e.expression.evaluate(i);v.data[$e+Ze+0]=Math.floor(255*nt.r/nt.a),v.data[$e+Ze+1]=Math.floor(255*nt.g/nt.a),v.data[$e+Ze+2]=Math.floor(255*nt.b/nt.a),v.data[$e+Ze+3]=Math.floor(255*nt.a)};if(e.clips)for(var I=0,L=0;I<f;++I,L+=4*a)for(var W=0,oe=0;W<a;W++,oe+=4){var ae=W/(a-1),pe=e.clips[I];w(L,oe,pe.start*(1-ae)+pe.end*ae)}else for(var ve=0,Ce=0;ve<a;ve++,Ce+=4)w(0,Ce,ve/(a-1));return v}var cl=function(e){function i(a){e.call(this,a,ad),this._updateColorRamp()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(a){return new Bh(a)},i.prototype._handleSpecialPaintPropertyUpdate=function(a){"heatmap-color"===a&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=ld({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},i}(ua),ro={paint:new Ho({"hillshade-illumination-direction":new Sn(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Sn(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sn(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sn(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sn(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sn(xe.paint_hillshade["hillshade-accent-color"])})},Il=function(e){function i(a){e.call(this,a,ro)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},i}(ua),oh=wo([{name:"a_pos",components:2,type:"Int16"}],4).members,Al=wc,sh=wc;function wc(e,i,a){a=a||2;var f,v,w,I,L,W,oe,ae=i&&i.length,pe=ae?i[0]*a:e.length,ve=lu(e,0,pe,a,!0),Ce=[];if(!ve||ve.next===ve.prev)return Ce;if(ae&&(ve=function(Ze,ot,nt,mt){var gt,wt,Et,$t=[];for(gt=0,wt=ot.length;gt<wt;gt++)(Et=lu(Ze,ot[gt]*mt,gt<wt-1?ot[gt+1]*mt:Ze.length,mt,!1))===Et.next&&(Et.steiner=!0),$t.push(_s(Et));for($t.sort(ea),gt=0;gt<$t.length;gt++)ud($t[gt],nt),nt=Cc(nt,nt.next);return nt}(e,i,ve,a)),e.length>80*a){f=w=e[0],v=I=e[1];for(var $e=a;$e<pe;$e+=a)(L=e[$e])<f&&(f=L),(W=e[$e+1])<v&&(v=W),L>w&&(w=L),W>I&&(I=W);oe=0!==(oe=Math.max(w-f,I-v))?1/oe:0}return Dc(ve,Ce,a,f,v,oe),Ce}function lu(e,i,a,f,v){var w,I;if(v===uu(e,i,a,f)>0)for(w=i;w<a;w+=f)I=ch(w,e[w],e[w+1],I);else for(w=a-f;w>=i;w-=f)I=ch(w,e[w],e[w+1],I);return I&&sc(I,I.next)&&(md(I),I=I.next),I}function Cc(e,i){if(!e)return e;i||(i=e);var a,f=e;do{if(a=!1,f.steiner||!sc(f,f.next)&&0!==oo(f.prev,f,f.next))f=f.next;else{if(md(f),(f=i=f.prev)===f.next)break;a=!0}}while(a||f!==i);return i}function Dc(e,i,a,f,v,w,I){if(e){!I&&w&&function(ae,pe,ve,Ce){var $e=ae;do{null===$e.z&&($e.z=oc($e.x,$e.y,pe,ve,Ce)),$e.prevZ=$e.prev,$e.nextZ=$e.next,$e=$e.next}while($e!==ae);$e.prevZ.nextZ=null,$e.prevZ=null,function(Ze){var ot,nt,mt,gt,wt,Et,$t,an,dn=1;do{for(nt=Ze,Ze=null,wt=null,Et=0;nt;){for(Et++,mt=nt,$t=0,ot=0;ot<dn&&($t++,mt=mt.nextZ);ot++);for(an=dn;$t>0||an>0&&mt;)0!==$t&&(0===an||!mt||nt.z<=mt.z)?(gt=nt,nt=nt.nextZ,$t--):(gt=mt,mt=mt.nextZ,an--),wt?wt.nextZ=gt:Ze=gt,gt.prevZ=wt,wt=gt;nt=mt}wt.nextZ=null,dn*=2}while(Et>1)}($e)}(e,f,v,w);for(var L,W,oe=e;e.prev!==e.next;)if(L=e.prev,W=e.next,w?ah(e,f,v,w):cd(e))i.push(L.i/a),i.push(e.i/a),i.push(W.i/a),md(e),e=W.next,oe=W.next;else if((e=W)===oe){I?1===I?Dc(e=zh(Cc(e),i,a),i,a,f,v,w,2):2===I&&Vd(e,i,a,f,v,w):Dc(Cc(e),i,a,f,v,w,1);break}}}function cd(e){var i=e.prev,a=e,f=e.next;if(oo(i,a,f)>=0)return!1;for(var v=e.next.next;v!==e.prev;){if(ul(i.x,i.y,a.x,a.y,f.x,f.y,v.x,v.y)&&oo(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function ah(e,i,a,f){var v=e.prev,w=e,I=e.next;if(oo(v,w,I)>=0)return!1;for(var L=v.x>w.x?v.x>I.x?v.x:I.x:w.x>I.x?w.x:I.x,W=v.y>w.y?v.y>I.y?v.y:I.y:w.y>I.y?w.y:I.y,oe=oc(v.x<w.x?v.x<I.x?v.x:I.x:w.x<I.x?w.x:I.x,v.y<w.y?v.y<I.y?v.y:I.y:w.y<I.y?w.y:I.y,i,a,f),ae=oc(L,W,i,a,f),pe=e.prevZ,ve=e.nextZ;pe&&pe.z>=oe&&ve&&ve.z<=ae;){if(pe!==e.prev&&pe!==e.next&&ul(v.x,v.y,w.x,w.y,I.x,I.y,pe.x,pe.y)&&oo(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ve!==e.prev&&ve!==e.next&&ul(v.x,v.y,w.x,w.y,I.x,I.y,ve.x,ve.y)&&oo(ve.prev,ve,ve.next)>=0))return!1;ve=ve.nextZ}for(;pe&&pe.z>=oe;){if(pe!==e.prev&&pe!==e.next&&ul(v.x,v.y,w.x,w.y,I.x,I.y,pe.x,pe.y)&&oo(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ve&&ve.z<=ae;){if(ve!==e.prev&&ve!==e.next&&ul(v.x,v.y,w.x,w.y,I.x,I.y,ve.x,ve.y)&&oo(ve.prev,ve,ve.next)>=0)return!1;ve=ve.nextZ}return!0}function zh(e,i,a){var f=e;do{var v=f.prev,w=f.next.next;!sc(v,w)&&dd(v,f,f.next,w)&&pd(v,w)&&pd(w,v)&&(i.push(v.i/a),i.push(f.i/a),i.push(w.i/a),md(f),md(f.next),f=e=w),f=f.next}while(f!==e);return Cc(f)}function Vd(e,i,a,f,v,w){var I=e;do{for(var L=I.next.next;L!==I.prev;){if(I.i!==L.i&&cu(I,L)){var W=fd(I,L);return I=Cc(I,I.next),W=Cc(W,W.next),Dc(I,i,a,f,v,w),void Dc(W,i,a,f,v,w)}L=L.next}I=I.next}while(I!==e)}function ea(e,i){return e.x-i.x}function ud(e,i){if(i=function(f,v){var w,I=v,L=f.x,W=f.y,oe=-1/0;do{if(W<=I.y&&W>=I.next.y&&I.next.y!==I.y){var ae=I.x+(W-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(ae<=L&&ae>oe){if(oe=ae,ae===L){if(W===I.y)return I;if(W===I.next.y)return I.next}w=I.x<I.next.x?I:I.next}}I=I.next}while(I!==v);if(!w)return null;if(L===oe)return w;var pe,ve=w,Ce=w.x,$e=w.y,Ze=1/0;I=w;do{L>=I.x&&I.x>=Ce&&L!==I.x&&ul(W<$e?L:oe,W,Ce,$e,W<$e?oe:L,W,I.x,I.y)&&(pe=Math.abs(W-I.y)/(L-I.x),pd(I,f)&&(pe<Ze||pe===Ze&&(I.x>w.x||I.x===w.x&&Wc(w,I)))&&(w=I,Ze=pe)),I=I.next}while(I!==ve);return w}(e,i)){var a=fd(i,e);Cc(i,i.next),Cc(a,a.next)}}function Wc(e,i){return oo(e.prev,e,i.prev)<0&&oo(i.next,e,e.next)<0}function oc(e,i,a,f,v){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-a)*v)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-f)*v)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function _s(e){var i=e,a=e;do{(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next}while(i!==e);return a}function ul(e,i,a,f,v,w,I,L){return(v-I)*(i-L)-(e-I)*(w-L)>=0&&(e-I)*(f-L)-(a-I)*(i-L)>=0&&(a-I)*(w-L)-(v-I)*(f-L)>=0}function cu(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!function(a,f){var v=a;do{if(v.i!==a.i&&v.next.i!==a.i&&v.i!==f.i&&v.next.i!==f.i&&dd(v,v.next,a,f))return!0;v=v.next}while(v!==a);return!1}(e,i)&&(pd(e,i)&&pd(i,e)&&function(a,f){var v=a,w=!1,I=(a.x+f.x)/2,L=(a.y+f.y)/2;do{v.y>L!=v.next.y>L&&v.next.y!==v.y&&I<(v.next.x-v.x)*(L-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next}while(v!==a);return w}(e,i)&&(oo(e.prev,e,i.prev)||oo(e,i.prev,i))||sc(e,i)&&oo(e.prev,e,e.next)>0&&oo(i.prev,i,i.next)>0)}function oo(e,i,a){return(i.y-e.y)*(a.x-i.x)-(i.x-e.x)*(a.y-i.y)}function sc(e,i){return e.x===i.x&&e.y===i.y}function dd(e,i,a,f){var v=hd(oo(e,i,a)),w=hd(oo(e,i,f)),I=hd(oo(a,f,e)),L=hd(oo(a,f,i));return v!==w&&I!==L||!(0!==v||!lh(e,a,i))||!(0!==w||!lh(e,f,i))||!(0!==I||!lh(a,e,f))||!(0!==L||!lh(a,i,f))}function lh(e,i,a){return i.x<=Math.max(e.x,a.x)&&i.x>=Math.min(e.x,a.x)&&i.y<=Math.max(e.y,a.y)&&i.y>=Math.min(e.y,a.y)}function hd(e){return e>0?1:e<0?-1:0}function pd(e,i){return oo(e.prev,e,e.next)<0?oo(e,i,e.next)>=0&&oo(e,e.prev,i)>=0:oo(e,i,e.prev)<0||oo(e,e.next,i)<0}function fd(e,i){var a=new gd(e.i,e.x,e.y),f=new gd(i.i,i.x,i.y),v=e.next,w=i.prev;return e.next=i,i.prev=e,a.next=v,v.prev=a,f.next=a,a.prev=f,w.next=f,f.prev=w,f}function ch(e,i,a,f){var v=new gd(e,i,a);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function md(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gd(e,i,a){this.i=e,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uu(e,i,a,f){for(var v=0,w=i,I=a-f;w<a;w+=f)v+=(e[I]-e[w])*(e[w+1]+e[I+1]),I=w;return v}function zu(e,i,a,f,v){!function w(I,L,W,oe,ae){for(;oe>W;){if(oe-W>600){var pe=oe-W+1,ve=L-W+1,Ce=Math.log(pe),$e=.5*Math.exp(2*Ce/3),Ze=.5*Math.sqrt(Ce*$e*(pe-$e)/pe)*(ve-pe/2<0?-1:1);w(I,L,Math.max(W,Math.floor(L-ve*$e/pe+Ze)),Math.min(oe,Math.floor(L+(pe-ve)*$e/pe+Ze)),ae)}var ot=I[L],nt=W,mt=oe;for(Bc(I,W,L),ae(I[oe],ot)>0&&Bc(I,W,oe);nt<mt;){for(Bc(I,nt,mt),nt++,mt--;ae(I[nt],ot)<0;)nt++;for(;ae(I[mt],ot)>0;)mt--}0===ae(I[W],ot)?Bc(I,W,mt):Bc(I,++mt,oe),mt<=L&&(W=mt+1),L<=mt&&(oe=mt-1)}}(e,i,a||0,f||e.length-1,v||up)}function Bc(e,i,a){var f=e[i];e[i]=e[a],e[a]=f}function up(e,i){return e<i?-1:e>i?1:0}function uh(e,i){var a=e.length;if(a<=1)return[e];for(var f,v,w=[],I=0;I<a;I++){var L=wn(e[I]);0!==L&&(e[I].area=Math.abs(L),void 0===v&&(v=L<0),v===L<0?(f&&w.push(f),f=[e[I]]):f.push(e[I]))}if(f&&w.push(f),i>1)for(var W=0;W<w.length;W++)w[W].length<=i||(zu(w[W],i,1,w[W].length-1,Vh),w[W]=w[W].slice(0,i));return w}function Vh(e,i){return i.area-e.area}function Ud(e,i,a){for(var f=a.patternDependencies,v=!1,w=0,I=i;w<I.length;w+=1){var L=I[w].paint.get(e+"-pattern");L.isConstant()||(v=!0);var W=L.constantOr(null);W&&(v=!0,f[W.to]=!0,f[W.from]=!0)}return v}function dh(e,i,a,f,v){for(var w=v.patternDependencies,I=0,L=i;I<L.length;I+=1){var W=L[I],oe=W.paint.get(e+"-pattern").value;if("constant"!==oe.kind){var ae=oe.evaluate({zoom:f-1},a,{},v.availableImages),pe=oe.evaluate({zoom:f},a,{},v.availableImages),ve=oe.evaluate({zoom:f+1},a,{},v.availableImages);pe=pe&&pe.name?pe.name:pe,ve=ve&&ve.name?ve.name:ve,w[ae=ae&&ae.name?ae.name:ae]=!0,w[pe]=!0,w[ve]=!0,a.patterns[W.id]={min:ae,mid:pe,max:ve}}}return a}wc.deviation=function(e,i,a,f){var v=i&&i.length,w=Math.abs(uu(e,0,v?i[0]*a:e.length,a));if(v)for(var I=0,L=i.length;I<L;I++)w-=Math.abs(uu(e,i[I]*a,I<L-1?i[I+1]*a:e.length,a));var W=0;for(I=0;I<f.length;I+=3){var oe=f[I]*a,ae=f[I+1]*a,pe=f[I+2]*a;W+=Math.abs((e[oe]-e[pe])*(e[ae+1]-e[oe+1])-(e[oe]-e[ae])*(e[pe+1]-e[oe+1]))}return 0===w&&0===W?0:Math.abs((W-w)/w)},wc.flatten=function(e){for(var i=e[0][0].length,a={vertices:[],holes:[],dimensions:i},f=0,v=0;v<e.length;v++){for(var w=0;w<e[v].length;w++)for(var I=0;I<i;I++)a.vertices.push(e[v][w][I]);v>0&&a.holes.push(f+=e[v-1].length)}return a},Al.default=sh;var Sa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new qo,this.indexArray2=new su,this.programConfigurations=new Jn(e.layers,e.zoom),this.segments=new M,this.segments2=new M,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Sa.prototype.populate=function(e,i,a){this.hasPattern=Ud("fill",this.layers,i);for(var f=this.layers[0].layout.get("fill-sort-key"),v=[],w=0,I=e;w<I.length;w+=1){var L=I[w],W=L.feature,oe=L.id,ae=L.index,pe=L.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,Ce=po(W,ve);if(this.layers[0]._featureFilter.filter(new _i(this.zoom),Ce,a)){var $e=f?f.evaluate(Ce,{},a,i.availableImages):void 0,Ze={id:oe,properties:W.properties,type:W.type,sourceLayerIndex:pe,index:ae,geometry:ve?Ce.geometry:$r(W),patterns:{},sortKey:$e};v.push(Ze)}}f&&v.sort(function(an,dn){return an.sortKey-dn.sortKey});for(var ot=0,nt=v;ot<nt.length;ot+=1){var mt=nt[ot],gt=mt.geometry,wt=mt.index,Et=mt.sourceLayerIndex;if(this.hasPattern){var $t=dh("fill",this.layers,mt,this.zoom,i);this.patternFeatures.push($t)}else this.addFeature(mt,gt,wt,a,{});i.featureIndex.insert(e[wt].feature,gt,wt,Et,this.index)}},Sa.prototype.update=function(e,i,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a)},Sa.prototype.addFeatures=function(e,i,a){for(var f=0,v=this.patternFeatures;f<v.length;f+=1){var w=v[f];this.addFeature(w,w.geometry,w.index,i,a)}},Sa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Sa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,oh),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Sa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Sa.prototype.addFeature=function(e,i,a,f,v){for(var w=0,I=uh(i,500);w<I.length;w+=1){for(var L=I[w],W=0,oe=0,ae=L;oe<ae.length;oe+=1)W+=ae[oe].length;for(var pe=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray),ve=pe.vertexLength,Ce=[],$e=[],Ze=0,ot=L;Ze<ot.length;Ze+=1){var nt=ot[Ze];if(0!==nt.length){nt!==L[0]&&$e.push(Ce.length/2);var mt=this.segments2.prepareSegment(nt.length,this.layoutVertexArray,this.indexArray2),gt=mt.vertexLength;this.layoutVertexArray.emplaceBack(nt[0].x,nt[0].y),this.indexArray2.emplaceBack(gt+nt.length-1,gt),Ce.push(nt[0].x),Ce.push(nt[0].y);for(var wt=1;wt<nt.length;wt++)this.layoutVertexArray.emplaceBack(nt[wt].x,nt[wt].y),this.indexArray2.emplaceBack(gt+wt-1,gt+wt),Ce.push(nt[wt].x),Ce.push(nt[wt].y);mt.vertexLength+=nt.length,mt.primitiveLength+=nt.length}}for(var Et=Al(Ce,$e),$t=0;$t<Et.length;$t+=3)this.indexArray.emplaceBack(ve+Et[$t],ve+Et[$t+1],ve+Et[$t+2]);pe.vertexLength+=W,pe.primitiveLength+=Et.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,v,f)},G("FillBucket",Sa,{omit:["layers","patternFeatures"]});var Kc=new Ho({"fill-sort-key":new _n(xe.layout_fill["fill-sort-key"])}),jd={paint:new Ho({"fill-antialias":new Sn(xe.paint_fill["fill-antialias"]),"fill-opacity":new _n(xe.paint_fill["fill-opacity"]),"fill-color":new _n(xe.paint_fill["fill-color"]),"fill-outline-color":new _n(xe.paint_fill["fill-outline-color"]),"fill-translate":new Sn(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Sn(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ec(xe.paint_fill["fill-pattern"])}),layout:Kc},dp=function(e){function i(a){e.call(this,a,jd)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(a,f){e.prototype.recalculate.call(this,a,f);var v=this.paint._values["fill-outline-color"];"constant"===v.value.kind&&void 0===v.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(a){return new Sa(a)},i.prototype.queryRadius=function(){return gs(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(a,f,v,w,I,L,W){return Ta(ic(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,W),w)},i.prototype.isTileClipped=function(){return!0},i}(ua),Jc=wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Vu=Ec;function Ec(e,i,a,f,v){this.properties={},this.extent=a,this.type=0,this._pbf=e,this._geometry=-1,this._keys=f,this._values=v,e.readFields(hh,this,i)}function hh(e,i,a){1==e?i.id=a.readVarint():2==e?function(f,v){for(var w=f.readVarint()+f.pos;f.pos<w;){var I=v._keys[f.readVarint()],L=v._values[f.readVarint()];v.properties[I]=L}}(a,i):3==e?i.type=a.readVarint():4==e&&(i._geometry=a.pos)}function Uu(e){for(var i,a,f=0,v=0,w=e.length,I=w-1;v<w;I=v++)f+=((a=e[I]).x-(i=e[v]).x)*(i.y+a.y);return f}Ec.types=["Unknown","Point","LineString","Polygon"],Ec.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,a=e.readVarint()+e.pos,f=1,v=0,w=0,I=0,L=[];e.pos<a;){if(v<=0){var W=e.readVarint();f=7&W,v=W>>3}if(v--,1===f||2===f)w+=e.readSVarint(),I+=e.readSVarint(),1===f&&(i&&L.push(i),i=[]),i.push(new U(w,I));else{if(7!==f)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&L.push(i),L},Ec.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,a=1,f=0,v=0,w=0,I=1/0,L=-1/0,W=1/0,oe=-1/0;e.pos<i;){if(f<=0){var ae=e.readVarint();a=7&ae,f=ae>>3}if(f--,1===a||2===a)(v+=e.readSVarint())<I&&(I=v),v>L&&(L=v),(w+=e.readSVarint())<W&&(W=w),w>oe&&(oe=w);else if(7!==a)throw new Error("unknown command "+a)}return[I,W,L,oe]},Ec.prototype.toGeoJSON=function(e,i,a){var f,v,w=this.extent*Math.pow(2,a),I=this.extent*e,L=this.extent*i,W=this.loadGeometry(),oe=Ec.types[this.type];function ae(Ce){for(var $e=0;$e<Ce.length;$e++){var Ze=Ce[$e];Ce[$e]=[360*(Ze.x+I)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ze.y+L)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var pe=[];for(f=0;f<W.length;f++)pe[f]=W[f][0];ae(W=pe);break;case 2:for(f=0;f<W.length;f++)ae(W[f]);break;case 3:for(W=function(Ce){var $e=Ce.length;if($e<=1)return[Ce];for(var Ze,ot,nt=[],mt=0;mt<$e;mt++){var gt=Uu(Ce[mt]);0!==gt&&(void 0===ot&&(ot=gt<0),ot===gt<0?(Ze&&nt.push(Ze),Ze=[Ce[mt]]):Ze.push(Ce[mt]))}return Ze&&nt.push(Ze),nt}(W),f=0;f<W.length;f++)for(v=0;v<W[f].length;v++)ae(W[f][v])}1===W.length?W=W[0]:oe="Multi"+oe;var ve={type:"Feature",geometry:{type:oe,coordinates:W},properties:this.properties};return"id"in this&&(ve.id=this.id),ve};var Uh=ph;function ph(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(qc,this,i),this.length=this._features.length}function qc(e,i,a){15===e?i.version=a.readVarint():1===e?i.name=a.readString():5===e?i.extent=a.readVarint():2===e?i._features.push(a.pos):3===e?i._keys.push(a.readString()):4===e&&i._values.push(function(f){for(var v=null,w=f.readVarint()+f.pos;f.pos<w;){var I=f.readVarint()>>3;v=1===I?f.readString():2===I?f.readFloat():3===I?f.readDouble():4===I?f.readVarint64():5===I?f.readVarint():6===I?f.readSVarint():7===I?f.readBoolean():null}return v}(a))}function jh(e,i,a){if(3===e){var f=new Uh(a,a.readVarint()+a.pos);f.length&&(i[f.name]=f)}}ph.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new Vu(this._pbf,i,this.extent,this._keys,this._values)};var du={VectorTile:function(e,i){this.layers=e.readFields(jh,{},i)},VectorTileFeature:Vu,VectorTileLayer:Uh},hu=du.VectorTileFeature.types,_d=Math.pow(2,13);function yd(e,i,a,f,v,w,I,L){e.emplaceBack(i,a,2*Math.floor(f*_d)+I,v*_d*2,w*_d*2,Math.round(L))}var Zl=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Os,this.indexArray=new qo,this.programConfigurations=new Jn(e.layers,e.zoom),this.segments=new M,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function ju(e,i){return e.x===i.x&&(e.x<0||e.x>8192)||e.y===i.y&&(e.y<0||e.y>8192)}Zl.prototype.populate=function(e,i,a){this.features=[],this.hasPattern=Ud("fill-extrusion",this.layers,i);for(var f=0,v=e;f<v.length;f+=1){var w=v[f],I=w.feature,L=w.id,W=w.index,oe=w.sourceLayerIndex,ae=this.layers[0]._featureFilter.needGeometry,pe=po(I,ae);if(this.layers[0]._featureFilter.filter(new _i(this.zoom),pe,a)){var ve={id:L,sourceLayerIndex:oe,index:W,geometry:ae?pe.geometry:$r(I),properties:I.properties,type:I.type,patterns:{}};this.hasPattern?this.features.push(dh("fill-extrusion",this.layers,ve,this.zoom,i)):this.addFeature(ve,ve.geometry,W,a,{}),i.featureIndex.insert(I,ve.geometry,W,oe,this.index,!0)}}},Zl.prototype.addFeatures=function(e,i,a){for(var f=0,v=this.features;f<v.length;f+=1){var w=v[f];this.addFeature(w,w.geometry,w.index,i,a)}},Zl.prototype.update=function(e,i,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a)},Zl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Zl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zl.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Zl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zl.prototype.addFeature=function(e,i,a,f,v){for(var w=0,I=uh(i,500);w<I.length;w+=1){for(var L=I[w],W=0,oe=0,ae=L;oe<ae.length;oe+=1)W+=ae[oe].length;for(var pe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ve=0,Ce=L;ve<Ce.length;ve+=1){var $e=Ce[ve];if(0!==$e.length&&!((Bi=$e).every(function(yi){return yi.x<0})||Bi.every(function(yi){return yi.x>8192})||Bi.every(function(yi){return yi.y<0})||Bi.every(function(yi){return yi.y>8192})))for(var Ze=0,ot=0;ot<$e.length;ot++){var nt=$e[ot];if(ot>=1){var mt=$e[ot-1];if(!ju(nt,mt)){pe.vertexLength+4>M.MAX_VERTEX_ARRAY_LENGTH&&(pe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gt=nt.sub(mt)._perp()._unit(),wt=mt.dist(nt);Ze+wt>32768&&(Ze=0),yd(this.layoutVertexArray,nt.x,nt.y,gt.x,gt.y,0,0,Ze),yd(this.layoutVertexArray,nt.x,nt.y,gt.x,gt.y,0,1,Ze),yd(this.layoutVertexArray,mt.x,mt.y,gt.x,gt.y,0,0,Ze+=wt),yd(this.layoutVertexArray,mt.x,mt.y,gt.x,gt.y,0,1,Ze);var Et=pe.vertexLength;this.indexArray.emplaceBack(Et,Et+2,Et+1),this.indexArray.emplaceBack(Et+1,Et+2,Et+3),pe.vertexLength+=4,pe.primitiveLength+=2}}}}if(pe.vertexLength+W>M.MAX_VERTEX_ARRAY_LENGTH&&(pe=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray)),"Polygon"===hu[e.type]){for(var $t=[],an=[],dn=pe.vertexLength,Un=0,xn=L;Un<xn.length;Un+=1){var Ln=xn[Un];if(0!==Ln.length){Ln!==L[0]&&an.push($t.length/2);for(var mn=0;mn<Ln.length;mn++){var Mi=Ln[mn];yd(this.layoutVertexArray,Mi.x,Mi.y,0,0,1,1,0),$t.push(Mi.x),$t.push(Mi.y)}}}for(var ni=Al($t,an),kn=0;kn<ni.length;kn+=3)this.indexArray.emplaceBack(dn+ni[kn],dn+ni[kn+2],dn+ni[kn+1]);pe.primitiveLength+=ni.length/3,pe.vertexLength+=W}}var Bi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,v,f)},G("FillExtrusionBucket",Zl,{omit:["layers","features"]});var pu={paint:new Ho({"fill-extrusion-opacity":new Sn(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _n(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sn(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sn(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ec(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _n(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _n(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sn(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Hh=function(e){function i(a){e.call(this,a,pu)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.createBucket=function(a){return new Zl(a)},i.prototype.queryRadius=function(){return gs(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(a,f,v,w,I,L,W,oe){var ae=ic(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,W),pe=this.paint.get("fill-extrusion-height").evaluate(f,v),ve=this.paint.get("fill-extrusion-base").evaluate(f,v),Ce=function(Ze,ot,nt,mt){for(var gt=[],wt=0,Et=Ze;wt<Et.length;wt+=1){var $t=Et[wt],an=[$t.x,$t.y,0,1];Bd(an,an,ot),gt.push(new U(an[0]/an[3],an[1]/an[3]))}return gt}(ae,oe),$e=function(Ze,ot,nt,mt){for(var gt=[],wt=[],Et=mt[8]*ot,$t=mt[9]*ot,an=mt[10]*ot,dn=mt[11]*ot,Un=mt[8]*nt,xn=mt[9]*nt,Ln=mt[10]*nt,mn=mt[11]*nt,Mi=0,ni=Ze;Mi<ni.length;Mi+=1){for(var kn=[],Bi=[],yi=0,rr=ni[Mi];yi<rr.length;yi+=1){var Gn=rr[yi],pr=Gn.x,fo=Gn.y,$o=mt[0]*pr+mt[4]*fo+mt[12],$n=mt[1]*pr+mt[5]*fo+mt[13],ao=mt[2]*pr+mt[6]*fo+mt[14],To=mt[3]*pr+mt[7]*fo+mt[15],ss=ao+an,ys=To+dn,fa=$o+Un,vs=$n+xn,Oa=ao+Ln,lo=To+mn,Ns=new U(($o+Et)/ys,($n+$t)/ys);Ns.z=ss/ys,kn.push(Ns);var Gi=new U(fa/lo,vs/lo);Gi.z=Oa/lo,Bi.push(Gi)}gt.push(kn),wt.push(Bi)}return[gt,wt]}(w,ve,pe,oe);return function(Ze,ot,nt){var mt=1/0;Ta(nt,ot)&&(mt=vd(nt,ot[0]));for(var gt=0;gt<ot.length;gt++)for(var wt=ot[gt],Et=Ze[gt],$t=0;$t<wt.length-1;$t++){var an=wt[$t],dn=[an,wt[$t+1],Et[$t+1],Et[$t],an];Ea(nt,dn)&&(mt=Math.min(mt,vd(nt,dn)))}return mt!==1/0&&mt}($e[0],$e[1],Ce)},i}(ua);function Hu(e,i){return e.x*i.x+e.y*i.y}function vd(e,i){if(1===e.length){for(var a,f=0,v=i[f++];!a||v.equals(a);)if(!(a=i[f++]))return 1/0;for(;f<i.length;f++){var w=i[f],I=e[0],L=a.sub(v),W=w.sub(v),oe=I.sub(v),ae=Hu(L,L),pe=Hu(L,W),ve=Hu(W,W),Ce=Hu(oe,L),$e=Hu(oe,W),Ze=ae*ve-pe*pe,ot=(ve*Ce-pe*$e)/Ze,nt=(ae*$e-pe*Ce)/Ze,mt=v.z*(1-ot-nt)+a.z*ot+w.z*nt;if(isFinite(mt))return mt}return 1/0}for(var gt=1/0,wt=0,Et=i;wt<Et.length;wt+=1)gt=Math.min(gt,Et[wt].z);return gt}var Hd=wo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Qc=wo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Gh=du.VectorTileFeature.types,Gu=Math.cos(Math.PI/180*37.5),fh=Math.pow(2,14)/.5,Ps=function(e){var i=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(a){i.gradients[a.id]={}}),this.layoutVertexArray=new Gr,this.layoutVertexArray2=new ll,this.indexArray=new qo,this.programConfigurations=new Jn(e.layers,e.zoom),this.segments=new M,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};Ps.prototype.populate=function(e,i,a){this.hasPattern=Ud("line",this.layers,i);for(var f=this.layers[0].layout.get("line-sort-key"),v=[],w=0,I=e;w<I.length;w+=1){var L=I[w],W=L.feature,oe=L.id,ae=L.index,pe=L.sourceLayerIndex,ve=this.layers[0]._featureFilter.needGeometry,Ce=po(W,ve);if(this.layers[0]._featureFilter.filter(new _i(this.zoom),Ce,a)){var $e=f?f.evaluate(Ce,{},a):void 0,Ze={id:oe,properties:W.properties,type:W.type,sourceLayerIndex:pe,index:ae,geometry:ve?Ce.geometry:$r(W),patterns:{},sortKey:$e};v.push(Ze)}}f&&v.sort(function(an,dn){return an.sortKey-dn.sortKey});for(var ot=0,nt=v;ot<nt.length;ot+=1){var mt=nt[ot],gt=mt.geometry,wt=mt.index,Et=mt.sourceLayerIndex;if(this.hasPattern){var $t=dh("line",this.layers,mt,this.zoom,i);this.patternFeatures.push($t)}else this.addFeature(mt,gt,wt,a,{});i.featureIndex.insert(e[wt].feature,gt,wt,Et,this.index)}},Ps.prototype.update=function(e,i,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,i,this.stateDependentLayers,a)},Ps.prototype.addFeatures=function(e,i,a){for(var f=0,v=this.patternFeatures;f<v.length;f+=1){var w=v[f];this.addFeature(w,w.geometry,w.index,i,a)}},Ps.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Qc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ps.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ps.prototype.addFeature=function(e,i,a,f,v){var w=this.layers[0].layout,I=w.get("line-join").evaluate(e,{}),L=w.get("line-cap"),W=w.get("line-miter-limit"),oe=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var ae=0,pe=i;ae<pe.length;ae+=1)this.addLine(pe[ae],e,I,L,W,oe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,v,f)},Ps.prototype.addLine=function(e,i,a,f,v,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var I=0;I<e.length-1;I++)this.totalDistance+=e[I].dist(e[I+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var L="Polygon"===Gh[i.type],W=e.length;W>=2&&e[W-1].equals(e[W-2]);)W--;for(var oe=0;oe<W-1&&e[oe].equals(e[oe+1]);)oe++;if(!(W<(L?3:2))){"bevel"===a&&(v=1.05);var ae,pe=this.overscaling<=16?122880/(512*this.overscaling):0,ve=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray),Ce=void 0,$e=void 0,Ze=void 0,ot=void 0;this.e1=this.e2=-1,L&&(ot=e[oe].sub(ae=e[W-2])._unit()._perp());for(var nt=oe;nt<W;nt++)if(!($e=nt===W-1?L?e[oe+1]:void 0:e[nt+1])||!e[nt].equals($e)){ot&&(Ze=ot),ae&&(Ce=ae),ae=e[nt],ot=$e?$e.sub(ae)._unit()._perp():Ze;var mt=(Ze=Ze||ot).add(ot);0===mt.x&&0===mt.y||mt._unit();var gt=Ze.x*ot.x+Ze.y*ot.y,wt=mt.x*ot.x+mt.y*ot.y,Et=0!==wt?1/wt:1/0,$t=2*Math.sqrt(2-2*wt),an=wt<Gu&&Ce&&$e,dn=Ze.x*ot.y-Ze.y*ot.x>0;if(an&&nt>oe){var Un=ae.dist(Ce);if(Un>2*pe){var xn=ae.sub(ae.sub(Ce)._mult(pe/Un)._round());this.updateDistance(Ce,xn),this.addCurrentVertex(xn,Ze,0,0,ve),Ce=xn}}var Ln=Ce&&$e,mn=Ln?a:L?"butt":f;if(Ln&&"round"===mn&&(Et<w?mn="miter":Et<=2&&(mn="fakeround")),"miter"===mn&&Et>v&&(mn="bevel"),"bevel"===mn&&(Et>2&&(mn="flipbevel"),Et<v&&(mn="miter")),Ce&&this.updateDistance(Ce,ae),"miter"===mn)mt._mult(Et),this.addCurrentVertex(ae,mt,0,0,ve);else if("flipbevel"===mn){if(Et>100)mt=ot.mult(-1);else{var Mi=Et*Ze.add(ot).mag()/Ze.sub(ot).mag();mt._perp()._mult(Mi*(dn?-1:1))}this.addCurrentVertex(ae,mt,0,0,ve),this.addCurrentVertex(ae,mt.mult(-1),0,0,ve)}else if("bevel"===mn||"fakeround"===mn){var ni=-Math.sqrt(Et*Et-1),kn=dn?ni:0,Bi=dn?0:ni;if(Ce&&this.addCurrentVertex(ae,Ze,kn,Bi,ve),"fakeround"===mn)for(var yi=Math.round(180*$t/Math.PI/20),rr=1;rr<yi;rr++){var Gn=rr/yi;if(.5!==Gn){var pr=Gn-.5;Gn+=Gn*pr*(Gn-1)*((1.0904+gt*(gt*(3.55645-1.43519*gt)-3.2452))*pr*pr+(.848013+gt*(.215638*gt-1.06021)))}var fo=ot.sub(Ze)._mult(Gn)._add(Ze)._unit()._mult(dn?-1:1);this.addHalfVertex(ae,fo.x,fo.y,!1,dn,0,ve)}$e&&this.addCurrentVertex(ae,ot,-kn,-Bi,ve)}else if("butt"===mn)this.addCurrentVertex(ae,mt,0,0,ve);else if("square"===mn){var $o=Ce?1:-1;this.addCurrentVertex(ae,mt,$o,$o,ve)}else"round"===mn&&(Ce&&(this.addCurrentVertex(ae,Ze,0,0,ve),this.addCurrentVertex(ae,Ze,1,1,ve,!0)),$e&&(this.addCurrentVertex(ae,ot,-1,-1,ve,!0),this.addCurrentVertex(ae,ot,0,0,ve)));if(an&&nt<W-1){var $n=ae.dist($e);if($n>2*pe){var ao=ae.add($e.sub(ae)._mult(pe/$n)._round());this.updateDistance(ae,ao),this.addCurrentVertex(ao,ot,0,0,ve),ae=ao}}}}},Ps.prototype.addCurrentVertex=function(e,i,a,f,v,w){void 0===w&&(w=!1);var I=i.y*f-i.x,L=-i.y-i.x*f;this.addHalfVertex(e,i.x+i.y*a,i.y-i.x*a,w,!1,a,v),this.addHalfVertex(e,I,L,w,!0,-f,v),this.distance>fh/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,i,a,f,v,w))},Ps.prototype.addHalfVertex=function(e,i,a,f,v,w,I){var L=.5*(this.lineClips?this.scaledDistance*(fh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(f?1:0),(e.y<<1)+(v?1:0),Math.round(63*i)+128,Math.round(63*a)+128,1+(0===w?0:w<0?-1:1)|(63&L)<<2,L>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var W=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),I.primitiveLength++),v?this.e2=W:this.e1=W},Ps.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ps.prototype.updateDistance=function(e,i){this.distance+=e.dist(i),this.updateScaledDistance()},G("LineBucket",Ps,{omit:["layers","patternFeatures"]});var mh=new Ho({"line-cap":new Sn(xe.layout_line["line-cap"]),"line-join":new _n(xe.layout_line["line-join"]),"line-miter-limit":new Sn(xe.layout_line["line-miter-limit"]),"line-round-limit":new Sn(xe.layout_line["line-round-limit"]),"line-sort-key":new _n(xe.layout_line["line-sort-key"])}),fu={paint:new Ho({"line-opacity":new _n(xe.paint_line["line-opacity"]),"line-color":new _n(xe.paint_line["line-color"]),"line-translate":new Sn(xe.paint_line["line-translate"]),"line-translate-anchor":new Sn(xe.paint_line["line-translate-anchor"]),"line-width":new _n(xe.paint_line["line-width"]),"line-gap-width":new _n(xe.paint_line["line-gap-width"]),"line-offset":new _n(xe.paint_line["line-offset"]),"line-blur":new _n(xe.paint_line["line-blur"]),"line-dasharray":new xo(xe.paint_line["line-dasharray"]),"line-pattern":new ec(xe.paint_line["line-pattern"]),"line-gradient":new Js(xe.paint_line["line-gradient"])}),layout:mh},Tc=new(function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(a,f){return f=new _i(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),e.prototype.possiblyEvaluate.call(this,a,f)},i.prototype.evaluate=function(a,f,v,w){return f=De({},f,{zoom:Math.floor(f.zoom)}),e.prototype.evaluate.call(this,a,f,v,w)},i}(_n))(fu.paint.properties["line-width"].specification);Tc.useIntegerZoom=!0;var zc=function(e){function i(a){e.call(this,a,fu),this.gradientVersion=0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(a){"line-gradient"===a&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Oo,this.gradientVersion=(this.gradientVersion+1)%Pe)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(a,f){e.prototype.recalculate.call(this,a,f),this.paint._values["line-floorwidth"]=Tc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)},i.prototype.createBucket=function(a){return new Ps(a)},i.prototype.queryRadius=function(a){var f=a,v=gh($l("line-width",this,f),$l("line-gap-width",this,f)),w=$l("line-offset",this,f);return v/2+Math.abs(w)+gs(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(a,f,v,w,I,L,W){var oe=ic(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,W),ae=W/2*gh(this.paint.get("line-width").evaluate(f,v),this.paint.get("line-gap-width").evaluate(f,v)),pe=this.paint.get("line-offset").evaluate(f,v);return pe&&(w=function(ve,Ce){for(var $e=[],Ze=new U(0,0),ot=0;ot<ve.length;ot++){for(var nt=ve[ot],mt=[],gt=0;gt<nt.length;gt++){var wt=nt[gt],Et=nt[gt+1],$t=0===gt?Ze:wt.sub(nt[gt-1])._unit()._perp(),an=gt===nt.length-1?Ze:Et.sub(wt)._unit()._perp(),dn=$t._add(an)._unit();dn._mult(1/(dn.x*an.x+dn.y*an.y)),mt.push(dn._mult(Ce)._add(wt))}$e.push(mt)}return $e}(w,pe*W)),function(ve,Ce,$e){for(var Ze=0;Ze<Ce.length;Ze++){var ot=Ce[Ze];if(ve.length>=3)for(var nt=0;nt<ot.length;nt++)if(Sl(ve,ot[nt]))return!0;if(Ga(ve,ot,$e))return!0}return!1}(oe,w,ae)},i.prototype.isTileClipped=function(){return!0},i}(ua);function gh(e,i){return i>0?i+2*e:e}var $u=wo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_h=wo([{name:"a_projected_pos",components:3,type:"Float32"}],4),mu=(wo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Mc=(wo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yh=wo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hp(e,i,a){return e.sections.forEach(function(f){var v,I,L;f.text=(v=f.text,I=a,"uppercase"===(L=i.layout.get("text-transform").evaluate(I,{}))?v=v.toLocaleUpperCase():"lowercase"===L&&(v=v.toLocaleLowerCase()),zs.applyArabicShaping&&(v=zs.applyArabicShaping(v)),v)}),e}wo([{name:"triangle",components:3,type:"Uint16"}]),wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wo([{type:"Float32",name:"offsetX"}]),wo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Zu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Gd=function(e,i,a,f,v){var w,I,L=8*v-f-1,W=(1<<L)-1,oe=W>>1,ae=-7,pe=a?v-1:0,ve=a?-1:1,Ce=e[i+pe];for(pe+=ve,w=Ce&(1<<-ae)-1,Ce>>=-ae,ae+=L;ae>0;w=256*w+e[i+pe],pe+=ve,ae-=8);for(I=w&(1<<-ae)-1,w>>=-ae,ae+=f;ae>0;I=256*I+e[i+pe],pe+=ve,ae-=8);if(0===w)w=1-oe;else{if(w===W)return I?NaN:1/0*(Ce?-1:1);I+=Math.pow(2,f),w-=oe}return(Ce?-1:1)*I*Math.pow(2,w-f)},Yu=function(e,i,a,f,v,w){var I,L,W,oe=8*w-v-1,ae=(1<<oe)-1,pe=ae>>1,ve=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,Ce=f?0:w-1,$e=f?1:-1,Ze=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(L=isNaN(i)?1:0,I=ae):(I=Math.floor(Math.log(i)/Math.LN2),i*(W=Math.pow(2,-I))<1&&(I--,W*=2),(i+=I+pe>=1?ve/W:ve*Math.pow(2,1-pe))*W>=2&&(I++,W/=2),I+pe>=ae?(L=0,I=ae):I+pe>=1?(L=(i*W-1)*Math.pow(2,v),I+=pe):(L=i*Math.pow(2,pe-1)*Math.pow(2,v),I=0));v>=8;e[a+Ce]=255&L,Ce+=$e,L/=256,v-=8);for(I=I<<v|L,oe+=v;oe>0;e[a+Ce]=255&I,Ce+=$e,I/=256,oe-=8);e[a+Ce-$e]|=128*Ze},Xc=Ir;function Ir(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var gu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ia(e){return e.type===Ir.Bytes?e.readVarint()+e.pos:e.pos+1}function vh(e,i,a){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));a.realloc(f);for(var v=a.pos-1;v>=e;v--)a.buf[v+f]=a.buf[v]}function bh(e,i){for(var a=0;a<e.length;a++)i.writeVarint(e[a])}function ff(e,i){for(var a=0;a<e.length;a++)i.writeSVarint(e[a])}function pp(e,i){for(var a=0;a<e.length;a++)i.writeFloat(e[a])}function bd(e,i){for(var a=0;a<e.length;a++)i.writeDouble(e[a])}function $h(e,i){for(var a=0;a<e.length;a++)i.writeBoolean(e[a])}function xh(e,i){for(var a=0;a<e.length;a++)i.writeFixed32(e[a])}function _u(e,i){for(var a=0;a<e.length;a++)i.writeSFixed32(e[a])}function yu(e,i){for(var a=0;a<e.length;a++)i.writeFixed64(e[a])}function $d(e,i){for(var a=0;a<e.length;a++)i.writeSFixed64(e[a])}function xd(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function vu(e,i,a){e[a]=i,e[a+1]=i>>>8,e[a+2]=i>>>16,e[a+3]=i>>>24}function dl(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}function Zh(e,i,a){1===e&&a.readMessage(Yh,i)}function Yh(e,i,a){if(3===e){var f=a.readMessage(wh,{}),v=f.width,w=f.height,I=f.left,L=f.top,W=f.advance;i.push({id:f.id,bitmap:new rc({width:v+6,height:w+6},f.bitmap),metrics:{width:v,height:w,left:I,top:L,advance:W}})}}function wh(e,i,a){1===e?i.id=a.readVarint():2===e?i.bitmap=a.readBytes():3===e?i.width=a.readVarint():4===e?i.height=a.readVarint():5===e?i.left=a.readSVarint():6===e?i.top=a.readSVarint():7===e&&(i.advance=a.readVarint())}function Ch(e){for(var i=0,a=0,f=0,v=e;f<v.length;f+=1){var w=v[f];i+=w.w*w.h,a=Math.max(a,w.w)}e.sort(function(Ze,ot){return ot.h-Ze.h});for(var I=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}],L=0,W=0,oe=0,ae=e;oe<ae.length;oe+=1)for(var pe=ae[oe],ve=I.length-1;ve>=0;ve--){var Ce=I[ve];if(!(pe.w>Ce.w||pe.h>Ce.h)){if(pe.x=Ce.x,pe.y=Ce.y,W=Math.max(W,pe.y+pe.h),L=Math.max(L,pe.x+pe.w),pe.w===Ce.w&&pe.h===Ce.h){var $e=I.pop();ve<I.length&&(I[ve]=$e)}else pe.h===Ce.h?(Ce.x+=pe.w,Ce.w-=pe.w):pe.w===Ce.w?(Ce.y+=pe.h,Ce.h-=pe.h):(I.push({x:Ce.x+pe.w,y:Ce.y,w:Ce.w-pe.w,h:pe.h}),Ce.y+=pe.h,Ce.h-=pe.h);break}}return{w:L,h:W,fill:i/(L*W)||0}}Ir.prototype={destroy:function(){this.buf=null},readFields:function(e,i,a){for(a=a||this.length;this.pos<a;){var f=this.readVarint(),v=f>>3,w=this.pos;this.type=7&f,e(v,i,this),this.pos===w&&this.skip(f)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=xd(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=dl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xd(this.buf,this.pos)+4294967296*xd(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=xd(this.buf,this.pos)+4294967296*dl(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Gd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Gd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,a,f=this.buf;return i=127&(a=f[this.pos++]),a<128?i:(i|=(127&(a=f[this.pos++]))<<7,a<128?i:(i|=(127&(a=f[this.pos++]))<<14,a<128?i:(i|=(127&(a=f[this.pos++]))<<21,a<128?i:function(v,w,I){var L,W,oe=I.buf;if(L=(112&(W=oe[I.pos++]))>>4,W<128||(L|=(127&(W=oe[I.pos++]))<<3,W<128)||(L|=(127&(W=oe[I.pos++]))<<10,W<128)||(L|=(127&(W=oe[I.pos++]))<<17,W<128)||(L|=(127&(W=oe[I.pos++]))<<24,W<128)||(L|=(1&(W=oe[I.pos++]))<<31,W<128))return function Ol(e,i,a){return a?4294967296*i+(e>>>0):4294967296*(i>>>0)+(e>>>0)}(v,L,w);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(a=f[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,i=this.pos;return this.pos=e,e-i>=12&&gu?gu.decode(this.buf.subarray(i,e)):function(a,f,v){for(var w="",I=f;I<v;){var L,W,oe,ae=a[I],pe=null,ve=ae>239?4:ae>223?3:ae>191?2:1;if(I+ve>v)break;1===ve?ae<128&&(pe=ae):2===ve?128==(192&(L=a[I+1]))&&(pe=(31&ae)<<6|63&L)<=127&&(pe=null):3===ve?(W=a[I+2],128==(192&(L=a[I+1]))&&128==(192&W)&&((pe=(15&ae)<<12|(63&L)<<6|63&W)<=2047||pe>=55296&&pe<=57343)&&(pe=null)):4===ve&&(W=a[I+2],oe=a[I+3],128==(192&(L=a[I+1]))&&128==(192&W)&&128==(192&oe)&&((pe=(15&ae)<<18|(63&L)<<12|(63&W)<<6|63&oe)<=65535||pe>=1114112)&&(pe=null)),null===pe?(pe=65533,ve=1):pe>65535&&(pe-=65536,w+=String.fromCharCode(pe>>>10&1023|55296),pe=56320|1023&pe),w+=String.fromCharCode(pe),I+=ve}return w}(this.buf,i,e)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==Ir.Bytes)return e.push(this.readVarint(i));var a=Ia(this);for(e=e||[];this.pos<a;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSVarint());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ir.Bytes)return e.push(this.readBoolean());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFloat());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ir.Bytes)return e.push(this.readDouble());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed32());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed32());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed64());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed64());var i=Ia(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(i===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Ir.Fixed32)this.pos+=4;else{if(i!==Ir.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var a=new Uint8Array(i);a.set(this.buf),this.buf=a,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),vu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),vu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),vu(this.buf,-1&e,this.pos),vu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),vu(this.buf,-1&e,this.pos),vu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(i,a){var f,v,w,L;if(i>=0?(f=i%4294967296|0,v=i/4294967296|0):(v=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,v=v+1|0)),i>=0x10000000000000000||i<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),w=f,(L=a).buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,L.buf[L.pos]=127&(w>>>=7),function(w,I){var L=(7&w)<<4;I.buf[I.pos++]|=L|((w>>>=3)?128:0),w&&(I.buf[I.pos++]=127&w|((w>>>=7)?128:0),w&&(I.buf[I.pos++]=127&w|((w>>>=7)?128:0),w&&(I.buf[I.pos++]=127&w|((w>>>=7)?128:0),w&&(I.buf[I.pos++]=127&w|((w>>>=7)?128:0),w&&(I.buf[I.pos++]=127&w)))))}(v,a)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(f,v,w){for(var I,L,W=0;W<v.length;W++){if((I=v.charCodeAt(W))>55295&&I<57344){if(!L){I>56319||W+1===v.length?(f[w++]=239,f[w++]=191,f[w++]=189):L=I;continue}if(I<56320){f[w++]=239,f[w++]=191,f[w++]=189,L=I;continue}I=L-55296<<10|I-56320|65536,L=null}else L&&(f[w++]=239,f[w++]=191,f[w++]=189,L=null);I<128?f[w++]=I:(I<2048?f[w++]=I>>6|192:(I<65536?f[w++]=I>>12|224:(f[w++]=I>>18|240,f[w++]=I>>12&63|128),f[w++]=I>>6&63|128),f[w++]=63&I|128)}return w}(this.buf,e,this.pos);var a=this.pos-i;a>=128&&vh(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeFloat:function(e){this.realloc(4),Yu(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yu(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var a=0;a<i;a++)this.buf[this.pos++]=e[a]},writeRawMessage:function(e,i){this.pos++;var a=this.pos;e(i,this);var f=this.pos-a;f>=128&&vh(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f},writeMessage:function(e,i,a){this.writeTag(e,Ir.Bytes),this.writeRawMessage(i,a)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,bh,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,ff,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,$h,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,pp,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,bd,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,xh,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,_u,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,yu,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,$d,i)},writeBytesField:function(e,i){this.writeTag(e,Ir.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,Ir.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,Ir.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,Ir.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,Ir.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,Ir.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,Ir.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,Ir.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,Ir.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,Ir.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};var Wu=function(e,i){var a=i.pixelRatio,f=i.version,v=i.stretchX,w=i.stretchY,I=i.content;this.paddedRect=e,this.pixelRatio=a,this.stretchX=v,this.stretchY=w,this.content=I,this.version=f},hl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},hl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},hl.tlbr.get=function(){return this.tl.concat(this.br)},hl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Wu.prototype,hl);var ac=function(e,i){var a={},f={};this.haveRenderCallbacks=[];var v=[];this.addImages(e,a,v),this.addImages(i,f,v);var w=Ch(v),I=new Xs({width:w.w||1,height:w.h||1});for(var L in e){var W=e[L],oe=a[L].paddedRect;Xs.copy(W.data,I,{x:0,y:0},{x:oe.x+1,y:oe.y+1},W.data)}for(var ae in i){var pe=i[ae],ve=f[ae].paddedRect,Ce=ve.x+1,$e=ve.y+1,Ze=pe.data.width,ot=pe.data.height;Xs.copy(pe.data,I,{x:0,y:0},{x:Ce,y:$e},pe.data),Xs.copy(pe.data,I,{x:0,y:ot-1},{x:Ce,y:$e-1},{width:Ze,height:1}),Xs.copy(pe.data,I,{x:0,y:0},{x:Ce,y:$e+ot},{width:Ze,height:1}),Xs.copy(pe.data,I,{x:Ze-1,y:0},{x:Ce-1,y:$e},{width:1,height:ot}),Xs.copy(pe.data,I,{x:0,y:0},{x:Ce+Ze,y:$e},{width:1,height:ot})}this.image=I,this.iconPositions=a,this.patternPositions=f};ac.prototype.addImages=function(e,i,a){for(var f in e){var v=e[f],w={x:0,y:0,w:v.data.width+2,h:v.data.height+2};a.push(w),i[f]=new Wu(w,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}},ac.prototype.patchUpdatedImages=function(e,i){for(var a in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),i),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),i)},ac.prototype.patchUpdatedImage=function(e,i,a){if(e&&i&&e.version!==i.version){e.version=i.version;var f=e.tl;a.update(i.data,void 0,{x:f[0],y:f[1]})}},G("ImagePosition",Wu),G("ImageAtlas",ac);var Za={horizontal:1,vertical:2,horizontalOnly:3},Yl=function(){this.scale=1,this.fontStack="",this.imageName=null};Yl.forText=function(e,i){var a=new Yl;return a.scale=e||1,a.fontStack=i,a},Yl.forImage=function(e){var i=new Yl;return i.imageName=e,i};var js=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wd(e,i,a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze){var ot,nt=js.fromFeature(e,v);pe===Za.vertical&&nt.verticalizePunctuation();var mt=zs.processBidirectionalText,gt=zs.processStyledBidirectionalText;if(mt&&1===nt.sections.length){ot=[];for(var wt=0,Et=mt(nt.toString(),Ku(nt,oe,w,i,f,Ce,$e));wt<Et.length;wt+=1){var $t=Et[wt],an=new js;an.text=$t,an.sections=nt.sections;for(var dn=0;dn<$t.length;dn++)an.sectionIndex.push(0);ot.push(an)}}else if(gt){ot=[];for(var Un=0,xn=gt(nt.text,nt.sectionIndex,Ku(nt,oe,w,i,f,Ce,$e));Un<xn.length;Un+=1){var Ln=xn[Un],mn=new js;mn.text=Ln[0],mn.sectionIndex=Ln[1],mn.sections=nt.sections,ot.push(mn)}}else ot=function(kn,Bi){for(var yi=[],rr=kn.text,Gn=0,pr=0,fo=Bi;pr<fo.length;pr+=1){var $o=fo[pr];yi.push(kn.substring(Gn,$o)),Gn=$o}return Gn<rr.length&&yi.push(kn.substring(Gn,rr.length)),yi}(nt,Ku(nt,oe,w,i,f,Ce,$e));var Mi=[],ni={positionedLines:Mi,text:nt.toString(),top:ae[1],bottom:ae[1],left:ae[0],right:ae[0],writingMode:pe,iconsInText:!1,verticalizable:!1};return function(kn,Bi,yi,rr,Gn,pr,fo,$o,$n,ao,To,ss){for(var ys=0,fa=-17,vs=0,Oa=0,lo="right"===$o?1:"left"===$o?0:.5,Ns=0,Gi=0,Zr=Gn;Gi<Zr.length;Gi+=1){var Dr=Zr[Gi];Dr.trim();var er=Dr.getMaxScale(),Bo=24*(er-1),bs={positionedGlyphs:[],lineOffset:0};kn.positionedLines[Ns]=bs;var Jr=bs.positionedGlyphs,co=0;if(Dr.length()){for(var ia=0;ia<Dr.length();ia++){var fr=Dr.getSection(ia),iu=Dr.getSectionIndex(ia),uc=Dr.getCharCode(ia),Jl=0,Zo=null,dc=null,hc=null,ml=24,Tu=!($n===Za.horizontal||!To&&!bi(uc)||To&&(Zd[uc]||(J=uc,Wt.Arabic(J)||Wt["Arabic Supplement"](J)||Wt["Arabic Extended-A"](J)||Wt["Arabic Presentation Forms-A"](J)||Wt["Arabic Presentation Forms-B"](J))));if(fr.imageName){var Id=rr[fr.imageName];if(!Id)continue;hc=fr.imageName,kn.iconsInText=kn.iconsInText||!0,dc=Id.paddedRect;var gl=Id.displaySize;fr.scale=24*fr.scale/ss,Jl=Bo+(24-gl[1]*fr.scale),ml=(Zo={width:gl[0],height:gl[1],left:1,top:-3,advance:Tu?gl[1]:gl[0]}).advance;var ru=Tu?gl[0]*fr.scale-24*er:gl[1]*fr.scale-24*er;ru>0&&ru>co&&(co=ru)}else{var Mu=yi[fr.fontStack],P=Mu&&Mu[uc];if(P&&P.rect)dc=P.rect,Zo=P.metrics;else{var y=Bi[fr.fontStack],p=y&&y[uc];if(!p)continue;Zo=p.metrics}Jl=24*(er-fr.scale)}Tu?(kn.verticalizable=!0,Jr.push({glyph:uc,imageName:hc,x:ys,y:fa+Jl,vertical:Tu,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:iu,metrics:Zo,rect:dc}),ys+=ml*fr.scale+ao):(Jr.push({glyph:uc,imageName:hc,x:ys,y:fa+Jl,vertical:Tu,scale:fr.scale,fontStack:fr.fontStack,sectionIndex:iu,metrics:Zo,rect:dc}),ys+=Zo.advance*fr.scale+ao)}0!==Jr.length&&(vs=Math.max(ys-ao,vs),Wl(Jr,0,Jr.length-1,lo,co)),ys=0;var S=pr*er+co;bs.lineOffset=Math.max(co,Bo),fa+=S,Oa=Math.max(S,Oa),++Ns}else fa+=pr,++Ns}var J,me=fa- -17,rt=bu(fo),Bt=rt.horizontalAlign,Tn=rt.verticalAlign;(function(Rn,ri,Ki,ql,Ka,xs,_l,Ad,Qh){var Ih,_p=(ri-Ki)*Ka;Ih=xs!==_l?-Ad*ql- -17:(-ql*Qh+.5)*_l;for(var Xu=0,Su=Rn;Xu<Su.length;Xu+=1)for(var ed=0,td=Su[Xu].positionedGlyphs;ed<td.length;ed+=1){var Od=td[ed];Od.x+=_p,Od.y+=Ih}})(kn.positionedLines,lo,Bt,Tn,vs,Oa,pr,me,Gn.length),kn.top+=-Tn*me,kn.bottom=kn.top+me,kn.left+=-Bt*vs,kn.right=kn.left+vs}(ni,i,a,f,ot,I,L,W,pe,oe,ve,Ze),!function(kn){for(var Bi=0,yi=kn;Bi<yi.length;Bi+=1)if(0!==yi[Bi].positionedGlyphs.length)return!1;return!0}(Mi)&&ni}js.fromFeature=function(e,i){for(var a=new js,f=0;f<e.sections.length;f++){var v=e.sections[f];v.image?a.addImageSection(v):a.addTextSection(v,i)}return a},js.prototype.length=function(){return this.text.length},js.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},js.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},js.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},js.prototype.verticalizePunctuation=function(){this.text=function(e){for(var i="",a=0;a<e.length;a++){var f=e.charCodeAt(a+1)||null,v=e.charCodeAt(a-1)||null;i+=f&&vo(f)&&!Zu[e[a+1]]||v&&vo(v)&&!Zu[e[a-1]]||!Zu[e[a]]?e[a]:Zu[e[a]]}return i}(this.text)},js.prototype.trim=function(){for(var e=0,i=0;i<this.text.length&&Zd[this.text.charCodeAt(i)];i++)e++;for(var a=this.text.length,f=this.text.length-1;f>=0&&f>=e&&Zd[this.text.charCodeAt(f)];f--)a--;this.text=this.text.substring(e,a),this.sectionIndex=this.sectionIndex.slice(e,a)},js.prototype.substring=function(e,i){var a=new js;return a.text=this.text.substring(e,i),a.sectionIndex=this.sectionIndex.slice(e,i),a.sections=this.sections,a},js.prototype.toString=function(){return this.text},js.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(i,a){return Math.max(i,e.sections[a].scale)},0)},js.prototype.addTextSection=function(e,i){this.text+=e.text,this.sections.push(Yl.forText(e.scale,e.fontStack||i));for(var a=this.sections.length-1,f=0;f<e.text.length;++f)this.sectionIndex.push(a)},js.prototype.addImageSection=function(e){var i=e.image?e.image.name:"";if(0!==i.length){var a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(Yl.forImage(i)),this.sectionIndex.push(this.sections.length-1)):St("Reached maximum number of images 6401")}else St("Can't add FormattedSection with an empty image.")},js.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Zd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Aa={};function Yd(e,i,a,f,v,w){if(i.imageName){var I=f[i.imageName];return I?I.displaySize[0]*i.scale*24/w+v:0}var L=a[i.fontStack],W=L&&L[e];return W?W.metrics.advance*i.scale+v:0}function Dh(e,i,a,f){var v=Math.pow(e-i,2);return f?e<i?v/2:2*v:v+Math.abs(a)*a}function Wd(e,i,a){var f=0;return 10===e&&(f-=1e4),a&&(f+=150),40!==e&&65288!==e||(f+=50),41!==i&&65289!==i||(f+=50),f}function Wh(e,i,a,f,v,w){for(var I=null,L=Dh(i,a,v,w),W=0,oe=f;W<oe.length;W+=1){var ae=oe[W],pe=Dh(i-ae.x,a,v,w)+ae.badness;pe<=L&&(I=ae,L=pe)}return{index:e,x:i,priorBreak:I,badness:L}}function Ku(e,i,a,f,v,w,I){if("point"!==w)return[];if(!e)return[];for(var L,W=[],oe=function(ot,nt,mt,gt,wt,Et){for(var $t=0,an=0;an<ot.length();an++){var dn=ot.getSection(an);$t+=Yd(ot.getCharCode(an),dn,gt,wt,nt,Et)}return $t/Math.max(1,Math.ceil($t/mt))}(e,i,a,f,v,I),ae=e.text.indexOf("\u200b")>=0,pe=0,ve=0;ve<e.length();ve++){var Ce=e.getSection(ve),$e=e.getCharCode(ve);if(Zd[$e]||(pe+=Yd($e,Ce,f,v,i,I)),ve<e.length()-1){var Ze=!((L=$e)<11904||!(Wt["Bopomofo Extended"](L)||Wt.Bopomofo(L)||Wt["CJK Compatibility Forms"](L)||Wt["CJK Compatibility Ideographs"](L)||Wt["CJK Compatibility"](L)||Wt["CJK Radicals Supplement"](L)||Wt["CJK Strokes"](L)||Wt["CJK Symbols and Punctuation"](L)||Wt["CJK Unified Ideographs Extension A"](L)||Wt["CJK Unified Ideographs"](L)||Wt["Enclosed CJK Letters and Months"](L)||Wt["Halfwidth and Fullwidth Forms"](L)||Wt.Hiragana(L)||Wt["Ideographic Description Characters"](L)||Wt["Kangxi Radicals"](L)||Wt["Katakana Phonetic Extensions"](L)||Wt.Katakana(L)||Wt["Vertical Forms"](L)||Wt["Yi Radicals"](L)||Wt["Yi Syllables"](L)));(Aa[$e]||Ze||Ce.imageName)&&W.push(Wh(ve+1,pe,oe,W,Wd($e,e.getCharCode(ve+1),Ze&&ae),!1))}}return function ot(nt){return nt?ot(nt.priorBreak).concat(nt.index):[]}(Wh(e.length(),pe,oe,W,0,!0))}function bu(e){var i=.5,a=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function Wl(e,i,a,f,v){if(f||v)for(var w=e[a],I=(e[a].x+w.metrics.advance*w.scale)*f,L=i;L<=a;L++)e[L].x-=I,e[L].y+=v}function Ju(e,i,a,f,v,w){var I,L=e.image;if(L.content){var W=L.content,oe=L.pixelRatio||1;I=[W[0]/oe,W[1]/oe,L.displaySize[0]-W[2]/oe,L.displaySize[1]-W[3]/oe]}var ae,pe,ve,Ce,$e=i.left*w,Ze=i.right*w;"width"===a||"both"===a?(Ce=v[0]+$e-f[3],pe=v[0]+Ze+f[1]):pe=(Ce=v[0]+($e+Ze-L.displaySize[0])/2)+L.displaySize[0];var ot=i.top*w,nt=i.bottom*w;return"height"===a||"both"===a?(ae=v[1]+ot-f[0],ve=v[1]+nt+f[2]):ve=(ae=v[1]+(ot+nt-L.displaySize[1])/2)+L.displaySize[1],{image:L,top:ae,right:pe,bottom:ve,left:Ce,collisionPadding:I}}Aa[10]=!0,Aa[32]=!0,Aa[38]=!0,Aa[40]=!0,Aa[41]=!0,Aa[43]=!0,Aa[45]=!0,Aa[47]=!0,Aa[173]=!0,Aa[183]=!0,Aa[8203]=!0,Aa[8208]=!0,Aa[8211]=!0,Aa[8231]=!0;var eu=function(e){function i(a,f,v,w){e.call(this,a,f),this.angle=v,void 0!==w&&(this.segment=w)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(U);function Vc(e,i){var a=i.expression;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new _i(e+1))};if("source"===a.kind)return{kind:"source"};for(var f=a.zoomStops,v=a.interpolationType,w=0;w<f.length&&f[w]<=e;)w++;for(var I=w=Math.max(0,w-1);I<f.length&&f[I]<e+1;)I++;I=Math.min(f.length-1,I);var L=f[w],W=f[I];return"composite"===a.kind?{kind:"composite",minZoom:L,maxZoom:W,interpolationType:v}:{kind:"camera",minZoom:L,maxZoom:W,minSize:a.evaluate(new _i(L)),maxSize:a.evaluate(new _i(W)),interpolationType:v}}function Cd(e,i,a){var f=i.uSize,v=a.lowerSize;return"source"===e.kind?v/128:"composite"===e.kind?jr(v/128,a.upperSize/128,i.uSizeT):f}function Kh(e,i){var a=0,f=0;if("constant"===e.kind)f=e.layoutSize;else if("source"!==e.kind){var v=e.interpolationType,w=v?je(wr.interpolationFactor(v,i,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?f=jr(e.minSize,e.maxSize,w):a=w}return{uSizeT:a,uSize:f}}G("Anchor",eu);var fp=Object.freeze({__proto__:null,getSizeData:Vc,evaluateSizeForFeature:Cd,evaluateSizeForZoom:Kh,SIZE_PACK_FACTOR:128});function mp(e,i,a,f,v){if(void 0===i.segment)return!0;for(var w=i,I=i.segment+1,L=0;L>-a/2;){if(--I<0)return!1;L-=e[I].dist(w),w=e[I]}L+=e[I].dist(e[I+1]),I++;for(var W=[],oe=0;L<a/2;){var ae=e[I],pe=e[I+1];if(!pe)return!1;var ve=e[I-1].angleTo(ae)-ae.angleTo(pe);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),W.push({distance:L,angleDelta:ve}),oe+=ve;L-W[0].distance>f;)oe-=W.shift().angleDelta;if(oe>v)return!1;I++,L+=ae.dist(pe)}return!0}function Kd(e){for(var i=0,a=0;a<e.length-1;a++)i+=e[a].dist(e[a+1]);return i}function Jd(e,i,a){return e?.6*i*a:0}function Eh(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function Th(e,i,a,f,v,w){for(var I=Jd(a,v,w),L=Eh(a,f)*w,W=0,oe=Kd(e)/2,ae=0;ae<e.length-1;ae++){var pe=e[ae],ve=e[ae+1],Ce=pe.dist(ve);if(W+Ce>oe){var $e=(oe-W)/Ce,Ze=jr(pe.x,ve.x,$e),ot=jr(pe.y,ve.y,$e),nt=new eu(Ze,ot,ve.angleTo(pe),ae);return nt._round(),!I||mp(e,nt,L,I,i)?nt:void 0}W+=Ce}}function Mh(e,i,a,f,v,w,I,L,W){var oe=Jd(f,w,I),ae=Eh(f,v),pe=ae*I,ve=0===e[0].x||e[0].x===W||0===e[0].y||e[0].y===W;return i-pe<i/4&&(i=pe+i/4),function Ce($e,Ze,ot,nt,mt,gt,wt,Et,$t){for(var an=gt/2,dn=Kd($e),Un=0,xn=Ze-ot,Ln=[],mn=0;mn<$e.length-1;mn++){for(var Mi=$e[mn],ni=$e[mn+1],kn=Mi.dist(ni),Bi=ni.angleTo(Mi);xn+ot<Un+kn;){var yi=((xn+=ot)-Un)/kn,rr=jr(Mi.x,ni.x,yi),Gn=jr(Mi.y,ni.y,yi);if(rr>=0&&rr<$t&&Gn>=0&&Gn<$t&&xn-an>=0&&xn+an<=dn){var pr=new eu(rr,Gn,Bi,mn);pr._round(),nt&&!mp($e,pr,gt,nt,mt)||Ln.push(pr)}}Un+=kn}return Et||Ln.length||wt||(Ln=Ce($e,Un/2,ot,nt,mt,gt,wt,!0,$t)),Ln}(e,ve?i/2*L%i:(ae/2+2*w)*I*L%i,i,oe,a,pe,ve,!1,W)}function Uc(e,i,a,f,v){for(var w=[],I=0;I<e.length;I++)for(var L=e[I],W=void 0,oe=0;oe<L.length-1;oe++){var ae=L[oe],pe=L[oe+1];ae.x<i&&pe.x<i||(ae.x<i?ae=new U(i,ae.y+(i-ae.x)/(pe.x-ae.x)*(pe.y-ae.y))._round():pe.x<i&&(pe=new U(i,ae.y+(i-ae.x)/(pe.x-ae.x)*(pe.y-ae.y))._round()),ae.y<a&&pe.y<a||(ae.y<a?ae=new U(ae.x+(a-ae.y)/(pe.y-ae.y)*(pe.x-ae.x),a)._round():pe.y<a&&(pe=new U(ae.x+(a-ae.y)/(pe.y-ae.y)*(pe.x-ae.x),a)._round()),ae.x>=f&&pe.x>=f||(ae.x>=f?ae=new U(f,ae.y+(f-ae.x)/(pe.x-ae.x)*(pe.y-ae.y))._round():pe.x>=f&&(pe=new U(f,ae.y+(f-ae.x)/(pe.x-ae.x)*(pe.y-ae.y))._round()),ae.y>=v&&pe.y>=v||(ae.y>=v?ae=new U(ae.x+(v-ae.y)/(pe.y-ae.y)*(pe.x-ae.x),v)._round():pe.y>=v&&(pe=new U(ae.x+(v-ae.y)/(pe.y-ae.y)*(pe.x-ae.x),v)._round()),W&&ae.equals(W[W.length-1])||w.push(W=[ae]),W.push(pe)))))}return w}function qu(e,i,a,f){var v=[],w=e.image,I=w.pixelRatio,L=w.paddedRect.w-2,W=w.paddedRect.h-2,oe=e.right-e.left,ae=e.bottom-e.top,pe=w.stretchX||[[0,L]],ve=w.stretchY||[[0,W]],Ce=function(rr,Gn){return rr+Gn[1]-Gn[0]},$e=pe.reduce(Ce,0),Ze=ve.reduce(Ce,0),ot=L-$e,nt=W-Ze,mt=0,gt=$e,wt=0,Et=Ze,$t=0,an=ot,dn=0,Un=nt;if(w.content&&f){var xn=w.content;mt=qd(pe,0,xn[0]),wt=qd(ve,0,xn[1]),gt=qd(pe,xn[0],xn[2]),Et=qd(ve,xn[1],xn[3]),$t=xn[0]-mt,dn=xn[1]-wt,an=xn[2]-xn[0]-gt,Un=xn[3]-xn[1]-Et}var Ln=function(rr,Gn,pr,fo){var $o=Dd(rr.stretch-mt,gt,oe,e.left),$n=xu(rr.fixed-$t,an,rr.stretch,$e),ao=Dd(Gn.stretch-wt,Et,ae,e.top),To=xu(Gn.fixed-dn,Un,Gn.stretch,Ze),ss=Dd(pr.stretch-mt,gt,oe,e.left),ys=xu(pr.fixed-$t,an,pr.stretch,$e),fa=Dd(fo.stretch-wt,Et,ae,e.top),vs=xu(fo.fixed-dn,Un,fo.stretch,Ze),Oa=new U($o,ao),lo=new U(ss,ao),Ns=new U(ss,fa),Gi=new U($o,fa),Zr=new U($n/I,To/I),Dr=new U(ys/I,vs/I),er=i*Math.PI/180;if(er){var Bo=Math.sin(er),bs=Math.cos(er),Jr=[bs,-Bo,Bo,bs];Oa._matMult(Jr),lo._matMult(Jr),Gi._matMult(Jr),Ns._matMult(Jr)}var co=rr.stretch+rr.fixed,ia=Gn.stretch+Gn.fixed;return{tl:Oa,tr:lo,bl:Gi,br:Ns,tex:{x:w.paddedRect.x+1+co,y:w.paddedRect.y+1+ia,w:pr.stretch+pr.fixed-co,h:fo.stretch+fo.fixed-ia},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:Dr,minFontScaleX:an/I/oe,minFontScaleY:Un/I/ae,isSDF:a}};if(f&&(w.stretchX||w.stretchY))for(var mn=Sh(pe,ot,$e),Mi=Sh(ve,nt,Ze),ni=0;ni<mn.length-1;ni++)for(var kn=mn[ni],Bi=mn[ni+1],yi=0;yi<Mi.length-1;yi++)v.push(Ln(kn,Mi[yi],Bi,Mi[yi+1]));else v.push(Ln({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:W+1}));return v}function qd(e,i,a){for(var f=0,v=0,w=e;v<w.length;v+=1){var I=w[v];f+=Math.max(i,Math.min(a,I[1]))-Math.max(i,Math.min(a,I[0]))}return f}function Sh(e,i,a){for(var f=[{fixed:-1,stretch:0}],v=0,w=e;v<w.length;v+=1){var I=w[v],L=I[0],W=I[1],oe=f[f.length-1];f.push({fixed:L-oe.stretch,stretch:oe.stretch}),f.push({fixed:L-oe.stretch,stretch:oe.stretch+(W-L)})}return f.push({fixed:i+1,stretch:a}),f}function Dd(e,i,a,f){return e/i*a+f}function xu(e,i,a,f){return e-i*a/f}var Ed=function(e,i,a,f,v,w,I,L,W,oe){if(this.boxStartIndex=e.length,W){var ae=w.top,pe=w.bottom,ve=w.collisionPadding;ve&&(ae-=ve[1],pe+=ve[3]);var Ce=pe-ae;Ce>0&&(Ce=Math.max(10,Ce),this.circleDiameter=Ce)}else{var $e=w.top*I-L,Ze=w.bottom*I+L,ot=w.left*I-L,nt=w.right*I+L,mt=w.collisionPadding;if(mt&&(ot-=mt[0]*I,$e-=mt[1]*I,nt+=mt[2]*I,Ze+=mt[3]*I),oe){var gt=new U(ot,$e),wt=new U(nt,$e),Et=new U(ot,Ze),$t=new U(nt,Ze),an=oe*Math.PI/180;gt._rotate(an),wt._rotate(an),Et._rotate(an),$t._rotate(an),ot=Math.min(gt.x,wt.x,Et.x,$t.x),nt=Math.max(gt.x,wt.x,Et.x,$t.x),$e=Math.min(gt.y,wt.y,Et.y,$t.y),Ze=Math.max(gt.y,wt.y,Et.y,$t.y)}e.emplaceBack(i.x,i.y,ot,$e,nt,Ze,a,f,v)}this.boxEndIndex=e.length},lc=function(e,i){if(void 0===e&&(e=[]),void 0===i&&(i=wu),this.data=e,this.length=this.data.length,this.compare=i,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)};function wu(e,i){return e<i?-1:e>i?1:0}function Lo(e,i,a){void 0===i&&(i=1),void 0===a&&(a=!1);for(var f=1/0,v=1/0,w=-1/0,I=-1/0,L=e[0],W=0;W<L.length;W++){var oe=L[W];(!W||oe.x<f)&&(f=oe.x),(!W||oe.y<v)&&(v=oe.y),(!W||oe.x>w)&&(w=oe.x),(!W||oe.y>I)&&(I=oe.y)}var ae=Math.min(w-f,I-v),pe=ae/2,ve=new lc([],gp);if(0===ae)return new U(f,v);for(var Ce=f;Ce<w;Ce+=ae)for(var $e=v;$e<I;$e+=ae)ve.push(new Td(Ce+pe,$e+pe,pe,e));for(var Ze=function(mt){for(var gt=0,wt=0,Et=0,$t=mt[0],an=0,dn=$t.length,Un=dn-1;an<dn;Un=an++){var xn=$t[an],Ln=$t[Un],mn=xn.x*Ln.y-Ln.x*xn.y;wt+=(xn.x+Ln.x)*mn,Et+=(xn.y+Ln.y)*mn,gt+=3*mn}return new Td(wt/gt,Et/gt,0,mt)}(e),ot=ve.length;ve.length;){var nt=ve.pop();(nt.d>Ze.d||!Ze.d)&&(Ze=nt,a&&console.log("found best %d after %d probes",Math.round(1e4*nt.d)/1e4,ot)),nt.max-Ze.d<=i||(ve.push(new Td(nt.p.x-(pe=nt.h/2),nt.p.y-pe,pe,e)),ve.push(new Td(nt.p.x+pe,nt.p.y-pe,pe,e)),ve.push(new Td(nt.p.x-pe,nt.p.y+pe,pe,e)),ve.push(new Td(nt.p.x+pe,nt.p.y+pe,pe,e)),ot+=4)}return a&&(console.log("num probes: "+ot),console.log("best distance: "+Ze.d)),Ze.p}function gp(e,i){return i.max-e.max}function Td(e,i,a,f){this.p=new U(e,i),this.h=a,this.d=function(v,w){for(var I=!1,L=1/0,W=0;W<w.length;W++)for(var oe=w[W],ae=0,pe=oe.length,ve=pe-1;ae<pe;ve=ae++){var Ce=oe[ae],$e=oe[ve];Ce.y>v.y!=$e.y>v.y&&v.x<($e.x-Ce.x)*(v.y-Ce.y)/($e.y-Ce.y)+Ce.x&&(I=!I),L=Math.min(L,nc(v,Ce,$e))}return(I?1:-1)*Math.sqrt(L)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}lc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},lc.prototype.pop=function(){if(0!==this.length){var e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}},lc.prototype.peek=function(){return this.data[0]},lc.prototype._up=function(e){for(var i=this.data,a=this.compare,f=i[e];e>0;){var v=e-1>>1,w=i[v];if(a(f,w)>=0)break;i[e]=w,e=v}i[e]=f},lc.prototype._down=function(e){for(var i=this.data,a=this.compare,f=this.length>>1,v=i[e];e<f;){var w=1+(e<<1),I=i[w],L=w+1;if(L<this.length&&a(i[L],I)<0&&(w=L,I=i[L]),a(I,v)>=0)break;i[e]=I,e=w}i[e]=v};var Sc=Number.POSITIVE_INFINITY;function tu(e,i){return i[1]!==Sc?function(a,f,v){var w=0,I=0;switch(f=Math.abs(f),v=Math.abs(v),a){case"top-right":case"top-left":case"top":I=v-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-v}switch(a){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,I]}(e,i[0],i[1]):function(a,f){var v=0,w=0;f<0&&(f=0);var I=f/Math.sqrt(2);switch(a){case"top-right":case"top-left":w=I-7;break;case"bottom-right":case"bottom-left":w=7-I;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(a){case"top-right":case"bottom-right":v=-I;break;case"top-left":case"bottom-left":v=I;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(e,i[0])}function Qu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Jh(e,i,a,f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e){var Ze=function(wt,Et,$t,an,dn,Un,xn,Ln){for(var mn=an.layout.get("text-rotate").evaluate(Un,{})*Math.PI/180,Mi=[],ni=0,kn=Et.positionedLines;ni<kn.length;ni+=1)for(var Bi=kn[ni],yi=0,rr=Bi.positionedGlyphs;yi<rr.length;yi+=1){var Gn=rr[yi];if(Gn.rect){var pr=Gn.rect||{},fo=4,$o=!0,$n=1,ao=0,To=(dn||Ln)&&Gn.vertical,ss=Gn.metrics.advance*Gn.scale/2;if(Ln&&Et.verticalizable&&(ao=Bi.lineOffset/2-(Gn.imageName?-(24-Gn.metrics.width*Gn.scale)/2:24*(Gn.scale-1))),Gn.imageName){var ys=xn[Gn.imageName];$o=ys.sdf,fo=1/($n=ys.pixelRatio)}var fa=dn?[Gn.x+ss,Gn.y]:[0,0],vs=dn?[0,0]:[Gn.x+ss+$t[0],Gn.y+$t[1]-ao],Oa=[0,0];To&&(Oa=vs,vs=[0,0]);var lo=(Gn.metrics.left-fo)*Gn.scale-ss+vs[0],Ns=(-Gn.metrics.top-fo)*Gn.scale+vs[1],Gi=lo+pr.w*Gn.scale/$n,Zr=Ns+pr.h*Gn.scale/$n,Dr=new U(lo,Ns),er=new U(Gi,Ns),Bo=new U(lo,Zr),bs=new U(Gi,Zr);if(To){var Jr=new U(-ss,ss- -17),co=-Math.PI/2,ia=12-ss,fr=new U(22-ia,-(Gn.imageName?ia:0)),iu=new(Function.prototype.bind.apply(U,[null].concat(Oa)));Dr._rotateAround(co,Jr)._add(fr)._add(iu),er._rotateAround(co,Jr)._add(fr)._add(iu),Bo._rotateAround(co,Jr)._add(fr)._add(iu),bs._rotateAround(co,Jr)._add(fr)._add(iu)}if(mn){var uc=Math.sin(mn),Jl=Math.cos(mn),Zo=[Jl,-uc,uc,Jl];Dr._matMult(Zo),er._matMult(Zo),Bo._matMult(Zo),bs._matMult(Zo)}var dc=new U(0,0),hc=new U(0,0);Mi.push({tl:Dr,tr:er,bl:Bo,br:bs,tex:pr,writingMode:Et.writingMode,glyphOffset:fa,sectionIndex:Gn.sectionIndex,isSDF:$o,pixelOffsetTL:dc,pixelOffsetBR:hc,minFontScaleX:0,minFontScaleY:0})}}return Mi}(0,a,L,v,w,I,f,e.allowVerticalPlacement),ot=e.textSizeData,nt=null;"source"===ot.kind?(nt=[128*v.layout.get("text-size").evaluate(I,{})])[0]>32640&&St(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===ot.kind&&((nt=[128*Ce.compositeTextSizes[0].evaluate(I,{},$e),128*Ce.compositeTextSizes[1].evaluate(I,{},$e)])[0]>32640||nt[1]>32640)&&St(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,Ze,nt,L,w,I,oe,i,W.lineStartIndex,W.lineLength,ve,$e);for(var mt=0,gt=ae;mt<gt.length;mt+=1)pe[gt[mt]]=e.text.placedSymbolArray.length-1;return 4*Ze.length}function qh(e){for(var i in e)return e[i];return null}function Qd(e,i,a,f){var v=e.compareText;if(i in v){for(var w=v[i],I=w.length-1;I>=0;I--)if(f.dist(w[I])<a)return!0}else v[i]=[];return v[i].push(f),!1}var Md=du.VectorTileFeature.types,Gp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function g(e,i,a,f,v,w,I,L,W,oe,ae,pe,ve){var Ce=L?Math.min(32640,Math.round(L[0])):0,$e=L?Math.min(32640,Math.round(L[1])):0;e.emplaceBack(i,a,Math.round(32*f),Math.round(32*v),w,I,(Ce<<1)+(W?1:0),$e,16*oe,16*ae,256*pe,256*ve)}function T(e,i,a){e.emplaceBack(i.x,i.y,a),e.emplaceBack(i.x,i.y,a),e.emplaceBack(i.x,i.y,a),e.emplaceBack(i.x,i.y,a)}function u(e){for(var i=0,a=e.sections;i<a.length;i+=1)if(Ls(a[i].text))return!0;return!1}var b=function(e){this.layoutVertexArray=new Ha,this.indexArray=new qo,this.programConfigurations=e,this.segments=new M,this.dynamicLayoutVertexArray=new Rc,this.opacityVertexArray=new tc,this.placedSymbolArray=new m};b.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},b.prototype.upload=function(e,i,a,f){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$u.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_h.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Gp,!0),this.opacityVertexBuffer.itemSize=1),(a||f)&&this.programConfigurations.upload(e))},b.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},G("SymbolBuffers",b);var B=function(e,i,a){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new a,this.segments=new M,this.collisionVertexArray=new Nc};B.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,mu.members,!0)},B.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},G("CollisionBuffers",B);var ee=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(w){return w.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$a([]),this.placementViewportMatrix=$a([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vc(this.zoom,i["text-size"]),this.iconSizeData=Vc(this.zoom,i["icon-size"]);var a=this.layers[0].layout,f=a.get("symbol-sort-key"),v=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==v&&void 0!==f.constantOr(1),this.sortFeaturesByY=("viewport-y"===v||"auto"===v&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===a.get("symbol-placement")&&(this.writingModes=a.get("text-writing-mode").map(function(w){return Za[w]})),this.stateDependentLayerIds=this.layers.filter(function(w){return w.isStateDependent()}).map(function(w){return w.id}),this.sourceID=e.sourceID};ee.prototype.createArrays=function(){this.text=new b(new Jn(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new b(new Jn(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new F,this.lineVertexArray=new $,this.symbolInstances=new O},ee.prototype.calculateGlyphDependencies=function(e,i,a,f,v){for(var w=0;w<e.length;w++)if(i[e.charCodeAt(w)]=!0,(a||f)&&v){var I=Zu[e.charAt(w)];I&&(i[I.charCodeAt(0)]=!0)}},ee.prototype.populate=function(e,i,a){var f=this.layers[0],v=f.layout,w=v.get("text-font"),I=v.get("text-field"),L=v.get("icon-image"),W=("constant"!==I.value.kind||I.value.value instanceof Ai&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),oe="constant"!==L.value.kind||!!L.value.value||Object.keys(L.parameters).length>0,ae=v.get("symbol-sort-key");if(this.features=[],W||oe){for(var pe=i.iconDependencies,ve=i.glyphDependencies,Ce=i.availableImages,$e=new _i(this.zoom),Ze=0,ot=e;Ze<ot.length;Ze+=1){var nt=ot[Ze],mt=nt.feature,gt=nt.id,wt=nt.index,Et=nt.sourceLayerIndex,$t=f._featureFilter.needGeometry,an=po(mt,$t);if(f._featureFilter.filter($e,an,a)){$t||(an.geometry=$r(mt));var dn=void 0;if(W){var Un=f.getValueAndResolveTokens("text-field",an,a,Ce),xn=Ai.factory(Un);u(xn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Tl()||this.hasRTLText&&zs.isParsed())&&(dn=hp(xn,f,an))}var Ln=void 0;if(oe){var mn=f.getValueAndResolveTokens("icon-image",an,a,Ce);Ln=mn instanceof Mr?mn:Mr.fromString(mn)}if(dn||Ln){var Mi=this.sortFeaturesByKey?ae.evaluate(an,{},a):void 0;if(this.features.push({id:gt,text:dn,icon:Ln,index:wt,sourceLayerIndex:Et,geometry:an.geometry,properties:mt.properties,type:Md[mt.type],sortKey:Mi}),Ln&&(pe[Ln.name]=!0),dn){var ni=w.evaluate(an,{},a).join(","),kn="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Za.vertical)>=0;for(var Bi=0,yi=dn.sections;Bi<yi.length;Bi+=1){var rr=yi[Bi];if(rr.image)pe[rr.image.name]=!0;else{var Gn=Wi(dn.toString()),pr=rr.fontStack||ni,fo=ve[pr]=ve[pr]||{};this.calculateGlyphDependencies(rr.text,fo,kn,this.allowVerticalPlacement,Gn)}}}}}}"line"===v.get("symbol-placement")&&(this.features=function($o){var $n={},ao={},To=[],ss=0;function ys(Jr){To.push($o[Jr]),ss++}function fa(Jr,co,ia){var fr=ao[Jr];return delete ao[Jr],ao[co]=fr,To[fr].geometry[0].pop(),To[fr].geometry[0]=To[fr].geometry[0].concat(ia[0]),fr}function vs(Jr,co,ia){var fr=$n[co];return delete $n[co],$n[Jr]=fr,To[fr].geometry[0].shift(),To[fr].geometry[0]=ia[0].concat(To[fr].geometry[0]),fr}function Oa(Jr,co,ia){var fr=ia?co[0][co[0].length-1]:co[0][0];return Jr+":"+fr.x+":"+fr.y}for(var lo=0;lo<$o.length;lo++){var Ns=$o[lo],Gi=Ns.geometry,Zr=Ns.text?Ns.text.toString():null;if(Zr){var Dr=Oa(Zr,Gi),er=Oa(Zr,Gi,!0);if(Dr in ao&&er in $n&&ao[Dr]!==$n[er]){var Bo=vs(Dr,er,Gi),bs=fa(Dr,er,To[Bo].geometry);delete $n[Dr],delete ao[er],ao[Oa(Zr,To[bs].geometry,!0)]=bs,To[Bo].geometry=null}else Dr in ao?fa(Dr,er,Gi):er in $n?vs(Dr,er,Gi):(ys(lo),$n[Dr]=ss-1,ao[er]=ss-1)}else ys(lo)}return To.filter(function(Jr){return Jr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function($o,$n){return $o.sortKey-$n.sortKey})}},ee.prototype.update=function(e,i,a){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,i,this.layers,a),this.icon.programConfigurations.updatePaintArrays(e,i,this.layers,a))},ee.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ee.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ee.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ee.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ee.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ee.prototype.addToLineVertexArray=function(e,i){var a=this.lineVertexArray.length;if(void 0!==e.segment){for(var f=e.dist(i[e.segment+1]),v=e.dist(i[e.segment]),w={},I=e.segment+1;I<i.length;I++)w[I]={x:i[I].x,y:i[I].y,tileUnitDistanceFromAnchor:f},I<i.length-1&&(f+=i[I+1].dist(i[I]));for(var L=e.segment||0;L>=0;L--)w[L]={x:i[L].x,y:i[L].y,tileUnitDistanceFromAnchor:v},L>0&&(v+=i[L-1].dist(i[L]));for(var W=0;W<i.length;W++){var oe=w[W];this.lineVertexArray.emplaceBack(oe.x,oe.y,oe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}},ee.prototype.addSymbols=function(e,i,a,f,v,w,I,L,W,oe,ae,pe){for(var ve=e.indexArray,Ce=e.layoutVertexArray,$e=e.segments.prepareSegment(4*i.length,Ce,ve,this.canOverlap?w.sortKey:void 0),Ze=this.glyphOffsetArray.length,ot=$e.vertexLength,nt=this.allowVerticalPlacement&&I===Za.vertical?Math.PI/2:0,mt=w.text&&w.text.sections,gt=0;gt<i.length;gt++){var wt=i[gt],Et=wt.tl,$t=wt.tr,an=wt.bl,dn=wt.br,Un=wt.tex,xn=wt.pixelOffsetTL,Ln=wt.pixelOffsetBR,mn=wt.minFontScaleX,Mi=wt.minFontScaleY,ni=wt.glyphOffset,kn=wt.isSDF,Bi=wt.sectionIndex,yi=$e.vertexLength,rr=ni[1];g(Ce,L.x,L.y,Et.x,rr+Et.y,Un.x,Un.y,a,kn,xn.x,xn.y,mn,Mi),g(Ce,L.x,L.y,$t.x,rr+$t.y,Un.x+Un.w,Un.y,a,kn,Ln.x,xn.y,mn,Mi),g(Ce,L.x,L.y,an.x,rr+an.y,Un.x,Un.y+Un.h,a,kn,xn.x,Ln.y,mn,Mi),g(Ce,L.x,L.y,dn.x,rr+dn.y,Un.x+Un.w,Un.y+Un.h,a,kn,Ln.x,Ln.y,mn,Mi),T(e.dynamicLayoutVertexArray,L,nt),ve.emplaceBack(yi,yi+1,yi+2),ve.emplaceBack(yi+1,yi+2,yi+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ni[0]),gt!==i.length-1&&Bi===i[gt+1].sectionIndex||e.programConfigurations.populatePaintArrays(Ce.length,w,w.index,{},pe,mt&&mt[Bi])}e.placedSymbolArray.emplaceBack(L.x,L.y,Ze,this.glyphOffsetArray.length-Ze,ot,W,oe,L.segment,a?a[0]:0,a?a[1]:0,f[0],f[1],I,0,!1,0,ae)},ee.prototype._addCollisionDebugVertex=function(e,i,a,f,v,w){return i.emplaceBack(0,0),e.emplaceBack(a.x,a.y,f,v,Math.round(w.x),Math.round(w.y))},ee.prototype.addCollisionDebugVertices=function(e,i,a,f,v,w,I){var L=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),W=L.vertexLength,oe=v.layoutVertexArray,ae=v.collisionVertexArray,pe=I.anchorX,ve=I.anchorY;this._addCollisionDebugVertex(oe,ae,w,pe,ve,new U(e,i)),this._addCollisionDebugVertex(oe,ae,w,pe,ve,new U(a,i)),this._addCollisionDebugVertex(oe,ae,w,pe,ve,new U(a,f)),this._addCollisionDebugVertex(oe,ae,w,pe,ve,new U(e,f)),L.vertexLength+=4;var Ce=v.indexArray;Ce.emplaceBack(W,W+1),Ce.emplaceBack(W+1,W+2),Ce.emplaceBack(W+2,W+3),Ce.emplaceBack(W+3,W),L.primitiveLength+=4},ee.prototype.addDebugCollisionBoxes=function(e,i,a,f){for(var v=e;v<i;v++){var w=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,f?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,a)}},ee.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new B(Hl,Mc.members,su),this.iconCollisionBox=new B(Hl,Mc.members,su);for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},ee.prototype._deserializeCollisionBoxesForSymbol=function(e,i,a,f,v,w,I,L,W){for(var oe={},ae=i;ae<a;ae++){var pe=e.get(ae);oe.textBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},oe.textFeatureIndex=pe.featureIndex;break}for(var ve=f;ve<v;ve++){var Ce=e.get(ve);oe.verticalTextBox={x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,anchorPointX:Ce.anchorPointX,anchorPointY:Ce.anchorPointY},oe.verticalTextFeatureIndex=Ce.featureIndex;break}for(var $e=w;$e<I;$e++){var Ze=e.get($e);oe.iconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},oe.iconFeatureIndex=Ze.featureIndex;break}for(var ot=L;ot<W;ot++){var nt=e.get(ot);oe.verticalIconBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},oe.verticalIconFeatureIndex=nt.featureIndex;break}return oe},ee.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}},ee.prototype.hasTextData=function(){return this.text.segments.get().length>0},ee.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ee.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ee.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ee.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ee.prototype.addIndicesForPlacedSymbol=function(e,i){for(var a=e.placedSymbolArray.get(i),f=a.vertexStartIndex+4*a.numGlyphs,v=a.vertexStartIndex;v<f;v+=4)e.indexArray.emplaceBack(v,v+1,v+2),e.indexArray.emplaceBack(v+1,v+2,v+3)},ee.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var i=Math.sin(e),a=Math.cos(e),f=[],v=[],w=[],I=0;I<this.symbolInstances.length;++I){w.push(I);var L=this.symbolInstances.get(I);f.push(0|Math.round(i*L.anchorX+a*L.anchorY)),v.push(L.featureIndex)}return w.sort(function(W,oe){return f[W]-f[oe]||v[oe]-v[W]}),w},ee.prototype.addToSortKeyRanges=function(e,i){var a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===i?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})},ee.prototype.sortFeatures=function(e){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var a=0,f=this.symbolInstanceIndexes;a<f.length;a+=1){var v=this.symbolInstances.get(f[a]);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(function(w,I,L){w>=0&&L.indexOf(w)===I&&i.addIndicesForPlacedSymbol(i.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},G("SymbolBucket",ee,{omit:["layers","collisionBoxArray","features","compareText"]}),ee.MAX_GLYPHS=65535,ee.addDynamicAttributes=T;var Ue=new Ho({"symbol-placement":new Sn(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Sn(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sn(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _n(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sn(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sn(xe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Sn(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sn(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sn(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new _n(xe.layout_symbol["icon-size"]),"icon-text-fit":new Sn(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sn(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new _n(xe.layout_symbol["icon-image"]),"icon-rotate":new _n(xe.layout_symbol["icon-rotate"]),"icon-padding":new Sn(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Sn(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new _n(xe.layout_symbol["icon-offset"]),"icon-anchor":new _n(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sn(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sn(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sn(xe.layout_symbol["text-rotation-alignment"]),"text-field":new _n(xe.layout_symbol["text-field"]),"text-font":new _n(xe.layout_symbol["text-font"]),"text-size":new _n(xe.layout_symbol["text-size"]),"text-max-width":new _n(xe.layout_symbol["text-max-width"]),"text-line-height":new Sn(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new _n(xe.layout_symbol["text-letter-spacing"]),"text-justify":new _n(xe.layout_symbol["text-justify"]),"text-radial-offset":new _n(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sn(xe.layout_symbol["text-variable-anchor"]),"text-anchor":new _n(xe.layout_symbol["text-anchor"]),"text-max-angle":new Sn(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Sn(xe.layout_symbol["text-writing-mode"]),"text-rotate":new _n(xe.layout_symbol["text-rotate"]),"text-padding":new Sn(xe.layout_symbol["text-padding"]),"text-keep-upright":new Sn(xe.layout_symbol["text-keep-upright"]),"text-transform":new _n(xe.layout_symbol["text-transform"]),"text-offset":new _n(xe.layout_symbol["text-offset"]),"text-allow-overlap":new Sn(xe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Sn(xe.layout_symbol["text-ignore-placement"]),"text-optional":new Sn(xe.layout_symbol["text-optional"])}),st={paint:new Ho({"icon-opacity":new _n(xe.paint_symbol["icon-opacity"]),"icon-color":new _n(xe.paint_symbol["icon-color"]),"icon-halo-color":new _n(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new _n(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _n(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Sn(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sn(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new _n(xe.paint_symbol["text-opacity"]),"text-color":new _n(xe.paint_symbol["text-color"],{runtimeType:en,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new _n(xe.paint_symbol["text-halo-color"]),"text-halo-width":new _n(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new _n(xe.paint_symbol["text-halo-blur"]),"text-translate":new Sn(xe.paint_symbol["text-translate"]),"text-translate-anchor":new Sn(xe.paint_symbol["text-translate-anchor"])}),layout:Ue},dt=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:qe,this.defaultValue=e};dt.prototype.evaluate=function(e){if(e.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},dt.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},dt.prototype.outputDefined=function(){return!1},dt.prototype.serialize=function(){return null},G("FormatSectionOverride",dt,{omit:["defaultValue"]});var yt=function(e){function i(a){e.call(this,a,st)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.recalculate=function(a,f){if(e.prototype.recalculate.call(this,a,f),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var v=this.layout.get("text-writing-mode");if(v){for(var w=[],I=0,L=v;I<L.length;I+=1){var W=L[I];w.indexOf(W)<0&&w.push(W)}this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(a,f,v,w){var W,I=this.layout.get(a).evaluate(f,{},v,w),L=this._unevaluatedLayout._values[a];return L.isDataDriven()||Ss(L.value)||!I?I:(W=f.properties,I.replace(/{([^{}]+)}/g,function(ae,pe){return pe in W?String(W[pe]):""}))},i.prototype.createBucket=function(a){return new ee(a)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var a=0,f=st.paint.overridableProperties;a<f.length;a+=1){var v=f[a];if(i.hasPaintOverride(this.layout,v)){var w,I=this.paint.get(v),L=new dt(I),W=new hs(L,I.property.specification);w="constant"===I.value.kind||"source"===I.value.kind?new on("source",W):new Pi("composite",W,I.value.zoomStops,I.value._interpolationType),this.paint._values[v]=new Jo(I.property,w,I.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(a,f,v){return!(!this.layout||f.isDataDriven()||v.isDataDriven())&&i.hasPaintOverride(this.layout,a)},i.hasPaintOverride=function(a,f){var v=a.get("text-field"),w=st.paint.properties[f],I=!1,L=function(ae){for(var pe=0,ve=ae;pe<ve.length;pe+=1)if(w.overrides&&w.overrides.hasOverride(ve[pe]))return void(I=!0)};if("constant"===v.value.kind&&v.value.value instanceof Ai)L(v.value.value.sections);else if("source"===v.value.kind){var W=function(ae){I||(ae instanceof vi&&cn(ae.value)===Si?L(ae.value.sections):ae instanceof mo?L(ae.sections):ae.eachChild(W))},oe=v.value;oe._styleExpression&&W(oe._styleExpression.expression)}return I},i}(ua),Nt={paint:new Ho({"background-color":new Sn(xe.paint_background["background-color"]),"background-pattern":new xo(xe.paint_background["background-pattern"]),"background-opacity":new Sn(xe.paint_background["background-opacity"])})},Pn=function(e){function i(a){e.call(this,a,Nt)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(ua),fn={paint:new Ho({"raster-opacity":new Sn(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sn(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sn(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sn(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Sn(xe.paint_raster["raster-saturation"]),"raster-contrast":new Sn(xe.paint_raster["raster-contrast"]),"raster-resampling":new Sn(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Sn(xe.paint_raster["raster-fade-duration"])})},On=function(e){function i(a){e.call(this,a,fn)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i}(ua),Xi=function(e){function i(a){e.call(this,a,{}),this.implementation=a}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},i.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},i.prototype.onRemove=function(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},i}(ua),ci={circle:sd,heatmap:cl,hillshade:Il,fill:dp,"fill-extrusion":Hh,line:zc,symbol:yt,background:Pn,raster:On},Fi=de.HTMLImageElement,Hi=de.HTMLCanvasElement,lr=de.HTMLVideoElement,Xr=de.ImageData,Li=de.ImageBitmap,ir=function(e,i,a,f){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(i,f)};ir.prototype.update=function(e,i,a){var f=e.width,v=e.height,w=!(this.size&&this.size[0]===f&&this.size[1]===v||a),I=this.context,L=I.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!i||!1!==i.premultiply)),w)this.size=[f,v],e instanceof Fi||e instanceof Hi||e instanceof lr||e instanceof Xr||Li&&e instanceof Li?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,e):L.texImage2D(L.TEXTURE_2D,0,this.format,f,v,0,this.format,L.UNSIGNED_BYTE,e.data);else{var W=a||{x:0,y:0},oe=W.x,ae=W.y;e instanceof Fi||e instanceof Hi||e instanceof lr||e instanceof Xr||Li&&e instanceof Li?L.texSubImage2D(L.TEXTURE_2D,0,oe,ae,L.RGBA,L.UNSIGNED_BYTE,e):L.texSubImage2D(L.TEXTURE_2D,0,oe,ae,f,v,L.RGBA,L.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D)},ir.prototype.bind=function(e,i,a){var f=this.context.gl;f.bindTexture(f.TEXTURE_2D,this.texture),a!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(a=f.LINEAR),e!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a||e),this.filter=e),i!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,i),this.wrap=i)},ir.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ir.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var br=function(e){var i=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};br.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},br.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ar=function(e,i,a){this.target=e,this.parent=i,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ve(["receive","process"],this),this.invoker=new br(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ln()?e:de};function dr(e,i,a){var f=2*Math.PI*6378137/256/Math.pow(2,a);return[e*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}Ar.prototype.send=function(e,i,a,f,v){var w=this;void 0===v&&(v=!1);var I=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[I]=a);var L=Yr(this.globalScope)?void 0:[];return this.target.postMessage({id:I,type:e,hasCallback:!!a,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:Yt(i,L)},L),{cancel:function(){a&&delete w.callbacks[I],w.target.postMessage({id:I,type:"<cancel>",targetMapId:f,sourceMapId:w.mapId})}}},Ar.prototype.receive=function(e){var i=e.data,a=i.id;if(a&&(!i.targetMapId||this.mapId===i.targetMapId))if("<cancel>"===i.type){delete this.tasks[a];var f=this.cancelCallbacks[a];delete this.cancelCallbacks[a],f&&f()}else ln()||i.mustQueue?(this.tasks[a]=i,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,i)},Ar.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),i=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(e,i)}},Ar.prototype.processTask=function(e,i){var a=this;if("<response>"===i.type){var f=this.callbacks[e];delete this.callbacks[e],f&&(i.error?f(Dn(i.error)):f(null,Dn(i.data)))}else{var v=!1,w=Yr(this.globalScope)?void 0:[],I=i.hasCallback?function(ae,pe){v=!0,delete a.cancelCallbacks[e],a.target.postMessage({id:e,type:"<response>",sourceMapId:a.mapId,error:ae?Yt(ae):null,data:Yt(pe,w)},w)}:function(ae){v=!0},L=null,W=Dn(i.data);if(this.parent[i.type])L=this.parent[i.type](i.sourceMapId,W,I);else if(this.parent.getWorkerSource){var oe=i.type.split(".");L=this.parent.getWorkerSource(i.sourceMapId,oe[0],W.source)[oe[1]](W,I)}else I(new Error("Could not find function "+i.type));!v&&L&&L.cancel&&(this.cancelCallbacks[e]=L.cancel)}},Ar.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Vi=function(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Vi.prototype.setNorthEast=function(e){return this._ne=e instanceof Di?new Di(e.lng,e.lat):Di.convert(e),this},Vi.prototype.setSouthWest=function(e){return this._sw=e instanceof Di?new Di(e.lng,e.lat):Di.convert(e),this},Vi.prototype.extend=function(e){var i,a,f=this._sw,v=this._ne;if(e instanceof Di)i=e,a=e;else{if(!(e instanceof Vi))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Vi.convert(e)):this.extend(Di.convert(e)):this;if(a=e._ne,!(i=e._sw)||!a)return this}return f||v?(f.lng=Math.min(i.lng,f.lng),f.lat=Math.min(i.lat,f.lat),v.lng=Math.max(a.lng,v.lng),v.lat=Math.max(a.lat,v.lat)):(this._sw=new Di(i.lng,i.lat),this._ne=new Di(a.lng,a.lat)),this},Vi.prototype.getCenter=function(){return new Di((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Vi.prototype.getSouthWest=function(){return this._sw},Vi.prototype.getNorthEast=function(){return this._ne},Vi.prototype.getNorthWest=function(){return new Di(this.getWest(),this.getNorth())},Vi.prototype.getSouthEast=function(){return new Di(this.getEast(),this.getSouth())},Vi.prototype.getWest=function(){return this._sw.lng},Vi.prototype.getSouth=function(){return this._sw.lat},Vi.prototype.getEast=function(){return this._ne.lng},Vi.prototype.getNorth=function(){return this._ne.lat},Vi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Vi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Vi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Vi.prototype.contains=function(e){var i=Di.convert(e),a=i.lng,f=i.lat,v=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&v},Vi.convert=function(e){return!e||e instanceof Vi?e:new Vi(e)};var Di=function(e,i){if(isNaN(e)||isNaN(i))throw new Error("Invalid LngLat object: ("+e+", "+i+")");if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Di.prototype.wrap=function(){return new Di(ke(this.lng,-180,180),this.lat)},Di.prototype.toArray=function(){return[this.lng,this.lat]},Di.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Di.prototype.distanceTo=function(e){var i=Math.PI/180,a=this.lat*i,f=e.lat*i,v=Math.sin(a)*Math.sin(f)+Math.cos(a)*Math.cos(f)*Math.cos((e.lng-this.lng)*i);return 6371008.8*Math.acos(Math.min(v,1))},Di.prototype.toBounds=function(e){void 0===e&&(e=0);var i=360*e/40075017,a=i/Math.cos(Math.PI/180*this.lat);return new Vi(new Di(this.lng-a,this.lat-i),new Di(this.lng+a,this.lat+i))},Di.convert=function(e){if(e instanceof Di)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Di(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Di(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ta=2*Math.PI*6371008.8;function Pl(e){return ta*Math.cos(e*Math.PI/180)}function na(e){return(180+e)/360}function pl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Kl(e,i){return e/Pl(i)}function ks(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var os=function(e,i,a){void 0===a&&(a=0),this.x=+e,this.y=+i,this.z=+a};os.fromLngLat=function(e,i){void 0===i&&(i=0);var a=Di.convert(e);return new os(na(a.lng),pl(a.lat),Kl(i,a.lat))},os.prototype.toLngLat=function(){return new Di(360*this.x-180,ks(this.y))},os.prototype.toAltitude=function(){return this.z*Pl(ks(this.y))},os.prototype.meterInMercatorCoordinateUnits=function(){return 1/ta*(e=ks(this.y),1/Math.cos(e*Math.PI/180));var e};var fl=function(e,i,a){this.z=e,this.x=i,this.y=a,this.key=Cu(0,e,e,i,a)};fl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},fl.prototype.url=function(e,i){var a,f,v,w,I,L=(f=this.y,v=this.z,w=dr(256*(a=this.x),256*(f=Math.pow(2,v)-f-1),v),I=dr(256*(a+1),256*(f+1),v),w[0]+","+w[1]+","+I[0]+","+I[1]),W=function(oe,ae,pe){for(var ve,Ce="",$e=oe;$e>0;$e--)Ce+=(ae&(ve=1<<$e-1)?1:0)+(pe&ve?2:0);return Ce}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",W).replace("{bbox-epsg-3857}",L)},fl.prototype.getTilePoint=function(e){var i=Math.pow(2,this.z);return new U(8192*(e.x*i-this.x),8192*(e.y*i-this.y))},fl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var nu=function(e,i){this.wrap=e,this.canonical=i,this.key=Cu(e,i.z,i.z,i.x,i.y)},so=function(e,i,a,f,v){this.overscaledZ=e,this.wrap=i,this.canonical=new fl(a,+f,+v),this.key=Cu(i,e,a,f,v)};function Cu(e,i,a,f,v){(e*=2)<0&&(e=-1*e-1);var w=1<<a;return(w*w*e+w*v+f).toString(36)+a.toString(36)+i.toString(36)}so.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},so.prototype.scaledTo=function(e){var i=this.canonical.z-e;return e>this.canonical.z?new so(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new so(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)},so.prototype.calculateScaledKey=function(e,i){var a=this.canonical.z-e;return e>this.canonical.z?Cu(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y):Cu(this.wrap*+i,e,e,this.canonical.x>>a,this.canonical.y>>a)},so.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var i=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i},so.prototype.children=function(e){if(this.overscaledZ>=e)return[new so(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,a=2*this.canonical.x,f=2*this.canonical.y;return[new so(i,this.wrap,i,a,f),new so(i,this.wrap,i,a+1,f),new so(i,this.wrap,i,a,f+1),new so(i,this.wrap,i,a+1,f+1)]},so.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},so.prototype.wrapped=function(){return new so(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},so.prototype.unwrapTo=function(e){return new so(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},so.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},so.prototype.toUnwrapped=function(){return new nu(this.wrap,this.canonical)},so.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},so.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new os(e.x-this.wrap,e.y))},G("CanonicalTileID",fl),G("OverscaledTileID",so,{omit:["posMatrix"]});var Ya=function(e,i,a){if(this.uid=e,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(a&&"mapbox"!==a&&"terrarium"!==a)return St('"'+a+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var f=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=a||"mapbox";for(var v=0;v<f;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(f,v)]=this.data[this._idx(f-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,f)]=this.data[this._idx(v,f-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(f,-1)]=this.data[this._idx(f-1,0)],this.data[this._idx(-1,f)]=this.data[this._idx(0,f-1)],this.data[this._idx(f,f)]=this.data[this._idx(f-1,f-1)]};Ya.prototype.get=function(e,i){var a=new Uint8Array(this.data.buffer),f=4*this._idx(e,i);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(a[f],a[f+1],a[f+2])},Ya.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ya.prototype._idx=function(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)},Ya.prototype._unpackMapbox=function(e,i,a){return(256*e*256+256*i+a)/10-1e4},Ya.prototype._unpackTerrarium=function(e,i,a){return 256*e+i+a/256-32768},Ya.prototype.getPixels=function(){return new Xs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ya.prototype.backfillBorder=function(e,i,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var f=i*this.dim,v=i*this.dim+this.dim,w=a*this.dim,I=a*this.dim+this.dim;switch(i){case-1:f=v-1;break;case 1:v=f+1}switch(a){case-1:w=I-1;break;case 1:I=w+1}for(var L=-i*this.dim,W=-a*this.dim,oe=w;oe<I;oe++)for(var ae=f;ae<v;ae++)this.data[this._idx(ae,oe)]=e.data[this._idx(ae+L,oe+W)]},G("DEMData",Ya);var Du=function(e){this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var a=e[i];this._stringToNumber[a]=i,this._numberToString[i]=a}};Du.prototype.encode=function(e){return this._stringToNumber[e]},Du.prototype.decode=function(e){return this._numberToString[e]};var cc=function(e,i,a,f,v){this.type="Feature",this._vectorTileFeature=e,e._z=i,e._x=a,e._y=f,this.properties=e.properties,this.id=v},Rs={geometry:{configurable:!0}};Rs.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rs.geometry.set=function(e){this._geometry=e},cc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var i in this)"_geometry"!==i&&"_vectorTileFeature"!==i&&(e[i]=this[i]);return e},Object.defineProperties(cc.prototype,Rs);var Wa=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wa.prototype.updateState=function(e,i,a){var f=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][f]=this.stateChanges[e][f]||{},De(this.stateChanges[e][f],a),null===this.deletedStates[e])for(var v in this.deletedStates[e]={},this.state[e])v!==f&&(this.deletedStates[e][v]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][f])for(var w in this.deletedStates[e][f]={},this.state[e][f])a[w]||(this.deletedStates[e][f][w]=null);else for(var I in a)this.deletedStates[e]&&this.deletedStates[e][f]&&null===this.deletedStates[e][f][I]&&delete this.deletedStates[e][f][I]},Wa.prototype.removeFeatureState=function(e,i,a){if(null!==this.deletedStates[e]){var f=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&void 0!==i)null!==this.deletedStates[e][f]&&(this.deletedStates[e][f]=this.deletedStates[e][f]||{},this.deletedStates[e][f][a]=null);else if(void 0!==i)if(this.stateChanges[e]&&this.stateChanges[e][f])for(a in this.deletedStates[e][f]={},this.stateChanges[e][f])this.deletedStates[e][f][a]=null;else this.deletedStates[e][f]=null;else this.deletedStates[e]=null}},Wa.prototype.getState=function(e,i){var a=String(i),f=De({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var v=this.deletedStates[e][i];if(null===v)return{};for(var w in v)delete f[w]}return f},Wa.prototype.initializeTileState=function(e,i){e.setFeatureState(this.state,i)},Wa.prototype.coalesceChanges=function(e,i){var a={};for(var f in this.stateChanges){this.state[f]=this.state[f]||{};var v={};for(var w in this.stateChanges[f])this.state[f][w]||(this.state[f][w]={}),De(this.state[f][w],this.stateChanges[f][w]),v[w]=this.state[f][w];a[f]=v}for(var I in this.deletedStates){this.state[I]=this.state[I]||{};var L={};if(null===this.deletedStates[I])for(var W in this.state[I])L[W]={},this.state[I][W]={};else for(var oe in this.deletedStates[I]){if(null===this.deletedStates[I][oe])this.state[I][oe]={};else for(var ae=0,pe=Object.keys(this.deletedStates[I][oe]);ae<pe.length;ae+=1)delete this.state[I][oe][pe[ae]];L[oe]=this.state[I][oe]}a[I]=a[I]||{},De(a[I],L)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(a).length)for(var ve in e)e[ve].setFeatureState(a,i)};var Qo=function(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new wa(8192,16,0),this.grid3D=new wa(8192,16,0),this.featureIndexArray=new ge,this.promoteId=i};function pa(e,i,a,f,v){return Ne(e,function(w,I){var L=i instanceof Pc?i.get(I):null;return L&&L.evaluate?L.evaluate(a,f,v):L})}function Eu(e){for(var i=1/0,a=1/0,f=-1/0,v=-1/0,w=0,I=e;w<I.length;w+=1){var L=I[w];i=Math.min(i,L.x),a=Math.min(a,L.y),f=Math.max(f,L.x),v=Math.max(v,L.y)}return{minX:i,minY:a,maxX:f,maxY:v}}function Sd(e,i){return i-e}Qo.prototype.insert=function(e,i,a,f,v,w){var I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,f,v);for(var L=w?this.grid3D:this.grid,W=0;W<i.length;W++){for(var oe=i[W],ae=[1/0,1/0,-1/0,-1/0],pe=0;pe<oe.length;pe++){var ve=oe[pe];ae[0]=Math.min(ae[0],ve.x),ae[1]=Math.min(ae[1],ve.y),ae[2]=Math.max(ae[2],ve.x),ae[3]=Math.max(ae[3],ve.y)}ae[0]<8192&&ae[1]<8192&&ae[2]>=0&&ae[3]>=0&&L.insert(I,ae[0],ae[1],ae[2],ae[3])}},Qo.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new du.VectorTile(new Xc(this.rawTileData)).layers,this.sourceLayerCoder=new Du(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qo.prototype.query=function(e,i,a,f){var v=this;this.loadVTLayers();for(var w=e.params||{},I=8192/e.tileSize/e.scale,L=Bl(w.filter),W=e.queryGeometry,oe=e.queryPadding*I,ae=Eu(W),pe=this.grid.query(ae.minX-oe,ae.minY-oe,ae.maxX+oe,ae.maxY+oe),ve=Eu(e.cameraQueryGeometry),$e=0,Ze=this.grid3D.query(ve.minX-oe,ve.minY-oe,ve.maxX+oe,ve.maxY+oe,function(wt,Et,$t,an){return function(dn,Un,xn,Ln,mn){for(var Mi=0,ni=dn;Mi<ni.length;Mi+=1){var kn=ni[Mi];if(Un<=kn.x&&xn<=kn.y&&Ln>=kn.x&&mn>=kn.y)return!0}var Bi=[new U(Un,xn),new U(Un,mn),new U(Ln,mn),new U(Ln,xn)];if(dn.length>2)for(var yi=0,rr=Bi;yi<rr.length;yi+=1)if(Sl(dn,rr[yi]))return!0;for(var Gn=0;Gn<dn.length-1;Gn++)if(Fc(dn[Gn],dn[Gn+1],Bi))return!0;return!1}(e.cameraQueryGeometry,wt-oe,Et-oe,$t+oe,an+oe)});$e<Ze.length;$e+=1)pe.push(Ze[$e]);pe.sort(Sd);for(var ot,nt={},mt=function(wt){var Et=pe[wt];if(Et!==ot){ot=Et;var $t=v.featureIndexArray.get(Et),an=null;v.loadMatchingFeature(nt,$t.bucketIndex,$t.sourceLayerIndex,$t.featureIndex,L,w.layers,w.availableImages,i,a,f,function(dn,Un,xn){return an||(an=$r(dn)),Un.queryIntersectsFeature(W,dn,xn,an,v.z,e.transform,I,e.pixelPosMatrix)})}},gt=0;gt<pe.length;gt++)mt(gt);return nt},Qo.prototype.loadMatchingFeature=function(e,i,a,f,v,w,I,L,W,oe,ae){var pe=this.bucketLayerIDs[i];if(!w||function(dn,Un){for(var xn=0;xn<dn.length;xn++)if(Un.indexOf(dn[xn])>=0)return!0;return!1}(w,pe)){var ve=this.sourceLayerCoder.decode(a),Ce=this.vtLayers[ve].feature(f);if(v.needGeometry){var $e=po(Ce,!0);if(!v.filter(new _i(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!v.filter(new _i(this.tileID.overscaledZ),Ce))return;for(var Ze=this.getId(Ce,ve),ot=0;ot<pe.length;ot++){var nt=pe[ot];if(!(w&&w.indexOf(nt)<0)){var mt=L[nt];if(mt){var gt={};void 0!==Ze&&oe&&(gt=oe.getState(mt.sourceLayer||"_geojsonTileLayer",Ze));var wt=De({},W[nt]);wt.paint=pa(wt.paint,mt.paint,Ce,gt,I),wt.layout=pa(wt.layout,mt.layout,Ce,gt,I);var Et=!ae||ae(Ce,mt,gt);if(Et){var $t=new cc(Ce,this.z,this.x,this.y,Ze);$t.layer=wt;var an=e[nt];void 0===an&&(an=e[nt]=[]),an.push({featureIndex:f,feature:$t,intersectionZ:Et})}}}}}},Qo.prototype.lookupSymbolFeatures=function(e,i,a,f,v,w,I,L){var W={};this.loadVTLayers();for(var oe=Bl(v),ae=0,pe=e;ae<pe.length;ae+=1)this.loadMatchingFeature(W,a,f,pe[ae],oe,w,I,L,i);return W},Qo.prototype.hasLayer=function(e){for(var i=0,a=this.bucketLayerIDs;i<a.length;i+=1)for(var f=0,v=a[i];f<v.length;f+=1)if(e===v[f])return!0;return!1},Qo.prototype.getId=function(e,i){var a=e.id;return this.promoteId&&"boolean"==typeof(a=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[i]])&&(a=Number(a)),a},G("FeatureIndex",Qo,{omit:["rawTileData","sourceLayerCoder"]});var Eo=function(e,i){this.tileID=e,this.uid=Qe(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Eo.prototype.registerFadeDuration=function(e){var i=e+this.timeAdded;i<_t.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},Eo.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Eo.prototype.loadVectorData=function(e,i,a){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var f in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(oe,ae){var pe={};if(!ae)return pe;for(var ve=function(){var Ze=$e[Ce],ot=Ze.layerIds.map(function(gt){return ae.getLayer(gt)}).filter(Boolean);if(0!==ot.length){Ze.layers=ot,Ze.stateDependentLayerIds&&(Ze.stateDependentLayers=Ze.stateDependentLayerIds.map(function(gt){return ot.filter(function(wt){return wt.id===gt})[0]}));for(var nt=0,mt=ot;nt<mt.length;nt+=1)pe[mt[nt].id]=Ze}},Ce=0,$e=oe;Ce<$e.length;Ce+=1)ve();return pe}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var v=this.buckets[f];if(v instanceof ee){if(this.hasSymbolBuckets=!0,!a)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var w in this.buckets){var I=this.buckets[w];if(I instanceof ee&&I.hasRTLText){this.hasRTLText=!0,zs.isLoading()||zs.isLoaded()||"deferred"!==Tl()||is();break}}for(var L in this.queryPadding=0,this.buckets){var W=this.buckets[L];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(L).queryRadius(W))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new d},Eo.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Eo.prototype.getBucket=function(e){return this.buckets[e.id]},Eo.prototype.upload=function(e){for(var i in this.buckets){var a=this.buckets[i];a.uploadPending()&&a.upload(e)}var f=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ir(e,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ir(e,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)},Eo.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Eo.prototype.queryRenderedFeatures=function(e,i,a,f,v,w,I,L,W,oe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:v,scale:w,tileSize:this.tileSize,pixelPosMatrix:oe,transform:L,params:I,queryPadding:this.queryPadding*W},e,i,a):{}},Eo.prototype.querySourceFeatures=function(e,i){var a=this.latestFeatureIndex;if(a&&a.rawTileData){var f=a.loadVTLayers(),v=i?i.sourceLayer:"",w=f._geojsonTileLayer||f[v];if(w)for(var I=Bl(i&&i.filter),L=this.tileID.canonical,W=L.z,oe=L.x,ae=L.y,pe={z:W,x:oe,y:ae},ve=0;ve<w.length;ve++){var Ce=w.feature(ve);if(I.needGeometry){var $e=po(Ce,!0);if(!I.filter(new _i(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!I.filter(new _i(this.tileID.overscaledZ),Ce))continue;var Ze=a.getId(Ce,v),ot=new cc(Ce,W,oe,ae,Ze);ot.tile=pe,e.push(ot)}}},Eo.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Eo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Eo.prototype.setExpiryData=function(e){var i=this.expirationTime;if(e.cacheControl){var a=jn(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var f=Date.now(),v=!1;if(this.expirationTime>f)v=!1;else if(i)if(this.expirationTime<i)v=!0;else{var w=this.expirationTime-i;w?this.expirationTime=f+Math.max(w,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Eo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Eo.prototype.setFeatureState=function(e,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var a=this.latestFeatureIndex.loadVTLayers();for(var f in this.buckets)if(i.style.hasLayer(f)){var v=this.buckets[f],w=v.layers[0].sourceLayer||"_geojsonTileLayer",I=a[w],L=e[w];if(I&&L&&0!==Object.keys(L).length){v.update(L,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});var W=i&&i.style&&i.style.getLayer(f);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(v)))}}}},Eo.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Eo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<_t.now()},Eo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Eo.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=_t.now()+e},Eo.prototype.setDependencies=function(e,i){for(var a={},f=0,v=i;f<v.length;f+=1)a[v[f]]=!0;this.dependencies[e]=a},Eo.prototype.hasDependency=function(e,i){for(var a=0,f=e;a<f.length;a+=1){var v=this.dependencies[f[a]];if(v)for(var w=0,I=i;w<I.length;w+=1)if(v[I[w]])return!0}return!1};var jc=de.performance,Xd=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},jc.mark(this._marks.start)};Xd.prototype.finish=function(){jc.mark(this._marks.end);var e=jc.getEntriesByName(this._marks.measure);return 0===e.length&&(jc.measure(this._marks.measure,this._marks.start,this._marks.end),e=jc.getEntriesByName(this._marks.measure),jc.clearMarks(this._marks.start),jc.clearMarks(this._marks.end),jc.clearMeasures(this._marks.measure)),e},t.Actor=Ar,t.AlphaImage=rc,t.CanonicalTileID=fl,t.CollisionBoxArray=d,t.Color=pi,t.DEMData=Ya,t.DataConstantProperty=Sn,t.DictionaryCoder=Du,t.EXTENT=8192,t.ErrorEvent=Je,t.EvaluationParameters=_i,t.Event=Re,t.Evented=Xe,t.FeatureIndex=Qo,t.FillBucket=Sa,t.FillExtrusionBucket=Zl,t.ImageAtlas=ac,t.ImagePosition=Wu,t.LineBucket=Ps,t.LngLat=Di,t.LngLatBounds=Vi,t.MercatorCoordinate=os,t.ONE_EM=24,t.OverscaledTileID=so,t.Point=U,t.Point$1=U,t.Properties=Ho,t.Protobuf=Xc,t.RGBAImage=Xs,t.RequestManager=Kn,t.RequestPerformance=Xd,t.ResourceType=fi,t.SegmentVector=M,t.SourceFeatureState=Wa,t.StructArrayLayout1ui2=Yc,t.StructArrayLayout2f1f2i16=Gl,t.StructArrayLayout2i4=Da,t.StructArrayLayout3ui6=qo,t.StructArrayLayout4i8=kc,t.SymbolBucket=ee,t.Texture=ir,t.Tile=Eo,t.Transitionable=Fo,t.Uniform1f=rn,t.Uniform1i=Ft,t.Uniform2f=Qt,t.Uniform3f=pn,t.Uniform4f=zn,t.UniformColor=Nn,t.UniformMatrix4f=zi,t.UnwrappedTileID=nu,t.ValidationError=Ge,t.WritingMode=Za,t.ZoomHistory=cr,t.add=function(e,i,a){return e[0]=i[0]+a[0],e[1]=i[1]+a[1],e[2]=i[2]+a[2],e},t.addDynamicAttributes=T,t.asyncAll=function(e,i,a){if(!e.length)return a(null,[]);var f=e.length,v=new Array(e.length),w=null;e.forEach(function(I,L){i(I,function(W,oe){W&&(w=W),v[L]=oe,0==--f&&a(w,v)})})},t.bezier=Se,t.bindAll=Ve,t.browser=_t,t.cacheEntryPossiblyAdded=function(e){++bn>It&&(e.getActor().send("enforceCacheSizeLimit",ht),bn=0)},t.clamp=je,t.clearTileCache=function(e){var i=de.caches.delete("mapbox-tiles");e&&i.catch(e).then(function(){return e()})},t.clipLine=Uc,t.clone=function(e){var i=new hr(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},t.clone$1=it,t.clone$2=function(e){var i=new hr(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},t.collisionCircleLayout=yh,t.config=Ot,t.create=function(){var e=new hr(16);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.create$1=function(){var e=new hr(9);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.create$2=function(){var e=new hr(4);return hr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.createCommonjsModule=ie,t.createExpression=Xa,t.createLayout=wo,t.createStyleLayer=function(e){return"custom"===e.type?new Xi(e):new ci[e.type](e)},t.cross=function(e,i,a){var f=i[0],v=i[1],w=i[2],I=a[0],L=a[1],W=a[2];return e[0]=v*W-w*L,e[1]=w*I-f*W,e[2]=f*L-v*I,e},t.deepEqual=function e(i,a){if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var f=0;f<i.length;f++)if(!e(i[f],a[f]))return!1;return!0}if("object"==typeof i&&null!==i&&null!==a){if("object"!=typeof a||Object.keys(i).length!==Object.keys(a).length)return!1;for(var v in i)if(!e(i[v],a[v]))return!1;return!0}return i===a},t.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},t.dot$1=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},t.ease=Ye,t.emitValidationErrors=Ur,t.endsWith=Fe,t.enforceCacheSizeLimit=function(e){Jt(),qi&&qi.then(function(i){i.keys().then(function(a){for(var f=0;f<a.length-e;f++)i.delete(a[f])})})},t.evaluateSizeForFeature=Cd,t.evaluateSizeForZoom=Kh,t.evaluateVariableOffset=tu,t.evented=Vl,t.extend=De,t.featureFilter=Bl,t.filterObject=Be,t.fromRotation=function(e,i){var a=Math.sin(i),f=Math.cos(i);return e[0]=f,e[1]=a,e[2]=0,e[3]=-a,e[4]=f,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.getAnchorAlignment=bu,t.getAnchorJustification=Qu,t.getArrayBuffer=to,t.getImage=X,t.getJSON=function(e,i){return eo(De(e,{type:"json"}),i)},t.getRTLTextPluginStatus=Tl,t.getReferrer=hi,t.getVideo=function(e,i){var a,f,v=de.document.createElement("video");v.muted=!0,v.onloadstart=function(){i(null,v)};for(var w=0;w<e.length;w++){var I=de.document.createElement("source");a=e[w],f=void 0,(f=de.document.createElement("a")).href=a,(f.protocol!==de.document.location.protocol||f.host!==de.document.location.host)&&(v.crossOrigin="Anonymous"),I.src=e[w],v.appendChild(I)}return{cancel:function(){}}},t.identity=$a,t.invert=function(e,i){var a=i[0],f=i[1],v=i[2],w=i[3],I=i[4],L=i[5],W=i[6],oe=i[7],ae=i[8],pe=i[9],ve=i[10],Ce=i[11],$e=i[12],Ze=i[13],ot=i[14],nt=i[15],mt=a*L-f*I,gt=a*W-v*I,wt=a*oe-w*I,Et=f*W-v*L,$t=f*oe-w*L,an=v*oe-w*W,dn=ae*Ze-pe*$e,Un=ae*ot-ve*$e,xn=ae*nt-Ce*$e,Ln=pe*ot-ve*Ze,mn=pe*nt-Ce*Ze,Mi=ve*nt-Ce*ot,ni=mt*Mi-gt*mn+wt*Ln+Et*xn-$t*Un+an*dn;return ni?(e[0]=(L*Mi-W*mn+oe*Ln)*(ni=1/ni),e[1]=(v*mn-f*Mi-w*Ln)*ni,e[2]=(Ze*an-ot*$t+nt*Et)*ni,e[3]=(ve*$t-pe*an-Ce*Et)*ni,e[4]=(W*xn-I*Mi-oe*Un)*ni,e[5]=(a*Mi-v*xn+w*Un)*ni,e[6]=(ot*wt-$e*an-nt*gt)*ni,e[7]=(ae*an-ve*wt+Ce*gt)*ni,e[8]=(I*mn-L*xn+oe*dn)*ni,e[9]=(f*xn-a*mn-w*dn)*ni,e[10]=($e*$t-Ze*wt+nt*mt)*ni,e[11]=(pe*wt-ae*$t-Ce*mt)*ni,e[12]=(L*Un-I*Ln-W*dn)*ni,e[13]=(a*Ln-f*Un+v*dn)*ni,e[14]=(Ze*gt-$e*Et-ot*mt)*ni,e[15]=(ae*Et-pe*gt+ve*mt)*ni,e):null},t.isChar=Wt,t.isMapboxURL=Hn,t.keysDifference=function(e,i){var a=[];for(var f in e)f in i||a.push(f);return a},t.makeRequest=eo,t.mapObject=Ne,t.mercatorXfromLng=na,t.mercatorYfromLat=pl,t.mercatorZfromAltitude=Kl,t.mul=Ld,t.multiply=Qs,t.mvt=du,t.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},t.normalize=function(e,i){var a=i[0],f=i[1],v=i[2],w=a*a+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),e[0]=i[0]*w,e[1]=i[1]*w,e[2]=i[2]*w,e},t.number=jr,t.offscreenCanvasSupported=di,t.ortho=function(e,i,a,f,v,w,I){var L=1/(i-a),W=1/(f-v),oe=1/(w-I);return e[0]=-2*L,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*W,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*oe,e[11]=0,e[12]=(i+a)*L,e[13]=(v+f)*W,e[14]=(I+w)*oe,e[15]=1,e},t.parseGlyphPBF=function(e){return new Xc(e).readFields(Zh,[])},t.pbf=Xc,t.performSymbolLayout=function(e,i,a,f,v,w,I){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var L=e.layers[0].layout,W=e.layers[0]._unevaluatedLayout._values,oe={};if("composite"===e.textSizeData.kind){var ae=e.textSizeData,pe=ae.maxZoom;oe.compositeTextSizes=[W["text-size"].possiblyEvaluate(new _i(ae.minZoom),I),W["text-size"].possiblyEvaluate(new _i(pe),I)]}if("composite"===e.iconSizeData.kind){var ve=e.iconSizeData,Ce=ve.maxZoom;oe.compositeIconSizes=[W["icon-size"].possiblyEvaluate(new _i(ve.minZoom),I),W["icon-size"].possiblyEvaluate(new _i(Ce),I)]}oe.layoutTextSize=W["text-size"].possiblyEvaluate(new _i(e.zoom+1),I),oe.layoutIconSize=W["icon-size"].possiblyEvaluate(new _i(e.zoom+1),I),oe.textMaxSize=W["text-size"].possiblyEvaluate(new _i(18));for(var $e=24*L.get("text-line-height"),Ze="map"===L.get("text-rotation-alignment")&&"point"!==L.get("symbol-placement"),ot=L.get("text-keep-upright"),nt=L.get("text-size"),mt=function(){var Et=wt[gt],$t=L.get("text-font").evaluate(Et,{},I).join(","),an=nt.evaluate(Et,{},I),dn=oe.layoutTextSize.evaluate(Et,{},I),Un=oe.layoutIconSize.evaluate(Et,{},I),xn={horizontal:{},vertical:void 0},Ln=Et.text,mn=[0,0];if(Ln){var Mi=Ln.toString(),ni=24*L.get("text-letter-spacing").evaluate(Et,{},I),kn=function(Gi){for(var Zr=0,Dr=Gi;Zr<Dr.length;Zr+=1)if(er=Dr[Zr].charCodeAt(0),Wt.Arabic(er)||Wt["Arabic Supplement"](er)||Wt["Arabic Extended-A"](er)||Wt["Arabic Presentation Forms-A"](er)||Wt["Arabic Presentation Forms-B"](er))return!1;var er;return!0}(Mi)?ni:0,Bi=L.get("text-anchor").evaluate(Et,{},I),yi=L.get("text-variable-anchor");if(!yi){var rr=L.get("text-radial-offset").evaluate(Et,{},I);mn=rr?tu(Bi,[24*rr,Sc]):L.get("text-offset").evaluate(Et,{},I).map(function(Gi){return 24*Gi})}var Gn=Ze?"center":L.get("text-justify").evaluate(Et,{},I),pr=L.get("symbol-placement"),fo="point"===pr?24*L.get("text-max-width").evaluate(Et,{},I):0,$o=function(){e.allowVerticalPlacement&&Wi(Mi)&&(xn.vertical=wd(Ln,i,a,v,$t,fo,$e,Bi,"left",kn,mn,Za.vertical,!0,pr,dn,an))};if(!Ze&&yi){for(var $n="auto"===Gn?yi.map(function(Gi){return Qu(Gi)}):[Gn],ao=!1,To=0;To<$n.length;To++){var ss=$n[To];if(!xn.horizontal[ss])if(ao)xn.horizontal[ss]=xn.horizontal[0];else{var ys=wd(Ln,i,a,v,$t,fo,$e,"center",ss,kn,mn,Za.horizontal,!1,pr,dn,an);ys&&(xn.horizontal[ss]=ys,ao=1===ys.positionedLines.length)}}$o()}else{"auto"===Gn&&(Gn=Qu(Bi));var fa=wd(Ln,i,a,v,$t,fo,$e,Bi,Gn,kn,mn,Za.horizontal,!1,pr,dn,an);fa&&(xn.horizontal[Gn]=fa),$o(),Wi(Mi)&&Ze&&ot&&(xn.vertical=wd(Ln,i,a,v,$t,fo,$e,Bi,Gn,kn,mn,Za.vertical,!1,pr,dn,an))}}var Gi,Zr,er,Bo,bs,vs=void 0,Oa=!1;if(Et.icon&&Et.icon.name){var lo=f[Et.icon.name];lo&&(Gi=v[Et.icon.name],Zr=L.get("icon-offset").evaluate(Et,{},I),er=bu(L.get("icon-anchor").evaluate(Et,{},I)),vs={image:Gi,top:bs=Zr[1]-Gi.displaySize[1]*er.verticalAlign,bottom:bs+Gi.displaySize[1],left:Bo=Zr[0]-Gi.displaySize[0]*er.horizontalAlign,right:Bo+Gi.displaySize[0]},Oa=lo.sdf,void 0===e.sdfIcons?e.sdfIcons=lo.sdf:e.sdfIcons!==lo.sdf&&St("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lo.pixelRatio!==e.pixelRatio||0!==L.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var Ns=qh(xn.horizontal)||xn.vertical;e.iconsInText=!!Ns&&Ns.iconsInText,(Ns||vs)&&function(Gi,Zr,Dr,er,Bo,bs,Jr,co,ia,fr,iu){var uc=bs.textMaxSize.evaluate(Zr,{});void 0===uc&&(uc=Jr);var Jl,Zo=Gi.layers[0].layout,dc=Zo.get("icon-offset").evaluate(Zr,{},iu),hc=qh(Dr.horizontal),ml=Jr/24,Tu=Gi.tilePixelRatio*ml,Id=Gi.tilePixelRatio*uc/24,gl=Gi.tilePixelRatio*co,ru=Gi.tilePixelRatio*Zo.get("symbol-spacing"),Mu=Zo.get("text-padding")*Gi.tilePixelRatio,P=Zo.get("icon-padding")*Gi.tilePixelRatio,y=Zo.get("text-max-angle")/180*Math.PI,p="map"===Zo.get("text-rotation-alignment")&&"point"!==Zo.get("symbol-placement"),S="map"===Zo.get("icon-rotation-alignment")&&"point"!==Zo.get("symbol-placement"),J=Zo.get("symbol-placement"),me=ru/2,rt=Zo.get("icon-text-fit");er&&"none"!==rt&&(Gi.allowVerticalPlacement&&Dr.vertical&&(Jl=Ju(er,Dr.vertical,rt,Zo.get("icon-text-fit-padding"),dc,ml)),hc&&(er=Ju(er,hc,rt,Zo.get("icon-text-fit-padding"),dc,ml)));var Bt=function(mf,eh){eh.x<0||eh.x>=8192||eh.y<0||eh.y>=8192||function(as,ou,gf,Pd,vp,Zp,bp,Iu,kl,Oh,xp,Yp,tp,Wp,np,_f,yf,Kp,vf,bf,Rl,wp,xf,Au,rm){var wf,Nl,kd,Ph,kh,th=as.addToLineVertexArray(ou,gf),Cf=0,Df=0,Ef=0,Cp=0,Jp=-1,qp=-1,Hc={},Dp=K(""),Rh=0,Tf=0;if(void 0===Iu._unevaluatedLayout.getValue("text-radial-offset")?(Rh=(wf=Iu.layout.get("text-offset").evaluate(Rl,{},Au).map(function(rp){return 24*rp}))[0],Tf=wf[1]):(Rh=24*Iu.layout.get("text-radial-offset").evaluate(Rl,{},Au),Tf=Sc),as.allowVerticalPlacement&&Pd.vertical){var Ep=Iu.layout.get("text-rotate").evaluate(Rl,{},Au)+90;Ph=new Ed(kl,ou,Oh,xp,Yp,Pd.vertical,tp,Wp,np,Ep),bp&&(kh=new Ed(kl,ou,Oh,xp,Yp,bp,yf,Kp,np,Ep))}if(vp){var Mf=Iu.layout.get("icon-rotate").evaluate(Rl,{}),Qp="none"!==Iu.layout.get("icon-text-fit"),Xp=qu(vp,Mf,xf,Qp),Tp=bp?qu(bp,Mf,xf,Qp):void 0;kd=new Ed(kl,ou,Oh,xp,Yp,vp,yf,Kp,!1,Mf),Cf=4*Xp.length;var ef=as.iconSizeData,nh=null;"source"===ef.kind?(nh=[128*Iu.layout.get("icon-size").evaluate(Rl,{})])[0]>32640&&St(as.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===ef.kind&&((nh=[128*wp.compositeIconSizes[0].evaluate(Rl,{},Au),128*wp.compositeIconSizes[1].evaluate(Rl,{},Au)])[0]>32640||nh[1]>32640)&&St(as.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),as.addSymbols(as.icon,Xp,nh,bf,vf,Rl,!1,ou,th.lineStartIndex,th.lineLength,-1,Au),Jp=as.icon.placedSymbolArray.length-1,Tp&&(Df=4*Tp.length,as.addSymbols(as.icon,Tp,nh,bf,vf,Rl,Za.vertical,ou,th.lineStartIndex,th.lineLength,-1,Au),qp=as.icon.placedSymbolArray.length-1)}for(var Ou in Pd.horizontal){var ih=Pd.horizontal[Ou];if(!Nl){Dp=K(ih.text);var Mp=Iu.layout.get("text-rotate").evaluate(Rl,{},Au);Nl=new Ed(kl,ou,Oh,xp,Yp,ih,tp,Wp,np,Mp)}var Nh=1===ih.positionedLines.length;if(Ef+=Jh(as,ou,ih,Zp,Iu,np,Rl,_f,th,Pd.vertical?Za.horizontal:Za.horizontalOnly,Nh?Object.keys(Pd.horizontal):[Ou],Hc,Jp,wp,Au),Nh)break}Pd.vertical&&(Cp+=Jh(as,ou,Pd.vertical,Zp,Iu,np,Rl,_f,th,Za.vertical,["vertical"],Hc,qp,wp,Au));var om=Nl?Nl.boxStartIndex:as.collisionBoxArray.length,Sf=Nl?Nl.boxEndIndex:as.collisionBoxArray.length,If=Ph?Ph.boxStartIndex:as.collisionBoxArray.length,sm=Ph?Ph.boxEndIndex:as.collisionBoxArray.length,am=kd?kd.boxStartIndex:as.collisionBoxArray.length,ip=kd?kd.boxEndIndex:as.collisionBoxArray.length,lm=kh?kh.boxStartIndex:as.collisionBoxArray.length,ug=kh?kh.boxEndIndex:as.collisionBoxArray.length,Pu=-1,Sp=function(rp,Of){return rp&&rp.circleDiameter?Math.max(rp.circleDiameter,Of):Of};Pu=Sp(Nl,Pu),Pu=Sp(Ph,Pu),Pu=Sp(kd,Pu);var Af=(Pu=Sp(kh,Pu))>-1?1:0;Af&&(Pu*=rm/24),as.glyphOffsetArray.length>=ee.MAX_GLYPHS&&St("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Rl.sortKey&&as.addToSortKeyRanges(as.symbolInstances.length,Rl.sortKey),as.symbolInstances.emplaceBack(ou.x,ou.y,Hc.right>=0?Hc.right:-1,Hc.center>=0?Hc.center:-1,Hc.left>=0?Hc.left:-1,Hc.vertical||-1,Jp,qp,Dp,om,Sf,If,sm,am,ip,lm,ug,Oh,Ef,Cp,Cf,Df,Af,0,tp,Rh,Tf,Pu)}(Gi,eh,mf,Dr,er,Bo,Jl,Gi.layers[0],Gi.collisionBoxArray,Zr.index,Zr.sourceLayerIndex,Gi.index,Tu,Mu,p,ia,gl,P,S,dc,Zr,bs,fr,iu,Jr)};if("line"===J)for(var Tn=0,Rn=Uc(Zr.geometry,0,0,8192,8192);Tn<Rn.length;Tn+=1)for(var ri=Rn[Tn],Ki=0,ql=Mh(ri,ru,y,Dr.vertical||hc,er,24,Id,Gi.overscaling,8192);Ki<ql.length;Ki+=1){var Ka=ql[Ki];hc&&Qd(Gi,hc.text,me,Ka)||Bt(ri,Ka)}else if("line-center"===J)for(var xs=0,_l=Zr.geometry;xs<_l.length;xs+=1){var Ad=_l[xs];if(Ad.length>1){var Qh=Th(Ad,y,Dr.vertical||hc,er,24,Id);Qh&&Bt(Ad,Qh)}}else if("Polygon"===Zr.type)for(var Ih=0,_p=uh(Zr.geometry,0);Ih<_p.length;Ih+=1){var Xu=_p[Ih],Su=Lo(Xu,16);Bt(Xu[0],new eu(Su.x,Su.y,0))}else if("LineString"===Zr.type)for(var ed=0,td=Zr.geometry;ed<td.length;ed+=1){var Od=td[ed];Bt(Od,new eu(Od[0].x,Od[0].y,0))}else if("Point"===Zr.type)for(var Ah=0,$p=Zr.geometry;Ah<$p.length;Ah+=1)for(var Xh=0,yp=$p[Ah];Xh<yp.length;Xh+=1){var ep=yp[Xh];Bt([ep],new eu(ep.x,ep.y,0))}}(e,Et,xn,vs,f,oe,dn,Un,mn,Oa,I)},gt=0,wt=e.features;gt<wt.length;gt+=1)mt();w&&e.generateCollisionDebugBuffers()},t.perspective=function(e,i,a,f,v){var w,I=1/Math.tan(i/2);return e[0]=I/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=I,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=v&&v!==1/0?(e[10]=(v+f)*(w=1/(f-v)),e[14]=2*v*f*w):(e[10]=-1,e[14]=-2*f),e},t.pick=function(e,i){for(var a={},f=0;f<i.length;f++){var v=i[f];v in e&&(a[v]=e[v])}return a},t.plugin=zs,t.polygonIntersectsPolygon=Ea,t.postMapLoadEvent=ce,t.postTurnstileEvent=Ei,t.potpack=Ch,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=G,t.registerForPluginStateChange=function(e){return e({pluginStatus:bo,pluginURL:no}),Vl.on("pluginStateChange",e),e},t.renderColorRamp=ld,t.rotate=function(e,i,a){var f=i[0],v=i[1],w=i[2],I=i[3],L=Math.sin(a),W=Math.cos(a);return e[0]=f*W+w*L,e[1]=v*W+I*L,e[2]=f*-L+w*W,e[3]=v*-L+I*W,e},t.rotateX=function(e,i,a){var f=Math.sin(a),v=Math.cos(a),w=i[4],I=i[5],L=i[6],W=i[7],oe=i[8],ae=i[9],pe=i[10],ve=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=w*v+oe*f,e[5]=I*v+ae*f,e[6]=L*v+pe*f,e[7]=W*v+ve*f,e[8]=oe*v-w*f,e[9]=ae*v-I*f,e[10]=pe*v-L*f,e[11]=ve*v-W*f,e},t.rotateZ=function(e,i,a){var f=Math.sin(a),v=Math.cos(a),w=i[0],I=i[1],L=i[2],W=i[3],oe=i[4],ae=i[5],pe=i[6],ve=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=w*v+oe*f,e[1]=I*v+ae*f,e[2]=L*v+pe*f,e[3]=W*v+ve*f,e[4]=oe*v-w*f,e[5]=ae*v-I*f,e[6]=pe*v-L*f,e[7]=ve*v-W*f,e},t.scale=function(e,i,a){var f=a[0],v=a[1],w=a[2];return e[0]=i[0]*f,e[1]=i[1]*f,e[2]=i[2]*f,e[3]=i[3]*f,e[4]=i[4]*v,e[5]=i[5]*v,e[6]=i[6]*v,e[7]=i[7]*v,e[8]=i[8]*w,e[9]=i[9]*w,e[10]=i[10]*w,e[11]=i[11]*w,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},t.scale$1=function(e,i,a){return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[3]=i[3]*a,e},t.scale$2=function(e,i,a){return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e},t.setCacheLimits=function(e,i){ht=e,It=i},t.setRTLTextPlugin=function(e,i,a){if(void 0===a&&(a=!1),"deferred"===bo||"loading"===bo||"loaded"===bo)throw new Error("setRTLTextPlugin cannot be called multiple times.");no=_t.resolveURL(e),bo="deferred",Bs=i,ja(),a||is()},t.sphericalToCartesian=function(e){var i=e[0],a=e[1],f=e[2];return a+=90,a*=Math.PI/180,f*=Math.PI/180,{x:i*Math.cos(a)*Math.sin(f),y:i*Math.sin(a)*Math.sin(f),z:i*Math.cos(f)}},t.sqrLen=function(e){var i=e[0],a=e[1];return i*i+a*a},t.styleSpec=xe,t.sub=function(e,i,a){return e[0]=i[0]-a[0],e[1]=i[1]-a[1],e[2]=i[2]-a[2],e},t.symbolSize=fp,t.transformMat3=function(e,i,a){var f=i[0],v=i[1],w=i[2];return e[0]=f*a[0]+v*a[3]+w*a[6],e[1]=f*a[1]+v*a[4]+w*a[7],e[2]=f*a[2]+v*a[5]+w*a[8],e},t.transformMat4=Bd,t.translate=function(e,i,a){var f,v,w,I,L,W,oe,ae,pe,ve,Ce,$e,Ze=a[0],ot=a[1],nt=a[2];return i===e?(e[12]=i[0]*Ze+i[4]*ot+i[8]*nt+i[12],e[13]=i[1]*Ze+i[5]*ot+i[9]*nt+i[13],e[14]=i[2]*Ze+i[6]*ot+i[10]*nt+i[14],e[15]=i[3]*Ze+i[7]*ot+i[11]*nt+i[15]):(v=i[1],w=i[2],I=i[3],L=i[4],W=i[5],oe=i[6],ae=i[7],pe=i[8],ve=i[9],Ce=i[10],$e=i[11],e[0]=f=i[0],e[1]=v,e[2]=w,e[3]=I,e[4]=L,e[5]=W,e[6]=oe,e[7]=ae,e[8]=pe,e[9]=ve,e[10]=Ce,e[11]=$e,e[12]=f*Ze+L*ot+pe*nt+i[12],e[13]=v*Ze+W*ot+ve*nt+i[13],e[14]=w*Ze+oe*ot+Ce*nt+i[14],e[15]=I*Ze+ae*ot+$e*nt+i[15]),e},t.triggerPluginCompletionEvent=Sr,t.uniqueId=Qe,t.validateCustomStyleLayer=function(e){var i=[],a=e.id;return void 0===a&&i.push({message:"layers."+a+': missing required property "id"'}),void 0===e.render&&i.push({message:"layers."+a+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&i.push({message:"layers."+a+': property "renderingMode" must be either "2d" or "3d"'}),i},t.validateLight=Nu,t.validateStyle=mc,t.values=function(e){var i=[];for(var a in e)i.push(e[a]);return i},t.vectorTile=du,t.version="1.13.3",t.warnOnce=St,t.webpSupported=un,t.window=de,t.wrap=ke}),V(0,function(t){function ie(H){var X=typeof H;if("number"===X||"boolean"===X||"string"===X||null==H)return JSON.stringify(H);if(Array.isArray(H)){for(var fe="[",_e=0,Re=H;_e<Re.length;_e+=1)fe+=ie(Re[_e])+",";return fe+"]"}for(var Je=Object.keys(H).sort(),Xe="{",xe=0;xe<Je.length;xe++)Xe+=JSON.stringify(Je[xe])+":"+ie(H[Je[xe]])+",";return Xe+"}"}function te(H){for(var X="",fe=0,_e=t.refProperties;fe<_e.length;fe+=1)X+="/"+ie(H[_e[fe]]);return X}var le=function(H){this.keyCache={},H&&this.replace(H)};le.prototype.replace=function(H){this._layerConfigs={},this._layers={},this.update(H,[])},le.prototype.update=function(H,X){for(var fe=this,_e=0,Re=H;_e<Re.length;_e+=1){var Je=Re[_e];this._layerConfigs[Je.id]=Je;var Xe=this._layers[Je.id]=t.createStyleLayer(Je);Xe._featureFilter=t.featureFilter(Xe.filter),this.keyCache[Je.id]&&delete this.keyCache[Je.id]}for(var xe=0,Ge=X;xe<Ge.length;xe+=1){var ft=Ge[xe];delete this.keyCache[ft],delete this._layerConfigs[ft],delete this._layers[ft]}this.familiesBySource={};for(var Lt=0,Ut=function(jt,en){for(var An={},sn=0;sn<jt.length;sn++){var ei=en&&en[jt[sn].id]||te(jt[sn]);en&&(en[jt[sn].id]=ei);var Si=An[ei];Si||(Si=An[ei]=[]),Si.push(jt[sn])}var oi=[];for(var Ti in An)oi.push(An[Ti]);return oi}(t.values(this._layerConfigs),this.keyCache);Lt<Ut.length;Lt+=1){var Ie=Ut[Lt].map(function(jt){return fe._layers[jt.id]}),Ae=Ie[0];if("none"!==Ae.visibility){var Me=Ae.source||"",qe=this.familiesBySource[Me];qe||(qe=this.familiesBySource[Me]={});var He=Ae.sourceLayer||"_geojsonTileLayer",Rt=qe[He];Rt||(Rt=qe[He]=[]),Rt.push(Ie)}}};var U=function(H){var X={},fe=[];for(var _e in H){var Re=H[_e],Je=X[_e]={};for(var Xe in Re){var xe=Re[+Xe];if(xe&&0!==xe.bitmap.width&&0!==xe.bitmap.height){var Ge={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};fe.push(Ge),Je[Xe]={rect:Ge,metrics:xe.metrics}}}}var ft=t.potpack(fe),Lt=new t.AlphaImage({width:ft.w||1,height:ft.h||1});for(var Ut in H){var Ie=H[Ut];for(var Ae in Ie){var Me=Ie[+Ae];if(Me&&0!==Me.bitmap.width&&0!==Me.bitmap.height){var qe=X[Ut][Ae].rect;t.AlphaImage.copy(Me.bitmap,Lt,{x:0,y:0},{x:qe.x+1,y:qe.y+1},Me.bitmap)}}}this.image=Lt,this.positions=X};t.register("GlyphAtlas",U);var we=function(H){this.tileID=new t.OverscaledTileID(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId};function de(H,X,fe){for(var _e=new t.EvaluationParameters(X),Re=0,Je=H;Re<Je.length;Re+=1)Je[Re].recalculate(_e,fe)}function Pe(H,X){var fe=t.getArrayBuffer(H.request,function(_e,Re,Je,Xe){_e?X(_e):Re&&X(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Re)),rawData:Re,cacheControl:Je,expires:Xe})});return function(){fe.cancel(),X()}}we.prototype.parse=function(H,X,fe,_e,Re){var Je=this;this.status="parsing",this.data=H,this.collisionBoxArray=new t.CollisionBoxArray;var Xe=new t.DictionaryCoder(Object.keys(H.layers).sort()),xe=new t.FeatureIndex(this.tileID,this.promoteId);xe.bucketLayerIDs=[];var Ge,ft,Lt,Ut,Ie={},Ae={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},Me=X.familiesBySource[this.source];for(var qe in Me){var He=H.layers[qe];if(He){1===He.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+qe+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Rt=Xe.encode(qe),jt=[],en=0;en<He.length;en++){var An=He.feature(en),sn=xe.getId(An,qe);jt.push({feature:An,id:sn,index:en,sourceLayerIndex:Rt})}for(var ei=0,Si=Me[qe];ei<Si.length;ei+=1){var oi=Si[ei],Ti=oi[0];Ti.minzoom&&this.zoom<Math.floor(Ti.minzoom)||Ti.maxzoom&&this.zoom>=Ti.maxzoom||"none"!==Ti.visibility&&(de(oi,this.zoom,fe),(Ie[Ti.id]=Ti.createBucket({index:xe.bucketLayerIDs.length,layers:oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rt,sourceID:this.source})).populate(jt,Ae,this.tileID.canonical),xe.bucketLayerIDs.push(oi.map(function($i){return $i.id})))}}}var mi=t.mapObject(Ae.glyphDependencies,function($i){return Object.keys($i).map(Number)});Object.keys(mi).length?_e.send("getGlyphs",{uid:this.uid,stacks:mi},function($i,li){Ge||(Ge=$i,ft=li,mr.call(Je))}):ft={};var Wr=Object.keys(Ae.iconDependencies);Wr.length?_e.send("getImages",{icons:Wr,source:this.source,tileID:this.tileID,type:"icons"},function($i,li){Ge||(Ge=$i,Lt=li,mr.call(Je))}):Lt={};var Ii=Object.keys(Ae.patternDependencies);function mr(){if(Ge)return Re(Ge);if(ft&&Lt&&Ut){var $i=new U(ft),li=new t.ImageAtlas(Lt,Ut);for(var pi in Ie){var ii=Ie[pi];ii instanceof t.SymbolBucket?(de(ii.layers,this.zoom,fe),t.performSymbolLayout(ii,ft,$i.positions,Lt,li.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ii.hasPattern&&(ii instanceof t.LineBucket||ii instanceof t.FillBucket||ii instanceof t.FillExtrusionBucket)&&(de(ii.layers,this.zoom,fe),ii.addFeatures(Ae,this.tileID.canonical,li.patternPositions))}this.status="done",Re(null,{buckets:t.values(Ie).filter(function(Tr){return!Tr.isEmpty()}),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$i.image,imageAtlas:li,glyphMap:this.returnDependencies?ft:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?$i.positions:null})}}Ii.length?_e.send("getImages",{icons:Ii,source:this.source,tileID:this.tileID,type:"patterns"},function($i,li){Ge||(Ge=$i,Ut=li,mr.call(Je))}):Ut={},mr.call(this)};var Se=function(H,X,fe,_e){this.actor=H,this.layerIndex=X,this.availableImages=fe,this.loadVectorData=_e||Pe,this.loading={},this.loaded={}};Se.prototype.loadTile=function(H,X){var fe=this,_e=H.uid;this.loading||(this.loading={});var Re=!!(H&&H.request&&H.request.collectResourceTiming)&&new t.RequestPerformance(H.request),Je=this.loading[_e]=new we(H);Je.abort=this.loadVectorData(H,function(Xe,xe){if(delete fe.loading[_e],Xe||!xe)return Je.status="done",fe.loaded[_e]=Je,X(Xe);var Ge=xe.rawData,ft={};xe.expires&&(ft.expires=xe.expires),xe.cacheControl&&(ft.cacheControl=xe.cacheControl);var Lt={};if(Re){var Ut=Re.finish();Ut&&(Lt.resourceTiming=JSON.parse(JSON.stringify(Ut)))}Je.vectorTile=xe.vectorTile,Je.parse(xe.vectorTile,fe.layerIndex,fe.availableImages,fe.actor,function(Ie,Ae){if(Ie||!Ae)return X(Ie);X(null,t.extend({rawTileData:Ge.slice(0)},Ae,ft,Lt))}),fe.loaded=fe.loaded||{},fe.loaded[_e]=Je})},Se.prototype.reloadTile=function(H,X){var fe=this,_e=this.loaded,Re=H.uid,Je=this;if(_e&&_e[Re]){var Xe=_e[Re];Xe.showCollisionBoxes=H.showCollisionBoxes;var xe=function(Ge,ft){var Lt=Xe.reloadCallback;Lt&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,Je.layerIndex,fe.availableImages,Je.actor,Lt)),X(Ge,ft)};"parsing"===Xe.status?Xe.reloadCallback=xe:"done"===Xe.status&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,xe):xe())}},Se.prototype.abortTile=function(H,X){var fe=this.loading,_e=H.uid;fe&&fe[_e]&&fe[_e].abort&&(fe[_e].abort(),delete fe[_e]),X()},Se.prototype.removeTile=function(H,X){var fe=this.loaded,_e=H.uid;fe&&fe[_e]&&delete fe[_e],X()};var Ye=t.window.ImageBitmap,je=function(){this.loaded={}};function ke(H,X){if(0!==H.length){De(H[0],X);for(var fe=1;fe<H.length;fe++)De(H[fe],!X)}}function De(H,X){for(var fe=0,_e=0,Re=0,Je=H.length,Xe=Je-1;Re<Je;Xe=Re++){var xe=(H[Re][0]-H[Xe][0])*(H[Xe][1]+H[Re][1]),Ge=fe+xe;_e+=Math.abs(fe)>=Math.abs(xe)?fe-Ge+xe:xe-Ge+fe,fe=Ge}fe+_e>=0!=!!X&&H.reverse()}je.prototype.loadTile=function(H,X){var fe=H.uid,_e=H.encoding,Re=H.rawImageData,Je=Ye&&Re instanceof Ye?this.getImageData(Re):Re,Xe=new t.DEMData(fe,Je,_e);this.loaded=this.loaded||{},this.loaded[fe]=Xe,X(null,Xe)},je.prototype.getImageData=function(H){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(H.width,H.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=H.width,this.offscreenCanvas.height=H.height,this.offscreenCanvasContext.drawImage(H,0,0,H.width,H.height);var X=this.offscreenCanvasContext.getImageData(-1,-1,H.width+2,H.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:X.width,height:X.height},X.data)},je.prototype.removeTile=function(H){var X=this.loaded,fe=H.uid;X&&X[fe]&&delete X[fe]};var ze=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,Qe=function(H){this._feature=H,this.extent=t.EXTENT,this.type=H.type,this.properties=H.tags,"id"in H&&!isNaN(H.id)&&(this.id=parseInt(H.id,10))};Qe.prototype.loadGeometry=function(){if(1===this._feature.type){for(var H=[],X=0,fe=this._feature.geometry;X<fe.length;X+=1){var _e=fe[X];H.push([new t.Point$1(_e[0],_e[1])])}return H}for(var Re=[],Je=0,Xe=this._feature.geometry;Je<Xe.length;Je+=1){for(var xe=[],Ge=0,ft=Xe[Je];Ge<ft.length;Ge+=1){var Lt=ft[Ge];xe.push(new t.Point$1(Lt[0],Lt[1]))}Re.push(xe)}return Re},Qe.prototype.toGeoJSON=function(H,X,fe){return ze.call(this,H,X,fe)};var lt=function(H){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=H.length,this._features=H};lt.prototype.feature=function(H){return new Qe(this._features[H])};var tt=t.vectorTile.VectorTileFeature,Ve=Fe;function Fe(H,X){this.options=X||{},this.features=H,this.length=H.length}function Ne(H,X){this.id="number"==typeof H.id?H.id:void 0,this.type=H.type,this.rawGeometry=1===H.type?[H.geometry]:H.geometry,this.properties=H.tags,this.extent=X||4096}Fe.prototype.feature=function(H){return new Ne(this.features[H],this.options.extent)},Ne.prototype.loadGeometry=function(){var H=this.rawGeometry;this.geometry=[];for(var X=0;X<H.length;X++){for(var fe=H[X],_e=[],Re=0;Re<fe.length;Re++)_e.push(new t.Point$1(fe[Re][0],fe[Re][1]));this.geometry.push(_e)}return this.geometry},Ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var H=this.geometry,X=1/0,fe=-1/0,_e=1/0,Re=-1/0,Je=0;Je<H.length;Je++)for(var Xe=H[Je],xe=0;xe<Xe.length;xe++){var Ge=Xe[xe];X=Math.min(X,Ge.x),fe=Math.max(fe,Ge.x),_e=Math.min(_e,Ge.y),Re=Math.max(Re,Ge.y)}return[X,_e,fe,Re]},Ne.prototype.toGeoJSON=tt.prototype.toGeoJSON;var Be=Mt,it=Ve;function Mt(H){var X=new t.pbf;return function(fe,_e){for(var Re in fe.layers)_e.writeMessage(3,St,fe.layers[Re])}(H,X),X.finish()}function St(H,X){var fe;X.writeVarintField(15,H.version||1),X.writeStringField(1,H.name||""),X.writeVarintField(5,H.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<H.length;fe++)_e.feature=H.feature(fe),X.writeMessage(2,Kt,_e);var Re=_e.keys;for(fe=0;fe<Re.length;fe++)X.writeStringField(3,Re[fe]);var Je=_e.values;for(fe=0;fe<Je.length;fe++)X.writeMessage(4,Yr,Je[fe])}function Kt(H,X){var fe=H.feature;void 0!==fe.id&&X.writeVarintField(1,fe.id),X.writeMessage(2,wn,H),X.writeVarintField(3,fe.type),X.writeMessage(4,yn,fe)}function wn(H,X){var fe=H.feature,_e=H.keys,Re=H.values,Je=H.keycache,Xe=H.valuecache;for(var xe in fe.properties){var Ge=Je[xe];void 0===Ge&&(_e.push(xe),Je[xe]=Ge=_e.length-1),X.writeVarint(Ge);var ft=fe.properties[xe],Lt=typeof ft;"string"!==Lt&&"boolean"!==Lt&&"number"!==Lt&&(ft=JSON.stringify(ft));var Ut=Lt+":"+ft,Ie=Xe[Ut];void 0===Ie&&(Re.push(ft),Xe[Ut]=Ie=Re.length-1),X.writeVarint(Ie)}}function ln(H,X){return(X<<3)+(7&H)}function jn(H){return H<<1^H>>31}function yn(H,X){for(var fe=H.loadGeometry(),_e=H.type,Re=0,Je=0,Xe=fe.length,xe=0;xe<Xe;xe++){var Ge=fe[xe],ft=1;1===_e&&(ft=Ge.length),X.writeVarint(ln(1,ft));for(var Lt=3===_e?Ge.length-1:Ge.length,Ut=0;Ut<Lt;Ut++){1===Ut&&1!==_e&&X.writeVarint(ln(2,Lt-1));var Ie=Ge[Ut].x-Re,Ae=Ge[Ut].y-Je;X.writeVarint(jn(Ie)),X.writeVarint(jn(Ae)),Re+=Ie,Je+=Ae}3===_e&&X.writeVarint(ln(7,1))}}function Yr(H,X){var fe=typeof H;"string"===fe?X.writeStringField(1,H):"boolean"===fe?X.writeBooleanField(7,H):"number"===fe&&(H%1!=0?X.writeDoubleField(3,H):H<0?X.writeSVarintField(6,H):X.writeVarintField(5,H))}function Zn(H,X,fe,_e){sr(H,fe,_e),sr(X,2*fe,2*_e),sr(X,2*fe+1,2*_e+1)}function sr(H,X,fe){var _e=H[X];H[X]=H[fe],H[fe]=_e}function Ji(H,X,fe,_e){var Re=H-fe,Je=X-_e;return Re*Re+Je*Je}Be.fromVectorTileJs=Mt,Be.fromGeojsonVt=function(H,X){X=X||{};var fe={};for(var _e in H)fe[_e]=new Ve(H[_e].features,X),fe[_e].name=_e,fe[_e].version=X.version,fe[_e].extent=X.extent;return Mt({layers:fe})},Be.GeoJSONWrapper=it;var bt=function(H){return H[0]},at=function(H){return H[1]},Pt=function(H,X,fe,_e,Re){void 0===X&&(X=bt),void 0===fe&&(fe=at),void 0===_e&&(_e=64),void 0===Re&&(Re=Float64Array),this.nodeSize=_e,this.points=H;for(var Je=H.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new Je(H.length),xe=this.coords=new Re(2*H.length),Ge=0;Ge<H.length;Ge++)Xe[Ge]=Ge,xe[2*Ge]=X(H[Ge]),xe[2*Ge+1]=fe(H[Ge]);!function ft(Lt,Ut,Ie,Ae,Me,qe){if(!(Me-Ae<=Ie)){var He=Ae+Me>>1;(function Rt(jt,en,An,sn,ei,Si){for(;ei>sn;){if(ei-sn>600){var oi=ei-sn+1,Ti=An-sn+1,mi=Math.log(oi),Wr=.5*Math.exp(2*mi/3),Ii=.5*Math.sqrt(mi*Wr*(oi-Wr)/oi)*(Ti-oi/2<0?-1:1);Rt(jt,en,An,Math.max(sn,Math.floor(An-Ti*Wr/oi+Ii)),Math.min(ei,Math.floor(An+(oi-Ti)*Wr/oi+Ii)),Si)}var mr=en[2*An+Si],$i=sn,li=ei;for(Zn(jt,en,sn,An),en[2*ei+Si]>mr&&Zn(jt,en,sn,ei);$i<li;){for(Zn(jt,en,$i,li),$i++,li--;en[2*$i+Si]<mr;)$i++;for(;en[2*li+Si]>mr;)li--}en[2*sn+Si]===mr?Zn(jt,en,sn,li):Zn(jt,en,++li,ei),li<=An&&(sn=li+1),An<=li&&(ei=li-1)}})(Lt,Ut,He,Ae,Me,qe%2),ft(Lt,Ut,Ie,Ae,He-1,qe+1),ft(Lt,Ut,Ie,He+1,Me,qe+1)}}(Xe,xe,_e,0,Xe.length-1,0)};Pt.prototype.range=function(H,X,fe,_e){return function(Re,Je,Xe,xe,Ge,ft,Lt){for(var Ut,Ie,Ae=[0,Re.length-1,0],Me=[];Ae.length;){var qe=Ae.pop(),He=Ae.pop(),Rt=Ae.pop();if(He-Rt<=Lt)for(var jt=Rt;jt<=He;jt++)Ie=Je[2*jt+1],(Ut=Je[2*jt])>=Xe&&Ut<=Ge&&Ie>=xe&&Ie<=ft&&Me.push(Re[jt]);else{var en=Math.floor((Rt+He)/2);Ie=Je[2*en+1],(Ut=Je[2*en])>=Xe&&Ut<=Ge&&Ie>=xe&&Ie<=ft&&Me.push(Re[en]);var An=(qe+1)%2;(0===qe?Xe<=Ut:xe<=Ie)&&(Ae.push(Rt),Ae.push(en-1),Ae.push(An)),(0===qe?Ge>=Ut:ft>=Ie)&&(Ae.push(en+1),Ae.push(He),Ae.push(An))}}return Me}(this.ids,this.coords,H,X,fe,_e,this.nodeSize)},Pt.prototype.within=function(H,X,fe){return function(_e,Re,Je,Xe,xe,Ge){for(var ft=[0,_e.length-1,0],Lt=[],Ut=xe*xe;ft.length;){var Ie=ft.pop(),Ae=ft.pop(),Me=ft.pop();if(Ae-Me<=Ge)for(var qe=Me;qe<=Ae;qe++)Ji(Re[2*qe],Re[2*qe+1],Je,Xe)<=Ut&&Lt.push(_e[qe]);else{var He=Math.floor((Me+Ae)/2),Rt=Re[2*He],jt=Re[2*He+1];Ji(Rt,jt,Je,Xe)<=Ut&&Lt.push(_e[He]);var en=(Ie+1)%2;(0===Ie?Je-xe<=Rt:Xe-xe<=jt)&&(ft.push(Me),ft.push(He-1),ft.push(en)),(0===Ie?Je+xe>=Rt:Xe+xe>=jt)&&(ft.push(He+1),ft.push(Ae),ft.push(en))}}return Lt}(this.ids,this.coords,H,X,fe,this.nodeSize)};var Vt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(H){return H}},qt=function(H){this.options=Cn(Object.create(Vt),H),this.trees=new Array(this.options.maxZoom+1)};function _t(H,X,fe,_e,Re){return{x:H,y:X,zoom:1/0,id:fe,parentId:-1,numPoints:_e,properties:Re}}function Ot(H,X){var fe=H.geometry.coordinates,_e=fe[1];return{x:En(fe[0]),y:gn(_e),zoom:1/0,index:X,parentId:-1}}function un(H){return{type:"Feature",id:H.id,properties:Qn(H),geometry:{type:"Point",coordinates:[(_e=H.x,360*(_e-.5)),(X=H.y,fe=(180-360*X)*Math.PI/180,360*Math.atan(Math.exp(fe))/Math.PI-90)]}};var X,fe,_e}function Qn(H){var X=H.numPoints,fe=X>=1e4?Math.round(X/1e3)+"k":X>=1e3?Math.round(X/100)/10+"k":X;return Cn(Cn({},H.properties),{cluster:!0,cluster_id:H.id,point_count:X,point_count_abbreviated:fe})}function En(H){return H/360+.5}function gn(H){var X=Math.sin(H*Math.PI/180),fe=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return fe<0?0:fe>1?1:fe}function Cn(H,X){for(var fe in X)H[fe]=X[fe];return H}function Kn(H){return H.x}function Hn(H){return H.y}function Zt(H,X,fe,_e,Re,Je){var Xe=Re-fe,xe=Je-_e;if(0!==Xe||0!==xe){var Ge=((H-fe)*Xe+(X-_e)*xe)/(Xe*Xe+xe*xe);Ge>1?(fe=Re,_e=Je):Ge>0&&(fe+=Xe*Ge,_e+=xe*Ge)}return(Xe=H-fe)*Xe+(xe=X-_e)*xe}function nn(H,X,fe,_e){var Re={id:void 0===H?null:H,type:X,geometry:fe,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Je){var Xe=Je.geometry,xe=Je.type;if("Point"===xe||"MultiPoint"===xe||"LineString"===xe)zt(Je,Xe);else if("Polygon"===xe||"MultiLineString"===xe)for(var Ge=0;Ge<Xe.length;Ge++)zt(Je,Xe[Ge]);else if("MultiPolygon"===xe)for(Ge=0;Ge<Xe.length;Ge++)for(var ft=0;ft<Xe[Ge].length;ft++)zt(Je,Xe[Ge][ft])}(Re),Re}function zt(H,X){for(var fe=0;fe<X.length;fe+=3)H.minX=Math.min(H.minX,X[fe]),H.minY=Math.min(H.minY,X[fe+1]),H.maxX=Math.max(H.maxX,X[fe]),H.maxY=Math.max(H.maxY,X[fe+1])}function Xt(H,X,fe,_e){if(X.geometry){var Re=X.geometry.coordinates,Je=X.geometry.type,Xe=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),xe=[],Ge=X.id;if(fe.promoteId?Ge=X.properties[fe.promoteId]:fe.generateId&&(Ge=_e||0),"Point"===Je)Ht(Re,xe);else if("MultiPoint"===Je)for(var ft=0;ft<Re.length;ft++)Ht(Re[ft],xe);else if("LineString"===Je)ui(Re,xe,Xe,!1);else if("MultiLineString"===Je){if(fe.lineMetrics){for(ft=0;ft<Re.length;ft++)ui(Re[ft],xe=[],Xe,!1),H.push(nn(Ge,"LineString",xe,X.properties));return}Zi(Re,xe,Xe,!1)}else if("Polygon"===Je)Zi(Re,xe,Xe,!0);else{if("MultiPolygon"!==Je){if("GeometryCollection"===Je){for(ft=0;ft<X.geometry.geometries.length;ft++)Xt(H,{id:Ge,geometry:X.geometry.geometries[ft],properties:X.properties},fe,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ft=0;ft<Re.length;ft++){var Lt=[];Zi(Re[ft],Lt,Xe,!0),xe.push(Lt)}}H.push(nn(Ge,Je,xe,X.properties))}}function Ht(H,X){X.push(qi(H[0])),X.push(Er(H[1])),X.push(0)}function ui(H,X,fe,_e){for(var Re,Je,Xe=0,xe=0;xe<H.length;xe++){var Ge=qi(H[xe][0]),ft=Er(H[xe][1]);X.push(Ge),X.push(ft),X.push(0),xe>0&&(Xe+=_e?(Re*ft-Ge*Je)/2:Math.sqrt(Math.pow(Ge-Re,2)+Math.pow(ft-Je,2))),Re=Ge,Je=ft}var Lt=X.length-3;X[2]=1,function Ut(Ie,Ae,Me,qe){for(var He,Rt=qe,jt=Me-Ae>>1,en=Me-Ae,An=Ie[Ae],sn=Ie[Ae+1],ei=Ie[Me],Si=Ie[Me+1],oi=Ae+3;oi<Me;oi+=3){var Ti=Zt(Ie[oi],Ie[oi+1],An,sn,ei,Si);if(Ti>Rt)He=oi,Rt=Ti;else if(Ti===Rt){var mi=Math.abs(oi-jt);mi<en&&(He=oi,en=mi)}}Rt>qe&&(He-Ae>3&&Ut(Ie,Ae,He,qe),Ie[He+2]=Rt,Me-He>3&&Ut(Ie,He,Me,qe))}(X,0,Lt,fe),X[Lt+2]=1,X.size=Math.abs(Xe),X.start=0,X.end=X.size}function Zi(H,X,fe,_e){for(var Re=0;Re<H.length;Re++){var Je=[];ui(H[Re],Je,fe,_e),X.push(Je)}}function qi(H){return H/360+.5}function Er(H){var X=Math.sin(H*Math.PI/180),fe=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return fe<0?0:fe>1?1:fe}function Or(H,X,fe,_e,Re,Je,Xe,xe){if(_e/=X,Je>=(fe/=X)&&Xe<_e)return H;if(Xe<fe||Je>=_e)return null;for(var Ge=[],ft=0;ft<H.length;ft++){var Lt=H[ft],Ut=Lt.geometry,Ie=Lt.type,Ae=0===Re?Lt.minX:Lt.minY,Me=0===Re?Lt.maxX:Lt.maxY;if(Ae>=fe&&Me<_e)Ge.push(Lt);else if(!(Me<fe||Ae>=_e)){var qe=[];if("Point"===Ie||"MultiPoint"===Ie)In(Ut,qe,fe,_e,Re);else if("LineString"===Ie)Ei(Ut,qe,fe,_e,Re,!1,xe.lineMetrics);else if("MultiLineString"===Ie)ce(Ut,qe,fe,_e,Re,!1);else if("Polygon"===Ie)ce(Ut,qe,fe,_e,Re,!0);else if("MultiPolygon"===Ie)for(var He=0;He<Ut.length;He++){var Rt=[];ce(Ut[He],Rt,fe,_e,Re,!0),Rt.length&&qe.push(Rt)}if(qe.length){if(xe.lineMetrics&&"LineString"===Ie){for(He=0;He<qe.length;He++)Ge.push(nn(Lt.id,Ie,qe[He],Lt.tags));continue}"LineString"!==Ie&&"MultiLineString"!==Ie||(1===qe.length?(Ie="LineString",qe=qe[0]):Ie="MultiLineString"),"Point"!==Ie&&"MultiPoint"!==Ie||(Ie=3===qe.length?"Point":"MultiPoint"),Ge.push(nn(Lt.id,Ie,qe,Lt.tags))}}}return Ge.length?Ge:null}function In(H,X,fe,_e,Re){for(var Je=0;Je<H.length;Je+=3){var Xe=H[Je+Re];Xe>=fe&&Xe<=_e&&(X.push(H[Je]),X.push(H[Je+1]),X.push(H[Je+2]))}}function Ei(H,X,fe,_e,Re,Je,Xe){for(var xe,Ge,ft=N(H),Lt=0===Re?It:Jt,Ut=H.start,Ie=0;Ie<H.length-3;Ie+=3){var Ae=H[Ie],Me=H[Ie+1],qe=H[Ie+2],He=H[Ie+3],Rt=H[Ie+4],jt=0===Re?Ae:Me,en=0===Re?He:Rt,An=!1;Xe&&(xe=Math.sqrt(Math.pow(Ae-He,2)+Math.pow(Me-Rt,2))),jt<fe?en>fe&&(Ge=Lt(ft,Ae,Me,He,Rt,fe),Xe&&(ft.start=Ut+xe*Ge)):jt>_e?en<_e&&(Ge=Lt(ft,Ae,Me,He,Rt,_e),Xe&&(ft.start=Ut+xe*Ge)):ht(ft,Ae,Me,qe),en<fe&&jt>=fe&&(Ge=Lt(ft,Ae,Me,He,Rt,fe),An=!0),en>_e&&jt<=_e&&(Ge=Lt(ft,Ae,Me,He,Rt,_e),An=!0),!Je&&An&&(Xe&&(ft.end=Ut+xe*Ge),X.push(ft),ft=N(H)),Xe&&(Ut+=xe)}var sn=H.length-3;Ae=H[sn],Me=H[sn+1],qe=H[sn+2],(jt=0===Re?Ae:Me)>=fe&&jt<=_e&&ht(ft,Ae,Me,qe),sn=ft.length-3,Je&&sn>=3&&(ft[sn]!==ft[0]||ft[sn+1]!==ft[1])&&ht(ft,ft[0],ft[1],ft[2]),ft.length&&X.push(ft)}function N(H){var X=[];return X.size=H.size,X.start=H.start,X.end=H.end,X}function ce(H,X,fe,_e,Re,Je){for(var Xe=0;Xe<H.length;Xe++)Ei(H[Xe],X,fe,_e,Re,Je,!1)}function ht(H,X,fe,_e){H.push(X),H.push(fe),H.push(_e)}function It(H,X,fe,_e,Re,Je){var Xe=(Je-X)/(_e-X);return H.push(Je),H.push(fe+(Re-fe)*Xe),H.push(1),Xe}function Jt(H,X,fe,_e,Re,Je){var Xe=(Je-fe)/(Re-fe);return H.push(X+(_e-X)*Xe),H.push(Je),H.push(1),Xe}function xt(H,X){for(var fe=[],_e=0;_e<H.length;_e++){var Re,Je=H[_e],Xe=Je.type;if("Point"===Xe||"MultiPoint"===Xe||"LineString"===Xe)Re=Gt(Je.geometry,X);else if("MultiLineString"===Xe||"Polygon"===Xe){Re=[];for(var xe=0;xe<Je.geometry.length;xe++)Re.push(Gt(Je.geometry[xe],X))}else if("MultiPolygon"===Xe)for(Re=[],xe=0;xe<Je.geometry.length;xe++){for(var Ge=[],ft=0;ft<Je.geometry[xe].length;ft++)Ge.push(Gt(Je.geometry[xe][ft],X));Re.push(Ge)}fe.push(nn(Je.id,Xe,Re,Je.tags))}return fe}function Gt(H,X){var fe=[];fe.size=H.size,void 0!==H.start&&(fe.start=H.start,fe.end=H.end);for(var _e=0;_e<H.length;_e+=3)fe.push(H[_e]+X,H[_e+1],H[_e+2]);return fe}function bn(H,X){if(H.transformed)return H;var fe,_e,Re,Je=1<<H.z,Xe=H.x,xe=H.y;for(fe=0;fe<H.features.length;fe++){var Ge=H.features[fe],ft=Ge.geometry,Lt=Ge.type;if(Ge.geometry=[],1===Lt)for(_e=0;_e<ft.length;_e+=2)Ge.geometry.push(di(ft[_e],ft[_e+1],X,Je,Xe,xe));else for(_e=0;_e<ft.length;_e++){var Ut=[];for(Re=0;Re<ft[_e].length;Re+=2)Ut.push(di(ft[_e][Re],ft[_e][Re+1],X,Je,Xe,xe));Ge.geometry.push(Ut)}}return H.transformed=!0,H}function di(H,X,fe,_e,Re,Je){return[Math.round(fe*(H*_e-Re)),Math.round(fe*(X*_e-Je))]}function fi(H,X,fe,_e,Re){for(var Je=X===Re.maxZoom?0:Re.tolerance/((1<<X)*Re.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:_e,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<H.length;xe++){Xe.numFeatures++,Mo(Xe,H[xe],Je,Re);var Ge=H[xe].minX,ft=H[xe].minY,Lt=H[xe].maxX,Ut=H[xe].maxY;Ge<Xe.minX&&(Xe.minX=Ge),ft<Xe.minY&&(Xe.minY=ft),Lt>Xe.maxX&&(Xe.maxX=Lt),Ut>Xe.maxY&&(Xe.maxY=Ut)}return Xe}function Mo(H,X,fe,_e){var Re=X.geometry,Je=X.type,Xe=[];if("Point"===Je||"MultiPoint"===Je)for(var xe=0;xe<Re.length;xe+=3)Xe.push(Re[xe]),Xe.push(Re[xe+1]),H.numPoints++,H.numSimplified++;else if("LineString"===Je)hi(Xe,Re,H,fe,!1,!1);else if("MultiLineString"===Je||"Polygon"===Je)for(xe=0;xe<Re.length;xe++)hi(Xe,Re[xe],H,fe,"Polygon"===Je,0===xe);else if("MultiPolygon"===Je)for(var Ge=0;Ge<Re.length;Ge++){var ft=Re[Ge];for(xe=0;xe<ft.length;xe++)hi(Xe,ft[xe],H,fe,!0,0===xe)}if(Xe.length){var Lt=X.tags||null;if("LineString"===Je&&_e.lineMetrics){for(var Ut in Lt={},X.tags)Lt[Ut]=X.tags[Ut];Lt.mapbox_clip_start=Re.start/Re.size,Lt.mapbox_clip_end=Re.end/Re.size}var Ie={geometry:Xe,type:"Polygon"===Je||"MultiPolygon"===Je?3:"LineString"===Je||"MultiLineString"===Je?2:1,tags:Lt};null!==X.id&&(Ie.id=X.id),H.features.push(Ie)}}function hi(H,X,fe,_e,Re,Je){var Xe=_e*_e;if(_e>0&&X.size<(Re?Xe:_e))fe.numPoints+=X.length/3;else{for(var xe=[],Ge=0;Ge<X.length;Ge+=3)(0===_e||X[Ge+2]>Xe)&&(fe.numSimplified++,xe.push(X[Ge]),xe.push(X[Ge+1])),fe.numPoints++;Re&&function(ft,Lt){for(var Ut=0,Ie=0,Ae=ft.length,Me=Ae-2;Ie<Ae;Me=Ie,Ie+=2)Ut+=(ft[Ie]-ft[Me])*(ft[Ie+1]+ft[Me+1]);if(Ut>0===Lt)for(Ie=0,Ae=ft.length;Ie<Ae/2;Ie+=2){var qe=ft[Ie],He=ft[Ie+1];ft[Ie]=ft[Ae-2-Ie],ft[Ie+1]=ft[Ae-1-Ie],ft[Ae-2-Ie]=qe,ft[Ae-1-Ie]=He}}(xe,Je),H.push(xe)}}function Br(H,X){var fe=(X=this.options=function(Re,Je){for(var Xe in Je)Re[Xe]=Je[Xe];return Re}(Object.create(this.options),X)).debug;if(fe&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");var Re,Je,Xe,xe,Ge,ft,_e=function(Re,Je){var Xe=[];if("FeatureCollection"===Re.type)for(var xe=0;xe<Re.features.length;xe++)Xt(Xe,Re.features[xe],Je,xe);else Xt(Xe,"Feature"===Re.type?Re:{geometry:Re},Je);return Xe}(H,X);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Re=_e,Je=X,Xe=Je.buffer/Je.extent,xe=Re,Ge=Or(Re,1,-1-Xe,Xe,0,-1,2,Je),ft=Or(Re,1,1-Xe,2+Xe,0,-1,2,Je),(Ge||ft)&&(xe=Or(Re,1,-Xe,1+Xe,0,-1,2,Je)||[],Ge&&(xe=xt(Ge,1).concat(xe)),ft&&(xe=xe.concat(xt(ft,-1)))),_e=xe).length&&this.splitTile(_e,0,0,0),fe&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pr(H,X,fe){return 32*((1<<H)*fe+X)+H}function eo(H,X){var fe=H.tileID.canonical;if(!this._geoJSONIndex)return X(null,null);var _e=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!_e)return X(null,null);var Re=new lt(_e.features),Je=Be(Re);0===Je.byteOffset&&Je.byteLength===Je.buffer.byteLength||(Je=new Uint8Array(Je)),X(null,{vectorTile:Re,rawData:Je.buffer})}qt.prototype.load=function(H){var X=this.options,fe=X.log,_e=X.minZoom,Re=X.maxZoom,Je=X.nodeSize;fe&&console.time("total time");var Xe="prepare "+H.length+" points";fe&&console.time(Xe),this.points=H;for(var xe=[],Ge=0;Ge<H.length;Ge++)H[Ge].geometry&&xe.push(Ot(H[Ge],Ge));this.trees[Re+1]=new Pt(xe,Kn,Hn,Je,Float32Array),fe&&console.timeEnd(Xe);for(var ft=Re;ft>=_e;ft--){var Lt=+Date.now();xe=this._cluster(xe,ft),this.trees[ft]=new Pt(xe,Kn,Hn,Je,Float32Array),fe&&console.log("z%d: %d clusters in %dms",ft,xe.length,+Date.now()-Lt)}return fe&&console.timeEnd("total time"),this},qt.prototype.getClusters=function(H,X){var fe=((H[0]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,H[1])),Re=180===H[2]?180:((H[2]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)fe=-180,Re=180;else if(fe>Re){var Xe=this.getClusters([fe,_e,180,Je],X),xe=this.getClusters([-180,_e,Re,Je],X);return Xe.concat(xe)}for(var Ge=this.trees[this._limitZoom(X)],ft=[],Lt=0,Ut=Ge.range(En(fe),gn(Je),En(Re),gn(_e));Lt<Ut.length;Lt+=1){var Ie=Ge.points[Ut[Lt]];ft.push(Ie.numPoints?un(Ie):this.points[Ie.index])}return ft},qt.prototype.getChildren=function(H){var X=this._getOriginId(H),fe=this._getOriginZoom(H),_e="No cluster with the specified id.",Re=this.trees[fe];if(!Re)throw new Error(_e);var Je=Re.points[X];if(!Je)throw new Error(_e);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),xe=[],Ge=0,ft=Re.within(Je.x,Je.y,Xe);Ge<ft.length;Ge+=1){var Lt=Re.points[ft[Ge]];Lt.parentId===H&&xe.push(Lt.numPoints?un(Lt):this.points[Lt.index])}if(0===xe.length)throw new Error(_e);return xe},qt.prototype.getLeaves=function(H,X,fe){var _e=[];return this._appendLeaves(_e,H,X=X||10,fe=fe||0,0),_e},qt.prototype.getTile=function(H,X,fe){var _e=this.trees[this._limitZoom(H)],Re=Math.pow(2,H),Je=this.options,Xe=Je.radius/Je.extent,xe=(fe-Xe)/Re,Ge=(fe+1+Xe)/Re,ft={features:[]};return this._addTileFeatures(_e.range((X-Xe)/Re,xe,(X+1+Xe)/Re,Ge),_e.points,X,fe,Re,ft),0===X&&this._addTileFeatures(_e.range(1-Xe/Re,xe,1,Ge),_e.points,Re,fe,Re,ft),X===Re-1&&this._addTileFeatures(_e.range(0,xe,Xe/Re,Ge),_e.points,-1,fe,Re,ft),ft.features.length?ft:null},qt.prototype.getClusterExpansionZoom=function(H){for(var X=this._getOriginZoom(H)-1;X<=this.options.maxZoom;){var fe=this.getChildren(H);if(X++,1!==fe.length)break;H=fe[0].properties.cluster_id}return X},qt.prototype._appendLeaves=function(H,X,fe,_e,Re){for(var Je=0,Xe=this.getChildren(X);Je<Xe.length;Je+=1){var xe=Xe[Je],Ge=xe.properties;if(Ge&&Ge.cluster?Re+Ge.point_count<=_e?Re+=Ge.point_count:Re=this._appendLeaves(H,Ge.cluster_id,fe,_e,Re):Re<_e?Re++:H.push(xe),H.length===fe)break}return Re},qt.prototype._addTileFeatures=function(H,X,fe,_e,Re,Je){for(var Xe=0,xe=H;Xe<xe.length;Xe+=1){var Ge=X[xe[Xe]],ft=Ge.numPoints,Lt={type:1,geometry:[[Math.round(this.options.extent*(Ge.x*Re-fe)),Math.round(this.options.extent*(Ge.y*Re-_e))]],tags:ft?Qn(Ge):this.points[Ge.index].properties},Ut=void 0;ft?Ut=Ge.id:this.options.generateId?Ut=Ge.index:this.points[Ge.index].id&&(Ut=this.points[Ge.index].id),void 0!==Ut&&(Lt.id=Ut),Je.features.push(Lt)}},qt.prototype._limitZoom=function(H){return Math.max(this.options.minZoom,Math.min(+H,this.options.maxZoom+1))},qt.prototype._cluster=function(H,X){for(var fe=[],_e=this.options,Re=_e.reduce,Je=_e.minPoints,Xe=_e.radius/(_e.extent*Math.pow(2,X)),xe=0;xe<H.length;xe++){var Ge=H[xe];if(!(Ge.zoom<=X)){Ge.zoom=X;for(var ft=this.trees[X+1],Lt=ft.within(Ge.x,Ge.y,Xe),Ut=Ge.numPoints||1,Ie=Ut,Ae=0,Me=Lt;Ae<Me.length;Ae+=1){var qe=ft.points[Me[Ae]];qe.zoom>X&&(Ie+=qe.numPoints||1)}if(Ie>=Je){for(var He=Ge.x*Ut,Rt=Ge.y*Ut,jt=Re&&Ut>1?this._map(Ge,!0):null,en=(xe<<5)+(X+1)+this.points.length,An=0,sn=Lt;An<sn.length;An+=1){var ei=ft.points[sn[An]];if(!(ei.zoom<=X)){ei.zoom=X;var Si=ei.numPoints||1;He+=ei.x*Si,Rt+=ei.y*Si,ei.parentId=en,Re&&(jt||(jt=this._map(Ge,!0)),Re(jt,this._map(ei)))}}Ge.parentId=en,fe.push(_t(He/Ie,Rt/Ie,en,Ie,jt))}else if(fe.push(Ge),Ie>1)for(var oi=0,Ti=Lt;oi<Ti.length;oi+=1){var mi=ft.points[Ti[oi]];mi.zoom<=X||(mi.zoom=X,fe.push(mi))}}}return fe},qt.prototype._getOriginId=function(H){return H-this.points.length>>5},qt.prototype._getOriginZoom=function(H){return(H-this.points.length)%32},qt.prototype._map=function(H,X){if(H.numPoints)return X?Cn({},H.properties):H.properties;var fe=this.points[H.index].properties,_e=this.options.map(fe);return X&&_e===fe?Cn({},_e):_e},Br.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Br.prototype.splitTile=function(H,X,fe,_e,Re,Je,Xe){for(var xe=[H,X,fe,_e],Ge=this.options,ft=Ge.debug;xe.length;){_e=xe.pop(),fe=xe.pop(),X=xe.pop(),H=xe.pop();var Lt=1<<X,Ut=Pr(X,fe,_e),Ie=this.tiles[Ut];if(!Ie&&(ft>1&&console.time("creation"),Ie=this.tiles[Ut]=fi(H,X,fe,_e,Ge),this.tileCoords.push({z:X,x:fe,y:_e}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,fe,_e,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var Ae="z"+X;this.stats[Ae]=(this.stats[Ae]||0)+1,this.total++}if(Ie.source=H,Re){if(X===Ge.maxZoom||X===Re)continue;var Me=1<<Re-X;if(fe!==Math.floor(Je/Me)||_e!==Math.floor(Xe/Me))continue}else if(X===Ge.indexMaxZoom||Ie.numPoints<=Ge.indexMaxPoints)continue;if(Ie.source=null,0!==H.length){ft>1&&console.time("clipping");var qe,He,Rt,jt,en,An,sn=.5*Ge.buffer/Ge.extent,ei=.5-sn,Si=.5+sn,oi=1+sn;qe=He=Rt=jt=null,en=Or(H,Lt,fe-sn,fe+Si,0,Ie.minX,Ie.maxX,Ge),An=Or(H,Lt,fe+ei,fe+oi,0,Ie.minX,Ie.maxX,Ge),H=null,en&&(qe=Or(en,Lt,_e-sn,_e+Si,1,Ie.minY,Ie.maxY,Ge),He=Or(en,Lt,_e+ei,_e+oi,1,Ie.minY,Ie.maxY,Ge),en=null),An&&(Rt=Or(An,Lt,_e-sn,_e+Si,1,Ie.minY,Ie.maxY,Ge),jt=Or(An,Lt,_e+ei,_e+oi,1,Ie.minY,Ie.maxY,Ge),An=null),ft>1&&console.timeEnd("clipping"),xe.push(qe||[],X+1,2*fe,2*_e),xe.push(He||[],X+1,2*fe,2*_e+1),xe.push(Rt||[],X+1,2*fe+1,2*_e),xe.push(jt||[],X+1,2*fe+1,2*_e+1)}}},Br.prototype.getTile=function(H,X,fe){var _e=this.options,Re=_e.extent,Je=_e.debug;if(H<0||H>24)return null;var Xe=1<<H,xe=Pr(H,X=(X%Xe+Xe)%Xe,fe);if(this.tiles[xe])return bn(this.tiles[xe],Re);Je>1&&console.log("drilling down to z%d-%d-%d",H,X,fe);for(var Ge,ft=H,Lt=X,Ut=fe;!Ge&&ft>0;)ft--,Lt=Math.floor(Lt/2),Ut=Math.floor(Ut/2),Ge=this.tiles[Pr(ft,Lt,Ut)];return Ge&&Ge.source?(Je>1&&console.log("found parent tile z%d-%d-%d",ft,Lt,Ut),Je>1&&console.time("drilling down"),this.splitTile(Ge.source,ft,Lt,Ut,H,X,fe),Je>1&&console.timeEnd("drilling down"),this.tiles[xe]?bn(this.tiles[xe],Re):null):null};var to=function(H){function X(fe,_e,Re,Je){H.call(this,fe,_e,Re,eo),Je&&(this.loadGeoJSON=Je)}return H&&(X.__proto__=H),(X.prototype=Object.create(H&&H.prototype)).constructor=X,X.prototype.loadData=function(fe,_e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=_e,this._pendingLoadDataParams=fe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},X.prototype._loadData=function(){var fe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var _e=this._pendingCallback,Re=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Je=!!(Re&&Re.request&&Re.request.collectResourceTiming)&&new t.RequestPerformance(Re.request);this.loadGeoJSON(Re,function(Xe,xe){if(Xe||!xe)return _e(Xe);if("object"!=typeof xe)return _e(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."));!function Ie(Ae,Me){var qe,He=Ae&&Ae.type;if("FeatureCollection"===He)for(qe=0;qe<Ae.features.length;qe++)Ie(Ae.features[qe],Me);else if("GeometryCollection"===He)for(qe=0;qe<Ae.geometries.length;qe++)Ie(Ae.geometries[qe],Me);else if("Feature"===He)Ie(Ae.geometry,Me);else if("Polygon"===He)ke(Ae.coordinates,Me);else if("MultiPolygon"===He)for(qe=0;qe<Ae.coordinates.length;qe++)ke(Ae.coordinates[qe],Me);return Ae}(xe,!0);try{if(Re.filter){var Ge=t.createExpression(Re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ge.result)throw new Error(Ge.value.map(function(Ie){return Ie.key+": "+Ie.message}).join(", "));var ft=xe.features.filter(function(Ie){return Ge.value.evaluate({zoom:0},Ie)});xe={type:"FeatureCollection",features:ft}}fe._geoJSONIndex=Re.cluster?new qt(function(Ie){var Ae=Ie.superclusterOptions,Me=Ie.clusterProperties;if(!Me||!Ae)return Ae;for(var qe={},He={},Rt={accumulated:null,zoom:0},jt={properties:null},en=Object.keys(Me),An=0,sn=en;An<sn.length;An+=1){var ei=sn[An],Si=Me[ei],oi=Si[0],Ti=t.createExpression(Si[1]),mi=t.createExpression("string"==typeof oi?[oi,["accumulated"],["get",ei]]:oi);qe[ei]=Ti.value,He[ei]=mi.value}return Ae.map=function(Wr){jt.properties=Wr;for(var Ii={},mr=0,$i=en;mr<$i.length;mr+=1){var li=$i[mr];Ii[li]=qe[li].evaluate(Rt,jt)}return Ii},Ae.reduce=function(Wr,Ii){jt.properties=Ii;for(var mr=0,$i=en;mr<$i.length;mr+=1){var li=$i[mr];Rt.accumulated=Wr[li],Wr[li]=He[li].evaluate(Rt,jt)}},Ae}(Re)).load(xe.features):new Br(Ie=xe,Re.geojsonVtOptions)}catch(Ie){return _e(Ie)}var Ie;fe.loaded={};var Lt={};if(Je){var Ut=Je.finish();Ut&&(Lt.resourceTiming={},Lt.resourceTiming[Re.source]=JSON.parse(JSON.stringify(Ut)))}_e(null,Lt)})}},X.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},X.prototype.reloadTile=function(fe,_e){var Re=this.loaded;return Re&&Re[fe.uid]?H.prototype.reloadTile.call(this,fe,_e):this.loadTile(fe,_e)},X.prototype.loadGeoJSON=function(fe,_e){if(fe.request)t.getJSON(fe.request,_e);else{if("string"!=typeof fe.data)return _e(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."));try{return _e(null,JSON.parse(fe.data))}catch{return _e(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))}}},X.prototype.removeSource=function(fe,_e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),_e()},X.prototype.getClusterExpansionZoom=function(fe,_e){try{_e(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Re){_e(Re)}},X.prototype.getClusterChildren=function(fe,_e){try{_e(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Re){_e(Re)}},X.prototype.getClusterLeaves=function(fe,_e){try{_e(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Re){_e(Re)}},X}(Se),Dt=function(H){var X=this;this.self=H,this.actor=new t.Actor(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Se,geojson:to},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(fe,_e){if(X.workerSourceTypes[fe])throw new Error('Worker source with name "'+fe+'" already registered.');X.workerSourceTypes[fe]=_e},this.self.registerRTLTextPlugin=function(fe){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=fe.applyArabicShaping,t.plugin.processBidirectionalText=fe.processBidirectionalText,t.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}};return Dt.prototype.setReferrer=function(H,X){this.referrer=X},Dt.prototype.setImages=function(H,X,fe){for(var _e in this.availableImages[H]=X,this.workerSources[H]){var Re=this.workerSources[H][_e];for(var Je in Re)Re[Je].availableImages=X}fe()},Dt.prototype.setLayers=function(H,X,fe){this.getLayerIndex(H).replace(X),fe()},Dt.prototype.updateLayers=function(H,X,fe){this.getLayerIndex(H).update(X.layers,X.removedIds),fe()},Dt.prototype.loadTile=function(H,X,fe){this.getWorkerSource(H,X.type,X.source).loadTile(X,fe)},Dt.prototype.loadDEMTile=function(H,X,fe){this.getDEMWorkerSource(H,X.source).loadTile(X,fe)},Dt.prototype.reloadTile=function(H,X,fe){this.getWorkerSource(H,X.type,X.source).reloadTile(X,fe)},Dt.prototype.abortTile=function(H,X,fe){this.getWorkerSource(H,X.type,X.source).abortTile(X,fe)},Dt.prototype.removeTile=function(H,X,fe){this.getWorkerSource(H,X.type,X.source).removeTile(X,fe)},Dt.prototype.removeDEMTile=function(H,X){this.getDEMWorkerSource(H,X.source).removeTile(X)},Dt.prototype.removeSource=function(H,X,fe){if(this.workerSources[H]&&this.workerSources[H][X.type]&&this.workerSources[H][X.type][X.source]){var _e=this.workerSources[H][X.type][X.source];delete this.workerSources[H][X.type][X.source],void 0!==_e.removeSource?_e.removeSource(X,fe):fe()}},Dt.prototype.loadWorkerSource=function(H,X,fe){try{this.self.importScripts(X.url),fe()}catch(_e){fe(_e.toString())}},Dt.prototype.syncRTLPluginState=function(H,X,fe){try{t.plugin.setState(X);var _e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=_e){this.self.importScripts(_e);var Re=t.plugin.isParsed();fe(Re?void 0:new Error("RTL Text Plugin failed to import scripts from "+_e),Re)}}catch(Je){fe(Je.toString())}},Dt.prototype.getAvailableImages=function(H){var X=this.availableImages[H];return X||(X=[]),X},Dt.prototype.getLayerIndex=function(H){var X=this.layerIndexes[H];return X||(X=this.layerIndexes[H]=new le),X},Dt.prototype.getWorkerSource=function(H,X,fe){var _e=this;return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][X]||(this.workerSources[H][X]={}),this.workerSources[H][X][fe]||(this.workerSources[H][X][fe]=new this.workerSourceTypes[X]({send:function(Re,Je,Xe){_e.actor.send(Re,Je,Xe,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][X][fe]},Dt.prototype.getDEMWorkerSource=function(H,X){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][X]||(this.demWorkerSources[H][X]=new je),this.demWorkerSources[H][X]},Dt.prototype.enforceCacheSizeLimit=function(H,X){t.enforceCacheSizeLimit(X)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Dt(self)),Dt}),V(0,function(t){var ie=t.createCommonjsModule(function(l){function d(E){return!c(E)}function c(E){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var F,$,se=new Blob([""],{type:"text/javascript"}),ge=URL.createObjectURL(se);try{$=new Worker(ge),F=!0}catch{F=!1}return $&&$.terminate(),URL.revokeObjectURL(ge),F}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var F=document.createElement("canvas");F.width=F.height=1;var $=F.getContext("2d");if(!$)return!1;var se=$.getImageData(0,0,1,1);return se&&se.width===F.width}()?(void 0===m[O=E&&E.failIfMajorPerformanceCaveat]&&(m[O]=function(F){var ge,D,M,$=(ge=F,D=document.createElement("canvas"),(M=Object.create(d.webGLContextAttributes)).failIfMajorPerformanceCaveat=ge,D.probablySupportsContext?D.probablySupportsContext("webgl",M)||D.probablySupportsContext("experimental-webgl",M):D.supportsContext?D.supportsContext("webgl",M)||D.supportsContext("experimental-webgl",M):D.getContext("webgl",M)||D.getContext("experimental-webgl",M));if(!$)return!1;var se=$.createShader($.VERTEX_SHADER);return!(!se||$.isContextLost())&&($.shaderSource(se,"void main() {}"),$.compileShader(se),!0===$.getShaderParameter(se,$.COMPILE_STATUS))}(O)),m[O]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var O}l.exports?l.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=d,window.mapboxgl.notSupportedReason=c);var m={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),te={create:function(l,d,c){var m=t.window.document.createElement(l);return void 0!==d&&(m.className=d),c&&c.appendChild(m),m},createNS:function(l,d){return t.window.document.createElementNS(l,d)}},le=t.window.document&&t.window.document.documentElement.style;function U(l){if(!le)return l[0];for(var d=0;d<l.length;d++)if(l[d]in le)return l[d];return l[0]}var we,de=U(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);te.disableDrag=function(){le&&de&&(we=le[de],le[de]="none")},te.enableDrag=function(){le&&de&&(le[de]=we)};var Pe=U(["transform","WebkitTransform"]);te.setTransform=function(l,d){l.style[Pe]=d};var Se=!1;try{var Ye=Object.defineProperty({},"passive",{get:function(){Se=!0}});t.window.addEventListener("test",Ye,Ye),t.window.removeEventListener("test",Ye,Ye)}catch{Se=!1}te.addEventListener=function(l,d,c,m){void 0===m&&(m={}),l.addEventListener(d,c,"passive"in m&&Se?m:m.capture)},te.removeEventListener=function(l,d,c,m){void 0===m&&(m={}),l.removeEventListener(d,c,"passive"in m&&Se?m:m.capture)};var je=function(l){l.preventDefault(),l.stopPropagation(),t.window.removeEventListener("click",je,!0)};function ke(l){var d=l.userImage;return!!(d&&d.render&&d.render())&&(l.data.replace(new Uint8Array(d.data.buffer)),!0)}te.suppressClick=function(){t.window.addEventListener("click",je,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",je,!0)},0)},te.mousePos=function(l,d){var c=l.getBoundingClientRect();return new t.Point(d.clientX-c.left-l.clientLeft,d.clientY-c.top-l.clientTop)},te.touchPos=function(l,d){for(var c=l.getBoundingClientRect(),m=[],E=0;E<d.length;E++)m.push(new t.Point(d[E].clientX-c.left-l.clientLeft,d[E].clientY-c.top-l.clientTop));return m},te.mouseButton=function(l){return void 0!==t.window.InstallTrigger&&2===l.button&&l.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},te.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var De=function(l){function d(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.isLoaded=function(){return this.loaded},d.prototype.setLoaded=function(c){if(this.loaded!==c&&(this.loaded=c,c)){for(var m=0,E=this.requestors;m<E.length;m+=1){var O=E[m];this._notify(O.ids,O.callback)}this.requestors=[]}},d.prototype.getImage=function(c){return this.images[c]},d.prototype.addImage=function(c,m){this._validate(c,m)&&(this.images[c]=m)},d.prototype._validate=function(c,m){var E=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchX" value'))),E=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchY" value'))),E=!1),this._validateContent(m.content,m)||(this.fire(new t.ErrorEvent(new Error('Image "'+c+'" has invalid "content" value'))),E=!1),E},d.prototype._validateStretch=function(c,m){if(!c)return!0;for(var E=0,O=0,F=c;O<F.length;O+=1){var $=F[O];if($[0]<E||$[1]<$[0]||m<$[1])return!1;E=$[1]}return!0},d.prototype._validateContent=function(c,m){return!(c&&(4!==c.length||c[0]<0||m.data.width<c[0]||c[1]<0||m.data.height<c[1]||c[2]<0||m.data.width<c[2]||c[3]<0||m.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))},d.prototype.updateImage=function(c,m){m.version=this.images[c].version+1,this.images[c]=m,this.updatedImages[c]=!0},d.prototype.removeImage=function(c){var m=this.images[c];delete this.images[c],delete this.patterns[c],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()},d.prototype.listImages=function(){return Object.keys(this.images)},d.prototype.getImages=function(c,m){var E=!0;if(!this.isLoaded())for(var O=0,F=c;O<F.length;O+=1)this.images[F[O]]||(E=!1);this.isLoaded()||E?this._notify(c,m):this.requestors.push({ids:c,callback:m})},d.prototype._notify=function(c,m){for(var E={},O=0,F=c;O<F.length;O+=1){var $=F[O];this.images[$]||this.fire(new t.Event("styleimagemissing",{id:$}));var se=this.images[$];se?E[$]={data:se.data.clone(),pixelRatio:se.pixelRatio,sdf:se.sdf,version:se.version,stretchX:se.stretchX,stretchY:se.stretchY,content:se.content,hasRenderCallback:Boolean(se.userImage&&se.userImage.render)}:t.warnOnce('Image "'+$+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}m(null,E)},d.prototype.getPixelSize=function(){var c=this.atlasImage;return{width:c.width,height:c.height}},d.prototype.getPattern=function(c){var m=this.patterns[c],E=this.getImage(c);if(!E)return null;if(m&&m.position.version===E.version)return m.position;if(m)m.position.version=E.version;else{var O={w:E.data.width+2,h:E.data.height+2,x:0,y:0},F=new t.ImagePosition(O,E);this.patterns[c]={bin:O,position:F}}return this._updatePatternAtlas(),this.patterns[c].position},d.prototype.bind=function(c){var m=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(c,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)},d.prototype._updatePatternAtlas=function(){var c=[];for(var m in this.patterns)c.push(this.patterns[m].bin);var E=t.potpack(c),O=E.w,F=E.h,$=this.atlasImage;for(var se in $.resize({width:O||1,height:F||1}),this.patterns){var ge=this.patterns[se].bin,D=ge.x+1,M=ge.y+1,x=this.images[se].data,A=x.width,z=x.height;t.RGBAImage.copy(x,$,{x:0,y:0},{x:D,y:M},{width:A,height:z}),t.RGBAImage.copy(x,$,{x:0,y:z-1},{x:D,y:M-1},{width:A,height:1}),t.RGBAImage.copy(x,$,{x:0,y:0},{x:D,y:M+z},{width:A,height:1}),t.RGBAImage.copy(x,$,{x:A-1,y:0},{x:D-1,y:M},{width:1,height:z}),t.RGBAImage.copy(x,$,{x:0,y:0},{x:D+A,y:M},{width:1,height:z})}this.dirty=!0},d.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},d.prototype.dispatchRenderCallbacks=function(c){for(var m=0,E=c;m<E.length;m+=1){var O=E[m];if(!this.callbackDispatchedThisFrame[O]){this.callbackDispatchedThisFrame[O]=!0;var F=this.images[O];ke(F)&&this.updateImage(O,F)}}},d}(t.Evented),ze=tt,Qe=tt,lt=1e20;function tt(l,d,c,m,E,O){this.fontSize=l||24,this.buffer=void 0===d?3:d,this.cutoff=m||.25,this.fontFamily=E||"sans-serif",this.fontWeight=O||"normal",this.radius=c||8;var F=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.d=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Int16Array(F),this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ve(l,d,c,m,E,O,F){for(var $=0;$<d;$++){for(var se=0;se<c;se++)m[se]=l[se*d+$];for(Fe(m,E,O,F,c),se=0;se<c;se++)l[se*d+$]=E[se]}for(se=0;se<c;se++){for($=0;$<d;$++)m[$]=l[se*d+$];for(Fe(m,E,O,F,d),$=0;$<d;$++)l[se*d+$]=Math.sqrt(E[$])}}function Fe(l,d,c,m,E){c[0]=0,m[0]=-lt,m[1]=+lt;for(var O=1,F=0;O<E;O++){for(var $=(l[O]+O*O-(l[c[F]]+c[F]*c[F]))/(2*O-2*c[F]);$<=m[F];)F--,$=(l[O]+O*O-(l[c[F]]+c[F]*c[F]))/(2*O-2*c[F]);c[++F]=O,m[F]=$,m[F+1]=+lt}for(O=0,F=0;O<E;O++){for(;m[F+1]<O;)F++;d[O]=(O-c[F])*(O-c[F])+l[c[F]]}}tt.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var d=this.ctx.getImageData(0,0,this.size,this.size),c=new Uint8ClampedArray(this.size*this.size),m=0;m<this.size*this.size;m++){var E=d.data[4*m+3]/255;this.gridOuter[m]=1===E?0:0===E?lt:Math.pow(Math.max(0,.5-E),2),this.gridInner[m]=1===E?lt:0===E?0:Math.pow(Math.max(0,E-.5),2)}for(Ve(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ve(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),m=0;m<this.size*this.size;m++)c[m]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[m]-this.gridInner[m])/this.radius+this.cutoff))));return c},ze.default=Qe;var Ne=function(l,d){this.requestManager=l,this.localIdeographFontFamily=d,this.entries={}};Ne.prototype.setURL=function(l){this.url=l},Ne.prototype.getGlyphs=function(l,d){var c=this,m=[];for(var E in l)for(var O=0,F=l[E];O<F.length;O+=1)m.push({stack:E,id:F[O]});t.asyncAll(m,function($,se){var ge=$.stack,D=$.id,M=c.entries[ge];M||(M=c.entries[ge]={glyphs:{},requests:{},ranges:{}});var x=M.glyphs[D];if(void 0===x){if(x=c._tinySDF(M,ge,D))return M.glyphs[D]=x,void se(null,{stack:ge,id:D,glyph:x});var A=Math.floor(D/256);if(256*A>65535)se(new Error("glyphs > 65535 not supported"));else if(M.ranges[A])se(null,{stack:ge,id:D,glyph:x});else{var z=M.requests[A];z||(z=M.requests[A]=[],Ne.loadGlyphRange(ge,A,c.url,c.requestManager,function(Q,K){if(K){for(var ye in K)c._doesCharSupportLocalGlyph(+ye)||(M.glyphs[+ye]=K[+ye]);M.ranges[A]=!0}for(var Oe=0,et=z;Oe<et.length;Oe+=1)(0,et[Oe])(Q,K);delete M.requests[A]})),z.push(function(Q,K){Q?se(Q):K&&se(null,{stack:ge,id:D,glyph:K[D]||null})})}}else se(null,{stack:ge,id:D,glyph:x})},function($,se){if($)d($);else if(se){for(var ge={},D=0,M=se;D<M.length;D+=1){var x=M[D],A=x.stack,z=x.id,Q=x.glyph;(ge[A]||(ge[A]={}))[z]=Q&&{id:Q.id,bitmap:Q.bitmap.clone(),metrics:Q.metrics}}d(null,ge)}})},Ne.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](l)||t.isChar["Hangul Syllables"](l)||t.isChar.Hiragana(l)||t.isChar.Katakana(l))},Ne.prototype._tinySDF=function(l,d,c){var m=this.localIdeographFontFamily;if(m&&this._doesCharSupportLocalGlyph(c)){var E=l.tinySDF;if(!E){var O="400";/bold/i.test(d)?O="900":/medium/i.test(d)?O="500":/light/i.test(d)&&(O="200"),E=l.tinySDF=new Ne.TinySDF(24,3,8,.25,m,O)}return{id:c,bitmap:new t.AlphaImage({width:30,height:30},E.draw(String.fromCharCode(c))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ne.loadGlyphRange=function(l,d,c,m,E){var O=256*d,F=O+255,$=m.transformRequest(m.normalizeGlyphsURL(c).replace("{fontstack}",l).replace("{range}",O+"-"+F),t.ResourceType.Glyphs);t.getArrayBuffer($,function(se,ge){if(se)E(se);else if(ge){for(var D={},M=0,x=t.parseGlyphPBF(ge);M<x.length;M+=1){var A=x[M];D[A.id]=A}E(null,D)}})},Ne.TinySDF=ze;var Be=function(){this.specification=t.styleSpec.light.position};Be.prototype.possiblyEvaluate=function(l,d){return t.sphericalToCartesian(l.expression.evaluate(d))},Be.prototype.interpolate=function(l,d,c){return{x:t.number(l.x,d.x,c),y:t.number(l.y,d.y,c),z:t.number(l.z,d.z,c)}};var it=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new Be,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Mt=function(l){function d(c){l.call(this),this._transitionable=new t.Transitionable(it),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getLight=function(){return this._transitionable.serialize()},d.prototype.setLight=function(c,m){if(void 0===m&&(m={}),!this._validate(t.validateLight,c,m))for(var E in c){var O=c[E];t.endsWith(E,"-transition")?this._transitionable.setTransition(E.slice(0,-11),O):this._transitionable.setValue(E,O)}},d.prototype.updateTransitions=function(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)},d.prototype.hasTransition=function(){return this._transitioning.hasTransition()},d.prototype.recalculate=function(c){this.properties=this._transitioning.possiblyEvaluate(c)},d.prototype._validate=function(c,m,E){return(!E||!1!==E.validate)&&t.emitValidationErrors(this,c.call(t.validateStyle,t.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},d}(t.Evented),St=function(l,d){this.width=l,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};St.prototype.getDash=function(l,d){var c=l.join(",")+String(d);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(l,d)),this.dashEntry[c]},St.prototype.getDashRanges=function(l,d,c){var m=[],E=l.length%2==1?-l[l.length-1]*c:0,O=l[0]*c,F=!0;m.push({left:E,right:O,isDash:F,zeroLength:0===l[0]});for(var $=l[0],se=1;se<l.length;se++){var ge=l[se];m.push({left:E=$*c,right:O=($+=ge)*c,isDash:F=!F,zeroLength:0===ge})}return m},St.prototype.addRoundDash=function(l,d,c){for(var m=d/2,E=-c;E<=c;E++)for(var O=this.width*(this.nextRow+c+E),F=0,$=l[F],se=0;se<this.width;se++){se/$.right>1&&($=l[++F]);var ge=Math.abs(se-$.left),D=Math.abs(se-$.right),M=Math.min(ge,D),x=void 0,A=E/c*(m+1);if($.isDash){var z=m-Math.abs(A);x=Math.sqrt(M*M+z*z)}else x=m-Math.sqrt(M*M+A*A);this.data[O+se]=Math.max(0,Math.min(255,x+128))}},St.prototype.addRegularDash=function(l){for(var d=l.length-1;d>=0;--d){var c=l[d],m=l[d+1];c.zeroLength?l.splice(d,1):m&&m.isDash===c.isDash&&(m.left=c.left,l.splice(d,1))}var E=l[0],O=l[l.length-1];E.isDash===O.isDash&&(E.left=O.left-this.width,O.right=E.right+this.width);for(var F=this.width*this.nextRow,$=0,se=l[$],ge=0;ge<this.width;ge++){ge/se.right>1&&(se=l[++$]);var D=Math.abs(ge-se.left),M=Math.abs(ge-se.right),x=Math.min(D,M);this.data[F+ge]=Math.max(0,Math.min(255,(se.isDash?x:-x)+128))}},St.prototype.addDash=function(l,d){var c=d?7:0,m=2*c+1;if(this.nextRow+m>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var E=0,O=0;O<l.length;O++)E+=l[O];if(0!==E){var F=this.width/E,$=this.getDashRanges(l,this.width,F);d?this.addRoundDash($,F,c):this.addRegularDash($)}var se={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:E};return this.nextRow+=m,this.dirty=!0,se},St.prototype.bind=function(l){var d=l.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))};var Kt=function l(d,c){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var m=this.workerPool.acquire(this.id),E=0;E<m.length;E++){var O=new l.Actor(m[E],c,this.id);O.name="Worker "+E,this.actors.push(O)}};function wn(l,d,c){var m=function(E,O){if(E)return c(E);if(O){var F=t.pick(t.extend(O,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(F.vectorLayers=O.vector_layers,F.vectorLayerIds=F.vectorLayers.map(function($){return $.id})),F.tiles=d.canonicalizeTileset(F,l.url),c(null,F)}};return l.url?t.getJSON(d.transformRequest(d.normalizeSourceURL(l.url),t.ResourceType.Source),m):t.browser.frame(function(){return m(null,l)})}Kt.prototype.broadcast=function(l,d,c){t.asyncAll(this.actors,function(m,E){m.send(l,d,E)},c=c||function(){})},Kt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Kt.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},Kt.Actor=t.Actor;var ln=function(l,d,c){this.bounds=t.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=c||24};ln.prototype.validateBounds=function(l){return Array.isArray(l)&&4===l.length?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},ln.prototype.contains=function(l){var d=Math.pow(2,l.z),c=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*d),m=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*d),E=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*d),O=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*d);return l.x>=c&&l.x<E&&l.y>=m&&l.y<O};var jn=function(l){function d(c,m,E,O){if(l.call(this),this.id=c,this.dispatcher=E,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(m,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=wn(this._options,this.map._requestManager,function(m,E){c._tileJSONRequest=null,c._loaded=!0,m?c.fire(new t.ErrorEvent(m)):E&&(t.extend(c,E),E.bounds&&(c.tileBounds=new ln(E.bounds,c.minzoom,c.maxzoom)),t.postTurnstileEvent(E.tiles,c.map._requestManager._customAccessToken),t.postMapLoadEvent(E.tiles,c.map._getMapId(),c.map._requestManager._skuToken,c.map._requestManager._customAccessToken),c.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},d.prototype.loaded=function(){return this._loaded},d.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},d.prototype.onAdd=function(c){this.map=c,this.load()},d.prototype.setSourceProperty=function(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},d.prototype.setTiles=function(c){var m=this;return this.setSourceProperty(function(){m._options.tiles=c}),this},d.prototype.setUrl=function(c){var m=this;return this.setSourceProperty(function(){m.url=c,m._options.url=c}),this},d.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},d.prototype.serialize=function(){return t.extend({},this._options)},d.prototype.loadTile=function(c,m){var E=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),O={request:this.map._requestManager.transformRequest(E,t.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function F($,se){return delete c.request,c.aborted?m(null):$&&404!==$.status?m($):(se&&se.resourceTiming&&(c.resourceTiming=se.resourceTiming),this.map._refreshExpiredTiles&&se&&c.setExpiryData(se),c.loadVectorData(se,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}O.request.collectResourceTiming=this._collectResourceTiming,c.actor&&"expired"!==c.state?"loading"===c.state?c.reloadCallback=m:c.request=c.actor.send("reloadTile",O,F.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",O,F.bind(this)))},d.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)},d.prototype.unloadTile=function(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)},d.prototype.hasTransition=function(){return!1},d}(t.Evented),yn=function(l){function d(c,m,E,O){l.call(this),this.id=c,this.dispatcher=E,this.setEventedParent(O),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},m),t.extend(this,t.pick(m,["url","scheme","tileSize"]))}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=wn(this._options,this.map._requestManager,function(m,E){c._tileJSONRequest=null,c._loaded=!0,m?c.fire(new t.ErrorEvent(m)):E&&(t.extend(c,E),E.bounds&&(c.tileBounds=new ln(E.bounds,c.minzoom,c.maxzoom)),t.postTurnstileEvent(E.tiles),t.postMapLoadEvent(E.tiles,c.map._getMapId(),c.map._requestManager._skuToken),c.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},d.prototype.loaded=function(){return this._loaded},d.prototype.onAdd=function(c){this.map=c,this.load()},d.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},d.prototype.serialize=function(){return t.extend({},this._options)},d.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},d.prototype.loadTile=function(c,m){var E=this,O=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);c.request=t.getImage(this.map._requestManager.transformRequest(O,t.ResourceType.Tile),function(F,$){if(delete c.request,c.aborted)c.state="unloaded",m(null);else if(F)c.state="errored",m(F);else if($){E.map._refreshExpiredTiles&&c.setExpiryData($),delete $.cacheControl,delete $.expires;var se=E.map.painter.context,ge=se.gl;c.texture=E.map.painter.getTileTexture($.width),c.texture?c.texture.update($,{useMipmap:!0}):(c.texture=new t.Texture(se,$,ge.RGBA,{useMipmap:!0}),c.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),se.extTextureFilterAnisotropic&&ge.texParameterf(ge.TEXTURE_2D,se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,se.extTextureFilterAnisotropicMax)),c.state="loaded",t.cacheEntryPossiblyAdded(E.dispatcher),m(null)}})},d.prototype.abortTile=function(c,m){c.request&&(c.request.cancel(),delete c.request),m()},d.prototype.unloadTile=function(c,m){c.texture&&this.map.painter.saveTileTexture(c.texture),m()},d.prototype.hasTransition=function(){return!1},d}(t.Evented),Yr=function(l){function d(c,m,E,O){l.call(this,c,m,E,O),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox"}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},d.prototype.loadTile=function(c,m){var E=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function O(F,$){F&&(c.state="errored",m(F)),$&&(c.dem=$,c.needsHillshadePrepare=!0,c.state="loaded",m(null))}c.request=t.getImage(this.map._requestManager.transformRequest(E,t.ResourceType.Tile),function(F,$){if(delete c.request,c.aborted)c.state="unloaded",m(null);else if(F)c.state="errored",m(F);else if($){this.map._refreshExpiredTiles&&c.setExpiryData($),delete $.cacheControl,delete $.expires;var se=t.window.ImageBitmap&&$ instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?$:t.browser.getImageData($,1),ge={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:se,encoding:this.encoding};c.actor&&"expired"!==c.state||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",ge,O.bind(this)))}}.bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)},d.prototype._getNeighboringTiles=function(c){var m=c.canonical,E=Math.pow(2,m.z),O=(m.x-1+E)%E,F=0===m.x?c.wrap-1:c.wrap,$=(m.x+1+E)%E,se=m.x+1===E?c.wrap+1:c.wrap,ge={};return ge[new t.OverscaledTileID(c.overscaledZ,F,m.z,O,m.y).key]={backfilled:!1},ge[new t.OverscaledTileID(c.overscaledZ,se,m.z,$,m.y).key]={backfilled:!1},m.y>0&&(ge[new t.OverscaledTileID(c.overscaledZ,F,m.z,O,m.y-1).key]={backfilled:!1},ge[new t.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},ge[new t.OverscaledTileID(c.overscaledZ,se,m.z,$,m.y-1).key]={backfilled:!1}),m.y+1<E&&(ge[new t.OverscaledTileID(c.overscaledZ,F,m.z,O,m.y+1).key]={backfilled:!1},ge[new t.OverscaledTileID(c.overscaledZ,c.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},ge[new t.OverscaledTileID(c.overscaledZ,se,m.z,$,m.y+1).key]={backfilled:!1}),ge},d.prototype.unloadTile=function(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})},d}(yn),Zn=function(l){function d(c,m,E,O){l.call(this),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=E.getActor(),this.setEventedParent(O),this._data=m.data,this._options=t.extend({},m),this._collectResourceTiming=m.collectResourceTiming,this._resourceTiming=[],void 0!==m.maxzoom&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId;var F=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:(void 0!==m.buffer?m.buffer:128)*F,tolerance:(void 0!==m.tolerance?m.tolerance:.375)*F,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:void 0!==m.clusterMaxZoom?Math.min(m.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,m.clusterMinPoints||2),extent:t.EXTENT,radius:(m.clusterRadius||50)*F,log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(){var c=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new t.ErrorEvent(m));else{var E={dataType:"source",sourceDataType:"metadata"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(E.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new t.Event("data",E))}})},d.prototype.onAdd=function(c){this.map=c,this.load()},d.prototype.setData=function(c){var m=this;return this._data=c,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(E){if(E)m.fire(new t.ErrorEvent(E));else{var O={dataType:"source",sourceDataType:"content"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(O.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new t.Event("data",O))}}),this},d.prototype.getClusterExpansionZoom=function(c,m){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},m),this},d.prototype.getClusterChildren=function(c,m){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},m),this},d.prototype.getClusterLeaves=function(c,m,E,O){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:m,offset:E},O),this},d.prototype._updateWorkerData=function(c){var m=this;this._loaded=!1;var E=t.extend({},this.workerOptions),O=this._data;"string"==typeof O?(E.request=this.map._requestManager.transformRequest(t.browser.resolveURL(O),t.ResourceType.Source),E.request.collectResourceTiming=this._collectResourceTiming):E.data=JSON.stringify(O),this.actor.send(this.type+".loadData",E,function(F,$){m._removed||$&&$.abandoned||(m._loaded=!0,$&&$.resourceTiming&&$.resourceTiming[m.id]&&(m._resourceTiming=$.resourceTiming[m.id].slice(0)),m.actor.send(m.type+".coalesce",{source:E.source},null),c(F))})},d.prototype.loaded=function(){return this._loaded},d.prototype.loadTile=function(c,m){var E=this,O=c.actor?"reloadTile":"loadTile";c.actor=this.actor,c.request=this.actor.send(O,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(F,$){return delete c.request,c.unloadVectorData(),c.aborted?m(null):F?m(F):(c.loadVectorData($,E.map.painter,"reloadTile"===O),m(null))})},d.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0},d.prototype.unloadTile=function(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})},d.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},d.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},d.prototype.hasTransition=function(){return!1},d}(t.Evented),sr=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ji=function(l){function d(c,m,E,O){l.call(this),this.id=c,this.dispatcher=E,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(O),this.options=m}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(c,m){var E=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(O,F){E._loaded=!0,O?E.fire(new t.ErrorEvent(O)):F&&(E.image=F,c&&(E.coordinates=c),m&&m(),E._finishLoading())})},d.prototype.loaded=function(){return this._loaded},d.prototype.updateImage=function(c){var m=this;return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,function(){m.texture=null}),this):this},d.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},d.prototype.onAdd=function(c){this.map=c,this.load()},d.prototype.setCoordinates=function(c){var m=this;this.coordinates=c;var E=c.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(F){for(var $=1/0,se=1/0,ge=-1/0,D=-1/0,M=0,x=F;M<x.length;M+=1){var A=x[M];$=Math.min($,A.x),se=Math.min(se,A.y),ge=Math.max(ge,A.x),D=Math.max(D,A.y)}var z=Math.max(ge-$,D-se),Q=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),K=Math.pow(2,Q);return new t.CanonicalTileID(Q,Math.floor(($+ge)/2*K),Math.floor((se+D)/2*K))}(E),this.minzoom=this.maxzoom=this.tileID.z;var O=E.map(function(F){return m.tileID.getTilePoint(F)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(O[0].x,O[0].y,0,0),this._boundsArray.emplaceBack(O[1].x,O[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(O[3].x,O[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(O[2].x,O[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},d.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,sr.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(c,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var O=this.tiles[E];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}},d.prototype.loadTile=function(c,m){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},m(null)):(c.state="errored",m(null))},d.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},d.prototype.hasTransition=function(){return!1},d}(t.Evented),bt=function(l){function d(c,m,E,O){l.call(this,c,m,E,O),this.roundZoom=!0,this.type="video",this.options=m}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(){var c=this;this._loaded=!1;var m=this.options;this.urls=[];for(var E=0,O=m.urls;E<O.length;E+=1)this.urls.push(this.map._requestManager.transformRequest(O[E],t.ResourceType.Source).url);t.getVideo(this.urls,function(F,$){c._loaded=!0,F?c.fire(new t.ErrorEvent(F)):$&&(c.video=$,c.video.loop=!0,c.video.setAttribute("playsinline",""),c.video.addEventListener("playing",function(){c.map.triggerRepaint()}),c.map&&c.video.play(),c._finishLoading())})},d.prototype.pause=function(){this.video&&this.video.pause()},d.prototype.play=function(){this.video&&this.video.play()},d.prototype.seek=function(c){if(this.video){var m=this.video.seekable;c<m.start(0)||c>m.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+m.start(0)+" and "+m.end(0)+"-second mark."))):this.video.currentTime=c}},d.prototype.getVideo=function(){return this.video},d.prototype.onAdd=function(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},d.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,sr.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(c,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this.tiles){var O=this.tiles[E];"loaded"!==O.state&&(O.state="loaded",O.texture=this.texture)}}},d.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},d.prototype.hasTransition=function(){return this.video&&!this.video.paused},d}(Ji),at=function(l){function d(c,m,E,O){l.call(this,c,m,E,O),m.coordinates?Array.isArray(m.coordinates)&&4===m.coordinates.length&&!m.coordinates.some(function(F){return!Array.isArray(F)||2!==F.length||F.some(function($){return"number"!=typeof $})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+c,null,'missing required property "coordinates"'))),m.animate&&"boolean"!=typeof m.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),m.canvas?"string"==typeof m.canvas||m.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=m,this.animate=void 0===m.animate||m.animate}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},d.prototype.getCanvas=function(){return this.canvas},d.prototype.onAdd=function(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()},d.prototype.onRemove=function(){this.pause()},d.prototype.prepare=function(){var c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var m=this.map.painter.context,E=m.gl;for(var O in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,sr.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(m,this.canvas,E.RGBA,{premultiply:!0}),this.tiles){var F=this.tiles[O];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture)}}},d.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},d.prototype.hasTransition=function(){return this._playing},d.prototype._hasInvalidDimensions=function(){for(var c=0,m=[this.canvas.width,this.canvas.height];c<m.length;c+=1){var E=m[c];if(isNaN(E)||E<=0)return!0}return!1},d}(Ji),Pt={vector:jn,raster:yn,"raster-dem":Yr,geojson:Zn,video:bt,image:Ji,canvas:at};function Vt(l,d){var c=t.identity([]);return t.translate(c,c,[1,1,0]),t.scale(c,c,[.5*l.width,.5*l.height,1]),t.multiply(c,c,l.calculatePosMatrix(d.toUnwrapped()))}function qt(l,d,c,m,E,O){var F=function(Q,K,ye){if(Q)for(var Oe=0,et=Q;Oe<et.length;Oe+=1){var ut=K[et[Oe]];if(ut&&ut.source===ye&&"fill-extrusion"===ut.type)return!0}else for(var ct in K){var vt=K[ct];if(vt.source===ye&&"fill-extrusion"===vt.type)return!0}return!1}(E&&E.layers,d,l.id),$=O.maxPitchScaleFactor(),se=l.tilesIn(m,$,F);se.sort(_t);for(var ge=[],D=0,M=se;D<M.length;D+=1){var x=M[D];ge.push({wrappedTileID:x.tileID.wrapped().key,queryResults:x.tile.queryRenderedFeatures(d,c,l._state,x.queryGeometry,x.cameraQueryGeometry,x.scale,E,O,$,Vt(l.transform,x.tileID))})}var A=function(Q){for(var K={},ye={},Oe=0,et=Q;Oe<et.length;Oe+=1){var ut=et[Oe],ct=ut.queryResults,vt=ut.wrappedTileID,Ft=ye[vt]=ye[vt]||{};for(var rn in ct)for(var Qt=ct[rn],pn=Ft[rn]=Ft[rn]||{},zn=K[rn]=K[rn]||[],Nn=0,Vn=Qt;Nn<Vn.length;Nn+=1){var zi=Vn[Nn];pn[zi.featureIndex]||(pn[zi.featureIndex]=!0,zn.push(zi))}}return K}(ge);for(var z in A)A[z].forEach(function(Q){var K=Q.feature,ye=l.getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=ye});return A}function _t(l,d){var c=l.tileID,m=d.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}var Ot=function(l,d){this.max=l,this.onRemove=d,this.reset()};Ot.prototype.reset=function(){for(var l in this.data)for(var d=0,c=this.data[l];d<c.length;d+=1){var m=c[d];m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value)}return this.data={},this.order=[],this},Ot.prototype.add=function(l,d,c){var m=this,E=l.wrapped().key;void 0===this.data[E]&&(this.data[E]=[]);var O={value:d,timeout:void 0};if(void 0!==c&&(O.timeout=setTimeout(function(){m.remove(l,O)},c)),this.data[E].push(O),this.order.push(E),this.order.length>this.max){var F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this},Ot.prototype.has=function(l){return l.wrapped().key in this.data},Ot.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},Ot.prototype._getAndRemoveByKey=function(l){var d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),0===this.data[l].length&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value},Ot.prototype.getByKey=function(l){var d=this.data[l];return d?d[0].value:null},Ot.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},Ot.prototype.remove=function(l,d){if(!this.has(l))return this;var c=l.wrapped().key,m=void 0===d?0:this.data[c].indexOf(d),E=this.data[c][m];return this.data[c].splice(m,1),E.timeout&&clearTimeout(E.timeout),0===this.data[c].length&&delete this.data[c],this.onRemove(E.value),this.order.splice(this.order.indexOf(c),1),this},Ot.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this},Ot.prototype.filter=function(l){var d=[];for(var c in this.data)for(var m=0,E=this.data[c];m<E.length;m+=1){var O=E[m];l(O.value)||d.push(O)}for(var F=0,$=d;F<$.length;F+=1){var se=$[F];this.remove(se.value.tileID,se)}};var un=function(l,d,c){this.context=l;var m=l.gl;this.buffer=m.createBuffer(),this.dynamicDraw=Boolean(c),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer};un.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},un.prototype.updateData=function(l){var d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},un.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Qn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},En=function(l,d,c,m){this.length=d.length,this.attributes=c,this.itemSize=d.bytesPerElement,this.dynamicDraw=m,this.context=l;var E=l.gl;this.buffer=E.createBuffer(),l.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer};En.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},En.prototype.updateData=function(l){var d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)},En.prototype.enableAttributes=function(l,d){for(var c=0;c<this.attributes.length;c++){var m=d.attributes[this.attributes[c].name];void 0!==m&&l.enableVertexAttribArray(m)}},En.prototype.setVertexAttribPointers=function(l,d,c){for(var m=0;m<this.attributes.length;m++){var E=this.attributes[m],O=d.attributes[E.name];void 0!==O&&l.vertexAttribPointer(O,E.components,l[Qn[E.type]],!1,this.itemSize,E.offset+this.itemSize*(c||0))}},En.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gn=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};gn.prototype.get=function(){return this.current},gn.prototype.set=function(l){},gn.prototype.getDefault=function(){return this.default},gn.prototype.setDefault=function(){this.set(this.default)};var Cn=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return t.Color.transparent},d.prototype.set=function(c){var m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},d}(gn),Kn=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return 1},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)},d}(gn),Hn=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return 0},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)},d}(gn),Zt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return[!0,!0,!0,!0]},d.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},d}(gn),nn=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!0},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)},d}(gn),zt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return 255},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)},d}(gn),Xt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},d.prototype.set=function(c){var m=this.current;(c.func!==m.func||c.ref!==m.ref||c.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)},d}(gn),Ht=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]},d.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)},d}(gn),ui=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=c,this.dirty=!1}},d}(gn),Zi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return[0,1]},d.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)},d}(gn),qi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=c,this.dirty=!1}},d}(gn),Er=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.LESS},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)},d}(gn),Or=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.BLEND):m.disable(m.BLEND),this.current=c,this.dirty=!1}},d}(gn),In=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){var c=this.gl;return[c.ONE,c.ZERO]},d.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)},d}(gn),Ei=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return t.Color.transparent},d.prototype.set=function(c){var m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},d}(gn),N=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.FUNC_ADD},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)},d}(gn),ce=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;c?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=c,this.dirty=!1}},d}(gn),ht=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.BACK},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)},d}(gn),It=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.CCW},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)},d}(gn),Jt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)},d}(gn),xt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return this.gl.TEXTURE0},d.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)},d}(gn),Gt=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]},d.prototype.set=function(c){var m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},d}(gn),bn=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,c),this.current=c,this.dirty=!1}},d}(gn),di=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,c),this.current=c,this.dirty=!1}},d}(gn),fi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindTexture(m.TEXTURE_2D,c),this.current=c,this.dirty=!1}},d}(gn),Mo=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}},d}(gn),hi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){var m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1},d}(gn),Br=function(l){function d(c){l.call(this,c),this.vao=c.extVertexArrayObject}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d.prototype.set=function(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)},d}(gn),Pr=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return 4},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}},d}(gn),eo=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}},d}(gn),to=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return!1},d.prototype.set=function(c){if(c!==this.current||this.dirty){var m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}},d}(gn),Dt=function(l){function d(c,m){l.call(this,c),this.context=c,this.parent=m}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getDefault=function(){return null},d}(gn),H=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.setDirty=function(){this.dirty=!0},d.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}},d}(Dt),X=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1}},d}(Dt),fe=function(l,d,c,m){this.context=l,this.width=d,this.height=c;var E=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new H(l,E),m&&(this.depthAttachment=new X(l,E))};fe.prototype.destroy=function(){var l=this.context.gl,d=this.colorAttachment.get();if(d&&l.deleteTexture(d),this.depthAttachment){var c=this.depthAttachment.get();c&&l.deleteRenderbuffer(c)}l.deleteFramebuffer(this.framebuffer)};var _e=function(l,d,c){this.func=l,this.mask=d,this.range=c};_e.ReadOnly=!1,_e.ReadWrite=!0,_e.disabled=new _e(519,_e.ReadOnly,[0,1]);var Re=function(l,d,c,m,E,O){this.test=l,this.ref=d,this.mask=c,this.fail=m,this.depthFail=E,this.pass=O};Re.disabled=new Re({func:519,mask:0},0,0,7680,7680,7680);var Je=function(l,d,c){this.blendFunction=l,this.blendColor=d,this.mask=c};Je.disabled=new Je(Je.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Je.unblended=new Je(Je.Replace,t.Color.transparent,[!0,!0,!0,!0]),Je.alphaBlended=new Je([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Xe=function(l,d,c){this.enable=l,this.mode=d,this.frontFace=c};Xe.disabled=new Xe(!1,1029,2305),Xe.backCCW=new Xe(!0,1029,2305);var xe=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Cn(this),this.clearDepth=new Kn(this),this.clearStencil=new Hn(this),this.colorMask=new Zt(this),this.depthMask=new nn(this),this.stencilMask=new zt(this),this.stencilFunc=new Xt(this),this.stencilOp=new Ht(this),this.stencilTest=new ui(this),this.depthRange=new Zi(this),this.depthTest=new qi(this),this.depthFunc=new Er(this),this.blend=new Or(this),this.blendFunc=new In(this),this.blendColor=new Ei(this),this.blendEquation=new N(this),this.cullFace=new ce(this),this.cullFaceSide=new ht(this),this.frontFace=new It(this),this.program=new Jt(this),this.activeTexture=new xt(this),this.viewport=new Gt(this),this.bindFramebuffer=new bn(this),this.bindRenderbuffer=new di(this),this.bindTexture=new fi(this),this.bindVertexBuffer=new Mo(this),this.bindElementBuffer=new hi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Br(this),this.pixelStoreUnpack=new Pr(this),this.pixelStoreUnpackPremultiplyAlpha=new eo(this),this.pixelStoreUnpackFlipY=new to(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};xe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},xe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},xe.prototype.createIndexBuffer=function(l,d){return new un(this,l,d)},xe.prototype.createVertexBuffer=function(l,d,c){return new En(this,l,d,c)},xe.prototype.createRenderbuffer=function(l,d,c){var m=this.gl,E=m.createRenderbuffer();return this.bindRenderbuffer.set(E),m.renderbufferStorage(m.RENDERBUFFER,l,d,c),this.bindRenderbuffer.set(null),E},xe.prototype.createFramebuffer=function(l,d,c){return new fe(this,l,d,c)},xe.prototype.clear=function(l){var d=l.color,c=l.depth,m=this.gl,E=0;d&&(E|=m.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),void 0!==c&&(E|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m.clear(E)},xe.prototype.setCullFace=function(l){!1===l.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},xe.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},xe.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},xe.prototype.setColorMode=function(l){t.deepEqual(l.blendFunction,Je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},xe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ge=function(l){function d(c,m,E){var O=this;l.call(this),this.id=c,this.dispatcher=E,this.on("data",function(F){"source"===F.dataType&&"metadata"===F.sourceDataType&&(O._sourceLoaded=!0),O._sourceLoaded&&!O._paused&&"source"===F.dataType&&"content"===F.sourceDataType&&(O.reload(),O.transform&&O.update(O.transform))}),this.on("error",function(){O._sourceErrored=!0}),this._source=function(F,$,se,ge){var D=new Pt[$.type](F,$,se,ge);if(D.id!==F)throw new Error("Expected Source id to be "+F+" instead of "+D.id);return t.bindAll(["load","abort","unload","serialize","prepare"],D),D}(c,m,E,this),this._tiles={},this._cache=new Ot(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.onAdd=function(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)},d.prototype.onRemove=function(c){this._source&&this._source.onRemove&&this._source.onRemove(c)},d.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var c in this._tiles){var m=this._tiles[c];if("loaded"!==m.state&&"errored"!==m.state)return!1}return!0},d.prototype.getSource=function(){return this._source},d.prototype.pause=function(){this._paused=!0},d.prototype.resume=function(){if(this._paused){var c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}},d.prototype._loadTile=function(c,m){return this._source.loadTile(c,m)},d.prototype._unloadTile=function(c){if(this._source.unloadTile)return this._source.unloadTile(c,function(){})},d.prototype._abortTile=function(c){if(this._source.abortTile)return this._source.abortTile(c,function(){})},d.prototype.serialize=function(){return this._source.serialize()},d.prototype.prepare=function(c){for(var m in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var E=this._tiles[m];E.upload(c),E.prepare(this.map.style.imageManager)}},d.prototype.getIds=function(){return t.values(this._tiles).map(function(c){return c.tileID}).sort(ft).map(function(c){return c.key})},d.prototype.getRenderableIds=function(c){var m=this,E=[];for(var O in this._tiles)this._isIdRenderable(O,c)&&E.push(this._tiles[O]);return c?E.sort(function(F,$){var se=F.tileID,ge=$.tileID,D=new t.Point(se.canonical.x,se.canonical.y)._rotate(m.transform.angle),M=new t.Point(ge.canonical.x,ge.canonical.y)._rotate(m.transform.angle);return se.overscaledZ-ge.overscaledZ||M.y-D.y||M.x-D.x}).map(function(F){return F.tileID.key}):E.map(function(F){return F.tileID}).sort(ft).map(function(F){return F.key})},d.prototype.hasRenderableParent=function(c){var m=this.findLoadedParent(c,0);return!!m&&this._isIdRenderable(m.tileID.key)},d.prototype._isIdRenderable=function(c,m){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(m||!this._tiles[c].holdingForFade())},d.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var c in this._cache.reset(),this._tiles)"errored"!==this._tiles[c].state&&this._reloadTile(c,"reloading")},d.prototype._reloadTile=function(c,m){var E=this._tiles[c];E&&("loading"!==E.state&&(E.state=m),this._loadTile(E,this._tileLoaded.bind(this,E,c,m)))},d.prototype._tileLoaded=function(c,m,E,O){if(O)return c.state="errored",void(404!==O.status?this._source.fire(new t.ErrorEvent(O,{tile:c})):this.update(this.transform));c.timeAdded=t.browser.now(),"expired"===E&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(m,c),"raster-dem"===this.getSource().type&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:c,coord:c.tileID}))},d.prototype._backfillDEM=function(c){for(var m=this.getRenderableIds(),E=0;E<m.length;E++){var O=m[E];if(c.neighboringTiles&&c.neighboringTiles[O]){var F=this.getTileByID(O);$(c,F),$(F,c)}}function $(se,ge){se.needsHillshadePrepare=!0;var D=ge.tileID.canonical.x-se.tileID.canonical.x,M=ge.tileID.canonical.y-se.tileID.canonical.y,x=Math.pow(2,se.tileID.canonical.z),A=ge.tileID.key;0===D&&0===M||Math.abs(M)>1||(Math.abs(D)>1&&(1===Math.abs(D+x)?D+=x:1===Math.abs(D-x)&&(D-=x)),ge.dem&&se.dem&&(se.dem.backfillBorder(ge.dem,D,M),se.neighboringTiles&&se.neighboringTiles[A]&&(se.neighboringTiles[A].backfilled=!0)))}},d.prototype.getTile=function(c){return this.getTileByID(c.key)},d.prototype.getTileByID=function(c){return this._tiles[c]},d.prototype._retainLoadedChildren=function(c,m,E,O){for(var F in this._tiles){var $=this._tiles[F];if(!(O[F]||!$.hasData()||$.tileID.overscaledZ<=m||$.tileID.overscaledZ>E)){for(var se=$.tileID;$&&$.tileID.overscaledZ>m+1;){var ge=$.tileID.scaledTo($.tileID.overscaledZ-1);($=this._tiles[ge.key])&&$.hasData()&&(se=ge)}for(var D=se;D.overscaledZ>m;)if(c[(D=D.scaledTo(D.overscaledZ-1)).key]){O[se.key]=se;break}}}},d.prototype.findLoadedParent=function(c,m){if(c.key in this._loadedParentTiles){var E=this._loadedParentTiles[c.key];return E&&E.tileID.overscaledZ>=m?E:null}for(var O=c.overscaledZ-1;O>=m;O--){var F=c.scaledTo(O),$=this._getLoadedTile(F);if($)return $}},d.prototype._getLoadedTile=function(c){var m=this._tiles[c.key];return m&&m.hasData()?m:this._cache.getByKey(c.wrapped().key)},d.prototype.updateCacheSize=function(c){var m=Math.ceil(c.width/this._source.tileSize)+1,E=Math.ceil(c.height/this._source.tileSize)+1,O=Math.floor(m*E*5),F="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,O):O;this._cache.setMaxSize(F)},d.prototype.handleWrapJump=function(c){var m=Math.round((c-(void 0===this._prevLng?c:this._prevLng))/360);if(this._prevLng=c,m){var E={};for(var O in this._tiles){var F=this._tiles[O];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+m),E[F.tileID.key]=F}for(var $ in this._tiles=E,this._timers)clearTimeout(this._timers[$]),delete this._timers[$];for(var se in this._tiles)this._setTileReloadTimer(se,this._tiles[se])}},d.prototype.update=function(c){var m=this;if(this.transform=c,this._sourceLoaded&&!this._paused){var E;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?E=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new t.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(E=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(E=E.filter(function(Ft){return m._source.hasTile(Ft)}))):E=[];var O=c.coveringZoomLevel(this._source),F=Math.max(O-d.maxOverzooming,this._source.minzoom),$=Math.max(O+d.maxUnderzooming,this._source.minzoom),se=this._updateRetainedTiles(E,O);if(Lt(this._source.type)){for(var ge={},D={},M=0,x=Object.keys(se);M<x.length;M+=1){var A=x[M],z=se[A],Q=this._tiles[A];if(Q&&!(Q.fadeEndTime&&Q.fadeEndTime<=t.browser.now())){var K=this.findLoadedParent(z,F);K&&(this._addTile(K.tileID),ge[K.tileID.key]=K.tileID),D[A]=z}}for(var ye in this._retainLoadedChildren(D,O,$,se),ge)se[ye]||(this._coveredTiles[ye]=!0,se[ye]=ge[ye])}for(var Oe in se)this._tiles[Oe].clearFadeHold();for(var et=0,ut=t.keysDifference(this._tiles,se);et<ut.length;et+=1){var ct=ut[et],vt=this._tiles[ct];vt.hasSymbolBuckets&&!vt.holdingForFade()?vt.setHoldDuration(this.map._fadeDuration):vt.hasSymbolBuckets&&!vt.symbolFadeFinished()||this._removeTile(ct)}this._updateLoadedParentTileCache()}},d.prototype.releaseSymbolFadeTiles=function(){for(var c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)},d.prototype._updateRetainedTiles=function(c,m){for(var E={},O={},F=Math.max(m-d.maxOverzooming,this._source.minzoom),$=Math.max(m+d.maxUnderzooming,this._source.minzoom),se={},ge=0,D=c;ge<D.length;ge+=1){var M=D[ge],x=this._addTile(M);E[M.key]=M,x.hasData()||m<this._source.maxzoom&&(se[M.key]=M)}this._retainLoadedChildren(se,m,$,E);for(var A=0,z=c;A<z.length;A+=1){var Q=z[A],K=this._tiles[Q.key];if(!K.hasData()){if(m+1>this._source.maxzoom){var ye=Q.children(this._source.maxzoom)[0],Oe=this.getTile(ye);if(Oe&&Oe.hasData()){E[ye.key]=ye;continue}}else{var et=Q.children(this._source.maxzoom);if(E[et[0].key]&&E[et[1].key]&&E[et[2].key]&&E[et[3].key])continue}for(var ut=K.wasRequested(),ct=Q.overscaledZ-1;ct>=F;--ct){var vt=Q.scaledTo(ct);if(O[vt.key]||(O[vt.key]=!0,!(K=this.getTile(vt))&&ut&&(K=this._addTile(vt)),K&&(E[vt.key]=vt,ut=K.wasRequested(),K.hasData())))break}}}return E},d.prototype._updateLoadedParentTileCache=function(){for(var c in this._loadedParentTiles={},this._tiles){for(var m=[],E=void 0,O=this._tiles[c].tileID;O.overscaledZ>0;){if(O.key in this._loadedParentTiles){E=this._loadedParentTiles[O.key];break}m.push(O.key);var F=O.scaledTo(O.overscaledZ-1);if(E=this._getLoadedTile(F))break;O=F}for(var $=0,se=m;$<se.length;$+=1)this._loadedParentTiles[se[$]]=E}},d.prototype._addTile=function(c){var m=this._tiles[c.key];if(m)return m;(m=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,m),m.tileID=c,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,m)));var E=Boolean(m);return E||(m=new t.Tile(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(m,this._tileLoaded.bind(this,m,c.key,m.state))),m?(m.uses++,this._tiles[c.key]=m,E||this._source.fire(new t.Event("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m):null},d.prototype._setTileReloadTimer=function(c,m){var E=this;c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);var O=m.getExpiryTimeout();O&&(this._timers[c]=setTimeout(function(){E._reloadTile(c,"expired"),delete E._timers[c]},O))},d.prototype._removeTile=function(c){var m=this._tiles[c];m&&(m.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),m.uses>0||(m.hasData()&&"reloading"!==m.state?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))},d.prototype.clearTiles=function(){for(var c in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(c);this._cache.reset()},d.prototype.tilesIn=function(c,m,E){var O=this,F=[],$=this.transform;if(!$)return F;for(var se=E?$.getCameraQueryGeometry(c):c,ge=c.map(function(ct){return $.pointCoordinate(ct)}),D=se.map(function(ct){return $.pointCoordinate(ct)}),M=this.getIds(),x=1/0,A=1/0,z=-1/0,Q=-1/0,K=0,ye=D;K<ye.length;K+=1){var Oe=ye[K];x=Math.min(x,Oe.x),A=Math.min(A,Oe.y),z=Math.max(z,Oe.x),Q=Math.max(Q,Oe.y)}for(var et=function(ct){var vt=O._tiles[M[ct]];if(!vt.holdingForFade()){var Ft=vt.tileID,rn=Math.pow(2,$.zoom-vt.tileID.overscaledZ),Qt=m*vt.queryPadding*t.EXTENT/vt.tileSize/rn,pn=[Ft.getTilePoint(new t.MercatorCoordinate(x,A)),Ft.getTilePoint(new t.MercatorCoordinate(z,Q))];if(pn[0].x-Qt<t.EXTENT&&pn[0].y-Qt<t.EXTENT&&pn[1].x+Qt>=0&&pn[1].y+Qt>=0){var zn=ge.map(function(Vn){return Ft.getTilePoint(Vn)}),Nn=D.map(function(Vn){return Ft.getTilePoint(Vn)});F.push({tile:vt,tileID:Ft,queryGeometry:zn,cameraQueryGeometry:Nn,scale:rn})}}},ut=0;ut<M.length;ut++)et(ut);return F},d.prototype.getVisibleCoordinates=function(c){for(var m=this,E=this.getRenderableIds(c).map(function(se){return m._tiles[se].tileID}),O=0,F=E;O<F.length;O+=1){var $=F[O];$.posMatrix=this.transform.calculatePosMatrix($.toUnwrapped())}return E},d.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var c in this._tiles){var m=this._tiles[c];if(void 0!==m.fadeEndTime&&m.fadeEndTime>=t.browser.now())return!0}return!1},d.prototype.setFeatureState=function(c,m,E){this._state.updateState(c=c||"_geojsonTileLayer",m,E)},d.prototype.removeFeatureState=function(c,m,E){this._state.removeFeatureState(c=c||"_geojsonTileLayer",m,E)},d.prototype.getFeatureState=function(c,m){return this._state.getState(c=c||"_geojsonTileLayer",m)},d.prototype.setDependencies=function(c,m,E){var O=this._tiles[c];O&&O.setDependencies(m,E)},d.prototype.reloadTilesForDependencies=function(c,m){for(var E in this._tiles)this._tiles[E].hasDependency(c,m)&&this._reloadTile(E,"reloading");this._cache.filter(function(O){return!O.hasDependency(c,m)})},d}(t.Evented);function ft(l,d){var c=Math.abs(2*l.wrap)-+(l.wrap<0),m=Math.abs(2*d.wrap)-+(d.wrap<0);return l.overscaledZ-d.overscaledZ||m-c||d.canonical.y-l.canonical.y||d.canonical.x-l.canonical.x}function Lt(l){return"raster"===l||"image"===l||"video"===l}function Ut(){return new t.window.Worker(vr.workerUrl)}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;var Ie="mapboxgl_preloaded_worker_pool",Ae=function(){this.active={}};Ae.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Ut);return this.active[l]=!0,this.workers.slice()},Ae.prototype.release=function(l){delete this.active[l],0===this.numActive()&&(this.workers.forEach(function(d){d.terminate()}),this.workers=null)},Ae.prototype.isPreloaded=function(){return!!this.active[Ie]},Ae.prototype.numActive=function(){return Object.keys(this.active).length};var Me,qe=Math.floor(t.browser.hardwareConcurrency/2);function He(){return Me||(Me=new Ae),Me}function Rt(l,d){var c={};for(var m in l)"ref"!==m&&(c[m]=l[m]);return t.refProperties.forEach(function(E){E in d&&(c[E]=d[E])}),c}function jt(l){l=l.slice();for(var d=Object.create(null),c=0;c<l.length;c++)d[l[c].id]=l[c];for(var m=0;m<l.length;m++)"ref"in l[m]&&(l[m]=Rt(l[m],d[l[m].ref]));return l}Ae.workerCount=Math.max(Math.min(qe,6),1);var en={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function An(l,d,c){c.push({command:en.addSource,args:[l,d[l]]})}function sn(l,d,c){d.push({command:en.removeSource,args:[l]}),c[l]=!0}function ei(l,d,c,m){sn(l,c,m),An(l,d,c)}function Si(l,d,c){var m;for(m in l[c])if(l[c].hasOwnProperty(m)&&"data"!==m&&!t.deepEqual(l[c][m],d[c][m]))return!1;for(m in d[c])if(d[c].hasOwnProperty(m)&&"data"!==m&&!t.deepEqual(l[c][m],d[c][m]))return!1;return!0}function oi(l,d,c,m,E,O){var F;for(F in d=d||{},l=l||{})l.hasOwnProperty(F)&&(t.deepEqual(l[F],d[F])||c.push({command:O,args:[m,F,d[F],E]}));for(F in d)d.hasOwnProperty(F)&&!l.hasOwnProperty(F)&&(t.deepEqual(l[F],d[F])||c.push({command:O,args:[m,F,d[F],E]}))}function Ti(l){return l.id}function mi(l,d){return l[d.id]=d,l}var Wr=function(l,d){this.reset(l,d)};Wr.prototype.reset=function(l,d){this.points=l||[],this._distances=[0];for(var c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Wr.prototype.lerp=function(l){if(1===this.points.length)return this.points[0];l=t.clamp(l,0,1);for(var d=1,c=this._distances[d],m=l*this.paddedLength+this.padding;c<m&&d<this._distances.length;)c=this._distances[++d];var E=d-1,O=this._distances[E],F=c-O,$=F>0?(m-O)/F:0;return this.points[E].mult(1-$).add(this.points[d].mult($))};var Ii=function(l,d,c){var m=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(l/c),this.yCellCount=Math.ceil(d/c);for(var O=0;O<this.xCellCount*this.yCellCount;O++)m.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0};function mr(l,d,c,m,E){var O=t.create();return d?(t.scale(O,O,[1/E,1/E,1]),c||t.rotateZ(O,O,m.angle)):t.multiply(O,m.labelPlaneMatrix,l),O}function $i(l,d,c,m,E){if(d){var O=t.clone(l);return t.scale(O,O,[E,E,1]),c||t.rotateZ(O,O,-m.angle),O}return m.glCoordMatrix}function li(l,d){var c=[l.x,l.y,0,1];Oi(c,c,d);var m=c[3];return{point:new t.Point(c[0]/m,c[1]/m),signedDistanceFromCamera:m}}function pi(l,d){return.5+l/d*.5}function ii(l,d){var c=l[0]/l[3],m=l[1]/l[3];return c>=-d[0]&&c<=d[0]&&m>=-d[1]&&m<=d[1]}function Tr(l,d,c,m,E,O,F,$){var se=m?l.textSizeData:l.iconSizeData,ge=t.evaluateSizeForZoom(se,c.transform.zoom),D=[256/c.width*2+1,256/c.height*2+1],M=m?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;M.clear();for(var x=l.lineVertexArray,A=m?l.text.placedSymbolArray:l.icon.placedSymbolArray,z=c.transform.width/c.transform.height,Q=!1,K=0;K<A.length;K++){var ye=A.get(K);if(ye.hidden||ye.writingMode===t.WritingMode.vertical&&!Q)vi(ye.numGlyphs,M);else{Q=!1;var Oe=[ye.anchorX,ye.anchorY,0,1];if(t.transformMat4(Oe,Oe,d),ii(Oe,D)){var et=pi(c.transform.cameraToCenterDistance,Oe[3]),ut=t.evaluateSizeForFeature(se,ge,ye),ct=F?ut/et:ut*et,vt=new t.Point(ye.anchorX,ye.anchorY),Ft=li(vt,E).point,rn={},Qt=zo(ye,ct,!1,$,d,E,O,l.glyphOffsetArray,x,M,Ft,vt,rn,z);Q=Qt.useVertical,(Qt.notEnoughRoom||Q||Qt.needsFlipping&&zo(ye,ct,!0,$,d,E,O,l.glyphOffsetArray,x,M,Ft,vt,rn,z).notEnoughRoom)&&vi(ye.numGlyphs,M)}else vi(ye.numGlyphs,M)}}m?l.text.dynamicLayoutVertexBuffer.updateData(M):l.icon.dynamicLayoutVertexBuffer.updateData(M)}function Ai(l,d,c,m,E,O,F,$,se,ge,D){var M=$.glyphStartIndex+$.numGlyphs,x=$.lineStartIndex,A=$.lineStartIndex+$.lineLength,z=d.getoffsetX($.glyphStartIndex),Q=d.getoffsetX(M-1),K=cn(l*z,c,m,E,O,F,$.segment,x,A,se,ge,D);if(!K)return null;var ye=cn(l*Q,c,m,E,O,F,$.segment,x,A,se,ge,D);return ye?{first:K,last:ye}:null}function Mr(l,d,c,m){return l===t.WritingMode.horizontal&&Math.abs(c.y-d.y)>Math.abs(c.x-d.x)*m?{useVertical:!0}:(l===t.WritingMode.vertical?d.y<c.y:d.x>c.x)?{needsFlipping:!0}:null}function zo(l,d,c,m,E,O,F,$,se,ge,D,M,x,A){var z,Q=d/24,K=l.lineOffsetX*Q,ye=l.lineOffsetY*Q;if(l.numGlyphs>1){var Oe=l.glyphStartIndex+l.numGlyphs,et=l.lineStartIndex,ut=l.lineStartIndex+l.lineLength,ct=Ai(Q,$,K,ye,c,D,M,l,se,O,x);if(!ct)return{notEnoughRoom:!0};var vt=li(ct.first.point,F).point,Ft=li(ct.last.point,F).point;if(m&&!c){var rn=Mr(l.writingMode,vt,Ft,A);if(rn)return rn}z=[ct.first];for(var Qt=l.glyphStartIndex+1;Qt<Oe-1;Qt++)z.push(cn(Q*$.getoffsetX(Qt),K,ye,c,D,M,l.segment,et,ut,se,O,x));z.push(ct.last)}else{if(m&&!c){var pn=li(M,E).point,zn=l.lineStartIndex+l.segment+1,Nn=new t.Point(se.getx(zn),se.gety(zn)),Vn=li(Nn,E),zi=Vn.signedDistanceFromCamera>0?Vn.point:Vo(M,Nn,pn,1,E),Mn=Mr(l.writingMode,pn,zi,A);if(Mn)return Mn}var si=cn(Q*$.getoffsetX(l.glyphStartIndex),K,ye,c,D,M,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,se,O,x);if(!si)return{notEnoughRoom:!0};z=[si]}for(var xi=0,ti=z;xi<ti.length;xi+=1){var Xn=ti[xi];t.addDynamicAttributes(ge,Xn.point,Xn.angle)}return{}}function Vo(l,d,c,m,E){var O=li(l.add(l.sub(d)._unit()),E).point,F=c.sub(O);return c.add(F._mult(m/F.mag()))}function cn(l,d,c,m,E,O,F,$,se,ge,D,M){var x=m?l-d:l+d,A=x>0?1:-1,z=0;m&&(A*=-1,z=Math.PI),A<0&&(z+=Math.PI);for(var Q=A>0?$+F:$+F+1,K=E,ye=E,Oe=0,et=0,ut=Math.abs(x),ct=[];Oe+et<=ut;){if((Q+=A)<$||Q>=se)return null;if(ye=K,ct.push(K),void 0===(K=M[Q])){var vt=new t.Point(ge.getx(Q),ge.gety(Q)),Ft=li(vt,D);if(Ft.signedDistanceFromCamera>0)K=M[Q]=Ft.point;else{var rn=Q-A;K=Vo(0===Oe?O:new t.Point(ge.getx(rn),ge.gety(rn)),vt,ye,ut-Oe+1,D)}}Oe+=et,et=ye.dist(K)}var Qt=(ut-Oe)/et,pn=K.sub(ye),zn=pn.mult(Qt)._add(ye);zn._add(pn._unit()._perp()._mult(c*A));var Nn=z+Math.atan2(K.y-ye.y,K.x-ye.x);return ct.push(zn),{point:zn,angle:Nn,path:ct}}Ii.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ii.prototype.insert=function(l,d,c,m,E){this._forEachCell(d,c,m,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(E)},Ii.prototype.insertCircle=function(l,d,c,m){this._forEachCell(d-m,c-m,d+m,c+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(c),this.circles.push(m)},Ii.prototype._insertBoxCell=function(l,d,c,m,E,O){this.boxCells[E].push(O)},Ii.prototype._insertCircleCell=function(l,d,c,m,E,O){this.circleCells[E].push(O)},Ii.prototype._query=function(l,d,c,m,E,O){if(c<0||l>this.width||m<0||d>this.height)return!E&&[];var F=[];if(l<=0&&d<=0&&this.width<=c&&this.height<=m){if(E)return!0;for(var $=0;$<this.boxKeys.length;$++)F.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(var se=0;se<this.circleKeys.length;se++){var ge=this.circles[3*se],D=this.circles[3*se+1],M=this.circles[3*se+2];F.push({key:this.circleKeys[se],x1:ge-M,y1:D-M,x2:ge+M,y2:D+M})}return O?F.filter(O):F}return this._forEachCell(l,d,c,m,this._queryCell,F,{hitTest:E,seenUids:{box:{},circle:{}}},O),E?F.length>0:F},Ii.prototype._queryCircle=function(l,d,c,m,E){var O=l-c,F=l+c,$=d-c,se=d+c;if(F<0||O>this.width||se<0||$>this.height)return!m&&[];var ge=[];return this._forEachCell(O,$,F,se,this._queryCellCircle,ge,{hitTest:m,circle:{x:l,y:d,radius:c},seenUids:{box:{},circle:{}}},E),m?ge.length>0:ge},Ii.prototype.query=function(l,d,c,m,E){return this._query(l,d,c,m,!1,E)},Ii.prototype.hitTest=function(l,d,c,m,E){return this._query(l,d,c,m,!0,E)},Ii.prototype.hitTestCircle=function(l,d,c,m){return this._queryCircle(l,d,c,!0,m)},Ii.prototype._queryCell=function(l,d,c,m,E,O,F,$){var se=F.seenUids,ge=this.boxCells[E];if(null!==ge)for(var D=this.bboxes,M=0,x=ge;M<x.length;M+=1){var A=x[M];if(!se.box[A]){se.box[A]=!0;var z=4*A;if(l<=D[z+2]&&d<=D[z+3]&&c>=D[z+0]&&m>=D[z+1]&&(!$||$(this.boxKeys[A]))){if(F.hitTest)return O.push(!0),!0;O.push({key:this.boxKeys[A],x1:D[z],y1:D[z+1],x2:D[z+2],y2:D[z+3]})}}}var Q=this.circleCells[E];if(null!==Q)for(var K=this.circles,ye=0,Oe=Q;ye<Oe.length;ye+=1){var et=Oe[ye];if(!se.circle[et]){se.circle[et]=!0;var ut=3*et;if(this._circleAndRectCollide(K[ut],K[ut+1],K[ut+2],l,d,c,m)&&(!$||$(this.circleKeys[et]))){if(F.hitTest)return O.push(!0),!0;var ct=K[ut],vt=K[ut+1],Ft=K[ut+2];O.push({key:this.circleKeys[et],x1:ct-Ft,y1:vt-Ft,x2:ct+Ft,y2:vt+Ft})}}}},Ii.prototype._queryCellCircle=function(l,d,c,m,E,O,F,$){var se=F.circle,ge=F.seenUids,D=this.boxCells[E];if(null!==D)for(var M=this.bboxes,x=0,A=D;x<A.length;x+=1){var z=A[x];if(!ge.box[z]){ge.box[z]=!0;var Q=4*z;if(this._circleAndRectCollide(se.x,se.y,se.radius,M[Q+0],M[Q+1],M[Q+2],M[Q+3])&&(!$||$(this.boxKeys[z])))return O.push(!0),!0}}var K=this.circleCells[E];if(null!==K)for(var ye=this.circles,Oe=0,et=K;Oe<et.length;Oe+=1){var ut=et[Oe];if(!ge.circle[ut]){ge.circle[ut]=!0;var ct=3*ut;if(this._circlesCollide(ye[ct],ye[ct+1],ye[ct+2],se.x,se.y,se.radius)&&(!$||$(this.circleKeys[ut])))return O.push(!0),!0}}},Ii.prototype._forEachCell=function(l,d,c,m,E,O,F,$){for(var se=this._convertToXCellCoord(l),ge=this._convertToYCellCoord(d),D=this._convertToXCellCoord(c),M=this._convertToYCellCoord(m),x=se;x<=D;x++)for(var A=ge;A<=M;A++)if(E.call(this,l,d,c,m,this.xCellCount*A+x,O,F,$))return},Ii.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Ii.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Ii.prototype._circlesCollide=function(l,d,c,m,E,O){var F=m-l,$=E-d,se=c+O;return se*se>F*F+$*$},Ii.prototype._circleAndRectCollide=function(l,d,c,m,E,O,F){var $=(O-m)/2,se=Math.abs(l-(m+$));if(se>$+c)return!1;var ge=(F-E)/2,D=Math.abs(d-(E+ge));if(D>ge+c)return!1;if(se<=$||D<=ge)return!0;var M=se-$,x=D-ge;return M*M+x*x<=c*c};var Yn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function vi(l,d){for(var c=0;c<l;c++){var m=d.length;d.resize(m+4),d.float32.set(Yn,3*m)}}function Oi(l,d,c){var m=d[0],E=d[1];return l[0]=c[0]*m+c[4]*E+c[12],l[1]=c[1]*m+c[5]*E+c[13],l[3]=c[3]*m+c[7]*E+c[15],l}var xr=function(l,d,c){void 0===d&&(d=new Ii(l.width+200,l.height+200,25)),void 0===c&&(c=new Ii(l.width+200,l.height+200,25)),this.transform=l,this.grid=d,this.ignoredGrid=c,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function gi(l,d,c){return d*(t.EXTENT/(l.tileSize*Math.pow(2,c-l.tileID.overscaledZ)))}xr.prototype.placeCollisionBox=function(l,d,c,m,E){var O=this.projectAndGetPerspectiveRatio(m,l.anchorPointX,l.anchorPointY),F=c*O.perspectiveRatio,$=l.x1*F+O.point.x,se=l.y1*F+O.point.y,ge=l.x2*F+O.point.x,D=l.y2*F+O.point.y;return!this.isInsideGrid($,se,ge,D)||!d&&this.grid.hitTest($,se,ge,D,E)?{box:[],offscreen:!1}:{box:[$,se,ge,D],offscreen:this.isOffscreen($,se,ge,D)}},xr.prototype.placeCollisionCircles=function(l,d,c,m,E,O,F,$,se,ge,D,M,x){var A=[],z=new t.Point(d.anchorX,d.anchorY),Q=li(z,O),K=pi(this.transform.cameraToCenterDistance,Q.signedDistanceFromCamera),ye=(ge?E/K:E*K)/t.ONE_EM,Oe=li(z,F).point,et=Ai(ye,m,d.lineOffsetX*ye,d.lineOffsetY*ye,!1,Oe,z,d,c,F,{}),ut=!1,ct=!1,vt=!0;if(et){for(var Ft=.5*M*K+x,rn=new t.Point(-100,-100),Qt=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),pn=new Wr,zn=et.first,Nn=et.last,Vn=[],zi=zn.path.length-1;zi>=1;zi--)Vn.push(zn.path[zi]);for(var Mn=1;Mn<Nn.path.length;Mn++)Vn.push(Nn.path[Mn]);var si=2.5*Ft;if($){var xi=Vn.map(function(Ga){return li(Ga,$)});Vn=xi.some(function(Ga){return Ga.signedDistanceFromCamera<=0})?[]:xi.map(function(Ga){return Ga.point})}var ti=[];if(Vn.length>0){for(var Xn=Vn[0].clone(),ai=Vn[0].clone(),Wn=1;Wn<Vn.length;Wn++)Xn.x=Math.min(Xn.x,Vn[Wn].x),Xn.y=Math.min(Xn.y,Vn[Wn].y),ai.x=Math.max(ai.x,Vn[Wn].x),ai.y=Math.max(ai.y,Vn[Wn].y);ti=Xn.x>=rn.x&&ai.x<=Qt.x&&Xn.y>=rn.y&&ai.y<=Qt.y?[Vn]:ai.x<rn.x||Xn.x>Qt.x||ai.y<rn.y||Xn.y>Qt.y?[]:t.clipLine([Vn],rn.x,rn.y,Qt.x,Qt.y)}for(var Jn=0,Co=ti;Jn<Co.length;Jn+=1){var io;pn.reset(Co[Jn],.25*Ft),io=pn.length<=.5*Ft?1:Math.ceil(pn.paddedLength/si)+1;for(var ms=0;ms<io;ms++){var Do=ms/Math.max(io-1,1),$r=pn.lerp(Do),po=$r.x+100,ha=$r.y+100;A.push(po,ha,Ft,0);var Us=po-Ft,Ea=ha-Ft,Go=po+Ft,Ta=ha+Ft;if(vt=vt&&this.isOffscreen(Us,Ea,Go,Ta),ct=ct||this.isInsideGrid(Us,Ea,Go,Ta),!l&&this.grid.hitTestCircle(po,ha,Ft,D)&&(ut=!0,!se))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!se&&ut||!ct?[]:A,offscreen:vt,collisionDetected:ut}},xr.prototype.queryRenderedSymbols=function(l){if(0===l.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var d=[],c=1/0,m=1/0,E=-1/0,O=-1/0,F=0,$=l;F<$.length;F+=1){var se=$[F],ge=new t.Point(se.x+100,se.y+100);c=Math.min(c,ge.x),m=Math.min(m,ge.y),E=Math.max(E,ge.x),O=Math.max(O,ge.y),d.push(ge)}for(var D={},M={},x=0,A=this.grid.query(c,m,E,O).concat(this.ignoredGrid.query(c,m,E,O));x<A.length;x+=1){var z=A[x],Q=z.key;if(void 0===D[Q.bucketInstanceId]&&(D[Q.bucketInstanceId]={}),!D[Q.bucketInstanceId][Q.featureIndex]){var K=[new t.Point(z.x1,z.y1),new t.Point(z.x2,z.y1),new t.Point(z.x2,z.y2),new t.Point(z.x1,z.y2)];t.polygonIntersectsPolygon(d,K)&&(D[Q.bucketInstanceId][Q.featureIndex]=!0,void 0===M[Q.bucketInstanceId]&&(M[Q.bucketInstanceId]=[]),M[Q.bucketInstanceId].push(Q.featureIndex))}}return M},xr.prototype.insertCollisionBox=function(l,d,c,m,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:m,collisionGroupID:E},l[0],l[1],l[2],l[3])},xr.prototype.insertCollisionCircles=function(l,d,c,m,E){for(var O=d?this.ignoredGrid:this.grid,F={bucketInstanceId:c,featureIndex:m,collisionGroupID:E},$=0;$<l.length;$+=4)O.insertCircle(F,l[$],l[$+1],l[$+2])},xr.prototype.projectAndGetPerspectiveRatio=function(l,d,c){var m=[d,c,0,1];return Oi(m,m,l),{point:new t.Point((m[0]/m[3]+1)/2*this.transform.width+100,(-m[1]/m[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}},xr.prototype.isOffscreen=function(l,d,c,m){return c<100||l>=this.screenRightBoundary||m<100||d>this.screenBottomBoundary},xr.prototype.isInsideGrid=function(l,d,c,m){return c>=0&&l<this.gridRightBoundary&&m>=0&&d<this.gridBottomBoundary},xr.prototype.getViewportMatrix=function(){var l=t.identity([]);return t.translate(l,l,[-100,-100,0]),l};var mo=function(l,d,c,m){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):m&&c?1:0,this.placed=c};mo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ui=function(l,d,c,m,E){this.text=new mo(l?l.text:null,d,c,E),this.icon=new mo(l?l.icon:null,d,m,E)};Ui.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ka=function(l,d,c){this.text=l,this.icon=d,this.skipFade=c},go=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},Ci=function(l,d,c,m,E){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=c,this.bucketIndex=m,this.tileID=E},ws=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function Kr(l,d,c,m,E){var O=t.getAnchorAlignment(l),F=-(O.horizontalAlign-.5)*d,$=-(O.verticalAlign-.5)*c,se=t.evaluateVariableOffset(l,m);return new t.Point(F+se[0]*E,$+se[1]*E)}function ls(l,d,c,m,E,O){var F=l.x1,$=l.x2,se=l.y1,ge=l.y2,D=l.anchorPointX,M=l.anchorPointY,x=new t.Point(d,c);return m&&x._rotate(E?O:-O),{x1:F+x.x,y1:se+x.y,x2:$+x.x,y2:ge+x.y,anchorPointX:D,anchorPointY:M}}ws.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:function(c){return c.collisionGroupID===d}}}return this.collisionGroups[l]};var kr=function(l,d,c,m){this.transform=l.clone(),this.collisionIndex=new xr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ws(c),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}};function Rr(l,d,c,m,E){l.emplaceBack(d?1:0,c?1:0,m||0,E||0),l.emplaceBack(d?1:0,c?1:0,m||0,E||0),l.emplaceBack(d?1:0,c?1:0,m||0,E||0),l.emplaceBack(d?1:0,c?1:0,m||0,E||0)}kr.prototype.getBucketParts=function(l,d,c,m){var E=c.getBucket(d),O=c.latestFeatureIndex;if(E&&O&&d.id===E.layerIds[0]){var F=c.collisionBoxArray,$=E.layers[0].layout,se=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),ge=c.tileSize/t.EXTENT,D=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),M="map"===$.get("text-pitch-alignment"),x="map"===$.get("text-rotation-alignment"),A=gi(c,1,this.transform.zoom),z=mr(D,M,x,this.transform,A),Q=null;if(M){var K=$i(D,M,x,this.transform,A);Q=t.multiply([],this.transform.labelPlaneMatrix,K)}this.retainedQueryData[E.bucketInstanceId]=new Ci(E.bucketInstanceId,O,E.sourceLayerIndex,E.index,c.tileID);var ye={bucket:E,layout:$,posMatrix:D,textLabelPlaneMatrix:z,labelToScreenMatrix:Q,scale:se,textPixelRatio:ge,holdingForFade:c.holdingForFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(m)for(var Oe=0,et=E.sortKeyRanges;Oe<et.length;Oe+=1){var ut=et[Oe];l.push({sortKey:ut.sortKey,symbolInstanceStart:ut.symbolInstanceStart,symbolInstanceEnd:ut.symbolInstanceEnd,parameters:ye})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:ye})}},kr.prototype.attemptAnchorPlacement=function(l,d,c,m,E,O,F,$,se,ge,D,M,x,A,z){var Q,K=[M.textOffset0,M.textOffset1],ye=Kr(l,c,m,K,E),Oe=this.collisionIndex.placeCollisionBox(ls(d,ye.x,ye.y,O,F,this.transform.angle),D,$,se,ge.predicate);if(!z||0!==this.collisionIndex.placeCollisionBox(ls(z,ye.x,ye.y,O,F,this.transform.angle),D,$,se,ge.predicate).box.length)return Oe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[M.crossTileID]&&this.prevPlacement.placements[M.crossTileID]&&this.prevPlacement.placements[M.crossTileID].text&&(Q=this.prevPlacement.variableOffsets[M.crossTileID].anchor),this.variableOffsets[M.crossTileID]={textOffset:K,width:c,height:m,anchor:l,textBoxScale:E,prevAnchor:Q},this.markUsedJustification(x,l,M,A),x.allowVerticalPlacement&&(this.markUsedOrientation(x,A,M),this.placedOrientations[M.crossTileID]=A),{shift:ye,placedGlyphBoxes:Oe}):void 0},kr.prototype.placeLayerBucketPart=function(l,d,c){var m=this,E=l.parameters,O=E.bucket,F=E.layout,$=E.posMatrix,se=E.textLabelPlaneMatrix,ge=E.labelToScreenMatrix,D=E.textPixelRatio,M=E.holdingForFade,x=E.collisionBoxArray,A=E.partiallyEvaluatedTextSize,z=E.collisionGroup,Q=F.get("text-optional"),K=F.get("icon-optional"),ye=F.get("text-allow-overlap"),Oe=F.get("icon-allow-overlap"),et="map"===F.get("text-rotation-alignment"),ut="map"===F.get("text-pitch-alignment"),ct="none"!==F.get("icon-text-fit"),vt="viewport-y"===F.get("symbol-z-order"),Ft=ye&&(Oe||!O.hasIconData()||K),rn=Oe&&(ye||!O.hasTextData()||Q);!O.collisionArrays&&x&&O.deserializeCollisionBoxes(x);var Qt=function(Mn,si){if(!d[Mn.crossTileID])if(M)m.placements[Mn.crossTileID]=new ka(!1,!1,!1);else{var xi,ti=!1,Xn=!1,ai=!0,Wn=null,Jn={box:null,offscreen:null},Co={box:null,offscreen:null},io=null,ms=null,Do=0,$r=0,po=0;si.textFeatureIndex?Do=si.textFeatureIndex:Mn.useRuntimeCollisionCircles&&(Do=Mn.featureIndex),si.verticalTextFeatureIndex&&($r=si.verticalTextFeatureIndex);var ha=si.textBox;if(ha){var Us=function(hr){var $a=t.WritingMode.horizontal;if(O.allowVerticalPlacement&&!hr&&m.prevPlacement){var Qs=m.prevPlacement.placedOrientations[Mn.crossTileID];Qs&&(m.placedOrientations[Mn.crossTileID]=Qs,m.markUsedOrientation(O,$a=Qs,Mn))}return $a},Ea=function(hr,$a){if(O.allowVerticalPlacement&&Mn.numVerticalGlyphVertices>0&&si.verticalTextBox)for(var Qs=0,Ma=O.writingModes;Qs<Ma.length&&(Ma[Qs]===t.WritingMode.vertical?(Jn=$a(),Co=Jn):Jn=hr(),!(Jn&&Jn.box&&Jn.box.length));Qs+=1);else Jn=hr()};if(F.get("text-variable-anchor")){var Go=F.get("text-variable-anchor");if(m.prevPlacement&&m.prevPlacement.variableOffsets[Mn.crossTileID]){var Ta=m.prevPlacement.variableOffsets[Mn.crossTileID];Go.indexOf(Ta.anchor)>0&&(Go=Go.filter(function(hr){return hr!==Ta.anchor})).unshift(Ta.anchor)}var Ga=function(hr,$a,Qs){for(var Ma=hr.x2-hr.x1,Ld=hr.y2-hr.y1,Bd=Mn.textBoxScale,sd=ct&&!Oe?$a:null,Fu={box:[],offscreen:!1},Bh=ye?2*Go.length:Go.length,Lu=0;Lu<Bh;++Lu){var zd=m.attemptAnchorPlacement(Go[Lu%Go.length],hr,Ma,Ld,Bd,et,ut,D,$,z,Lu>=Go.length,Mn,O,Qs,sd);if(zd&&(Fu=zd.placedGlyphBoxes)&&Fu.box&&Fu.box.length){ti=!0,Wn=zd.shift;break}}return Fu};Ea(function(){return Ga(ha,si.iconBox,t.WritingMode.horizontal)},function(){var hr=si.verticalTextBox;return O.allowVerticalPlacement&&!(Jn&&Jn.box&&Jn.box.length)&&Mn.numVerticalGlyphVertices>0&&hr?Ga(hr,si.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Jn&&(ti=Jn.box,ai=Jn.offscreen);var yc=Us(Jn&&Jn.box);if(!ti&&m.prevPlacement){var vc=m.prevPlacement.variableOffsets[Mn.crossTileID];vc&&(m.variableOffsets[Mn.crossTileID]=vc,m.markUsedJustification(O,vc.anchor,Mn,yc))}}else{var bc=function(hr,$a){var Qs=m.collisionIndex.placeCollisionBox(hr,ye,D,$,z.predicate);return Qs&&Qs.box&&Qs.box.length&&(m.markUsedOrientation(O,$a,Mn),m.placedOrientations[Mn.crossTileID]=$a),Qs};Ea(function(){return bc(ha,t.WritingMode.horizontal)},function(){var hr=si.verticalTextBox;return O.allowVerticalPlacement&&Mn.numVerticalGlyphVertices>0&&hr?bc(hr,t.WritingMode.vertical):{box:null,offscreen:null}}),Us(Jn&&Jn.box&&Jn.box.length)}}if(ti=(xi=Jn)&&xi.box&&xi.box.length>0,ai=xi&&xi.offscreen,Mn.useRuntimeCollisionCircles){var nc=O.text.placedSymbolArray.get(Mn.centerJustifiedTextSymbolIndex),au=t.evaluateSizeForFeature(O.textSizeData,A,nc),Sl=F.get("text-padding");io=m.collisionIndex.placeCollisionCircles(ye,nc,O.lineVertexArray,O.glyphOffsetArray,au,$,se,ge,c,ut,z.predicate,Mn.collisionCircleDiameter,Sl),ti=ye||io.circles.length>0&&!io.collisionDetected,ai=ai&&io.offscreen}if(si.iconFeatureIndex&&(po=si.iconFeatureIndex),si.iconBox){var Fc=function(hr){var $a=ct&&Wn?ls(hr,Wn.x,Wn.y,et,ut,m.transform.angle):hr;return m.collisionIndex.placeCollisionBox($a,Oe,D,$,z.predicate)};Xn=Co&&Co.box&&Co.box.length&&si.verticalIconBox?(ms=Fc(si.verticalIconBox)).box.length>0:(ms=Fc(si.iconBox)).box.length>0,ai=ai&&ms.offscreen}var $l=Q||0===Mn.numHorizontalGlyphVertices&&0===Mn.numVerticalGlyphVertices,gs=K||0===Mn.numIconVertices;if($l||gs?gs?$l||(Xn=Xn&&ti):ti=Xn&&ti:Xn=ti=Xn&&ti,ti&&xi&&xi.box&&m.collisionIndex.insertCollisionBox(xi.box,F.get("text-ignore-placement"),O.bucketInstanceId,Co&&Co.box&&$r?$r:Do,z.ID),Xn&&ms&&m.collisionIndex.insertCollisionBox(ms.box,F.get("icon-ignore-placement"),O.bucketInstanceId,po,z.ID),io&&(ti&&m.collisionIndex.insertCollisionCircles(io.circles,F.get("text-ignore-placement"),O.bucketInstanceId,Do,z.ID),c)){var ic=O.bucketInstanceId,Lc=m.collisionCircleArrays[ic];void 0===Lc&&(Lc=m.collisionCircleArrays[ic]=new go);for(var xc=0;xc<io.circles.length;xc+=4)Lc.circles.push(io.circles[xc+0]),Lc.circles.push(io.circles[xc+1]),Lc.circles.push(io.circles[xc+2]),Lc.circles.push(io.collisionDetected?1:0)}m.placements[Mn.crossTileID]=new ka(ti||Ft,Xn||rn,ai||O.justReloaded),d[Mn.crossTileID]=!0}};if(vt)for(var pn=O.getSortedSymbolIndexes(this.transform.angle),zn=pn.length-1;zn>=0;--zn){var Nn=pn[zn];Qt(O.symbolInstances.get(Nn),O.collisionArrays[Nn])}else for(var Vn=l.symbolInstanceStart;Vn<l.symbolInstanceEnd;Vn++)Qt(O.symbolInstances.get(Vn),O.collisionArrays[Vn]);if(c&&O.bucketInstanceId in this.collisionCircleArrays){var zi=this.collisionCircleArrays[O.bucketInstanceId];t.invert(zi.invProjMatrix,$),zi.viewportMatrix=this.collisionIndex.getViewportMatrix()}O.justReloaded=!1},kr.prototype.markUsedJustification=function(l,d,c,m){var E;E=m===t.WritingMode.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(d)];for(var O=0,F=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];O<F.length;O+=1){var $=F[O];$>=0&&(l.text.placedSymbolArray.get($).crossTileID=E>=0&&$!==E?0:c.crossTileID)}},kr.prototype.markUsedOrientation=function(l,d,c){for(var m=d===t.WritingMode.horizontal||d===t.WritingMode.horizontalOnly?d:0,E=d===t.WritingMode.vertical?d:0,O=0,F=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];O<F.length;O+=1)l.text.placedSymbolArray.get(F[O]).placedOrientation=m;c.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=E)},kr.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var d=this.prevPlacement,c=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;var m=d?d.symbolFadeChange(l):1,E=d?d.opacities:{},O=d?d.variableOffsets:{},F=d?d.placedOrientations:{};for(var $ in this.placements){var se=this.placements[$],ge=E[$];ge?(this.opacities[$]=new Ui(ge,m,se.text,se.icon),c=c||se.text!==ge.text.placed||se.icon!==ge.icon.placed):(this.opacities[$]=new Ui(null,m,se.text,se.icon,se.skipFade),c=c||se.text||se.icon)}for(var D in E){var M=E[D];if(!this.opacities[D]){var x=new Ui(M,m,!1,!1);x.isHidden()||(this.opacities[D]=x,c=c||M.text.placed||M.icon.placed)}}for(var A in O)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=O[A]);for(var z in F)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=F[z]);c?this.lastPlacementChangeTime=l:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)},kr.prototype.updateLayerOpacities=function(l,d){for(var c={},m=0,E=d;m<E.length;m+=1){var O=E[m],F=O.getBucket(l);F&&O.latestFeatureIndex&&l.id===F.layerIds[0]&&this.updateBucketOpacities(F,c,O.collisionBoxArray)}},kr.prototype.updateBucketOpacities=function(l,d,c){var m=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var E=l.layers[0].layout,O=new Ui(null,0,!1,!1,!0),F=E.get("text-allow-overlap"),$=E.get("icon-allow-overlap"),se=E.get("text-variable-anchor"),ge="map"===E.get("text-rotation-alignment"),D="map"===E.get("text-pitch-alignment"),M="none"!==E.get("icon-text-fit"),x=new Ui(null,0,F&&($||!l.hasIconData()||E.get("icon-optional")),$&&(F||!l.hasTextData()||E.get("text-optional")),!0);!l.collisionArrays&&c&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(c);for(var A=function(ye,Oe,et){for(var ut=0;ut<Oe/4;ut++)ye.opacityVertexArray.emplaceBack(et)},z=function(ye){var Oe=l.symbolInstances.get(ye),et=Oe.numHorizontalGlyphVertices,ut=Oe.numVerticalGlyphVertices,ct=Oe.crossTileID,vt=m.opacities[ct];d[ct]?vt=O:vt||(m.opacities[ct]=vt=x),d[ct]=!0;var Ft=Oe.numIconVertices>0,rn=m.placedOrientations[Oe.crossTileID],Qt=rn===t.WritingMode.vertical,pn=rn===t.WritingMode.horizontal||rn===t.WritingMode.horizontalOnly;if(et>0||ut>0){var zn=vl(vt.text);A(l.text,et,Qt?Xo:zn),A(l.text,ut,pn?Xo:zn);var Nn=vt.text.isHidden();[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(function(Jn){Jn>=0&&(l.text.placedSymbolArray.get(Jn).hidden=Nn||Qt?1:0)}),Oe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Oe.verticalPlacedTextSymbolIndex).hidden=Nn||pn?1:0);var Vn=m.variableOffsets[Oe.crossTileID];Vn&&m.markUsedJustification(l,Vn.anchor,Oe,rn);var zi=m.placedOrientations[Oe.crossTileID];zi&&(m.markUsedJustification(l,"left",Oe,zi),m.markUsedOrientation(l,zi,Oe))}if(Ft){var Mn=vl(vt.icon),si=!(M&&Oe.verticalPlacedIconSymbolIndex&&Qt);Oe.placedIconSymbolIndex>=0&&(A(l.icon,Oe.numIconVertices,si?Mn:Xo),l.icon.placedSymbolArray.get(Oe.placedIconSymbolIndex).hidden=vt.icon.isHidden()),Oe.verticalPlacedIconSymbolIndex>=0&&(A(l.icon,Oe.numVerticalIconVertices,si?Xo:Mn),l.icon.placedSymbolArray.get(Oe.verticalPlacedIconSymbolIndex).hidden=vt.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var xi=l.collisionArrays[ye];if(xi){var ti=new t.Point(0,0);if(xi.textBox||xi.verticalTextBox){var Xn=!0;if(se){var ai=m.variableOffsets[ct];ai?(ti=Kr(ai.anchor,ai.width,ai.height,ai.textOffset,ai.textBoxScale),ge&&ti._rotate(D?m.transform.angle:-m.transform.angle)):Xn=!1}xi.textBox&&Rr(l.textCollisionBox.collisionVertexArray,vt.text.placed,!Xn||Qt,ti.x,ti.y),xi.verticalTextBox&&Rr(l.textCollisionBox.collisionVertexArray,vt.text.placed,!Xn||pn,ti.x,ti.y)}var Wn=Boolean(!pn&&xi.verticalIconBox);xi.iconBox&&Rr(l.iconCollisionBox.collisionVertexArray,vt.icon.placed,Wn,M?ti.x:0,M?ti.y:0),xi.verticalIconBox&&Rr(l.iconCollisionBox.collisionVertexArray,vt.icon.placed,!Wn,M?ti.x:0,M?ti.y:0)}}},Q=0;Q<l.symbolInstances.length;Q++)z(Q);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var K=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=K.invProjMatrix,l.placementViewportMatrix=K.viewportMatrix,l.collisionCircleArray=K.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},kr.prototype.symbolFadeChange=function(l){return 0===this.fadeDuration?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},kr.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},kr.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},kr.prototype.stillRecent=function(l,d){var c=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*c>l},kr.prototype.setStale=function(){this.stale=!0};var ra=Math.pow(2,25),Ra=Math.pow(2,24),zr=Math.pow(2,17),ga=Math.pow(2,16),Ql=Math.pow(2,9),ar=Math.pow(2,8),So=Math.pow(2,1);function vl(l){if(0===l.opacity&&!l.placed)return 0;if(1===l.opacity&&l.placed)return 4294967295;var d=l.placed?1:0,c=Math.floor(127*l.opacity);return c*ra+d*Ra+c*zr+d*ga+c*Ql+d*ar+c*So+d}var Xo=0,cs=function(l){this._sortAcrossTiles="viewport-y"!==l.layout.get("symbol-z-order")&&void 0!==l.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};cs.prototype.continuePlacement=function(l,d,c,m,E){for(var O=this._bucketParts;this._currentTileIndex<l.length;)if(d.getBucketParts(O,m,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort(function(F,$){return F.sortKey-$.sortKey}));this._currentPartIndex<O.length;)if(d.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,E())return!0;return!1};var Cs=function(l,d,c,m,E,O,F){this.placement=new kr(l,E,O,F),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=c,this._showCollisionBoxes=m,this._done=!1};Cs.prototype.isDone=function(){return this._done},Cs.prototype.continuePlacement=function(l,d,c){for(var m=this,E=t.browser.now(),O=function(){var se=t.browser.now()-E;return!m._forceFullPlacement&&se>2};this._currentPlacementIndex>=0;){var F=d[l[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if("symbol"===F.type&&(!F.minzoom||F.minzoom<=$)&&(!F.maxzoom||F.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new cs(F)),this._inProgressLayer.continuePlacement(c[F.source],this.placement,this._showCollisionBoxes,F,O))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Cs.prototype.commit=function(l){return this.placement.commit(l),this.placement};var Io=512/t.EXTENT/2,Nr=function(l,d,c){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=c;for(var m=0;m<d.length;m++){var E=d.get(m),O=E.key;this.indexedSymbolInstances[O]||(this.indexedSymbolInstances[O]=[]),this.indexedSymbolInstances[O].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,l)})}};Nr.prototype.getScaledCoordinates=function(l,d){var c=Io/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*t.EXTENT+l.anchorX)*c),y:Math.floor((d.canonical.y*t.EXTENT+l.anchorY)*c)}},Nr.prototype.findMatches=function(l,d,c){for(var m=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),E=0;E<l.length;E++){var O=l.get(E);if(!O.crossTileID){var F=this.indexedSymbolInstances[O.key];if(F)for(var $=this.getScaledCoordinates(O,d),se=0,ge=F;se<ge.length;se+=1){var D=ge[se];if(Math.abs(D.coord.x-$.x)<=m&&Math.abs(D.coord.y-$.y)<=m&&!c[D.crossTileID]){c[D.crossTileID]=!0,O.crossTileID=D.crossTileID;break}}}}};var _o=function(){this.maxCrossTileID=0};_o.prototype.generate=function(){return++this.maxCrossTileID};var Fr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Fr.prototype.handleWrapJump=function(l){var d=Math.round((l-this.lng)/360);if(0!==d)for(var c in this.indexes){var m=this.indexes[c],E={};for(var O in m){var F=m[O];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+d),E[F.tileID.key]=F}this.indexes[c]=E}this.lng=l},Fr.prototype.addBucket=function(l,d,c){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var m=0;m<d.symbolInstances.length;m++)d.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var E=this.usedCrossTileIDs[l.overscaledZ];for(var O in this.indexes){var F=this.indexes[O];if(Number(O)>l.overscaledZ)for(var $ in F){var se=F[$];se.tileID.isChildOf(l)&&se.findMatches(d.symbolInstances,l,E)}else{var ge=F[l.scaledTo(Number(O)).key];ge&&ge.findMatches(d.symbolInstances,l,E)}}for(var D=0;D<d.symbolInstances.length;D++){var M=d.symbolInstances.get(D);M.crossTileID||(M.crossTileID=c.generate(),E[M.crossTileID]=!0)}return void 0===this.indexes[l.overscaledZ]&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Nr(l,d.symbolInstances,d.bucketInstanceId),!0},Fr.prototype.removeBucketCrossTileIDs=function(l,d){for(var c in d.indexedSymbolInstances)for(var m=0,E=d.indexedSymbolInstances[c];m<E.length;m+=1)delete this.usedCrossTileIDs[l][E[m].crossTileID]},Fr.prototype.removeStaleBuckets=function(l){var d=!1;for(var c in this.indexes){var m=this.indexes[c];for(var E in m)l[m[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,m[E]),delete m[E],d=!0)}return d};var gr=function(){this.layerIndexes={},this.crossTileIDs=new _o,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};gr.prototype.addLayer=function(l,d,c){var m=this.layerIndexes[l.id];void 0===m&&(m=this.layerIndexes[l.id]=new Fr);var E=!1,O={};m.handleWrapJump(c);for(var F=0,$=d;F<$.length;F+=1){var se=$[F],ge=se.getBucket(l);ge&&l.id===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(se.tileID,ge,this.crossTileIDs)&&(E=!0),O[ge.bucketInstanceId]=!0)}return m.removeStaleBuckets(O)&&(E=!0),E},gr.prototype.pruneUnusedLayers=function(l){var d={};for(var c in l.forEach(function(m){d[m]=!0}),this.layerIndexes)d[c]||delete this.layerIndexes[c]};var Ao=function(l,d){return t.emitValidationErrors(l,d&&d.filter(function(c){return"source.canvas"!==c.identifier}))},yo=t.pick(en,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ds=t.pick(en,["setCenter","setZoom","setBearing","setPitch"]),uo=function(){var l={},d=t.styleSpec.$version;for(var c in t.styleSpec.$root){var m,E=t.styleSpec.$root[c];E.required&&null!=(m="version"===c?d:"array"===E.type?[]:{})&&(l[c]=m)}return l}(),Oo=function(l){function d(c,m){var E=this;void 0===m&&(m={}),l.call(this),this.map=c,this.dispatcher=new Kt(He(),this),this.imageManager=new De,this.imageManager.setEventedParent(this),this.glyphManager=new Ne(c._requestManager,m.localIdeographFontFamily),this.lineAtlas=new St(256,512),this.crossTileSymbolIndex=new gr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var O=this;this._rtlTextPluginCallback=d.registerForPluginStateChange(function(F){O.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:F.pluginStatus,pluginURL:F.pluginURL},function($,se){if(t.triggerPluginCompletionEvent($),se&&se.every(function(D){return D}))for(var ge in O.sourceCaches)O.sourceCaches[ge].reload()})}),this.on("data",function(F){if("source"===F.dataType&&"metadata"===F.sourceDataType){var $=E.sourceCaches[F.sourceId];if($){var se=$.getSource();if(se&&se.vectorLayerIds)for(var ge in E._layers){var D=E._layers[ge];D.source===se.id&&E._validateLayer(D)}}}})}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.loadURL=function(c,m){var E=this;void 0===m&&(m={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var O="boolean"==typeof m.validate?m.validate:!t.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,m.accessToken);var F=this.map._requestManager.transformRequest(c,t.ResourceType.Style);this._request=t.getJSON(F,function($,se){E._request=null,$?E.fire(new t.ErrorEvent($)):se&&E._load(se,O)})},d.prototype.loadJSON=function(c,m){var E=this;void 0===m&&(m={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){E._request=null,E._load(c,!1!==m.validate)})},d.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(uo,!1)},d.prototype._load=function(c,m){if(!m||!Ao(this,t.validateStyle(c))){for(var E in this._loaded=!0,this.stylesheet=c,c.sources)this.addSource(E,c.sources[E],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);var O=jt(this.stylesheet.layers);this._order=O.map(function(ge){return ge.id}),this._layers={},this._serializedLayers={};for(var F=0,$=O;F<$.length;F+=1){var se=$[F];(se=t.createStyleLayer(se)).setEventedParent(this,{layer:{id:se.id}}),this._layers[se.id]=se,this._serializedLayers[se.id]=se.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Mt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},d.prototype._loadSprite=function(c){var m=this;this._spriteRequest=function(E,O,F){var $,se,ge,D=t.browser.devicePixelRatio>1?"@2x":"",M=t.getJSON(O.transformRequest(O.normalizeSpriteURL(E,D,".json"),t.ResourceType.SpriteJSON),function(z,Q){M=null,ge||(ge=z,$=Q,A())}),x=t.getImage(O.transformRequest(O.normalizeSpriteURL(E,D,".png"),t.ResourceType.SpriteImage),function(z,Q){x=null,ge||(ge=z,se=Q,A())});function A(){if(ge)F(ge);else if($&&se){var z=t.browser.getImageData(se),Q={};for(var K in $){var ye=$[K],Oe=ye.width,et=ye.height,ut=ye.x,ct=ye.y,vt=ye.sdf,Ft=ye.pixelRatio,rn=ye.stretchX,Qt=ye.stretchY,pn=ye.content,zn=new t.RGBAImage({width:Oe,height:et});t.RGBAImage.copy(z,zn,{x:ut,y:ct},{x:0,y:0},{width:Oe,height:et}),Q[K]={data:zn,pixelRatio:Ft,sdf:vt,stretchX:rn,stretchY:Qt,content:pn}}F(null,Q)}}return{cancel:function(){M&&(M.cancel(),M=null),x&&(x.cancel(),x=null)}}}(c,this.map._requestManager,function(E,O){if(m._spriteRequest=null,E)m.fire(new t.ErrorEvent(E));else if(O)for(var F in O)m.imageManager.addImage(F,O[F]);m.imageManager.setLoaded(!0),m._availableImages=m.imageManager.listImages(),m.dispatcher.broadcast("setImages",m._availableImages),m.fire(new t.Event("data",{dataType:"style"}))})},d.prototype._validateLayer=function(c){var m=this.sourceCaches[c.source];if(m){var E=c.sourceLayer;if(E){var O=m.getSource();("geojson"===O.type||O.vectorLayerIds&&-1===O.vectorLayerIds.indexOf(E))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+E+'" does not exist on source "'+O.id+'" as specified by style layer "'+c.id+'"')))}}},d.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()},d.prototype._serializeLayers=function(c){for(var m=[],E=0,O=c;E<O.length;E+=1){var F=this._layers[O[E]];"custom"!==F.type&&m.push(F.serialize())}return m},d.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(var m in this._layers)if(this._layers[m].hasTransition())return!0;return!1},d.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},d.prototype.update=function(c){if(this._loaded){var m=this._changed;if(this._changed){var E=Object.keys(this._updatedLayers),O=Object.keys(this._removedLayers);for(var F in(E.length||O.length)&&this._updateWorkerLayers(E,O),this._updatedSources){var $=this._updatedSources[F];"reload"===$?this._reloadSource(F):"clear"===$&&this._clearSource(F)}for(var se in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[se].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var ge={};for(var D in this.sourceCaches){var M=this.sourceCaches[D];ge[D]=M.used,M.used=!1}for(var x=0,A=this._order;x<A.length;x+=1){var z=this._layers[A[x]];z.recalculate(c,this._availableImages),!z.isHidden(c.zoom)&&z.source&&(this.sourceCaches[z.source].used=!0)}for(var Q in ge){var K=this.sourceCaches[Q];ge[Q]!==K.used&&K.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Q}))}this.light.recalculate(c),this.z=c.zoom,m&&this.fire(new t.Event("data",{dataType:"style"}))}},d.prototype._updateTilesForChangedImages=function(){var c=Object.keys(this._changedImages);if(c.length){for(var m in this.sourceCaches)this.sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}},d.prototype._updateWorkerLayers=function(c,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:m})},d.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},d.prototype.setState=function(c){var m=this;if(this._checkLoaded(),Ao(this,t.validateStyle(c)))return!1;(c=t.clone$1(c)).layers=jt(c.layers);var E=function(F,$){if(!F)return[{command:en.setStyle,args:[$]}];var se=[];try{if(!t.deepEqual(F.version,$.version))return[{command:en.setStyle,args:[$]}];t.deepEqual(F.center,$.center)||se.push({command:en.setCenter,args:[$.center]}),t.deepEqual(F.zoom,$.zoom)||se.push({command:en.setZoom,args:[$.zoom]}),t.deepEqual(F.bearing,$.bearing)||se.push({command:en.setBearing,args:[$.bearing]}),t.deepEqual(F.pitch,$.pitch)||se.push({command:en.setPitch,args:[$.pitch]}),t.deepEqual(F.sprite,$.sprite)||se.push({command:en.setSprite,args:[$.sprite]}),t.deepEqual(F.glyphs,$.glyphs)||se.push({command:en.setGlyphs,args:[$.glyphs]}),t.deepEqual(F.transition,$.transition)||se.push({command:en.setTransition,args:[$.transition]}),t.deepEqual(F.light,$.light)||se.push({command:en.setLight,args:[$.light]});var ge={},D=[];!function(x,A,z,Q){var K;for(K in A=A||{},x=x||{})x.hasOwnProperty(K)&&(A.hasOwnProperty(K)||sn(K,z,Q));for(K in A)A.hasOwnProperty(K)&&(x.hasOwnProperty(K)?t.deepEqual(x[K],A[K])||("geojson"===x[K].type&&"geojson"===A[K].type&&Si(x,A,K)?z.push({command:en.setGeoJSONSourceData,args:[K,A[K].data]}):ei(K,A,z,Q)):An(K,A,z))}(F.sources,$.sources,D,ge);var M=[];F.layers&&F.layers.forEach(function(x){ge[x.source]?se.push({command:en.removeLayer,args:[x.id]}):M.push(x)}),se=se.concat(D),function(x,A,z){A=A||[];var Q,K,ye,Oe,et,ut,ct,vt=(x=x||[]).map(Ti),Ft=A.map(Ti),rn=x.reduce(mi,{}),Qt=A.reduce(mi,{}),pn=vt.slice(),zn=Object.create(null);for(Q=0,K=0;Q<vt.length;Q++)Qt.hasOwnProperty(ye=vt[Q])?K++:(z.push({command:en.removeLayer,args:[ye]}),pn.splice(pn.indexOf(ye,K),1));for(Q=0,K=0;Q<Ft.length;Q++)pn[pn.length-1-Q]!==(ye=Ft[Ft.length-1-Q])&&(rn.hasOwnProperty(ye)?(z.push({command:en.removeLayer,args:[ye]}),pn.splice(pn.lastIndexOf(ye,pn.length-K),1)):K++,z.push({command:en.addLayer,args:[Qt[ye],ut=pn[pn.length-Q]]}),pn.splice(pn.length-Q,0,ye),zn[ye]=!0);for(Q=0;Q<Ft.length;Q++)if(Oe=rn[ye=Ft[Q]],et=Qt[ye],!zn[ye]&&!t.deepEqual(Oe,et))if(t.deepEqual(Oe.source,et.source)&&t.deepEqual(Oe["source-layer"],et["source-layer"])&&t.deepEqual(Oe.type,et.type)){for(ct in oi(Oe.layout,et.layout,z,ye,null,en.setLayoutProperty),oi(Oe.paint,et.paint,z,ye,null,en.setPaintProperty),t.deepEqual(Oe.filter,et.filter)||z.push({command:en.setFilter,args:[ye,et.filter]}),t.deepEqual(Oe.minzoom,et.minzoom)&&t.deepEqual(Oe.maxzoom,et.maxzoom)||z.push({command:en.setLayerZoomRange,args:[ye,et.minzoom,et.maxzoom]}),Oe)Oe.hasOwnProperty(ct)&&"layout"!==ct&&"paint"!==ct&&"filter"!==ct&&"metadata"!==ct&&"minzoom"!==ct&&"maxzoom"!==ct&&(0===ct.indexOf("paint.")?oi(Oe[ct],et[ct],z,ye,ct.slice(6),en.setPaintProperty):t.deepEqual(Oe[ct],et[ct])||z.push({command:en.setLayerProperty,args:[ye,ct,et[ct]]}));for(ct in et)et.hasOwnProperty(ct)&&!Oe.hasOwnProperty(ct)&&"layout"!==ct&&"paint"!==ct&&"filter"!==ct&&"metadata"!==ct&&"minzoom"!==ct&&"maxzoom"!==ct&&(0===ct.indexOf("paint.")?oi(Oe[ct],et[ct],z,ye,ct.slice(6),en.setPaintProperty):t.deepEqual(Oe[ct],et[ct])||z.push({command:en.setLayerProperty,args:[ye,ct,et[ct]]}))}else z.push({command:en.removeLayer,args:[ye]}),ut=pn[pn.lastIndexOf(ye)+1],z.push({command:en.addLayer,args:[et,ut]})}(M,$.layers,se)}catch(x){console.warn("Unable to compute style diff:",x),se=[{command:en.setStyle,args:[$]}]}return se}(this.serialize(),c).filter(function(F){return!(F.command in Ds)});if(0===E.length)return!1;var O=E.filter(function(F){return!(F.command in yo)});if(O.length>0)throw new Error("Unimplemented: "+O.map(function(F){return F.command}).join(", ")+".");return E.forEach(function(F){"setTransition"!==F.command&&m[F.command].apply(m,F.args)}),this.stylesheet=c,!0},d.prototype.addImage=function(c,m){if(this.getImage(c))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(c,m),this._afterImageUpdated(c)},d.prototype.updateImage=function(c,m){this.imageManager.updateImage(c,m)},d.prototype.getImage=function(c){return this.imageManager.getImage(c)},d.prototype.removeImage=function(c){if(!this.getImage(c))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(c),this._afterImageUpdated(c)},d.prototype._afterImageUpdated=function(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},d.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},d.prototype.addSource=function(c,m,E){var O=this;if(void 0===E&&(E={}),this._checkLoaded(),void 0!==this.sourceCaches[c])throw new Error("There is already a source with this ID");if(!m.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(m).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(t.validateStyle.source,"sources."+c,m,null,E))){this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);var F=this.sourceCaches[c]=new Ge(c,m,this.dispatcher);F.style=this,F.setEventedParent(this,function(){return{isSourceLoaded:O.loaded(),source:F.serialize(),sourceId:c}}),F.onAdd(this.map),this._changed=!0}},d.prototype.removeSource=function(c){if(this._checkLoaded(),void 0===this.sourceCaches[c])throw new Error("There is no source with this ID");for(var m in this._layers)if(this._layers[m].source===c)return this.fire(new t.ErrorEvent(new Error('Source "'+c+'" cannot be removed while layer "'+m+'" is using it.')));var E=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],E.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),E.setEventedParent(null),E.clearTiles(),E.onRemove&&E.onRemove(this.map),this._changed=!0},d.prototype.setGeoJSONSourceData=function(c,m){this._checkLoaded(),this.sourceCaches[c].getSource().setData(m),this._changed=!0},d.prototype.getSource=function(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()},d.prototype.addLayer=function(c,m,E){void 0===E&&(E={}),this._checkLoaded();var O=c.id;if(this.getLayer(O))this.fire(new t.ErrorEvent(new Error('Layer with id "'+O+'" already exists on this map')));else{var F;if("custom"===c.type){if(Ao(this,t.validateCustomStyleLayer(c)))return;F=t.createStyleLayer(c)}else{if("object"==typeof c.source&&(this.addSource(O,c.source),c=t.clone$1(c),c=t.extend(c,{source:O})),this._validate(t.validateStyle.layer,"layers."+O,c,{arrayIndex:-1},E))return;F=t.createStyleLayer(c),this._validateLayer(F),F.setEventedParent(this,{layer:{id:O}}),this._serializedLayers[F.id]=F.serialize()}var $=m?this._order.indexOf(m):this._order.length;if(m&&-1===$)this.fire(new t.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.')));else{if(this._order.splice($,0,O),this._layerOrderChanged=!0,this._layers[O]=F,this._removedLayers[O]&&F.source&&"custom"!==F.type){var se=this._removedLayers[O];delete this._removedLayers[O],se.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)}}},d.prototype.moveLayer=function(c,m){if(this._checkLoaded(),this._changed=!0,this._layers[c]){if(c!==m){var E=this._order.indexOf(c);this._order.splice(E,1);var O=m?this._order.indexOf(m):this._order.length;m&&-1===O?this.fire(new t.ErrorEvent(new Error('Layer with id "'+m+'" does not exist on this map.'))):(this._order.splice(O,0,c),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be moved.")))},d.prototype.removeLayer=function(c){this._checkLoaded();var m=this._layers[c];if(m){m.setEventedParent(null);var E=this._order.indexOf(c);this._order.splice(E,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=m,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],m.onRemove&&m.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be removed.")))},d.prototype.getLayer=function(c){return this._layers[c]},d.prototype.hasLayer=function(c){return c in this._layers},d.prototype.setLayerZoomRange=function(c,m,E){this._checkLoaded();var O=this.getLayer(c);O?O.minzoom===m&&O.maxzoom===E||(null!=m&&(O.minzoom=m),null!=E&&(O.maxzoom=E),this._updateLayer(O)):this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot have zoom extent.")))},d.prototype.setFilter=function(c,m,E){void 0===E&&(E={}),this._checkLoaded();var O=this.getLayer(c);if(O){if(!t.deepEqual(O.filter,m))return null==m?(O.filter=void 0,void this._updateLayer(O)):void(this._validate(t.validateStyle.filter,"layers."+O.id+".filter",m,null,E)||(O.filter=t.clone$1(m),this._updateLayer(O)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be filtered.")))},d.prototype.getFilter=function(c){return t.clone$1(this.getLayer(c).filter)},d.prototype.setLayoutProperty=function(c,m,E,O){void 0===O&&(O={}),this._checkLoaded();var F=this.getLayer(c);F?t.deepEqual(F.getLayoutProperty(m),E)||(F.setLayoutProperty(m,E,O),this._updateLayer(F)):this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getLayoutProperty=function(c,m){var E=this.getLayer(c);if(E)return E.getLayoutProperty(m);this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style.")))},d.prototype.setPaintProperty=function(c,m,E,O){void 0===O&&(O={}),this._checkLoaded();var F=this.getLayer(c);F?t.deepEqual(F.getPaintProperty(m),E)||(F.setPaintProperty(m,E,O)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},d.prototype.getPaintProperty=function(c,m){return this.getLayer(c).getPaintProperty(m)},d.prototype.setFeatureState=function(c,m){this._checkLoaded();var E=c.source,O=c.sourceLayer,F=this.sourceCaches[E];if(void 0!==F){var $=F.getSource().type;"geojson"===$&&O?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==$||O?(void 0===c.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),F.setFeatureState(O,c.id,m)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+E+"' does not exist in the map's style.")))},d.prototype.removeFeatureState=function(c,m){this._checkLoaded();var E=c.source,O=this.sourceCaches[E];if(void 0!==O){var F=O.getSource().type,$="vector"===F?c.sourceLayer:void 0;"vector"!==F||$?m&&"string"!=typeof c.id&&"number"!=typeof c.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):O.removeFeatureState($,c.id,m):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+E+"' does not exist in the map's style.")))},d.prototype.getFeatureState=function(c){this._checkLoaded();var m=c.source,E=c.sourceLayer,O=this.sourceCaches[m];if(void 0!==O){if("vector"!==O.getSource().type||E)return void 0===c.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),O.getFeatureState(E,c.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},d.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},d.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(c){return c.serialize()}),layers:this._serializeLayers(this._order)},function(c){return void 0!==c})},d.prototype._updateLayer=function(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&"raster"!==this.sourceCaches[c.source].getSource().type&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0},d.prototype._flattenAndSortRenderedFeatures=function(c){for(var m=this,E=function(rn){return"fill-extrusion"===m._layers[rn].type},O={},F=[],$=this._order.length-1;$>=0;$--){var se=this._order[$];if(E(se)){O[se]=$;for(var ge=0,D=c;ge<D.length;ge+=1){var M=D[ge][se];if(M)for(var x=0,A=M;x<A.length;x+=1)F.push(A[x])}}}F.sort(function(rn,Qt){return Qt.intersectionZ-rn.intersectionZ});for(var z=[],Q=this._order.length-1;Q>=0;Q--){var K=this._order[Q];if(E(K))for(var ye=F.length-1;ye>=0;ye--){var Oe=F[ye].feature;if(O[Oe.layer.id]<Q)break;z.push(Oe),F.pop()}else for(var et=0,ut=c;et<ut.length;et+=1){var ct=ut[et][K];if(ct)for(var vt=0,Ft=ct;vt<Ft.length;vt+=1)z.push(Ft[vt].feature)}}return z},d.prototype.queryRenderedFeatures=function(c,m,E){m&&m.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",m.filter,null,m);var O={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var F=0,$=m.layers;F<$.length;F+=1){var se=$[F],ge=this._layers[se];if(!ge)return this.fire(new t.ErrorEvent(new Error("The layer '"+se+"' does not exist in the map's style and cannot be queried for features."))),[];O[ge.source]=!0}}var D=[];for(var M in m.availableImages=this._availableImages,this.sourceCaches)m.layers&&!O[M]||D.push(qt(this.sourceCaches[M],this._layers,this._serializedLayers,c,m,E));return this.placement&&D.push(function(x,A,z,Q,K,ye,Oe){for(var et={},ut=ye.queryRenderedSymbols(Q),ct=[],vt=0,Ft=Object.keys(ut).map(Number);vt<Ft.length;vt+=1)ct.push(Oe[Ft[vt]]);ct.sort(_t);for(var rn=function(){var Vn=pn[Qt],zi=Vn.featureIndex.lookupSymbolFeatures(ut[Vn.bucketInstanceId],A,Vn.bucketIndex,Vn.sourceLayerIndex,K.filter,K.layers,K.availableImages,x);for(var Mn in zi){var si=et[Mn]=et[Mn]||[],xi=zi[Mn];xi.sort(function(ai,Wn){var Jn=Vn.featureSortOrder;if(Jn){var Co=Jn.indexOf(ai.featureIndex);return Jn.indexOf(Wn.featureIndex)-Co}return Wn.featureIndex-ai.featureIndex});for(var ti=0,Xn=xi;ti<Xn.length;ti+=1)si.push(Xn[ti])}},Qt=0,pn=ct;Qt<pn.length;Qt+=1)rn();var zn=function(Vn){et[Vn].forEach(function(zi){var Mn=zi.feature,si=z[x[Vn].source].getFeatureState(Mn.layer["source-layer"],Mn.id);Mn.source=Mn.layer.source,Mn.layer["source-layer"]&&(Mn.sourceLayer=Mn.layer["source-layer"]),Mn.state=si})};for(var Nn in et)zn(Nn);return et}(this._layers,this._serializedLayers,this.sourceCaches,c,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)},d.prototype.querySourceFeatures=function(c,m){m&&m.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",m.filter,null,m);var E=this.sourceCaches[c];return E?function(O,F){for(var $=O.getRenderableIds().map(function(A){return O.getTileByID(A)}),se=[],ge={},D=0;D<$.length;D++){var M=$[D],x=M.tileID.canonical.key;ge[x]||(ge[x]=!0,M.querySourceFeatures(se,F))}return se}(E,m):[]},d.prototype.addSourceType=function(c,m,E){return d.getSourceType(c)?E(new Error('A source type called "'+c+'" already exists.')):(d.setSourceType(c,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:m.workerSourceURL},E):E(null,null))},d.prototype.getLight=function(){return this.light.getLight()},d.prototype.setLight=function(c,m){void 0===m&&(m={}),this._checkLoaded();var E=this.light.getLight(),O=!1;for(var F in c)if(!t.deepEqual(c[F],E[F])){O=!0;break}if(O){var $={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,m),this.light.updateTransitions($)}},d.prototype._validate=function(c,m,E,O,F){return void 0===F&&(F={}),(!F||!1!==F.validate)&&Ao(this,c.call(t.validateStyle,t.extend({key:m,style:this.serialize(),value:E,styleSpec:t.styleSpec},O)))},d.prototype._remove=function(){for(var c in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[c].setEventedParent(null);for(var m in this.sourceCaches)this.sourceCaches[m].clearTiles(),this.sourceCaches[m].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},d.prototype._clearSource=function(c){this.sourceCaches[c].clearTiles()},d.prototype._reloadSource=function(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()},d.prototype._updateSources=function(c){for(var m in this.sourceCaches)this.sourceCaches[m].update(c)},d.prototype._generateCollisionBoxes=function(){for(var c in this.sourceCaches)this._reloadSource(c)},d.prototype._updatePlacement=function(c,m,E,O,F){void 0===F&&(F=!1);for(var $=!1,se=!1,ge={},D=0,M=this._order;D<M.length;D+=1){var x=this._layers[M[D]];if("symbol"===x.type){if(!ge[x.source]){var A=this.sourceCaches[x.source];ge[x.source]=A.getRenderableIds(!0).map(function(Oe){return A.getTileByID(Oe)}).sort(function(Oe,et){return et.tileID.overscaledZ-Oe.tileID.overscaledZ||(Oe.tileID.isLessThan(et.tileID)?-1:1)})}var z=this.crossTileSymbolIndex.addLayer(x,ge[x.source],c.center.lng);$=$||z}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||0===E)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),c.zoom))&&(this.pauseablePlacement=new Cs(c,this._order,F,m,E,O,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),se=!0),$&&this.pauseablePlacement.placement.setStale()),se||$)for(var Q=0,K=this._order;Q<K.length;Q+=1){var ye=this._layers[K[Q]];"symbol"===ye.type&&this.placement.updateLayerOpacities(ye,ge[ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},d.prototype._releaseSymbolFadeTiles=function(){for(var c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()},d.prototype.getImages=function(c,m,E){this.imageManager.getImages(m.icons,E),this._updateTilesForChangedImages();var O=this.sourceCaches[m.source];O&&O.setDependencies(m.tileID.key,m.type,m.icons)},d.prototype.getGlyphs=function(c,m,E){this.glyphManager.getGlyphs(m.stacks,E)},d.prototype.getResource=function(c,m,E){return t.makeRequest(m,E)},d}(t.Evented);Oo.getSourceType=function(l){return Pt[l]},Oo.setSourceType=function(l,d){Pt[l]=d},Oo.registerForPluginStateChange=t.registerForPluginStateChange;var jr=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Gs=Qi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),bl=Qi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),oa=Qi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Gc=Qi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),es=Qi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),xl=Qi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ja=Qi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),_r=Qi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ji=Qi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Xl=Qi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Fl=Qi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Na=Qi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qa=Qi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Po=Qi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),wr=Qi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),_a=Qi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),sa=Qi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Fa=Qi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$s=Qi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Uo=Qi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Es=Qi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ts=Qi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Zs=Qi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),La=Qi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Ll=Qi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),wl=Qi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Qi(l,d){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=d.match(/attribute ([\w]+) ([\w]+)/g),E=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=O?O.concat(E):E,$={};return{fragmentSource:l=l.replace(c,function(se,ge,D,M,x){return $[x]=!0,"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+x+"\nvarying "+D+" "+M+" "+x+";\n#else\nuniform "+D+" "+M+" u_"+x+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+x+"\n    "+D+" "+M+" "+x+" = u_"+x+";\n#endif\n"}),vertexSource:d=d.replace(c,function(se,ge,D,M,x){var A="float"===M?"vec2":"vec4",z=x.match(/color/)?"color":A;return $[x]?"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+x+"\nuniform lowp float u_"+x+"_t;\nattribute "+D+" "+A+" a_"+x+";\nvarying "+D+" "+M+" "+x+";\n#else\nuniform "+D+" "+M+" u_"+x+";\n#endif\n":"vec4"===z?"\n#ifndef HAS_UNIFORM_u_"+x+"\n    "+x+" = a_"+x+";\n#else\n    "+D+" "+M+" "+x+" = u_"+x+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+x+"\n    "+x+" = unpack_mix_"+z+"(a_"+x+", u_"+x+"_t);\n#else\n    "+D+" "+M+" "+x+" = u_"+x+";\n#endif\n":"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+x+"\nuniform lowp float u_"+x+"_t;\nattribute "+D+" "+A+" a_"+x+";\n#else\nuniform "+D+" "+M+" u_"+x+";\n#endif\n":"vec4"===z?"\n#ifndef HAS_UNIFORM_u_"+x+"\n    "+D+" "+M+" "+x+" = a_"+x+";\n#else\n    "+D+" "+M+" "+x+" = u_"+x+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+x+"\n    "+D+" "+M+" "+x+" = unpack_mix_"+z+"(a_"+x+", u_"+x+"_t);\n#else\n    "+D+" "+M+" "+x+" = u_"+x+";\n#endif\n"}),staticAttributes:m,staticUniforms:F}}var Ac=Object.freeze({__proto__:null,prelude:Gs,background:bl,backgroundPattern:oa,circle:Gc,clippingMask:es,heatmap:xl,heatmapTexture:Ja,collisionBox:_r,collisionCircle:ji,debug:Xl,fill:Fl,fillOutline:Na,fillOutlinePattern:qa,fillPattern:Po,fillExtrusion:wr,fillExtrusionPattern:_a,hillshadePrepare:sa,hillshade:Fa,line:$s,lineGradient:Uo,linePattern:Es,lineSDF:Ts,raster:Zs,symbolIcon:La,symbolSDF:Ll,symbolTextAndIcon:wl}),jo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function qr(l){for(var d=[],c=0;c<l.length;c++)if(null!==l[c]){var m=l[c].split(" ");d.push(m.pop())}return d}jo.prototype.bind=function(l,d,c,m,E,O,F,$){this.context=l;for(var se=this.boundPaintVertexBuffers.length!==m.length,ge=0;!se&&ge<m.length;ge++)this.boundPaintVertexBuffers[ge]!==m[ge]&&(se=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===c&&!se&&this.boundIndexBuffer===E&&this.boundVertexOffset===O&&this.boundDynamicVertexBuffer===F&&this.boundDynamicVertexBuffer2===$?(l.bindVertexArrayOES.set(this.vao),F&&F.bind(),E&&E.dynamicDraw&&E.bind(),$&&$.bind()):this.freshBind(d,c,m,E,O,F,$)},jo.prototype.freshBind=function(l,d,c,m,E,O,F){var $,se=l.numAttributes,ge=this.context,D=ge.gl;if(ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ge.extVertexArrayObject.createVertexArrayOES(),ge.bindVertexArrayOES.set(this.vao),$=0,this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=m,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=F;else{$=ge.currentNumAttributes||0;for(var M=se;M<$;M++)D.disableVertexAttribArray(M)}d.enableAttributes(D,l);for(var x=0,A=c;x<A.length;x+=1)A[x].enableAttributes(D,l);O&&O.enableAttributes(D,l),F&&F.enableAttributes(D,l),d.bind(),d.setVertexAttribPointers(D,l,E);for(var z=0,Q=c;z<Q.length;z+=1){var K=Q[z];K.bind(),K.setVertexAttribPointers(D,l,E)}O&&(O.bind(),O.setVertexAttribPointers(D,l,E)),m&&m.bind(),F&&(F.bind(),F.setVertexAttribPointers(D,l,E)),ge.currentNumAttributes=se},jo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ko=function(l,d,c,m,E,O){var F=l.gl;this.program=F.createProgram();for(var $=qr(c.staticAttributes),se=m?m.getBinderAttributes():[],ge=$.concat(se),D=c.staticUniforms?qr(c.staticUniforms):[],M=m?m.getBinderUniforms():[],x=[],A=0,z=D.concat(M);A<z.length;A+=1){var Q=z[A];x.indexOf(Q)<0&&x.push(Q)}var K=m?m.defines():[];O&&K.push("#define OVERDRAW_INSPECTOR;");var ye=K.concat(Gs.fragmentSource,c.fragmentSource).join("\n"),Oe=K.concat(Gs.vertexSource,c.vertexSource).join("\n"),et=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())this.failedToCreate=!0;else{F.shaderSource(et,ye),F.compileShader(et),F.attachShader(this.program,et);var ut=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())this.failedToCreate=!0;else{F.shaderSource(ut,Oe),F.compileShader(ut),F.attachShader(this.program,ut),this.attributes={};var ct={};this.numAttributes=ge.length;for(var vt=0;vt<this.numAttributes;vt++)ge[vt]&&(F.bindAttribLocation(this.program,vt,ge[vt]),this.attributes[ge[vt]]=vt);F.linkProgram(this.program),F.deleteShader(ut),F.deleteShader(et);for(var Ft=0;Ft<x.length;Ft++){var rn=x[Ft];if(rn&&!ct[rn]){var Qt=F.getUniformLocation(this.program,rn);Qt&&(ct[rn]=Qt)}}this.fixedUniforms=E(l,ct),this.binderUniforms=m?m.getUniforms(l,ct):[]}}};function Ba(l,d,c){var m=1/gi(c,1,d.transform.tileZoom),E=Math.pow(2,c.tileID.overscaledZ),O=c.tileSize*Math.pow(2,d.transform.tileZoom)/E,F=O*(c.tileID.canonical.x+c.tileID.wrap*E),$=O*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[F>>16,$>>16],u_pixel_coord_lower:[65535&F,65535&$]}}ko.prototype.draw=function(l,d,c,m,E,O,F,$,se,ge,D,M,x,A,z,Q){var K,ye=l.gl;if(!this.failedToCreate){for(var Oe in l.program.set(this.program),l.setDepthMode(c),l.setStencilMode(m),l.setColorMode(E),l.setCullFace(O),this.fixedUniforms)this.fixedUniforms[Oe].set(F[Oe]);A&&A.setUniforms(l,this.binderUniforms,M,{zoom:x});for(var et=(K={},K[ye.LINES]=2,K[ye.TRIANGLES]=3,K[ye.LINE_STRIP]=1,K)[d],ut=0,ct=D.get();ut<ct.length;ut+=1){var vt=ct[ut],Ft=vt.vaos||(vt.vaos={});(Ft[$]||(Ft[$]=new jo)).bind(l,this,se,A?A.getPaintVertexBuffers():[],ge,vt.vertexOffset,z,Q),ye.drawElements(d,vt.primitiveLength*et,ye.UNSIGNED_SHORT,vt.primitiveOffset*et*2)}}};var Qa=function(l,d,c,m){var E=d.style.light,O=E.properties.get("position"),F=[O.x,O.y,O.z],$=t.create$1();"viewport"===E.properties.get("anchor")&&t.fromRotation($,-d.transform.angle),t.transformMat3(F,F,$);var se=E.properties.get("color");return{u_matrix:l,u_lightpos:F,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+c,u_opacity:m}},Hr=function(l,d,c,m,E,O,F){return t.extend(Qa(l,d,c,m),Ba(O,d,F),{u_height_factor:-Math.pow(2,E.overscaledZ)/F.tileSize/8})},Ms=function(l){return{u_matrix:l}},Yo=function(l,d,c,m){return t.extend(Ms(l),Ba(c,d,m))},ts=function(l,d){return{u_matrix:l,u_world:d}},fc=function(l,d,c,m,E){return t.extend(Yo(l,d,c,m),{u_world:E})},Fs=function(l,d,c,m){var E,O,F=l.transform;if("map"===m.paint.get("circle-pitch-alignment")){var $=gi(c,1,F.zoom);E=!0,O=[$,$]}else E=!1,O=F.pixelsToGLUnits;return{u_camera_to_center_distance:F.cameraToCenterDistance,u_scale_with_map:+("map"===m.paint.get("circle-pitch-scale")),u_matrix:l.translatePosMatrix(d.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:O}},Ro=function(l,d,c){var m=gi(c,1,d.zoom),E=Math.pow(2,d.zoom-c.tileID.overscaledZ),O=c.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[d.pixelsToGLUnits[0]/(m*E),d.pixelsToGLUnits[1]/(m*E)],u_overscale_factor:O}},us=function(l,d,c){return{u_matrix:l,u_inv_matrix:d,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}},ya=function(l,d,c){return void 0===c&&(c=1),{u_matrix:l,u_color:d,u_overlay:0,u_overlay_scale:c}},ns=function(l){return{u_matrix:l}},za=function(l,d,c,m){return{u_matrix:l,u_extrude_scale:gi(d,1,c),u_intensity:m}},ds=function(l,d,c){var m=l.transform;return{u_matrix:kt(l,d,c),u_ratio:1/gi(d,1,m.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},re=function(l,d,c,m){return t.extend(ds(l,d,c),{u_image:0,u_image_height:m})},ne=function(l,d,c,m){var E=l.transform,O=Te(d,E);return{u_matrix:kt(l,d,c),u_texsize:d.imageAtlasTexture.size,u_ratio:1/gi(d,1,E.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[O,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Y=function(l,d,c,m,E){var O=l.lineAtlas,F=Te(d,l.transform),$="round"===c.layout.get("line-cap"),se=O.getDash(m.from,$),ge=O.getDash(m.to,$),D=se.width*E.fromScale,M=ge.width*E.toScale;return t.extend(ds(l,d,c),{u_patternscale_a:[F/D,-se.height/2],u_patternscale_b:[F/M,-ge.height/2],u_sdfgamma:O.width/(256*Math.min(D,M)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:se.y,u_tex_y_b:ge.y,u_mix:E.t})};function Te(l,d){return 1/gi(l,1,d.tileZoom)}function kt(l,d,c){return l.translatePosMatrix(d.tileID.posMatrix,d,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}var Bn=function(l,d,c,m,E){return{u_matrix:l,u_tl_parent:d,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(F=E.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(O=E.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:Qr(E.paint.get("raster-hue-rotate"))};var O,F};function Qr(l){l*=Math.PI/180;var d=Math.sin(l),c=Math.cos(l);return[(2*c+1)/3,(-Math.sqrt(3)*d-c+1)/3,(Math.sqrt(3)*d-c+1)/3]}var tr,hs=function(l,d,c,m,E,O,F,$,se,ge){var D=E.transform;return{u_is_size_zoom_constant:+("constant"===l||"source"===l),u_is_size_feature_constant:+("constant"===l||"camera"===l),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:D.cameraToCenterDistance,u_pitch:D.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:D.width/D.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:F,u_coord_matrix:$,u_is_text:+se,u_pitch_with_map:+m,u_texsize:ge,u_texture:0}},Ss=function(l,d,c,m,E,O,F,$,se,ge,D){var M=E.transform;return t.extend(hs(l,d,c,m,E,O,F,$,se,ge),{u_gamma_scale:m?Math.cos(M._pitch)*M.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+D})},Xa=function(l,d,c,m,E,O,F,$,se,ge){return t.extend(Ss(l,d,c,m,E,O,F,$,!0,se,!0),{u_texsize_icon:ge,u_texture_icon:1})},on=function(l,d,c){return{u_matrix:l,u_opacity:d,u_color:c}},Pi=function(l,d,c,m,E,O){return t.extend(($=O,ge=E,D=(se=c).imageManager.getPattern((F=m).from.toString()),M=se.imageManager.getPattern(F.to.toString()),A=(x=se.imageManager.getPixelSize()).width,z=x.height,Q=Math.pow(2,ge.tileID.overscaledZ),ye=(K=ge.tileSize*Math.pow(2,se.transform.tileZoom)/Q)*(ge.tileID.canonical.x+ge.tileID.wrap*Q),Oe=K*ge.tileID.canonical.y,{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:M.tl,u_pattern_br_b:M.br,u_texsize:[A,z],u_mix:$.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:M.displaySize,u_scale_a:$.fromScale,u_scale_b:$.toScale,u_tile_units_to_pixels:1/gi(ge,1,se.transform.tileZoom),u_pixel_coord_upper:[ye>>16,Oe>>16],u_pixel_coord_lower:[65535&ye,65535&Oe]}),{u_matrix:l,u_opacity:d});var F,$,se,ge,D,M,x,A,z,Q,K,ye,Oe},Yi={fillExtrusion:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_lightpos:new t.Uniform3f(l,d.u_lightpos),u_lightintensity:new t.Uniform1f(l,d.u_lightintensity),u_lightcolor:new t.Uniform3f(l,d.u_lightcolor),u_vertical_gradient:new t.Uniform1f(l,d.u_vertical_gradient),u_opacity:new t.Uniform1f(l,d.u_opacity)}},fillExtrusionPattern:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_lightpos:new t.Uniform3f(l,d.u_lightpos),u_lightintensity:new t.Uniform1f(l,d.u_lightintensity),u_lightcolor:new t.Uniform3f(l,d.u_lightcolor),u_vertical_gradient:new t.Uniform1f(l,d.u_vertical_gradient),u_height_factor:new t.Uniform1f(l,d.u_height_factor),u_image:new t.Uniform1i(l,d.u_image),u_texsize:new t.Uniform2f(l,d.u_texsize),u_pixel_coord_upper:new t.Uniform2f(l,d.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(l,d.u_pixel_coord_lower),u_scale:new t.Uniform3f(l,d.u_scale),u_fade:new t.Uniform1f(l,d.u_fade),u_opacity:new t.Uniform1f(l,d.u_opacity)}},fill:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix)}},fillPattern:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_image:new t.Uniform1i(l,d.u_image),u_texsize:new t.Uniform2f(l,d.u_texsize),u_pixel_coord_upper:new t.Uniform2f(l,d.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(l,d.u_pixel_coord_lower),u_scale:new t.Uniform3f(l,d.u_scale),u_fade:new t.Uniform1f(l,d.u_fade)}},fillOutline:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_world:new t.Uniform2f(l,d.u_world)}},fillOutlinePattern:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_world:new t.Uniform2f(l,d.u_world),u_image:new t.Uniform1i(l,d.u_image),u_texsize:new t.Uniform2f(l,d.u_texsize),u_pixel_coord_upper:new t.Uniform2f(l,d.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(l,d.u_pixel_coord_lower),u_scale:new t.Uniform3f(l,d.u_scale),u_fade:new t.Uniform1f(l,d.u_fade)}},circle:function(l,d){return{u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(l,d.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(l,d.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(l,d.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(l,d.u_matrix)}},collisionBox:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(l,d.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(l,d.u_extrude_scale),u_overscale_factor:new t.Uniform1f(l,d.u_overscale_factor)}},collisionCircle:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_inv_matrix:new t.UniformMatrix4f(l,d.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(l,d.u_viewport_size)}},debug:function(l,d){return{u_color:new t.UniformColor(l,d.u_color),u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_overlay:new t.Uniform1i(l,d.u_overlay),u_overlay_scale:new t.Uniform1f(l,d.u_overlay_scale)}},clippingMask:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix)}},heatmap:function(l,d){return{u_extrude_scale:new t.Uniform1f(l,d.u_extrude_scale),u_intensity:new t.Uniform1f(l,d.u_intensity),u_matrix:new t.UniformMatrix4f(l,d.u_matrix)}},heatmapTexture:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_world:new t.Uniform2f(l,d.u_world),u_image:new t.Uniform1i(l,d.u_image),u_color_ramp:new t.Uniform1i(l,d.u_color_ramp),u_opacity:new t.Uniform1f(l,d.u_opacity)}},hillshade:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_image:new t.Uniform1i(l,d.u_image),u_latrange:new t.Uniform2f(l,d.u_latrange),u_light:new t.Uniform2f(l,d.u_light),u_shadow:new t.UniformColor(l,d.u_shadow),u_highlight:new t.UniformColor(l,d.u_highlight),u_accent:new t.UniformColor(l,d.u_accent)}},hillshadePrepare:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_image:new t.Uniform1i(l,d.u_image),u_dimension:new t.Uniform2f(l,d.u_dimension),u_zoom:new t.Uniform1f(l,d.u_zoom),u_unpack:new t.Uniform4f(l,d.u_unpack)}},line:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_ratio:new t.Uniform1f(l,d.u_ratio),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(l,d.u_units_to_pixels)}},lineGradient:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_ratio:new t.Uniform1f(l,d.u_ratio),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(l,d.u_units_to_pixels),u_image:new t.Uniform1i(l,d.u_image),u_image_height:new t.Uniform1f(l,d.u_image_height)}},linePattern:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_texsize:new t.Uniform2f(l,d.u_texsize),u_ratio:new t.Uniform1f(l,d.u_ratio),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_image:new t.Uniform1i(l,d.u_image),u_units_to_pixels:new t.Uniform2f(l,d.u_units_to_pixels),u_scale:new t.Uniform3f(l,d.u_scale),u_fade:new t.Uniform1f(l,d.u_fade)}},lineSDF:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_ratio:new t.Uniform1f(l,d.u_ratio),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(l,d.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(l,d.u_patternscale_a),u_patternscale_b:new t.Uniform2f(l,d.u_patternscale_b),u_sdfgamma:new t.Uniform1f(l,d.u_sdfgamma),u_image:new t.Uniform1i(l,d.u_image),u_tex_y_a:new t.Uniform1f(l,d.u_tex_y_a),u_tex_y_b:new t.Uniform1f(l,d.u_tex_y_b),u_mix:new t.Uniform1f(l,d.u_mix)}},raster:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_tl_parent:new t.Uniform2f(l,d.u_tl_parent),u_scale_parent:new t.Uniform1f(l,d.u_scale_parent),u_buffer_scale:new t.Uniform1f(l,d.u_buffer_scale),u_fade_t:new t.Uniform1f(l,d.u_fade_t),u_opacity:new t.Uniform1f(l,d.u_opacity),u_image0:new t.Uniform1i(l,d.u_image0),u_image1:new t.Uniform1i(l,d.u_image1),u_brightness_low:new t.Uniform1f(l,d.u_brightness_low),u_brightness_high:new t.Uniform1f(l,d.u_brightness_high),u_saturation_factor:new t.Uniform1f(l,d.u_saturation_factor),u_contrast_factor:new t.Uniform1f(l,d.u_contrast_factor),u_spin_weights:new t.Uniform3f(l,d.u_spin_weights)}},symbolIcon:function(l,d){return{u_is_size_zoom_constant:new t.Uniform1i(l,d.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(l,d.u_is_size_feature_constant),u_size_t:new t.Uniform1f(l,d.u_size_t),u_size:new t.Uniform1f(l,d.u_size),u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_pitch:new t.Uniform1f(l,d.u_pitch),u_rotate_symbol:new t.Uniform1i(l,d.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(l,d.u_aspect_ratio),u_fade_change:new t.Uniform1f(l,d.u_fade_change),u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(l,d.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(l,d.u_coord_matrix),u_is_text:new t.Uniform1i(l,d.u_is_text),u_pitch_with_map:new t.Uniform1i(l,d.u_pitch_with_map),u_texsize:new t.Uniform2f(l,d.u_texsize),u_texture:new t.Uniform1i(l,d.u_texture)}},symbolSDF:function(l,d){return{u_is_size_zoom_constant:new t.Uniform1i(l,d.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(l,d.u_is_size_feature_constant),u_size_t:new t.Uniform1f(l,d.u_size_t),u_size:new t.Uniform1f(l,d.u_size),u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_pitch:new t.Uniform1f(l,d.u_pitch),u_rotate_symbol:new t.Uniform1i(l,d.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(l,d.u_aspect_ratio),u_fade_change:new t.Uniform1f(l,d.u_fade_change),u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(l,d.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(l,d.u_coord_matrix),u_is_text:new t.Uniform1i(l,d.u_is_text),u_pitch_with_map:new t.Uniform1i(l,d.u_pitch_with_map),u_texsize:new t.Uniform2f(l,d.u_texsize),u_texture:new t.Uniform1i(l,d.u_texture),u_gamma_scale:new t.Uniform1f(l,d.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(l,d.u_is_halo)}},symbolTextAndIcon:function(l,d){return{u_is_size_zoom_constant:new t.Uniform1i(l,d.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(l,d.u_is_size_feature_constant),u_size_t:new t.Uniform1f(l,d.u_size_t),u_size:new t.Uniform1f(l,d.u_size),u_camera_to_center_distance:new t.Uniform1f(l,d.u_camera_to_center_distance),u_pitch:new t.Uniform1f(l,d.u_pitch),u_rotate_symbol:new t.Uniform1i(l,d.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(l,d.u_aspect_ratio),u_fade_change:new t.Uniform1f(l,d.u_fade_change),u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(l,d.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(l,d.u_coord_matrix),u_is_text:new t.Uniform1i(l,d.u_is_text),u_pitch_with_map:new t.Uniform1i(l,d.u_pitch_with_map),u_texsize:new t.Uniform2f(l,d.u_texsize),u_texsize_icon:new t.Uniform2f(l,d.u_texsize_icon),u_texture:new t.Uniform1i(l,d.u_texture),u_texture_icon:new t.Uniform1i(l,d.u_texture_icon),u_gamma_scale:new t.Uniform1f(l,d.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(l,d.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(l,d.u_is_halo)}},background:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_opacity:new t.Uniform1f(l,d.u_opacity),u_color:new t.UniformColor(l,d.u_color)}},backgroundPattern:function(l,d){return{u_matrix:new t.UniformMatrix4f(l,d.u_matrix),u_opacity:new t.Uniform1f(l,d.u_opacity),u_image:new t.Uniform1i(l,d.u_image),u_pattern_tl_a:new t.Uniform2f(l,d.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(l,d.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(l,d.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(l,d.u_pattern_br_b),u_texsize:new t.Uniform2f(l,d.u_texsize),u_mix:new t.Uniform1f(l,d.u_mix),u_pattern_size_a:new t.Uniform2f(l,d.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(l,d.u_pattern_size_b),u_scale_a:new t.Uniform1f(l,d.u_scale_a),u_scale_b:new t.Uniform1f(l,d.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(l,d.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(l,d.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(l,d.u_tile_units_to_pixels)}}};function Ys(l,d,c,m,E,O,F){for(var $=l.context,se=$.gl,ge=l.useProgram("collisionBox"),D=[],M=0,x=0,A=0;A<m.length;A++){var z=m[A],Q=d.getTile(z),K=Q.getBucket(c);if(K){var ye=z.posMatrix;0===E[0]&&0===E[1]||(ye=l.translatePosMatrix(z.posMatrix,Q,E,O));var Oe=F?K.textCollisionBox:K.iconCollisionBox,et=K.collisionCircleArray;if(et.length>0){var ut=t.create(),ct=ye;t.mul(ut,K.placementInvProjMatrix,l.transform.glCoordMatrix),t.mul(ut,ut,K.placementViewportMatrix),D.push({circleArray:et,circleOffset:x,transform:ct,invTransform:ut}),x=M+=et.length/4}Oe&&ge.draw($,se.LINES,_e.disabled,Re.disabled,l.colorModeForRenderPass(),Xe.disabled,Ro(ye,l.transform,Q),c.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,l.transform.zoom,null,null,Oe.collisionVertexBuffer)}}if(F&&D.length){var vt=l.useProgram("collisionCircle"),Ft=new t.StructArrayLayout2f1f2i16;Ft.resize(4*M),Ft._trim();for(var rn=0,Qt=0,pn=D;Qt<pn.length;Qt+=1)for(var zn=pn[Qt],Nn=0;Nn<zn.circleArray.length/4;Nn++){var Vn=4*Nn,zi=zn.circleArray[Vn+0],Mn=zn.circleArray[Vn+1],si=zn.circleArray[Vn+2],xi=zn.circleArray[Vn+3];Ft.emplace(rn++,zi,Mn,si,xi,0),Ft.emplace(rn++,zi,Mn,si,xi,1),Ft.emplace(rn++,zi,Mn,si,xi,2),Ft.emplace(rn++,zi,Mn,si,xi,3)}(!tr||tr.length<2*M)&&(tr=function(io){var ms=2*io,Do=new t.StructArrayLayout3ui6;Do.resize(ms),Do._trim();for(var $r=0;$r<ms;$r++){var po=6*$r;Do.uint16[po+0]=4*$r+0,Do.uint16[po+1]=4*$r+1,Do.uint16[po+2]=4*$r+2,Do.uint16[po+3]=4*$r+2,Do.uint16[po+4]=4*$r+3,Do.uint16[po+5]=4*$r+0}return Do}(M));for(var ti=$.createIndexBuffer(tr,!0),Xn=$.createVertexBuffer(Ft,t.collisionCircleLayout.members,!0),ai=0,Wn=D;ai<Wn.length;ai+=1){var Jn=Wn[ai],Co=us(Jn.transform,Jn.invTransform,l.transform);vt.draw($,se.TRIANGLES,_e.disabled,Re.disabled,l.colorModeForRenderPass(),Xe.disabled,Co,c.id,Xn,ti,t.SegmentVector.simpleSegment(0,2*Jn.circleOffset,Jn.circleArray.length,Jn.circleArray.length/2),null,l.transform.zoom,null,null,null)}Xn.destroy(),ti.destroy()}}var Vr=t.identity(new Float32Array(16));function $c(l,d,c,m,E,O){var F=t.getAnchorAlignment(l),$=-(F.horizontalAlign-.5)*d,se=-(F.verticalAlign-.5)*c,ge=t.evaluateVariableOffset(l,m);return new t.Point(($/E+ge[0])*O,(se/E+ge[1])*O)}function el(l,d,c,m,E,O,F,$,se,ge,D){var M=l.text.placedSymbolArray,x=l.text.dynamicLayoutVertexArray,A=l.icon.dynamicLayoutVertexArray,z={};x.clear();for(var Q=0;Q<M.length;Q++){var K=M.get(Q),ye=K.hidden||!K.crossTileID||l.allowVerticalPlacement&&!K.placedOrientation?null:m[K.crossTileID];if(ye){var Oe=new t.Point(K.anchorX,K.anchorY),et=li(Oe,c?$:F),ut=pi(O.cameraToCenterDistance,et.signedDistanceFromCamera),ct=E.evaluateSizeForFeature(l.textSizeData,ge,K)*ut/t.ONE_EM;c&&(ct*=l.tilePixelRatio/se);for(var vt=$c(ye.anchor,ye.width,ye.height,ye.textOffset,ye.textBoxScale,ct),Ft=c?li(Oe.add(vt),F).point:et.point.add(d?vt.rotate(-O.angle):vt),rn=l.allowVerticalPlacement&&K.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Qt=0;Qt<K.numGlyphs;Qt++)t.addDynamicAttributes(x,Ft,rn);D&&K.associatedIconIndex>=0&&(z[K.associatedIconIndex]={shiftedAnchor:Ft,angle:rn})}else vi(K.numGlyphs,x)}if(D){A.clear();for(var pn=l.icon.placedSymbolArray,zn=0;zn<pn.length;zn++){var Nn=pn.get(zn);if(Nn.hidden)vi(Nn.numGlyphs,A);else{var Vn=z[zn];if(Vn)for(var zi=0;zi<Nn.numGlyphs;zi++)t.addDynamicAttributes(A,Vn.shiftedAnchor,Vn.angle);else vi(Nn.numGlyphs,A)}}l.icon.dynamicLayoutVertexBuffer.updateData(A)}l.text.dynamicLayoutVertexBuffer.updateData(x)}function Ws(l,d,c){return c.iconsInText&&d?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Ks(l,d,c,m,E,O,F,$,se,ge,D,M){for(var x=l.context,A=x.gl,z=l.transform,Q="map"===$,K="map"===se,ye=Q&&"point"!==c.layout.get("symbol-placement"),Oe=Q&&!K&&!ye,et=void 0!==c.layout.get("symbol-sort-key").constantOr(1),ut=!1,ct=l.depthModeForSublayer(0,_e.ReadOnly),vt=c.layout.get("text-variable-anchor"),Ft=[],rn=0,Qt=m;rn<Qt.length;rn+=1){var pn=Qt[rn],zn=d.getTile(pn),Nn=zn.getBucket(c);if(Nn){var Vn=E?Nn.text:Nn.icon;if(Vn&&Vn.segments.get().length){var zi=Vn.programConfigurations.get(c.id),Mn=E||Nn.sdfIcons,si=E?Nn.textSizeData:Nn.iconSizeData,xi=K||0!==z.pitch,ti=l.useProgram(Ws(Mn,E,Nn),zi),Xn=t.evaluateSizeForZoom(si,z.zoom),ai=void 0,Wn=[0,0],Jn=void 0,Co=void 0,io=null,ms=void 0;if(E)Jn=zn.glyphAtlasTexture,Co=A.LINEAR,ai=zn.glyphAtlasTexture.size,Nn.iconsInText&&(Wn=zn.imageAtlasTexture.size,io=zn.imageAtlasTexture,ms=xi||l.options.rotating||l.options.zooming||"composite"===si.kind||"camera"===si.kind?A.LINEAR:A.NEAREST);else{var Do=1!==c.layout.get("icon-size").constantOr(0)||Nn.iconsNeedLinear;Jn=zn.imageAtlasTexture,Co=Mn||l.options.rotating||l.options.zooming||Do||xi?A.LINEAR:A.NEAREST,ai=zn.imageAtlasTexture.size}var $r=gi(zn,1,l.transform.zoom),po=mr(pn.posMatrix,K,Q,l.transform,$r),ha=$i(pn.posMatrix,K,Q,l.transform,$r),Us=vt&&Nn.hasTextData(),Ea="none"!==c.layout.get("icon-text-fit")&&Us&&Nn.hasIconData();ye&&Tr(Nn,pn.posMatrix,l,E,po,ha,K,ge);var Go=l.translatePosMatrix(pn.posMatrix,zn,O,F),Ta=ye||E&&vt||Ea?Vr:po,Ga=l.translatePosMatrix(ha,zn,O,F,!0),yc=Mn&&0!==c.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1),vc={program:ti,buffers:Vn,uniformValues:Mn?Nn.iconsInText?Xa(si.kind,Xn,Oe,K,l,Go,Ta,Ga,ai,Wn):Ss(si.kind,Xn,Oe,K,l,Go,Ta,Ga,E,ai,!0):hs(si.kind,Xn,Oe,K,l,Go,Ta,Ga,E,ai),atlasTexture:Jn,atlasTextureIcon:io,atlasInterpolation:Co,atlasInterpolationIcon:ms,isSDF:Mn,hasHalo:yc};if(et&&Nn.canOverlap){ut=!0;for(var bc=0,nc=Vn.segments.get();bc<nc.length;bc+=1){var au=nc[bc];Ft.push({segments:new t.SegmentVector([au]),sortKey:au.sortKey,state:vc})}}else Ft.push({segments:Vn.segments,sortKey:0,state:vc})}}}ut&&Ft.sort(function(Lc,xc){return Lc.sortKey-xc.sortKey});for(var Sl=0,Fc=Ft;Sl<Fc.length;Sl+=1){var $l=Fc[Sl],gs=$l.state;if(x.activeTexture.set(A.TEXTURE0),gs.atlasTexture.bind(gs.atlasInterpolation,A.CLAMP_TO_EDGE),gs.atlasTextureIcon&&(x.activeTexture.set(A.TEXTURE1),gs.atlasTextureIcon&&gs.atlasTextureIcon.bind(gs.atlasInterpolationIcon,A.CLAMP_TO_EDGE)),gs.isSDF){var ic=gs.uniformValues;gs.hasHalo&&(ic.u_is_halo=1,tl(gs.buffers,$l.segments,c,l,gs.program,ct,D,M,ic)),ic.u_is_halo=0}tl(gs.buffers,$l.segments,c,l,gs.program,ct,D,M,gs.uniformValues)}}function tl(l,d,c,m,E,O,F,$,se){var ge=m.context;E.draw(ge,ge.gl.TRIANGLES,O,F,$,Xe.disabled,se,c.id,l.layoutVertexBuffer,l.indexBuffer,d,c.paint,m.transform.zoom,l.programConfigurations.get(c.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function Va(l,d,c,m,E,O,F){var $,se,ge,D,M,x=l.context.gl,A=c.paint.get("fill-pattern"),z=A&&A.constantOr(1),Q=c.getCrossfadeParameters();F?(se=z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=x.LINES):(se=z?"fillPattern":"fill",$=x.TRIANGLES);for(var K=0,ye=m;K<ye.length;K+=1){var Oe=ye[K],et=d.getTile(Oe);if(!z||et.patternsLoaded()){var ut=et.getBucket(c);if(ut){var ct=ut.programConfigurations.get(c.id),vt=l.useProgram(se,ct);z&&(l.context.activeTexture.set(x.TEXTURE0),et.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),ct.updatePaintBuffers(Q));var Ft=A.constantOr(null);if(Ft&&et.imageAtlas){var rn=et.imageAtlas,Qt=rn.patternPositions[Ft.to.toString()],pn=rn.patternPositions[Ft.from.toString()];Qt&&pn&&ct.setConstantPatternPositions(Qt,pn)}var zn=l.translatePosMatrix(Oe.posMatrix,et,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(F){D=ut.indexBuffer2,M=ut.segments2;var Nn=[x.drawingBufferWidth,x.drawingBufferHeight];ge="fillOutlinePattern"===se&&z?fc(zn,l,Q,et,Nn):ts(zn,Nn)}else D=ut.indexBuffer,M=ut.segments,ge=z?Yo(zn,l,Q,et):Ms(zn);vt.draw(l.context,$,E,l.stencilModeForClipping(Oe),O,Xe.disabled,ge,c.id,ut.layoutVertexBuffer,D,M,c.paint,l.transform.zoom,ct)}}}}function nl(l,d,c,m,E,O,F){for(var $=l.context,se=$.gl,ge=c.paint.get("fill-extrusion-pattern"),D=ge.constantOr(1),M=c.getCrossfadeParameters(),x=c.paint.get("fill-extrusion-opacity"),A=0,z=m;A<z.length;A+=1){var Q=z[A],K=d.getTile(Q),ye=K.getBucket(c);if(ye){var Oe=ye.programConfigurations.get(c.id),et=l.useProgram(D?"fillExtrusionPattern":"fillExtrusion",Oe);D&&(l.context.activeTexture.set(se.TEXTURE0),K.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Oe.updatePaintBuffers(M));var ut=ge.constantOr(null);if(ut&&K.imageAtlas){var ct=K.imageAtlas,vt=ct.patternPositions[ut.to.toString()],Ft=ct.patternPositions[ut.from.toString()];vt&&Ft&&Oe.setConstantPatternPositions(vt,Ft)}var rn=l.translatePosMatrix(Q.posMatrix,K,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Qt=c.paint.get("fill-extrusion-vertical-gradient"),pn=D?Hr(rn,l,Qt,x,Q,M,K):Qa(rn,l,Qt,x);et.draw($,$.gl.TRIANGLES,E,O,F,Xe.backCCW,pn,c.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,c.paint,l.transform.zoom,Oe)}}}function Bl(l,d,c,m,E,O){var F=l.context,$=F.gl,se=d.fbo;if(se){var ge=l.useProgram("hillshade");F.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,se.colorAttachment.get());var D=function(M,x,A){var z=A.paint.get("hillshade-shadow-color"),Q=A.paint.get("hillshade-highlight-color"),K=A.paint.get("hillshade-accent-color"),ye=A.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===A.paint.get("hillshade-illumination-anchor")&&(ye-=M.transform.angle);var Oe,et,ut,ct=!M.options.moving;return{u_matrix:M.transform.calculatePosMatrix(x.tileID.toUnwrapped(),ct),u_image:0,u_latrange:(Oe=x.tileID,et=Math.pow(2,Oe.canonical.z),ut=Oe.canonical.y,[new t.MercatorCoordinate(0,ut/et).toLngLat().lat,new t.MercatorCoordinate(0,(ut+1)/et).toLngLat().lat]),u_light:[A.paint.get("hillshade-exaggeration"),ye],u_shadow:z,u_highlight:Q,u_accent:K}}(l,d,c);ge.draw(F,$.TRIANGLES,m,E,O,Xe.disabled,D,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function Wo(l,d,c,m,E,O){var Q,K,ye,Oe,F=l.context,$=F.gl,se=d.dem;if(se&&se.data){var ge=se.dim,D=se.stride,M=se.getPixels();if(F.activeTexture.set($.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||l.getTileTexture(D),d.demTexture){var x=d.demTexture;x.update(M,{premultiply:!1}),x.bind($.NEAREST,$.CLAMP_TO_EDGE)}else d.demTexture=new t.Texture(F,M,$.RGBA,{premultiply:!1}),d.demTexture.bind($.NEAREST,$.CLAMP_TO_EDGE);F.activeTexture.set($.TEXTURE0);var A=d.fbo;if(!A){var z=new t.Texture(F,{width:ge,height:ge,data:null},$.RGBA);z.bind($.LINEAR,$.CLAMP_TO_EDGE),(A=d.fbo=F.createFramebuffer(ge,ge,!0)).colorAttachment.set(z.texture)}F.bindFramebuffer.set(A.framebuffer),F.viewport.set([0,0,ge,ge]),l.useProgram("hillshadePrepare").draw(F,$.TRIANGLES,m,E,O,Xe.disabled,(Q=d.tileID,ye=(K=se).stride,Oe=t.create(),t.ortho(Oe,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(Oe,Oe,[0,-t.EXTENT,0]),{u_matrix:Oe,u_image:1,u_dimension:[ye,ye],u_zoom:Q.overscaledZ,u_unpack:K.getUnpackVector()}),c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function ps(l,d,c,m,E){var O=m.paint.get("raster-fade-duration");if(O>0){var F=t.browser.now(),$=(F-l.timeAdded)/O,se=d?(F-d.timeAdded)/O:-1,ge=c.getSource(),D=E.coveringZoomLevel({tileSize:ge.tileSize,roundZoom:ge.roundZoom}),M=!d||Math.abs(d.tileID.overscaledZ-D)>Math.abs(l.tileID.overscaledZ-D),x=M&&l.refreshedUponExpiration?1:t.clamp(M?$:1-se,0,1);return l.refreshedUponExpiration&&$>=1&&(l.refreshedUponExpiration=!1),d?{opacity:1,mix:1-x}:{opacity:x,mix:0}}return{opacity:1,mix:0}}var il=new t.Color(1,0,0,1),Cl=new t.Color(0,1,0,1),va=new t.Color(0,0,1,1),rl=new t.Color(1,0,1,1),Dl=new t.Color(0,1,1,1);function Ua(l,d,c,m){fs(l,0,d+c/2,l.transform.width,c,m)}function ol(l,d,c,m){fs(l,d-c/2,0,c,l.transform.height,m)}function fs(l,d,c,m,E,O){var F=l.context,$=F.gl;$.enable($.SCISSOR_TEST),$.scissor(d*t.browser.devicePixelRatio,c*t.browser.devicePixelRatio,m*t.browser.devicePixelRatio,E*t.browser.devicePixelRatio),F.clear({color:O}),$.disable($.SCISSOR_TEST)}function sl(l,d,c){var m=l.context,E=m.gl,O=c.posMatrix,F=l.useProgram("debug"),$=_e.disabled,se=Re.disabled,ge=l.colorModeForRenderPass();m.activeTexture.set(E.TEXTURE0),l.emptyTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),F.draw(m,E.LINE_STRIP,$,se,ge,Xe.disabled,ya(O,t.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var D=d.getTileByID(c.key).latestRawTileData,M=Math.floor((D&&D.byteLength||0)/1024),x=d.getTile(c).tileSize,A=512/Math.min(x,512)*(c.overscaledZ/l.transform.zoom)*.5,z=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(z+=" => "+c.overscaledZ),function(Q,K){Q.initDebugOverlayCanvas();var ye=Q.debugOverlayCanvas,Oe=Q.context.gl,et=Q.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,ye.width,ye.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(K,5,5),et.strokeText(K,5,5),Q.debugOverlayTexture.update(ye),Q.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)}(l,z+" "+M+"kb"),F.draw(m,E.TRIANGLES,$,se,Je.alphaBlended,Xe.disabled,ya(O,t.Color.transparent,A),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var aa={symbol:function(l,d,c,m,E){if("translucent"===l.renderPass){var O=Re.disabled,F=l.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function($,se,ge,D,M,x,A){for(var z=se.transform,Q="map"===M,K="map"===x,ye=0,Oe=$;ye<Oe.length;ye+=1){var et=Oe[ye],ut=D.getTile(et),ct=ut.getBucket(ge);if(ct&&ct.text&&ct.text.segments.get().length){var vt=t.evaluateSizeForZoom(ct.textSizeData,z.zoom),Ft=gi(ut,1,se.transform.zoom),rn=mr(et.posMatrix,K,Q,se.transform,Ft),Qt="none"!==ge.layout.get("icon-text-fit")&&ct.hasIconData();if(vt){var pn=Math.pow(2,z.zoom-ut.tileID.overscaledZ);el(ct,Q,K,A,t.symbolSize,z,rn,et.posMatrix,pn,vt,Qt)}}}}(m,l,c,d,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),E),0!==c.paint.get("icon-opacity").constantOr(1)&&Ks(l,d,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),O,F),0!==c.paint.get("text-opacity").constantOr(1)&&Ks(l,d,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),O,F),d.map.showCollisionBoxes&&(Ys(l,d,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Ys(l,d,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))}},circle:function(l,d,c,m){if("translucent"===l.renderPass){var E=c.paint.get("circle-opacity"),O=c.paint.get("circle-stroke-width"),F=c.paint.get("circle-stroke-opacity"),$=void 0!==c.layout.get("circle-sort-key").constantOr(1);if(0!==E.constantOr(1)||0!==O.constantOr(1)&&0!==F.constantOr(1)){for(var se=l.context,ge=se.gl,D=l.depthModeForSublayer(0,_e.ReadOnly),M=Re.disabled,x=l.colorModeForRenderPass(),A=[],z=0;z<m.length;z++){var Q=m[z],K=d.getTile(Q),ye=K.getBucket(c);if(ye){var Oe=ye.programConfigurations.get(c.id),et={programConfiguration:Oe,program:l.useProgram("circle",Oe),layoutVertexBuffer:ye.layoutVertexBuffer,indexBuffer:ye.indexBuffer,uniformValues:Fs(l,Q,K,c)};if($)for(var ut=0,ct=ye.segments.get();ut<ct.length;ut+=1){var vt=ct[ut];A.push({segments:new t.SegmentVector([vt]),sortKey:vt.sortKey,state:et})}else A.push({segments:ye.segments,sortKey:0,state:et})}}$&&A.sort(function(zn,Nn){return zn.sortKey-Nn.sortKey});for(var Ft=0,rn=A;Ft<rn.length;Ft+=1){var Qt=rn[Ft],pn=Qt.state;pn.program.draw(se,ge.TRIANGLES,D,M,x,Xe.disabled,pn.uniformValues,c.id,pn.layoutVertexBuffer,pn.indexBuffer,Qt.segments,c.paint,l.transform.zoom,pn.programConfiguration)}}}},heatmap:function(l,d,c,m){if(0!==c.paint.get("heatmap-opacity"))if("offscreen"===l.renderPass){var E=l.context,O=E.gl,F=Re.disabled,$=new Je([O.ONE,O.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(A,z,Q){var K=A.gl;A.activeTexture.set(K.TEXTURE1),A.viewport.set([0,0,z.width/4,z.height/4]);var et,ut,ct,vt,Ft,ye=Q.heatmapFbo;if(ye)K.bindTexture(K.TEXTURE_2D,ye.colorAttachment.get()),A.bindFramebuffer.set(ye.framebuffer);else{var Oe=K.createTexture();K.bindTexture(K.TEXTURE_2D,Oe),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),ct=Oe,vt=ye=Q.heatmapFbo=A.createFramebuffer(z.width/4,z.height/4,!1),(Ft=(et=A).gl).texImage2D(Ft.TEXTURE_2D,0,Ft.RGBA,(ut=z).width/4,ut.height/4,0,Ft.RGBA,et.extRenderToTextureHalfFloat?et.extTextureHalfFloat.HALF_FLOAT_OES:Ft.UNSIGNED_BYTE,null),vt.colorAttachment.set(ct)}})(E,l,c),E.clear({color:t.Color.transparent});for(var se=0;se<m.length;se++){var ge=m[se];if(!d.hasRenderableParent(ge)){var D=d.getTile(ge),M=D.getBucket(c);if(M){var x=M.programConfigurations.get(c.id);l.useProgram("heatmap",x).draw(E,O.TRIANGLES,_e.disabled,F,$,Xe.disabled,za(ge.posMatrix,D,l.transform.zoom,c.paint.get("heatmap-intensity")),c.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,c.paint,l.transform.zoom,x)}}}E.viewport.set([0,0,l.width,l.height])}else"translucent"===l.renderPass&&(l.context.setColorMode(l.colorModeForRenderPass()),function(A,z){var Q=A.context,K=Q.gl,ye=z.heatmapFbo;if(ye){Q.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ye.colorAttachment.get()),Q.activeTexture.set(K.TEXTURE1);var Oe=z.colorRampTexture;Oe||(Oe=z.colorRampTexture=new t.Texture(Q,z.colorRamp,K.RGBA)),Oe.bind(K.LINEAR,K.CLAMP_TO_EDGE),A.useProgram("heatmapTexture").draw(Q,K.TRIANGLES,_e.disabled,Re.disabled,A.colorModeForRenderPass(),Xe.disabled,function(et,ut,ct,vt){var Ft=t.create();t.ortho(Ft,0,et.width,et.height,0,0,1);var rn=et.context.gl;return{u_matrix:Ft,u_world:[rn.drawingBufferWidth,rn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ut.paint.get("heatmap-opacity")}}(A,z),z.id,A.viewportBuffer,A.quadTriangleIndexBuffer,A.viewportSegments,z.paint,A.transform.zoom)}}(l,c))},line:function(l,d,c,m){if("translucent"===l.renderPass){var E=c.paint.get("line-opacity"),O=c.paint.get("line-width");if(0!==E.constantOr(1)&&0!==O.constantOr(1))for(var F=l.depthModeForSublayer(0,_e.ReadOnly),$=l.colorModeForRenderPass(),se=c.paint.get("line-dasharray"),ge=c.paint.get("line-pattern"),D=ge.constantOr(1),M=c.paint.get("line-gradient"),x=c.getCrossfadeParameters(),A=D?"linePattern":se?"lineSDF":M?"lineGradient":"line",z=l.context,Q=z.gl,K=!0,ye=0,Oe=m;ye<Oe.length;ye+=1){var et=Oe[ye],ut=d.getTile(et);if(!D||ut.patternsLoaded()){var ct=ut.getBucket(c);if(ct){var vt=ct.programConfigurations.get(c.id),Ft=l.context.program.get(),rn=l.useProgram(A,vt),Qt=K||rn.program!==Ft,pn=ge.constantOr(null);if(pn&&ut.imageAtlas){var zn=ut.imageAtlas,Nn=zn.patternPositions[pn.to.toString()],Vn=zn.patternPositions[pn.from.toString()];Nn&&Vn&&vt.setConstantPatternPositions(Nn,Vn)}var zi=D?ne(l,ut,c,x):se?Y(l,ut,c,se,x):M?re(l,ut,c,ct.lineClipsArray.length):ds(l,ut,c);if(D)z.activeTexture.set(Q.TEXTURE0),ut.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),vt.updatePaintBuffers(x);else if(se&&(Qt||l.lineAtlas.dirty))z.activeTexture.set(Q.TEXTURE0),l.lineAtlas.bind(z);else if(M){var Mn=ct.gradients[c.id],si=Mn.texture;if(c.gradientVersion!==Mn.version){var xi=256;if(c.stepInterpolant){var ti=d.getSource().maxzoom,Xn=et.canonical.z===ti?Math.ceil(1<<l.transform.maxZoom-et.canonical.z):1;xi=t.clamp(t.nextPowerOfTwo(ct.maxLineLength/t.EXTENT*1024*Xn),256,z.maxTextureSize)}Mn.gradient=t.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:xi,image:Mn.gradient||void 0,clips:ct.lineClipsArray}),Mn.texture?Mn.texture.update(Mn.gradient):Mn.texture=new t.Texture(z,Mn.gradient,Q.RGBA),Mn.version=c.gradientVersion,si=Mn.texture}z.activeTexture.set(Q.TEXTURE0),si.bind(c.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}rn.draw(z,Q.TRIANGLES,F,l.stencilModeForClipping(et),$,Xe.disabled,zi,c.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,c.paint,l.transform.zoom,vt,ct.layoutVertexBuffer2),K=!1}}}}},fill:function(l,d,c,m){var E=c.paint.get("fill-color"),O=c.paint.get("fill-opacity");if(0!==O.constantOr(1)){var F=l.colorModeForRenderPass(),$=c.paint.get("fill-pattern"),se=l.opaquePassEnabledForLayer()&&!$.constantOr(1)&&1===E.constantOr(t.Color.transparent).a&&1===O.constantOr(0)?"opaque":"translucent";if(l.renderPass===se){var ge=l.depthModeForSublayer(1,"opaque"===l.renderPass?_e.ReadWrite:_e.ReadOnly);Va(l,d,c,m,ge,F,!1)}if("translucent"===l.renderPass&&c.paint.get("fill-antialias")){var D=l.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,_e.ReadOnly);Va(l,d,c,m,D,F,!0)}}},"fill-extrusion":function(l,d,c,m){var E=c.paint.get("fill-extrusion-opacity");if(0!==E&&"translucent"===l.renderPass){var O=new _e(l.context.gl.LEQUAL,_e.ReadWrite,l.depthRangeFor3D);if(1!==E||c.paint.get("fill-extrusion-pattern").constantOr(1))nl(l,d,c,m,O,Re.disabled,Je.disabled),nl(l,d,c,m,O,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var F=l.colorModeForRenderPass();nl(l,d,c,m,O,Re.disabled,F)}}},hillshade:function(l,d,c,m){if("offscreen"===l.renderPass||"translucent"===l.renderPass){for(var E=l.context,O=l.depthModeForSublayer(0,_e.ReadOnly),F=l.colorModeForRenderPass(),$="translucent"===l.renderPass?l.stencilConfigForOverlap(m):[{},m],se=$[0],ge=0,D=$[1];ge<D.length;ge+=1){var M=D[ge],x=d.getTile(M);x.needsHillshadePrepare&&"offscreen"===l.renderPass?Wo(l,x,c,O,Re.disabled,F):"translucent"===l.renderPass&&Bl(l,x,c,O,se[M.overscaledZ],F)}E.viewport.set([0,0,l.width,l.height])}},raster:function(l,d,c,m){if("translucent"===l.renderPass&&0!==c.paint.get("raster-opacity")&&m.length)for(var E=l.context,O=E.gl,F=d.getSource(),$=l.useProgram("raster"),se=l.colorModeForRenderPass(),ge=F instanceof Ji?[{},m]:l.stencilConfigForOverlap(m),D=ge[0],M=ge[1],x=M[M.length-1].overscaledZ,A=!l.options.moving,z=0,Q=M;z<Q.length;z+=1){var K=Q[z],ye=l.depthModeForSublayer(K.overscaledZ-x,1===c.paint.get("raster-opacity")?_e.ReadWrite:_e.ReadOnly,O.LESS),Oe=d.getTile(K),et=l.transform.calculatePosMatrix(K.toUnwrapped(),A);Oe.registerFadeDuration(c.paint.get("raster-fade-duration"));var ut=d.findLoadedParent(K,0),ct=ps(Oe,ut,d,c,l.transform),vt=void 0,Ft=void 0,rn="nearest"===c.paint.get("raster-resampling")?O.NEAREST:O.LINEAR;E.activeTexture.set(O.TEXTURE0),Oe.texture.bind(rn,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),E.activeTexture.set(O.TEXTURE1),ut?(ut.texture.bind(rn,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),vt=Math.pow(2,ut.tileID.overscaledZ-Oe.tileID.overscaledZ),Ft=[Oe.tileID.canonical.x*vt%1,Oe.tileID.canonical.y*vt%1]):Oe.texture.bind(rn,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST);var Qt=Bn(et,Ft||[0,0],vt||1,ct,c);F instanceof Ji?$.draw(E,O.TRIANGLES,ye,Re.disabled,se,Xe.disabled,Qt,c.id,F.boundsBuffer,l.quadTriangleIndexBuffer,F.boundsSegments):$.draw(E,O.TRIANGLES,ye,D[K.overscaledZ],se,Xe.disabled,Qt,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,d,c){var m=c.paint.get("background-color"),E=c.paint.get("background-opacity");if(0!==E){var O=l.context,F=O.gl,$=l.transform,se=$.tileSize,ge=c.paint.get("background-pattern");if(!l.isPatternMissing(ge)){var D=!ge&&1===m.a&&1===E&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===D){var M=Re.disabled,x=l.depthModeForSublayer(0,"opaque"===D?_e.ReadWrite:_e.ReadOnly),A=l.colorModeForRenderPass(),z=l.useProgram(ge?"backgroundPattern":"background"),Q=$.coveringTiles({tileSize:se});ge&&(O.activeTexture.set(F.TEXTURE0),l.imageManager.bind(l.context));for(var K=c.getCrossfadeParameters(),ye=0,Oe=Q;ye<Oe.length;ye+=1){var et=Oe[ye],ut=l.transform.calculatePosMatrix(et.toUnwrapped()),ct=ge?Pi(ut,E,l,ge,{tileID:et,tileSize:se},K):on(ut,E,m);z.draw(O,F.TRIANGLES,x,M,A,Xe.disabled,ct,c.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,d,c){for(var m=0;m<c.length;m++)sl(l,d,c[m])},custom:function(l,d,c){var m=l.context,E=c.implementation;if("offscreen"===l.renderPass){var O=E.prerender;O&&(l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),O.call(E,m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState())}else if("translucent"===l.renderPass){l.setCustomLayerDefaults(),m.setColorMode(l.colorModeForRenderPass()),m.setStencilMode(Re.disabled);var F="3d"===E.renderingMode?new _e(l.context.gl.LEQUAL,_e.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,_e.ReadOnly);m.setDepthMode(F),E.render(m.gl,l.transform.customLayerMatrix()),m.setDirty(),l.setBaseState(),m.bindFramebuffer.set(null)}}},Cr=function(l,d){this.context=new xe(l),this.transform=d,this._tileTextures={},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gr,this.gpuTimers={}};Cr.prototype.resize=function(l,d){if(this.width=l*t.browser.devicePixelRatio,this.height=d*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var c=0,m=this.style._order;c<m.length;c+=1)this.style._layers[m[c]].resize()},Cr.prototype.setup=function(){var l=this.context,d=new t.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(t.EXTENT,0),d.emplaceBack(0,t.EXTENT),d.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(d,jr.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var c=new t.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(t.EXTENT,0),c.emplaceBack(0,t.EXTENT),c.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=l.createVertexBuffer(c,jr.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var m=new t.StructArrayLayout4i8;m.emplaceBack(0,0,0,0),m.emplaceBack(t.EXTENT,0,t.EXTENT,0),m.emplaceBack(0,t.EXTENT,0,t.EXTENT),m.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(m,sr.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var E=new t.StructArrayLayout2i4;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(E,jr.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var O=new t.StructArrayLayout1ui2;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(O);var F=new t.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(F),this.emptyTexture=new t.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var $=this.context.gl;this.stencilClearMode=new Re({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO)},Cr.prototype.clearStencil=function(){var l=this.context,d=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var c=t.create();t.ortho(c,0,this.width,this.height,0,0,1),t.scale(c,c,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,d.TRIANGLES,_e.disabled,this.stencilClearMode,Je.disabled,Xe.disabled,ns(c),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Cr.prototype._renderTileClippingMasks=function(l,d){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&d&&d.length){this.currentStencilSource=l.source;var c=this.context,m=c.gl;this.nextStencilID+d.length>256&&this.clearStencil(),c.setColorMode(Je.disabled),c.setDepthMode(_e.disabled);var E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var O=0,F=d;O<F.length;O+=1){var $=F[O],se=this._tileClippingMaskIDs[$.key]=this.nextStencilID++;E.draw(c,m.TRIANGLES,_e.disabled,new Re({func:m.ALWAYS,mask:0},se,255,m.KEEP,m.KEEP,m.REPLACE),Je.disabled,Xe.disabled,ns($.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Cr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,d=this.context.gl;return new Re({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)},Cr.prototype.stencilModeForClipping=function(l){var d=this.context.gl;return new Re({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)},Cr.prototype.stencilConfigForOverlap=function(l){var d,c=this.context.gl,m=l.sort(function(se,ge){return ge.overscaledZ-se.overscaledZ}),E=m[m.length-1].overscaledZ,O=m[0].overscaledZ-E+1;if(O>1){this.currentStencilSource=void 0,this.nextStencilID+O>256&&this.clearStencil();for(var F={},$=0;$<O;$++)F[$+E]=new Re({func:c.GEQUAL,mask:255},$+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=O,[F,m]}return[(d={},d[E]=Re.disabled,d),m]},Cr.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new Je([l.CONSTANT_COLOR,l.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Je.unblended:Je.alphaBlended},Cr.prototype.depthModeForSublayer=function(l,d,c){if(!this.opaquePassEnabledForLayer())return _e.disabled;var m=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new _e(c||this.context.gl.LEQUAL,d,[m,m])},Cr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Cr.prototype.render=function(l,d){var c=this;this.style=l,this.options=d,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var m=this.style._order,E=this.style.sourceCaches;for(var O in E){var F=E[O];F.used&&F.prepare(this.context)}var $,se,ge={},D={},M={};for(var x in E){var A=E[x];ge[x]=A.getVisibleCoordinates(),D[x]=ge[x].slice().reverse(),M[x]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var z=0;z<m.length;z++)if(this.style._layers[m[z]].is3D()){this.opaquePassCutoff=z;break}this.renderPass="offscreen";for(var Q=0,K=m;Q<K.length;Q+=1){var ye=this.style._layers[K[Q]];if(ye.hasOffscreenPass()&&!ye.isHidden(this.transform.zoom)){var Oe=D[ye.source];("custom"===ye.type||Oe.length)&&this.renderLayer(this,E[ye.source],ye,Oe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){var et=this.style._layers[m[this.currentLayer]],ut=E[et.source],ct=ge[et.source];this._renderTileClippingMasks(et,ct),this.renderLayer(this,ut,et,ct)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){var vt=this.style._layers[m[this.currentLayer]],Ft=E[vt.source],rn=("symbol"===vt.type?M:D)[vt.source];this._renderTileClippingMasks(vt,ge[vt.source]),this.renderLayer(this,Ft,vt,rn)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Qt){Qt.source&&!Qt.isHidden(c.transform.zoom)&&(Qt.source!==(se&&se.id)&&(se=c.style.sourceCaches[Qt.source]),(!$||$.getSource().maxzoom<se.getSource().maxzoom)&&($=se))}),$&&aa.debug(this,$,$.getVisibleCoordinates())),this.options.showPadding&&function(Qt){var pn=Qt.transform.padding;Ua(Qt,Qt.transform.height-(pn.top||0),3,il),Ua(Qt,pn.bottom||0,3,Cl),ol(Qt,pn.left||0,3,va),ol(Qt,Qt.transform.width-(pn.right||0),3,rl);var Nn,Vn,zi,Mn,zn=Qt.transform.centerPoint;fs(Nn=Qt,(Vn=zn.x)-1,(zi=Qt.transform.height-zn.y)-10,2,20,Mn=Dl),fs(Nn,Vn-10,zi-1,20,2,Mn)}(this),this.context.setDefault()},Cr.prototype.renderLayer=function(l,d,c,m){c.isHidden(this.transform.zoom)||("background"===c.type||"custom"===c.type||m.length)&&(this.id=c.id,this.gpuTimingStart(c),aa[c.type](l,d,c,m,this.style.placement.variableOffsets),this.gpuTimingEnd())},Cr.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var d=this.context.extTimerQuery,c=this.gpuTimers[l.id];c||(c=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),c.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,c.query)}},Cr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},Cr.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},Cr.prototype.queryGpuTimers=function(l){var d={};for(var c in l){var m=l[c],E=this.context.extTimerQuery,O=E.getQueryObjectEXT(m.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(m.query),d[c]=O}return d},Cr.prototype.translatePosMatrix=function(l,d,c,m,E){if(!c[0]&&!c[1])return l;var O=E?"map"===m?this.transform.angle:0:"viewport"===m?-this.transform.angle:0;if(O){var F=Math.sin(O),$=Math.cos(O);c=[c[0]*$-c[1]*F,c[0]*F+c[1]*$]}var se=[E?c[0]:gi(d,c[0],this.transform.zoom),E?c[1]:gi(d,c[1],this.transform.zoom),0],ge=new Float32Array(16);return t.translate(ge,l,se),ge},Cr.prototype.saveTileTexture=function(l){var d=this._tileTextures[l.size[0]];d?d.push(l):this._tileTextures[l.size[0]]=[l]},Cr.prototype.getTileTexture=function(l){var d=this._tileTextures[l];return d&&d.length>0?d.pop():null},Cr.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var d=this.imageManager.getPattern(l.from.toString()),c=this.imageManager.getPattern(l.to.toString());return!d||!c},Cr.prototype.useProgram=function(l,d){this.cache=this.cache||{};var c=""+l+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new ko(this.context,l,Ac[l],d,Yi[l],this._showOverdrawInspector)),this.cache[c]},Cr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Cr.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},Cr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Cr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Oc=function(l,d){this.points=l,this.planes=d};Oc.fromInvProjectionMatrix=function(l,d,c){var m=Math.pow(2,c),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(F){return t.transformMat4([],F,l)}).map(function(F){return t.scale$1([],F,1/F[3]/d*m)}),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(F){var $=t.sub([],E[F[0]],E[F[1]]),se=t.sub([],E[F[2]],E[F[1]]),ge=t.normalize([],t.cross([],$,se)),D=-t.dot(ge,E[F[1]]);return ge.concat(D)});return new Oc(E,O)};var El=function(l,d){this.min=l,this.max=d,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};El.prototype.quadrant=function(l){for(var d=[l%2==0,l<2],c=t.clone$2(this.min),m=t.clone$2(this.max),E=0;E<d.length;E++)c[E]=d[E]?this.min[E]:this.center[E],m[E]=d[E]?this.center[E]:this.max[E];return m[2]=this.max[2],new El(c,m)},El.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},El.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},El.prototype.intersects=function(l){for(var d=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],c=!0,m=0;m<l.planes.length;m++){for(var E=l.planes[m],O=0,F=0;F<d.length;F++)O+=t.dot$1(E,d[F])>=0;if(0===O)return 0;O!==d.length&&(c=!1)}if(c)return 2;for(var $=0;$<3;$++){for(var se=Number.MAX_VALUE,ge=-Number.MAX_VALUE,D=0;D<l.points.length;D++){var M=l.points[D][$]-this.min[$];se=Math.min(se,M),ge=Math.max(ge,M)}if(ge<0||se>this.max[$]-this.min[$])return 0}return 1};var ba=function(l,d,c,m){if(void 0===l&&(l=0),void 0===d&&(d=0),void 0===c&&(c=0),void 0===m&&(m=0),isNaN(l)||l<0||isNaN(d)||d<0||isNaN(c)||c<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=c,this.right=m};ba.prototype.interpolate=function(l,d,c){return null!=d.top&&null!=l.top&&(this.top=t.number(l.top,d.top,c)),null!=d.bottom&&null!=l.bottom&&(this.bottom=t.number(l.bottom,d.bottom,c)),null!=d.left&&null!=l.left&&(this.left=t.number(l.left,d.left,c)),null!=d.right&&null!=l.right&&(this.right=t.number(l.right,d.right,c)),this},ba.prototype.getCenter=function(l,d){var c=t.clamp((this.left+l-this.right)/2,0,l),m=t.clamp((this.top+d-this.bottom)/2,0,d);return new t.Point(c,m)},ba.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},ba.prototype.clone=function(){return new ba(this.top,this.bottom,this.left,this.right)},ba.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ki=function(l,d,c,m,E){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===E||E,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=c??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ba,this._posMatrixCache={},this._alignedPosMatrixCache={}},yr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ki.prototype.clone=function(){var l=new ki(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},yr.minZoom.get=function(){return this._minZoom},yr.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},yr.maxZoom.get=function(){return this._maxZoom},yr.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},yr.minPitch.get=function(){return this._minPitch},yr.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},yr.maxPitch.get=function(){return this._maxPitch},yr.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},yr.renderWorldCopies.get=function(){return this._renderWorldCopies},yr.renderWorldCopies.set=function(l){void 0===l?l=!0:null===l&&(l=!1),this._renderWorldCopies=l},yr.worldSize.get=function(){return this.tileSize*this.scale},yr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},yr.size.get=function(){return new t.Point(this.width,this.height)},yr.bearing.get=function(){return-this.angle/Math.PI*180},yr.bearing.set=function(l){var d=-t.wrap(l,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},yr.pitch.get=function(){return this._pitch/Math.PI*180},yr.pitch.set=function(l){var d=t.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())},yr.fov.get=function(){return this._fov/Math.PI*180},yr.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},yr.zoom.get=function(){return this._zoom},yr.zoom.set=function(l){var d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())},yr.center.get=function(){return this._center},yr.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},yr.padding.get=function(){return this._edgeInsets.toJSON()},yr.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},yr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ki.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},ki.prototype.interpolatePadding=function(l,d,c){this._unmodified=!1,this._edgeInsets.interpolate(l,d,c),this._constrain(),this._calcMatrices()},ki.prototype.coveringZoomLevel=function(l){var d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)},ki.prototype.getVisibleUnwrappedCoordinates=function(l){var d=[new t.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var c=this.pointCoordinate(new t.Point(0,0)),m=this.pointCoordinate(new t.Point(this.width,0)),E=this.pointCoordinate(new t.Point(this.width,this.height)),O=this.pointCoordinate(new t.Point(0,this.height)),F=Math.floor(Math.min(c.x,m.x,E.x,O.x)),$=Math.floor(Math.max(c.x,m.x,E.x,O.x)),se=F-1;se<=$+1;se++)0!==se&&d.push(new t.UnwrappedTileID(se,l));return d},ki.prototype.coveringTiles=function(l){var d=this.coveringZoomLevel(l),c=d;if(void 0!==l.minzoom&&d<l.minzoom)return[];void 0!==l.maxzoom&&d>l.maxzoom&&(d=l.maxzoom);var m=t.MercatorCoordinate.fromLngLat(this.center),E=Math.pow(2,d),O=[E*m.x,E*m.y,0],F=Oc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d),$=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&($=d);var se=function(Qt){return{aabb:new El([Qt*E,0,0],[(Qt+1)*E,E,0]),zoom:0,x:0,y:0,wrap:Qt,fullyVisible:!1}},ge=[],D=[],M=d,x=l.reparseOverscaled?c:d;if(this._renderWorldCopies)for(var A=1;A<=3;A++)ge.push(se(-A)),ge.push(se(A));for(ge.push(se(0));ge.length>0;){var z=ge.pop(),Q=z.x,K=z.y,ye=z.fullyVisible;if(!ye){var Oe=z.aabb.intersects(F);if(0===Oe)continue;ye=2===Oe}var et=z.aabb.distanceX(O),ut=z.aabb.distanceY(O),ct=Math.max(Math.abs(et),Math.abs(ut));if(z.zoom===M||ct>3+(1<<M-z.zoom)-2&&z.zoom>=$)D.push({tileID:new t.OverscaledTileID(z.zoom===M?x:z.zoom,z.wrap,z.zoom,Q,K),distanceSq:t.sqrLen([O[0]-.5-Q,O[1]-.5-K])});else for(var vt=0;vt<4;vt++){var Ft=(Q<<1)+vt%2,rn=(K<<1)+(vt>>1);ge.push({aabb:z.aabb.quadrant(vt),zoom:z.zoom+1,x:Ft,y:rn,wrap:z.wrap,fullyVisible:ye})}}return D.sort(function(Qt,pn){return Qt.distanceSq-pn.distanceSq}).map(function(Qt){return Qt.tileID})},ki.prototype.resize=function(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()},yr.unmodified.get=function(){return this._unmodified},ki.prototype.zoomScale=function(l){return Math.pow(2,l)},ki.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},ki.prototype.project=function(l){var d=t.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(l.lng)*this.worldSize,t.mercatorYfromLat(d)*this.worldSize)},ki.prototype.unproject=function(l){return new t.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},yr.point.get=function(){return this.project(this.center)},ki.prototype.setLocationAtPoint=function(l,d){var c=this.pointCoordinate(d),m=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(l),O=new t.MercatorCoordinate(E.x-(c.x-m.x),E.y-(c.y-m.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())},ki.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},ki.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},ki.prototype.locationCoordinate=function(l){return t.MercatorCoordinate.fromLngLat(l)},ki.prototype.coordinateLocation=function(l){return l.toLngLat()},ki.prototype.pointCoordinate=function(l){var d=[l.x,l.y,0,1],c=[l.x,l.y,1,1];t.transformMat4(d,d,this.pixelMatrixInverse),t.transformMat4(c,c,this.pixelMatrixInverse);var m=d[3],E=c[3],O=d[1]/m,F=c[1]/E,$=d[2]/m,se=c[2]/E,ge=$===se?0:(0-$)/(se-$);return new t.MercatorCoordinate(t.number(d[0]/m,c[0]/E,ge)/this.worldSize,t.number(O,F,ge)/this.worldSize)},ki.prototype.coordinatePoint=function(l){var d=[l.x*this.worldSize,l.y*this.worldSize,0,1];return t.transformMat4(d,d,this.pixelMatrix),new t.Point(d[0]/d[3],d[1]/d[3])},ki.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},ki.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ki.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ki.prototype.calculatePosMatrix=function(l,d){void 0===d&&(d=!1);var c=l.key,m=d?this._alignedPosMatrixCache:this._posMatrixCache;if(m[c])return m[c];var E=l.canonical,O=this.worldSize/this.zoomScale(E.z),F=E.x+Math.pow(2,E.z)*l.wrap,$=t.identity(new Float64Array(16));return t.translate($,$,[F*O,E.y*O,0]),t.scale($,$,[O/t.EXTENT,O/t.EXTENT,1]),t.multiply($,d?this.alignedProjMatrix:this.projMatrix,$),m[c]=new Float32Array($),m[c]},ki.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ki.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,d,c,m,E=-90,O=90,F=-180,$=180,se=this.size,ge=this._unmodified;if(this.latRange){var D=this.latRange;E=t.mercatorYfromLat(D[1])*this.worldSize,l=(O=t.mercatorYfromLat(D[0])*this.worldSize)-E<se.y?se.y/(O-E):0}if(this.lngRange){var M=this.lngRange;F=t.mercatorXfromLng(M[0])*this.worldSize,d=($=t.mercatorXfromLng(M[1])*this.worldSize)-F<se.x?se.x/($-F):0}var x=this.point,A=Math.max(d||0,l||0);if(A)return this.center=this.unproject(new t.Point(d?($+F)/2:x.x,l?(O+E)/2:x.y)),this.zoom+=this.scaleZoom(A),this._unmodified=ge,void(this._constraining=!1);if(this.latRange){var z=x.y,Q=se.y/2;z-Q<E&&(m=E+Q),z+Q>O&&(m=O-Q)}if(this.lngRange){var K=x.x,ye=se.x/2;K-ye<F&&(c=F+ye),K+ye>$&&(c=$-ye)}void 0===c&&void 0===m||(this.center=this.unproject(new t.Point(void 0!==c?c:x.x,void 0!==m?m:x.y))),this._unmodified=ge,this._constraining=!1}},ki.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var d=Math.PI/2+this._pitch,c=this._fov*(.5+l.y/this.height),m=Math.sin(c)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-d-c,.01,Math.PI-.01)),E=this.point,O=E.x,F=E.y,$=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),se=this.height/50,ge=new Float64Array(16);t.perspective(ge,this._fov,this.width/this.height,se,$),ge[8]=2*-l.x/this.width,ge[9]=2*l.y/this.height,t.scale(ge,ge,[1,-1,1]),t.translate(ge,ge,[0,0,-this.cameraToCenterDistance]),t.rotateX(ge,ge,this._pitch),t.rotateZ(ge,ge,this.angle),t.translate(ge,ge,[-O,-F,0]),this.mercatorMatrix=t.scale([],ge,[this.worldSize,this.worldSize,this.worldSize]),t.scale(ge,ge,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ge,this.invProjMatrix=t.invert([],this.projMatrix);var D=this.width%2/2,M=this.height%2/2,x=Math.cos(this.angle),A=Math.sin(this.angle),z=O-Math.round(O)+x*D+A*M,Q=F-Math.round(F)+x*M+A*D,K=new Float64Array(ge);if(t.translate(K,K,[z>.5?z-1:z,Q>.5?Q-1:Q,0]),this.alignedProjMatrix=K,ge=t.create(),t.scale(ge,ge,[this.width/2,-this.height/2,1]),t.translate(ge,ge,[1,-1,0]),this.labelPlaneMatrix=ge,ge=t.create(),t.scale(ge,ge,[1,-1,1]),t.translate(ge,ge,[-1,-1,0]),t.scale(ge,ge,[2/this.width,2/this.height,1]),this.glCoordMatrix=ge,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ge=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ge,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ki.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new t.Point(0,0)),d=[l.x*this.worldSize,l.y*this.worldSize,0,1];return t.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance},ki.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,l))},ki.prototype.getCameraQueryGeometry=function(l){var d=this.getCameraPoint();if(1===l.length)return[l[0],d];for(var c=d.x,m=d.y,E=d.x,O=d.y,F=0,$=l;F<$.length;F+=1){var se=$[F];c=Math.min(c,se.x),m=Math.min(m,se.y),E=Math.max(E,se.x),O=Math.max(O,se.y)}return[new t.Point(c,m),new t.Point(E,m),new t.Point(E,O),new t.Point(c,O),new t.Point(c,m)]},Object.defineProperties(ki.prototype,yr);var Is=function(l){var d,c,m,E;this._hashName=l&&encodeURIComponent(l),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(d=this._updateHashUnthrottled.bind(this),c=!1,m=null,E=function(){m=null,c&&(d(),m=setTimeout(E,300),c=!1)},function(){return c=!0,m||E(),m})};Is.prototype.addTo=function(l){return this._map=l,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Is.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Is.prototype.getHashString=function(l){var d=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,m=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,m),O=Math.round(d.lng*E)/E,F=Math.round(d.lat*E)/E,$=this._map.getBearing(),se=this._map.getPitch(),ge="";if(ge+=l?"/"+O+"/"+F+"/"+c:c+"/"+F+"/"+O,($||se)&&(ge+="/"+Math.round(10*$)/10),se&&(ge+="/"+Math.round(se)),this._hashName){var D=this._hashName,M=!1,x=t.window.location.hash.slice(1).split("&").map(function(A){var z=A.split("=")[0];return z===D?(M=!0,z+"="+ge):A}).filter(function(A){return A});return M||x.push(D+"="+ge),"#"+x.join("&")}return"#"+ge},Is.prototype._getCurrentHash=function(){var l,d=this,c=t.window.location.hash.replace("#","");return this._hashName?(c.split("&").map(function(m){return m.split("=")}).forEach(function(m){m[0]===d._hashName&&(l=m)}),(l&&l[1]||"").split("/")):c.split("/")},Is.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(c){return isNaN(c)})){var d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},Is.prototype._updateHashUnthrottled=function(){var l=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,l)}catch{}};var zl={linearity:.3,easing:t.bezier(0,0,.3,1)},al=t.extend({deceleration:2500,maxSpeed:1400},zl),mc=t.extend({deceleration:20,maxSpeed:1400},zl),Nu=t.extend({deceleration:1e3,maxSpeed:360},zl),As=t.extend({deceleration:1e3,maxSpeed:90},zl),xa=function(l){this._map=l,this.clear()};function Ur(l,d){(!l.duration||l.duration<d.duration)&&(l.duration=d.duration,l.easing=d.easing)}function wa(l,d,c){var m=c.maxSpeed,E=c.linearity,O=c.deceleration,F=t.clamp(l*E/(d/1e3),-m,m),$=Math.abs(F)/(O*E);return{easing:c.easing,duration:1e3*$,amount:F*($/2)}}xa.prototype.clear=function(){this._inertiaBuffer=[]},xa.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:l})},xa.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,d=t.browser.now();l.length>0&&d-l[0].time>160;)l.shift()},xa.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var d={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},c=0,m=this._inertiaBuffer;c<m.length;c+=1){var E=m[c].settings;d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround)}var O=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,F={};if(d.pan.mag()){var $=wa(d.pan.mag(),O,t.extend({},al,l||{}));F.offset=d.pan.mult($.amount/d.pan.mag()),F.center=this._map.transform.center,Ur(F,$)}if(d.zoom){var se=wa(d.zoom,O,mc);F.zoom=this._map.transform.zoom+se.amount,Ur(F,se)}if(d.bearing){var ge=wa(d.bearing,O,Nu);F.bearing=this._map.transform.bearing+t.clamp(ge.amount,-179,179),Ur(F,ge)}if(d.pitch){var D=wa(d.pitch,O,As);F.pitch=this._map.transform.pitch+D.amount,Ur(F,D)}if(F.zoom||F.bearing){var M=void 0===d.pinchAround?d.around:d.pinchAround;F.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),t.extend(F,{noMoveStart:!0})}};var No=function(l){function d(m,E,O,F){void 0===F&&(F={});var $=te.mousePos(E.getCanvasContainer(),O),se=E.unproject($);l.call(this,m,t.extend({point:$,lngLat:se,originalEvent:O},F)),this._defaultPrevented=!1,this.target=E}l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d;var c={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,c),d}(t.Event),ho=function(l){function d(m,E,O){var F="touchend"===m?O.changedTouches:O.touches,$=te.touchPos(E.getCanvasContainer(),F),se=$.map(function(M){return E.unproject(M)}),ge=$.reduce(function(M,x,A,z){return M.add(x.div(z.length))},new t.Point(0,0)),D=E.unproject(ge);l.call(this,m,{points:$,point:ge,lngLats:se,lngLat:D,originalEvent:O}),this._defaultPrevented=!1}l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d;var c={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,c),d}(t.Event),Z=function(l){function d(m,E,O){l.call(this,m,{originalEvent:O}),this._defaultPrevented=!1}l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d;var c={defaultPrevented:{configurable:!0}};return d.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(d.prototype,c),d}(t.Event),he=function(l,d){this._map=l,this._clickTolerance=d.clickTolerance};he.prototype.reset=function(){delete this._mousedownPos},he.prototype.wheel=function(l){return this._firePreventable(new Z(l.type,this._map,l))},he.prototype.mousedown=function(l,d){return this._mousedownPos=d,this._firePreventable(new No(l.type,this._map,l))},he.prototype.mouseup=function(l){this._map.fire(new No(l.type,this._map,l))},he.prototype.click=function(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new No(l.type,this._map,l))},he.prototype.dblclick=function(l){return this._firePreventable(new No(l.type,this._map,l))},he.prototype.mouseover=function(l){this._map.fire(new No(l.type,this._map,l))},he.prototype.mouseout=function(l){this._map.fire(new No(l.type,this._map,l))},he.prototype.touchstart=function(l){return this._firePreventable(new ho(l.type,this._map,l))},he.prototype.touchmove=function(l){this._map.fire(new ho(l.type,this._map,l))},he.prototype.touchend=function(l){this._map.fire(new ho(l.type,this._map,l))},he.prototype.touchcancel=function(l){this._map.fire(new ho(l.type,this._map,l))},he.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},he.prototype.isEnabled=function(){return!0},he.prototype.isActive=function(){return!1},he.prototype.enable=function(){},he.prototype.disable=function(){};var G=function(l){this._map=l};G.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},G.prototype.mousemove=function(l){this._map.fire(new No(l.type,this._map,l))},G.prototype.mousedown=function(){this._delayContextMenu=!0},G.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new No("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},G.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new No(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},G.prototype.isEnabled=function(){return!0},G.prototype.isActive=function(){return!1},G.prototype.enable=function(){},G.prototype.disable=function(){};var be=function(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1};function We(l,d){for(var c={},m=0;m<l.length;m++)c[l[m].identifier]=d[m];return c}be.prototype.isEnabled=function(){return!!this._enabled},be.prototype.isActive=function(){return!!this._active},be.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},be.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},be.prototype.mousedown=function(l,d){this.isEnabled()&&l.shiftKey&&0===l.button&&(te.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)},be.prototype.mousemoveWindow=function(l,d){if(this._active){var c=d;if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var m=this._startPos;this._lastPos=c,this._box||(this._box=te.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var E=Math.min(m.x,c.x),O=Math.max(m.x,c.x),F=Math.min(m.y,c.y),$=Math.max(m.y,c.y);te.setTransform(this._box,"translate("+E+"px,"+F+"px)"),this._box.style.width=O-E+"px",this._box.style.height=$-F+"px"}}},be.prototype.mouseupWindow=function(l,d){var c=this;if(this._active&&0===l.button){var m=this._startPos,E=d;if(this.reset(),te.suppressClick(),m.x!==E.x||m.y!==E.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(O){return O.fitScreenCoordinates(m,E,c._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},be.prototype.keydown=function(l){this._active&&27===l.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",l))},be.prototype.blur=function(){this.reset()},be.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(te.remove(this._box),this._box=null),te.enableDrag(),delete this._startPos,delete this._lastPos},be.prototype._fireEvent=function(l,d){return this._map.fire(new t.Event(l,{originalEvent:d}))};var Tt=function(l){this.reset(),this.numTouches=l.numTouches};Tt.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Tt.prototype.touchstart=function(l,d,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=l.timeStamp),c.length===this.numTouches&&(this.centroid=function(m){for(var E=new t.Point(0,0),O=0,F=m;O<F.length;O+=1)E._add(F[O]);return E.div(m.length)}(d),this.touches=We(c,d)))},Tt.prototype.touchmove=function(l,d,c){if(!this.aborted&&this.centroid){var m=We(c,d);for(var E in this.touches){var O=m[E];(!O||O.dist(this.touches[E])>30)&&(this.aborted=!0)}}},Tt.prototype.touchend=function(l,d,c){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),0===c.length){var m=!this.aborted&&this.centroid;if(this.reset(),m)return m}};var Yt=function(l){this.singleTap=new Tt(l),this.numTaps=l.numTaps,this.reset()};Yt.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Yt.prototype.touchstart=function(l,d,c){this.singleTap.touchstart(l,d,c)},Yt.prototype.touchmove=function(l,d,c){this.singleTap.touchmove(l,d,c)},Yt.prototype.touchend=function(l,d,c){var m=this.singleTap.touchend(l,d,c);if(m){var E=l.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(m)<30;if(E&&O||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}};var Dn=function(){this._zoomIn=new Yt({numTouches:1,numTaps:2}),this._zoomOut=new Yt({numTouches:2,numTaps:1}),this.reset()};Dn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Dn.prototype.touchstart=function(l,d,c){this._zoomIn.touchstart(l,d,c),this._zoomOut.touchstart(l,d,c)},Dn.prototype.touchmove=function(l,d,c){this._zoomIn.touchmove(l,d,c),this._zoomOut.touchmove(l,d,c)},Dn.prototype.touchend=function(l,d,c){var m=this,E=this._zoomIn.touchend(l,d,c),O=this._zoomOut.touchend(l,d,c);return E?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(F){return F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(E)},{originalEvent:l})}}):O?(this._active=!0,l.preventDefault(),setTimeout(function(){return m.reset()},0),{cameraAnimation:function(F){return F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(O)},{originalEvent:l})}}):void 0},Dn.prototype.touchcancel=function(){this.reset()},Dn.prototype.enable=function(){this._enabled=!0},Dn.prototype.disable=function(){this._enabled=!1,this.reset()},Dn.prototype.isEnabled=function(){return this._enabled},Dn.prototype.isActive=function(){return this._active};var cr={0:1,2:2},Wt=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};Wt.prototype.blur=function(){this.reset()},Wt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wt.prototype._correctButton=function(l,d){return!1},Wt.prototype._move=function(l,d){return{}},Wt.prototype.mousedown=function(l,d){if(!this._lastPoint){var c=te.mouseButton(l);this._correctButton(l,c)&&(this._lastPoint=d,this._eventButton=c)}},Wt.prototype.mousemoveWindow=function(l,d){var m,O,c=this._lastPoint;if(c)if(l.preventDefault(),O=cr[this._eventButton],void 0===(m=l).buttons||(m.buttons&O)!==O)this.reset();else if(this._moved||!(d.dist(c)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(c,d)},Wt.prototype.mouseupWindow=function(l){this._lastPoint&&te.mouseButton(l)===this._eventButton&&(this._moved&&te.suppressClick(),this.reset())},Wt.prototype.enable=function(){this._enabled=!0},Wt.prototype.disable=function(){this._enabled=!1,this.reset()},Wt.prototype.isEnabled=function(){return this._enabled},Wt.prototype.isActive=function(){return this._active};var Wi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.mousedown=function(c,m){l.prototype.mousedown.call(this,c,m),this._lastPoint&&(this._active=!0)},d.prototype._correctButton=function(c,m){return 0===m&&!c.ctrlKey},d.prototype._move=function(c,m){return{around:m,panDelta:m.sub(c)}},d}(Wt),bi=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype._correctButton=function(c,m){return 0===m&&c.ctrlKey||2===m},d.prototype._move=function(c,m){var E=.8*(m.x-c.x);if(E)return this._active=!0,{bearingDelta:E}},d.prototype.contextmenu=function(c){c.preventDefault()},d}(Wt),vo=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype._correctButton=function(c,m){return 0===m&&c.ctrlKey||2===m},d.prototype._move=function(c,m){var E=-.5*(m.y-c.y);if(E)return this._active=!0,{pitchDelta:E}},d.prototype.contextmenu=function(c){c.preventDefault()},d}(Wt),Ri=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};Ri.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Ri.prototype.touchstart=function(l,d,c){return this._calculateTransform(l,d,c)},Ri.prototype.touchmove=function(l,d,c){if(this._active&&!(c.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,d,c)},Ri.prototype.touchend=function(l,d,c){this._calculateTransform(l,d,c),this._active&&c.length<this._minTouches&&this.reset()},Ri.prototype.touchcancel=function(){this.reset()},Ri.prototype._calculateTransform=function(l,d,c){c.length>0&&(this._active=!0);var m=We(c,d),E=new t.Point(0,0),O=new t.Point(0,0),F=0;for(var $ in m){var se=m[$],ge=this._touches[$];ge&&(E._add(se),O._add(se.sub(ge)),F++,m[$]=se)}if(this._touches=m,!(F<this._minTouches)&&O.mag()){var D=O.div(F);if(this._sum._add(D),!(this._sum.mag()<this._clickTolerance))return{around:E.div(F),panDelta:D}}},Ri.prototype.enable=function(){this._enabled=!0},Ri.prototype.disable=function(){this._enabled=!1,this.reset()},Ri.prototype.isEnabled=function(){return this._enabled},Ri.prototype.isActive=function(){return this._active};var nr=function(){this.reset()};function Ls(l,d,c){for(var m=0;m<l.length;m++)if(l[m].identifier===c)return d[m]}function Bs(l,d){return Math.log(l/d)/Math.LN2}nr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},nr.prototype._start=function(l){},nr.prototype._move=function(l,d,c){return{}},nr.prototype.touchstart=function(l,d,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([d[0],d[1]]))},nr.prototype.touchmove=function(l,d,c){if(this._firstTwoTouches){l.preventDefault();var m=this._firstTwoTouches,E=m[1],O=Ls(c,d,m[0]),F=Ls(c,d,E);if(O&&F){var $=this._aroundCenter?null:O.add(F).div(2);return this._move([O,F],$,l)}}},nr.prototype.touchend=function(l,d,c){if(this._firstTwoTouches){var m=this._firstTwoTouches,E=m[1],O=Ls(c,d,m[0]),F=Ls(c,d,E);O&&F||(this._active&&te.suppressClick(),this.reset())}},nr.prototype.touchcancel=function(){this.reset()},nr.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around},nr.prototype.disable=function(){this._enabled=!1,this.reset()},nr.prototype.isEnabled=function(){return this._enabled},nr.prototype.isActive=function(){return this._active};var bo=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},d.prototype._start=function(c){this._startDistance=this._distance=c[0].dist(c[1])},d.prototype._move=function(c,m){var E=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Bs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bs(this._distance,E),pinchAround:m}},d}(nr);function no(l,d){return 180*l.angleWith(d)/Math.PI}var Sr=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},d.prototype._start=function(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])},d.prototype._move=function(c,m){var E=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:no(this._vector,E),pinchAround:m}},d.prototype._isBelowThreshold=function(c){this._minDiameter=Math.min(this._minDiameter,c.mag());var m=25/(Math.PI*this._minDiameter)*360,E=no(c,this._startVector);return Math.abs(E)<m},d}(nr);function ja(l){return Math.abs(l.y)>Math.abs(l.x)}var Vl=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},d.prototype._start=function(c){this._lastPoints=c,ja(c[0].sub(c[1]))&&(this._valid=!1)},d.prototype._move=function(c,m,E){var O=c[0].sub(this._lastPoints[0]),F=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(O,F,E.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(O.y+F.y)/2*-.5}},d.prototype.gestureBeginsVertically=function(c,m,E){if(void 0!==this._valid)return this._valid;var O=c.mag()>=2,F=m.mag()>=2;if(O||F){if(!O||!F)return void 0===this._firstMove&&(this._firstMove=E),E-this._firstMove<100&&void 0;var $=c.y>0==m.y>0;return ja(c)&&ja(m)&&$}},d}(nr),Tl={panStep:100,bearingStep:15,pitchStep:10},is=function(){var l=Tl;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function zs(l){return l*(2-l)}is.prototype.blur=function(){this.reset()},is.prototype.reset=function(){this._active=!1},is.prototype.keydown=function(l){var d=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var c=0,m=0,E=0,O=0,F=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?m=-1:(l.preventDefault(),O=-1);break;case 39:l.shiftKey?m=1:(l.preventDefault(),O=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),F=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(m=0,E=0),{cameraAnimation:function($){var se=$.getZoom();$.easeTo({duration:300,easeId:"keyboardHandler",easing:zs,zoom:c?Math.round(se)+c*(l.shiftKey?2:1):se,bearing:$.getBearing()+m*d._bearingStep,pitch:$.getPitch()+E*d._pitchStep,offset:[-O*d._panStep,-F*d._panStep],center:$.getCenter()},{originalEvent:l})}}}},is.prototype.enable=function(){this._enabled=!0},is.prototype.disable=function(){this._enabled=!1,this.reset()},is.prototype.isEnabled=function(){return this._enabled},is.prototype.isActive=function(){return this._active},is.prototype.disableRotation=function(){this._rotationDisabled=!0},is.prototype.enableRotation=function(){this._rotationDisabled=!1};var _i=function(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};_i.prototype.setZoomRate=function(l){this._defaultZoomRate=l},_i.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},_i.prototype.isEnabled=function(){return!!this._enabled},_i.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},_i.prototype.isZooming=function(){return!!this._zooming},_i.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&"center"===l.around)},_i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},_i.prototype.wheel=function(l){if(this.isEnabled()){var d=l.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,c=t.browser.now(),m=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,0!==d&&d%4.000244140625==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(m*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}},_i.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},_i.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var d=te.mousePos(this._el,l);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},_i.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var d=this._map.transform;if(0!==this._delta){var c="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,m=2/(1+Math.exp(-Math.abs(this._delta*c)));this._delta<0&&0!==m&&(m=1/m);var E="number"==typeof this._targetZoom?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(E*m))),"wheel"===this._type&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var O,F="number"==typeof this._targetZoom?this._targetZoom:d.zoom,$=this._startZoom,se=this._easing,ge=!1;if("wheel"===this._type&&$&&se){var D=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),M=se(D);O=t.number($,F,M),D<1?this._frameId||(this._frameId=!0):ge=!0}else O=F,ge=!0;return this._active=!0,ge&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ge,zoomDelta:O-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},_i.prototype._smoothOutEasing=function(l){var d=t.ease;if(this._prevEase){var c=this._prevEase,m=(t.browser.now()-c.start)/c.duration,E=c.easing(m+.01)-c.easing(m),O=.27/Math.sqrt(E*E+1e-4)*.01,F=Math.sqrt(.0729-O*O);d=t.bezier(O,F,.25,1)}return this._prevEase={start:t.browser.now(),duration:l,easing:d},d},_i.prototype.blur=function(){this.reset()},_i.prototype.reset=function(){this._active=!1};var la=function(l,d){this._clickZoom=l,this._tapZoom=d};la.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},la.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},la.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},la.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ko=function(){this.reset()};Ko.prototype.reset=function(){this._active=!1},Ko.prototype.blur=function(){this.reset()},Ko.prototype.dblclick=function(l,d){return l.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(l.shiftKey?-1:1),around:c.unproject(d)},{originalEvent:l})}}},Ko.prototype.enable=function(){this._enabled=!0},Ko.prototype.disable=function(){this._enabled=!1,this.reset()},Ko.prototype.isEnabled=function(){return this._enabled},Ko.prototype.isActive=function(){return this._active};var Fo=function(){this._tap=new Yt({numTouches:1,numTaps:1}),this.reset()};Fo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Fo.prototype.touchstart=function(l,d,c){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?c.length>0&&(this._swipePoint=d[0],this._swipeTouch=c[0].identifier):this._tap.touchstart(l,d,c))},Fo.prototype.touchmove=function(l,d,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;var m=d[0],E=m.y-this._swipePoint.y;return this._swipePoint=m,l.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(l,d,c)},Fo.prototype.touchend=function(l,d,c){this._tapTime?this._swipePoint&&0===c.length&&this.reset():this._tap.touchend(l,d,c)&&(this._tapTime=l.timeStamp)},Fo.prototype.touchcancel=function(){this.reset()},Fo.prototype.enable=function(){this._enabled=!0},Fo.prototype.disable=function(){this._enabled=!1,this.reset()},Fo.prototype.isEnabled=function(){return this._enabled},Fo.prototype.isActive=function(){return this._active};var Ca=function(l,d,c){this._el=l,this._mousePan=d,this._touchPan=c};Ca.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ca.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ca.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ca.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ul=function(l,d,c){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=c};Ul.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ul.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ul.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ul.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ca=function(l,d,c,m){this._el=l,this._touchZoom=d,this._touchRotate=c,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0};ca.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ca.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ca.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ca.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ca.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ca.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jo=function(l){return l.zoom||l.drag||l.pitch||l.rotate},Pc=function(l){function d(){l.apply(this,arguments)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d}(t.Event);function Sn(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var _n=function(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xa(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),t.bindAll(["handleEvent","handleWindowEvent"],this);var c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[t.window,"blur",void 0]];for(var m=0,E=this._listeners;m<E.length;m+=1){var O=E[m],F=O[0];te.addEventListener(F,O[1],F===t.window.document?this.handleWindowEvent:this.handleEvent,O[2])}};_n.prototype.destroy=function(){for(var l=0,d=this._listeners;l<d.length;l+=1){var c=d[l],m=c[0];te.removeEventListener(m,c[1],m===t.window.document?this.handleWindowEvent:this.handleEvent,c[2])}},_n.prototype._addDefaultHandlers=function(l){var d=this._map,c=d.getCanvasContainer();this._add("mapEvent",new he(d,l));var m=d.boxZoom=new be(d,l);this._add("boxZoom",m);var E=new Dn,O=new Ko;d.doubleClickZoom=new la(O,E),this._add("tapZoom",E),this._add("clickZoom",O);var F=new Fo;this._add("tapDragZoom",F);var $=d.touchPitch=new Vl;this._add("touchPitch",$);var se=new bi(l),ge=new vo(l);d.dragRotate=new Ul(l,se,ge),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate"]);var D=new Wi(l),M=new Ri(l);d.dragPan=new Ca(c,D,M),this._add("mousePan",D),this._add("touchPan",M,["touchZoom","touchRotate"]);var x=new Sr,A=new bo;d.touchZoomRotate=new ca(c,A,x,F),this._add("touchRotate",x,["touchPan","touchZoom"]),this._add("touchZoom",A,["touchPan","touchRotate"]);var z=d.scrollZoom=new _i(d,this);this._add("scrollZoom",z,["mousePan"]);var Q=d.keyboard=new is;this._add("keyboard",Q),this._add("blockableMapEvent",new G(d));for(var K=0,ye=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];K<ye.length;K+=1){var Oe=ye[K];l.interactive&&l[Oe]&&d[Oe].enable(l[Oe])}},_n.prototype._add=function(l,d,c){this._handlers.push({handlerName:l,handler:d,allowed:c}),this._handlersById[l]=d},_n.prototype.stop=function(l){if(!this._updatingCamera){for(var d=0,c=this._handlers;d<c.length;d+=1)c[d].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},_n.prototype.isActive=function(){for(var l=0,d=this._handlers;l<d.length;l+=1)if(d[l].handler.isActive())return!0;return!1},_n.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},_n.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},_n.prototype.isMoving=function(){return Boolean(Jo(this._eventsInProgress))||this.isZooming()},_n.prototype._blockedByActive=function(l,d,c){for(var m in l)if(m!==c&&(!d||d.indexOf(m)<0))return!0;return!1},_n.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},_n.prototype._getMapTouches=function(l){for(var d=[],c=0,m=l;c<m.length;c+=1){var E=m[c];this._el.contains(E.target)&&d.push(E)}return d},_n.prototype.handleEvent=function(l,d){this._updatingCamera=!0;for(var c="renderFrame"===l.type?void 0:l,m={needsRenderFrame:!1},E={},O={},F=l.touches?this._getMapTouches(l.touches):void 0,$=F?te.touchPos(this._el,F):te.mousePos(this._el,l),se=0,ge=this._handlers;se<ge.length;se+=1){var D=ge[se],M=D.handlerName,x=D.handler,A=D.allowed;if(x.isEnabled()){var z=void 0;this._blockedByActive(O,A,M)?x.reset():x[d||l.type]&&(z=x[d||l.type](l,$,F),this.mergeHandlerResult(m,E,z,M,c),z&&z.needsRenderFrame&&this._triggerRenderFrame()),(z||x.isActive())&&(O[M]=x)}}var Q={};for(var K in this._previousActiveHandlers)O[K]||(Q[K]=c);this._previousActiveHandlers=O,(Object.keys(Q).length||Sn(m))&&(this._changes.push([m,E,Q]),this._triggerRenderFrame()),(Object.keys(O).length||Sn(m))&&this._map._stop(!0),this._updatingCamera=!1;var ye=m.cameraAnimation;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},_n.prototype.mergeHandlerResult=function(l,d,c,m,E){if(c){t.extend(l,c);var O={handlerName:m,originalEvent:c.originalEvent||E};void 0!==c.zoomDelta&&(d.zoom=O),void 0!==c.panDelta&&(d.drag=O),void 0!==c.pitchDelta&&(d.pitch=O),void 0!==c.bearingDelta&&(d.rotate=O)}},_n.prototype._applyChanges=function(){for(var l={},d={},c={},m=0,E=this._changes;m<E.length;m+=1){var O=E[m],F=O[0],$=O[1],se=O[2];F.panDelta&&(l.panDelta=(l.panDelta||new t.Point(0,0))._add(F.panDelta)),F.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+F.zoomDelta),F.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+F.bearingDelta),F.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+F.pitchDelta),void 0!==F.around&&(l.around=F.around),void 0!==F.pinchAround&&(l.pinchAround=F.pinchAround),F.noInertia&&(l.noInertia=F.noInertia),t.extend(d,$),t.extend(c,se)}this._updateMapTransform(l,d,c),this._changes=[]},_n.prototype._updateMapTransform=function(l,d,c){var m=this._map,E=m.transform;if(!Sn(l))return this._fireEvents(d,c,!0);var O=l.panDelta,F=l.zoomDelta,$=l.bearingDelta,se=l.pitchDelta,ge=l.around,D=l.pinchAround;void 0!==D&&(ge=D),m._stop(!0),ge=ge||m.transform.centerPoint;var M=E.pointLocation(O?ge.sub(O):ge);$&&(E.bearing+=$),se&&(E.pitch+=se),F&&(E.zoom+=F),E.setLocationAtPoint(M,ge),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,c,!0)},_n.prototype._fireEvents=function(l,d,c){var m=this,E=Jo(this._eventsInProgress),O=Jo(l),F={};for(var $ in l)this._eventsInProgress[$]||(F[$+"start"]=l[$].originalEvent),this._eventsInProgress[$]=l[$];for(var se in!E&&O&&this._fireEvent("movestart",O.originalEvent),F)this._fireEvent(se,F[se]);for(var ge in O&&this._fireEvent("move",O.originalEvent),l)this._fireEvent(ge,l[ge].originalEvent);var D,M={};for(var x in this._eventsInProgress){var A=this._eventsInProgress[x],z=A.handlerName,Q=A.originalEvent;this._handlersById[z].isActive()||(delete this._eventsInProgress[x],M[x+"end"]=D=d[z]||Q)}for(var K in M)this._fireEvent(K,M[K]);var ye=Jo(this._eventsInProgress);if(c&&(E||O)&&!ye){this._updatingCamera=!0;var Oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),et=function(ut){return 0!==ut&&-m._bearingSnap<ut&&ut<m._bearingSnap};Oe?(et(Oe.bearing||this._map.getBearing())&&(Oe.bearing=0),this._map.easeTo(Oe,{originalEvent:D})):(this._map.fire(new t.Event("moveend",{originalEvent:D})),et(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},_n.prototype._fireEvent=function(l,d){this._map.fire(new t.Event(l,d?{originalEvent:d}:{}))},_n.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(d){delete l._frameId,l.handleEvent(new Pc("renderFrame",{timeStamp:d})),l._applyChanges()})},_n.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var ec=function(l){function d(c,m){l.call(this),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=m.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},d.prototype.setCenter=function(c,m){return this.jumpTo({center:c},m)},d.prototype.panBy=function(c,m,E){return c=t.Point.convert(c).mult(-1),this.panTo(this.transform.center,t.extend({offset:c},m),E)},d.prototype.panTo=function(c,m,E){return this.easeTo(t.extend({center:c},m),E)},d.prototype.getZoom=function(){return this.transform.zoom},d.prototype.setZoom=function(c,m){return this.jumpTo({zoom:c},m),this},d.prototype.zoomTo=function(c,m,E){return this.easeTo(t.extend({zoom:c},m),E)},d.prototype.zoomIn=function(c,m){return this.zoomTo(this.getZoom()+1,c,m),this},d.prototype.zoomOut=function(c,m){return this.zoomTo(this.getZoom()-1,c,m),this},d.prototype.getBearing=function(){return this.transform.bearing},d.prototype.setBearing=function(c,m){return this.jumpTo({bearing:c},m),this},d.prototype.getPadding=function(){return this.transform.padding},d.prototype.setPadding=function(c,m){return this.jumpTo({padding:c},m),this},d.prototype.rotateTo=function(c,m,E){return this.easeTo(t.extend({bearing:c},m),E)},d.prototype.resetNorth=function(c,m){return this.rotateTo(0,t.extend({duration:1e3},c),m),this},d.prototype.resetNorthPitch=function(c,m){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},c),m),this},d.prototype.snapToNorth=function(c,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,m):this},d.prototype.getPitch=function(){return this.transform.pitch},d.prototype.setPitch=function(c,m){return this.jumpTo({pitch:c},m),this},d.prototype.cameraForBounds=function(c,m){c=t.LngLatBounds.convert(c);var E=m&&m.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),E,m)},d.prototype._cameraForBoxAndBearing=function(c,m,E,O){var F={top:0,bottom:0,right:0,left:0};if("number"==typeof(O=t.extend({padding:F,offset:[0,0],maxZoom:this.transform.maxZoom},O)).padding){var $=O.padding;O.padding={top:$,bottom:$,right:$,left:$}}O.padding=t.extend(F,O.padding);var se=this.transform,ge=se.padding,D=se.project(t.LngLat.convert(c)),M=se.project(t.LngLat.convert(m)),x=D.rotate(-E*Math.PI/180),A=M.rotate(-E*Math.PI/180),z=new t.Point(Math.max(x.x,A.x),Math.max(x.y,A.y)),Q=new t.Point(Math.min(x.x,A.x),Math.min(x.y,A.y)),K=z.sub(Q),ye=(se.width-(ge.left+ge.right+O.padding.left+O.padding.right))/K.x,Oe=(se.height-(ge.top+ge.bottom+O.padding.top+O.padding.bottom))/K.y;if(!(Oe<0||ye<0)){var et=Math.min(se.scaleZoom(se.scale*Math.min(ye,Oe)),O.maxZoom),ut="number"==typeof O.offset.x?new t.Point(O.offset.x,O.offset.y):t.Point.convert(O.offset),ct=new t.Point((O.padding.left-O.padding.right)/2,(O.padding.top-O.padding.bottom)/2).rotate(E*Math.PI/180),vt=ut.add(ct).mult(se.scale/se.zoomScale(et));return{center:se.unproject(D.add(M).div(2).sub(vt)),zoom:et,bearing:E}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},d.prototype.fitBounds=function(c,m,E){return this._fitInternal(this.cameraForBounds(c,m),m,E)},d.prototype.fitScreenCoordinates=function(c,m,E,O,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(c)),this.transform.pointLocation(t.Point.convert(m)),E,O),O,F)},d.prototype._fitInternal=function(c,m,E){return c?(delete(m=t.extend(c,m)).padding,m.linear?this.easeTo(m,E):this.flyTo(m,E)):this},d.prototype.jumpTo=function(c,m){this.stop();var E=this.transform,O=!1,F=!1,$=!1;return"zoom"in c&&E.zoom!==+c.zoom&&(O=!0,E.zoom=+c.zoom),void 0!==c.center&&(E.center=t.LngLat.convert(c.center)),"bearing"in c&&E.bearing!==+c.bearing&&(F=!0,E.bearing=+c.bearing),"pitch"in c&&E.pitch!==+c.pitch&&($=!0,E.pitch=+c.pitch),null==c.padding||E.isPaddingEqual(c.padding)||(E.padding=c.padding),this.fire(new t.Event("movestart",m)).fire(new t.Event("move",m)),O&&this.fire(new t.Event("zoomstart",m)).fire(new t.Event("zoom",m)).fire(new t.Event("zoomend",m)),F&&this.fire(new t.Event("rotatestart",m)).fire(new t.Event("rotate",m)).fire(new t.Event("rotateend",m)),$&&this.fire(new t.Event("pitchstart",m)).fire(new t.Event("pitch",m)).fire(new t.Event("pitchend",m)),this.fire(new t.Event("moveend",m))},d.prototype.easeTo=function(c,m){var E=this;this._stop(!1,c.easeId),(!1===(c=t.extend({offset:[0,0],duration:500,easing:t.ease},c)).animate||!c.essential&&t.browser.prefersReducedMotion)&&(c.duration=0);var O=this.transform,F=this.getZoom(),$=this.getBearing(),se=this.getPitch(),ge=this.getPadding(),D="zoom"in c?+c.zoom:F,M="bearing"in c?this._normalizeBearing(c.bearing,$):$,x="pitch"in c?+c.pitch:se,A="padding"in c?c.padding:O.padding,z=t.Point.convert(c.offset),Q=O.centerPoint.add(z),K=O.pointLocation(Q),ye=t.LngLat.convert(c.center||K);this._normalizeCenter(ye);var Oe,et,ut=O.project(K),ct=O.project(ye).sub(ut),vt=O.zoomScale(D-F);c.around&&(Oe=t.LngLat.convert(c.around),et=O.locationPoint(Oe));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||D!==F,this._rotating=this._rotating||$!==M,this._pitching=this._pitching||x!==se,this._padding=!O.isPaddingEqual(A),this._easeId=c.easeId,this._prepareEase(m,c.noMoveStart,Ft),this._ease(function(rn){if(E._zooming&&(O.zoom=t.number(F,D,rn)),E._rotating&&(O.bearing=t.number($,M,rn)),E._pitching&&(O.pitch=t.number(se,x,rn)),E._padding&&(O.interpolatePadding(ge,A,rn),Q=O.centerPoint.add(z)),Oe)O.setLocationAtPoint(Oe,et);else{var Qt=O.zoomScale(O.zoom-F),pn=D>F?Math.min(2,vt):Math.max(.5,vt),zn=Math.pow(pn,1-rn),Nn=O.unproject(ut.add(ct.mult(rn*zn)).mult(Qt));O.setLocationAtPoint(O.renderWorldCopies?Nn.wrap():Nn,Q)}E._fireMoveEvents(m)},function(rn){E._afterEase(m,rn)},c),this},d.prototype._prepareEase=function(c,m,E){void 0===E&&(E={}),this._moving=!0,m||E.moving||this.fire(new t.Event("movestart",c)),this._zooming&&!E.zooming&&this.fire(new t.Event("zoomstart",c)),this._rotating&&!E.rotating&&this.fire(new t.Event("rotatestart",c)),this._pitching&&!E.pitching&&this.fire(new t.Event("pitchstart",c))},d.prototype._fireMoveEvents=function(c){this.fire(new t.Event("move",c)),this._zooming&&this.fire(new t.Event("zoom",c)),this._rotating&&this.fire(new t.Event("rotate",c)),this._pitching&&this.fire(new t.Event("pitch",c))},d.prototype._afterEase=function(c,m){if(!this._easeId||!m||this._easeId!==m){delete this._easeId;var E=this._zooming,O=this._rotating,F=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,E&&this.fire(new t.Event("zoomend",c)),O&&this.fire(new t.Event("rotateend",c)),F&&this.fire(new t.Event("pitchend",c)),this.fire(new t.Event("moveend",c))}},d.prototype.flyTo=function(c,m){var E=this;if(!c.essential&&t.browser.prefersReducedMotion){var O=t.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(O,m)}this.stop(),c=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},c);var F=this.transform,$=this.getZoom(),se=this.getBearing(),ge=this.getPitch(),D=this.getPadding(),M="zoom"in c?t.clamp(+c.zoom,F.minZoom,F.maxZoom):$,x="bearing"in c?this._normalizeBearing(c.bearing,se):se,A="pitch"in c?+c.pitch:ge,z="padding"in c?c.padding:F.padding,Q=F.zoomScale(M-$),K=t.Point.convert(c.offset),ye=F.centerPoint.add(K),Oe=F.pointLocation(ye),et=t.LngLat.convert(c.center||Oe);this._normalizeCenter(et);var ut=F.project(Oe),ct=F.project(et).sub(ut),vt=c.curve,Ft=Math.max(F.width,F.height),rn=Ft/Q,Qt=ct.mag();if("minZoom"in c){var pn=t.clamp(Math.min(c.minZoom,$,M),F.minZoom,F.maxZoom),zn=Ft/F.zoomScale(pn-$);vt=Math.sqrt(zn/Qt*2)}var Nn=vt*vt;function Vn(Wn){var Jn=(rn*rn-Ft*Ft+(Wn?-1:1)*Nn*Nn*Qt*Qt)/(2*(Wn?rn:Ft)*Nn*Qt);return Math.log(Math.sqrt(Jn*Jn+1)-Jn)}function zi(Wn){return(Math.exp(Wn)-Math.exp(-Wn))/2}function Mn(Wn){return(Math.exp(Wn)+Math.exp(-Wn))/2}var si=Vn(0),xi=function(Wn){return Mn(si)/Mn(si+vt*Wn)},ti=function(Wn){return Ft*((Mn(si)*(zi(Jn=si+vt*Wn)/Mn(Jn))-zi(si))/Nn)/Qt;var Jn},Xn=(Vn(1)-si)/vt;if(Math.abs(Qt)<1e-6||!isFinite(Xn)){if(Math.abs(Ft-rn)<1e-6)return this.easeTo(c,m);var ai=rn<Ft?-1:1;Xn=Math.abs(Math.log(rn/Ft))/vt,ti=function(){return 0},xi=function(Wn){return Math.exp(ai*vt*Wn)}}return c.duration="duration"in c?+c.duration:1e3*Xn/("screenSpeed"in c?+c.screenSpeed/vt:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=se!==x,this._pitching=A!==ge,this._padding=!F.isPaddingEqual(z),this._prepareEase(m,!1),this._ease(function(Wn){var Jn=Wn*Xn,Co=1/xi(Jn);F.zoom=1===Wn?M:$+F.scaleZoom(Co),E._rotating&&(F.bearing=t.number(se,x,Wn)),E._pitching&&(F.pitch=t.number(ge,A,Wn)),E._padding&&(F.interpolatePadding(D,z,Wn),ye=F.centerPoint.add(K));var io=1===Wn?et:F.unproject(ut.add(ct.mult(ti(Jn))).mult(Co));F.setLocationAtPoint(F.renderWorldCopies?io.wrap():io,ye),E._fireMoveEvents(m)},function(){return E._afterEase(m)},c),this},d.prototype.isEasing=function(){return!!this._easeFrameId},d.prototype.stop=function(){return this._stop()},d.prototype._stop=function(c,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,m)}if(!c){var O=this.handlers;O&&O.stop(!1)}return this},d.prototype._ease=function(c,m,E){!1===E.animate||0===E.duration?(c(1),m()):(this._easeStart=t.browser.now(),this._easeOptions=E,this._onEaseFrame=c,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},d.prototype._renderFrameCallback=function(){var c=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},d.prototype._normalizeBearing=function(c,m){c=t.wrap(c,-180,180);var E=Math.abs(c-m);return Math.abs(c-360-m)<E&&(c-=360),Math.abs(c+360-m)<E&&(c+=360),c},d.prototype._normalizeCenter=function(c){var m=this.transform;if(m.renderWorldCopies&&!m.lngRange){var E=c.lng-m.center.lng;c.lng+=E>180?-360:E<-180?360:0}},d}(t.Evented),xo=function(l){void 0===l&&(l={}),this.options=l,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xo.prototype.getDefaultPosition=function(){return"bottom-right"},xo.prototype.onAdd=function(l){var d=this.options&&this.options.compact;return this._map=l,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=te.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=te.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xo.prototype.onRemove=function(){te.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xo.prototype._setElementTitle=function(l,d){var c=this._map._getUIString("AttributionControl."+d);l.title=c,l.setAttribute("aria-label",c)},xo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xo.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(l){var c=d.reduce(function(m,E,O){return E.value&&(m+=E.key+"="+E.value+(O<d.length-1?"&":"")),m},"?");l.href=t.config.FEEDBACK_URL+"/"+c+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},xo.prototype._updateData=function(l){!l||"metadata"!==l.sourceDataType&&"visibility"!==l.sourceDataType&&"style"!==l.dataType||(this._updateAttributions(),this._updateEditLink())},xo.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function($){return"string"!=typeof $?"":$})):"string"==typeof this.options.customAttribution&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}var c=this._map.style.sourceCaches;for(var m in c){var E=c[m];if(E.used){var O=E.getSource();O.attribution&&l.indexOf(O.attribution)<0&&l.push(O.attribution)}}l.sort(function($,se){return $.length-se.length});var F=(l=l.filter(function($,se){for(var ge=se+1;ge<l.length;ge++)if(l[ge].indexOf($)>=0)return!1;return!0})).join(" | ");F!==this._attribHTML&&(this._attribHTML=F,l.length?(this._innerContainer.innerHTML=F,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Js=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Js.prototype.onAdd=function(l){this._map=l,this._container=te.create("div","mapboxgl-ctrl");var d=te.create("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Js.prototype.onRemove=function(){te.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Js.prototype.getDefaultPosition=function(){return"bottom-left"},Js.prototype._updateLogo=function(l){l&&"metadata"!==l.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Js.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var d in l)if(l[d].getSource().mapbox_logo)return!0;return!1}},Js.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}};var Ho=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ho.prototype.add=function(l){var d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d},Ho.prototype.remove=function(l){for(var d=this._currentlyRunning,c=0,m=d?this._queue.concat(d):this._queue;c<m.length;c+=1){var E=m[c];if(E.id===l)return void(E.cancelled=!0)}},Ho.prototype.run=function(l){void 0===l&&(l=0);var d=this._currentlyRunning=this._queue;this._queue=[];for(var c=0,m=d;c<m.length;c+=1){var E=m[c];if(!E.cancelled&&(E.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ho.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ua={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},jl=t.window.HTMLImageElement,gc=t.window.HTMLElement,ur=t.window.ImageBitmap,wo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Zc=function(l){function d(m){var E=this;if(null!=(m=t.extend({},wo,m)).minZoom&&null!=m.maxZoom&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=m.minPitch&&null!=m.maxPitch&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=m.minPitch&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=m.maxPitch&&m.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var O=new ki(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies);if(l.call(this,O,m),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new Ho,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ua,m.locale),this._clickTolerance=m.clickTolerance,this._requestManager=new t.RequestManager(m.transformRequest,m.accessToken),"string"==typeof m.container){if(this._container=t.window.document.getElementById(m.container),!this._container)throw new Error("Container '"+m.container+"' not found.")}else{if(!(m.container instanceof gc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return E._update(!1)}),this.on("moveend",function(){return E._update(!1)}),this.on("zoom",function(){return E._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new _n(this,m),this._hash=m.hash&&new Is("string"==typeof m.hash&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,t.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new xo({customAttribution:m.customAttribution})),this.addControl(new Js,m.logoPosition),this.on("style.load",function(){E.transform.unmodified&&E.jumpTo(E.style.stylesheet)}),this.on("data",function(F){E._update("style"===F.dataType),E.fire(new t.Event(F.dataType+"data",F))}),this.on("dataloading",function(F){E.fire(new t.Event(F.dataType+"dataloading",F))})}l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d;var c={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return d.prototype._getMapId=function(){return this._mapId},d.prototype.addControl=function(m,E){if(void 0===E&&(E=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var O=m.onAdd(this);this._controls.push(m);var F=this._controlPositions[E];return-1!==E.indexOf("bottom")?F.insertBefore(O,F.firstChild):F.appendChild(O),this},d.prototype.removeControl=function(m){if(!m||!m.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var E=this._controls.indexOf(m);return E>-1&&this._controls.splice(E,1),m.onRemove(this),this},d.prototype.hasControl=function(m){return this._controls.indexOf(m)>-1},d.prototype.resize=function(m){var E=this._containerDimensions(),O=E[0],F=E[1];if(O===this.transform.width&&F===this.transform.height)return this;this._resizeCanvas(O,F),this.transform.resize(O,F),this.painter.resize(O,F);var $=!this._moving;return $&&this.fire(new t.Event("movestart",m)).fire(new t.Event("move",m)),this.fire(new t.Event("resize",m)),$&&this.fire(new t.Event("moveend",m)),this},d.prototype.getBounds=function(){return this.transform.getBounds()},d.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},d.prototype.setMaxBounds=function(m){return this.transform.setMaxBounds(t.LngLatBounds.convert(m)),this._update()},d.prototype.setMinZoom=function(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},d.prototype.getMinZoom=function(){return this.transform.minZoom},d.prototype.setMaxZoom=function(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")},d.prototype.getMaxZoom=function(){return this.transform.maxZoom},d.prototype.setMinPitch=function(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},d.prototype.getMinPitch=function(){return this.transform.minPitch},d.prototype.setMaxPitch=function(m){if((m=m??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")},d.prototype.getMaxPitch=function(){return this.transform.maxPitch},d.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},d.prototype.setRenderWorldCopies=function(m){return this.transform.renderWorldCopies=m,this._update()},d.prototype.project=function(m){return this.transform.locationPoint(t.LngLat.convert(m))},d.prototype.unproject=function(m){return this.transform.pointLocation(t.Point.convert(m))},d.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},d.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},d.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},d.prototype._createDelegatedListener=function(m,E,O){var F,$=this;if("mouseenter"===m||"mouseover"===m){var se=!1;return{layer:E,listener:O,delegates:{mousemove:function(D){var M=$.getLayer(E)?$.queryRenderedFeatures(D.point,{layers:[E]}):[];M.length?se||(se=!0,O.call($,new No(m,$,D.originalEvent,{features:M}))):se=!1},mouseout:function(){se=!1}}}}if("mouseleave"===m||"mouseout"===m){var ge=!1;return{layer:E,listener:O,delegates:{mousemove:function(D){($.getLayer(E)?$.queryRenderedFeatures(D.point,{layers:[E]}):[]).length?ge=!0:ge&&(ge=!1,O.call($,new No(m,$,D.originalEvent)))},mouseout:function(D){ge&&(ge=!1,O.call($,new No(m,$,D.originalEvent)))}}}}return{layer:E,listener:O,delegates:(F={},F[m]=function(D){var M=$.getLayer(E)?$.queryRenderedFeatures(D.point,{layers:[E]}):[];M.length&&(D.features=M,O.call($,D),delete D.features)},F)}},d.prototype.on=function(m,E,O){if(void 0===O)return l.prototype.on.call(this,m,E);var F=this._createDelegatedListener(m,E,O);for(var $ in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(F),F.delegates)this.on($,F.delegates[$]);return this},d.prototype.once=function(m,E,O){if(void 0===O)return l.prototype.once.call(this,m,E);var F=this._createDelegatedListener(m,E,O);for(var $ in F.delegates)this.once($,F.delegates[$]);return this},d.prototype.off=function(m,E,O){var F=this;return void 0===O?l.prototype.off.call(this,m,E):(this._delegatedListeners&&this._delegatedListeners[m]&&function($){for(var se=$[m],ge=0;ge<se.length;ge++){var D=se[ge];if(D.layer===E&&D.listener===O){for(var M in D.delegates)F.off(M,D.delegates[M]);return se.splice(ge,1),F}}}(this._delegatedListeners),this)},d.prototype.queryRenderedFeatures=function(m,E){if(!this.style)return[];var O;if(void 0!==E||void 0===m||m instanceof t.Point||Array.isArray(m)||(E=m,m=void 0),E=E||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof m[0])O=[t.Point.convert(m)];else{var F=t.Point.convert(m[0]),$=t.Point.convert(m[1]);O=[F,new t.Point($.x,F.y),$,new t.Point(F.x,$.y),F]}return this.style.queryRenderedFeatures(O,E,this.transform)},d.prototype.querySourceFeatures=function(m,E){return this.style.querySourceFeatures(m,E)},d.prototype.setStyle=function(m,E){return!1!==(E=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},E)).diff&&E.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,E),this):(this._localIdeographFontFamily=E.localIdeographFontFamily,this._updateStyle(m,E))},d.prototype._getUIString=function(m){var E=this._locale[m];if(null==E)throw new Error("Missing UI string '"+m+"'");return E},d.prototype._updateStyle=function(m,E){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Oo(this,E||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof m?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)},d.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Oo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},d.prototype._diffStyle=function(m,E){var O=this;if("string"==typeof m){var F=this._requestManager.normalizeStyleURL(m),$=this._requestManager.transformRequest(F,t.ResourceType.Style);t.getJSON($,function(se,ge){se?O.fire(new t.ErrorEvent(se)):ge&&O._updateDiff(ge,E)})}else"object"==typeof m&&this._updateDiff(m,E)},d.prototype._updateDiff=function(m,E){try{this.style.setState(m)&&this._update(!0)}catch(O){t.warnOnce("Unable to perform style diff: "+(O.message||O.error||O)+".  Rebuilding the style from scratch."),this._updateStyle(m,E)}},d.prototype.getStyle=function(){if(this.style)return this.style.serialize()},d.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},d.prototype.addSource=function(m,E){return this._lazyInitEmptyStyle(),this.style.addSource(m,E),this._update(!0)},d.prototype.isSourceLoaded=function(m){var E=this.style&&this.style.sourceCaches[m];if(void 0!==E)return E.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+m+"'")))},d.prototype.areTilesLoaded=function(){var m=this.style&&this.style.sourceCaches;for(var E in m){var O=m[E]._tiles;for(var F in O){var $=O[F];if("loaded"!==$.state&&"errored"!==$.state)return!1}}return!0},d.prototype.addSourceType=function(m,E,O){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,E,O)},d.prototype.removeSource=function(m){return this.style.removeSource(m),this._update(!0)},d.prototype.getSource=function(m){return this.style.getSource(m)},d.prototype.addImage=function(m,E,O){void 0===O&&(O={});var F=O.pixelRatio;void 0===F&&(F=1);var $=O.sdf;void 0===$&&($=!1);var se=O.stretchX,ge=O.stretchY,D=O.content;if(this._lazyInitEmptyStyle(),E instanceof jl||ur&&E instanceof ur){var M=t.browser.getImageData(E);this.style.addImage(m,{data:new t.RGBAImage({width:M.width,height:M.height},M.data),pixelRatio:F,stretchX:se,stretchY:ge,content:D,sdf:$,version:0})}else{if(void 0===E.width||void 0===E.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var x=E;this.style.addImage(m,{data:new t.RGBAImage({width:E.width,height:E.height},new Uint8Array(E.data)),pixelRatio:F,stretchX:se,stretchY:ge,content:D,sdf:$,version:0,userImage:x}),x.onAdd&&x.onAdd(this,m)}},d.prototype.updateImage=function(m,E){var O=this.style.getImage(m);if(!O)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var F=E instanceof jl||ur&&E instanceof ur?t.browser.getImageData(E):E,$=F.width,se=F.height,ge=F.data;return void 0===$||void 0===se?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):$!==O.data.width||se!==O.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(O.data.replace(ge,!(E instanceof jl||ur&&E instanceof ur)),void this.style.updateImage(m,O))},d.prototype.hasImage=function(m){return m?!!this.style.getImage(m):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},d.prototype.removeImage=function(m){this.style.removeImage(m)},d.prototype.loadImage=function(m,E){t.getImage(this._requestManager.transformRequest(m,t.ResourceType.Image),E)},d.prototype.listImages=function(){return this.style.listImages()},d.prototype.addLayer=function(m,E){return this._lazyInitEmptyStyle(),this.style.addLayer(m,E),this._update(!0)},d.prototype.moveLayer=function(m,E){return this.style.moveLayer(m,E),this._update(!0)},d.prototype.removeLayer=function(m){return this.style.removeLayer(m),this._update(!0)},d.prototype.getLayer=function(m){return this.style.getLayer(m)},d.prototype.setLayerZoomRange=function(m,E,O){return this.style.setLayerZoomRange(m,E,O),this._update(!0)},d.prototype.setFilter=function(m,E,O){return void 0===O&&(O={}),this.style.setFilter(m,E,O),this._update(!0)},d.prototype.getFilter=function(m){return this.style.getFilter(m)},d.prototype.setPaintProperty=function(m,E,O,F){return void 0===F&&(F={}),this.style.setPaintProperty(m,E,O,F),this._update(!0)},d.prototype.getPaintProperty=function(m,E){return this.style.getPaintProperty(m,E)},d.prototype.setLayoutProperty=function(m,E,O,F){return void 0===F&&(F={}),this.style.setLayoutProperty(m,E,O,F),this._update(!0)},d.prototype.getLayoutProperty=function(m,E){return this.style.getLayoutProperty(m,E)},d.prototype.setLight=function(m,E){return void 0===E&&(E={}),this._lazyInitEmptyStyle(),this.style.setLight(m,E),this._update(!0)},d.prototype.getLight=function(){return this.style.getLight()},d.prototype.setFeatureState=function(m,E){return this.style.setFeatureState(m,E),this._update()},d.prototype.removeFeatureState=function(m,E){return this.style.removeFeatureState(m,E),this._update()},d.prototype.getFeatureState=function(m){return this.style.getFeatureState(m)},d.prototype.getContainer=function(){return this._container},d.prototype.getCanvasContainer=function(){return this._canvasContainer},d.prototype.getCanvas=function(){return this._canvas},d.prototype._containerDimensions=function(){var m=0,E=0;return this._container&&(m=this._container.clientWidth||400,E=this._container.clientHeight||300),[m,E]},d.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},d.prototype._setupContainer=function(){var m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=te.create("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();var E=this._canvasContainer=te.create("div","mapboxgl-canvas-container",m);this._interactive&&E.classList.add("mapboxgl-interactive"),this._canvas=te.create("canvas","mapboxgl-canvas",E),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var O=this._containerDimensions();this._resizeCanvas(O[0],O[1]);var F=this._controlContainer=te.create("div","mapboxgl-control-container",m),$=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(se){$[se]=te.create("div","mapboxgl-ctrl-"+se,F)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},d.prototype._resizeCanvas=function(m,E){var O=t.browser.devicePixelRatio||1;this._canvas.width=O*m,this._canvas.height=O*E,this._canvas.style.width=m+"px",this._canvas.style.height=E+"px"},d.prototype._setupPainter=function(){var m=t.extend({},ie.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),E=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);E?(this.painter=new Cr(E,this.transform),t.webpSupported.testSupport(E)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},d.prototype._contextLost=function(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:m}))},d.prototype._contextRestored=function(m){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:m}))},d.prototype._onMapScroll=function(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},d.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},d.prototype._update=function(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this},d.prototype._requestRenderFrame=function(m){return this._update(),this._renderTaskQueue.add(m)},d.prototype._cancelRenderFrame=function(m){this._renderTaskQueue.remove(m)},d.prototype._render=function(m){var E,O=this,F=0,$=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(E=$.createQueryEXT(),$.beginQueryEXT($.TIME_ELAPSED_EXT,E),F=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),!this._removed){var se=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ge=this.transform.zoom,D=t.browser.now();this.style.zoomHistory.update(ge,D);var M=new t.EvaluationParameters(ge,{now:D,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),x=M.crossFadingFactor();1===x&&x===this._crossFadingFactor||(se=!0,this._crossFadingFactor=x),this.style.update(M)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||se)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var A=t.browser.now()-F;$.endQueryEXT($.TIME_ELAPSED_EXT,E),setTimeout(function(){var K=$.getQueryObjectEXT(E,$.QUERY_RESULT_EXT)/1e6;$.deleteQueryEXT(E),O.fire(new t.Event("gpu-timing-frame",{cpuTime:A,gpuTime:K}))},50)}if(this.listens("gpu-timing-layer")){var z=this.painter.collectGpuTimers();setTimeout(function(){var K=O.painter.queryGpuTimers(z);O.fire(new t.Event("gpu-timing-layer",{layerTimes:K}))},50)}var Q=this._sourcesDirty||this._styleDirty||this._placementDirty;return Q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0),this}},d.prototype.remove=function(){this._hash&&this._hash.remove();for(var m=0,E=this._controls;m<E.length;m+=1)E[m].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var O=this.painter.context.gl.getExtension("WEBGL_lose_context");O&&O.loseContext(),Da(this._canvasContainer),Da(this._controlContainer),Da(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},d.prototype.triggerRepaint=function(){var m=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(E){m._frame=null,m._render(E)}))},d.prototype._onWindowOnline=function(){this._update()},d.prototype._onWindowResize=function(m){this._trackResize&&this.resize({originalEvent:m})._update()},c.showTileBoundaries.get=function(){return!!this._showTileBoundaries},c.showTileBoundaries.set=function(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())},c.showPadding.get=function(){return!!this._showPadding},c.showPadding.set=function(m){this._showPadding!==m&&(this._showPadding=m,this._update())},c.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},c.showCollisionBoxes.set=function(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())},c.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},c.showOverdrawInspector.set=function(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())},c.repaint.get=function(){return!!this._repaint},c.repaint.set=function(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())},c.vertices.get=function(){return!!this._vertices},c.vertices.set=function(m){this._vertices=m,this._update()},d.prototype._setCacheLimits=function(m,E){t.setCacheLimits(m,E)},c.version.get=function(){return t.version},Object.defineProperties(d.prototype,c),d}(ec);function Da(l){l.parentNode&&l.parentNode.removeChild(l)}var kc={showCompass:!0,showZoom:!0,visualizePitch:!1},Os=function(l){var d=this;this.options=t.extend({},kc,l),this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(c){return c.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(c){return d._map.zoomIn({},{originalEvent:c})}),te.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(c){return d._map.zoomOut({},{originalEvent:c})}),te.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(c){d.options.visualizePitch?d._map.resetNorthPitch({},{originalEvent:c}):d._map.resetNorth({},{originalEvent:c})}),this._compassIcon=te.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Os.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),d=l===this._map.getMaxZoom(),c=l===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},Os.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},Os.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gr(this._map,this._compass,this.options.visualizePitch)),this._container},Os.prototype.onRemove=function(){te.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Os.prototype._createButton=function(l,d){var c=te.create("button",l,this._container);return c.type="button",c.addEventListener("click",d),c},Os.prototype._setButtonTitle=function(l,d){var c=this._map._getUIString("NavigationControl."+d);l.title=c,l.setAttribute("aria-label",c)};var Gr=function(l,d,c){void 0===c&&(c=!1),this._clickTolerance=10,this.element=d,this.mouseRotate=new bi({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,c&&(this.mousePitch=new vo({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),te.addEventListener(d,"mousedown",this.mousedown),te.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),te.addEventListener(d,"touchmove",this.touchmove),te.addEventListener(d,"touchend",this.touchend),te.addEventListener(d,"touchcancel",this.reset)};function ll(l,d,c){if(l=new t.LngLat(l.lng,l.lat),d){var m=new t.LngLat(l.lng-360,l.lat),E=new t.LngLat(l.lng+360,l.lat),O=c.locationPoint(l).distSqr(d);c.locationPoint(m).distSqr(d)<O?l=m:c.locationPoint(E).distSqr(d)<O&&(l=E)}for(;Math.abs(l.lng-c.center.lng)>180;){var F=c.locationPoint(l);if(F.x>=0&&F.y>=0&&F.x<=c.width&&F.y<=c.height)break;l.lng>c.center.lng?l.lng-=360:l.lng+=360}return l}Gr.prototype.down=function(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),te.disableDrag()},Gr.prototype.move=function(l,d){var c=this.map,m=this.mouseRotate.mousemoveWindow(l,d);if(m&&m.bearingDelta&&c.setBearing(c.getBearing()+m.bearingDelta),this.mousePitch){var E=this.mousePitch.mousemoveWindow(l,d);E&&E.pitchDelta&&c.setPitch(c.getPitch()+E.pitchDelta)}},Gr.prototype.off=function(){var l=this.element;te.removeEventListener(l,"mousedown",this.mousedown),te.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),te.removeEventListener(l,"touchmove",this.touchmove),te.removeEventListener(l,"touchend",this.touchend),te.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},Gr.prototype.offTemp=function(){te.enableDrag(),te.removeEventListener(t.window,"mousemove",this.mousemove),te.removeEventListener(t.window,"mouseup",this.mouseup)},Gr.prototype.mousedown=function(l){this.down(t.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),te.mousePos(this.element,l)),te.addEventListener(t.window,"mousemove",this.mousemove),te.addEventListener(t.window,"mouseup",this.mouseup)},Gr.prototype.mousemove=function(l){this.move(l,te.mousePos(this.element,l))},Gr.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},Gr.prototype.touchstart=function(l){1!==l.targetTouches.length?this.reset():(this._startPos=this._lastPos=te.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},Gr.prototype.touchmove=function(l){1!==l.targetTouches.length?this.reset():(this._lastPos=te.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},Gr.prototype.touchend=function(l){0===l.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Gr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Vs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ha(l,d,c){var m=l.classList;for(var E in Vs)m.remove("mapboxgl-"+c+"-anchor-"+E);m.add("mapboxgl-"+c+"-anchor-"+d)}var Rc,tc=function(l){function d(c,m){if(l.call(this),(c instanceof t.window.HTMLElement||m)&&(c=t.extend({element:c},m)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&"auto"!==c.pitchAlignment?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=t.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=te.create("div"),this._element.setAttribute("aria-label","Map marker");var E=te.createNS("http://www.w3.org/2000/svg","svg");E.setAttributeNS(null,"display","block"),E.setAttributeNS(null,"height","41px"),E.setAttributeNS(null,"width","27px"),E.setAttributeNS(null,"viewBox","0 0 27 41");var O=te.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"stroke","none"),O.setAttributeNS(null,"stroke-width","1"),O.setAttributeNS(null,"fill","none"),O.setAttributeNS(null,"fill-rule","evenodd");var F=te.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");var $=te.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");for(var se=0,ge=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];se<ge.length;se+=1){var D=ge[se],M=te.createNS("http://www.w3.org/2000/svg","ellipse");M.setAttributeNS(null,"opacity","0.04"),M.setAttributeNS(null,"cx","10.5"),M.setAttributeNS(null,"cy","5.80029008"),M.setAttributeNS(null,"rx",D.rx),M.setAttributeNS(null,"ry",D.ry),$.appendChild(M)}var x=te.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill",this._color);var A=te.createNS("http://www.w3.org/2000/svg","path");A.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),x.appendChild(A);var z=te.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");var Q=te.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(Q);var K=te.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");var ye=te.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Oe=te.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");var et=te.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#FFFFFF"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962"),ye.appendChild(Oe),ye.appendChild(et),F.appendChild($),F.appendChild(x),F.appendChild(z),F.appendChild(K),F.appendChild(ye),E.appendChild(F),E.setAttributeNS(null,"height",41*this._scale+"px"),E.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(E),this._offset=t.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ut){ut.preventDefault()}),this._element.addEventListener("mousedown",function(ut){ut.preventDefault()}),Ha(this._element,this._anchor,"marker"),this._popup=null}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.addTo=function(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},d.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),te.remove(this._element),this._popup&&this._popup.remove(),this},d.prototype.getLngLat=function(){return this._lngLat},d.prototype.setLngLat=function(c){return this._lngLat=t.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},d.prototype.getElement=function(){return this._element},d.prototype.setPopup=function(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){var m=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},d.prototype._onKeyPress=function(c){var m=c.code,E=c.charCode||c.keyCode;"Space"!==m&&"Enter"!==m&&32!==E&&13!==E||this.togglePopup()},d.prototype._onMapClick=function(c){var m=c.originalEvent.target,E=this._element;this._popup&&(m===E||E.contains(m))&&this.togglePopup()},d.prototype.getPopup=function(){return this._popup},d.prototype.togglePopup=function(){var c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this},d.prototype._update=function(c){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ll(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var m="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?m="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(m="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var E="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?E="rotateX(0deg)":"map"===this._pitchAlignment&&(E="rotateX("+this._map.getPitch()+"deg)"),c&&"moveend"!==c.type||(this._pos=this._pos.round()),te.setTransform(this._element,Vs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+E+" "+m)}},d.prototype.getOffset=function(){return this._offset},d.prototype.setOffset=function(c){return this._offset=t.Point.convert(c),this._update(),this},d.prototype._onMove=function(c){if(!this._isDragging){var m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},d.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},d.prototype._addDragHandler=function(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},d.prototype.setDraggable=function(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},d.prototype.isDraggable=function(){return this._draggable},d.prototype.setRotation=function(c){return this._rotation=c||0,this._update(),this},d.prototype.getRotation=function(){return this._rotation},d.prototype.setRotationAlignment=function(c){return this._rotationAlignment=c||"auto",this._update(),this},d.prototype.getRotationAlignment=function(){return this._rotationAlignment},d.prototype.setPitchAlignment=function(c){return this._pitchAlignment=c&&"auto"!==c?c:this._rotationAlignment,this._update(),this},d.prototype.getPitchAlignment=function(){return this._pitchAlignment},d}(t.Evented),_c={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Hl=0,Gl=!1,Nc=function(l){function d(c){l.call(this),this.options=t.extend({},_c,c),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.onAdd=function(c){var m;return this._map=c,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),m=this._setupUI,void 0!==Rc?m(Rc):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(E){m(Rc="denied"!==E.state)}):m(Rc=!!t.window.navigator.geolocation),this._container},d.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),te.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Hl=0,Gl=!1},d.prototype._isOutOfMapMaxBounds=function(c){var m=this._map.getMaxBounds(),E=c.coords;return m&&(E.longitude<m.getWest()||E.longitude>m.getEast()||E.latitude<m.getSouth()||E.latitude>m.getNorth())},d.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},d.prototype._onSuccess=function(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(c),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",c)),this._finish()}},d.prototype._updateCamera=function(c){var m=new t.LngLat(c.coords.longitude,c.coords.latitude),E=c.coords.accuracy,O=this._map.getBearing(),F=t.extend({bearing:O},this.options.fitBoundsOptions);this._map.fitBounds(m.toBounds(E),F,{geolocateSource:!0})},d.prototype._updateMarker=function(c){if(c){var m=new t.LngLat(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},d.prototype._updateCircleRadius=function(){var c=this._map._container.clientHeight/2,m=this._map.unproject([0,c]),E=this._map.unproject([1,c]),O=m.distanceTo(E),F=Math.ceil(2*this._accuracy/O);this._circleElement.style.width=F+"px",this._circleElement.style.height=F+"px"},d.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},d.prototype._onError=function(c){if(this._map){if(this.options.trackUserLocation)if(1===c.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===c.code&&Gl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",c)),this._finish()}},d.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},d.prototype._setupUI=function(c){var m=this;if(this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this._geolocateButton=te.create("button","mapboxgl-ctrl-geolocate",this._container),te.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===c){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var E=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}else{var O=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=te.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tc(this._dotElement),this._circleElement=te.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(F){F.geolocateSource||"ACTIVE_LOCK"!==m._watchState||F.originalEvent&&"resize"===F.originalEvent.type||(m._watchState="BACKGROUND",m._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),m._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),m.fire(new t.Event("trackuserlocationend")))})},d.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hl--,Gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Hl>1?(c={maximumAge:6e5,timeout:0},Gl=!0):(c=this.options.positionOptions,Gl=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},d.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},d}(t.Evented),qo={maxWidth:100,unit:"metric"},qs=function(l){this.options=t.extend({},qo,l),t.bindAll(["_onMove","setUnit"],this)};function Ml(l,d,c){var m=c&&c.maxWidth||100,E=l._container.clientHeight/2,O=l.unproject([0,E]),F=l.unproject([m,E]),$=O.distanceTo(F);if(c&&"imperial"===c.unit){var se=3.2808*$;se>5280?Lr(d,m,se/5280,l._getUIString("ScaleControl.Miles")):Lr(d,m,se,l._getUIString("ScaleControl.Feet"))}else c&&"nautical"===c.unit?Lr(d,m,$/1852,l._getUIString("ScaleControl.NauticalMiles")):$>=1e3?Lr(d,m,$/1e3,l._getUIString("ScaleControl.Kilometers")):Lr(d,m,$,l._getUIString("ScaleControl.Meters"))}function Lr(l,d,c,m){var E,O,F,se,ge,$=(E=c,(O=Math.pow(10,(""+Math.floor(E)).length-1))*(F=(F=E/O)>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:(se=F,ge=Math.pow(10,Math.ceil(-Math.log(se)/Math.LN10)),Math.round(se*ge)/ge)));l.style.width=d*($/c)+"px",l.innerHTML=$+"&nbsp;"+m}qs.prototype.getDefaultPosition=function(){return"bottom-left"},qs.prototype._onMove=function(){Ml(this._map,this._container,this.options)},qs.prototype.onAdd=function(l){return this._map=l,this._container=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qs.prototype.onRemove=function(){te.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qs.prototype.setUnit=function(l){this.options.unit=l,Ml(this._map,this._container,this.options)};var rs=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof t.window.HTMLElement?this._container=l.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};rs.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=te.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},rs.prototype.onRemove=function(){te.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},rs.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},rs.prototype._setupUI=function(){var l=this._fullscreenButton=te.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);te.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},rs.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},rs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},rs.prototype._isFullscreen=function(){return this._fullscreen},rs.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},rs.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var da={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},su=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yc=function(l){function d(c){l.call(this),this.options=t.extend(Object.create(da),c),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(d.__proto__=l),(d.prototype=Object.create(l&&l.prototype)).constructor=d,d.prototype.addTo=function(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},d.prototype.isOpen=function(){return!!this._map},d.prototype.remove=function(){return this._content&&te.remove(this._content),this._container&&(te.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},d.prototype.getLngLat=function(){return this._lngLat},d.prototype.setLngLat=function(c){return this._lngLat=t.LngLat.convert(c),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},d.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},d.prototype.getElement=function(){return this._container},d.prototype.setText=function(c){return this.setDOMContent(t.window.document.createTextNode(c))},d.prototype.setHTML=function(c){var m,E=t.window.document.createDocumentFragment(),O=t.window.document.createElement("body");for(O.innerHTML=c;m=O.firstChild;)E.appendChild(m);return this.setDOMContent(E)},d.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},d.prototype.setMaxWidth=function(c){return this.options.maxWidth=c,this._update(),this},d.prototype.setDOMContent=function(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=te.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this},d.prototype.addClassName=function(c){this._container&&this._container.classList.add(c)},d.prototype.removeClassName=function(c){this._container&&this._container.classList.remove(c)},d.prototype.setOffset=function(c){return this.options.offset=c,this._update(),this},d.prototype.toggleClassName=function(c){if(this._container)return this._container.classList.toggle(c)},d.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=te.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},d.prototype._onMouseUp=function(c){this._update(c.point)},d.prototype._onMouseMove=function(c){this._update(c.point)},d.prototype._onDrag=function(c){this._update(c.point)},d.prototype._update=function(c){var m=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=te.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=te.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(M){return m._container.classList.add(M)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ll(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||c)){var E=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat),O=this.options.anchor,F=function M(x){if(x){if("number"==typeof x){var A=Math.round(Math.sqrt(.5*Math.pow(x,2)));return{center:new t.Point(0,0),top:new t.Point(0,x),"top-left":new t.Point(A,A),"top-right":new t.Point(-A,A),bottom:new t.Point(0,-x),"bottom-left":new t.Point(A,-A),"bottom-right":new t.Point(-A,-A),left:new t.Point(x,0),right:new t.Point(-x,0)}}if(x instanceof t.Point||Array.isArray(x)){var z=t.Point.convert(x);return{center:z,top:z,"top-left":z,"top-right":z,bottom:z,"bottom-left":z,"bottom-right":z,left:z,right:z}}return{center:t.Point.convert(x.center||[0,0]),top:t.Point.convert(x.top||[0,0]),"top-left":t.Point.convert(x["top-left"]||[0,0]),"top-right":t.Point.convert(x["top-right"]||[0,0]),bottom:t.Point.convert(x.bottom||[0,0]),"bottom-left":t.Point.convert(x["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(x["bottom-right"]||[0,0]),left:t.Point.convert(x.left||[0,0]),right:t.Point.convert(x.right||[0,0])}}return M(new t.Point(0,0))}(this.options.offset);if(!O){var $,se=this._container.offsetWidth,ge=this._container.offsetHeight;$=E.y+F.bottom.y<ge?["top"]:E.y>this._map.transform.height-ge?["bottom"]:[],E.x<se/2?$.push("left"):E.x>this._map.transform.width-se/2&&$.push("right"),O=0===$.length?"bottom":$.join("-")}var D=E.add(F[O]).round();te.setTransform(this._container,Vs[O]+" translate("+D.x+"px,"+D.y+"px)"),Ha(this._container,O,"popup")}},d.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var c=this._container.querySelector(su);c&&c.focus()}},d.prototype._onClose=function(){this.remove()},d}(t.Evented),vr={version:t.version,supported:ie,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Zc,NavigationControl:Os,GeolocateControl:Nc,AttributionControl:xo,ScaleControl:qs,FullscreenControl:rs,Popup:Yc,Marker:tc,Style:Oo,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){He().acquire(Ie)},clearPrewarmedResources:function(){var l=Me;l&&(l.isPreloaded()&&1===l.numActive()?(l.release(Ie),Me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(l){t.config.ACCESS_TOKEN=l},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(l){t.config.API_URL=l},get workerCount(){return Ae.workerCount},set workerCount(l){Ae.workerCount=l},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){t.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){t.clearTileCache(l)},workerUrl:""};return vr}),o}()},1135:(At,Le,k)=>{"use strict";k.d(Le,{X:()=>V});var o=k(7579);class V extends o.x{constructor(ie){super(),this._value=ie}get value(){return this.getValue()}_subscribe(ie){const te=super._subscribe(ie);return!te.closed&&ie.next(this._value),te}getValue(){const{hasError:ie,thrownError:te,_value:le}=this;if(ie)throw te;return this._throwIfClosed(),le}next(ie){super.next(this._value=ie)}}},9751:(At,Le,k)=>{"use strict";k.d(Le,{y:()=>we});var o=k(930),V=k(727),t=k(8822),ie=k(9635),te=k(2416),le=k(576),U=k(2806);let we=(()=>{class Ye{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const De=new Ye;return De.source=this,De.operator=ke,De}subscribe(ke,De,ze){const Qe=function Se(Ye){return Ye&&Ye instanceof o.Lv||function Pe(Ye){return Ye&&(0,le.m)(Ye.next)&&(0,le.m)(Ye.error)&&(0,le.m)(Ye.complete)}(Ye)&&(0,V.Nn)(Ye)}(ke)?ke:new o.Hp(ke,De,ze);return(0,U.x)(()=>{const{operator:lt,source:tt}=this;Qe.add(lt?lt.call(Qe,tt):tt?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(ke){try{return this._subscribe(ke)}catch(De){ke.error(De)}}forEach(ke,De){return new(De=de(De))((ze,Qe)=>{const lt=new o.Hp({next:tt=>{try{ke(tt)}catch(Ve){Qe(Ve),lt.unsubscribe()}},error:Qe,complete:ze});this.subscribe(lt)})}_subscribe(ke){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(ke)}[t.L](){return this}pipe(...ke){return(0,ie.U)(ke)(this)}toPromise(ke){return new(ke=de(ke))((De,ze)=>{let Qe;this.subscribe(lt=>Qe=lt,lt=>ze(lt),()=>De(Qe))})}}return Ye.create=je=>new Ye(je),Ye})();function de(Ye){var je;return null!==(je=Ye??te.v.Promise)&&void 0!==je?je:Promise}},7579:(At,Le,k)=>{"use strict";k.d(Le,{x:()=>U});var o=k(9751),V=k(727);const ie=(0,k(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=k(8737),le=k(2806);let U=(()=>{class de extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Se){const Ye=new we(this,this);return Ye.operator=Se,Ye}_throwIfClosed(){if(this.closed)throw new ie}next(Se){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ye of this.currentObservers)Ye.next(Se)}})}error(Se){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Se;const{observers:Ye}=this;for(;Ye.length;)Ye.shift().error(Se)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Se}=this;for(;Se.length;)Se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Se;return(null===(Se=this.observers)||void 0===Se?void 0:Se.length)>0}_trySubscribe(Se){return this._throwIfClosed(),super._trySubscribe(Se)}_subscribe(Se){return this._throwIfClosed(),this._checkFinalizedStatuses(Se),this._innerSubscribe(Se)}_innerSubscribe(Se){const{hasError:Ye,isStopped:je,observers:ke}=this;return Ye||je?V.Lc:(this.currentObservers=null,ke.push(Se),new V.w0(()=>{this.currentObservers=null,(0,te.P)(ke,Se)}))}_checkFinalizedStatuses(Se){const{hasError:Ye,thrownError:je,isStopped:ke}=this;Ye?Se.error(je):ke&&Se.complete()}asObservable(){const Se=new o.y;return Se.source=this,Se}}return de.create=(Pe,Se)=>new we(Pe,Se),de})();class we extends U{constructor(Pe,Se){super(),this.destination=Pe,this.source=Se}next(Pe){var Se,Ye;null===(Ye=null===(Se=this.destination)||void 0===Se?void 0:Se.next)||void 0===Ye||Ye.call(Se,Pe)}error(Pe){var Se,Ye;null===(Ye=null===(Se=this.destination)||void 0===Se?void 0:Se.error)||void 0===Ye||Ye.call(Se,Pe)}complete(){var Pe,Se;null===(Se=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.complete)||void 0===Se||Se.call(Pe)}_subscribe(Pe){var Se,Ye;return null!==(Ye=null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Pe))&&void 0!==Ye?Ye:V.Lc}}},930:(At,Le,k)=>{"use strict";k.d(Le,{Hp:()=>ze,Lv:()=>Ye});var o=k(576),V=k(727),t=k(2416),ie=k(7849),te=k(5032);const le=de("C",void 0,void 0);function de(Fe,Ne,Be){return{kind:Fe,value:Ne,error:Be}}var Pe=k(3410),Se=k(2806);class Ye extends V.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,V.Nn)(Ne)&&Ne.add(this)):this.destination=Ve}static create(Ne,Be,it){return new ze(Ne,Be,it)}next(Ne){this.isStopped?tt(function we(Fe){return de("N",Fe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?tt(function U(Fe){return de("E",void 0,Fe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?tt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function ke(Fe,Ne){return je.call(Fe,Ne)}class De{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Be}=this;if(Be.next)try{Be.next(Ne)}catch(it){Qe(it)}}error(Ne){const{partialObserver:Be}=this;if(Be.error)try{Be.error(Ne)}catch(it){Qe(it)}else Qe(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Be){Qe(Be)}}}class ze extends Ye{constructor(Ne,Be,it){let Mt;if(super(),(0,o.m)(Ne)||!Ne)Mt={next:Ne??void 0,error:Be??void 0,complete:it??void 0};else{let St;this&&t.v.useDeprecatedNextContext?(St=Object.create(Ne),St.unsubscribe=()=>this.unsubscribe(),Mt={next:Ne.next&&ke(Ne.next,St),error:Ne.error&&ke(Ne.error,St),complete:Ne.complete&&ke(Ne.complete,St)}):Mt=Ne}this.destination=new De(Mt)}}function Qe(Fe){t.v.useDeprecatedSynchronousErrorHandling?(0,Se.O)(Fe):(0,ie.h)(Fe)}function tt(Fe,Ne){const{onStoppedNotification:Be}=t.v;Be&&Pe.z.setTimeout(()=>Be(Fe,Ne))}const Ve={closed:!0,next:te.Z,error:function lt(Fe){throw Fe},complete:te.Z}},727:(At,Le,k)=>{"use strict";k.d(Le,{Lc:()=>le,w0:()=>te,Nn:()=>U});var o=k(576);const t=(0,k(3888).d)(de=>function(Se){de(this),this.message=Se?`${Se.length} errors occurred during unsubscription:\n${Se.map((Ye,je)=>`${je+1}) ${Ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Se});var ie=k(8737);class te{constructor(Pe){this.initialTeardown=Pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Pe;if(!this.closed){this.closed=!0;const{_parentage:Se}=this;if(Se)if(this._parentage=null,Array.isArray(Se))for(const ke of Se)ke.remove(this);else Se.remove(this);const{initialTeardown:Ye}=this;if((0,o.m)(Ye))try{Ye()}catch(ke){Pe=ke instanceof t?ke.errors:[ke]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const ke of je)try{we(ke)}catch(De){Pe=Pe??[],De instanceof t?Pe=[...Pe,...De.errors]:Pe.push(De)}}if(Pe)throw new t(Pe)}}add(Pe){var Se;if(Pe&&Pe!==this)if(this.closed)we(Pe);else{if(Pe instanceof te){if(Pe.closed||Pe._hasParent(this))return;Pe._addParent(this)}(this._finalizers=null!==(Se=this._finalizers)&&void 0!==Se?Se:[]).push(Pe)}}_hasParent(Pe){const{_parentage:Se}=this;return Se===Pe||Array.isArray(Se)&&Se.includes(Pe)}_addParent(Pe){const{_parentage:Se}=this;this._parentage=Array.isArray(Se)?(Se.push(Pe),Se):Se?[Se,Pe]:Pe}_removeParent(Pe){const{_parentage:Se}=this;Se===Pe?this._parentage=null:Array.isArray(Se)&&(0,ie.P)(Se,Pe)}remove(Pe){const{_finalizers:Se}=this;Se&&(0,ie.P)(Se,Pe),Pe instanceof te&&Pe._removeParent(this)}}te.EMPTY=(()=>{const de=new te;return de.closed=!0,de})();const le=te.EMPTY;function U(de){return de instanceof te||de&&"closed"in de&&(0,o.m)(de.remove)&&(0,o.m)(de.add)&&(0,o.m)(de.unsubscribe)}function we(de){(0,o.m)(de)?de():de.unsubscribe()}},2416:(At,Le,k)=>{"use strict";k.d(Le,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(At,Le,k)=>{"use strict";k.d(Le,{c:()=>le});var o=k(9751),V=k(727),t=k(8343),ie=k(5403),te=k(4482);class le extends o.y{constructor(we,de){super(),this.source=we,this.subjectFactory=de,this._subject=null,this._refCount=0,this._connection=null,(0,te.A)(we)&&(this.lift=we.lift)}_subscribe(we){return this.getSubject().subscribe(we)}getSubject(){const we=this._subject;return(!we||we.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:we}=this;this._subject=this._connection=null,we?.unsubscribe()}connect(){let we=this._connection;if(!we){we=this._connection=new V.w0;const de=this.getSubject();we.add(this.source.subscribe((0,ie.x)(de,void 0,()=>{this._teardown(),de.complete()},Pe=>{this._teardown(),de.error(Pe)},()=>this._teardown()))),we.closed&&(this._connection=null,we=V.w0.EMPTY)}return we}refCount(){return(0,t.x)()(this)}}},9841:(At,Le,k)=>{"use strict";k.d(Le,{a:()=>Pe});var o=k(9751),V=k(4742),t=k(2076),ie=k(4671),te=k(3268),le=k(3269),U=k(1810),we=k(5403),de=k(9672);function Pe(...je){const ke=(0,le.yG)(je),De=(0,le.jO)(je),{args:ze,keys:Qe}=(0,V.D)(je);if(0===ze.length)return(0,t.D)([],ke);const lt=new o.y(function Se(je,ke,De=ie.y){return ze=>{Ye(ke,()=>{const{length:Qe}=je,lt=new Array(Qe);let tt=Qe,Ve=Qe;for(let Fe=0;Fe<Qe;Fe++)Ye(ke,()=>{const Ne=(0,t.D)(je[Fe],ke);let Be=!1;Ne.subscribe((0,we.x)(ze,it=>{lt[Fe]=it,Be||(Be=!0,Ve--),Ve||ze.next(De(lt.slice()))},()=>{--tt||ze.complete()}))},ze)},ze)}}(ze,ke,Qe?tt=>(0,U.n)(Qe,tt):ie.y));return De?lt.pipe((0,te.Z)(De)):lt}function Ye(je,ke,De){je?(0,de.f)(De,je,ke):ke()}},7272:(At,Le,k)=>{"use strict";k.d(Le,{z:()=>te});var o=k(8189),t=k(3269),ie=k(2076);function te(...le){return function V(){return(0,o.J)(1)}()((0,ie.D)(le,(0,t.yG)(le)))}},9770:(At,Le,k)=>{"use strict";k.d(Le,{P:()=>t});var o=k(9751),V=k(8421);function t(ie){return new o.y(te=>{(0,V.Xf)(ie()).subscribe(te)})}},515:(At,Le,k)=>{"use strict";k.d(Le,{E:()=>V});const V=new(k(9751).y)(te=>te.complete())},4128:(At,Le,k)=>{"use strict";k.d(Le,{D:()=>we});var o=k(9751),V=k(4742),t=k(8421),ie=k(3269),te=k(5403),le=k(3268),U=k(1810);function we(...de){const Pe=(0,ie.jO)(de),{args:Se,keys:Ye}=(0,V.D)(de),je=new o.y(ke=>{const{length:De}=Se;if(!De)return void ke.complete();const ze=new Array(De);let Qe=De,lt=De;for(let tt=0;tt<De;tt++){let Ve=!1;(0,t.Xf)(Se[tt]).subscribe((0,te.x)(ke,Fe=>{Ve||(Ve=!0,lt--),ze[tt]=Fe},()=>Qe--,void 0,()=>{(!Qe||!Ve)&&(lt||ke.next(Ye?(0,U.n)(Ye,ze):ze),ke.complete())}))}});return Pe?je.pipe((0,le.Z)(Pe)):je}},2076:(At,Le,k)=>{"use strict";k.d(Le,{D:()=>it});var o=k(8421),V=k(9672),t=k(4482),ie=k(5403);function te(Mt,St=0){return(0,t.e)((Kt,wn)=>{Kt.subscribe((0,ie.x)(wn,ln=>(0,V.f)(wn,Mt,()=>wn.next(ln),St),()=>(0,V.f)(wn,Mt,()=>wn.complete(),St),ln=>(0,V.f)(wn,Mt,()=>wn.error(ln),St)))})}function le(Mt,St=0){return(0,t.e)((Kt,wn)=>{wn.add(Mt.schedule(()=>Kt.subscribe(wn),St))})}var de=k(9751),Se=k(2202),Ye=k(576);function ke(Mt,St){if(!Mt)throw new Error("Iterable cannot be null");return new de.y(Kt=>{(0,V.f)(Kt,St,()=>{const wn=Mt[Symbol.asyncIterator]();(0,V.f)(Kt,St,()=>{wn.next().then(ln=>{ln.done?Kt.complete():Kt.next(ln.value)})},0,!0)})})}var De=k(3670),ze=k(8239),Qe=k(1144),lt=k(6495),tt=k(2206),Ve=k(4532),Fe=k(3260);function it(Mt,St){return St?function Be(Mt,St){if(null!=Mt){if((0,De.c)(Mt))return function U(Mt,St){return(0,o.Xf)(Mt).pipe(le(St),te(St))}(Mt,St);if((0,Qe.z)(Mt))return function Pe(Mt,St){return new de.y(Kt=>{let wn=0;return St.schedule(function(){wn===Mt.length?Kt.complete():(Kt.next(Mt[wn++]),Kt.closed||this.schedule())})})}(Mt,St);if((0,ze.t)(Mt))return function we(Mt,St){return(0,o.Xf)(Mt).pipe(le(St),te(St))}(Mt,St);if((0,tt.D)(Mt))return ke(Mt,St);if((0,lt.T)(Mt))return function je(Mt,St){return new de.y(Kt=>{let wn;return(0,V.f)(Kt,St,()=>{wn=Mt[Se.h](),(0,V.f)(Kt,St,()=>{let ln,jn;try{({value:ln,done:jn}=wn.next())}catch(yn){return void Kt.error(yn)}jn?Kt.complete():Kt.next(ln)},0,!0)}),()=>(0,Ye.m)(wn?.return)&&wn.return()})}(Mt,St);if((0,Fe.L)(Mt))return function Ne(Mt,St){return ke((0,Fe.Q)(Mt),St)}(Mt,St)}throw(0,Ve.z)(Mt)}(Mt,St):(0,o.Xf)(Mt)}},4968:(At,Le,k)=>{"use strict";k.d(Le,{R:()=>Pe});var o=k(8421),V=k(9751),t=k(5577),ie=k(1144),te=k(576),le=k(3268);const U=["addListener","removeListener"],we=["addEventListener","removeEventListener"],de=["on","off"];function Pe(De,ze,Qe,lt){if((0,te.m)(Qe)&&(lt=Qe,Qe=void 0),lt)return Pe(De,ze,Qe).pipe((0,le.Z)(lt));const[tt,Ve]=function ke(De){return(0,te.m)(De.addEventListener)&&(0,te.m)(De.removeEventListener)}(De)?we.map(Fe=>Ne=>De[Fe](ze,Ne,Qe)):function Ye(De){return(0,te.m)(De.addListener)&&(0,te.m)(De.removeListener)}(De)?U.map(Se(De,ze)):function je(De){return(0,te.m)(De.on)&&(0,te.m)(De.off)}(De)?de.map(Se(De,ze)):[];if(!tt&&(0,ie.z)(De))return(0,t.z)(Fe=>Pe(Fe,ze,Qe))((0,o.Xf)(De));if(!tt)throw new TypeError("Invalid event target");return new V.y(Fe=>{const Ne=(...Be)=>Fe.next(1<Be.length?Be:Be[0]);return tt(Ne),()=>Ve(Ne)})}function Se(De,ze){return Qe=>lt=>De[Qe](ze,lt)}},8421:(At,Le,k)=>{"use strict";k.d(Le,{Xf:()=>je});var o=k(7582),V=k(1144),t=k(8239),ie=k(9751),te=k(3670),le=k(2206),U=k(4532),we=k(6495),de=k(3260),Pe=k(576),Se=k(7849),Ye=k(8822);function je(Fe){if(Fe instanceof ie.y)return Fe;if(null!=Fe){if((0,te.c)(Fe))return function ke(Fe){return new ie.y(Ne=>{const Be=Fe[Ye.L]();if((0,Pe.m)(Be.subscribe))return Be.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,V.z)(Fe))return function De(Fe){return new ie.y(Ne=>{for(let Be=0;Be<Fe.length&&!Ne.closed;Be++)Ne.next(Fe[Be]);Ne.complete()})}(Fe);if((0,t.t)(Fe))return function ze(Fe){return new ie.y(Ne=>{Fe.then(Be=>{Ne.closed||(Ne.next(Be),Ne.complete())},Be=>Ne.error(Be)).then(null,Se.h)})}(Fe);if((0,le.D)(Fe))return lt(Fe);if((0,we.T)(Fe))return function Qe(Fe){return new ie.y(Ne=>{for(const Be of Fe)if(Ne.next(Be),Ne.closed)return;Ne.complete()})}(Fe);if((0,de.L)(Fe))return function tt(Fe){return lt((0,de.Q)(Fe))}(Fe)}throw(0,U.z)(Fe)}function lt(Fe){return new ie.y(Ne=>{(function Ve(Fe,Ne){var Be,it,Mt,St;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Be=(0,o.KL)(Fe);!(it=yield Be.next()).done;)if(Ne.next(it.value),Ne.closed)return}catch(Kt){Mt={error:Kt}}finally{try{it&&!it.done&&(St=Be.return)&&(yield St.call(Be))}finally{if(Mt)throw Mt.error}}Ne.complete()})})(Fe,Ne).catch(Be=>Ne.error(Be))})}},6451:(At,Le,k)=>{"use strict";k.d(Le,{T:()=>le});var o=k(8189),V=k(8421),t=k(515),ie=k(3269),te=k(2076);function le(...U){const we=(0,ie.yG)(U),de=(0,ie._6)(U,1/0),Pe=U;return Pe.length?1===Pe.length?(0,V.Xf)(Pe[0]):(0,o.J)(de)((0,te.D)(Pe,we)):t.E}},9646:(At,Le,k)=>{"use strict";k.d(Le,{of:()=>t});var o=k(3269),V=k(2076);function t(...ie){const te=(0,o.yG)(ie);return(0,V.D)(ie,te)}},2843:(At,Le,k)=>{"use strict";k.d(Le,{_:()=>t});var o=k(9751),V=k(576);function t(ie,te){const le=(0,V.m)(ie)?ie:()=>ie,U=we=>we.error(le());return new o.y(te?we=>te.schedule(U,0,we):U)}},5963:(At,Le,k)=>{"use strict";k.d(Le,{H:()=>te});var o=k(9751),V=k(4986),t=k(3532);function te(le=0,U,we=V.P){let de=-1;return null!=U&&((0,t.K)(U)?we=U:de=U),new o.y(Pe=>{let Se=function ie(le){return le instanceof Date&&!isNaN(le)}(le)?+le-we.now():le;Se<0&&(Se=0);let Ye=0;return we.schedule(function(){Pe.closed||(Pe.next(Ye++),0<=de?this.schedule(void 0,de):Pe.complete())},Se)})}},5403:(At,Le,k)=>{"use strict";k.d(Le,{x:()=>V});var o=k(930);function V(ie,te,le,U,we){return new t(ie,te,le,U,we)}class t extends o.Lv{constructor(te,le,U,we,de,Pe){super(te),this.onFinalize=de,this.shouldUnsubscribe=Pe,this._next=le?function(Se){try{le(Se)}catch(Ye){te.error(Ye)}}:super._next,this._error=we?function(Se){try{we(Se)}catch(Ye){te.error(Ye)}finally{this.unsubscribe()}}:super._error,this._complete=U?function(){try{U()}catch(Se){te.error(Se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},262:(At,Le,k)=>{"use strict";k.d(Le,{K:()=>ie});var o=k(8421),V=k(5403),t=k(4482);function ie(te){return(0,t.e)((le,U)=>{let Pe,we=null,de=!1;we=le.subscribe((0,V.x)(U,void 0,void 0,Se=>{Pe=(0,o.Xf)(te(Se,ie(te)(le))),we?(we.unsubscribe(),we=null,Pe.subscribe(U)):de=!0})),de&&(we.unsubscribe(),we=null,Pe.subscribe(U))})}},4351:(At,Le,k)=>{"use strict";k.d(Le,{b:()=>t});var o=k(5577),V=k(576);function t(ie,te){return(0,V.m)(te)?(0,o.z)(ie,te,1):(0,o.z)(ie,1)}},8372:(At,Le,k)=>{"use strict";k.d(Le,{b:()=>ie});var o=k(4986),V=k(4482),t=k(5403);function ie(te,le=o.z){return(0,V.e)((U,we)=>{let de=null,Pe=null,Se=null;const Ye=()=>{if(de){de.unsubscribe(),de=null;const ke=Pe;Pe=null,we.next(ke)}};function je(){const ke=Se+te,De=le.now();if(De<ke)return de=this.schedule(void 0,ke-De),void we.add(de);Ye()}U.subscribe((0,t.x)(we,ke=>{Pe=ke,Se=le.now(),de||(de=le.schedule(je,te),we.add(de))},()=>{Ye(),we.complete()},void 0,()=>{Pe=de=null}))})}},6590:(At,Le,k)=>{"use strict";k.d(Le,{d:()=>t});var o=k(4482),V=k(5403);function t(ie){return(0,o.e)((te,le)=>{let U=!1;te.subscribe((0,V.x)(le,we=>{U=!0,le.next(we)},()=>{U||le.next(ie),le.complete()}))})}},1005:(At,Le,k)=>{"use strict";k.d(Le,{g:()=>Ye});var o=k(4986),V=k(7272),t=k(5698),ie=k(4482),te=k(5403),le=k(5032),we=k(9718),de=k(5577);function Pe(je,ke){return ke?De=>(0,V.z)(ke.pipe((0,t.q)(1),function U(){return(0,ie.e)((je,ke)=>{je.subscribe((0,te.x)(ke,le.Z))})}()),De.pipe(Pe(je))):(0,de.z)((De,ze)=>je(De,ze).pipe((0,t.q)(1),(0,we.h)(De)))}var Se=k(5963);function Ye(je,ke=o.z){const De=(0,Se.H)(je,ke);return Pe(()=>De)}},1884:(At,Le,k)=>{"use strict";k.d(Le,{x:()=>ie});var o=k(4671),V=k(4482),t=k(5403);function ie(le,U=o.y){return le=le??te,(0,V.e)((we,de)=>{let Pe,Se=!0;we.subscribe((0,t.x)(de,Ye=>{const je=U(Ye);(Se||!le(Pe,je))&&(Se=!1,Pe=je,de.next(Ye))}))})}function te(le,U){return le===U}},9300:(At,Le,k)=>{"use strict";k.d(Le,{h:()=>t});var o=k(4482),V=k(5403);function t(ie,te){return(0,o.e)((le,U)=>{let we=0;le.subscribe((0,V.x)(U,de=>ie.call(te,de,we++)&&U.next(de)))})}},590:(At,Le,k)=>{"use strict";k.d(Le,{P:()=>U});var o=k(6805),V=k(9300),t=k(5698),ie=k(6590),te=k(8068),le=k(4671);function U(we,de){const Pe=arguments.length>=2;return Se=>Se.pipe(we?(0,V.h)((Ye,je)=>we(Ye,je,Se)):le.y,(0,t.q)(1),Pe?(0,ie.d)(de):(0,te.T)(()=>new o.K))}},4004:(At,Le,k)=>{"use strict";k.d(Le,{U:()=>t});var o=k(4482),V=k(5403);function t(ie,te){return(0,o.e)((le,U)=>{let we=0;le.subscribe((0,V.x)(U,de=>{U.next(ie.call(te,de,we++))}))})}},9718:(At,Le,k)=>{"use strict";k.d(Le,{h:()=>V});var o=k(4004);function V(t){return(0,o.U)(()=>t)}},8189:(At,Le,k)=>{"use strict";k.d(Le,{J:()=>t});var o=k(5577),V=k(4671);function t(ie=1/0){return(0,o.z)(V.y,ie)}},5577:(At,Le,k)=>{"use strict";k.d(Le,{z:()=>we});var o=k(4004),V=k(8421),t=k(4482),ie=k(9672),te=k(5403),U=k(576);function we(de,Pe,Se=1/0){return(0,U.m)(Pe)?we((Ye,je)=>(0,o.U)((ke,De)=>Pe(Ye,ke,je,De))((0,V.Xf)(de(Ye,je))),Se):("number"==typeof Pe&&(Se=Pe),(0,t.e)((Ye,je)=>function le(de,Pe,Se,Ye,je,ke,De,ze){const Qe=[];let lt=0,tt=0,Ve=!1;const Fe=()=>{Ve&&!Qe.length&&!lt&&Pe.complete()},Ne=it=>lt<Ye?Be(it):Qe.push(it),Be=it=>{ke&&Pe.next(it),lt++;let Mt=!1;(0,V.Xf)(Se(it,tt++)).subscribe((0,te.x)(Pe,St=>{je?.(St),ke?Ne(St):Pe.next(St)},()=>{Mt=!0},void 0,()=>{if(Mt)try{for(lt--;Qe.length&&lt<Ye;){const St=Qe.shift();De?(0,ie.f)(Pe,De,()=>Be(St)):Be(St)}Fe()}catch(St){Pe.error(St)}}))};return de.subscribe((0,te.x)(Pe,Ne,()=>{Ve=!0,Fe()})),()=>{ze?.()}}(Ye,je,de,Se)))}},8343:(At,Le,k)=>{"use strict";k.d(Le,{x:()=>t});var o=k(4482),V=k(5403);function t(){return(0,o.e)((ie,te)=>{let le=null;ie._refCount++;const U=(0,V.x)(te,void 0,void 0,void 0,()=>{if(!ie||ie._refCount<=0||0<--ie._refCount)return void(le=null);const we=ie._connection,de=le;le=null,we&&(!de||we===de)&&we.unsubscribe(),te.unsubscribe()});ie.subscribe(U),U.closed||(le=ie.connect())})}},5684:(At,Le,k)=>{"use strict";k.d(Le,{T:()=>V});var o=k(9300);function V(t){return(0,o.h)((ie,te)=>t<=te)}},8675:(At,Le,k)=>{"use strict";k.d(Le,{O:()=>ie});var o=k(7272),V=k(3269),t=k(4482);function ie(...te){const le=(0,V.yG)(te);return(0,t.e)((U,we)=>{(le?(0,o.z)(te,U,le):(0,o.z)(te,U)).subscribe(we)})}},3900:(At,Le,k)=>{"use strict";k.d(Le,{w:()=>ie});var o=k(8421),V=k(4482),t=k(5403);function ie(te,le){return(0,V.e)((U,we)=>{let de=null,Pe=0,Se=!1;const Ye=()=>Se&&!de&&we.complete();U.subscribe((0,t.x)(we,je=>{de?.unsubscribe();let ke=0;const De=Pe++;(0,o.Xf)(te(je,De)).subscribe(de=(0,t.x)(we,ze=>we.next(le?le(je,ze,De,ke++):ze),()=>{de=null,Ye()}))},()=>{Se=!0,Ye()}))})}},5698:(At,Le,k)=>{"use strict";k.d(Le,{q:()=>ie});var o=k(515),V=k(4482),t=k(5403);function ie(te){return te<=0?()=>o.E:(0,V.e)((le,U)=>{let we=0;le.subscribe((0,t.x)(U,de=>{++we<=te&&(U.next(de),te<=we&&U.complete())}))})}},2722:(At,Le,k)=>{"use strict";k.d(Le,{R:()=>te});var o=k(4482),V=k(5403),t=k(8421),ie=k(5032);function te(le){return(0,o.e)((U,we)=>{(0,t.Xf)(le).subscribe((0,V.x)(we,()=>we.complete(),ie.Z)),!we.closed&&U.subscribe(we)})}},8505:(At,Le,k)=>{"use strict";k.d(Le,{b:()=>te});var o=k(576),V=k(4482),t=k(5403),ie=k(4671);function te(le,U,we){const de=(0,o.m)(le)||U||we?{next:le,error:U,complete:we}:le;return de?(0,V.e)((Pe,Se)=>{var Ye;null===(Ye=de.subscribe)||void 0===Ye||Ye.call(de);let je=!0;Pe.subscribe((0,t.x)(Se,ke=>{var De;null===(De=de.next)||void 0===De||De.call(de,ke),Se.next(ke)},()=>{var ke;je=!1,null===(ke=de.complete)||void 0===ke||ke.call(de),Se.complete()},ke=>{var De;je=!1,null===(De=de.error)||void 0===De||De.call(de,ke),Se.error(ke)},()=>{var ke,De;je&&(null===(ke=de.unsubscribe)||void 0===ke||ke.call(de)),null===(De=de.finalize)||void 0===De||De.call(de)}))}):ie.y}},8068:(At,Le,k)=>{"use strict";k.d(Le,{T:()=>ie});var o=k(6805),V=k(4482),t=k(5403);function ie(le=te){return(0,V.e)((U,we)=>{let de=!1;U.subscribe((0,t.x)(we,Pe=>{de=!0,we.next(Pe)},()=>de?we.complete():we.error(le())))})}function te(){return new o.K}},4408:(At,Le,k)=>{"use strict";k.d(Le,{o:()=>te});var o=k(727);class V extends o.w0{constructor(U,we){super()}schedule(U,we=0){return this}}const t={setInterval(le,U,...we){const{delegate:de}=t;return de?.setInterval?de.setInterval(le,U,...we):setInterval(le,U,...we)},clearInterval(le){const{delegate:U}=t;return(U?.clearInterval||clearInterval)(le)},delegate:void 0};var ie=k(8737);class te extends V{constructor(U,we){super(U,we),this.scheduler=U,this.work=we,this.pending=!1}schedule(U,we=0){var de;if(this.closed)return this;this.state=U;const Pe=this.id,Se=this.scheduler;return null!=Pe&&(this.id=this.recycleAsyncId(Se,Pe,we)),this.pending=!0,this.delay=we,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(Se,this.id,we),this}requestAsyncId(U,we,de=0){return t.setInterval(U.flush.bind(U,this),de)}recycleAsyncId(U,we,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return we;null!=we&&t.clearInterval(we)}execute(U,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(U,we);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(U,we){let Pe,de=!1;try{this.work(U)}catch(Se){de=!0,Pe=Se||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),Pe}unsubscribe(){if(!this.closed){const{id:U,scheduler:we}=this,{actions:de}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(de,this),null!=U&&(this.id=this.recycleAsyncId(we,U,null)),this.delay=null,super.unsubscribe()}}}},640:(At,Le,k)=>{"use strict";k.d(Le,{v:()=>t});const o={now:()=>(o.delegate||Date).now(),delegate:void 0};class V{constructor(te,le=V.now){this.schedulerActionCtor=te,this.now=le}schedule(te,le=0,U){return new this.schedulerActionCtor(this,te).schedule(U,le)}}V.now=o.now;class t extends V{constructor(te,le=V.now){super(te,le),this.actions=[],this._active=!1}flush(te){const{actions:le}=this;if(this._active)return void le.push(te);let U;this._active=!0;do{if(U=te.execute(te.state,te.delay))break}while(te=le.shift());if(this._active=!1,U){for(;te=le.shift();)te.unsubscribe();throw U}}}},4986:(At,Le,k)=>{"use strict";k.d(Le,{P:()=>ie,z:()=>t});var o=k(4408);const t=new(k(640).v)(o.o),ie=t},3410:(At,Le,k)=>{"use strict";k.d(Le,{z:()=>o});const o={setTimeout(V,t,...ie){const{delegate:te}=o;return te?.setTimeout?te.setTimeout(V,t,...ie):setTimeout(V,t,...ie)},clearTimeout(V){const{delegate:t}=o;return(t?.clearTimeout||clearTimeout)(V)},delegate:void 0}},2202:(At,Le,k)=>{"use strict";k.d(Le,{h:()=>V});const V=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(At,Le,k)=>{"use strict";k.d(Le,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(At,Le,k)=>{"use strict";k.d(Le,{K:()=>V});const V=(0,k(3888).d)(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(At,Le,k)=>{"use strict";k.d(Le,{_6:()=>le,jO:()=>ie,yG:()=>te});var o=k(576),V=k(3532);function t(U){return U[U.length-1]}function ie(U){return(0,o.m)(t(U))?U.pop():void 0}function te(U){return(0,V.K)(t(U))?U.pop():void 0}function le(U,we){return"number"==typeof t(U)?U.pop():we}},4742:(At,Le,k)=>{"use strict";k.d(Le,{D:()=>te});const{isArray:o}=Array,{getPrototypeOf:V,prototype:t,keys:ie}=Object;function te(U){if(1===U.length){const we=U[0];if(o(we))return{args:we,keys:null};if(function le(U){return U&&"object"==typeof U&&V(U)===t}(we)){const de=ie(we);return{args:de.map(Pe=>we[Pe]),keys:de}}}return{args:U,keys:null}}},8737:(At,Le,k)=>{"use strict";function o(V,t){if(V){const ie=V.indexOf(t);0<=ie&&V.splice(ie,1)}}k.d(Le,{P:()=>o})},3888:(At,Le,k)=>{"use strict";function o(V){const ie=V(te=>{Error.call(te),te.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Le,{d:()=>o})},1810:(At,Le,k)=>{"use strict";function o(V,t){return V.reduce((ie,te,le)=>(ie[te]=t[le],ie),{})}k.d(Le,{n:()=>o})},2806:(At,Le,k)=>{"use strict";k.d(Le,{O:()=>ie,x:()=>t});var o=k(2416);let V=null;function t(te){if(o.v.useDeprecatedSynchronousErrorHandling){const le=!V;if(le&&(V={errorThrown:!1,error:null}),te(),le){const{errorThrown:U,error:we}=V;if(V=null,U)throw we}}else te()}function ie(te){o.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=te)}},9672:(At,Le,k)=>{"use strict";function o(V,t,ie,te=0,le=!1){const U=t.schedule(function(){ie(),le?V.add(this.schedule(null,te)):this.unsubscribe()},te);if(V.add(U),!le)return U}k.d(Le,{f:()=>o})},4671:(At,Le,k)=>{"use strict";function o(V){return V}k.d(Le,{y:()=>o})},1144:(At,Le,k)=>{"use strict";k.d(Le,{z:()=>o});const o=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(At,Le,k)=>{"use strict";k.d(Le,{D:()=>V});var o=k(576);function V(t){return Symbol.asyncIterator&&(0,o.m)(t?.[Symbol.asyncIterator])}},576:(At,Le,k)=>{"use strict";function o(V){return"function"==typeof V}k.d(Le,{m:()=>o})},3670:(At,Le,k)=>{"use strict";k.d(Le,{c:()=>t});var o=k(8822),V=k(576);function t(ie){return(0,V.m)(ie[o.L])}},6495:(At,Le,k)=>{"use strict";k.d(Le,{T:()=>t});var o=k(2202),V=k(576);function t(ie){return(0,V.m)(ie?.[o.h])}},8239:(At,Le,k)=>{"use strict";k.d(Le,{t:()=>V});var o=k(576);function V(t){return(0,o.m)(t?.then)}},3260:(At,Le,k)=>{"use strict";k.d(Le,{L:()=>ie,Q:()=>t});var o=k(7582),V=k(576);function t(te){return(0,o.FC)(this,arguments,function*(){const U=te.getReader();try{for(;;){const{value:we,done:de}=yield(0,o.qq)(U.read());if(de)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(we)}}finally{U.releaseLock()}})}function ie(te){return(0,V.m)(te?.getReader)}},3532:(At,Le,k)=>{"use strict";k.d(Le,{K:()=>V});var o=k(576);function V(t){return t&&(0,o.m)(t.schedule)}},4482:(At,Le,k)=>{"use strict";k.d(Le,{A:()=>V,e:()=>t});var o=k(576);function V(ie){return(0,o.m)(ie?.lift)}function t(ie){return te=>{if(V(te))return te.lift(function(le){try{return ie(le,this)}catch(U){this.error(U)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(At,Le,k)=>{"use strict";k.d(Le,{Z:()=>ie});var o=k(4004);const{isArray:V}=Array;function ie(te){return(0,o.U)(le=>function t(te,le){return V(le)?te(...le):te(le)}(te,le))}},5032:(At,Le,k)=>{"use strict";function o(){}k.d(Le,{Z:()=>o})},9635:(At,Le,k)=>{"use strict";k.d(Le,{U:()=>t,z:()=>V});var o=k(4671);function V(...ie){return t(ie)}function t(ie){return 0===ie.length?o.y:1===ie.length?ie[0]:function(le){return ie.reduce((U,we)=>we(U),le)}}},7849:(At,Le,k)=>{"use strict";k.d(Le,{h:()=>t});var o=k(2416),V=k(3410);function t(ie){V.z.setTimeout(()=>{const{onUnhandledError:te}=o.v;if(!te)throw ie;te(ie)})}},4532:(At,Le,k)=>{"use strict";function o(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Le,{z:()=>o})},1281:(At,Le,k)=>{"use strict";k.d(Le,{Eq:()=>te,HM:()=>le,Ig:()=>V,fI:()=>U,su:()=>t});var o=k(1571);function V(de){return null!=de&&"false"!=`${de}`}function t(de,Pe=0){return function ie(de){return!isNaN(parseFloat(de))&&!isNaN(Number(de))}(de)?Number(de):Pe}function te(de){return Array.isArray(de)?de:[de]}function le(de){return null==de?"":"string"==typeof de?de:`${de}px`}function U(de){return de instanceof o.SBq?de.nativeElement:de}},2289:(At,Le,k)=>{"use strict";k.d(Le,{Yg:()=>Ve});var o=k(1571),V=k(1281),t=k(7579),ie=k(9841),te=k(7272),le=k(9751),U=k(5698),we=k(5684),de=k(8372),Pe=k(4004),Se=k(8675),Ye=k(2722),je=k(3353);const De=new Set;let ze,Qe=(()=>{class Be{constructor(Mt){this._platform=Mt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tt}matchMedia(Mt){return(this._platform.WEBKIT||this._platform.BLINK)&&function lt(Be){if(!De.has(Be))try{ze||(ze=document.createElement("style"),ze.setAttribute("type","text/css"),document.head.appendChild(ze)),ze.sheet&&(ze.sheet.insertRule(`@media ${Be} {body{ }}`,0),De.add(Be))}catch(it){console.error(it)}}(Mt),this._matchMedia(Mt)}}return Be.\u0275fac=function(Mt){return new(Mt||Be)(o.LFG(je.t4))},Be.\u0275prov=o.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})();function tt(Be){return{matches:"all"===Be||""===Be,media:Be,addListener:()=>{},removeListener:()=>{}}}let Ve=(()=>{class Be{constructor(Mt,St){this._mediaMatcher=Mt,this._zone=St,this._queries=new Map,this._destroySubject=new t.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Mt){return Fe((0,V.Eq)(Mt)).some(Kt=>this._registerQuery(Kt).mql.matches)}observe(Mt){const Kt=Fe((0,V.Eq)(Mt)).map(ln=>this._registerQuery(ln).observable);let wn=(0,ie.a)(Kt);return wn=(0,te.z)(wn.pipe((0,U.q)(1)),wn.pipe((0,we.T)(1),(0,de.b)(0))),wn.pipe((0,Pe.U)(ln=>{const jn={matches:!1,breakpoints:{}};return ln.forEach(({matches:yn,query:Yr})=>{jn.matches=jn.matches||yn,jn.breakpoints[Yr]=yn}),jn}))}_registerQuery(Mt){if(this._queries.has(Mt))return this._queries.get(Mt);const St=this._mediaMatcher.matchMedia(Mt),wn={observable:new le.y(ln=>{const jn=yn=>this._zone.run(()=>ln.next(yn));return St.addListener(jn),()=>{St.removeListener(jn)}}).pipe((0,Se.O)(St),(0,Pe.U)(({matches:ln})=>({query:Mt,matches:ln})),(0,Ye.R)(this._destroySubject)),mql:St};return this._queries.set(Mt,wn),wn}}return Be.\u0275fac=function(Mt){return new(Mt||Be)(o.LFG(Qe),o.LFG(o.R0b))},Be.\u0275prov=o.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})();function Fe(Be){return Be.map(it=>it.split(",")).reduce((it,Mt)=>it.concat(Mt)).map(it=>it.trim())}},3353:(At,Le,k)=>{"use strict";k.d(Le,{Mq:()=>ke,Oy:()=>Fe,_i:()=>De,ht:()=>tt,i$:()=>Se,kV:()=>lt,sA:()=>Ve,t4:()=>ie});var o=k(1571),V=k(6895);let t;try{t=typeof Intl<"u"&&Intl.v8BreakIterator}catch{t=!1}let de,Ye,je,ze,ie=(()=>{class Ne{constructor(it){this._platformId=it,this.isBrowser=this._platformId?(0,V.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!t)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ne.\u0275fac=function(it){return new(it||Ne)(o.LFG(o.Lbi))},Ne.\u0275prov=o.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();function Se(Ne){return function Pe(){if(null==de&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>de=!0}))}finally{de=de||!1}return de}()?Ne:!!Ne.capture}function ke(){if(null==je){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return je=!1,je;if("scrollBehavior"in document.documentElement.style)je=!0;else{const Ne=Element.prototype.scrollTo;je=!!Ne&&!/\{\s*\[native code\]\s*\}/.test(Ne.toString())}}return je}function De(){if("object"!=typeof document||!document)return 0;if(null==Ye){const Ne=document.createElement("div"),Be=Ne.style;Ne.dir="rtl",Be.width="1px",Be.overflow="auto",Be.visibility="hidden",Be.pointerEvents="none",Be.position="absolute";const it=document.createElement("div"),Mt=it.style;Mt.width="2px",Mt.height="1px",Ne.appendChild(it),document.body.appendChild(Ne),Ye=0,0===Ne.scrollLeft&&(Ne.scrollLeft=1,Ye=0===Ne.scrollLeft?1:2),Ne.remove()}return Ye}function lt(Ne){if(function Qe(){if(null==ze){const Ne=typeof document<"u"?document.head:null;ze=!(!Ne||!Ne.createShadowRoot&&!Ne.attachShadow)}return ze}()){const Be=Ne.getRootNode?Ne.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Be instanceof ShadowRoot)return Be}return null}function tt(){let Ne=typeof document<"u"&&document?document.activeElement:null;for(;Ne&&Ne.shadowRoot;){const Be=Ne.shadowRoot.activeElement;if(Be===Ne)break;Ne=Be}return Ne}function Ve(Ne){return Ne.composedPath?Ne.composedPath()[0]:Ne.target}function Fe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6895:(At,Le,k)=>{"use strict";k.d(Le,{Do:()=>tt,EM:()=>$s,HT:()=>ie,JF:()=>La,JJ:()=>bl,K0:()=>le,Mn:()=>Ji,Mx:()=>ii,NF:()=>Po,O5:()=>gi,Ov:()=>vl,PC:()=>Rr,RF:()=>go,S$:()=>ze,Tn:()=>ln,UT:()=>bt,V_:()=>de,Ye:()=>Ve,Zx:()=>oa,ax:()=>vi,b0:()=>lt,bD:()=>Xl,ez:()=>ji,mk:()=>Mr,n9:()=>Ci,ol:()=>sr,p6:()=>It,q:()=>t,sg:()=>vi,tP:()=>ra,w_:()=>te,x:()=>wn});var o=k(1571);let V=null;function t(){return V}function ie(Z){V||(V=Z)}class te{}const le=new o.OlP("DocumentToken");let U=(()=>{class Z{historyGo(G){throw new Error("Not implemented")}}return Z.\u0275fac=function(G){return new(G||Z)},Z.\u0275prov=o.Yz7({token:Z,factory:function(){return function we(){return(0,o.LFG)(Pe)}()},providedIn:"platform"}),Z})();const de=new o.OlP("Location Initialized");let Pe=(()=>{class Z extends U{constructor(G){super(),this._doc=G,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return t().getBaseHref(this._doc)}onPopState(G){const be=t().getGlobalEventTarget(this._doc,"window");return be.addEventListener("popstate",G,!1),()=>be.removeEventListener("popstate",G)}onHashChange(G){const be=t().getGlobalEventTarget(this._doc,"window");return be.addEventListener("hashchange",G,!1),()=>be.removeEventListener("hashchange",G)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(G){this._location.pathname=G}pushState(G,be,We){Se()?this._history.pushState(G,be,We):this._location.hash=We}replaceState(G,be,We){Se()?this._history.replaceState(G,be,We):this._location.hash=We}forward(){this._history.forward()}back(){this._history.back()}historyGo(G=0){this._history.go(G)}getState(){return this._history.state}}return Z.\u0275fac=function(G){return new(G||Z)(o.LFG(le))},Z.\u0275prov=o.Yz7({token:Z,factory:function(){return function Ye(){return new Pe((0,o.LFG)(le))}()},providedIn:"platform"}),Z})();function Se(){return!!window.history.pushState}function je(Z,he){if(0==Z.length)return he;if(0==he.length)return Z;let G=0;return Z.endsWith("/")&&G++,he.startsWith("/")&&G++,2==G?Z+he.substring(1):1==G?Z+he:Z+"/"+he}function ke(Z){const he=Z.match(/#|\?|$/),G=he&&he.index||Z.length;return Z.slice(0,G-("/"===Z[G-1]?1:0))+Z.slice(G)}function De(Z){return Z&&"?"!==Z[0]?"?"+Z:Z}let ze=(()=>{class Z{historyGo(G){throw new Error("Not implemented")}}return Z.\u0275fac=function(G){return new(G||Z)},Z.\u0275prov=o.Yz7({token:Z,factory:function(){return(0,o.f3M)(lt)},providedIn:"root"}),Z})();const Qe=new o.OlP("appBaseHref");let lt=(()=>{class Z extends ze{constructor(G,be){super(),this._platformLocation=G,this._removeListenerFns=[],this._baseHref=be??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}prepareExternalUrl(G){return je(this._baseHref,G)}path(G=!1){const be=this._platformLocation.pathname+De(this._platformLocation.search),We=this._platformLocation.hash;return We&&G?`${be}${We}`:be}pushState(G,be,We,Tt){const Yt=this.prepareExternalUrl(We+De(Tt));this._platformLocation.pushState(G,be,Yt)}replaceState(G,be,We,Tt){const Yt=this.prepareExternalUrl(We+De(Tt));this._platformLocation.replaceState(G,be,Yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return Z.\u0275fac=function(G){return new(G||Z)(o.LFG(U),o.LFG(Qe,8))},Z.\u0275prov=o.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})(),tt=(()=>{class Z extends ze{constructor(G,be){super(),this._platformLocation=G,this._baseHref="",this._removeListenerFns=[],null!=be&&(this._baseHref=be)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}path(G=!1){let be=this._platformLocation.hash;return null==be&&(be="#"),be.length>0?be.substring(1):be}prepareExternalUrl(G){const be=je(this._baseHref,G);return be.length>0?"#"+be:be}pushState(G,be,We,Tt){let Yt=this.prepareExternalUrl(We+De(Tt));0==Yt.length&&(Yt=this._platformLocation.pathname),this._platformLocation.pushState(G,be,Yt)}replaceState(G,be,We,Tt){let Yt=this.prepareExternalUrl(We+De(Tt));0==Yt.length&&(Yt=this._platformLocation.pathname),this._platformLocation.replaceState(G,be,Yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return Z.\u0275fac=function(G){return new(G||Z)(o.LFG(U),o.LFG(Qe,8))},Z.\u0275prov=o.Yz7({token:Z,factory:Z.\u0275fac}),Z})(),Ve=(()=>{class Z{constructor(G){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=G;const be=this._locationStrategy.getBaseHref();this._basePath=function it(Z){if(new RegExp("^(https?:)?//").test(Z)){const[,G]=Z.split(/\/\/[^\/]+/);return G}return Z}(ke(Be(be))),this._locationStrategy.onPopState(We=>{this._subject.emit({url:this.path(!0),pop:!0,state:We.state,type:We.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(G=!1){return this.normalize(this._locationStrategy.path(G))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(G,be=""){return this.path()==this.normalize(G+De(be))}normalize(G){return Z.stripTrailingSlash(function Ne(Z,he){return Z&&new RegExp(`^${Z}([/;?#]|$)`).test(he)?he.substring(Z.length):he}(this._basePath,Be(G)))}prepareExternalUrl(G){return G&&"/"!==G[0]&&(G="/"+G),this._locationStrategy.prepareExternalUrl(G)}go(G,be="",We=null){this._locationStrategy.pushState(We,"",G,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+De(be)),We)}replaceState(G,be="",We=null){this._locationStrategy.replaceState(We,"",G,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+De(be)),We)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(G=0){this._locationStrategy.historyGo?.(G)}onUrlChange(G){return this._urlChangeListeners.push(G),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(be=>{this._notifyUrlChangeListeners(be.url,be.state)})),()=>{const be=this._urlChangeListeners.indexOf(G);this._urlChangeListeners.splice(be,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(G="",be){this._urlChangeListeners.forEach(We=>We(G,be))}subscribe(G,be,We){return this._subject.subscribe({next:G,error:be,complete:We})}}return Z.normalizeQueryParams=De,Z.joinWithSlash=je,Z.stripTrailingSlash=ke,Z.\u0275fac=function(G){return new(G||Z)(o.LFG(ze))},Z.\u0275prov=o.Yz7({token:Z,factory:function(){return function Fe(){return new Ve((0,o.LFG)(ze))}()},providedIn:"root"}),Z})();function Be(Z){return Z.replace(/\/index.html$/,"")}var St=(()=>((St=St||{})[St.Decimal=0]="Decimal",St[St.Percent=1]="Percent",St[St.Currency=2]="Currency",St[St.Scientific=3]="Scientific",St))(),wn=(()=>((wn=wn||{})[wn.Format=0]="Format",wn[wn.Standalone=1]="Standalone",wn))(),ln=(()=>((ln=ln||{})[ln.Narrow=0]="Narrow",ln[ln.Abbreviated=1]="Abbreviated",ln[ln.Wide=2]="Wide",ln[ln.Short=3]="Short",ln))(),jn=(()=>((jn=jn||{})[jn.Short=0]="Short",jn[jn.Medium=1]="Medium",jn[jn.Long=2]="Long",jn[jn.Full=3]="Full",jn))(),yn=(()=>((yn=yn||{})[yn.Decimal=0]="Decimal",yn[yn.Group=1]="Group",yn[yn.List=2]="List",yn[yn.PercentSign=3]="PercentSign",yn[yn.PlusSign=4]="PlusSign",yn[yn.MinusSign=5]="MinusSign",yn[yn.Exponential=6]="Exponential",yn[yn.SuperscriptingExponent=7]="SuperscriptingExponent",yn[yn.PerMille=8]="PerMille",yn[yn.Infinity=9]="Infinity",yn[yn.NaN=10]="NaN",yn[yn.TimeSeparator=11]="TimeSeparator",yn[yn.CurrencyDecimal=12]="CurrencyDecimal",yn[yn.CurrencyGroup=13]="CurrencyGroup",yn))();function sr(Z,he,G){const be=(0,o.cg1)(Z),Tt=Ht([be[o.wAp.DayPeriodsFormat],be[o.wAp.DayPeriodsStandalone]],he);return Ht(Tt,G)}function Ji(Z,he,G){const be=(0,o.cg1)(Z),Tt=Ht([be[o.wAp.DaysFormat],be[o.wAp.DaysStandalone]],he);return Ht(Tt,G)}function bt(Z,he,G){const be=(0,o.cg1)(Z),Tt=Ht([be[o.wAp.MonthsFormat],be[o.wAp.MonthsStandalone]],he);return Ht(Tt,G)}function qt(Z,he){return Ht((0,o.cg1)(Z)[o.wAp.DateFormat],he)}function _t(Z,he){return Ht((0,o.cg1)(Z)[o.wAp.TimeFormat],he)}function Ot(Z,he){return Ht((0,o.cg1)(Z)[o.wAp.DateTimeFormat],he)}function un(Z,he){const G=(0,o.cg1)(Z),be=G[o.wAp.NumberSymbols][he];if(typeof be>"u"){if(he===yn.CurrencyDecimal)return G[o.wAp.NumberSymbols][yn.Decimal];if(he===yn.CurrencyGroup)return G[o.wAp.NumberSymbols][yn.Group]}return be}function Qn(Z,he){return(0,o.cg1)(Z)[o.wAp.NumberFormats][he]}function Zt(Z){if(!Z[o.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${Z[o.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ht(Z,he){for(let G=he;G>-1;G--)if(typeof Z[G]<"u")return Z[G];throw new Error("Locale data API: locale data undefined")}function ui(Z){const[he,G]=Z.split(":");return{hours:+he,minutes:+G}}const Or=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,In={},Ei=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var N=(()=>((N=N||{})[N.Short=0]="Short",N[N.ShortGMT=1]="ShortGMT",N[N.Long=2]="Long",N[N.Extended=3]="Extended",N))(),ce=(()=>((ce=ce||{})[ce.FullYear=0]="FullYear",ce[ce.Month=1]="Month",ce[ce.Date=2]="Date",ce[ce.Hours=3]="Hours",ce[ce.Minutes=4]="Minutes",ce[ce.Seconds=5]="Seconds",ce[ce.FractionalSeconds=6]="FractionalSeconds",ce[ce.Day=7]="Day",ce))(),ht=(()=>((ht=ht||{})[ht.DayPeriods=0]="DayPeriods",ht[ht.Days=1]="Days",ht[ht.Months=2]="Months",ht[ht.Eras=3]="Eras",ht))();function It(Z,he,G,be){let We=function Ge(Z){if(Lt(Z))return Z;if("number"==typeof Z&&!isNaN(Z))return new Date(Z);if("string"==typeof Z){if(Z=Z.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(Z)){const[We,Tt=1,Yt=1]=Z.split("-").map(Dn=>+Dn);return Jt(We,Tt-1,Yt)}const G=parseFloat(Z);if(!isNaN(Z-G))return new Date(G);let be;if(be=Z.match(Or))return function ft(Z){const he=new Date(0);let G=0,be=0;const We=Z[8]?he.setUTCFullYear:he.setFullYear,Tt=Z[8]?he.setUTCHours:he.setHours;Z[9]&&(G=Number(Z[9]+Z[10]),be=Number(Z[9]+Z[11])),We.call(he,Number(Z[1]),Number(Z[2])-1,Number(Z[3]));const Yt=Number(Z[4]||0)-G,Dn=Number(Z[5]||0)-be,cr=Number(Z[6]||0),Wt=Math.floor(1e3*parseFloat("0."+(Z[7]||0)));return Tt.call(he,Yt,Dn,cr,Wt),he}(be)}const he=new Date(Z);if(!Lt(he))throw new Error(`Unable to convert "${Z}" into a date`);return he}(Z);he=xt(G,he)||he;let Dn,Yt=[];for(;he;){if(Dn=Ei.exec(he),!Dn){Yt.push(he);break}{Yt=Yt.concat(Dn.slice(1));const Wi=Yt.pop();if(!Wi)break;he=Wi}}let cr=We.getTimezoneOffset();be&&(cr=Je(be,cr),We=function xe(Z,he,G){const be=G?-1:1,We=Z.getTimezoneOffset();return function Xe(Z,he){return(Z=new Date(Z.getTime())).setMinutes(Z.getMinutes()+he),Z}(Z,be*(Je(he,We)-We))}(We,be,!0));let Wt="";return Yt.forEach(Wi=>{const bi=function Re(Z){if(_e[Z])return _e[Z];let he;switch(Z){case"G":case"GG":case"GGG":he=hi(ht.Eras,ln.Abbreviated);break;case"GGGG":he=hi(ht.Eras,ln.Wide);break;case"GGGGG":he=hi(ht.Eras,ln.Narrow);break;case"y":he=fi(ce.FullYear,1,0,!1,!0);break;case"yy":he=fi(ce.FullYear,2,0,!0,!0);break;case"yyy":he=fi(ce.FullYear,3,0,!1,!0);break;case"yyyy":he=fi(ce.FullYear,4,0,!1,!0);break;case"Y":he=fe(1);break;case"YY":he=fe(2,!0);break;case"YYY":he=fe(3);break;case"YYYY":he=fe(4);break;case"M":case"L":he=fi(ce.Month,1,1);break;case"MM":case"LL":he=fi(ce.Month,2,1);break;case"MMM":he=hi(ht.Months,ln.Abbreviated);break;case"MMMM":he=hi(ht.Months,ln.Wide);break;case"MMMMM":he=hi(ht.Months,ln.Narrow);break;case"LLL":he=hi(ht.Months,ln.Abbreviated,wn.Standalone);break;case"LLLL":he=hi(ht.Months,ln.Wide,wn.Standalone);break;case"LLLLL":he=hi(ht.Months,ln.Narrow,wn.Standalone);break;case"w":he=X(1);break;case"ww":he=X(2);break;case"W":he=X(1,!0);break;case"d":he=fi(ce.Date,1);break;case"dd":he=fi(ce.Date,2);break;case"c":case"cc":he=fi(ce.Day,1);break;case"ccc":he=hi(ht.Days,ln.Abbreviated,wn.Standalone);break;case"cccc":he=hi(ht.Days,ln.Wide,wn.Standalone);break;case"ccccc":he=hi(ht.Days,ln.Narrow,wn.Standalone);break;case"cccccc":he=hi(ht.Days,ln.Short,wn.Standalone);break;case"E":case"EE":case"EEE":he=hi(ht.Days,ln.Abbreviated);break;case"EEEE":he=hi(ht.Days,ln.Wide);break;case"EEEEE":he=hi(ht.Days,ln.Narrow);break;case"EEEEEE":he=hi(ht.Days,ln.Short);break;case"a":case"aa":case"aaa":he=hi(ht.DayPeriods,ln.Abbreviated);break;case"aaaa":he=hi(ht.DayPeriods,ln.Wide);break;case"aaaaa":he=hi(ht.DayPeriods,ln.Narrow);break;case"b":case"bb":case"bbb":he=hi(ht.DayPeriods,ln.Abbreviated,wn.Standalone,!0);break;case"bbbb":he=hi(ht.DayPeriods,ln.Wide,wn.Standalone,!0);break;case"bbbbb":he=hi(ht.DayPeriods,ln.Narrow,wn.Standalone,!0);break;case"B":case"BB":case"BBB":he=hi(ht.DayPeriods,ln.Abbreviated,wn.Format,!0);break;case"BBBB":he=hi(ht.DayPeriods,ln.Wide,wn.Format,!0);break;case"BBBBB":he=hi(ht.DayPeriods,ln.Narrow,wn.Format,!0);break;case"h":he=fi(ce.Hours,1,-12);break;case"hh":he=fi(ce.Hours,2,-12);break;case"H":he=fi(ce.Hours,1);break;case"HH":he=fi(ce.Hours,2);break;case"m":he=fi(ce.Minutes,1);break;case"mm":he=fi(ce.Minutes,2);break;case"s":he=fi(ce.Seconds,1);break;case"ss":he=fi(ce.Seconds,2);break;case"S":he=fi(ce.FractionalSeconds,1);break;case"SS":he=fi(ce.FractionalSeconds,2);break;case"SSS":he=fi(ce.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":he=Pr(N.Short);break;case"ZZZZZ":he=Pr(N.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":he=Pr(N.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":he=Pr(N.Long);break;default:return null}return _e[Z]=he,he}(Wi);Wt+=bi?bi(We,G,cr):"''"===Wi?"'":Wi.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Wt}function Jt(Z,he,G){const be=new Date(0);return be.setFullYear(Z,he,G),be.setHours(0,0,0),be}function xt(Z,he){const G=function Zn(Z){return(0,o.cg1)(Z)[o.wAp.LocaleId]}(Z);if(In[G]=In[G]||{},In[G][he])return In[G][he];let be="";switch(he){case"shortDate":be=qt(Z,jn.Short);break;case"mediumDate":be=qt(Z,jn.Medium);break;case"longDate":be=qt(Z,jn.Long);break;case"fullDate":be=qt(Z,jn.Full);break;case"shortTime":be=_t(Z,jn.Short);break;case"mediumTime":be=_t(Z,jn.Medium);break;case"longTime":be=_t(Z,jn.Long);break;case"fullTime":be=_t(Z,jn.Full);break;case"short":const We=xt(Z,"shortTime"),Tt=xt(Z,"shortDate");be=Gt(Ot(Z,jn.Short),[We,Tt]);break;case"medium":const Yt=xt(Z,"mediumTime"),Dn=xt(Z,"mediumDate");be=Gt(Ot(Z,jn.Medium),[Yt,Dn]);break;case"long":const cr=xt(Z,"longTime"),Wt=xt(Z,"longDate");be=Gt(Ot(Z,jn.Long),[cr,Wt]);break;case"full":const Wi=xt(Z,"fullTime"),bi=xt(Z,"fullDate");be=Gt(Ot(Z,jn.Full),[Wi,bi])}return be&&(In[G][he]=be),be}function Gt(Z,he){return he&&(Z=Z.replace(/\{([^}]+)}/g,function(G,be){return null!=he&&be in he?he[be]:G})),Z}function bn(Z,he,G="-",be,We){let Tt="";(Z<0||We&&Z<=0)&&(We?Z=1-Z:(Z=-Z,Tt=G));let Yt=String(Z);for(;Yt.length<he;)Yt="0"+Yt;return be&&(Yt=Yt.slice(Yt.length-he)),Tt+Yt}function fi(Z,he,G=0,be=!1,We=!1){return function(Tt,Yt){let Dn=function Mo(Z,he){switch(Z){case ce.FullYear:return he.getFullYear();case ce.Month:return he.getMonth();case ce.Date:return he.getDate();case ce.Hours:return he.getHours();case ce.Minutes:return he.getMinutes();case ce.Seconds:return he.getSeconds();case ce.FractionalSeconds:return he.getMilliseconds();case ce.Day:return he.getDay();default:throw new Error(`Unknown DateType value "${Z}".`)}}(Z,Tt);if((G>0||Dn>-G)&&(Dn+=G),Z===ce.Hours)0===Dn&&-12===G&&(Dn=12);else if(Z===ce.FractionalSeconds)return function di(Z,he){return bn(Z,3).substring(0,he)}(Dn,he);const cr=un(Yt,yn.MinusSign);return bn(Dn,he,cr,be,We)}}function hi(Z,he,G=wn.Format,be=!1){return function(We,Tt){return function Br(Z,he,G,be,We,Tt){switch(G){case ht.Months:return bt(he,We,be)[Z.getMonth()];case ht.Days:return Ji(he,We,be)[Z.getDay()];case ht.DayPeriods:const Yt=Z.getHours(),Dn=Z.getMinutes();if(Tt){const Wt=function nn(Z){const he=(0,o.cg1)(Z);return Zt(he),(he[o.wAp.ExtraData][2]||[]).map(be=>"string"==typeof be?ui(be):[ui(be[0]),ui(be[1])])}(he),Wi=function zt(Z,he,G){const be=(0,o.cg1)(Z);Zt(be);const Tt=Ht([be[o.wAp.ExtraData][0],be[o.wAp.ExtraData][1]],he)||[];return Ht(Tt,G)||[]}(he,We,be),bi=Wt.findIndex(vo=>{if(Array.isArray(vo)){const[Ri,nr]=vo,Ls=Yt>=Ri.hours&&Dn>=Ri.minutes,Bs=Yt<nr.hours||Yt===nr.hours&&Dn<nr.minutes;if(Ri.hours<nr.hours){if(Ls&&Bs)return!0}else if(Ls||Bs)return!0}else if(vo.hours===Yt&&vo.minutes===Dn)return!0;return!1});if(-1!==bi)return Wi[bi]}return sr(he,We,be)[Yt<12?0:1];case ht.Eras:return function at(Z,he){return Ht((0,o.cg1)(Z)[o.wAp.Eras],he)}(he,be)[Z.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${G}`)}}(We,Tt,Z,he,G,be)}}function Pr(Z){return function(he,G,be){const We=-1*be,Tt=un(G,yn.MinusSign),Yt=We>0?Math.floor(We/60):Math.ceil(We/60);switch(Z){case N.Short:return(We>=0?"+":"")+bn(Yt,2,Tt)+bn(Math.abs(We%60),2,Tt);case N.ShortGMT:return"GMT"+(We>=0?"+":"")+bn(Yt,1,Tt);case N.Long:return"GMT"+(We>=0?"+":"")+bn(Yt,2,Tt)+":"+bn(Math.abs(We%60),2,Tt);case N.Extended:return 0===be?"Z":(We>=0?"+":"")+bn(Yt,2,Tt)+":"+bn(Math.abs(We%60),2,Tt);default:throw new Error(`Unknown zone width "${Z}"`)}}}function H(Z){return Jt(Z.getFullYear(),Z.getMonth(),Z.getDate()+(4-Z.getDay()))}function X(Z,he=!1){return function(G,be){let We;if(he){const Tt=new Date(G.getFullYear(),G.getMonth(),1).getDay()-1,Yt=G.getDate();We=1+Math.floor((Yt+Tt)/7)}else{const Tt=H(G),Yt=function Dt(Z){const he=Jt(Z,0,1).getDay();return Jt(Z,0,1+(he<=4?4:11)-he)}(Tt.getFullYear()),Dn=Tt.getTime()-Yt.getTime();We=1+Math.round(Dn/6048e5)}return bn(We,Z,un(be,yn.MinusSign))}}function fe(Z,he=!1){return function(G,be){return bn(H(G).getFullYear(),Z,un(be,yn.MinusSign),he)}}const _e={};function Je(Z,he){Z=Z.replace(/:/g,"");const G=Date.parse("Jan 01, 1970 00:00:00 "+Z)/6e4;return isNaN(G)?he:G}function Lt(Z){return Z instanceof Date&&!isNaN(Z.valueOf())}const Ut=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function An(Z,he,G,be,We,Tt,Yt=!1){let Dn="",cr=!1;if(isFinite(Z)){let Wt=function mi(Z){let be,We,Tt,Yt,Dn,he=Math.abs(Z)+"",G=0;for((We=he.indexOf("."))>-1&&(he=he.replace(".","")),(Tt=he.search(/e/i))>0?(We<0&&(We=Tt),We+=+he.slice(Tt+1),he=he.substring(0,Tt)):We<0&&(We=he.length),Tt=0;"0"===he.charAt(Tt);Tt++);if(Tt===(Dn=he.length))be=[0],We=1;else{for(Dn--;"0"===he.charAt(Dn);)Dn--;for(We-=Tt,be=[],Yt=0;Tt<=Dn;Tt++,Yt++)be[Yt]=Number(he.charAt(Tt))}return We>22&&(be=be.splice(0,21),G=We-1,We=1),{digits:be,exponent:G,integerLen:We}}(Z);Yt&&(Wt=function Ti(Z){if(0===Z.digits[0])return Z;const he=Z.digits.length-Z.integerLen;return Z.exponent?Z.exponent+=2:(0===he?Z.digits.push(0,0):1===he&&Z.digits.push(0),Z.integerLen+=2),Z}(Wt));let Wi=he.minInt,bi=he.minFrac,vo=he.maxFrac;if(Tt){const no=Tt.match(Ut);if(null===no)throw new Error(`${Tt} is not a valid digit info`);const Sr=no[1],ja=no[3],Vl=no[5];null!=Sr&&(Wi=Ii(Sr)),null!=ja&&(bi=Ii(ja)),null!=Vl?vo=Ii(Vl):null!=ja&&bi>vo&&(vo=bi)}!function Wr(Z,he,G){if(he>G)throw new Error(`The minimum number of digits after fraction (${he}) is higher than the maximum (${G}).`);let be=Z.digits,We=be.length-Z.integerLen;const Tt=Math.min(Math.max(he,We),G);let Yt=Tt+Z.integerLen,Dn=be[Yt];if(Yt>0){be.splice(Math.max(Z.integerLen,Yt));for(let bi=Yt;bi<be.length;bi++)be[bi]=0}else{We=Math.max(0,We),Z.integerLen=1,be.length=Math.max(1,Yt=Tt+1),be[0]=0;for(let bi=1;bi<Yt;bi++)be[bi]=0}if(Dn>=5)if(Yt-1<0){for(let bi=0;bi>Yt;bi--)be.unshift(0),Z.integerLen++;be.unshift(1),Z.integerLen++}else be[Yt-1]++;for(;We<Math.max(0,Tt);We++)be.push(0);let cr=0!==Tt;const Wt=he+Z.integerLen,Wi=be.reduceRight(function(bi,vo,Ri,nr){return nr[Ri]=(vo+=bi)<10?vo:vo-10,cr&&(0===nr[Ri]&&Ri>=Wt?nr.pop():cr=!1),vo>=10?1:0},0);Wi&&(be.unshift(Wi),Z.integerLen++)}(Wt,bi,vo);let Ri=Wt.digits,nr=Wt.integerLen;const Ls=Wt.exponent;let Bs=[];for(cr=Ri.every(no=>!no);nr<Wi;nr++)Ri.unshift(0);for(;nr<0;nr++)Ri.unshift(0);nr>0?Bs=Ri.splice(nr,Ri.length):(Bs=Ri,Ri=[0]);const bo=[];for(Ri.length>=he.lgSize&&bo.unshift(Ri.splice(-he.lgSize,Ri.length).join(""));Ri.length>he.gSize;)bo.unshift(Ri.splice(-he.gSize,Ri.length).join(""));Ri.length&&bo.unshift(Ri.join("")),Dn=bo.join(un(G,be)),Bs.length&&(Dn+=un(G,We)+Bs.join("")),Ls&&(Dn+=un(G,yn.Exponential)+"+"+Ls)}else Dn=un(G,yn.Infinity);return Dn=Z<0&&!cr?he.negPre+Dn+he.negSuf:he.posPre+Dn+he.posSuf,Dn}function oi(Z,he="-"){const G={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},be=Z.split(";"),We=be[0],Tt=be[1],Yt=-1!==We.indexOf(".")?We.split("."):[We.substring(0,We.lastIndexOf("0")+1),We.substring(We.lastIndexOf("0")+1)],Dn=Yt[0],cr=Yt[1]||"";G.posPre=Dn.substring(0,Dn.indexOf("#"));for(let Wi=0;Wi<cr.length;Wi++){const bi=cr.charAt(Wi);"0"===bi?G.minFrac=G.maxFrac=Wi+1:"#"===bi?G.maxFrac=Wi+1:G.posSuf+=bi}const Wt=Dn.split(",");if(G.gSize=Wt[1]?Wt[1].length:0,G.lgSize=Wt[2]||Wt[1]?(Wt[2]||Wt[1]).length:0,Tt){const Wi=We.length-G.posPre.length-G.posSuf.length,bi=Tt.indexOf("#");G.negPre=Tt.substring(0,bi).replace(/'/g,""),G.negSuf=Tt.slice(bi+Wi).replace(/'/g,"")}else G.negPre=he+G.posPre,G.negSuf=G.posSuf;return G}function Ii(Z){const he=parseInt(Z);if(isNaN(he))throw new Error("Invalid integer literal when parsing "+Z);return he}function ii(Z,he){he=encodeURIComponent(he);for(const G of Z.split(";")){const be=G.indexOf("="),[We,Tt]=-1==be?[G,""]:[G.slice(0,be),G.slice(be+1)];if(We.trim()===he)return decodeURIComponent(Tt)}return null}const Tr=/\s+/,Ai=[];let Mr=(()=>{class Z{constructor(G,be,We,Tt){this._iterableDiffers=G,this._keyValueDiffers=be,this._ngEl=We,this._renderer=Tt,this.initialClasses=Ai,this.stateMap=new Map}set klass(G){this.initialClasses=null!=G?G.trim().split(Tr):Ai}set ngClass(G){this.rawClass="string"==typeof G?G.trim().split(Tr):G}ngDoCheck(){for(const be of this.initialClasses)this._updateState(be,!0);const G=this.rawClass;if(Array.isArray(G)||G instanceof Set)for(const be of G)this._updateState(be,!0);else if(null!=G)for(const be of Object.keys(G))this._updateState(be,Boolean(G[be]));this._applyStateDiff()}_updateState(G,be){const We=this.stateMap.get(G);void 0!==We?(We.enabled!==be&&(We.changed=!0,We.enabled=be),We.touched=!0):this.stateMap.set(G,{enabled:be,changed:!0,touched:!0})}_applyStateDiff(){for(const G of this.stateMap){const be=G[0],We=G[1];We.changed?(this._toggleClass(be,We.enabled),We.changed=!1):We.touched||(We.enabled&&this._toggleClass(be,!1),this.stateMap.delete(be)),We.touched=!1}}_toggleClass(G,be){(G=G.trim()).length>0&&G.split(Tr).forEach(We=>{be?this._renderer.addClass(this._ngEl.nativeElement,We):this._renderer.removeClass(this._ngEl.nativeElement,We)})}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),Z})();class Yn{constructor(he,G,be,We){this.$implicit=he,this.ngForOf=G,this.index=be,this.count=We}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vi=(()=>{class Z{set ngForOf(G){this._ngForOf=G,this._ngForOfDirty=!0}set ngForTrackBy(G){this._trackByFn=G}get ngForTrackBy(){return this._trackByFn}constructor(G,be,We){this._viewContainer=G,this._template=be,this._differs=We,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(G){G&&(this._template=G)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const G=this._ngForOf;!this._differ&&G&&(this._differ=this._differs.find(G).create(this.ngForTrackBy))}if(this._differ){const G=this._differ.diff(this._ngForOf);G&&this._applyChanges(G)}}_applyChanges(G){const be=this._viewContainer;G.forEachOperation((We,Tt,Yt)=>{if(null==We.previousIndex)be.createEmbeddedView(this._template,new Yn(We.item,this._ngForOf,-1,-1),null===Yt?void 0:Yt);else if(null==Yt)be.remove(null===Tt?void 0:Tt);else if(null!==Tt){const Dn=be.get(Tt);be.move(Dn,Yt),Oi(Dn,We)}});for(let We=0,Tt=be.length;We<Tt;We++){const Dn=be.get(We).context;Dn.index=We,Dn.count=Tt,Dn.ngForOf=this._ngForOf}G.forEachIdentityChange(We=>{Oi(be.get(We.currentIndex),We)})}static ngTemplateContextGuard(G,be){return!0}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),Z})();function Oi(Z,he){Z.context.$implicit=he.item}let gi=(()=>{class Z{constructor(G,be){this._viewContainer=G,this._context=new mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=be}set ngIf(G){this._context.$implicit=this._context.ngIf=G,this._updateView()}set ngIfThen(G){Ui("ngIfThen",G),this._thenTemplateRef=G,this._thenViewRef=null,this._updateView()}set ngIfElse(G){Ui("ngIfElse",G),this._elseTemplateRef=G,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(G,be){return!0}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.s_b),o.Y36(o.Rgc))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),Z})();class mo{constructor(){this.$implicit=null,this.ngIf=null}}function Ui(Z,he){if(he&&!he.createEmbeddedView)throw new Error(`${Z} must be a TemplateRef, but received '${(0,o.AaK)(he)}'.`)}class ka{constructor(he,G){this._viewContainerRef=he,this._templateRef=G,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(he){he&&!this._created?this.create():!he&&this._created&&this.destroy()}}let go=(()=>{class Z{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(G){this._ngSwitch=G,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(G){this._defaultViews.push(G)}_matchCase(G){const be=G==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||be,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),be}_updateDefaultCases(G){if(this._defaultViews.length>0&&G!==this._defaultUsed){this._defaultUsed=G;for(const be of this._defaultViews)be.enforceState(G)}}}return Z.\u0275fac=function(G){return new(G||Z)},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),Z})(),Ci=(()=>{class Z{constructor(G,be,We){this.ngSwitch=We,We._addCase(),this._view=new ka(G,be)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(go,9))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),Z})(),Rr=(()=>{class Z{constructor(G,be,We){this._ngEl=G,this._differs=be,this._renderer=We,this._ngStyle=null,this._differ=null}set ngStyle(G){this._ngStyle=G,!this._differ&&G&&(this._differ=this._differs.find(G).create())}ngDoCheck(){if(this._differ){const G=this._differ.diff(this._ngStyle);G&&this._applyChanges(G)}}_setStyle(G,be){const[We,Tt]=G.split("."),Yt=-1===We.indexOf("-")?void 0:o.JOm.DashCase;null!=be?this._renderer.setStyle(this._ngEl.nativeElement,We,Tt?`${be}${Tt}`:be,Yt):this._renderer.removeStyle(this._ngEl.nativeElement,We,Yt)}_applyChanges(G){G.forEachRemovedItem(be=>this._setStyle(be.key,null)),G.forEachAddedItem(be=>this._setStyle(be.key,be.currentValue)),G.forEachChangedItem(be=>this._setStyle(be.key,be.currentValue))}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),Z})(),ra=(()=>{class Z{constructor(G){this._viewContainerRef=G,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(G){if(G.ngTemplateOutlet||G.ngTemplateOutletInjector){const be=this._viewContainerRef;if(this._viewRef&&be.remove(be.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:We,ngTemplateOutletContext:Tt,ngTemplateOutletInjector:Yt}=this;this._viewRef=be.createEmbeddedView(We,Tt,Yt?{injector:Yt}:void 0)}else this._viewRef=null}else this._viewRef&&G.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.s_b))},Z.\u0275dir=o.lG2({type:Z,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),Z})();function zr(Z,he){return new o.vHH(2100,!1)}class ga{createSubscription(he,G){return he.subscribe({next:G,error:be=>{throw be}})}dispose(he){he.unsubscribe()}}class Ql{createSubscription(he,G){return he.then(G,be=>{throw be})}dispose(he){}}const ar=new Ql,So=new ga;let vl=(()=>{class Z{constructor(G){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=G}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(G){return this._obj?G!==this._obj?(this._dispose(),this.transform(G)):this._latestValue:(G&&this._subscribe(G),this._latestValue)}_subscribe(G){this._obj=G,this._strategy=this._selectStrategy(G),this._subscription=this._strategy.createSubscription(G,be=>this._updateLatestValue(G,be))}_selectStrategy(G){if((0,o.QGY)(G))return ar;if((0,o.F4k)(G))return So;throw zr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(G,be){G===this._obj&&(this._latestValue=be,this._ref.markForCheck())}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.sBO,16))},Z.\u0275pipe=o.Yjl({name:"async",type:Z,pure:!1,standalone:!0}),Z})(),bl=(()=>{class Z{constructor(G){this._locale=G}transform(G,be,We){if(!es(G))return null;We=We||this._locale;try{return function Si(Z,he,G){return An(Z,oi(Qn(he,St.Decimal),un(he,yn.MinusSign)),he,yn.Group,yn.Decimal,G)}(xl(G),We,be)}catch(Tt){throw zr()}}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.soG,16))},Z.\u0275pipe=o.Yjl({name:"number",type:Z,pure:!0,standalone:!0}),Z})(),oa=(()=>{class Z{constructor(G){this._locale=G}transform(G,be,We){if(!es(G))return null;We=We||this._locale;try{return function ei(Z,he,G){return An(Z,oi(Qn(he,St.Percent),un(he,yn.MinusSign)),he,yn.Group,yn.Decimal,G,!0).replace(new RegExp("%","g"),un(he,yn.PercentSign))}(xl(G),We,be)}catch(Tt){throw zr()}}}return Z.\u0275fac=function(G){return new(G||Z)(o.Y36(o.soG,16))},Z.\u0275pipe=o.Yjl({name:"percent",type:Z,pure:!0,standalone:!0}),Z})();function es(Z){return!(null==Z||""===Z||Z!=Z)}function xl(Z){if("string"==typeof Z&&!isNaN(Number(Z)-parseFloat(Z)))return Number(Z);if("number"!=typeof Z)throw new Error(`${Z} is not a number`);return Z}let ji=(()=>{class Z{}return Z.\u0275fac=function(G){return new(G||Z)},Z.\u0275mod=o.oAB({type:Z}),Z.\u0275inj=o.cJS({}),Z})();const Xl="browser";function Po(Z){return Z===Xl}let $s=(()=>{class Z{}return Z.\u0275prov=(0,o.Yz7)({token:Z,providedIn:"root",factory:()=>new Uo((0,o.LFG)(le),window)}),Z})();class Uo{constructor(he,G){this.document=he,this.window=G,this.offset=()=>[0,0]}setOffset(he){this.offset=Array.isArray(he)?()=>he:he}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(he){this.supportsScrolling()&&this.window.scrollTo(he[0],he[1])}scrollToAnchor(he){if(!this.supportsScrolling())return;const G=function Ts(Z,he){const G=Z.getElementById(he)||Z.getElementsByName(he)[0];if(G)return G;if("function"==typeof Z.createTreeWalker&&Z.body&&(Z.body.createShadowRoot||Z.body.attachShadow)){const be=Z.createTreeWalker(Z.body,NodeFilter.SHOW_ELEMENT);let We=be.currentNode;for(;We;){const Tt=We.shadowRoot;if(Tt){const Yt=Tt.getElementById(he)||Tt.querySelector(`[name="${he}"]`);if(Yt)return Yt}We=be.nextNode()}}return null}(this.document,he);G&&(this.scrollToElement(G),G.focus())}setHistoryScrollRestoration(he){if(this.supportScrollRestoration()){const G=this.window.history;G&&G.scrollRestoration&&(G.scrollRestoration=he)}}scrollToElement(he){const G=he.getBoundingClientRect(),be=G.left+this.window.pageXOffset,We=G.top+this.window.pageYOffset,Tt=this.offset();this.window.scrollTo(be-Tt[0],We-Tt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const he=Es(this.window.history)||Es(Object.getPrototypeOf(this.window.history));return!(!he||!he.writable&&!he.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Es(Z){return Object.getOwnPropertyDescriptor(Z,"scrollRestoration")}class La{}},529:(At,Le,k)=>{"use strict";k.d(Le,{JF:()=>Pr,LE:()=>lt,TP:()=>at,Zn:()=>jn,dt:()=>Kt,eN:()=>Zn});var o=k(6895),V=k(1571),t=k(9646),ie=k(9751),te=k(4351),le=k(9300),U=k(4004);class we{}class de{}class Pe{constructor(H){this.normalizedNames=new Map,this.lazyUpdate=null,H?this.lazyInit="string"==typeof H?()=>{this.headers=new Map,H.split("\n").forEach(X=>{const fe=X.indexOf(":");if(fe>0){const _e=X.slice(0,fe),Re=_e.toLowerCase(),Je=X.slice(fe+1).trim();this.maybeSetNormalizedName(_e,Re),this.headers.has(Re)?this.headers.get(Re).push(Je):this.headers.set(Re,[Je])}})}:()=>{this.headers=new Map,Object.keys(H).forEach(X=>{let fe=H[X];const _e=X.toLowerCase();"string"==typeof fe&&(fe=[fe]),fe.length>0&&(this.headers.set(_e,fe),this.maybeSetNormalizedName(X,_e))})}:this.headers=new Map}has(H){return this.init(),this.headers.has(H.toLowerCase())}get(H){this.init();const X=this.headers.get(H.toLowerCase());return X&&X.length>0?X[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(H){return this.init(),this.headers.get(H.toLowerCase())||null}append(H,X){return this.clone({name:H,value:X,op:"a"})}set(H,X){return this.clone({name:H,value:X,op:"s"})}delete(H,X){return this.clone({name:H,value:X,op:"d"})}maybeSetNormalizedName(H,X){this.normalizedNames.has(X)||this.normalizedNames.set(X,H)}init(){this.lazyInit&&(this.lazyInit instanceof Pe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(H=>this.applyUpdate(H)),this.lazyUpdate=null))}copyFrom(H){H.init(),Array.from(H.headers.keys()).forEach(X=>{this.headers.set(X,H.headers.get(X)),this.normalizedNames.set(X,H.normalizedNames.get(X))})}clone(H){const X=new Pe;return X.lazyInit=this.lazyInit&&this.lazyInit instanceof Pe?this.lazyInit:this,X.lazyUpdate=(this.lazyUpdate||[]).concat([H]),X}applyUpdate(H){const X=H.name.toLowerCase();switch(H.op){case"a":case"s":let fe=H.value;if("string"==typeof fe&&(fe=[fe]),0===fe.length)return;this.maybeSetNormalizedName(H.name,X);const _e=("a"===H.op?this.headers.get(X):void 0)||[];_e.push(...fe),this.headers.set(X,_e);break;case"d":const Re=H.value;if(Re){let Je=this.headers.get(X);if(!Je)return;Je=Je.filter(Xe=>-1===Re.indexOf(Xe)),0===Je.length?(this.headers.delete(X),this.normalizedNames.delete(X)):this.headers.set(X,Je)}else this.headers.delete(X),this.normalizedNames.delete(X)}}forEach(H){this.init(),Array.from(this.normalizedNames.keys()).forEach(X=>H(this.normalizedNames.get(X),this.headers.get(X)))}}class Ye{encodeKey(H){return ze(H)}encodeValue(H){return ze(H)}decodeKey(H){return decodeURIComponent(H)}decodeValue(H){return decodeURIComponent(H)}}const ke=/%(\d[a-f0-9])/gi,De={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ze(Dt){return encodeURIComponent(Dt).replace(ke,(H,X)=>De[X]??H)}function Qe(Dt){return`${Dt}`}class lt{constructor(H={}){if(this.updates=null,this.cloneFrom=null,this.encoder=H.encoder||new Ye,H.fromString){if(H.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function je(Dt,H){const X=new Map;return Dt.length>0&&Dt.replace(/^\?/,"").split("&").forEach(_e=>{const Re=_e.indexOf("="),[Je,Xe]=-1==Re?[H.decodeKey(_e),""]:[H.decodeKey(_e.slice(0,Re)),H.decodeValue(_e.slice(Re+1))],xe=X.get(Je)||[];xe.push(Xe),X.set(Je,xe)}),X}(H.fromString,this.encoder)}else H.fromObject?(this.map=new Map,Object.keys(H.fromObject).forEach(X=>{const fe=H.fromObject[X],_e=Array.isArray(fe)?fe.map(Qe):[Qe(fe)];this.map.set(X,_e)})):this.map=null}has(H){return this.init(),this.map.has(H)}get(H){this.init();const X=this.map.get(H);return X?X[0]:null}getAll(H){return this.init(),this.map.get(H)||null}keys(){return this.init(),Array.from(this.map.keys())}append(H,X){return this.clone({param:H,value:X,op:"a"})}appendAll(H){const X=[];return Object.keys(H).forEach(fe=>{const _e=H[fe];Array.isArray(_e)?_e.forEach(Re=>{X.push({param:fe,value:Re,op:"a"})}):X.push({param:fe,value:_e,op:"a"})}),this.clone(X)}set(H,X){return this.clone({param:H,value:X,op:"s"})}delete(H,X){return this.clone({param:H,value:X,op:"d"})}toString(){return this.init(),this.keys().map(H=>{const X=this.encoder.encodeKey(H);return this.map.get(H).map(fe=>X+"="+this.encoder.encodeValue(fe)).join("&")}).filter(H=>""!==H).join("&")}clone(H){const X=new lt({encoder:this.encoder});return X.cloneFrom=this.cloneFrom||this,X.updates=(this.updates||[]).concat(H),X}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(H=>this.map.set(H,this.cloneFrom.map.get(H))),this.updates.forEach(H=>{switch(H.op){case"a":case"s":const X=("a"===H.op?this.map.get(H.param):void 0)||[];X.push(Qe(H.value)),this.map.set(H.param,X);break;case"d":if(void 0===H.value){this.map.delete(H.param);break}{let fe=this.map.get(H.param)||[];const _e=fe.indexOf(Qe(H.value));-1!==_e&&fe.splice(_e,1),fe.length>0?this.map.set(H.param,fe):this.map.delete(H.param)}}}),this.cloneFrom=this.updates=null)}}class Ve{constructor(){this.map=new Map}set(H,X){return this.map.set(H,X),this}get(H){return this.map.has(H)||this.map.set(H,H.defaultValue()),this.map.get(H)}delete(H){return this.map.delete(H),this}has(H){return this.map.has(H)}keys(){return this.map.keys()}}function Ne(Dt){return typeof ArrayBuffer<"u"&&Dt instanceof ArrayBuffer}function Be(Dt){return typeof Blob<"u"&&Dt instanceof Blob}function it(Dt){return typeof FormData<"u"&&Dt instanceof FormData}class St{constructor(H,X,fe,_e){let Re;if(this.url=X,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=H.toUpperCase(),function Fe(Dt){switch(Dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||_e?(this.body=void 0!==fe?fe:null,Re=_e):Re=fe,Re&&(this.reportProgress=!!Re.reportProgress,this.withCredentials=!!Re.withCredentials,Re.responseType&&(this.responseType=Re.responseType),Re.headers&&(this.headers=Re.headers),Re.context&&(this.context=Re.context),Re.params&&(this.params=Re.params)),this.headers||(this.headers=new Pe),this.context||(this.context=new Ve),this.params){const Je=this.params.toString();if(0===Je.length)this.urlWithParams=X;else{const Xe=X.indexOf("?");this.urlWithParams=X+(-1===Xe?"?":Xe<X.length-1?"&":"")+Je}}else this.params=new lt,this.urlWithParams=X}serializeBody(){return null===this.body?null:Ne(this.body)||Be(this.body)||it(this.body)||function Mt(Dt){return typeof URLSearchParams<"u"&&Dt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||it(this.body)?null:Be(this.body)?this.body.type||null:Ne(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(H={}){const X=H.method||this.method,fe=H.url||this.url,_e=H.responseType||this.responseType,Re=void 0!==H.body?H.body:this.body,Je=void 0!==H.withCredentials?H.withCredentials:this.withCredentials,Xe=void 0!==H.reportProgress?H.reportProgress:this.reportProgress;let xe=H.headers||this.headers,Ge=H.params||this.params;const ft=H.context??this.context;return void 0!==H.setHeaders&&(xe=Object.keys(H.setHeaders).reduce((Lt,Ut)=>Lt.set(Ut,H.setHeaders[Ut]),xe)),H.setParams&&(Ge=Object.keys(H.setParams).reduce((Lt,Ut)=>Lt.set(Ut,H.setParams[Ut]),Ge)),new St(X,fe,Re,{params:Ge,headers:xe,context:ft,reportProgress:Xe,responseType:_e,withCredentials:Je})}}var Kt=(()=>((Kt=Kt||{})[Kt.Sent=0]="Sent",Kt[Kt.UploadProgress=1]="UploadProgress",Kt[Kt.ResponseHeader=2]="ResponseHeader",Kt[Kt.DownloadProgress=3]="DownloadProgress",Kt[Kt.Response=4]="Response",Kt[Kt.User=5]="User",Kt))();class wn{constructor(H,X=200,fe="OK"){this.headers=H.headers||new Pe,this.status=void 0!==H.status?H.status:X,this.statusText=H.statusText||fe,this.url=H.url||null,this.ok=this.status>=200&&this.status<300}}class ln extends wn{constructor(H={}){super(H),this.type=Kt.ResponseHeader}clone(H={}){return new ln({headers:H.headers||this.headers,status:void 0!==H.status?H.status:this.status,statusText:H.statusText||this.statusText,url:H.url||this.url||void 0})}}class jn extends wn{constructor(H={}){super(H),this.type=Kt.Response,this.body=void 0!==H.body?H.body:null}clone(H={}){return new jn({body:void 0!==H.body?H.body:this.body,headers:H.headers||this.headers,status:void 0!==H.status?H.status:this.status,statusText:H.statusText||this.statusText,url:H.url||this.url||void 0})}}class yn extends wn{constructor(H){super(H,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${H.url||"(unknown url)"}`:`Http failure response for ${H.url||"(unknown url)"}: ${H.status} ${H.statusText}`,this.error=H.error||null}}function Yr(Dt,H){return{body:H,headers:Dt.headers,context:Dt.context,observe:Dt.observe,params:Dt.params,reportProgress:Dt.reportProgress,responseType:Dt.responseType,withCredentials:Dt.withCredentials}}let Zn=(()=>{class Dt{constructor(X){this.handler=X}request(X,fe,_e={}){let Re;if(X instanceof St)Re=X;else{let xe,Ge;xe=_e.headers instanceof Pe?_e.headers:new Pe(_e.headers),_e.params&&(Ge=_e.params instanceof lt?_e.params:new lt({fromObject:_e.params})),Re=new St(X,fe,void 0!==_e.body?_e.body:null,{headers:xe,context:_e.context,params:Ge,reportProgress:_e.reportProgress,responseType:_e.responseType||"json",withCredentials:_e.withCredentials})}const Je=(0,t.of)(Re).pipe((0,te.b)(xe=>this.handler.handle(xe)));if(X instanceof St||"events"===_e.observe)return Je;const Xe=Je.pipe((0,le.h)(xe=>xe instanceof jn));switch(_e.observe||"body"){case"body":switch(Re.responseType){case"arraybuffer":return Xe.pipe((0,U.U)(xe=>{if(null!==xe.body&&!(xe.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return xe.body}));case"blob":return Xe.pipe((0,U.U)(xe=>{if(null!==xe.body&&!(xe.body instanceof Blob))throw new Error("Response is not a Blob.");return xe.body}));case"text":return Xe.pipe((0,U.U)(xe=>{if(null!==xe.body&&"string"!=typeof xe.body)throw new Error("Response is not a string.");return xe.body}));default:return Xe.pipe((0,U.U)(xe=>xe.body))}case"response":return Xe;default:throw new Error(`Unreachable: unhandled observe type ${_e.observe}}`)}}delete(X,fe={}){return this.request("DELETE",X,fe)}get(X,fe={}){return this.request("GET",X,fe)}head(X,fe={}){return this.request("HEAD",X,fe)}jsonp(X,fe){return this.request("JSONP",X,{params:(new lt).append(fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(X,fe={}){return this.request("OPTIONS",X,fe)}patch(X,fe,_e={}){return this.request("PATCH",X,Yr(_e,fe))}post(X,fe,_e={}){return this.request("POST",X,Yr(_e,fe))}put(X,fe,_e={}){return this.request("PUT",X,Yr(_e,fe))}}return Dt.\u0275fac=function(X){return new(X||Dt)(V.LFG(we))},Dt.\u0275prov=V.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();function sr(Dt,H){return H(Dt)}function Ji(Dt,H){return(X,fe)=>H.intercept(X,{handle:_e=>Dt(_e,fe)})}const at=new V.OlP("HTTP_INTERCEPTORS"),Pt=new V.OlP("HTTP_INTERCEPTOR_FNS");function Vt(){let Dt=null;return(H,X)=>(null===Dt&&(Dt=((0,V.f3M)(at,{optional:!0})??[]).reduceRight(Ji,sr)),Dt(H,X))}let qt=(()=>{class Dt extends we{constructor(X,fe){super(),this.backend=X,this.injector=fe,this.chain=null}handle(X){if(null===this.chain){const fe=Array.from(new Set(this.injector.get(Pt)));this.chain=fe.reduceRight((_e,Re)=>function bt(Dt,H,X){return(fe,_e)=>X.runInContext(()=>H(fe,Re=>Dt(Re,_e)))}(_e,Re,this.injector),sr)}return this.chain(X,fe=>this.backend.handle(fe))}}return Dt.\u0275fac=function(X){return new(X||Dt)(V.LFG(de),V.LFG(V.lqb))},Dt.\u0275prov=V.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const zt=/^\)\]\}',?\n/;let Ht=(()=>{class Dt{constructor(X){this.xhrFactory=X}handle(X){if("JSONP"===X.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie.y(fe=>{const _e=this.xhrFactory.build();if(_e.open(X.method,X.urlWithParams),X.withCredentials&&(_e.withCredentials=!0),X.headers.forEach((Ie,Ae)=>_e.setRequestHeader(Ie,Ae.join(","))),X.headers.has("Accept")||_e.setRequestHeader("Accept","application/json, text/plain, */*"),!X.headers.has("Content-Type")){const Ie=X.detectContentTypeHeader();null!==Ie&&_e.setRequestHeader("Content-Type",Ie)}if(X.responseType){const Ie=X.responseType.toLowerCase();_e.responseType="json"!==Ie?Ie:"text"}const Re=X.serializeBody();let Je=null;const Xe=()=>{if(null!==Je)return Je;const Ie=_e.statusText||"OK",Ae=new Pe(_e.getAllResponseHeaders()),Me=function Xt(Dt){return"responseURL"in Dt&&Dt.responseURL?Dt.responseURL:/^X-Request-URL:/m.test(Dt.getAllResponseHeaders())?Dt.getResponseHeader("X-Request-URL"):null}(_e)||X.url;return Je=new ln({headers:Ae,status:_e.status,statusText:Ie,url:Me}),Je},xe=()=>{let{headers:Ie,status:Ae,statusText:Me,url:qe}=Xe(),He=null;204!==Ae&&(He=typeof _e.response>"u"?_e.responseText:_e.response),0===Ae&&(Ae=He?200:0);let Rt=Ae>=200&&Ae<300;if("json"===X.responseType&&"string"==typeof He){const jt=He;He=He.replace(zt,"");try{He=""!==He?JSON.parse(He):null}catch(en){He=jt,Rt&&(Rt=!1,He={error:en,text:He})}}Rt?(fe.next(new jn({body:He,headers:Ie,status:Ae,statusText:Me,url:qe||void 0})),fe.complete()):fe.error(new yn({error:He,headers:Ie,status:Ae,statusText:Me,url:qe||void 0}))},Ge=Ie=>{const{url:Ae}=Xe(),Me=new yn({error:Ie,status:_e.status||0,statusText:_e.statusText||"Unknown Error",url:Ae||void 0});fe.error(Me)};let ft=!1;const Lt=Ie=>{ft||(fe.next(Xe()),ft=!0);let Ae={type:Kt.DownloadProgress,loaded:Ie.loaded};Ie.lengthComputable&&(Ae.total=Ie.total),"text"===X.responseType&&_e.responseText&&(Ae.partialText=_e.responseText),fe.next(Ae)},Ut=Ie=>{let Ae={type:Kt.UploadProgress,loaded:Ie.loaded};Ie.lengthComputable&&(Ae.total=Ie.total),fe.next(Ae)};return _e.addEventListener("load",xe),_e.addEventListener("error",Ge),_e.addEventListener("timeout",Ge),_e.addEventListener("abort",Ge),X.reportProgress&&(_e.addEventListener("progress",Lt),null!==Re&&_e.upload&&_e.upload.addEventListener("progress",Ut)),_e.send(Re),fe.next({type:Kt.Sent}),()=>{_e.removeEventListener("error",Ge),_e.removeEventListener("abort",Ge),_e.removeEventListener("load",xe),_e.removeEventListener("timeout",Ge),X.reportProgress&&(_e.removeEventListener("progress",Lt),null!==Re&&_e.upload&&_e.upload.removeEventListener("progress",Ut)),_e.readyState!==_e.DONE&&_e.abort()}})}}return Dt.\u0275fac=function(X){return new(X||Dt)(V.LFG(o.JF))},Dt.\u0275prov=V.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const ui=new V.OlP("XSRF_ENABLED"),Zi="XSRF-TOKEN",qi=new V.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Zi}),Er="X-XSRF-TOKEN",Or=new V.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Er});class In{}let Ei=(()=>{class Dt{constructor(X,fe,_e){this.doc=X,this.platform=fe,this.cookieName=_e,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const X=this.doc.cookie||"";return X!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,o.Mx)(X,this.cookieName),this.lastCookieString=X),this.lastToken}}return Dt.\u0275fac=function(X){return new(X||Dt)(V.LFG(o.K0),V.LFG(V.Lbi),V.LFG(qi))},Dt.\u0275prov=V.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();function N(Dt,H){const X=Dt.url.toLowerCase();if(!(0,V.f3M)(ui)||"GET"===Dt.method||"HEAD"===Dt.method||X.startsWith("http://")||X.startsWith("https://"))return H(Dt);const fe=(0,V.f3M)(In).getToken(),_e=(0,V.f3M)(Or);return null!=fe&&!Dt.headers.has(_e)&&(Dt=Dt.clone({headers:Dt.headers.set(_e,fe)})),H(Dt)}var ht=(()=>((ht=ht||{})[ht.Interceptors=0]="Interceptors",ht[ht.LegacyInterceptors=1]="LegacyInterceptors",ht[ht.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ht[ht.NoXsrfProtection=3]="NoXsrfProtection",ht[ht.JsonpSupport=4]="JsonpSupport",ht[ht.RequestsMadeViaParent=5]="RequestsMadeViaParent",ht))();function It(Dt,H){return{\u0275kind:Dt,\u0275providers:H}}function Jt(...Dt){const H=[Zn,Ht,qt,{provide:we,useExisting:qt},{provide:de,useExisting:Ht},{provide:Pt,useValue:N,multi:!0},{provide:ui,useValue:!0},{provide:In,useClass:Ei}];for(const X of Dt)H.push(...X.\u0275providers);return(0,V.MR2)(H)}const Gt=new V.OlP("LEGACY_INTERCEPTOR_FN");function di({cookieName:Dt,headerName:H}){const X=[];return void 0!==Dt&&X.push({provide:qi,useValue:Dt}),void 0!==H&&X.push({provide:Or,useValue:H}),It(ht.CustomXsrfConfiguration,X)}let Pr=(()=>{class Dt{}return Dt.\u0275fac=function(X){return new(X||Dt)},Dt.\u0275mod=V.oAB({type:Dt}),Dt.\u0275inj=V.cJS({providers:[Jt(It(ht.LegacyInterceptors,[{provide:Gt,useFactory:Vt},{provide:Pt,useExisting:Gt,multi:!0}]),di({cookieName:Zi,headerName:Er}))]}),Dt})()},1571:(At,Le,k)=>{"use strict";k.d(Le,{QbO:()=>P1,tb:()=>nv,AFp:()=>Xy,ip1:()=>Qy,CZH:()=>Qf,hGG:()=>_x,z2F:()=>em,sBO:()=>tx,Sil:()=>L1,_Vd:()=>Rs,EJc:()=>N1,Xts:()=>u,SBq:()=>pa,lqb:()=>dr,qLn:()=>I,vpe:()=>Fd,tBr:()=>ai,XFs:()=>In,OlP:()=>vr,zs3:()=>Bo,ZZ4:()=>lg,aQg:()=>cg,soG:()=>Xf,YKP:()=>ey,h0i:()=>Up,PXZ:()=>J1,R0b:()=>Ru,FiY:()=>Wn,Lbi:()=>O1,g9A:()=>tv,n_E:()=>Yf,Qsj:()=>Eo,FYo:()=>Sd,JOm:()=>Il,q3G:()=>Lo,tp0:()=>Co,Rgc:()=>hf,dDg:()=>Z1,eoX:()=>cv,GfV:()=>e,s_b:()=>Kf,ifc:()=>Me,LMc:()=>bx,MMx:()=>Bm,Lck:()=>Ob,eFA:()=>hv,Gpc:()=>De,f3M:()=>_e,$WT:()=>Mr,MR2:()=>Ue,_c5:()=>gx,c2e:()=>k1,zSh:()=>Xr,wAp:()=>Ni,vHH:()=>Fe,lri:()=>av,rWj:()=>lv,JZr:()=>Ve,EiD:()=>Ed,mCW:()=>bu,qzn:()=>ac,JVY:()=>Yl,pB0:()=>Aa,eBb:()=>wd,L6k:()=>js,LAX:()=>Zd,D6c:()=>yx,cg1:()=>Im,kL8:()=>D_,dqk:()=>Jt,Z0I:()=>nn,CqO:()=>Ig,QGY:()=>_m,F4k:()=>Sg,RDi:()=>$h,AaK:()=>Ye,z3N:()=>hl,zW0:()=>hg,qOj:()=>cm,TTD:()=>Ts,_Bn:()=>X_,jDz:()=>ny,xp6:()=>ao,uIk:()=>hm,Tol:()=>Qg,MT6:()=>p_,ekj:()=>Dm,Suo:()=>Sy,Xpm:()=>oi,lG2:()=>li,Yz7:()=>Cn,cJS:()=>Hn,oAB:()=>Ii,Yjl:()=>pi,Y36:()=>xs,_UZ:()=>mm,GkF:()=>gm,BQk:()=>Bf,ynx:()=>Lf,qZA:()=>Ff,TgZ:()=>Nf,EpF:()=>Mg,n5z:()=>tc,Ikx:()=>Sm,SDv:()=>J_,QtT:()=>q_,pQV:()=>Pm,LFG:()=>X,$8M:()=>Nc,$Z:()=>_l,NdJ:()=>ym,CRH:()=>Iy,O4$:()=>wa,oxw:()=>Rg,ALo:()=>yy,lcZ:()=>vy,xi3:()=>by,Hsn:()=>Fg,F$t:()=>Ng,Q6J:()=>pm,s9C:()=>vm,MGl:()=>zf,DdM:()=>cy,VKq:()=>uy,WLB:()=>dy,kEZ:()=>hy,iGM:()=>Ty,MAs:()=>Tg,KtG:()=>Ys,evT:()=>ve,Jf7:()=>pe,CHM:()=>Yi,LSH:()=>Sc,P3R:()=>Md,B6R:()=>Ti,Akn:()=>nd,Udp:()=>Cm,YNc:()=>Eg,W1O:()=>ky,_uU:()=>o_,Oqu:()=>Tm,hij:()=>jf,lnq:()=>Mm,Gf:()=>My});var o=k(7579),V=k(727),t=k(9751),ie=k(6451),te=k(8421),le=k(930),U=k(4482);function de(n,r,...s){if(!0===r)return void n();if(!1===r)return;const h=new le.Hp({next:()=>{h.unsubscribe(),n()}});return r(...s).subscribe(h)}function Pe(n){for(let r in n)if(n[r]===Pe)return r;throw Error("Could not find renamed property on target object.")}function Se(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function je(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ke=Pe({__forward_ref__:Pe});function De(n){return n.__forward_ref__=De,n.toString=function(){return Ye(this())},n}function ze(n){return Qe(n)?n():n}function Qe(n){return"function"==typeof n&&n.hasOwnProperty(ke)&&n.__forward_ref__===De}function lt(n){return n&&!!n.\u0275providers}const Ve="https://g.co/ng/security#xss";class Fe extends Error{constructor(r,s){super(function Ne(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Be(n){return"string"==typeof n?n:null==n?"":String(n)}function wn(n,r){throw new Fe(-201,!1)}function un(n,r,s,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${s} ${h} ${r} <=Actual]`))}function Cn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Hn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zt(n){return zt(n,Zi)||zt(n,Er)}function nn(n){return null!==Zt(n)}function zt(n,r){return n.hasOwnProperty(r)?n[r]:null}function ui(n){return n&&(n.hasOwnProperty(qi)||n.hasOwnProperty(Or))?n[qi]:null}const Zi=Pe({\u0275prov:Pe}),qi=Pe({\u0275inj:Pe}),Er=Pe({ngInjectableDef:Pe}),Or=Pe({ngInjectorDef:Pe});var In=(()=>((In=In||{})[In.Default=0]="Default",In[In.Host=1]="Host",In[In.Self=2]="Self",In[In.SkipSelf=4]="SkipSelf",In[In.Optional=8]="Optional",In))();let Ei;function ce(n){const r=Ei;return Ei=n,r}function ht(n,r,s){const h=Zt(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:s&In.Optional?null:void 0!==r?r:void wn(Ye(n))}const Jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),di={},fi="__NG_DI_FLAG__",Mo="ngTempTokenPath",Br=/\n/gm,eo="__source";let to;function Dt(n){const r=to;return to=n,r}function H(n,r=In.Default){if(void 0===to)throw new Fe(-203,!1);return null===to?ht(n,void 0,r):to.get(n,r&In.Optional?null:void 0,r)}function X(n,r=In.Default){return(function N(){return Ei}()||H)(ze(n),r)}function _e(n,r=In.Default){return X(n,Re(r))}function Re(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Je(n){const r=[];for(let s=0;s<n.length;s++){const h=ze(n[s]);if(Array.isArray(h)){if(0===h.length)throw new Fe(900,!1);let _,C=In.Default;for(let R=0;R<h.length;R++){const j=h[R],q=xe(j);"number"==typeof q?-1===q?_=j.token:C|=q:_=j}r.push(X(_,C))}else r.push(X(h))}return r}function Xe(n,r){return n[fi]=r,n.prototype[fi]=r,n}function xe(n){return n[fi]}function Lt(n){return{toString:n}.toString()}var Ut=(()=>((Ut=Ut||{})[Ut.OnPush=0]="OnPush",Ut[Ut.Default=1]="Default",Ut))(),Me=(()=>{return(n=Me||(Me={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Me;var n})();const qe={},He=[],Rt=Pe({\u0275cmp:Pe}),jt=Pe({\u0275dir:Pe}),en=Pe({\u0275pipe:Pe}),An=Pe({\u0275mod:Pe}),sn=Pe({\u0275fac:Pe}),ei=Pe({__NG_ELEMENT_ID__:Pe});let Si=0;function oi(n){return Lt(()=>{const s=!0===n.standalone,h={},_={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ut.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||He,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Me.Emulated,id:"c"+Si++,styles:n.styles||He,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},C=n.dependencies,R=n.features;return _.inputs=$i(n.inputs,h),_.outputs=$i(n.outputs),R&&R.forEach(j=>j(_)),_.directiveDefs=C?()=>("function"==typeof C?C():C).map(mi).filter(Wr):null,_.pipeDefs=C?()=>("function"==typeof C?C():C).map(Ai).filter(Wr):null,_})}function Ti(n,r,s){const h=n.\u0275cmp;h.directiveDefs=()=>("function"==typeof r?r():r).map(mi),h.pipeDefs=()=>("function"==typeof s?s():s).map(Ai)}function mi(n){return ii(n)||Tr(n)}function Wr(n){return null!==n}function Ii(n){return Lt(()=>({type:n.type,bootstrap:n.bootstrap||He,declarations:n.declarations||He,imports:n.imports||He,exports:n.exports||He,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $i(n,r){if(null==n)return qe;const s={};for(const h in n)if(n.hasOwnProperty(h)){let _=n[h],C=_;Array.isArray(_)&&(C=_[1],_=_[0]),s[_]=h,r&&(r[_]=C)}return s}const li=oi;function pi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ii(n){return n[Rt]||null}function Tr(n){return n[jt]||null}function Ai(n){return n[en]||null}function Mr(n){const r=ii(n)||Tr(n)||Ai(n);return null!==r&&r.standalone}function zo(n,r){const s=n[An]||null;if(!s&&!0===r)throw new Error(`Type ${Ye(n)} does not have '\u0275mod' property.`);return s}function Fr(n){return Array.isArray(n)&&"object"==typeof n[1]}function gr(n){return Array.isArray(n)&&!0===n[1]}function Ao(n){return 0!=(4&n.flags)}function yo(n){return n.componentOffset>-1}function Ds(n){return 1==(1&n.flags)}function uo(n){return null!==n.template}function Oo(n){return 0!=(256&n[2])}function Uo(n,r){return n.hasOwnProperty(sn)?n[sn]:null}class Es{constructor(r,s,h){this.previousValue=r,this.currentValue=s,this.firstChange=h}isFirstChange(){return this.firstChange}}function Ts(){return Zs}function Zs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ll),La}function La(){const n=Qi(this),r=n?.current;if(r){const s=n.previous;if(s===qe)n.previous=r;else for(let h in r)s[h]=r[h];n.current=null,this.ngOnChanges(r)}}function Ll(n,r,s,h){const _=this.declaredInputs[s],C=Qi(n)||function Ac(n,r){return n[wl]=r}(n,{previous:qe,current:null}),R=C.current||(C.current={}),j=C.previous,q=j[_];R[_]=new Es(q&&q.currentValue,r,j===qe),n[h]=r}Ts.ngInherit=!0;const wl="__ngSimpleChanges__";function Qi(n){return n[wl]||null}function Hr(n){for(;Array.isArray(n);)n=n[0];return n}function Yo(n,r){return Hr(r[n])}function ts(n,r){return Hr(r[n.index])}function Fs(n,r){return n.data[r]}function Ro(n,r){return n[r]}function us(n,r){const s=r[n];return Fr(s)?s:s[0]}function ns(n){return 64==(64&n[2])}function ds(n,r){return null==r?null:n[r]}function re(n){n[18]=0}function ne(n,r){n[5]+=r;let s=n,h=n[3];for(;null!==h&&(1===r&&1===s[5]||-1===r&&0===s[5]);)h[5]+=r,s=h,h=h[3]}const Y={lFrame:yr(null),bindingsEnabled:!0};function hs(){return Y.bindingsEnabled}function on(){return Y.lFrame.lView}function Pi(){return Y.lFrame.tView}function Yi(n){return Y.lFrame.contextLView=n,n[8]}function Ys(n){return Y.lFrame.contextLView=null,n}function Vr(){let n=$c();for(;null!==n&&64===n.type;)n=n.parent;return n}function $c(){return Y.lFrame.currentTNode}function el(){const n=Y.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}function Ws(n,r){const s=Y.lFrame;s.currentTNode=n,s.isParent=r}function Ks(){return Y.lFrame.isParent}function tl(){Y.lFrame.isParent=!1}function Wo(){const n=Y.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ps(){return Y.lFrame.bindingIndex}function Cl(){return Y.lFrame.bindingIndex++}function va(n){const r=Y.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Dl(n){Y.lFrame.inI18n=n}function Ua(n,r){const s=Y.lFrame;s.bindingIndex=s.bindingRootIndex=n,fs(r)}function fs(n){Y.lFrame.currentDirectiveIndex=n}function aa(){return Y.lFrame.currentQueryIndex}function Cr(n){Y.lFrame.currentQueryIndex=n}function Oc(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function El(n,r,s){if(s&In.SkipSelf){let _=r,C=n;for(;!(_=_.parent,null!==_||s&In.Host||(_=Oc(C),null===_||(C=C[15],10&_.type))););if(null===_)return!1;r=_,n=C}const h=Y.lFrame=ki();return h.currentTNode=r,h.lView=n,!0}function ba(n){const r=ki(),s=n[1];Y.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ki(){const n=Y.lFrame,r=null===n?null:n.child;return null===r?yr(n):r}function yr(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Is(){const n=Y.lFrame;return Y.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const zl=Is;function al(){const n=Is();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function As(){return Y.lFrame.selectedIndex}function xa(n){Y.lFrame.selectedIndex=n}function Ur(){const n=Y.lFrame;return Fs(n.tView,n.selectedIndex)}function wa(){Y.lFrame.currentNamespace="svg"}function be(n,r){for(let s=r.directiveStart,h=r.directiveEnd;s<h;s++){const C=n.data[s].type.prototype,{ngAfterContentInit:R,ngAfterContentChecked:j,ngAfterViewInit:q,ngAfterViewChecked:ue,ngOnDestroy:Ee}=C;R&&(n.contentHooks||(n.contentHooks=[])).push(-s,R),j&&((n.contentHooks||(n.contentHooks=[])).push(s,j),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,j)),q&&(n.viewHooks||(n.viewHooks=[])).push(-s,q),ue&&((n.viewHooks||(n.viewHooks=[])).push(s,ue),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,ue)),null!=Ee&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Ee)}}function We(n,r,s){Dn(n,r,3,s)}function Tt(n,r,s,h){(3&n[2])===s&&Dn(n,r,s,h)}function Yt(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Dn(n,r,s,h){const C=h??-1,R=r.length-1;let j=0;for(let q=void 0!==h?65535&n[18]:0;q<R;q++)if("number"==typeof r[q+1]){if(j=r[q],null!=h&&j>=h)break}else r[q]<0&&(n[18]+=65536),(j<C||-1==C)&&(cr(n,s,r,q),n[18]=(4294901760&n[18])+q+2),q++}function cr(n,r,s,h){const _=s[h]<0,C=s[h+1],j=n[_?-s[h]:s[h]];if(_){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{C.call(j)}finally{}}}else try{C.call(j)}finally{}}class Wi{constructor(r,s,h){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=h}}function Sr(n,r,s){let h=0;for(;h<s.length;){const _=s[h];if("number"==typeof _){if(0!==_)break;h++;const C=s[h++],R=s[h++],j=s[h++];n.setAttribute(r,R,j,C)}else{const C=_,R=s[++h];Vl(C)?n.setProperty(r,C,R):n.setAttribute(r,C,R),h++}}return h}function ja(n){return 3===n||4===n||6===n}function Vl(n){return 64===n.charCodeAt(0)}function Tl(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let h=0;h<r.length;h++){const _=r[h];"number"==typeof _?s=_:0===s||is(n,s,_,null,-1===s||2===s?r[++h]:null)}}return n}function is(n,r,s,h,_){let C=0,R=n.length;if(-1===r)R=-1;else for(;C<n.length;){const j=n[C++];if("number"==typeof j){if(j===r){R=-1;break}if(j>r){R=C-1;break}}}for(;C<n.length;){const j=n[C];if("number"==typeof j)break;if(j===s){if(null===h)return void(null!==_&&(n[C+1]=_));if(h===n[C+1])return void(n[C+2]=_)}C++,null!==h&&C++,null!==_&&C++}-1!==R&&(n.splice(R,0,r),C=R+1),n.splice(C++,0,s),null!==h&&n.splice(C++,0,h),null!==_&&n.splice(C++,0,_)}function zs(n){return-1!==n}function _i(n){return 32767&n}function Ko(n,r){let s=function la(n){return n>>16}(n),h=r;for(;s>0;)h=h[15],s--;return h}let Fo=!0;function Ca(n){const r=Fo;return Fo=n,r}let Pc=0;const Sn={};function ec(n,r){const s=Js(n,r);if(-1!==s)return s;const h=r[1];h.firstCreatePass&&(n.injectorIndex=r.length,xo(h.data,n),xo(r,null),xo(h.blueprint,null));const _=Ho(n,r),C=n.injectorIndex;if(zs(_)){const R=_i(_),j=Ko(_,r),q=j[1].data;for(let ue=0;ue<8;ue++)r[C+ue]=j[R+ue]|q[R+ue]}return r[C+8]=_,C}function xo(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Js(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ho(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,h=null,_=r;for(;null!==_;){if(h=Gl(_),null===h)return-1;if(s++,_=_[15],-1!==h.injectorIndex)return h.injectorIndex|s<<16}return-1}function ua(n,r,s){!function _n(n,r,s){let h;"string"==typeof s?h=s.charCodeAt(0)||0:s.hasOwnProperty(ei)&&(h=s[ei]),null==h&&(h=s[ei]=Pc++);const _=255&h;r.data[n+(_>>5)]|=1<<_}(n,r,s)}function gc(n,r,s){if(s&In.Optional||void 0!==n)return n;wn()}function ur(n,r,s,h){if(s&In.Optional&&void 0===h&&(h=null),!(s&(In.Self|In.Host))){const _=n[9],C=ce(void 0);try{return _?_.get(r,h,s&In.Optional):ht(r,h,s&In.Optional)}finally{ce(C)}}return gc(h,0,s)}function wo(n,r,s,h=In.Default,_){if(null!==n){if(1024&r[2]){const R=function Hl(n,r,s,h,_){let C=n,R=r;for(;null!==C&&null!==R&&1024&R[2]&&!(256&R[2]);){const j=Zc(C,R,s,h|In.Self,Sn);if(j!==Sn)return j;let q=C.parent;if(!q){const ue=R[21];if(ue){const Ee=ue.get(s,Sn,h);if(Ee!==Sn)return Ee}q=Gl(R),R=R[15]}C=q}return _}(n,r,s,h,Sn);if(R!==Sn)return R}const C=Zc(n,r,s,h,Sn);if(C!==Sn)return C}return ur(r,s,h,_)}function Zc(n,r,s,h,_){const C=function Gr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ei)?n[ei]:void 0;return"number"==typeof r?r>=0?255&r:Rc:r}(s);if("function"==typeof C){if(!El(r,n,h))return h&In.Host?gc(_,0,h):ur(r,s,h,_);try{const R=C(h);if(null!=R||h&In.Optional)return R;wn()}finally{zl()}}else if("number"==typeof C){let R=null,j=Js(n,r),q=-1,ue=h&In.Host?r[16][6]:null;for((-1===j||h&In.SkipSelf)&&(q=-1===j?Ho(n,r):r[j+8],-1!==q&&Vs(h,!1)?(R=r[1],j=_i(q),r=Ko(q,r)):j=-1);-1!==j;){const Ee=r[1];if(ll(C,j,Ee.data)){const Ke=Da(j,r,s,R,h,ue);if(Ke!==Sn)return Ke}q=r[j+8],-1!==q&&Vs(h,r[1].data[j+8]===ue)&&ll(C,j,r)?(R=Ee,j=_i(q),r=Ko(q,r)):j=-1}}return _}function Da(n,r,s,h,_,C){const R=r[1],j=R.data[n+8],Ee=kc(j,R,s,null==h?yo(j)&&Fo:h!=R&&0!=(3&j.type),_&In.Host&&C===j);return null!==Ee?Os(r,R,Ee,j):Sn}function kc(n,r,s,h,_){const C=n.providerIndexes,R=r.data,j=1048575&C,q=n.directiveStart,Ee=C>>20,pt=_?j+Ee:n.directiveEnd;for(let Ct=h?j:j+Ee;Ct<pt;Ct++){const tn=R[Ct];if(Ct<q&&s===tn||Ct>=q&&tn.type===s)return Ct}if(_){const Ct=R[q];if(Ct&&uo(Ct)&&Ct.type===s)return q}return null}function Os(n,r,s,h){let _=n[s];const C=r.data;if(function bi(n){return n instanceof Wi}(_)){const R=_;R.resolving&&function Mt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${n}${s}`)}(function it(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Be(n)}(C[s]));const j=Ca(R.canSeeViewProviders);R.resolving=!0;const q=R.injectImpl?ce(R.injectImpl):null;El(n,h,In.Default);try{_=n[s]=R.factory(void 0,C,n,h),r.firstCreatePass&&s>=h.directiveStart&&function G(n,r,s){const{ngOnChanges:h,ngOnInit:_,ngDoCheck:C}=r.type.prototype;if(h){const R=Zs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,R),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,R)}_&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,_),C&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C))}(s,C[s],r)}finally{null!==q&&ce(q),Ca(j),R.resolving=!1,zl()}}return _}function ll(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Vs(n,r){return!(n&In.Self||n&In.Host&&r)}class Ha{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,h){return wo(this._tNode,this._lView,r,Re(h),s)}}function Rc(){return new Ha(Vr(),on())}function tc(n){return Lt(()=>{const r=n.prototype.constructor,s=r[sn]||_c(r),h=Object.prototype;let _=Object.getPrototypeOf(n.prototype).constructor;for(;_&&_!==h;){const C=_[sn]||_c(_);if(C&&C!==s)return C;_=Object.getPrototypeOf(_)}return C=>new C})}function _c(n){return Qe(n)?()=>{const r=_c(ze(n));return r&&r()}:Uo(n)}function Gl(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Nc(n){return function jl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const h=s.length;let _=0;for(;_<h;){const C=s[_];if(ja(C))break;if(0===C)_+=2;else if("number"==typeof C)for(_++;_<h&&"string"==typeof s[_];)_++;else{if(C===r)return s[_+1];_+=2}}}return null}(Vr(),n)}const qs="__parameters__";function da(n,r,s){return Lt(()=>{const h=function rs(n){return function(...s){if(n){const h=n(...s);for(const _ in h)this[_]=h[_]}}}(r);function _(...C){if(this instanceof _)return h.apply(this,C),this;const R=new _(...C);return j.annotation=R,j;function j(q,ue,Ee){const Ke=q.hasOwnProperty(qs)?q[qs]:Object.defineProperty(q,qs,{value:[]})[qs];for(;Ke.length<=Ee;)Ke.push(null);return(Ke[Ee]=Ke[Ee]||[]).push(R),q}}return s&&(_.prototype=Object.create(s.prototype)),_.prototype.ngMetadataName=n,_.annotationCls=_,_})}class vr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Cn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Q(n,r){n.forEach(s=>Array.isArray(s)?Q(s,r):r(s))}function K(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function ye(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Oe(n,r){const s=[];for(let h=0;h<n;h++)s.push(r);return s}function Ft(n,r,s){let h=Qt(n,r);return h>=0?n[1|h]=s:(h=~h,function ct(n,r,s,h){let _=n.length;if(_==r)n.push(s,h);else if(1===_)n.push(h,n[0]),n[0]=s;else{for(_--,n.push(n[_-1],n[_]);_>r;)n[_]=n[_-2],_--;n[r]=s,n[r+1]=h}}(n,h,r,s)),h}function rn(n,r){const s=Qt(n,r);if(s>=0)return n[1|s]}function Qt(n,r){return function zn(n,r,s){let h=0,_=n.length>>s;for(;_!==h;){const C=h+(_-h>>1),R=n[C<<s];if(r===R)return C<<s;R>r?_=C:h=C+1}return~(_<<s)}(n,r,1)}const ai=Xe(da("Inject",n=>({token:n})),-1),Wn=Xe(da("Optional"),8),Co=Xe(da("SkipSelf"),4);var Il=(()=>((Il=Il||{})[Il.Important=1]="Important",Il[Il.DashCase=2]="DashCase",Il))();const oh=/^>|^->|<!--|-->|--!>|<!-$/g,Al=/(<|>)/;const lu=new Map;let Cc=0;const oc="__ngContext__";function _s(n,r){Fr(r)?(n[oc]=r[20],function cd(n){lu.set(n[20],n)}(r)):n[oc]=r}let gd;function uu(n,r){return gd(n,r)}function Bc(n){const r=n[3];return gr(r)?r[3]:r}function Vh(n){return dh(n[13])}function Ud(n){return dh(n[4])}function dh(n){for(;null!==n&&!gr(n);)n=n[4];return n}function Sa(n,r,s,h,_){if(null!=h){let C,R=!1;gr(h)?C=h:Fr(h)&&(R=!0,h=h[0]);const j=Hr(h);0===n&&null!==s?null==_?Hh(r,s,j):pu(r,s,j,_||null,!0):1===n&&null!==s?pu(r,s,j,_||null,!0):2===n?_h(r,j,R):3===n&&r.destroyNode(j),null!=C&&function Zu(n,r,s,h,_){const C=s[7];C!==Hr(s)&&Sa(r,n,h,C,_);for(let j=10;j<s.length;j++){const q=s[j];Mc(q[1],q,n,r,h,C)}}(r,n,C,s,_)}}function Kc(n,r){return n.createText(r)}function jd(n,r,s){n.setValue(r,s)}function dp(n,r){return n.createComment(function wc(n){return n.replace(oh,r=>r.replace(Al,"\u200b$1\u200b"))}(r))}function Jc(n,r,s){return n.createElement(r,s)}function qc(n,r){const s=n[9],h=s.indexOf(r),_=r[3];512&r[2]&&(r[2]&=-513,ne(_,-1)),s.splice(h,1)}function jh(n,r){if(n.length<=10)return;const s=10+r,h=n[s];if(h){const _=h[17];null!==_&&_!==n&&qc(_,h),r>0&&(n[s-1][4]=h[4]);const C=ye(n,10+r);!function Vu(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(h[1],h);const R=C[19];null!==R&&R.detachView(C[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function du(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Mc(n,r,s,3,null,null),function Uu(n){let r=n[13];if(!r)return hu(n[1],n);for(;r;){let s=null;if(Fr(r))s=r[13];else{const h=r[10];h&&(s=h)}if(!s){for(;r&&!r[4]&&r!==n;)Fr(r)&&hu(r[1],r),r=r[3];null===r&&(r=n),Fr(r)&&hu(r[1],r),s=r&&r[4]}r=s}}(r)}}function hu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function yd(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let h=0;h<s.length;h+=2){const _=r[s[h]];if(!(_ instanceof Wi)){const C=s[h+1];if(Array.isArray(C))for(let R=0;R<C.length;R+=2){const j=_[C[R]],q=C[R+1];try{q.call(j)}finally{}}else try{C.call(_)}finally{}}}}(n,r),function _d(n,r){const s=n.cleanup,h=r[7];let _=-1;if(null!==s)for(let C=0;C<s.length-1;C+=2)if("string"==typeof s[C]){const R=s[C+3];R>=0?h[_=R]():h[_=-R].unsubscribe(),C+=2}else{const R=h[_=s[C+1]];s[C].call(R)}if(null!==h){for(let C=_+1;C<h.length;C++)(0,h[C])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&gr(r[3])){s!==r[3]&&qc(s,r);const h=r[19];null!==h&&h.detachView(n)}!function zh(n){lu.delete(n[20])}(r)}}function Zl(n,r,s){return ju(n,r.parent,s)}function ju(n,r,s){let h=r;for(;null!==h&&40&h.type;)h=(r=h).parent;if(null===h)return s[0];{const{componentOffset:_}=h;if(_>-1){const{encapsulation:C}=n.data[h.directiveStart+_];if(C===Me.None||C===Me.Emulated)return null}return ts(h,s)}}function pu(n,r,s,h,_){n.insertBefore(r,s,h,_)}function Hh(n,r,s){n.appendChild(r,s)}function Hu(n,r,s,h,_){null!==h?pu(n,r,s,h,_):Hh(n,r,s)}function Qc(n,r){return n.parentNode(r)}function Gu(n,r,s){return Ps(n,r,s)}function fh(n,r,s){return 40&n.type?ts(n,s):null}let mh,gu,bd,_u,Ps=fh;function fu(n,r){Ps=n,mh=r}function Tc(n,r,s,h){const _=Zl(n,h,r),C=r[11],j=Gu(h.parent||r[6],h,r);if(null!=_)if(Array.isArray(s))for(let q=0;q<s.length;q++)Hu(C,_,s[q],j,!1);else Hu(C,_,s,j,!1);void 0!==mh&&mh(C,h,r,s,_)}function zc(n,r){if(null!==r){const s=r.type;if(3&s)return ts(r,n);if(4&s)return $u(-1,n[r.index]);if(8&s){const h=r.child;if(null!==h)return zc(n,h);{const _=n[r.index];return gr(_)?$u(-1,_):Hr(_)}}if(32&s)return uu(r,n)()||Hr(n[r.index]);{const h=gh(n,r);return null!==h?Array.isArray(h)?h[0]:zc(Bc(n[16]),h):zc(n,r.next)}}return null}function gh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function $u(n,r){const s=10+n+1;if(s<r.length){const h=r[s],_=h[1].firstChild;if(null!==_)return zc(h,_)}return r[7]}function _h(n,r,s){const h=Qc(n,r);h&&function vd(n,r,s,h){n.removeChild(r,s,h)}(n,h,r,s)}function mu(n,r,s,h,_,C,R){for(;null!=s;){const j=h[s.index],q=s.type;if(R&&0===r&&(j&&_s(Hr(j),h),s.flags|=2),32!=(32&s.flags))if(8&q)mu(n,r,s.child,h,_,C,!1),Sa(r,n,_,j,C);else if(32&q){const ue=uu(s,h);let Ee;for(;Ee=ue();)Sa(r,n,_,Ee,C);Sa(r,n,_,j,C)}else 16&q?hp(n,r,h,s,_,C):Sa(r,n,_,j,C);s=R?s.projectionNext:s.next}}function Mc(n,r,s,h,_,C){mu(s,h,n.firstChild,r,_,C,!1)}function hp(n,r,s,h,_,C){const R=s[16],q=R[6].projection[h.projection];if(Array.isArray(q))for(let ue=0;ue<q.length;ue++)Sa(r,n,_,q[ue],C);else mu(n,r,q,R[3],_,C,!0)}function Xc(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Ir(n,r,s){const{mergedAttrs:h,classes:_,styles:C}=s;null!==h&&Sr(n,r,h),null!==_&&Xc(n,r,_),null!==C&&function Yu(n,r,s){n.setAttribute(r,"style",s)}(n,r,C)}function Ol(n){return function Ia(){if(void 0===gu&&(gu=null,Jt.trustedTypes))try{gu=Jt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gu}()?.createHTML(n)||n}function $h(n){bd=n}function vu(n){return function yu(){if(void 0===_u&&(_u=null,Jt.trustedTypes))try{_u=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _u}()?.createScriptURL(n)||n}class dl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ve})`}}class Zh extends dl{getTypeName(){return"HTML"}}class Yh extends dl{getTypeName(){return"Style"}}class wh extends dl{getTypeName(){return"Script"}}class Ch extends dl{getTypeName(){return"URL"}}class Wu extends dl{getTypeName(){return"ResourceURL"}}function hl(n){return n instanceof dl?n.changingThisBreaksApplicationSecurity:n}function ac(n,r){const s=function Za(n){return n instanceof dl&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ve})`)}return s===r}function Yl(n){return new Zh(n)}function js(n){return new Yh(n)}function wd(n){return new wh(n)}function Zd(n){return new Ch(n)}function Aa(n){return new Wu(n)}function Yd(n){const r=new Wd(n);return function Wh(){try{return!!(new window.DOMParser).parseFromString(Ol(""),"text/html")}catch{return!1}}()?new Dh(r):r}class Dh{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Ol(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Wd{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const h=this.inertDocument.createElement("body");s.appendChild(h)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Ol(r),s;const h=this.inertDocument.createElement("body");return h.innerHTML=Ol(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(r){const s=r.attributes;for(let _=s.length-1;0<_;_--){const R=s.item(_).name;("xmlns:ns1"===R||0===R.indexOf("ns1:"))&&r.removeAttribute(R)}let h=r.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Ku=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function bu(n){return(n=String(n)).match(Ku)?n:"unsafe:"+n}function Wl(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function Ju(...n){const r={};for(const s of n)for(const h in s)s.hasOwnProperty(h)&&(r[h]=!0);return r}const eu=Wl("area,br,col,hr,img,wbr"),Vc=Wl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cd=Wl("rp,rt"),Kd=Ju(eu,Ju(Vc,Wl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ju(Cd,Wl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ju(Cd,Vc)),Jd=Wl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mh=Ju(Jd,Wl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Uc=Wl("script,style,template");class qu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,h=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?h=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,h&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let _=this.checkClobberedElement(s,s.nextSibling);if(_){s=_;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Kd.hasOwnProperty(s))return this.sanitizedSomething=!0,!Uc.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const h=r.attributes;for(let _=0;_<h.length;_++){const C=h.item(_),R=C.name,j=R.toLowerCase();if(!Mh.hasOwnProperty(j)){this.sanitizedSomething=!0;continue}let q=C.value;Jd[j]&&(q=bu(q)),this.buf.push(" ",R,'="',Dd(q),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Kd.hasOwnProperty(s)&&!eu.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Dd(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const qd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sh=/([^\#-~ |!])/g;function Dd(n){return n.replace(/&/g,"&amp;").replace(qd,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Sh,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xu;function Ed(n,r){let s=null;try{xu=xu||Yd(n);let h=r?String(r):"";s=xu.getInertBodyElement(h);let _=5,C=h;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,h=C,C=s.innerHTML,s=xu.getInertBodyElement(h)}while(h!==C);return Ol((new qu).sanitizeChildren(lc(s)||s))}finally{if(s){const h=lc(s)||s;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function lc(n){return"content"in n&&function wu(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Lo=(()=>((Lo=Lo||{})[Lo.NONE=0]="NONE",Lo[Lo.HTML=1]="HTML",Lo[Lo.STYLE=2]="STYLE",Lo[Lo.SCRIPT=3]="SCRIPT",Lo[Lo.URL=4]="URL",Lo[Lo.RESOURCE_URL=5]="RESOURCE_URL",Lo))();function Sc(n){const r=T();return r?r.sanitize(Lo.URL,n)||"":ac(n,"URL")?hl(n):bu(Be(n))}function tu(n){const r=T();if(r)return vu(r.sanitize(Lo.RESOURCE_URL,n)||"");if(ac(n,"ResourceURL"))return vu(hl(n));throw new Fe(904,!1)}function Md(n,r,s){return function Qd(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?tu:Sc}(r,s)(n)}function T(){const n=on();return n&&n[12]}const u=new vr("ENVIRONMENT_INITIALIZER"),b=new vr("INJECTOR",-1),B=new vr("INJECTOR_DEF_TYPES");class ee{get(r,s=di){if(s===di){const h=new Error(`NullInjectorError: No provider for ${Ye(r)}!`);throw h.name="NullInjectorError",h}return s}}function Ue(n){return{\u0275providers:n}}function st(...n){return{\u0275providers:dt(0,n),\u0275fromNgModule:!0}}function dt(n,...r){const s=[],h=new Set;let _;return Q(r,C=>{const R=C;Nt(R,s,[],h)&&(_||(_=[]),_.push(R))}),void 0!==_&&yt(_,s),s}function yt(n,r){for(let s=0;s<n.length;s++){const{providers:_}=n[s];fn(_,C=>{r.push(C)})}}function Nt(n,r,s,h){if(!(n=ze(n)))return!1;let _=null,C=ui(n);const R=!C&&ii(n);if(C||R){if(R&&!R.standalone)return!1;_=n}else{const q=n.ngModule;if(C=ui(q),!C)return!1;_=q}const j=h.has(_);if(R){if(j)return!1;if(h.add(_),R.dependencies){const q="function"==typeof R.dependencies?R.dependencies():R.dependencies;for(const ue of q)Nt(ue,r,s,h)}}else{if(!C)return!1;{if(null!=C.imports&&!j){let ue;h.add(_);try{Q(C.imports,Ee=>{Nt(Ee,r,s,h)&&(ue||(ue=[]),ue.push(Ee))})}finally{}void 0!==ue&&yt(ue,r)}if(!j){const ue=Uo(_)||(()=>new _);r.push({provide:_,useFactory:ue,deps:He},{provide:B,useValue:_,multi:!0},{provide:u,useValue:()=>X(_),multi:!0})}const q=C.providers;null==q||j||fn(q,Ee=>{r.push(Ee)})}}return _!==n&&void 0!==n.providers}function fn(n,r){for(let s of n)lt(s)&&(s=s.\u0275providers),Array.isArray(s)?fn(s,r):r(s)}const On=Pe({provide:String,useValue:Pe});function Xi(n){return null!==n&&"object"==typeof n&&On in n}function Hi(n){return"function"==typeof n}const Xr=new vr("Set Injector scope."),Li={},ir={};let br;function Ar(){return void 0===br&&(br=new ee),br}class dr{}class Vi extends dr{get destroyed(){return this._destroyed}constructor(r,s,h,_){super(),this.parent=s,this.source=h,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fl(r,R=>this.processProvider(R)),this.records.set(b,pl(void 0,this)),_.has("environment")&&this.records.set(dr,pl(void 0,this));const C=this.records.get(Xr);null!=C&&"string"==typeof C.value&&this.scopes.add(C.value),this.injectorDefTypes=new Set(this.get(B.multi,He,In.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Dt(this),h=ce(void 0);try{return r()}finally{Dt(s),ce(h)}}get(r,s=di,h=In.Default){this.assertNotDestroyed(),h=Re(h);const _=Dt(this),C=ce(void 0);try{if(!(h&In.SkipSelf)){let j=this.records.get(r);if(void 0===j){const q=function os(n){return"function"==typeof n||"object"==typeof n&&n instanceof vr}(r)&&Zt(r);j=q&&this.injectableDefInScope(q)?pl(Di(r),Li):null,this.records.set(r,j)}if(null!=j)return this.hydrate(r,j)}return(h&In.Self?Ar():this.parent).get(r,s=h&In.Optional&&s===di?null:s)}catch(R){if("NullInjectorError"===R.name){if((R[Mo]=R[Mo]||[]).unshift(Ye(r)),_)throw R;return function Ge(n,r,s,h){const _=n[Mo];throw r[eo]&&_.unshift(r[eo]),n.message=function ft(n,r,s,h=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let _=Ye(r);if(Array.isArray(r))_=r.map(Ye).join(" -> ");else if("object"==typeof r){let C=[];for(let R in r)if(r.hasOwnProperty(R)){let j=r[R];C.push(R+":"+("string"==typeof j?JSON.stringify(j):Ye(j)))}_=`{${C.join(", ")}}`}return`${s}${h?"("+h+")":""}[${_}]: ${n.replace(Br,"\n  ")}`}("\n"+n.message,_,s,h),n.ngTokenPath=_,n[Mo]=null,n}(R,r,"R3InjectorError",this.source)}throw R}finally{ce(C),Dt(_)}}resolveInjectorInitializers(){const r=Dt(this),s=ce(void 0);try{const h=this.get(u.multi,He,In.Self);for(const _ of h)_()}finally{Dt(r),ce(s)}}toString(){const r=[],s=this.records;for(const h of s.keys())r.push(Ye(h));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processProvider(r){let s=Hi(r=ze(r))?r:ze(r&&r.provide);const h=function Pl(n){return Xi(n)?pl(void 0,n.useValue):pl(na(n),Li)}(r);if(Hi(r)||!0!==r.multi)this.records.get(s);else{let _=this.records.get(s);_||(_=pl(void 0,Li,!0),_.factory=()=>Je(_.multi),this.records.set(s,_)),s=r,_.multi.push(r)}this.records.set(s,h)}hydrate(r,s){return s.value===Li&&(s.value=ir,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ks(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ze(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Di(n){const r=Zt(n),s=null!==r?r.factory:Uo(n);if(null!==s)return s;if(n instanceof vr)throw new Fe(204,!1);if(n instanceof Function)return function ta(n){const r=n.length;if(r>0)throw Oe(r,"?"),new Fe(204,!1);const s=function Xt(n){const r=n&&(n[Zi]||n[Er]);if(r){const s=function Ht(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Fe(204,!1)}function na(n,r,s){let h;if(Hi(n)){const _=ze(n);return Uo(_)||Di(_)}if(Xi(n))h=()=>ze(n.useValue);else if(function Fi(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...Je(n.deps||[]));else if(function ci(n){return!(!n||!n.useExisting)}(n))h=()=>X(ze(n.useExisting));else{const _=ze(n&&(n.useClass||n.provide));if(!function Kl(n){return!!n.deps}(n))return Uo(_)||Di(_);h=()=>new _(...Je(n.deps))}return h}function pl(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function fl(n,r){for(const s of n)Array.isArray(s)?fl(s,r):s&&lt(s)?fl(s.\u0275providers,r):r(s)}class nu{}class so{}class cc{resolveComponentFactory(r){throw function Cu(n){const r=Error(`No component factory found for ${Ye(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Rs=(()=>{class n{}return n.NULL=new cc,n})();function Wa(){return Qo(Vr(),on())}function Qo(n,r){return new pa(ts(n,r))}let pa=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Wa,n})();function Eu(n){return n instanceof pa?n.nativeElement:n}class Sd{}let Eo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function jc(){const n=on(),s=us(Vr().index,n);return(Fr(s)?s:n)[11]}(),n})(),Xd=(()=>{class n{}return n.\u0275prov=Cn({token:n,providedIn:"root",factory:()=>null}),n})();class e{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const i=new e("15.1.2"),a={};function w(n){return n.ngOriginalError}class I{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&w(r);for(;s&&w(s);)s=w(s);return s||null}}function pe(n){return n.ownerDocument.defaultView}function ve(n){return n.ownerDocument}function Ze(n){return n instanceof Function?n():n}function $t(n,r,s){let h=n.length;for(;;){const _=n.indexOf(r,s);if(-1===_)return _;if(0===_||n.charCodeAt(_-1)<=32){const C=r.length;if(_+C===h||n.charCodeAt(_+C)<=32)return _}s=_+1}}const an="ng-template";function dn(n,r,s){let h=0;for(;h<n.length;){let _=n[h++];if(s&&"class"===_){if(_=n[h],-1!==$t(_.toLowerCase(),r,0))return!0}else if(1===_){for(;h<n.length&&"string"==typeof(_=n[h++]);)if(_.toLowerCase()===r)return!0;return!1}}return!1}function Un(n){return 4===n.type&&n.value!==an}function xn(n,r,s){return r===(4!==n.type||s?n.value:an)}function Ln(n,r,s){let h=4;const _=n.attrs||[],C=function Bi(n){for(let r=0;r<n.length;r++)if(ja(n[r]))return r;return n.length}(_);let R=!1;for(let j=0;j<r.length;j++){const q=r[j];if("number"!=typeof q){if(!R)if(4&h){if(h=2|1&h,""!==q&&!xn(n,q,s)||""===q&&1===r.length){if(mn(h))return!1;R=!0}}else{const ue=8&h?q:r[++j];if(8&h&&null!==n.attrs){if(!dn(n.attrs,ue,s)){if(mn(h))return!1;R=!0}continue}const Ke=Mi(8&h?"class":q,_,Un(n),s);if(-1===Ke){if(mn(h))return!1;R=!0;continue}if(""!==ue){let pt;pt=Ke>C?"":_[Ke+1].toLowerCase();const Ct=8&h?pt:null;if(Ct&&-1!==$t(Ct,ue,0)||2&h&&ue!==pt){if(mn(h))return!1;R=!0}}}}else{if(!R&&!mn(h)&&!mn(q))return!1;if(R&&mn(q))continue;R=!1,h=q|1&h}}return mn(h)||R}function mn(n){return 0==(1&n)}function Mi(n,r,s,h){if(null===r)return-1;let _=0;if(h||!s){let C=!1;for(;_<r.length;){const R=r[_];if(R===n)return _;if(3===R||6===R)C=!0;else{if(1===R||2===R){let j=r[++_];for(;"string"==typeof j;)j=r[++_];continue}if(4===R)break;if(0===R){_+=4;continue}}_+=C?1:2}return-1}return function yi(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const h=n[s];if("number"==typeof h)return-1;if(h===r)return s;s++}return-1}(r,n)}function ni(n,r,s=!1){for(let h=0;h<r.length;h++)if(Ln(n,r[h],s))return!0;return!1}function rr(n,r){e:for(let s=0;s<r.length;s++){const h=r[s];if(n.length===h.length){for(let _=0;_<n.length;_++)if(n[_]!==h[_])continue e;return!0}}return!1}function Gn(n,r){return n?":not("+r.trim()+")":r}function pr(n){let r=n[0],s=1,h=2,_="",C=!1;for(;s<n.length;){let R=n[s];if("string"==typeof R)if(2&h){const j=n[++s];_+="["+R+(j.length>0?'="'+j+'"':"")+"]"}else 8&h?_+="."+R:4&h&&(_+=" "+R);else""!==_&&!mn(R)&&(r+=Gn(C,_),_=""),h=R,C=C||!mn(h);s++}return""!==_&&(r+=Gn(C,_)),r}const $n={};function ao(n){To(Pi(),on(),As()+n,!1)}function To(n,r,s,h){if(!h)if(3==(3&r[2])){const C=n.preOrderCheckHooks;null!==C&&We(r,C,s)}else{const C=n.preOrderHooks;null!==C&&Tt(r,C,0,s)}xa(s)}function Dr(n,r=null,s=null,h){const _=er(n,r,s,h);return _.resolveInjectorInitializers(),_}function er(n,r=null,s=null,h,_=new Set){const C=[s||He,st(n)];return h=h||("object"==typeof n?void 0:Ye(n)),new Vi(C,r||Ar(),h||null,_)}let Bo=(()=>{class n{static create(s,h){if(Array.isArray(s))return Dr({name:""},h,s,"");{const _=s.name??"";return Dr({name:_},s.parent,s.providers,_)}}}return n.THROW_IF_NOT_FOUND=di,n.NULL=new ee,n.\u0275prov=Cn({token:n,providedIn:"any",factory:()=>X(b)}),n.__NG_ELEMENT_ID__=-1,n})();function xs(n,r=In.Default){const s=on();return null===s?X(n,r):wo(Vr(),s,ze(n),r)}function _l(){throw new Error("invalid")}function Qh(n,r){const s=n.contentQueries;if(null!==s)for(let h=0;h<s.length;h+=2){const C=s[h+1];if(-1!==C){const R=n.data[C];Cr(s[h]),R.contentQueries(2,r[C],C)}}}function Xu(n,r,s,h,_,C,R,j,q,ue,Ee){const Ke=r.blueprint.slice();return Ke[0]=_,Ke[2]=76|h,(null!==Ee||n&&1024&n[2])&&(Ke[2]|=1024),re(Ke),Ke[3]=Ke[15]=n,Ke[8]=s,Ke[10]=R||n&&n[10],Ke[11]=j||n&&n[11],Ke[12]=q||n&&n[12]||null,Ke[9]=ue||n&&n[9]||null,Ke[6]=C,Ke[20]=function Dc(){return Cc++}(),Ke[21]=Ee,Ke[16]=2==r.type?n[16]:Ke,Ke}function Su(n,r,s,h,_){let C=n.data[r];if(null===C)C=ed(n,r,s,h,_),function rl(){return Y.lFrame.inI18n}()&&(C.flags|=32);else if(64&C.type){C.type=s,C.value=h,C.attrs=_;const R=el();C.injectorIndex=null===R?-1:R.injectorIndex}return Ws(C,!0),C}function ed(n,r,s,h,_){const C=$c(),R=Ks(),q=n.data[r]=function Pd(n,r,s,h,_,C){return{type:s,index:h,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,R?C:C&&C.parent,s,r,h,_);return null===n.firstChild&&(n.firstChild=q),null!==C&&(R?null==C.child&&null!==q.parent&&(C.child=q):null===C.next&&(C.next=q)),q}function td(n,r,s,h){if(0===s)return-1;const _=r.length;for(let C=0;C<s;C++)r.push(h),n.blueprint.push(h),n.data.push(null);return _}function Od(n,r,s){ba(r);try{const h=n.viewQuery;null!==h&&Ep(1,h,s);const _=n.template;null!==_&&$p(n,r,_,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Qh(n,r),n.staticViewQueries&&Ep(2,n.viewQuery,s);const C=n.components;null!==C&&function _p(n,r){for(let s=0;s<r.length;s++)Jp(n,r[s])}(r,C)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{r[2]&=-5,al()}}function Ah(n,r,s,h){const _=r[2];if(128!=(128&_)){ba(r);try{re(r),function il(n){return Y.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&$p(n,r,s,2,h);const R=3==(3&_);if(R){const ue=n.preOrderCheckHooks;null!==ue&&We(r,ue,null)}else{const ue=n.preOrderHooks;null!==ue&&Tt(r,ue,0,null),Yt(r,0)}if(function Df(n){for(let r=Vh(n);null!==r;r=Ud(r)){if(!r[2])continue;const s=r[9];for(let h=0;h<s.length;h++){const _=s[h];512&_[2]||ne(_[3],1),_[2]|=512}}}(r),function Cf(n){for(let r=Vh(n);null!==r;r=Ud(r))for(let s=10;s<r.length;s++){const h=r[s],_=h[1];ns(h)&&Ah(_,h,_.template,h[8])}}(r),null!==n.contentQueries&&Qh(n,r),R){const ue=n.contentCheckHooks;null!==ue&&We(r,ue)}else{const ue=n.contentHooks;null!==ue&&Tt(r,ue,1),Yt(r,1)}!function Ad(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let h=0;h<s.length;h++){const _=s[h];if(_<0)xa(~_);else{const C=_,R=s[++h],j=s[++h];Ua(R,C),j(2,r[C])}}}finally{xa(-1)}}(n,r);const j=n.components;null!==j&&function Ih(n,r){for(let s=0;s<r.length;s++)Ef(n,r[s])}(r,j);const q=n.viewQuery;if(null!==q&&Ep(2,q,h),R){const ue=n.viewCheckHooks;null!==ue&&We(r,ue)}else{const ue=n.viewHooks;null!==ue&&Tt(r,ue,2),Yt(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,ne(r[3],-1))}finally{al()}}}function $p(n,r,s,h,_){const C=As(),R=2&h;try{xa(-1),R&&r.length>22&&To(n,r,22,!1),s(h,_)}finally{xa(C)}}function Xh(n,r,s){if(Ao(r)){const _=r.directiveEnd;for(let C=r.directiveStart;C<_;C++){const R=n.data[C];R.contentQueries&&R.contentQueries(1,s[C],C)}}}function yp(n,r,s){hs()&&(function yf(n,r,s,h){const _=s.directiveStart,C=s.directiveEnd;yo(s)&&function wf(n,r,s){const h=ts(r,n),_=mf(s),C=n[10],R=Hc(n,Xu(n,_,null,s.onPush?32:16,h,r,C,C.createRenderer(h,s),null,null,null));n[r.index]=R}(r,s,n.data[_+s.componentOffset]),n.firstCreatePass||ec(s,r),_s(h,r);const R=s.initialInputs;for(let j=_;j<C;j++){const q=n.data[j],ue=Os(r,n,j,s);_s(ue,r),null!==R&&Ph(0,j-_,ue,q,0,R),uo(q)&&(us(s.index,r)[8]=Os(r,n,j,s))}}(n,r,s,ts(s,r)),64==(64&s.flags)&&Kp(n,r,s))}function ep(n,r,s=ts){const h=r.localNames;if(null!==h){let _=r.index+1;for(let C=0;C<h.length;C+=2){const R=h[C+1],j=-1===R?s(r,n):n[R];n[_++]=j}}}function mf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=eh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function eh(n,r,s,h,_,C,R,j,q,ue){const Ee=22+h,Ke=Ee+_,pt=function as(n,r){const s=[];for(let h=0;h<r;h++)s.push(h<n?null:$n);return s}(Ee,Ke),Ct="function"==typeof ue?ue():ue;return pt[1]={type:n,blueprint:pt,template:s,queries:null,viewQuery:j,declTNode:r,data:pt.slice().fill(null,Ee),bindingStartIndex:Ee,expandoStartIndex:Ke,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof R?R():R,firstChild:null,schemas:q,consts:Ct,incompleteFirstPass:!1}}function gf(n,r,s,h){const _=Qp(r);null===s?_.push(h):(_.push(s),n.firstCreatePass&&Xp(n).push(h,_.length-1))}function vp(n,r,s,h){for(let _ in n)if(n.hasOwnProperty(_)){s=null===s?{}:s;const C=n[_];null===h?Zp(s,r,_,C):h.hasOwnProperty(_)&&Zp(s,r,h[_],C)}return s}function Zp(n,r,s,h){n.hasOwnProperty(s)?n[s].push(r,h):n[s]=[r,h]}function kl(n,r,s,h,_,C,R,j){const q=ts(r,s);let Ee,ue=r.inputs;!j&&null!=ue&&(Ee=ue[h])?(nh(n,s,Ee,h,_),yo(r)&&Oh(s,r.index)):3&r.type&&(h=function Iu(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),_=null!=R?R(_,r.value||"",h):_,C.setProperty(q,h,_))}function Oh(n,r){const s=us(r,n);16&s[2]||(s[2]|=32)}function tp(n,r,s,h){let _=!1;if(hs()){const C=null===h?null:{"":-1},R=function bf(n,r){const s=n.directiveRegistry;let h=null,_=null;if(s)for(let C=0;C<s.length;C++){const R=s[C];if(ni(r,R.selectors,!1))if(h||(h=[]),uo(R))if(null!==R.findHostDirectiveDefs){const j=[];_=_||new Map,R.findHostDirectiveDefs(R,j,_),h.unshift(...j,R),Rl(n,r,j.length)}else h.unshift(R),Rl(n,r,0);else _=_||new Map,R.findHostDirectiveDefs?.(R,h,_),h.push(R)}return null===h?null:[h,_]}(n,s);let j,q;null===R?j=q=null:[j,q]=R,null!==j&&(_=!0,Wp(n,r,s,j,C,q)),C&&function wp(n,r,s){if(r){const h=n.localNames=[];for(let _=0;_<r.length;_+=2){const C=s[r[_+1]];if(null==C)throw new Fe(-301,!1);h.push(r[_],C)}}}(s,h,C)}return s.mergedAttrs=Tl(s.mergedAttrs,s.attrs),_}function Wp(n,r,s,h,_,C){for(let ue=0;ue<h.length;ue++)ua(ec(s,r),n,h[ue].type);!function Au(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,h.length);for(let ue=0;ue<h.length;ue++){const Ee=h[ue];Ee.providersResolver&&Ee.providersResolver(Ee)}let R=!1,j=!1,q=td(n,r,h.length,null);for(let ue=0;ue<h.length;ue++){const Ee=h[ue];s.mergedAttrs=Tl(s.mergedAttrs,Ee.hostAttrs),rm(n,s,r,q,Ee),xf(q,Ee,_),null!==Ee.contentQueries&&(s.flags|=4),(null!==Ee.hostBindings||null!==Ee.hostAttrs||0!==Ee.hostVars)&&(s.flags|=64);const Ke=Ee.type.prototype;!R&&(Ke.ngOnChanges||Ke.ngOnInit||Ke.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),R=!0),!j&&(Ke.ngOnChanges||Ke.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),j=!0),q++}!function bp(n,r,s){const _=r.directiveEnd,C=n.data,R=r.attrs,j=[];let q=null,ue=null;for(let Ee=r.directiveStart;Ee<_;Ee++){const Ke=C[Ee],pt=s?s.get(Ke):null,tn=pt?pt.outputs:null;q=vp(Ke.inputs,Ee,q,pt?pt.inputs:null),ue=vp(Ke.outputs,Ee,ue,tn);const vn=null===q||null===R||Un(r)?null:kh(q,Ee,R);j.push(vn)}null!==q&&(q.hasOwnProperty("class")&&(r.flags|=8),q.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=j,r.inputs=q,r.outputs=ue}(n,s,C)}function Kp(n,r,s){const h=s.directiveStart,_=s.directiveEnd,C=s.index,R=function ol(){return Y.lFrame.currentDirectiveIndex}();try{xa(C);for(let j=h;j<_;j++){const q=n.data[j],ue=r[j];fs(j),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&vf(q,ue)}}finally{xa(-1),fs(R)}}function vf(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Rl(n,r,s){r.componentOffset=s,(n.components||(n.components=[])).push(r.index)}function xf(n,r,s){if(s){if(r.exportAs)for(let h=0;h<r.exportAs.length;h++)s[r.exportAs[h]]=n;uo(r)&&(s[""]=n)}}function rm(n,r,s,h,_){n.data[h]=_;const C=_.factory||(_.factory=Uo(_.type)),R=new Wi(C,uo(_),xs);n.blueprint[h]=R,s[h]=R,function np(n,r,s,h,_){const C=_.hostBindings;if(C){let R=n.hostBindingOpCodes;null===R&&(R=n.hostBindingOpCodes=[]);const j=~r.index;(function _f(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(R)!=j&&R.push(j),R.push(s,h,C)}}(n,r,h,td(n,s,_.hostVars,$n),_)}function kd(n,r,s,h,_,C,R){if(null==C)n.removeAttribute(r,_,s);else{const j=null==R?Be(C):R(C,h||"",_);n.setAttribute(r,_,j,s)}}function Ph(n,r,s,h,_,C){const R=C[r];if(null!==R){const j=h.setInput;for(let q=0;q<R.length;){const ue=R[q++],Ee=R[q++],Ke=R[q++];null!==j?h.setInput(s,Ke,ue,Ee):s[Ee]=Ke}}}function kh(n,r,s){let h=null,_=0;for(;_<s.length;){const C=s[_];if(0!==C)if(5!==C){if("number"==typeof C)break;if(n.hasOwnProperty(C)){null===h&&(h=[]);const R=n[C];for(let j=0;j<R.length;j+=2)if(R[j]===r){h.push(C,R[j+1],s[_+1]);break}}_+=2}else _+=2;else _+=4}return h}function th(n,r,s,h){return[n,!0,!1,r,null,0,h,s,null,null]}function Ef(n,r){const s=us(r,n);if(ns(s)){const h=s[1];48&s[2]?Ah(h,s,h.template,s[8]):s[5]>0&&Cp(s)}}function Cp(n){for(let h=Vh(n);null!==h;h=Ud(h))for(let _=10;_<h.length;_++){const C=h[_];if(ns(C))if(512&C[2]){const R=C[1];Ah(R,C,R.template,C[8])}else C[5]>0&&Cp(C)}const s=n[1].components;if(null!==s)for(let h=0;h<s.length;h++){const _=us(s[h],n);ns(_)&&_[5]>0&&Cp(_)}}function Jp(n,r){const s=us(r,n),h=s[1];(function qp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(h,s),Od(h,s,s[8])}function Hc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Dp(n){for(;n;){n[2]|=32;const r=Bc(n);if(Oo(n)&&!r)return n;n=r}return null}function Rh(n,r,s,h=!0){const _=r[10];_.begin&&_.begin();try{Ah(n,r,n.template,s)}catch(R){throw h&&ef(r,R),R}finally{_.end&&_.end()}}function Ep(n,r,s){Cr(0),r(n,s)}function Qp(n){return n[7]||(n[7]=[])}function Xp(n){return n.cleanup||(n.cleanup=[])}function ef(n,r){const s=n[9],h=s?s.get(I,null):null;h&&h.handleError(r)}function nh(n,r,s,h,_){for(let C=0;C<s.length;){const R=s[C++],j=s[C++],q=r[R],ue=n.data[R];null!==ue.setInput?ue.setInput(q,_,h,j):q[j]=_}}function Ou(n,r,s){const h=Yo(r,n);jd(n[11],h,s)}function ih(n,r,s){let h=s?n.styles:null,_=s?n.classes:null,C=0;if(null!==r)for(let R=0;R<r.length;R++){const j=r[R];"number"==typeof j?C=j:1==C?_=je(_,j):2==C&&(h=je(h,j+": "+r[++R]+";"))}s?n.styles=h:n.stylesWithoutHost=h,s?n.classes=_:n.classesWithoutHost=_}function Mp(n,r,s,h,_=!1){for(;null!==s;){const C=r[s.index];if(null!==C&&h.push(Hr(C)),gr(C))for(let j=10;j<C.length;j++){const q=C[j],ue=q[1].firstChild;null!==ue&&Mp(q[1],q,ue,h)}const R=s.type;if(8&R)Mp(n,r,s.child,h);else if(32&R){const j=uu(s,r);let q;for(;q=j();)h.push(q)}else if(16&R){const j=gh(r,s);if(Array.isArray(j))h.push(...j);else{const q=Bc(r[16]);Mp(q[1],q,j,h,!0)}}s=_?s.projectionNext:s.next}return h}class Nh{get rootNodes(){const r=this._lView,s=r[1];return Mp(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(gr(r)){const s=r[8],h=s?s.indexOf(this):-1;h>-1&&(jh(r,h),ye(s,h))}this._attachedToViewContainer=!1}du(this._lView[1],this._lView)}onDestroy(r){gf(this._lView[1],this._lView,null,r)}markForCheck(){Dp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Rh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hh(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Fe(902,!1);this._appRef=r}}class om extends Nh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Rh(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Sf extends Rs{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ii(r);return new ip(s,this.ngModule)}}function If(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class am{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,h){h=Re(h);const _=this.injector.get(r,a,h);return _!==a||s===a?_:this.parentInjector.get(r,s,h)}}class ip extends so{get inputs(){return If(this.componentDef.inputs)}get outputs(){return If(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function fo(n){return n.map(pr).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,h,_){let C=(_=_||this.ngModule)instanceof dr?_:_?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const R=C?new am(r,C):r,j=R.get(Sd,null);if(null===j)throw new Fe(407,!1);const q=R.get(Xd,null),ue=j.createRenderer(null,this.componentDef),Ee=this.componentDef.selectors[0][0]||"div",Ke=h?function ou(n,r,s){return n.selectRootElement(r,s===Me.ShadowDom)}(ue,h,this.componentDef.encapsulation):Jc(ue,Ee,function sm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ee)),pt=this.componentDef.onPush?288:272,Ct=eh(0,null,null,1,0,null,null,null,null,null),tn=Xu(null,Ct,null,pt,null,null,j,ue,q,R,null);let vn,Fn;ba(tn);try{const qn=this.componentDef;let wi,hn=null;qn.findHostDirectiveDefs?(wi=[],hn=new Map,qn.findHostDirectiveDefs(qn,wi,hn),wi.push(qn)):wi=[qn];const or=function Pu(n,r){const s=n[1];return n[22]=r,Su(s,22,2,"#host",null)}(tn,Ke),Hs=function Sp(n,r,s,h,_,C,R,j){const q=_[1];!function Af(n,r,s,h){for(const _ of n)r.mergedAttrs=Tl(r.mergedAttrs,_.hostAttrs);null!==r.mergedAttrs&&(ih(r,r.mergedAttrs,!0),null!==s&&Ir(h,s,r))}(h,n,r,R);const ue=C.createRenderer(r,s),Ee=Xu(_,mf(s),null,s.onPush?32:16,_[n.index],n,C,ue,j||null,null,null);return q.firstCreatePass&&Rl(q,n,h.length-1),Hc(_,Ee),_[n.index]=Ee}(or,Ke,qn,wi,tn,j,ue);Fn=Fs(Ct,22),Ke&&function Of(n,r,s,h){if(h)Sr(n,s,["ng-version",i.full]);else{const{attrs:_,classes:C}=function $o(n){const r=[],s=[];let h=1,_=2;for(;h<n.length;){let C=n[h];if("string"==typeof C)2===_?""!==C&&r.push(C,n[++h]):8===_&&s.push(C);else{if(!mn(_))break;_=C}h++}return{attrs:r,classes:s}}(r.selectors[0]);_&&Sr(n,s,_),C&&C.length>0&&Xc(n,s,C.join(" "))}}(ue,qn,Ke,h),void 0!==s&&function Iv(n,r,s){const h=n.projection=[];for(let _=0;_<r.length;_++){const C=s[_];h.push(null!=C?Array.from(C):null)}}(Fn,this.ngContentSelectors,s),vn=function rp(n,r,s,h,_,C){const R=Vr(),j=_[1],q=ts(R,_);Wp(j,_,R,s,null,h);for(let Ee=0;Ee<s.length;Ee++)_s(Os(_,j,R.directiveStart+Ee,R),_);Kp(j,_,R),q&&_s(q,_);const ue=Os(_,j,R.directiveStart+R.componentOffset,R);if(n[8]=_[8]=ue,null!==C)for(const Ee of C)Ee(ue,r);return Xh(j,R,n),ue}(Hs,qn,wi,hn,tn,[Av]),Od(Ct,tn,null)}finally{al()}return new lm(this.componentType,vn,Qo(Fn,tn),tn,Fn)}}class lm extends nu{constructor(r,s,h,_,C){super(),this.location=h,this._rootLView=_,this._tNode=C,this.instance=s,this.hostView=this.changeDetectorRef=new om(_),this.componentType=r}setInput(r,s){const h=this._tNode.inputs;let _;if(null!==h&&(_=h[r])){const C=this._rootLView;nh(C[1],C,_,r,s),Oh(C,this._tNode.index)}}get injector(){return new Ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Av(){const n=Vr();be(on()[1],n)}function cm(n){let r=function dg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const h=[n];for(;r;){let _;if(uo(n))_=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Fe(903,!1);_=r.\u0275dir}if(_){if(s){h.push(_);const R=n;R.inputs=um(n.inputs),R.declaredInputs=um(n.declaredInputs),R.outputs=um(n.outputs);const j=_.hostBindings;j&&Rv(n,j);const q=_.viewQuery,ue=_.contentQueries;if(q&&Pv(n,q),ue&&kv(n,ue),Se(n.inputs,_.inputs),Se(n.declaredInputs,_.declaredInputs),Se(n.outputs,_.outputs),uo(_)&&_.data.animation){const Ee=n.data;Ee.animation=(Ee.animation||[]).concat(_.data.animation)}}const C=_.features;if(C)for(let R=0;R<C.length;R++){const j=C[R];j&&j.ngInherit&&j(n),j===cm&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Ov(n){let r=0,s=null;for(let h=n.length-1;h>=0;h--){const _=n[h];_.hostVars=r+=_.hostVars,_.hostAttrs=Tl(_.hostAttrs,s=Tl(s,_.hostAttrs))}}(h)}function um(n){return n===qe?{}:n===He?[]:n}function Pv(n,r){const s=n.viewQuery;n.viewQuery=s?(h,_)=>{r(h,_),s(h,_)}:r}function kv(n,r){const s=n.contentQueries;n.contentQueries=s?(h,_,C)=>{r(h,_,C),s(h,_,C)}:r}function Rv(n,r){const s=n.hostBindings;n.hostBindings=s?(h,_)=>{r(h,_),s(h,_)}:r}function hg(n){return r=>{r.findHostDirectiveDefs=pg,r.hostDirectives=(Array.isArray(n)?n:n()).map(s=>"function"==typeof s?{directive:ze(s),inputs:qe,outputs:qe}:{directive:ze(s.directive),inputs:fg(s.inputs),outputs:fg(s.outputs)})}}function pg(n,r,s){if(null!==n.hostDirectives)for(const h of n.hostDirectives){const _=Tr(h.directive);Bv(_.declaredInputs,h.inputs),pg(_,r,s),s.set(_,h),r.push(_)}}function fg(n){if(void 0===n||0===n.length)return qe;const r={};for(let s=0;s<n.length;s+=2)r[n[s]]=n[s+1];return r}function Bv(n,r){for(const s in r)r.hasOwnProperty(s)&&(n[r[s]]=n[s])}let Pf=null;function op(){if(!Pf){const n=Jt.Symbol;if(n&&n.iterator)Pf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const h=r[s];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Pf=h)}}}return Pf}function kf(n){return!!dm(n)&&(Array.isArray(n)||!(n instanceof Map)&&op()in n)}function dm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Rd(n,r,s){return n[r]=s}function pc(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function sp(n,r,s,h){const _=pc(n,r,s);return pc(n,r+1,h)||_}function Rf(n,r,s,h,_){const C=sp(n,r,s,h);return pc(n,r+2,_)||C}function hm(n,r,s,h){const _=on();return pc(_,Cl(),r)&&(Pi(),function Nl(n,r,s,h,_,C){const R=ts(n,r);kd(r[11],R,C,n.value,s,h,_)}(Ur(),_,n,r,s,h)),hm}function Ap(n,r,s,h){return pc(n,Cl(),s)?r+Be(s)+h:$n}function Eg(n,r,s,h,_,C,R,j){const q=on(),ue=Pi(),Ee=n+22,Ke=ue.firstCreatePass?function Hv(n,r,s,h,_,C,R,j,q){const ue=r.consts,Ee=Su(r,n,4,R||null,ds(ue,j));tp(r,s,Ee,ds(ue,q)),be(r,Ee);const Ke=Ee.tViews=eh(2,Ee,h,_,C,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ue);return null!==r.queries&&(r.queries.template(r,Ee),Ke.queries=r.queries.embeddedTView(Ee)),Ee}(Ee,ue,q,r,s,h,_,C,R):ue.data[Ee];Ws(Ke,!1);const pt=q[11].createComment("");Tc(ue,q,pt,Ke),_s(pt,q),Hc(q,q[Ee]=th(pt,q,pt,Ke)),Ds(Ke)&&yp(ue,q,Ke),null!=R&&ep(q,Ke,j)}function Tg(n){return Ro(function Va(){return Y.lFrame.contextLView}(),22+n)}function pm(n,r,s){const h=on();return pc(h,Cl(),r)&&kl(Pi(),Ur(),h,n,r,h[11],s,!1),pm}function fm(n,r,s,h,_){const R=_?"class":"style";nh(n,s,r.inputs[R],R,h)}function Nf(n,r,s,h){const _=on(),C=Pi(),R=22+n,j=_[11],q=_[R]=Jc(j,r,function he(){return Y.lFrame.currentNamespace}()),ue=C.firstCreatePass?function $v(n,r,s,h,_,C,R){const j=r.consts,ue=Su(r,n,2,_,ds(j,C));return tp(r,s,ue,ds(j,R)),null!==ue.attrs&&ih(ue,ue.attrs,!1),null!==ue.mergedAttrs&&ih(ue,ue.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ue),ue}(R,C,_,0,r,s,h):C.data[R];return Ws(ue,!0),Ir(j,q,ue),32!=(32&ue.flags)&&Tc(C,_,q,ue),0===function Bn(){return Y.lFrame.elementDepthCount}()&&_s(q,_),function Qr(){Y.lFrame.elementDepthCount++}(),Ds(ue)&&(yp(C,_,ue),Xh(C,ue,_)),null!==h&&ep(_,ue),Nf}function Ff(){let n=Vr();Ks()?tl():(n=n.parent,Ws(n,!1));const r=n;!function tr(){Y.lFrame.elementDepthCount--}();const s=Pi();return s.firstCreatePass&&(be(s,n),Ao(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ls(n){return 0!=(8&n.flags)}(r)&&fm(s,r,on(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Bs(n){return 0!=(16&n.flags)}(r)&&fm(s,r,on(),r.stylesWithoutHost,!1),Ff}function mm(n,r,s,h){return Nf(n,r,s,h),Ff(),mm}function Lf(n,r,s){const h=on(),_=Pi(),C=n+22,R=_.firstCreatePass?function Zv(n,r,s,h,_){const C=r.consts,R=ds(C,h),j=Su(r,n,8,"ng-container",R);return null!==R&&ih(j,R,!0),tp(r,s,j,ds(C,_)),null!==r.queries&&r.queries.elementStart(r,j),j}(C,_,h,r,s):_.data[C];Ws(R,!0);const j=h[C]=h[11].createComment("");return Tc(_,h,j,R),_s(j,h),Ds(R)&&(yp(_,h,R),Xh(_,R,h)),null!=s&&ep(h,R),Lf}function Bf(){let n=Vr();const r=Pi();return Ks()?tl():(n=n.parent,Ws(n,!1)),r.firstCreatePass&&(be(r,n),Ao(n)&&r.queries.elementEnd(n)),Bf}function gm(n,r,s){return Lf(n,r,s),Bf(),gm}function Mg(){return on()}function _m(n){return!!n&&"function"==typeof n.then}function Sg(n){return!!n&&"function"==typeof n.subscribe}const Ig=Sg;function ym(n,r,s,h){const _=on(),C=Pi(),R=Vr();return function Og(n,r,s,h,_,C,R){const j=Ds(h),ue=n.firstCreatePass&&Xp(n),Ee=r[8],Ke=Qp(r);let pt=!0;if(3&h.type||R){const vn=ts(h,r),Fn=R?R(vn):vn,qn=Ke.length,wi=R?or=>R(Hr(or[h.index])):h.index;let hn=null;if(!R&&j&&(hn=function Yv(n,r,s,h){const _=n.cleanup;if(null!=_)for(let C=0;C<_.length-1;C+=2){const R=_[C];if(R===s&&_[C+1]===h){const j=r[7],q=_[C+2];return j.length>q?j[q]:null}"string"==typeof R&&(C+=2)}return null}(n,r,_,h.index)),null!==hn)(hn.__ngLastListenerFn__||hn).__ngNextListenerFn__=C,hn.__ngLastListenerFn__=C,pt=!1;else{C=kg(h,r,Ee,C,!1);const or=s.listen(Fn,_,C);Ke.push(C,or),ue&&ue.push(_,wi,qn,qn+1)}}else C=kg(h,r,Ee,C,!1);const Ct=h.outputs;let tn;if(pt&&null!==Ct&&(tn=Ct[_])){const vn=tn.length;if(vn)for(let Fn=0;Fn<vn;Fn+=2){const Hs=r[tn[Fn]][tn[Fn+1]].subscribe(C),Pa=Ke.length;Ke.push(C,Hs),ue&&ue.push(_,h.index,Pa,-(Pa+1))}}}(C,_,_[11],R,n,r,h),ym}function Pg(n,r,s,h){try{return!1!==s(h)}catch(_){return ef(n,_),!1}}function kg(n,r,s,h,_){return function C(R){if(R===Function)return h;Dp(n.componentOffset>-1?us(n.index,r):r);let q=Pg(r,0,h,R),ue=C.__ngNextListenerFn__;for(;ue;)q=Pg(r,0,ue,R)&&q,ue=ue.__ngNextListenerFn__;return _&&!1===q&&(R.preventDefault(),R.returnValue=!1),q}}function Rg(n=1){return function mc(n){return(Y.lFrame.contextLView=function Nu(n,r){for(;n>0;)r=r[15],n--;return r}(n,Y.lFrame.contextLView))[8]}(n)}function Wv(n,r){let s=null;const h=function kn(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(n);for(let _=0;_<r.length;_++){const C=r[_];if("*"!==C){if(null===h?ni(n,C,!0):rr(h,C))return _}else s=_}return s}function Ng(n){const r=on()[16][6];if(!r.projection){const h=r.projection=Oe(n?n.length:1,null),_=h.slice();let C=r.child;for(;null!==C;){const R=n?Wv(C,n):0;null!==R&&(_[R]?_[R].projectionNext=C:h[R]=C,_[R]=C),C=C.next}}}function Fg(n,r=0,s){const h=on(),_=Pi(),C=Su(_,22+n,16,null,s||null);null===C.projection&&(C.projection=r),tl(),32!=(32&C.flags)&&function yh(n,r,s){hp(r[11],0,r,s,Zl(n,s,r),Gu(s.parent||r[6],s,r))}(_,h,C)}function vm(n,r,s){return zf(n,"",r,"",s),vm}function zf(n,r,s,h,_){const C=on(),R=Ap(C,r,s,h);return R!==$n&&kl(Pi(),Ur(),C,n,R,C[11],_,!1),zf}function Vf(n,r){return n<<17|r<<2}function Fh(n){return n>>17&32767}function bm(n){return 2|n}function ap(n){return(131068&n)>>2}function xm(n,r){return-131069&n|r<<2}function wm(n){return 1|n}function $g(n,r,s,h,_){const C=n[s+1],R=null===r;let j=h?Fh(C):ap(C),q=!1;for(;0!==j&&(!1===q||R);){const Ee=n[j+1];e0(n[j],r)&&(q=!0,n[j+1]=h?wm(Ee):bm(Ee)),j=h?Fh(Ee):ap(Ee)}q&&(n[s+1]=h?bm(C):wm(C))}function e0(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Qt(n,r)>=0}const yl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zg(n){return n.substring(yl.key,yl.keyEnd)}function t0(n){return n.substring(yl.value,yl.valueEnd)}function Yg(n,r){const s=yl.textEnd;return s===r?-1:(r=yl.keyEnd=function o0(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,yl.key=r,s),Bp(n,r,s))}function Wg(n,r){const s=yl.textEnd;let h=yl.key=Bp(n,r,s);return s===h?-1:(h=yl.keyEnd=function s0(n,r,s){let h;for(;r<s&&(45===(h=n.charCodeAt(r))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)r++;return r}(n,h,s),h=Jg(n,h,s),h=yl.value=Bp(n,h,s),h=yl.valueEnd=function a0(n,r,s){let h=-1,_=-1,C=-1,R=r,j=R;for(;R<s;){const q=n.charCodeAt(R++);if(59===q)return j;34===q||39===q?j=R=qg(n,q,R,s):r===R-4&&85===C&&82===_&&76===h&&40===q?j=R=qg(n,41,R,s):q>32&&(j=R),C=_,_=h,h=-33&q}return j}(n,h,s),Jg(n,h,s))}function Kg(n){yl.key=0,yl.keyEnd=0,yl.value=0,yl.valueEnd=0,yl.textEnd=n.length}function Bp(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function Jg(n,r,s,h){return(r=Bp(n,r,s))<s&&r++,r}function qg(n,r,s,h){let _=-1,C=s;for(;C<h;){const R=n.charCodeAt(C++);if(R==r&&92!==_)return C;_=92==R&&92===_?0:R}throw new Error}function Cm(n,r,s){return id(n,r,s,!1),Cm}function Dm(n,r){return id(n,r,null,!0),Dm}function nd(n){rd(t_,l0,n,!1)}function l0(n,r){for(let s=function r0(n){return Kg(n),Wg(n,Bp(n,0,yl.textEnd))}(r);s>=0;s=Wg(r,s))t_(n,Zg(r),t0(r))}function Qg(n){rd(Ft,Nd,n,!0)}function Nd(n,r){for(let s=function n0(n){return Kg(n),Yg(n,Bp(n,0,yl.textEnd))}(r);s>=0;s=Yg(r,s))Ft(n,Zg(r),!0)}function id(n,r,s,h){const _=on(),C=Pi(),R=va(2);C.firstUpdatePass&&e_(C,n,R,h),r!==$n&&pc(_,R,r)&&n_(C,C.data[As()],_,_[11],n,_[R+1]=function m0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ye(hl(n)))),n}(r,s),h,R)}function rd(n,r,s,h){const _=Pi(),C=va(2);_.firstUpdatePass&&e_(_,null,C,h);const R=on();if(s!==$n&&pc(R,C,s)){const j=_.data[As()];if(r_(j,h)&&!Xg(_,C)){let q=h?j.classesWithoutHost:j.stylesWithoutHost;null!==q&&(s=je(q,s||"")),fm(_,j,R,s,h)}else!function f0(n,r,s,h,_,C,R,j){_===$n&&(_=He);let q=0,ue=0,Ee=0<_.length?_[0]:null,Ke=0<C.length?C[0]:null;for(;null!==Ee||null!==Ke;){const pt=q<_.length?_[q+1]:void 0,Ct=ue<C.length?C[ue+1]:void 0;let vn,tn=null;Ee===Ke?(q+=2,ue+=2,pt!==Ct&&(tn=Ke,vn=Ct)):null===Ke||null!==Ee&&Ee<Ke?(q+=2,tn=Ee):(ue+=2,tn=Ke,vn=Ct),null!==tn&&n_(n,r,s,h,tn,vn,R,j),Ee=q<_.length?_[q]:null,Ke=ue<C.length?C[ue]:null}}(_,j,R,R[11],R[C+1],R[C+1]=function p0(n,r,s){if(null==s||""===s)return He;const h=[],_=hl(s);if(Array.isArray(_))for(let C=0;C<_.length;C++)n(h,_[C],!0);else if("object"==typeof _)for(const C in _)_.hasOwnProperty(C)&&n(h,C,_[C]);else"string"==typeof _&&r(h,_);return h}(n,r,s),h,C)}}function Xg(n,r){return r>=n.expandoStartIndex}function e_(n,r,s,h){const _=n.data;if(null===_[s+1]){const C=_[As()],R=Xg(n,s);r_(C,h)&&null===r&&!R&&(r=!1),r=function c0(n,r,s,h){const _=function sl(n){const r=Y.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let C=h?r.residualClasses:r.residualStyles;if(null===_)0===(h?r.classBindings:r.styleBindings)&&(s=nf(s=Em(null,n,r,s,h),r.attrs,h),C=null);else{const R=r.directiveStylingLast;if(-1===R||n[R]!==_)if(s=Em(_,n,r,s,h),null===C){let q=function u0(n,r,s){const h=s?r.classBindings:r.styleBindings;if(0!==ap(h))return n[Fh(h)]}(n,r,h);void 0!==q&&Array.isArray(q)&&(q=Em(null,n,r,q[1],h),q=nf(q,r.attrs,h),function d0(n,r,s,h){n[Fh(s?r.classBindings:r.styleBindings)]=h}(n,r,h,q))}else C=function h0(n,r,s){let h;const _=r.directiveEnd;for(let C=1+r.directiveStylingLast;C<_;C++)h=nf(h,n[C].hostAttrs,s);return nf(h,r.attrs,s)}(n,r,h)}return void 0!==C&&(h?r.residualClasses=C:r.residualStyles=C),s}(_,C,r,h),function Qv(n,r,s,h,_,C){let R=C?r.classBindings:r.styleBindings,j=Fh(R),q=ap(R);n[h]=s;let Ee,ue=!1;if(Array.isArray(s)?(Ee=s[1],(null===Ee||Qt(s,Ee)>0)&&(ue=!0)):Ee=s,_)if(0!==q){const pt=Fh(n[j+1]);n[h+1]=Vf(pt,j),0!==pt&&(n[pt+1]=xm(n[pt+1],h)),n[j+1]=function Jv(n,r){return 131071&n|r<<17}(n[j+1],h)}else n[h+1]=Vf(j,0),0!==j&&(n[j+1]=xm(n[j+1],h)),j=h;else n[h+1]=Vf(q,0),0===j?j=h:n[q+1]=xm(n[q+1],h),q=h;ue&&(n[h+1]=bm(n[h+1])),$g(n,Ee,h,!0),$g(n,Ee,h,!1),function Xv(n,r,s,h,_){const C=_?n.residualClasses:n.residualStyles;null!=C&&"string"==typeof r&&Qt(C,r)>=0&&(s[h+1]=wm(s[h+1]))}(r,Ee,n,h,C),R=Vf(j,q),C?r.classBindings=R:r.styleBindings=R}(_,C,r,s,R,h)}}function Em(n,r,s,h,_){let C=null;const R=s.directiveEnd;let j=s.directiveStylingLast;for(-1===j?j=s.directiveStart:j++;j<R&&(C=r[j],h=nf(h,C.hostAttrs,_),C!==n);)j++;return null!==n&&(s.directiveStylingLast=j),h}function nf(n,r,s){const h=s?1:2;let _=-1;if(null!==r)for(let C=0;C<r.length;C++){const R=r[C];"number"==typeof R?_=R:_===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ft(n,R,!!s||r[++C]))}return void 0===n?null:n}function t_(n,r,s){Ft(n,r,hl(s))}function n_(n,r,s,h,_,C,R,j){if(!(3&r.type))return;const q=n.data,ue=q[j+1],Ee=function qv(n){return 1==(1&n)}(ue)?i_(q,r,s,_,ap(ue),R):void 0;Uf(Ee)||(Uf(C)||function Kv(n){return 2==(2&n)}(ue)&&(C=i_(q,null,s,_,j,R)),function Gd(n,r,s,h,_){if(r)_?n.addClass(s,h):n.removeClass(s,h);else{let C=-1===h.indexOf("-")?void 0:Il.DashCase;null==_?n.removeStyle(s,h,C):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),C|=Il.Important),n.setStyle(s,h,_,C))}}(h,R,Yo(As(),s),_,C))}function i_(n,r,s,h,_,C){const R=null===r;let j;for(;_>0;){const q=n[_],ue=Array.isArray(q),Ee=ue?q[1]:q,Ke=null===Ee;let pt=s[_+1];pt===$n&&(pt=Ke?He:void 0);let Ct=Ke?rn(pt,h):Ee===h?pt:void 0;if(ue&&!Uf(Ct)&&(Ct=rn(q,h)),Uf(Ct)&&(j=Ct,R))return j;const tn=n[_+1];_=R?Fh(tn):ap(tn)}if(null!==r){let q=C?r.residualClasses:r.residualStyles;null!=q&&(j=rn(q,h))}return j}function Uf(n){return void 0!==n}function r_(n,r){return 0!=(n.flags&(r?8:16))}function o_(n,r=""){const s=on(),h=Pi(),_=n+22,C=h.firstCreatePass?Su(h,_,1,r,null):h.data[_],R=s[_]=Kc(s[11],r);Tc(h,s,R,C),Ws(C,!1)}function Tm(n){return jf("",n,""),Tm}function jf(n,r,s){const h=on(),_=Ap(h,n,r,s);return _!==$n&&Ou(h,As(),_),jf}function Mm(n,r,s,h,_,C,R){const j=on(),q=function Pp(n,r,s,h,_,C,R,j){const ue=Rf(n,ps(),s,_,R);return va(3),ue?r+Be(s)+h+Be(_)+C+Be(R)+j:$n}(j,n,r,s,h,_,C,R);return q!==$n&&Ou(j,As(),q),Mm}function p_(n,r,s,h,_){rd(Ft,Nd,function Op(n,r,s,h,_,C){const j=sp(n,ps(),s,_);return va(2),j?r+Be(s)+h+Be(_)+C:$n}(on(),n,r,s,h,_),!0)}function Sm(n,r,s){const h=on();return pc(h,Cl(),r)&&kl(Pi(),Ur(),h,n,r,h[11],s,!0),Sm}const lp=void 0;var R0=["en",[["a","p"],["AM","PM"],lp],[["AM","PM"],lp,lp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lp,"{1} 'at' {0}",lp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function k0(n){const s=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===h?1:5}];let zp={};function Im(n){const r=function N0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=E_(r);if(s)return s;const h=r.split("-")[0];if(s=E_(h),s)return s;if("en"===h)return R0;throw new Fe(701,!1)}function D_(n){return Im(n)[Ni.PluralCase]}function E_(n){return n in zp||(zp[n]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[n]),zp[n]}var Ni=(()=>((Ni=Ni||{})[Ni.LocaleId=0]="LocaleId",Ni[Ni.DayPeriodsFormat=1]="DayPeriodsFormat",Ni[Ni.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ni[Ni.DaysFormat=3]="DaysFormat",Ni[Ni.DaysStandalone=4]="DaysStandalone",Ni[Ni.MonthsFormat=5]="MonthsFormat",Ni[Ni.MonthsStandalone=6]="MonthsStandalone",Ni[Ni.Eras=7]="Eras",Ni[Ni.FirstDayOfWeek=8]="FirstDayOfWeek",Ni[Ni.WeekendRange=9]="WeekendRange",Ni[Ni.DateFormat=10]="DateFormat",Ni[Ni.TimeFormat=11]="TimeFormat",Ni[Ni.DateTimeFormat=12]="DateTimeFormat",Ni[Ni.NumberSymbols=13]="NumberSymbols",Ni[Ni.NumberFormats=14]="NumberFormats",Ni[Ni.CurrencyCode=15]="CurrencyCode",Ni[Ni.CurrencySymbol=16]="CurrencySymbol",Ni[Ni.CurrencyName=17]="CurrencyName",Ni[Ni.Currencies=18]="Currencies",Ni[Ni.Directionality=19]="Directionality",Ni[Ni.PluralCase=20]="PluralCase",Ni[Ni.ExtraData=21]="ExtraData",Ni))();const F0=["zero","one","two","few","many"],Vp="en-US",Hf={marker:"element"},Gf={marker:"ICU"};var ma=(()=>((ma=ma||{})[ma.SHIFT=2]="SHIFT",ma[ma.APPEND_EAGERLY=1]="APPEND_EAGERLY",ma[ma.COMMENT=2]="COMMENT",ma))();let T_=Vp;function M_(n){(function Ot(n,r){null==n&&un(r,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(T_=n.toLowerCase().replace(/_/g,"-"))}function S_(n,r,s){const h=r.insertBeforeIndex,_=Array.isArray(h)?h[0]:h;return null===_?fh(n,0,s):Hr(s[_])}function I_(n,r,s,h,_){const C=r.insertBeforeIndex;if(Array.isArray(C)){let R=h,j=null;if(3&r.type||(j=R,R=_),null!==R&&-1===r.componentOffset)for(let q=1;q<C.length;q++)pu(n,R,s[C[q]],j,!1)}}function A_(n,r){if(n.push(r),n.length>1)for(let s=n.length-2;s>=0;s--){const h=n[s];O_(h)||V0(h,r)&&null===U0(h)&&j0(h,r.index)}}function O_(n){return!(64&n.type)}function V0(n,r){return O_(r)||n.index>r.index}function U0(n){const r=n.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function j0(n,r){const s=n.insertBeforeIndex;Array.isArray(s)?s[0]=r:(fu(S_,I_),n.insertBeforeIndex=r)}function rf(n,r){const s=n.data[r];return null===s||"string"==typeof s?null:s.hasOwnProperty("currentCaseLViewIndex")?s:s.value}function $0(n,r,s){const h=ed(n,s,64,null,null);return A_(r,h),h}function $f(n,r){const s=r[n.currentCaseLViewIndex];return null===s?s:s<0?~s:s}function P_(n){return n>>>17}function k_(n){return(131070&n)>>>1}let sf=0,af=0;function N_(n,r,s,h){const _=s[11];let R,C=null;for(let j=0;j<r.length;j++){const q=r[j];if("string"==typeof q){const ue=r[++j];null===s[ue]&&(s[ue]=Kc(_,q))}else if("number"==typeof q)switch(1&q){case 0:const ue=P_(q);let Ee,Ke;if(null===C&&(C=ue,R=Qc(_,h)),ue===C?(Ee=h,Ke=R):(Ee=null,Ke=Hr(s[ue])),null!==Ke){const vn=k_(q);pu(_,Ke,s[vn],Ee,!1);const qn=rf(n,vn);if(null!==qn&&"object"==typeof qn){const wi=$f(qn,s);null!==wi&&N_(n,qn.create[wi],s,s[qn.anchorIdx])}}break;case 1:const Ct=r[++j],tn=r[++j];kd(_,Yo(q>>>1,s),null,null,Ct,tn,null)}else switch(q){case Gf:const ue=r[++j],Ee=r[++j];null===s[Ee]&&_s(s[Ee]=dp(_,ue),s);break;case Hf:const Ke=r[++j],pt=r[++j];null===s[pt]&&_s(s[pt]=Jc(_,Ke,null),s)}}}function F_(n,r,s,h,_){for(let C=0;C<s.length;C++){const R=s[C],j=s[++C];if(R&_){let q="";for(let ue=C+1;ue<=C+j;ue++){const Ee=s[ue];if("string"==typeof Ee)q+=Ee;else if("number"==typeof Ee)if(Ee<0)q+=Be(r[h-Ee]);else{const Ke=Ee>>>2;switch(3&Ee){case 1:const pt=s[++ue],Ct=s[++ue],tn=n.data[Ke];"string"==typeof tn?kd(r[11],r[Ke],null,tn,pt,q,Ct):kl(n,tn,r,pt,q,r[11],Ct,!1);break;case 0:const vn=r[Ke];null!==vn&&jd(r[11],vn,q);break;case 2:J0(n,rf(n,Ke),r,q);break;case 3:L_(n,rf(n,Ke),h,r)}}}}else{const q=s[C+1];if(q>0&&3==(3&q)){const Ee=rf(n,q>>>2);r[Ee.currentCaseLViewIndex]<0&&L_(n,Ee,h,r)}}C+=j}}function L_(n,r,s,h){let _=h[r.currentCaseLViewIndex];if(null!==_){let C=sf;_<0&&(_=h[r.currentCaseLViewIndex]=~_,C=-1),F_(n,h,r.update[_],s,C)}}function J0(n,r,s,h){const _=function q0(n,r){let s=n.cases.indexOf(r);if(-1===s)switch(n.type){case 1:{const h=function L0(n,r){const s=D_(r)(parseInt(n,10)),h=F0[s];return void 0!==h?h:"other"}(r,function z0(){return T_}());s=n.cases.indexOf(h),-1===s&&"other"!==h&&(s=n.cases.indexOf("other"));break}case 0:s=n.cases.indexOf("other")}return-1===s?null:s}(r,h);if($f(r,s)!==_&&(B_(n,r,s),s[r.currentCaseLViewIndex]=null===_?null:~_,null!==_)){const R=s[r.anchorIdx];R&&N_(n,r.create[_],s,R)}}function B_(n,r,s){let h=$f(r,s);if(null!==h){const _=r.remove[h];for(let C=0;C<_.length;C++){const R=_[C];if(R>0){const j=Yo(R,s);null!==j&&_h(s[11],j)}else B_(n,rf(n,~R),s)}}}function Q0(){const n=[];let s,h,r=-1;function C(j,q){r=0;const ue=$f(j,q);h=null!==ue?j.remove[ue]:He}function R(){if(r<h.length){const j=h[r++];return j>0?s[j]:(n.push(r,h),C(s[1].data[~j],s),R())}return 0===n.length?null:(h=n.pop(),r=n.pop(),R())}return function _(j,q){for(s=q;n.length;)n.pop();return C(j.value,q),R}}const Zf=/\ufffd(\d+):?\d*\ufffd/gi,eb=/\ufffd(\d+)\ufffd/,V_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,tb=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,nb=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ib=/\uE500/g;function U_(n,r,s,h,_,C,R){const j=td(n,h,1,null);let q=j<<ma.SHIFT,ue=el();r===ue&&(ue=null),null===ue&&(q|=ma.APPEND_EAGERLY),R&&(q|=ma.COMMENT,function zu(n){void 0===gd&&(gd=n())}(Q0)),_.push(q,null===C?"":C);const Ee=ed(n,j,R?32:1,null===C?"":C,null);A_(s,Ee);const Ke=Ee.index;return Ws(Ee,!1),null!==ue&&r!==ue&&function G0(n,r){let s=n.insertBeforeIndex;null===s?(fu(S_,I_),s=n.insertBeforeIndex=[null,r]):(function Zn(n,r,s){n!=r&&un(s,n,r,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(r))}(ue,Ke),Ee}function sb(n,r,s,h,_,C,R){const j=R.match(Zf),q=U_(n,r,s,C,h,j?null:R,!1);j&&cf(_,R,q.index,null,0,null)}function cf(n,r,s,h,_,C){const R=n.length,j=R+1;n.push(null,null);const q=R+2,ue=r.split(Zf);let Ee=0;for(let Ke=0;Ke<ue.length;Ke++){const pt=ue[Ke];if(1&Ke){const Ct=_+parseInt(pt,10);n.push(-1-Ct),Ee|=j_(Ct)}else""!==pt&&n.push(pt)}return n.push(s<<2|(h?1:0)),h&&n.push(h,C),n[R]=Ee,n[j]=n.length-q,Ee}function j_(n){return 1<<Math.min(n,31)}function H_(n){let r,C,s="",h=0,_=!1;for(;null!==(r=tb.exec(n));)_?r[0]===`\ufffd/*${C}\ufffd`&&(h=r.index,_=!1):(s+=n.substring(h,r.index+r[0].length),C=r[1],_=!0);return s+=n.slice(h),s}function G_(n,r,s,h,_,C){let R=0;const j={type:_.type,currentCaseLViewIndex:td(n,r,1,null),anchorIdx:C,cases:[],create:[],remove:[],update:[]};(function fb(n,r,s){n.push(j_(r.mainBinding),2,-1-r.mainBinding,s<<2|2)})(s,_,C),function H0(n,r,s){const h=n.data[r];null===h?n.data[r]=s:h.value=s}(n,C,j);const q=_.values;for(let ue=0;ue<q.length;ue++){const Ee=q[ue],Ke=[];for(let pt=0;pt<Ee.length;pt++){const Ct=Ee[pt];if("string"!=typeof Ct){const tn=Ke.push(Ct)-1;Ee[pt]=`\x3c!--\ufffd${tn}\ufffd--\x3e`}}R=hb(n,j,r,s,h,_.cases[ue],Ee.join(""),Ke)|R}R&&function mb(n,r,s){n.push(r,1,s<<2|3)}(s,R,C)}function db(n){const r=[],s=[];let h=1,_=0;const C=Am(n=n.replace(V_,function(R,j,q){return h="select"===q?0:1,_=parseInt(j.slice(1),10),""}));for(let R=0;R<C.length;){let j=C[R++].trim();1===h&&(j=j.replace(/\s*(?:=)?(\w+)\s*/,"$1")),j.length&&r.push(j);const q=Am(C[R++]);r.length>s.length&&s.push(q)}return{type:h,mainBinding:_,cases:r,values:s}}function Am(n){if(!n)return[];let r=0;const s=[],h=[],_=/[{}]/g;let C;for(_.lastIndex=0;C=_.exec(n);){const j=C.index;if("}"==C[0]){if(s.pop(),0==s.length){const q=n.substring(r,j);V_.test(q)?h.push(db(q)):h.push(q),r=j+1}}else{if(0==s.length){const q=n.substring(r,j);h.push(q),r=j+1}s.push("{")}}const R=n.substring(r);return h.push(R),h}function hb(n,r,s,h,_,C,R,j){const q=[],ue=[],Ee=[];r.cases.push(C),r.create.push(q),r.remove.push(ue),r.update.push(Ee);const pt=Yd(function xh(){return void 0!==bd?bd:typeof document<"u"?document:void 0}()).getInertBodyElement(R),Ct=lc(pt)||pt;return Ct?$_(n,r,s,h,q,ue,Ee,Ct,_,j,0):0}function $_(n,r,s,h,_,C,R,j,q,ue,Ee){let Ke=0,pt=j.firstChild;for(;pt;){const Ct=td(n,s,1,null);switch(pt.nodeType){case Node.ELEMENT_NODE:const tn=pt,vn=tn.tagName.toLowerCase();if(Kd.hasOwnProperty(vn)){Om(_,Hf,vn,q,Ct),n.data[Ct]=vn;const hn=tn.attributes;for(let or=0;or<hn.length;or++){const Hs=hn.item(or),Pa=Hs.name.toLowerCase();Hs.value.match(Zf)?Mh.hasOwnProperty(Pa)&&cf(R,Hs.value,Ct,Hs.name,0,Jd[Pa]?bu:null):gb(_,Ct,Hs)}Ke=$_(n,r,s,h,_,C,R,pt,Ct,ue,Ee+1)|Ke,Z_(C,Ct,Ee)}break;case Node.TEXT_NODE:const Fn=pt.textContent||"",qn=Fn.match(Zf);Om(_,null,qn?"":Fn,q,Ct),Z_(C,Ct,Ee),qn&&(Ke=cf(R,Fn,Ct,null,0,null)|Ke);break;case Node.COMMENT_NODE:const wi=eb.exec(pt.textContent||"");if(wi){const or=ue[parseInt(wi[1],10)];Om(_,Gf,"",q,Ct),G_(n,s,h,q,or,Ct),pb(C,Ct,Ee)}}pt=pt.nextSibling}return Ke}function Z_(n,r,s){0===s&&n.push(r)}function pb(n,r,s){0===s&&(n.push(~r),n.push(r))}function Om(n,r,s,h,_){null!==r&&n.push(r),n.push(s,_,function Z0(n,r,s){return n|r<<17|s<<1}(0,h,_))}function gb(n,r,s){n.push(r<<1|1,s.name,s.value)}function W_(n,r,s=-1){const h=Pi(),_=on(),C=22+n,R=ds(h.consts,r),j=el();h.firstCreatePass&&function ob(n,r,s,h,_,C){const R=el(),j=[],q=[],ue=[[]];_=function ub(n,r){if(function cb(n){return-1===n}(r))return H_(n);{const s=n.indexOf(`:${r}\ufffd`)+2+r.toString().length,h=n.search(new RegExp(`\ufffd\\/\\*\\d+:${r}\ufffd`));return H_(n.substring(s,h))}}(_,C);const Ee=function rb(n){return n.replace(ib," ")}(_).split(nb);for(let Ke=0;Ke<Ee.length;Ke++){let pt=Ee[Ke];if(1&Ke){const Ct=47===pt.charCodeAt(0),vn=(pt.charCodeAt(Ct?1:0),22+Number.parseInt(pt.substring(Ct?2:1)));if(Ct)ue.shift(),Ws(el(),!1);else{const Fn=$0(n,ue[0],vn);ue.unshift([]),Ws(Fn,!0)}}else{const Ct=Am(pt);for(let tn=0;tn<Ct.length;tn++){let vn=Ct[tn];if(1&tn){const Fn=vn;if("object"!=typeof Fn)throw new Error(`Unable to parse ICU expression in "${_}" message.`);G_(n,s,q,r,Fn,U_(n,R,ue[0],s,j,"",!0).index)}else""!==vn&&sb(n,R,ue[0],j,q,s,vn)}}}n.data[h]={create:j,update:q}}(h,null===j?0:j.index,_,C,R,s);const q=h.data[C],Ee=ju(h,j===_[6]?null:j,_);(function K0(n,r,s,h){const _=n[11];for(let C=0;C<r.length;C++){const R=r[C++],j=r[C],ue=(R&ma.APPEND_EAGERLY)===ma.APPEND_EAGERLY,Ee=R>>>ma.SHIFT;let Ke=n[Ee];null===Ke&&(Ke=n[Ee]=(R&ma.COMMENT)===ma.COMMENT?_.createComment(j):Kc(_,j)),ue&&null!==s&&pu(_,s,Ke,h,!1)}})(_,q.create,Ee,j&&8&j.type?_[j.index]:null),Dl(!0)}function J_(n,r,s){W_(n,r,s),function K_(){Dl(!1)}()}function Pm(n){return function Y0(n){n&&(sf|=1<<Math.min(af,31)),af++}(pc(on(),Cl(),n)),Pm}function q_(n){!function W0(n,r,s){if(af>0){const h=n.data[s];F_(n,r,Array.isArray(h)?h:h.update,ps()-af-1,sf)}sf=0,af=0}(Pi(),on(),n+22)}function km(n,r,s,h,_){if(n=ze(n),Array.isArray(n))for(let C=0;C<n.length;C++)km(n[C],r,s,h,_);else{const C=Pi(),R=on();let j=Hi(n)?n:ze(n.provide),q=na(n);const ue=Vr(),Ee=1048575&ue.providerIndexes,Ke=ue.directiveStart,pt=ue.providerIndexes>>20;if(Hi(n)||!n.multi){const Ct=new Wi(q,_,xs),tn=Nm(j,r,_?Ee:Ee+pt,Ke);-1===tn?(ua(ec(ue,R),C,j),Rm(C,n,r.length),r.push(j),ue.directiveStart++,ue.directiveEnd++,_&&(ue.providerIndexes+=1048576),s.push(Ct),R.push(Ct)):(s[tn]=Ct,R[tn]=Ct)}else{const Ct=Nm(j,r,Ee+pt,Ke),tn=Nm(j,r,Ee,Ee+pt),Fn=tn>=0&&s[tn];if(_&&!Fn||!_&&!(Ct>=0&&s[Ct])){ua(ec(ue,R),C,j);const qn=function Ab(n,r,s,h,_){const C=new Wi(n,s,xs);return C.multi=[],C.index=r,C.componentProviders=0,Q_(C,_,h&&!s),C}(_?Ib:Sb,s.length,_,h,q);!_&&Fn&&(s[tn].providerFactory=qn),Rm(C,n,r.length,0),r.push(j),ue.directiveStart++,ue.directiveEnd++,_&&(ue.providerIndexes+=1048576),s.push(qn),R.push(qn)}else Rm(C,n,Ct>-1?Ct:tn,Q_(s[_?tn:Ct],q,!_&&h));!_&&h&&Fn&&s[tn].componentProviders++}}}function Rm(n,r,s,h){const _=Hi(r),C=function lr(n){return!!n.useClass}(r);if(_||C){const q=(C?ze(r.useClass):r).prototype.ngOnDestroy;if(q){const ue=n.destroyHooks||(n.destroyHooks=[]);if(!_&&r.multi){const Ee=ue.indexOf(s);-1===Ee?ue.push(s,[h,q]):ue[Ee+1].push(h,q)}else ue.push(s,q)}}}function Q_(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Nm(n,r,s,h){for(let _=s;_<h;_++)if(r[_]===n)return _;return-1}function Sb(n,r,s,h){return Fm(this.multi,[])}function Ib(n,r,s,h){const _=this.multi;let C;if(this.providerFactory){const R=this.providerFactory.componentProviders,j=Os(s,s[1],this.providerFactory.index,h);C=j.slice(0,R),Fm(_,C);for(let q=R;q<j.length;q++)C.push(j[q])}else C=[],Fm(_,C);return C}function Fm(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function X_(n,r=[]){return s=>{s.providersResolver=(h,_)=>function Mb(n,r,s){const h=Pi();if(h.firstCreatePass){const _=uo(n);km(s,h.data,h.blueprint,_,!0),km(r,h.data,h.blueprint,_,!1)}}(h,_?_(n):n,r)}}class Up{}class ey{}function Ob(n,r){return new ty(n,r??null)}class ty extends Up{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sf(this);const h=zo(r);this._bootstrapComponents=Ze(h.bootstrap),this._r3Injector=er(r,s,[{provide:Up,useValue:this},{provide:Rs,useValue:this.componentFactoryResolver}],Ye(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Lm extends ey{constructor(r){super(),this.moduleType=r}create(r){return new ty(this.moduleType,r)}}class Pb extends Up{constructor(r,s,h){super(),this.componentFactoryResolver=new Sf(this),this.instance=null;const _=new Vi([...r,{provide:Up,useValue:this},{provide:Rs,useValue:this.componentFactoryResolver}],s||Ar(),h,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Bm(n,r,s=null){return new Pb(n,r,s).injector}let kb=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const h=dt(0,s.type),_=h.length>0?Bm([h],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,_)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Cn({token:n,providedIn:"environment",factory:()=>new n(X(dr))}),n})();function ny(n){n.getStandaloneInjector=r=>r.get(kb).getOrCreateStandaloneInjector(n)}function cy(n,r,s){const h=Wo()+n,_=on();return _[h]===$n?Rd(_,h,s?r.call(s):r()):function tf(n,r){return n[r]}(_,h)}function uy(n,r,s,h){return py(on(),Wo(),n,r,s,h)}function dy(n,r,s,h,_){return fy(on(),Wo(),n,r,s,h,_)}function hy(n,r,s,h,_,C){return function my(n,r,s,h,_,C,R,j){const q=r+s;return Rf(n,q,_,C,R)?Rd(n,q+3,j?h.call(j,_,C,R):h(_,C,R)):uf(n,q+3)}(on(),Wo(),n,r,s,h,_,C)}function uf(n,r){const s=n[r];return s===$n?void 0:s}function py(n,r,s,h,_,C){const R=r+s;return pc(n,R,_)?Rd(n,R+1,C?h.call(C,_):h(_)):uf(n,R+1)}function fy(n,r,s,h,_,C,R){const j=r+s;return sp(n,j,_,C)?Rd(n,j+2,R?h.call(R,_,C):h(_,C)):uf(n,j+2)}function yy(n,r){const s=Pi();let h;const _=n+22;s.firstCreatePass?(h=function Wb(n,r){if(r)for(let s=r.length-1;s>=0;s--){const h=r[s];if(n===h.name)return h}}(r,s.pipeRegistry),s.data[_]=h,h.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(_,h.onDestroy)):h=s.data[_];const C=h.factory||(h.factory=Uo(h.type)),R=ce(xs);try{const j=Ca(!1),q=C();return Ca(j),function Gv(n,r,s,h){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=h}(s,on(),_,q),q}finally{ce(R)}}function vy(n,r,s){const h=n+22,_=on(),C=Ro(_,h);return df(_,h)?py(_,Wo(),r,C.transform,s,C):C.transform(s)}function by(n,r,s,h){const _=n+22,C=on(),R=Ro(C,_);return df(C,_)?fy(C,Wo(),r,R.transform,s,h,R):R.transform(s,h)}function df(n,r){return n[1].data[r].pure}function Vm(n){return r=>{setTimeout(n,void 0,r)}}const Fd=class Qb extends o.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,h){let _=r,C=s||(()=>null),R=h;if(r&&"object"==typeof r){const q=r;_=q.next?.bind(q),C=q.error?.bind(q),R=q.complete?.bind(q)}this.__isAsync&&(C=Vm(C),_&&(_=Vm(_)),R&&(R=Vm(R)));const j=super.subscribe({next:_,error:C,complete:R});return r instanceof V.w0&&r.add(j),j}};function Xb(){return this._results[op()]()}class Yf{get changes(){return this._changes||(this._changes=new Fd)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=op(),h=Yf.prototype;h[s]||(h[s]=Xb)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const h=this;h.dirty=!1;const _=function z(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function A(n,r,s){if(n.length!==r.length)return!1;for(let h=0;h<n.length;h++){let _=n[h],C=r[h];if(s&&(_=s(_),C=s(C)),C!==_)return!1}return!0}(h._results,_,s))&&(h._results=_,h.length=_.length,h.last=_[this.length-1],h.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hf=(()=>{class n{}return n.__NG_ELEMENT_ID__=n1,n})();const e1=hf,t1=class extends e1{constructor(r,s,h){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=h}createEmbeddedView(r,s){const h=this._declarationTContainer.tViews,_=Xu(this._declarationLView,h,r,16,null,h.declTNode,null,null,null,null,s||null);_[17]=this._declarationLView[this._declarationTContainer.index];const R=this._declarationLView[19];return null!==R&&(_[19]=R.createEmbeddedView(h)),Od(h,_,r),new Nh(_)}};function n1(){return Wf(Vr(),on())}function Wf(n,r){return 4&n.type?new t1(r,n,Qo(n,r)):null}let Kf=(()=>{class n{}return n.__NG_ELEMENT_ID__=r1,n})();function r1(){return Cy(Vr(),on())}const o1=Kf,xy=class extends o1{constructor(r,s,h){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=h}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new Ha(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ho(this._hostTNode,this._hostLView);if(zs(r)){const s=Ko(r,this._hostLView),h=_i(r);return new Ha(s[1].data[h+8],s)}return new Ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=wy(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,h){let _,C;"number"==typeof h?_=h:null!=h&&(_=h.index,C=h.injector);const R=r.createEmbeddedView(s||{},C);return this.insert(R,_),R}createComponent(r,s,h,_,C){const R=r&&!function x(n){return"function"==typeof n}(r);let j;if(R)j=s;else{const Ke=s||{};j=Ke.index,h=Ke.injector,_=Ke.projectableNodes,C=Ke.environmentInjector||Ke.ngModuleRef}const q=R?r:new ip(ii(r)),ue=h||this.parentInjector;if(!C&&null==q.ngModule){const pt=(R?ue:this.parentInjector).get(dr,null);pt&&(C=pt)}const Ee=q.create(ue,_,void 0,C);return this.insert(Ee.hostView,j),Ee}insert(r,s){const h=r._lView,_=h[1];if(function za(n){return gr(n[3])}(h)){const Ee=this.indexOf(r);if(-1!==Ee)this.detach(Ee);else{const Ke=h[3],pt=new xy(Ke,Ke[6],Ke[3]);pt.detach(pt.indexOf(r))}}const C=this._adjustIndex(s),R=this._lContainer;!function Uh(n,r,s,h){const _=10+h,C=s.length;h>0&&(s[_-1][4]=r),h<C-10?(r[4]=s[_],K(s,10+h,r)):(s.push(r),r[4]=null),r[3]=s;const R=r[17];null!==R&&s!==R&&function ph(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(R,r);const j=r[19];null!==j&&j.insertView(n),r[2]|=64}(_,h,R,C);const j=$u(C,R),q=h[11],ue=Qc(q,R[7]);return null!==ue&&function Ec(n,r,s,h,_,C){h[0]=_,h[6]=r,Mc(n,h,s,1,_,C)}(_,R[6],q,h,ue,j),r.attachToViewContainerRef(),K(Um(R),C,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=wy(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),h=jh(this._lContainer,s);h&&(ye(Um(this._lContainer),s),du(h[1],h))}detach(r){const s=this._adjustIndex(r,-1),h=jh(this._lContainer,s);return h&&null!=ye(Um(this._lContainer),s)?new Nh(h):null}_adjustIndex(r,s=0){return r??this.length+s}};function wy(n){return n[8]}function Um(n){return n[8]||(n[8]=[])}function Cy(n,r){let s;const h=r[n.index];if(gr(h))s=h;else{let _;if(8&n.type)_=Hr(h);else{const C=r[11];_=C.createComment("");const R=ts(n,r);pu(C,Qc(C,R),_,function Gh(n,r){return n.nextSibling(r)}(C,R),!1)}r[n.index]=s=th(h,r,_,n),Hc(r,s)}return new xy(s,n,r)}class jm{constructor(r){this.queryList=r,this.matches=null}clone(){return new jm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hm{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const h=null!==r.contentQueries?r.contentQueries[0]:s.length,_=[];for(let C=0;C<h;C++){const R=s.getByIndex(C);_.push(this.queries[R.indexInDeclarationView].clone())}return new Hm(_)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Py(r,s).matches&&this.queries[s].setDirty()}}class Dy{constructor(r,s,h=null){this.predicate=r,this.flags=s,this.read=h}}class Gm{constructor(r=[]){this.queries=r}elementStart(r,s){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let h=0;h<this.length;h++){const _=null!==s?s.length:0,C=this.getByIndex(h).embeddedTView(r,_);C&&(C.indexInDeclarationView=h,null!==s?s.push(C):s=[C])}return null!==s?new Gm(s):null}template(r,s){for(let h=0;h<this.queries.length;h++)this.queries[h].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class $m{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new $m(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let h=r.parent;for(;null!==h&&8&h.type&&h.index!==s;)h=h.parent;return s===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const h=this.metadata.predicate;if(Array.isArray(h))for(let _=0;_<h.length;_++){const C=h[_];this.matchTNodeWithReadOption(r,s,s1(s,C)),this.matchTNodeWithReadOption(r,s,kc(s,r,C,!1,!1))}else h===hf?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,kc(s,r,h,!1,!1))}matchTNodeWithReadOption(r,s,h){if(null!==h){const _=this.metadata.read;if(null!==_)if(_===pa||_===Kf||_===hf&&4&s.type)this.addMatch(s.index,-2);else{const C=kc(s,r,_,!1,!1);null!==C&&this.addMatch(s.index,C)}else this.addMatch(s.index,h)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function s1(n,r){const s=n.localNames;if(null!==s)for(let h=0;h<s.length;h+=2)if(s[h]===r)return s[h+1];return null}function l1(n,r,s,h){return-1===s?function a1(n,r){return 11&n.type?Qo(n,r):4&n.type?Wf(n,r):null}(r,n):-2===s?function c1(n,r,s){return s===pa?Qo(r,n):s===hf?Wf(r,n):s===Kf?Cy(r,n):void 0}(n,r,h):Os(n,n[1],s,r)}function Ey(n,r,s,h){const _=r[19].queries[h];if(null===_.matches){const C=n.data,R=s.matches,j=[];for(let q=0;q<R.length;q+=2){const ue=R[q];j.push(ue<0?null:l1(r,C[ue],R[q+1],s.metadata.read))}_.matches=j}return _.matches}function Zm(n,r,s,h){const _=n.queries.getByIndex(s),C=_.matches;if(null!==C){const R=Ey(n,r,_,s);for(let j=0;j<C.length;j+=2){const q=C[j];if(q>0)h.push(R[j/2]);else{const ue=C[j+1],Ee=r[-q];for(let Ke=10;Ke<Ee.length;Ke++){const pt=Ee[Ke];pt[17]===pt[3]&&Zm(pt[1],pt,ue,h)}if(null!==Ee[9]){const Ke=Ee[9];for(let pt=0;pt<Ke.length;pt++){const Ct=Ke[pt];Zm(Ct[1],Ct,ue,h)}}}}}return h}function Ty(n){const r=on(),s=Pi(),h=aa();Cr(h+1);const _=Py(s,h);if(n.dirty&&function ya(n){return 4==(4&n[2])}(r)===(2==(2&_.metadata.flags))){if(null===_.matches)n.reset([]);else{const C=_.crossesNgTemplate?Zm(s,r,h,[]):Ey(s,r,_,h);n.reset(C,Eu),n.notifyOnChanges()}return!0}return!1}function My(n,r,s){const h=Pi();h.firstCreatePass&&(Oy(h,new Dy(n,r,s),-1),2==(2&r)&&(h.staticViewQueries=!0)),Ay(h,on(),r)}function Sy(n,r,s,h){const _=Pi();if(_.firstCreatePass){const C=Vr();Oy(_,new Dy(r,s,h),C.index),function d1(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(_,n),2==(2&s)&&(_.staticContentQueries=!0)}Ay(_,on(),s)}function Iy(){return function u1(n,r){return n[19].queries[r].queryList}(on(),aa())}function Ay(n,r,s){const h=new Yf(4==(4&s));gf(n,r,h,h.destroy),null===r[19]&&(r[19]=new Hm),r[19].queries.push(new jm(h))}function Oy(n,r,s){null===n.queries&&(n.queries=new Gm),n.queries.track(new $m(r,s))}function Py(n,r){return n.queries.getByIndex(r)}function ky(n,r){return Wf(n,r)}function qf(...n){}const Qy=new vr("Application Initializer");let Qf=(()=>{class n{constructor(s){this.appInits=s,this.resolve=qf,this.reject=qf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,_)=>{this.resolve=h,this.reject=_})}runInitializers(){if(this.initialized)return;const s=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const C=this.appInits[_]();if(_m(C))s.push(C);else if(Ig(C)){const R=new Promise((j,q)=>{C.subscribe({complete:j,error:q})});s.push(R)}}Promise.all(s).then(()=>{h()}).catch(_=>{this.reject(_)}),0===s.length&&h(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(X(Qy,8))},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xy=new vr("AppId",{providedIn:"root",factory:function ev(){return`${qm()}${qm()}${qm()}`}});function qm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tv=new vr("Platform Initializer"),O1=new vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nv=new vr("appBootstrapListener"),P1=new vr("AnimationModuleType");let k1=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Xf=new vr("LocaleId",{providedIn:"root",factory:()=>_e(Xf,In.Optional|In.SkipSelf)||function R1(){return typeof $localize<"u"&&$localize.locale||Vp}()}),N1=new vr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class F1{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let L1=(()=>{class n{compileModuleSync(s){return new Lm(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const h=this.compileModuleSync(s),C=Ze(zo(s).declarations).reduce((R,j)=>{const q=ii(j);return q&&R.push(new ip(q)),R},[]);return new F1(h,C)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V1=(()=>Promise.resolve(0))();function Qm(n){typeof Zone>"u"?V1.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ru{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fd(!1),this.onMicrotaskEmpty=new Fd(!1),this.onStable=new Fd(!1),this.onError=new Fd(!1),typeof Zone>"u")throw new Fe(908,!1);Zone.assertZonePatched();const _=this;_._nesting=0,_._outer=_._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!h&&s,_.shouldCoalesceRunChangeDetection=h,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function U1(){let n=Jt.requestAnimationFrame,r=Jt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const h=r[Zone.__symbol__("OriginalDelegate")];h&&(r=h)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function G1(n){const r=()=>{!function H1(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,eg(n),n.isCheckStableRunning=!0,Xm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),eg(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,h,_,C,R,j)=>{try{return ov(n),s.invokeTask(_,C,R,j)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||n.shouldCoalesceRunChangeDetection)&&r(),sv(n)}},onInvoke:(s,h,_,C,R,j,q)=>{try{return ov(n),s.invoke(_,C,R,j,q)}finally{n.shouldCoalesceRunChangeDetection&&r(),sv(n)}},onHasTask:(s,h,_,C)=>{s.hasTask(_,C),h===_&&("microTask"==C.change?(n._hasPendingMicrotasks=C.microTask,eg(n),Xm(n)):"macroTask"==C.change&&(n.hasPendingMacrotasks=C.macroTask))},onHandleError:(s,h,_,C)=>(s.handleError(_,C),n.runOutsideAngular(()=>n.onError.emit(C)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ru.isInAngularZone())throw new Fe(909,!1)}static assertNotInAngularZone(){if(Ru.isInAngularZone())throw new Fe(909,!1)}run(r,s,h){return this._inner.run(r,s,h)}runTask(r,s,h,_){const C=this._inner,R=C.scheduleEventTask("NgZoneEvent: "+_,r,j1,qf,qf);try{return C.runTask(R,s,h)}finally{C.cancelTask(R)}}runGuarded(r,s,h){return this._inner.runGuarded(r,s,h)}runOutsideAngular(r){return this._outer.run(r)}}const j1={};function Xm(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ov(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sv(n){n._nesting--,Xm(n)}class $1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fd,this.onMicrotaskEmpty=new Fd,this.onStable=new Fd,this.onError=new Fd}run(r,s,h){return r.apply(s,h)}runGuarded(r,s,h){return r.apply(s,h)}runOutsideAngular(r){return r()}runTask(r,s,h,_){return r.apply(s,h)}}const av=new vr(""),lv=new vr("");let tg,Z1=(()=>{class n{constructor(s,h,_){this._ngZone=s,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tg||(function Y1(n){tg=n}(_),_.addToWindow(h)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ru.assertNotInAngularZone(),Qm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qm(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(s)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,h,_){let C=-1;h&&h>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(R=>R.timeoutId!==C),s(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:s,timeoutId:C,updateCb:_})}whenStable(s,h,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,h,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,h,_){return[]}}return n.\u0275fac=function(s){return new(s||n)(X(Ru),X(cv),X(lv))},n.\u0275prov=Cn({token:n,factory:n.\u0275fac}),n})(),cv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,h){this._applications.set(s,h)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,h=!0){return tg?.findTestabilityInTree(this,s,h)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Lh=null;const uv=new vr("AllowMultipleToken"),ng=new vr("PlatformDestroyListeners");class J1{constructor(r,s){this.name=r,this.token=s}}function hv(n,r,s=[]){const h=`Platform: ${r}`,_=new vr(h);return(C=[])=>{let R=ig();if(!R||R.injector.get(uv,!1)){const j=[...s,...C,{provide:_,useValue:!0}];n?n(j):function q1(n){if(Lh&&!Lh.get(uv,!1))throw new Fe(400,!1);Lh=n;const r=n.get(fv);(function dv(n){const r=n.get(tv,null);r&&r.forEach(s=>s())})(n)}(function pv(n=[],r){return Bo.create({name:r,providers:[{provide:Xr,useValue:"platform"},{provide:ng,useValue:new Set([()=>Lh=null])},...n]})}(j,h))}return function X1(n){const r=ig();if(!r)throw new Fe(401,!1);return r}()}}function ig(){return Lh?.get(fv)??null}let fv=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,h){const _=function gv(n,r){let s;return s="noop"===n?new $1:("zone.js"===n?void 0:n)||new Ru(r),s}(h?.ngZone,function mv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(h)),C=[{provide:Ru,useValue:_}];return _.run(()=>{const R=Bo.create({providers:C,parent:this.injector,name:s.moduleType.name}),j=s.create(R),q=j.injector.get(I,null);if(!q)throw new Fe(402,!1);return _.runOutsideAngular(()=>{const ue=_.onError.subscribe({next:Ee=>{q.handleError(Ee)}});j.onDestroy(()=>{tm(this._modules,j),ue.unsubscribe()})}),function _v(n,r,s){try{const h=s();return _m(h)?h.catch(_=>{throw r.runOutsideAngular(()=>n.handleError(_)),_}):h}catch(h){throw r.runOutsideAngular(()=>n.handleError(h)),h}}(q,_,()=>{const ue=j.injector.get(Qf);return ue.runInitializers(),ue.donePromise.then(()=>(M_(j.injector.get(Xf,Vp)||Vp),this._moduleDoBootstrap(j),j))})})}bootstrapModule(s,h=[]){const _=yv({},h);return function W1(n,r,s){const h=new Lm(s);return Promise.resolve(h)}(0,0,s).then(C=>this.bootstrapModuleFactory(C,_))}_moduleDoBootstrap(s){const h=s.injector.get(em);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(_=>h.bootstrap(_));else{if(!s.instance.ngDoBootstrap)throw new Fe(-403,!1);s.instance.ngDoBootstrap(h)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const s=this._injector.get(ng,null);s&&(s.forEach(h=>h()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(X(Bo))},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function yv(n,r){return Array.isArray(r)?r.reduce(yv,n):{...n,...r}}let em=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,h,_){this._zone=s,this._injector=h,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new t.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),R=new t.y(j=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{Ru.assertNotInAngularZone(),Qm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const ue=this._zone.onUnstable.subscribe(()=>{Ru.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{q.unsubscribe(),ue.unsubscribe()}});this.isStable=(0,ie.T)(C,R.pipe(function we(n={}){const{connector:r=(()=>new o.x),resetOnError:s=!0,resetOnComplete:h=!0,resetOnRefCountZero:_=!0}=n;return C=>{let R,j,q,ue=0,Ee=!1,Ke=!1;const pt=()=>{j?.unsubscribe(),j=void 0},Ct=()=>{pt(),R=q=void 0,Ee=Ke=!1},tn=()=>{const vn=R;Ct(),vn?.unsubscribe()};return(0,U.e)((vn,Fn)=>{ue++,!Ke&&!Ee&&pt();const qn=q=q??r();Fn.add(()=>{ue--,0===ue&&!Ke&&!Ee&&(j=de(tn,_))}),qn.subscribe(Fn),!R&&ue>0&&(R=new le.Hp({next:wi=>qn.next(wi),error:wi=>{Ke=!0,pt(),j=de(Ct,s,wi),qn.error(wi)},complete:()=>{Ee=!0,pt(),j=de(Ct,h),qn.complete()}}),(0,te.Xf)(vn).subscribe(R))})(C)}}()))}bootstrap(s,h){const _=s instanceof so;if(!this._injector.get(Qf).done)throw!_&&Mr(s),new Fe(405,false);let R;R=_?s:this._injector.get(Rs).resolveComponentFactory(s),this.componentTypes.push(R.componentType);const j=function K1(n){return n.isBoundToModule}(R)?void 0:this._injector.get(Up),ue=R.create(Bo.NULL,[],h||R.selector,j),Ee=ue.location.nativeElement,Ke=ue.injector.get(av,null);return Ke?.registerApplication(Ee),ue.onDestroy(()=>{this.detachView(ue.hostView),tm(this.components,ue),Ke?.unregisterApplication(Ee)}),this._loadComponent(ue),ue}tick(){if(this._runningTick)throw new Fe(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const h=s;this._views.push(h),h.attachToAppRef(this)}detachView(s){const h=s;tm(this._views,h),h.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const h=this._injector.get(nv,[]);h.push(...this._bootstrapListeners),h.forEach(_=>_(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>tm(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Fe(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(X(Ru),X(dr),X(I))},n.\u0275prov=Cn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tm(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let tx=(()=>{class n{}return n.__NG_ELEMENT_ID__=nx,n})();function nx(n){return function ix(n,r,s){if(yo(n)&&!s){const h=us(n.index,r);return new Nh(h,h)}return 47&n.type?new Nh(r[16],r):null}(Vr(),on(),16==(16&n))}class Cv{constructor(){}supports(r){return kf(r)}create(r){return new cx(r)}}const lx=(n,r)=>r;class cx{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||lx}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,h=this._removalsHead,_=0,C=null;for(;s||h;){const R=!h||s&&s.currentIndex<Ev(h,_,C)?s:h,j=Ev(R,_,C),q=R.currentIndex;if(R===h)_--,h=h._nextRemoved;else if(s=s._next,null==R.previousIndex)_++;else{C||(C=[]);const ue=j-_,Ee=q-_;if(ue!=Ee){for(let pt=0;pt<ue;pt++){const Ct=pt<C.length?C[pt]:C[pt]=0,tn=Ct+pt;Ee<=tn&&tn<ue&&(C[pt]=Ct+1)}C[R.previousIndex]=Ee-ue}}j!==q&&r(R,j,q)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!kf(r))throw new Fe(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let _,C,R,s=this._itHead,h=!1;if(Array.isArray(r)){this.length=r.length;for(let j=0;j<this.length;j++)C=r[j],R=this._trackByFn(j,C),null!==s&&Object.is(s.trackById,R)?(h&&(s=this._verifyReinsertion(s,C,R,j)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,R,j),h=!0),s=s._next}else _=0,function Vv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[op()]();let h;for(;!(h=s.next()).done;)r(h.value)}}(r,j=>{R=this._trackByFn(_,j),null!==s&&Object.is(s.trackById,R)?(h&&(s=this._verifyReinsertion(s,j,R,_)),Object.is(s.item,j)||this._addIdentityChange(s,j)):(s=this._mismatch(s,j,R,_),h=!0),s=s._next,_++}),this.length=_;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,h,_){let C;return null===r?C=this._itTail:(C=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,C,_)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(h,_))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,C,_)):r=this._addAfter(new ux(s,h),C,_),r}_verifyReinsertion(r,s,h,_){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==C?r=this._reinsertAfter(C,r._prev,_):r.currentIndex!=_&&(r.currentIndex=_,this._addToMoves(r,_)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const _=r._prevRemoved,C=r._nextRemoved;return null===_?this._removalsHead=C:_._nextRemoved=C,null===C?this._removalsTail=_:C._prevRemoved=_,this._insertAfter(r,s,h),this._addToMoves(r,h),r}_moveAfter(r,s,h){return this._unlink(r),this._insertAfter(r,s,h),this._addToMoves(r,h),r}_addAfter(r,s,h){return this._insertAfter(r,s,h),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,h){const _=null===s?this._itHead:s._next;return r._next=_,r._prev=s,null===_?this._itTail=r:_._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Dv),this._linkedRecords.put(r),r.currentIndex=h,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,h=r._next;return null===s?this._itHead=h:s._next=h,null===h?this._itTail=s:h._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Dv),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ux{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dx{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===s||s<=h.currentIndex)&&Object.is(h.trackById,r))return h;return null}remove(r){const s=r._prevDup,h=r._nextDup;return null===s?this._head=h:s._nextDup=h,null===h?this._tail=s:h._prevDup=s,null===this._head}}class Dv{constructor(){this.map=new Map}put(r){const s=r.trackById;let h=this.map.get(s);h||(h=new dx,this.map.set(s,h)),h.add(r)}get(r,s){const _=this.map.get(r);return _?_.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ev(n,r,s){const h=n.previousIndex;if(null===h)return h;let _=0;return s&&h<s.length&&(_=s[h]),h+r+_}class Tv{constructor(){}supports(r){return r instanceof Map||dm(r)}create(){return new hx}}class hx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||dm(r)))throw new Fe(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(h,_)=>{if(s&&s.key===_)this._maybeAddToChanges(s,h),this._appendAfter=s,s=s._next;else{const C=this._getOrCreateRecordForKey(_,h);s=this._insertBeforeOrAppend(s,C)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let h=s;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const h=r._prev;return s._next=r,s._prev=h,r._prev=s,h&&(h._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const _=this._records.get(r);this._maybeAddToChanges(_,s);const C=_._prev,R=_._next;return C&&(C._next=R),R&&(R._prev=C),_._next=null,_._prev=null,_}const h=new px(r);return this._records.set(r,h),h.currentValue=s,this._addToAdditions(h),h}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(h=>s(r[h],h))}}class px{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mv(){return new lg([new Cv])}let lg=(()=>{class n{constructor(s){this.factories=s}static create(s,h){if(null!=h){const _=h.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:h=>n.create(s,h||Mv()),deps:[[n,new Co,new Wn]]}}find(s){const h=this.factories.find(_=>_.supports(s));if(null!=h)return h;throw new Fe(901,!1)}}return n.\u0275prov=Cn({token:n,providedIn:"root",factory:Mv}),n})();function Sv(){return new cg([new Tv])}let cg=(()=>{class n{constructor(s){this.factories=s}static create(s,h){if(h){const _=h.factories.slice();s=s.concat(_)}return new n(s)}static extend(s){return{provide:n,useFactory:h=>n.create(s,h||Sv()),deps:[[n,new Co,new Wn]]}}find(s){const h=this.factories.find(_=>_.supports(s));if(h)return h;throw new Fe(901,!1)}}return n.\u0275prov=Cn({token:n,providedIn:"root",factory:Sv}),n})();const gx=hv(null,"core",[]);let _x=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(X(em))},n.\u0275mod=Ii({type:n}),n.\u0275inj=Hn({}),n})();function yx(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function bx(n,r){const s=ii(n),h=r.elementInjector||Ar();return new ip(s).create(h,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(At,Le,k)=>{"use strict";k.d(Le,{Cf:()=>lt,EJ:()=>es,F:()=>Yn,Fd:()=>sa,Fj:()=>ke,JJ:()=>Ht,JL:()=>ui,JU:()=>we,Kr:()=>Na,NI:()=>xr,On:()=>ra,Q7:()=>Ts,UX:()=>ds,YN:()=>xl,_:()=>Xo,_Y:()=>Ra,a5:()=>Zt,nD:()=>jo,qQ:()=>$s,qu:()=>Ro,sg:()=>gr,u:()=>Gs,u5:()=>za,wO:()=>Qi,wV:()=>ga});var o=k(1571),V=k(6895),t=k(2076),ie=k(4128),te=k(4004);let le=(()=>{class re{constructor(Y,Te){this._renderer=Y,this._elementRef=Te,this.onChange=kt=>{},this.onTouched=()=>{}}setProperty(Y,Te){this._renderer.setProperty(this._elementRef.nativeElement,Y,Te)}registerOnTouched(Y){this.onTouched=Y}registerOnChange(Y){this.onChange=Y}setDisabledState(Y){this.setProperty("disabled",Y)}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(o.Qsj),o.Y36(o.SBq))},re.\u0275dir=o.lG2({type:re}),re})(),U=(()=>{class re extends le{}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,features:[o.qOj]}),re})();const we=new o.OlP("NgValueAccessor"),Se={provide:we,useExisting:(0,o.Gpc)(()=>ke),multi:!0},je=new o.OlP("CompositionEventMode");let ke=(()=>{class re extends le{constructor(Y,Te,kt){super(Y,Te),this._compositionMode=kt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ye(){const re=(0,V.q)()?(0,V.q)().getUserAgent():"";return/android (\d+)/.test(re.toLowerCase())}())}writeValue(Y){this.setProperty("value",Y??"")}_handleInput(Y){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Y)}_compositionStart(){this._composing=!0}_compositionEnd(Y){this._composing=!1,this._compositionMode&&this.onChange(Y)}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(je,8))},re.\u0275dir=o.lG2({type:re,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("input",function(Bn){return Te._handleInput(Bn.target.value)})("blur",function(){return Te.onTouched()})("compositionstart",function(){return Te._compositionStart()})("compositionend",function(Bn){return Te._compositionEnd(Bn.target.value)})},features:[o._Bn([Se]),o.qOj]}),re})();function ze(re){return null==re||("string"==typeof re||Array.isArray(re))&&0===re.length}function Qe(re){return null!=re&&"number"==typeof re.length}const lt=new o.OlP("NgValidators"),tt=new o.OlP("NgAsyncValidators");function it(re){return ze(re.value)?{required:!0}:null}function jn(re){return null}function yn(re){return null!=re}function Yr(re){return(0,o.QGY)(re)?(0,t.D)(re):re}function Zn(re){let ne={};return re.forEach(Y=>{ne=null!=Y?{...ne,...Y}:ne}),0===Object.keys(ne).length?null:ne}function sr(re,ne){return ne.map(Y=>Y(re))}function bt(re){return re.map(ne=>function Ji(re){return!re.validate}(ne)?ne:Y=>ne.validate(Y))}function Pt(re){return null!=re?function at(re){if(!re)return null;const ne=re.filter(yn);return 0==ne.length?null:function(Y){return Zn(sr(Y,ne))}}(bt(re)):null}function qt(re){return null!=re?function Vt(re){if(!re)return null;const ne=re.filter(yn);return 0==ne.length?null:function(Y){const Te=sr(Y,ne).map(Yr);return(0,ie.D)(Te).pipe((0,te.U)(Zn))}}(bt(re)):null}function _t(re,ne){return null===re?[ne]:Array.isArray(re)?[...re,ne]:[re,ne]}function Ot(re){return re._rawValidators}function un(re){return re._rawAsyncValidators}function Qn(re){return re?Array.isArray(re)?re:[re]:[]}function En(re,ne){return Array.isArray(re)?re.includes(ne):re===ne}function gn(re,ne){const Y=Qn(ne);return Qn(re).forEach(kt=>{En(Y,kt)||Y.push(kt)}),Y}function Cn(re,ne){return Qn(ne).filter(Y=>!En(re,Y))}class Kn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ne){this._rawValidators=ne||[],this._composedValidatorFn=Pt(this._rawValidators)}_setAsyncValidators(ne){this._rawAsyncValidators=ne||[],this._composedAsyncValidatorFn=qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ne){this._onDestroyCallbacks.push(ne)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ne=>ne()),this._onDestroyCallbacks=[]}reset(ne){this.control&&this.control.reset(ne)}hasError(ne,Y){return!!this.control&&this.control.hasError(ne,Y)}getError(ne,Y){return this.control?this.control.getError(ne,Y):null}}class Hn extends Kn{get formDirective(){return null}get path(){return null}}class Zt extends Kn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nn{constructor(ne){this._cd=ne}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ht=(()=>{class re extends nn{constructor(Y){super(Y)}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(Zt,2))},re.\u0275dir=o.lG2({type:re,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Y,Te){2&Y&&o.ekj("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)},features:[o.qOj]}),re})(),ui=(()=>{class re extends nn{constructor(Y){super(Y)}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(Hn,10))},re.\u0275dir=o.lG2({type:re,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Y,Te){2&Y&&o.ekj("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)("ng-submitted",Te.isSubmitted)},features:[o.qOj]}),re})();const Br="VALID",Pr="INVALID",eo="PENDING",to="DISABLED";function Dt(re){return(_e(re)?re.validators:re)||null}function X(re,ne){return(_e(ne)?ne.asyncValidators:re)||null}function _e(re){return null!=re&&!Array.isArray(re)&&"object"==typeof re}function Re(re,ne,Y){const Te=re.controls;if(!(ne?Object.keys(Te):Te).length)throw new o.vHH(1e3,"");if(!Te[Y])throw new o.vHH(1001,"")}function Je(re,ne,Y){re._forEachChild((Te,kt)=>{if(void 0===Y[kt])throw new o.vHH(1002,"")})}class Xe{constructor(ne,Y){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(ne),this._assignAsyncValidators(Y)}get validator(){return this._composedValidatorFn}set validator(ne){this._rawValidators=this._composedValidatorFn=ne}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ne){this._rawAsyncValidators=this._composedAsyncValidatorFn=ne}get parent(){return this._parent}get valid(){return this.status===Br}get invalid(){return this.status===Pr}get pending(){return this.status==eo}get disabled(){return this.status===to}get enabled(){return this.status!==to}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ne){this._assignValidators(ne)}setAsyncValidators(ne){this._assignAsyncValidators(ne)}addValidators(ne){this.setValidators(gn(ne,this._rawValidators))}addAsyncValidators(ne){this.setAsyncValidators(gn(ne,this._rawAsyncValidators))}removeValidators(ne){this.setValidators(Cn(ne,this._rawValidators))}removeAsyncValidators(ne){this.setAsyncValidators(Cn(ne,this._rawAsyncValidators))}hasValidator(ne){return En(this._rawValidators,ne)}hasAsyncValidator(ne){return En(this._rawAsyncValidators,ne)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ne={}){this.touched=!0,this._parent&&!ne.onlySelf&&this._parent.markAsTouched(ne)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ne=>ne.markAllAsTouched())}markAsUntouched(ne={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(Y=>{Y.markAsUntouched({onlySelf:!0})}),this._parent&&!ne.onlySelf&&this._parent._updateTouched(ne)}markAsDirty(ne={}){this.pristine=!1,this._parent&&!ne.onlySelf&&this._parent.markAsDirty(ne)}markAsPristine(ne={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(Y=>{Y.markAsPristine({onlySelf:!0})}),this._parent&&!ne.onlySelf&&this._parent._updatePristine(ne)}markAsPending(ne={}){this.status=eo,!1!==ne.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ne.onlySelf&&this._parent.markAsPending(ne)}disable(ne={}){const Y=this._parentMarkedDirty(ne.onlySelf);this.status=to,this.errors=null,this._forEachChild(Te=>{Te.disable({...ne,onlySelf:!0})}),this._updateValue(),!1!==ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ne,skipPristineCheck:Y}),this._onDisabledChange.forEach(Te=>Te(!0))}enable(ne={}){const Y=this._parentMarkedDirty(ne.onlySelf);this.status=Br,this._forEachChild(Te=>{Te.enable({...ne,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ne.emitEvent}),this._updateAncestors({...ne,skipPristineCheck:Y}),this._onDisabledChange.forEach(Te=>Te(!1))}_updateAncestors(ne){this._parent&&!ne.onlySelf&&(this._parent.updateValueAndValidity(ne),ne.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ne){this._parent=ne}getRawValue(){return this.value}updateValueAndValidity(ne={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Br||this.status===eo)&&this._runAsyncValidator(ne.emitEvent)),!1!==ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ne.onlySelf&&this._parent.updateValueAndValidity(ne)}_updateTreeValidity(ne={emitEvent:!0}){this._forEachChild(Y=>Y._updateTreeValidity(ne)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ne.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?to:Br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ne){if(this.asyncValidator){this.status=eo,this._hasOwnPendingAsyncValidator=!0;const Y=Yr(this.asyncValidator(this));this._asyncValidationSubscription=Y.subscribe(Te=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Te,{emitEvent:ne})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ne,Y={}){this.errors=ne,this._updateControlsErrors(!1!==Y.emitEvent)}get(ne){let Y=ne;return null==Y||(Array.isArray(Y)||(Y=Y.split(".")),0===Y.length)?null:Y.reduce((Te,kt)=>Te&&Te._find(kt),this)}getError(ne,Y){const Te=Y?this.get(Y):this;return Te&&Te.errors?Te.errors[ne]:null}hasError(ne,Y){return!!this.getError(ne,Y)}get root(){let ne=this;for(;ne._parent;)ne=ne._parent;return ne}_updateControlsErrors(ne){this.status=this._calculateStatus(),ne&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ne)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?to:this.errors?Pr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eo)?eo:this._anyControlsHaveStatus(Pr)?Pr:Br}_anyControlsHaveStatus(ne){return this._anyControls(Y=>Y.status===ne)}_anyControlsDirty(){return this._anyControls(ne=>ne.dirty)}_anyControlsTouched(){return this._anyControls(ne=>ne.touched)}_updatePristine(ne={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ne.onlySelf&&this._parent._updatePristine(ne)}_updateTouched(ne={}){this.touched=this._anyControlsTouched(),this._parent&&!ne.onlySelf&&this._parent._updateTouched(ne)}_registerOnCollectionChange(ne){this._onCollectionChange=ne}_setUpdateStrategy(ne){_e(ne)&&null!=ne.updateOn&&(this._updateOn=ne.updateOn)}_parentMarkedDirty(ne){return!ne&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ne){return null}_assignValidators(ne){this._rawValidators=Array.isArray(ne)?ne.slice():ne,this._composedValidatorFn=function H(re){return Array.isArray(re)?Pt(re):re||null}(this._rawValidators)}_assignAsyncValidators(ne){this._rawAsyncValidators=Array.isArray(ne)?ne.slice():ne,this._composedAsyncValidatorFn=function fe(re){return Array.isArray(re)?qt(re):re||null}(this._rawAsyncValidators)}}class xe extends Xe{constructor(ne,Y,Te){super(Dt(Y),X(Te,Y)),this.controls=ne,this._initObservables(),this._setUpdateStrategy(Y),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ne,Y){return this.controls[ne]?this.controls[ne]:(this.controls[ne]=Y,Y.setParent(this),Y._registerOnCollectionChange(this._onCollectionChange),Y)}addControl(ne,Y,Te={}){this.registerControl(ne,Y),this.updateValueAndValidity({emitEvent:Te.emitEvent}),this._onCollectionChange()}removeControl(ne,Y={}){this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),delete this.controls[ne],this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}setControl(ne,Y,Te={}){this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),delete this.controls[ne],Y&&this.registerControl(ne,Y),this.updateValueAndValidity({emitEvent:Te.emitEvent}),this._onCollectionChange()}contains(ne){return this.controls.hasOwnProperty(ne)&&this.controls[ne].enabled}setValue(ne,Y={}){Je(this,0,ne),Object.keys(ne).forEach(Te=>{Re(this,!0,Te),this.controls[Te].setValue(ne[Te],{onlySelf:!0,emitEvent:Y.emitEvent})}),this.updateValueAndValidity(Y)}patchValue(ne,Y={}){null!=ne&&(Object.keys(ne).forEach(Te=>{const kt=this.controls[Te];kt&&kt.patchValue(ne[Te],{onlySelf:!0,emitEvent:Y.emitEvent})}),this.updateValueAndValidity(Y))}reset(ne={},Y={}){this._forEachChild((Te,kt)=>{Te.reset(ne[kt],{onlySelf:!0,emitEvent:Y.emitEvent})}),this._updatePristine(Y),this._updateTouched(Y),this.updateValueAndValidity(Y)}getRawValue(){return this._reduceChildren({},(ne,Y,Te)=>(ne[Te]=Y.getRawValue(),ne))}_syncPendingControls(){let ne=this._reduceChildren(!1,(Y,Te)=>!!Te._syncPendingControls()||Y);return ne&&this.updateValueAndValidity({onlySelf:!0}),ne}_forEachChild(ne){Object.keys(this.controls).forEach(Y=>{const Te=this.controls[Y];Te&&ne(Te,Y)})}_setUpControls(){this._forEachChild(ne=>{ne.setParent(this),ne._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ne){for(const[Y,Te]of Object.entries(this.controls))if(this.contains(Y)&&ne(Te))return!0;return!1}_reduceValue(){return this._reduceChildren({},(Y,Te,kt)=>((Te.enabled||this.disabled)&&(Y[kt]=Te.value),Y))}_reduceChildren(ne,Y){let Te=ne;return this._forEachChild((kt,Bn)=>{Te=Y(Te,kt,Bn)}),Te}_allControlsDisabled(){for(const ne of Object.keys(this.controls))if(this.controls[ne].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ne){return this.controls.hasOwnProperty(ne)?this.controls[ne]:null}}class Lt extends xe{}const Ie=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ae}),Ae="always";function Me(re,ne){return[...ne.path,re]}function qe(re,ne,Y=Ae){en(re,ne),ne.valueAccessor.writeValue(re.value),(re.disabled||"always"===Y)&&ne.valueAccessor.setDisabledState?.(re.disabled),function sn(re,ne){ne.valueAccessor.registerOnChange(Y=>{re._pendingValue=Y,re._pendingChange=!0,re._pendingDirty=!0,"change"===re.updateOn&&Si(re,ne)})}(re,ne),function oi(re,ne){const Y=(Te,kt)=>{ne.valueAccessor.writeValue(Te),kt&&ne.viewToModelUpdate(Te)};re.registerOnChange(Y),ne._registerOnDestroy(()=>{re._unregisterOnChange(Y)})}(re,ne),function ei(re,ne){ne.valueAccessor.registerOnTouched(()=>{re._pendingTouched=!0,"blur"===re.updateOn&&re._pendingChange&&Si(re,ne),"submit"!==re.updateOn&&re.markAsTouched()})}(re,ne),function jt(re,ne){if(ne.valueAccessor.setDisabledState){const Y=Te=>{ne.valueAccessor.setDisabledState(Te)};re.registerOnDisabledChange(Y),ne._registerOnDestroy(()=>{re._unregisterOnDisabledChange(Y)})}}(re,ne)}function He(re,ne,Y=!0){const Te=()=>{};ne.valueAccessor&&(ne.valueAccessor.registerOnChange(Te),ne.valueAccessor.registerOnTouched(Te)),An(re,ne),re&&(ne._invokeOnDestroyCallbacks(),re._registerOnCollectionChange(()=>{}))}function Rt(re,ne){re.forEach(Y=>{Y.registerOnValidatorChange&&Y.registerOnValidatorChange(ne)})}function en(re,ne){const Y=Ot(re);null!==ne.validator?re.setValidators(_t(Y,ne.validator)):"function"==typeof Y&&re.setValidators([Y]);const Te=un(re);null!==ne.asyncValidator?re.setAsyncValidators(_t(Te,ne.asyncValidator)):"function"==typeof Te&&re.setAsyncValidators([Te]);const kt=()=>re.updateValueAndValidity();Rt(ne._rawValidators,kt),Rt(ne._rawAsyncValidators,kt)}function An(re,ne){let Y=!1;if(null!==re){if(null!==ne.validator){const kt=Ot(re);if(Array.isArray(kt)&&kt.length>0){const Bn=kt.filter(Qr=>Qr!==ne.validator);Bn.length!==kt.length&&(Y=!0,re.setValidators(Bn))}}if(null!==ne.asyncValidator){const kt=un(re);if(Array.isArray(kt)&&kt.length>0){const Bn=kt.filter(Qr=>Qr!==ne.asyncValidator);Bn.length!==kt.length&&(Y=!0,re.setAsyncValidators(Bn))}}}const Te=()=>{};return Rt(ne._rawValidators,Te),Rt(ne._rawAsyncValidators,Te),Y}function Si(re,ne){re._pendingDirty&&re.markAsDirty(),re.setValue(re._pendingValue,{emitModelToViewChange:!1}),ne.viewToModelUpdate(re._pendingValue),re._pendingChange=!1}function Ti(re,ne){en(re,ne)}function pi(re,ne){if(!re.hasOwnProperty("model"))return!1;const Y=re.model;return!!Y.isFirstChange()||!Object.is(ne,Y.currentValue)}function Tr(re,ne){re._syncPendingControls(),ne.forEach(Y=>{const Te=Y.control;"submit"===Te.updateOn&&Te._pendingChange&&(Y.viewToModelUpdate(Te._pendingValue),Te._pendingChange=!1)})}function Ai(re,ne){if(!ne)return null;let Y,Te,kt;return Array.isArray(ne),ne.forEach(Bn=>{Bn.constructor===ke?Y=Bn:function ii(re){return Object.getPrototypeOf(re.constructor)===U}(Bn)?Te=Bn:kt=Bn}),kt||Te||Y||null}const Vo={provide:Hn,useExisting:(0,o.Gpc)(()=>Yn)},cn=(()=>Promise.resolve())();let Yn=(()=>{class re extends Hn{constructor(Y,Te,kt){super(),this.callSetDisabledState=kt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new xe({},Pt(Y),qt(Te))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(Y){cn.then(()=>{const Te=this._findContainer(Y.path);Y.control=Te.registerControl(Y.name,Y.control),qe(Y.control,Y,this.callSetDisabledState),Y.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(Y)})}getControl(Y){return this.form.get(Y.path)}removeControl(Y){cn.then(()=>{const Te=this._findContainer(Y.path);Te&&Te.removeControl(Y.name),this._directives.delete(Y)})}addFormGroup(Y){cn.then(()=>{const Te=this._findContainer(Y.path),kt=new xe({});Ti(kt,Y),Te.registerControl(Y.name,kt),kt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(Y){cn.then(()=>{const Te=this._findContainer(Y.path);Te&&Te.removeControl(Y.name)})}getFormGroup(Y){return this.form.get(Y.path)}updateModel(Y,Te){cn.then(()=>{this.form.get(Y.path).setValue(Te)})}setValue(Y){this.control.setValue(Y)}onSubmit(Y){return this.submitted=!0,Tr(this.form,this._directives),this.ngSubmit.emit(Y),"dialog"===Y?.target?.method}onReset(){this.resetForm()}resetForm(Y){this.form.reset(Y),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(Y){return Y.pop(),Y.length?this.form.get(Y):this.form}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(lt,10),o.Y36(tt,10),o.Y36(Ie,8))},re.\u0275dir=o.lG2({type:re,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("submit",function(Bn){return Te.onSubmit(Bn)})("reset",function(){return Te.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([Vo]),o.qOj]}),re})();function vi(re,ne){const Y=re.indexOf(ne);Y>-1&&re.splice(Y,1)}function Oi(re){return"object"==typeof re&&null!==re&&2===Object.keys(re).length&&"value"in re&&"disabled"in re}const xr=class extends Xe{constructor(ne=null,Y,Te){super(Dt(Y),X(Te,Y)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ne),this._setUpdateStrategy(Y),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_e(Y)&&(Y.nonNullable||Y.initialValueIsDefault)&&(this.defaultValue=Oi(ne)?ne.value:ne)}setValue(ne,Y={}){this.value=this._pendingValue=ne,this._onChange.length&&!1!==Y.emitModelToViewChange&&this._onChange.forEach(Te=>Te(this.value,!1!==Y.emitViewToModelChange)),this.updateValueAndValidity(Y)}patchValue(ne,Y={}){this.setValue(ne,Y)}reset(ne=this.defaultValue,Y={}){this._applyFormState(ne),this.markAsPristine(Y),this.markAsUntouched(Y),this.setValue(this.value,Y),this._pendingChange=!1}_updateValue(){}_anyControls(ne){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ne){this._onChange.push(ne)}_unregisterOnChange(ne){vi(this._onChange,ne)}registerOnDisabledChange(ne){this._onDisabledChange.push(ne)}_unregisterOnDisabledChange(ne){vi(this._onDisabledChange,ne)}_forEachChild(ne){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ne){Oi(ne)?(this.value=this._pendingValue=ne.value,ne.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ne}},kr={provide:Zt,useExisting:(0,o.Gpc)(()=>ra)},Rr=(()=>Promise.resolve())();let ra=(()=>{class re extends Zt{constructor(Y,Te,kt,Bn,Qr,tr){super(),this._changeDetectorRef=Qr,this.callSetDisabledState=tr,this.control=new xr,this._registered=!1,this.update=new o.vpe,this._parent=Y,this._setValidators(Te),this._setAsyncValidators(kt),this.valueAccessor=Ai(0,Bn)}ngOnChanges(Y){if(this._checkForErrors(),!this._registered||"name"in Y){if(this._registered&&(this._checkName(),this.formDirective)){const Te=Y.name.previousValue;this.formDirective.removeControl({name:Te,path:this._getPath(Te)})}this._setUpControl()}"isDisabled"in Y&&this._updateDisabled(Y),pi(Y,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Y){this.viewModel=Y,this.update.emit(Y)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Y){Rr.then(()=>{this.control.setValue(Y,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(Y){const Te=Y.isDisabled.currentValue,kt=0!==Te&&(0,o.D6c)(Te);Rr.then(()=>{kt&&!this.control.disabled?this.control.disable():!kt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(Y){return this._parent?Me(Y,this._parent):[Y]}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(Hn,9),o.Y36(lt,10),o.Y36(tt,10),o.Y36(we,10),o.Y36(o.sBO,8),o.Y36(Ie,8))},re.\u0275dir=o.lG2({type:re,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([kr]),o.qOj,o.TTD]}),re})(),Ra=(()=>{class re{}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275dir=o.lG2({type:re,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),re})();const zr={provide:we,useExisting:(0,o.Gpc)(()=>ga),multi:!0};let ga=(()=>{class re extends U{writeValue(Y){this.setProperty("value",Y??"")}registerOnChange(Y){this.onChange=Te=>{Y(""==Te?null:parseFloat(Te))}}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("input",function(Bn){return Te.onChange(Bn.target.value)})("blur",function(){return Te.onTouched()})},features:[o._Bn([zr]),o.qOj]}),re})();const Ql={provide:we,useExisting:(0,o.Gpc)(()=>Xo),multi:!0};let So=(()=>{class re{}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275mod=o.oAB({type:re}),re.\u0275inj=o.cJS({}),re})(),vl=(()=>{class re{constructor(){this._accessors=[]}add(Y,Te){this._accessors.push([Y,Te])}remove(Y){for(let Te=this._accessors.length-1;Te>=0;--Te)if(this._accessors[Te][1]===Y)return void this._accessors.splice(Te,1)}select(Y){this._accessors.forEach(Te=>{this._isSameGroup(Te,Y)&&Te[1]!==Y&&Te[1].fireUncheck(Y.value)})}_isSameGroup(Y,Te){return!!Y[0].control&&Y[0]._parent===Te._control._parent&&Y[1].name===Te.name}}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275prov=o.Yz7({token:re,factory:re.\u0275fac,providedIn:So}),re})(),Xo=(()=>{class re extends U{constructor(Y,Te,kt,Bn){super(Y,Te),this._registry=kt,this._injector=Bn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Zt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(Y){this._state=Y===this.value,this.setProperty("checked",this._state)}registerOnChange(Y){this._fn=Y,this.onChange=()=>{Y(this.value),this._registry.select(this)}}fireUncheck(Y){this.writeValue(Y)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(vl),o.Y36(o.zs3))},re.\u0275dir=o.lG2({type:re,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("change",function(){return Te.onChange()})("blur",function(){return Te.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[o._Bn([Ql]),o.qOj]}),re})();const Io=new o.OlP("NgModelWithFormControlWarning"),Fr={provide:Hn,useExisting:(0,o.Gpc)(()=>gr)};let gr=(()=>{class re extends Hn{constructor(Y,Te,kt){super(),this.callSetDisabledState=kt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(Y),this._setAsyncValidators(Te)}ngOnChanges(Y){this._checkFormPresent(),Y.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(An(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(Y){const Te=this.form.get(Y.path);return qe(Te,Y,this.callSetDisabledState),Te.updateValueAndValidity({emitEvent:!1}),this.directives.push(Y),Te}getControl(Y){return this.form.get(Y.path)}removeControl(Y){He(Y.control||null,Y,!1),function Mr(re,ne){const Y=re.indexOf(ne);Y>-1&&re.splice(Y,1)}(this.directives,Y)}addFormGroup(Y){this._setUpFormContainer(Y)}removeFormGroup(Y){this._cleanUpFormContainer(Y)}getFormGroup(Y){return this.form.get(Y.path)}addFormArray(Y){this._setUpFormContainer(Y)}removeFormArray(Y){this._cleanUpFormContainer(Y)}getFormArray(Y){return this.form.get(Y.path)}updateModel(Y,Te){this.form.get(Y.path).setValue(Te)}onSubmit(Y){return this.submitted=!0,Tr(this.form,this.directives),this.ngSubmit.emit(Y),"dialog"===Y?.target?.method}onReset(){this.resetForm()}resetForm(Y){this.form.reset(Y),this.submitted=!1}_updateDomValue(){this.directives.forEach(Y=>{const Te=Y.control,kt=this.form.get(Y.path);Te!==kt&&(He(Te||null,Y),(re=>re instanceof xr)(kt)&&(qe(kt,Y,this.callSetDisabledState),Y.control=kt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(Y){const Te=this.form.get(Y.path);Ti(Te,Y),Te.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(Y){if(this.form){const Te=this.form.get(Y.path);Te&&function mi(re,ne){return An(re,ne)}(Te,Y)&&Te.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){en(this.form,this),this._oldForm&&An(this._oldForm,this)}_checkFormPresent(){}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(lt,10),o.Y36(tt,10),o.Y36(Ie,8))},re.\u0275dir=o.lG2({type:re,selectors:[["","formGroup",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("submit",function(Bn){return Te.onSubmit(Bn)})("reset",function(){return Te.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([Fr]),o.qOj,o.TTD]}),re})();const jr={provide:Zt,useExisting:(0,o.Gpc)(()=>Gs)};let Gs=(()=>{class re extends Zt{set isDisabled(Y){}constructor(Y,Te,kt,Bn,Qr){super(),this._ngModelWarningConfig=Qr,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=Y,this._setValidators(Te),this._setAsyncValidators(kt),this.valueAccessor=Ai(0,Bn)}ngOnChanges(Y){this._added||this._setUpControl(),pi(Y,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(Y){this.viewModel=Y,this.update.emit(Y)}get path(){return Me(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return re._ngModelWarningSentOnce=!1,re.\u0275fac=function(Y){return new(Y||re)(o.Y36(Hn,13),o.Y36(lt,10),o.Y36(tt,10),o.Y36(we,10),o.Y36(Io,8))},re.\u0275dir=o.lG2({type:re,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([jr]),o.qOj,o.TTD]}),re})();const bl={provide:we,useExisting:(0,o.Gpc)(()=>es),multi:!0};function oa(re,ne){return null==re?`${ne}`:(ne&&"object"==typeof ne&&(ne="Object"),`${re}: ${ne}`.slice(0,50))}let es=(()=>{class re extends U{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Y){this._compareWith=Y}writeValue(Y){this.value=Y;const kt=oa(this._getOptionId(Y),Y);this.setProperty("value",kt)}registerOnChange(Y){this.onChange=Te=>{this.value=this._getOptionValue(Te),Y(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(Y){for(const Te of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Te),Y))return Te;return null}_getOptionValue(Y){const Te=function Gc(re){return re.split(":")[0]}(Y);return this._optionMap.has(Te)?this._optionMap.get(Te):Y}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("change",function(Bn){return Te.onChange(Bn.target.value)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([bl]),o.qOj]}),re})(),xl=(()=>{class re{constructor(Y,Te,kt){this._element=Y,this._renderer=Te,this._select=kt,this._select&&(this.id=this._select._registerOption())}set ngValue(Y){null!=this._select&&(this._select._optionMap.set(this.id,Y),this._setElementValue(oa(this.id,Y)),this._select.writeValue(this._select.value))}set value(Y){this._setElementValue(Y),this._select&&this._select.writeValue(this._select.value)}_setElementValue(Y){this._renderer.setProperty(this._element.nativeElement,"value",Y)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(es,9))},re.\u0275dir=o.lG2({type:re,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),re})();const Ja={provide:we,useExisting:(0,o.Gpc)(()=>Fl),multi:!0};function _r(re,ne){return null==re?`${ne}`:("string"==typeof ne&&(ne=`'${ne}'`),ne&&"object"==typeof ne&&(ne="Object"),`${re}: ${ne}`.slice(0,50))}let Fl=(()=>{class re extends U{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Y){this._compareWith=Y}writeValue(Y){let Te;if(this.value=Y,Array.isArray(Y)){const kt=Y.map(Bn=>this._getOptionId(Bn));Te=(Bn,Qr)=>{Bn._setSelected(kt.indexOf(Qr.toString())>-1)}}else Te=(kt,Bn)=>{kt._setSelected(!1)};this._optionMap.forEach(Te)}registerOnChange(Y){this.onChange=Te=>{const kt=[],Bn=Te.selectedOptions;if(void 0!==Bn){const Qr=Bn;for(let tr=0;tr<Qr.length;tr++){const Ss=this._getOptionValue(Qr[tr].value);kt.push(Ss)}}else{const Qr=Te.options;for(let tr=0;tr<Qr.length;tr++){const hs=Qr[tr];if(hs.selected){const Ss=this._getOptionValue(hs.value);kt.push(Ss)}}}this.value=kt,Y(kt)}}_registerOption(Y){const Te=(this._idCounter++).toString();return this._optionMap.set(Te,Y),Te}_getOptionId(Y){for(const Te of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Te)._value,Y))return Te;return null}_getOptionValue(Y){const Te=function ji(re){return re.split(":")[0]}(Y);return this._optionMap.has(Te)?this._optionMap.get(Te)._value:Y}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Y,Te){1&Y&&o.NdJ("change",function(Bn){return Te.onChange(Bn.target)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Ja]),o.qOj]}),re})(),Na=(()=>{class re{constructor(Y,Te,kt){this._element=Y,this._renderer=Te,this._select=kt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(Y){null!=this._select&&(this._value=Y,this._setElementValue(_r(this.id,Y)),this._select.writeValue(this._select.value))}set value(Y){this._select?(this._value=Y,this._setElementValue(_r(this.id,Y)),this._select.writeValue(this._select.value)):this._setElementValue(Y)}_setElementValue(Y){this._renderer.setProperty(this._element.nativeElement,"value",Y)}_setSelected(Y){this._renderer.setProperty(this._element.nativeElement,"selected",Y)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return re.\u0275fac=function(Y){return new(Y||re)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Fl,9))},re.\u0275dir=o.lG2({type:re,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),re})();function qa(re){return"number"==typeof re?re:parseInt(re,10)}function Po(re){return"number"==typeof re?re:parseFloat(re)}let wr=(()=>{class re{constructor(){this._validator=jn}ngOnChanges(Y){if(this.inputName in Y){const Te=this.normalizeInput(Y[this.inputName].currentValue);this._enabled=this.enabled(Te),this._validator=this._enabled?this.createValidator(Te):jn,this._onChange&&this._onChange()}}validate(Y){return this._validator(Y)}registerOnValidatorChange(Y){this._onChange=Y}enabled(Y){return null!=Y}}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275dir=o.lG2({type:re,features:[o.TTD]}),re})();const _a={provide:lt,useExisting:(0,o.Gpc)(()=>sa),multi:!0};let sa=(()=>{class re extends wr{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=Y=>Po(Y),this.createValidator=Y=>function Be(re){return ne=>{if(ze(ne.value)||ze(re))return null;const Y=parseFloat(ne.value);return!isNaN(Y)&&Y>re?{max:{max:re,actual:ne.value}}:null}}(Y)}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&o.uIk("max",Te._enabled?Te.max:null)},inputs:{max:"max"},features:[o._Bn([_a]),o.qOj]}),re})();const Fa={provide:lt,useExisting:(0,o.Gpc)(()=>$s),multi:!0};let $s=(()=>{class re extends wr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=Y=>Po(Y),this.createValidator=Y=>function Ne(re){return ne=>{if(ze(ne.value)||ze(re))return null;const Y=parseFloat(ne.value);return!isNaN(Y)&&Y<re?{min:{min:re,actual:ne.value}}:null}}(Y)}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&o.uIk("min",Te._enabled?Te.min:null)},inputs:{min:"min"},features:[o._Bn([Fa]),o.qOj]}),re})();const Uo={provide:lt,useExisting:(0,o.Gpc)(()=>Ts),multi:!0};let Ts=(()=>{class re extends wr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=Y=>it}enabled(Y){return Y}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Y,Te){2&Y&&o.uIk("required",Te._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([Uo]),o.qOj]}),re})();const wl={provide:lt,useExisting:(0,o.Gpc)(()=>Qi),multi:!0};let Qi=(()=>{class re extends wr{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=Y=>qa(Y),this.createValidator=Y=>function Kt(re){return ne=>ze(ne.value)||!Qe(ne.value)?null:ne.value.length<re?{minlength:{requiredLength:re,actualLength:ne.value.length}}:null}(Y)}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&o.uIk("minlength",Te._enabled?Te.minlength:null)},inputs:{minlength:"minlength"},features:[o._Bn([wl]),o.qOj]}),re})();const Ac={provide:lt,useExisting:(0,o.Gpc)(()=>jo),multi:!0};let jo=(()=>{class re extends wr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=Y=>qa(Y),this.createValidator=Y=>function wn(re){return ne=>Qe(ne.value)&&ne.value.length>re?{maxlength:{requiredLength:re,actualLength:ne.value.length}}:null}(Y)}}return re.\u0275fac=function(){let ne;return function(Te){return(ne||(ne=o.n5z(re)))(Te||re)}}(),re.\u0275dir=o.lG2({type:re,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&o.uIk("maxlength",Te._enabled?Te.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([Ac]),o.qOj]}),re})(),Ms=(()=>{class re{}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275mod=o.oAB({type:re}),re.\u0275inj=o.cJS({imports:[So]}),re})();class Yo extends Xe{constructor(ne,Y,Te){super(Dt(Y),X(Te,Y)),this.controls=ne,this._initObservables(),this._setUpdateStrategy(Y),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ne){return this.controls[this._adjustIndex(ne)]}push(ne,Y={}){this.controls.push(ne),this._registerControl(ne),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}insert(ne,Y,Te={}){this.controls.splice(ne,0,Y),this._registerControl(Y),this.updateValueAndValidity({emitEvent:Te.emitEvent})}removeAt(ne,Y={}){let Te=this._adjustIndex(ne);Te<0&&(Te=0),this.controls[Te]&&this.controls[Te]._registerOnCollectionChange(()=>{}),this.controls.splice(Te,1),this.updateValueAndValidity({emitEvent:Y.emitEvent})}setControl(ne,Y,Te={}){let kt=this._adjustIndex(ne);kt<0&&(kt=0),this.controls[kt]&&this.controls[kt]._registerOnCollectionChange(()=>{}),this.controls.splice(kt,1),Y&&(this.controls.splice(kt,0,Y),this._registerControl(Y)),this.updateValueAndValidity({emitEvent:Te.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ne,Y={}){Je(this,0,ne),ne.forEach((Te,kt)=>{Re(this,!1,kt),this.at(kt).setValue(Te,{onlySelf:!0,emitEvent:Y.emitEvent})}),this.updateValueAndValidity(Y)}patchValue(ne,Y={}){null!=ne&&(ne.forEach((Te,kt)=>{this.at(kt)&&this.at(kt).patchValue(Te,{onlySelf:!0,emitEvent:Y.emitEvent})}),this.updateValueAndValidity(Y))}reset(ne=[],Y={}){this._forEachChild((Te,kt)=>{Te.reset(ne[kt],{onlySelf:!0,emitEvent:Y.emitEvent})}),this._updatePristine(Y),this._updateTouched(Y),this.updateValueAndValidity(Y)}getRawValue(){return this.controls.map(ne=>ne.getRawValue())}clear(ne={}){this.controls.length<1||(this._forEachChild(Y=>Y._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ne.emitEvent}))}_adjustIndex(ne){return ne<0?ne+this.length:ne}_syncPendingControls(){let ne=this.controls.reduce((Y,Te)=>!!Te._syncPendingControls()||Y,!1);return ne&&this.updateValueAndValidity({onlySelf:!0}),ne}_forEachChild(ne){this.controls.forEach((Y,Te)=>{ne(Y,Te)})}_updateValue(){this.value=this.controls.filter(ne=>ne.enabled||this.disabled).map(ne=>ne.value)}_anyControls(ne){return this.controls.some(Y=>Y.enabled&&ne(Y))}_setUpControls(){this._forEachChild(ne=>this._registerControl(ne))}_allControlsDisabled(){for(const ne of this.controls)if(ne.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ne){ne.setParent(this),ne._registerOnCollectionChange(this._onCollectionChange)}_find(ne){return this.at(ne)??null}}function Fs(re){return!!re&&(void 0!==re.asyncValidators||void 0!==re.validators||void 0!==re.updateOn)}let Ro=(()=>{class re{constructor(){this.useNonNullable=!1}get nonNullable(){const Y=new re;return Y.useNonNullable=!0,Y}group(Y,Te=null){const kt=this._reduceControls(Y);let Bn={};return Fs(Te)?Bn=Te:null!==Te&&(Bn.validators=Te.validator,Bn.asyncValidators=Te.asyncValidator),new xe(kt,Bn)}record(Y,Te=null){const kt=this._reduceControls(Y);return new Lt(kt,Te)}control(Y,Te,kt){let Bn={};return this.useNonNullable?(Fs(Te)?Bn=Te:(Bn.validators=Te,Bn.asyncValidators=kt),new xr(Y,{...Bn,nonNullable:!0})):new xr(Y,Te,kt)}array(Y,Te,kt){const Bn=Y.map(Qr=>this._createControl(Qr));return new Yo(Bn,Te,kt)}_reduceControls(Y){const Te={};return Object.keys(Y).forEach(kt=>{Te[kt]=this._createControl(Y[kt])}),Te}_createControl(Y){return Y instanceof xr||Y instanceof Xe?Y:Array.isArray(Y)?this.control(Y[0],Y.length>1?Y[1]:null,Y.length>2?Y[2]:null):this.control(Y)}}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275prov=o.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})(),za=(()=>{class re{static withConfig(Y){return{ngModule:re,providers:[{provide:Ie,useValue:Y.callSetDisabledState??Ae}]}}}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275mod=o.oAB({type:re}),re.\u0275inj=o.cJS({imports:[Ms]}),re})(),ds=(()=>{class re{static withConfig(Y){return{ngModule:re,providers:[{provide:Io,useValue:Y.warnOnNgModelWithFormControl??"always"},{provide:Ie,useValue:Y.callSetDisabledState??Ae}]}}}return re.\u0275fac=function(Y){return new(Y||re)},re.\u0275mod=o.oAB({type:re}),re.\u0275inj=o.cJS({imports:[Ms]}),re})()},8255:(At,Le,k)=>{"use strict";k.d(Le,{Dx:()=>In,H7:()=>Ge,b2:()=>ui,q6:()=>nn});var o=k(6895),V=k(1571);class t extends o.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends t{static makeCurrent(){(0,o.HT)(new ie)}onAndCancel(Ae,Me,qe){return Ae.addEventListener(Me,qe,!1),()=>{Ae.removeEventListener(Me,qe,!1)}}dispatchEvent(Ae,Me){Ae.dispatchEvent(Me)}remove(Ae){Ae.parentNode&&Ae.parentNode.removeChild(Ae)}createElement(Ae,Me){return(Me=Me||this.getDefaultDocument()).createElement(Ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ae){return Ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ae){return Ae instanceof DocumentFragment}getGlobalEventTarget(Ae,Me){return"window"===Me?window:"document"===Me?Ae:"body"===Me?Ae.body:null}getBaseHref(Ae){const Me=function le(){return te=te||document.querySelector("base"),te?te.getAttribute("href"):null}();return null==Me?null:function we(Ie){U=U||document.createElement("a"),U.setAttribute("href",Ie);const Ae=U.pathname;return"/"===Ae.charAt(0)?Ae:`/${Ae}`}(Me)}resetBaseElement(){te=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ae){return(0,o.Mx)(document.cookie,Ae)}}let U,te=null;const de=new V.OlP("TRANSITION_ID"),Se=[{provide:V.ip1,useFactory:function Pe(Ie,Ae,Me){return()=>{Me.get(V.CZH).donePromise.then(()=>{const qe=(0,o.q)(),He=Ae.querySelectorAll(`style[ng-transition="${Ie}"]`);for(let Rt=0;Rt<He.length;Rt++)qe.remove(He[Rt])})}},deps:[de,o.K0,V.zs3],multi:!0}];let je=(()=>{class Ie{build(){return new XMLHttpRequest}}return Ie.\u0275fac=function(Me){return new(Me||Ie)},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();const ke=new V.OlP("EventManagerPlugins");let De=(()=>{class Ie{constructor(Me,qe){this._zone=qe,this._eventNameToPlugin=new Map,Me.forEach(He=>He.manager=this),this._plugins=Me.slice().reverse()}addEventListener(Me,qe,He){return this._findPluginFor(qe).addEventListener(Me,qe,He)}addGlobalEventListener(Me,qe,He){return this._findPluginFor(qe).addGlobalEventListener(Me,qe,He)}getZone(){return this._zone}_findPluginFor(Me){const qe=this._eventNameToPlugin.get(Me);if(qe)return qe;const He=this._plugins;for(let Rt=0;Rt<He.length;Rt++){const jt=He[Rt];if(jt.supports(Me))return this._eventNameToPlugin.set(Me,jt),jt}throw new Error(`No event manager plugin found for event ${Me}`)}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(ke),V.LFG(V.R0b))},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();class ze{constructor(Ae){this._doc=Ae}addGlobalEventListener(Ae,Me,qe){const He=(0,o.q)().getGlobalEventTarget(this._doc,Ae);if(!He)throw new Error(`Unsupported event target ${He} for event ${Me}`);return this.addEventListener(He,Me,qe)}}let Qe=(()=>{class Ie{constructor(){this._stylesSet=new Set}addStyles(Me){const qe=new Set;Me.forEach(He=>{this._stylesSet.has(He)||(this._stylesSet.add(He),qe.add(He))}),this.onStylesAdded(qe)}onStylesAdded(Me){}getAllStyles(){return Array.from(this._stylesSet)}}return Ie.\u0275fac=function(Me){return new(Me||Ie)},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})(),lt=(()=>{class Ie extends Qe{constructor(Me){super(),this._doc=Me,this._hostNodes=new Map,this._hostNodes.set(Me.head,[])}_addStylesToHost(Me,qe,He){Me.forEach(Rt=>{const jt=this._doc.createElement("style");jt.textContent=Rt,He.push(qe.appendChild(jt))})}addHost(Me){const qe=[];this._addStylesToHost(this._stylesSet,Me,qe),this._hostNodes.set(Me,qe)}removeHost(Me){const qe=this._hostNodes.get(Me);qe&&qe.forEach(tt),this._hostNodes.delete(Me)}onStylesAdded(Me){this._hostNodes.forEach((qe,He)=>{this._addStylesToHost(Me,He,qe)})}ngOnDestroy(){this._hostNodes.forEach(Me=>Me.forEach(tt))}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(o.K0))},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();function tt(Ie){(0,o.q)().remove(Ie)}const Ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fe=/%COMP%/g;function wn(Ie,Ae){return Ae.flat(100).map(Me=>Me.replace(Fe,Ie))}function ln(Ie){return Ae=>{if("__ngUnwrap__"===Ae)return Ie;!1===Ie(Ae)&&(Ae.preventDefault(),Ae.returnValue=!1)}}let jn=(()=>{class Ie{constructor(Me,qe,He){this.eventManager=Me,this.sharedStylesHost=qe,this.appId=He,this.rendererByCompId=new Map,this.defaultRenderer=new yn(Me)}createRenderer(Me,qe){if(!Me||!qe)return this.defaultRenderer;switch(qe.encapsulation){case V.ifc.Emulated:{let He=this.rendererByCompId.get(qe.id);return He||(He=new Ji(this.eventManager,this.sharedStylesHost,qe,this.appId),this.rendererByCompId.set(qe.id,He)),He.applyToHost(Me),He}case V.ifc.ShadowDom:return new bt(this.eventManager,this.sharedStylesHost,Me,qe);default:if(!this.rendererByCompId.has(qe.id)){const He=wn(qe.id,qe.styles);this.sharedStylesHost.addStyles(He),this.rendererByCompId.set(qe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(De),V.LFG(lt),V.LFG(V.AFp))},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();class yn{constructor(Ae){this.eventManager=Ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ae,Me){return Me?document.createElementNS(Ve[Me]||Me,Ae):document.createElement(Ae)}createComment(Ae){return document.createComment(Ae)}createText(Ae){return document.createTextNode(Ae)}appendChild(Ae,Me){(sr(Ae)?Ae.content:Ae).appendChild(Me)}insertBefore(Ae,Me,qe){Ae&&(sr(Ae)?Ae.content:Ae).insertBefore(Me,qe)}removeChild(Ae,Me){Ae&&Ae.removeChild(Me)}selectRootElement(Ae,Me){let qe="string"==typeof Ae?document.querySelector(Ae):Ae;if(!qe)throw new Error(`The selector "${Ae}" did not match any elements`);return Me||(qe.textContent=""),qe}parentNode(Ae){return Ae.parentNode}nextSibling(Ae){return Ae.nextSibling}setAttribute(Ae,Me,qe,He){if(He){Me=He+":"+Me;const Rt=Ve[He];Rt?Ae.setAttributeNS(Rt,Me,qe):Ae.setAttribute(Me,qe)}else Ae.setAttribute(Me,qe)}removeAttribute(Ae,Me,qe){if(qe){const He=Ve[qe];He?Ae.removeAttributeNS(He,Me):Ae.removeAttribute(`${qe}:${Me}`)}else Ae.removeAttribute(Me)}addClass(Ae,Me){Ae.classList.add(Me)}removeClass(Ae,Me){Ae.classList.remove(Me)}setStyle(Ae,Me,qe,He){He&(V.JOm.DashCase|V.JOm.Important)?Ae.style.setProperty(Me,qe,He&V.JOm.Important?"important":""):Ae.style[Me]=qe}removeStyle(Ae,Me,qe){qe&V.JOm.DashCase?Ae.style.removeProperty(Me):Ae.style[Me]=""}setProperty(Ae,Me,qe){Ae[Me]=qe}setValue(Ae,Me){Ae.nodeValue=Me}listen(Ae,Me,qe){return"string"==typeof Ae?this.eventManager.addGlobalEventListener(Ae,Me,ln(qe)):this.eventManager.addEventListener(Ae,Me,ln(qe))}}function sr(Ie){return"TEMPLATE"===Ie.tagName&&void 0!==Ie.content}class Ji extends yn{constructor(Ae,Me,qe,He){super(Ae),this.component=qe;const Rt=wn(He+"-"+qe.id,qe.styles);Me.addStyles(Rt),this.contentAttr=function St(Ie){return"_ngcontent-%COMP%".replace(Fe,Ie)}(He+"-"+qe.id),this.hostAttr=function Kt(Ie){return"_nghost-%COMP%".replace(Fe,Ie)}(He+"-"+qe.id)}applyToHost(Ae){super.setAttribute(Ae,this.hostAttr,"")}createElement(Ae,Me){const qe=super.createElement(Ae,Me);return super.setAttribute(qe,this.contentAttr,""),qe}}class bt extends yn{constructor(Ae,Me,qe,He){super(Ae),this.sharedStylesHost=Me,this.hostEl=qe,this.shadowRoot=qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Rt=wn(He.id,He.styles);for(let jt=0;jt<Rt.length;jt++){const en=document.createElement("style");en.textContent=Rt[jt],this.shadowRoot.appendChild(en)}}nodeOrShadowRoot(Ae){return Ae===this.hostEl?this.shadowRoot:Ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ae,Me){return super.appendChild(this.nodeOrShadowRoot(Ae),Me)}insertBefore(Ae,Me,qe){return super.insertBefore(this.nodeOrShadowRoot(Ae),Me,qe)}removeChild(Ae,Me){return super.removeChild(this.nodeOrShadowRoot(Ae),Me)}parentNode(Ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ae)))}}let at=(()=>{class Ie extends ze{constructor(Me){super(Me)}supports(Me){return!0}addEventListener(Me,qe,He){return Me.addEventListener(qe,He,!1),()=>this.removeEventListener(Me,qe,He)}removeEventListener(Me,qe,He){return Me.removeEventListener(qe,He)}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(o.K0))},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();const Pt=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={alt:Ie=>Ie.altKey,control:Ie=>Ie.ctrlKey,meta:Ie=>Ie.metaKey,shift:Ie=>Ie.shiftKey};let _t=(()=>{class Ie extends ze{constructor(Me){super(Me)}supports(Me){return null!=Ie.parseEventName(Me)}addEventListener(Me,qe,He){const Rt=Ie.parseEventName(qe),jt=Ie.eventCallback(Rt.fullKey,He,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,o.q)().onAndCancel(Me,Rt.domEventName,jt))}static parseEventName(Me){const qe=Me.toLowerCase().split("."),He=qe.shift();if(0===qe.length||"keydown"!==He&&"keyup"!==He)return null;const Rt=Ie._normalizeKey(qe.pop());let jt="",en=qe.indexOf("code");if(en>-1&&(qe.splice(en,1),jt="code."),Pt.forEach(sn=>{const ei=qe.indexOf(sn);ei>-1&&(qe.splice(ei,1),jt+=sn+".")}),jt+=Rt,0!=qe.length||0===Rt.length)return null;const An={};return An.domEventName=He,An.fullKey=jt,An}static matchEventFullKeyCode(Me,qe){let He=Vt[Me.key]||Me.key,Rt="";return qe.indexOf("code.")>-1&&(He=Me.code,Rt="code."),!(null==He||!He)&&(He=He.toLowerCase()," "===He?He="space":"."===He&&(He="dot"),Pt.forEach(jt=>{jt!==He&&(0,qt[jt])(Me)&&(Rt+=jt+".")}),Rt+=He,Rt===qe)}static eventCallback(Me,qe,He){return Rt=>{Ie.matchEventFullKeyCode(Rt,Me)&&He.runGuarded(()=>qe(Rt))}}static _normalizeKey(Me){return"esc"===Me?"escape":Me}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(o.K0))},Ie.\u0275prov=V.Yz7({token:Ie,factory:Ie.\u0275fac}),Ie})();const nn=(0,V.eFA)(V._c5,"browser",[{provide:V.Lbi,useValue:o.bD},{provide:V.g9A,useValue:function Cn(){ie.makeCurrent()},multi:!0},{provide:o.K0,useFactory:function Hn(){return(0,V.RDi)(document),document},deps:[]}]),zt=new V.OlP(""),Xt=[{provide:V.rWj,useClass:class Ye{addToWindow(Ae){V.dqk.getAngularTestability=(qe,He=!0)=>{const Rt=Ae.findTestabilityInTree(qe,He);if(null==Rt)throw new Error("Could not find testability for element.");return Rt},V.dqk.getAllAngularTestabilities=()=>Ae.getAllTestabilities(),V.dqk.getAllAngularRootElements=()=>Ae.getAllRootElements(),V.dqk.frameworkStabilizers||(V.dqk.frameworkStabilizers=[]),V.dqk.frameworkStabilizers.push(qe=>{const He=V.dqk.getAllAngularTestabilities();let Rt=He.length,jt=!1;const en=function(An){jt=jt||An,Rt--,0==Rt&&qe(jt)};He.forEach(function(An){An.whenStable(en)})})}findTestabilityInTree(Ae,Me,qe){return null==Me?null:Ae.getTestability(Me)??(qe?(0,o.q)().isShadowRoot(Me)?this.findTestabilityInTree(Ae,Me.host,!0):this.findTestabilityInTree(Ae,Me.parentElement,!0):null)}},deps:[]},{provide:V.lri,useClass:V.dDg,deps:[V.R0b,V.eoX,V.rWj]},{provide:V.dDg,useClass:V.dDg,deps:[V.R0b,V.eoX,V.rWj]}],Ht=[{provide:V.zSh,useValue:"root"},{provide:V.qLn,useFactory:function Kn(){return new V.qLn},deps:[]},{provide:ke,useClass:at,multi:!0,deps:[o.K0,V.R0b,V.Lbi]},{provide:ke,useClass:_t,multi:!0,deps:[o.K0]},{provide:jn,useClass:jn,deps:[De,lt,V.AFp]},{provide:V.FYo,useExisting:jn},{provide:Qe,useExisting:lt},{provide:lt,useClass:lt,deps:[o.K0]},{provide:De,useClass:De,deps:[ke,V.R0b]},{provide:o.JF,useClass:je,deps:[]},[]];let ui=(()=>{class Ie{constructor(Me){}static withServerTransition(Me){return{ngModule:Ie,providers:[{provide:V.AFp,useValue:Me.appId},{provide:de,useExisting:V.AFp},Se]}}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(zt,12))},Ie.\u0275mod=V.oAB({type:Ie}),Ie.\u0275inj=V.cJS({providers:[...Ht,...Xt],imports:[o.ez,V.hGG]}),Ie})(),In=(()=>{class Ie{constructor(Me){this._doc=Me}getTitle(){return this._doc.title}setTitle(Me){this._doc.title=Me||""}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(o.K0))},Ie.\u0275prov=V.Yz7({token:Ie,factory:function(Me){let qe=null;return qe=Me?new Me:function Or(){return new In((0,V.LFG)(o.K0))}(),qe},providedIn:"root"}),Ie})();typeof window<"u"&&window;let Ge=(()=>{class Ie{}return Ie.\u0275fac=function(Me){return new(Me||Ie)},Ie.\u0275prov=V.Yz7({token:Ie,factory:function(Me){let qe=null;return qe=Me?new(Me||Ie):V.LFG(Lt),qe},providedIn:"root"}),Ie})(),Lt=(()=>{class Ie extends Ge{constructor(Me){super(),this._doc=Me}sanitize(Me,qe){if(null==qe)return null;switch(Me){case V.q3G.NONE:return qe;case V.q3G.HTML:return(0,V.qzn)(qe,"HTML")?(0,V.z3N)(qe):(0,V.EiD)(this._doc,String(qe)).toString();case V.q3G.STYLE:return(0,V.qzn)(qe,"Style")?(0,V.z3N)(qe):qe;case V.q3G.SCRIPT:if((0,V.qzn)(qe,"Script"))return(0,V.z3N)(qe);throw new Error("unsafe value used in a script context");case V.q3G.URL:return(0,V.qzn)(qe,"URL")?(0,V.z3N)(qe):(0,V.mCW)(String(qe));case V.q3G.RESOURCE_URL:if((0,V.qzn)(qe,"ResourceURL"))return(0,V.z3N)(qe);throw new Error(`unsafe value used in a resource URL context (see ${V.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Me} (see ${V.JZr})`)}}bypassSecurityTrustHtml(Me){return(0,V.JVY)(Me)}bypassSecurityTrustStyle(Me){return(0,V.L6k)(Me)}bypassSecurityTrustScript(Me){return(0,V.eBb)(Me)}bypassSecurityTrustUrl(Me){return(0,V.LAX)(Me)}bypassSecurityTrustResourceUrl(Me){return(0,V.pB0)(Me)}}return Ie.\u0275fac=function(Me){return new(Me||Ie)(V.LFG(o.K0))},Ie.\u0275prov=V.Yz7({token:Ie,factory:function(Me){let qe=null;return qe=Me?new Me:function ft(Ie){return new Lt(Ie.get(o.K0))}(V.LFG(V.zs3)),qe},providedIn:"root"}),Ie})()},8136:(At,Le,k)=>{"use strict";k.d(Le,{gz:()=>Ao,m2:()=>Oi,F0:()=>_n,rH:()=>xo,Od:()=>Js,Bz:()=>d,lC:()=>_a});var o=k(1571),V=k(2076),t=k(9646),ie=k(1135),te=k(6805),le=k(9841),U=k(7272),we=k(9770),de=k(9635),Pe=k(2843),Se=k(9751),Ye=k(515),je=k(4033),ke=k(7579),De=k(6895),ze=k(4004),Qe=k(3900),lt=k(5698),tt=k(8675),Ve=k(9300),Fe=k(5577),Ne=k(590),Be=k(4351),it=k(8505),Mt=k(262),St=k(4482),Kt=k(5403);function wn(D,M,x,A,z){return(Q,K)=>{let ye=x,Oe=M,et=0;Q.subscribe((0,Kt.x)(K,ut=>{const ct=et++;Oe=ye?D(Oe,ut,ct):(ye=!0,ut),A&&K.next(Oe)},z&&(()=>{ye&&K.next(Oe),K.complete()})))}}function ln(D,M){return(0,St.e)(wn(D,M,arguments.length>=2,!0))}function jn(D){return D<=0?()=>Ye.E:(0,St.e)((M,x)=>{let A=[];M.subscribe((0,Kt.x)(x,z=>{A.push(z),D<A.length&&A.shift()},()=>{for(const z of A)x.next(z);x.complete()},void 0,()=>{A=null}))})}var yn=k(8068),Yr=k(6590),Zn=k(4671);function sr(D,M){const x=arguments.length>=2;return A=>A.pipe(D?(0,Ve.h)((z,Q)=>D(z,Q,A)):Zn.y,jn(1),x?(0,Yr.d)(M):(0,yn.T)(()=>new te.K))}var bt=k(9718);function at(D){return(0,St.e)((M,x)=>{try{M.subscribe(x)}finally{x.add(D)}})}var Pt=k(8343),Vt=k(8189),qt=k(8255);const _t="primary",Ot=Symbol("RouteTitle");class un{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const x=this.params[M];return Array.isArray(x)?x[0]:x}return null}getAll(M){if(this.has(M)){const x=this.params[M];return Array.isArray(x)?x:[x]}return[]}get keys(){return Object.keys(this.params)}}function Qn(D){return new un(D)}function En(D,M,x){const A=x.path.split("/");if(A.length>D.length||"full"===x.pathMatch&&(M.hasChildren()||A.length<D.length))return null;const z={};for(let Q=0;Q<A.length;Q++){const K=A[Q],ye=D[Q];if(K.startsWith(":"))z[K.substring(1)]=ye;else if(K!==ye.path)return null}return{consumed:D.slice(0,A.length),posParams:z}}function Cn(D,M){const x=D?Object.keys(D):void 0,A=M?Object.keys(M):void 0;if(!x||!A||x.length!=A.length)return!1;let z;for(let Q=0;Q<x.length;Q++)if(z=x[Q],!Kn(D[z],M[z]))return!1;return!0}function Kn(D,M){if(Array.isArray(D)&&Array.isArray(M)){if(D.length!==M.length)return!1;const x=[...D].sort(),A=[...M].sort();return x.every((z,Q)=>A[Q]===z)}return D===M}function Hn(D){return Array.prototype.concat.apply([],D)}function Zt(D){return D.length>0?D[D.length-1]:null}function zt(D,M){for(const x in D)D.hasOwnProperty(x)&&M(D[x],x)}function Xt(D){return(0,o.CqO)(D)?D:(0,o.QGY)(D)?(0,V.D)(Promise.resolve(D)):(0,t.of)(D)}const Ht=!1,ui={exact:function Or(D,M,x){if(!Gt(D.segments,M.segments)||!ce(D.segments,M.segments,x)||D.numberOfChildren!==M.numberOfChildren)return!1;for(const A in M.children)if(!D.children[A]||!Or(D.children[A],M.children[A],x))return!1;return!0},subset:Ei},Zi={exact:function Er(D,M){return Cn(D,M)},subset:function In(D,M){return Object.keys(M).length<=Object.keys(D).length&&Object.keys(M).every(x=>Kn(D[x],M[x]))},ignored:()=>!0};function qi(D,M,x){return ui[x.paths](D.root,M.root,x.matrixParams)&&Zi[x.queryParams](D.queryParams,M.queryParams)&&!("exact"===x.fragment&&D.fragment!==M.fragment)}function Ei(D,M,x){return N(D,M,M.segments,x)}function N(D,M,x,A){if(D.segments.length>x.length){const z=D.segments.slice(0,x.length);return!(!Gt(z,x)||M.hasChildren()||!ce(z,x,A))}if(D.segments.length===x.length){if(!Gt(D.segments,x)||!ce(D.segments,x,A))return!1;for(const z in M.children)if(!D.children[z]||!Ei(D.children[z],M.children[z],A))return!1;return!0}{const z=x.slice(0,D.segments.length),Q=x.slice(D.segments.length);return!!(Gt(D.segments,z)&&ce(D.segments,z,A)&&D.children[_t])&&N(D.children[_t],M,Q,A)}}function ce(D,M,x){return M.every((A,z)=>Zi[x](D[z].parameters,A.parameters))}class ht{constructor(M=new It([],{}),x={},A=null){this.root=M,this.queryParams=x,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return Mo.serialize(this)}}class It{constructor(M,x){this.segments=M,this.children=x,this.parent=null,zt(x,(A,z)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hi(this)}}class Jt{constructor(M,x){this.path=M,this.parameters=x}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return fe(this)}}function Gt(D,M){return D.length===M.length&&D.every((x,A)=>x.path===M[A].path)}let di=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:function(){return new fi},providedIn:"root"}),D})();class fi{parse(M){const x=new Ut(M);return new ht(x.parseRootSegment(),x.parseQueryParams(),x.parseFragment())}serialize(M){const x=`/${Br(M.root,!0)}`,A=function Re(D){const M=Object.keys(D).map(x=>{const A=D[x];return Array.isArray(A)?A.map(z=>`${eo(x)}=${eo(z)}`).join("&"):`${eo(x)}=${eo(A)}`}).filter(x=>!!x);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${x}${A}${"string"==typeof M.fragment?`#${function to(D){return encodeURI(D)}(M.fragment)}`:""}`}}const Mo=new fi;function hi(D){return D.segments.map(M=>fe(M)).join("/")}function Br(D,M){if(!D.hasChildren())return hi(D);if(M){const x=D.children[_t]?Br(D.children[_t],!1):"",A=[];return zt(D.children,(z,Q)=>{Q!==_t&&A.push(`${Q}:${Br(z,!1)}`)}),A.length>0?`${x}(${A.join("//")})`:x}{const x=function bn(D,M){let x=[];return zt(D.children,(A,z)=>{z===_t&&(x=x.concat(M(A,z)))}),zt(D.children,(A,z)=>{z!==_t&&(x=x.concat(M(A,z)))}),x}(D,(A,z)=>z===_t?[Br(D.children[_t],!1)]:[`${z}:${Br(A,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[_t]?`${hi(D)}/${x[0]}`:`${hi(D)}/(${x.join("//")})`}}function Pr(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eo(D){return Pr(D).replace(/%3B/gi,";")}function Dt(D){return Pr(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H(D){return decodeURIComponent(D)}function X(D){return H(D.replace(/\+/g,"%20"))}function fe(D){return`${Dt(D.path)}${function _e(D){return Object.keys(D).map(M=>`;${Dt(M)}=${Dt(D[M])}`).join("")}(D.parameters)}`}const Je=/^[^\/()?;=#]+/;function Xe(D){const M=D.match(Je);return M?M[0]:""}const xe=/^[^=?&#]+/,ft=/^[^&#]+/;class Ut{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let x={};this.peekStartsWith("/(")&&(this.capture("/"),x=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(M.length>0||Object.keys(x).length>0)&&(A[_t]=new It(M,x)),A}parseSegment(){const M=Xe(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new o.vHH(4009,Ht);return this.capture(M),new Jt(H(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const x=Xe(this.remaining);if(!x)return;this.capture(x);let A="";if(this.consumeOptional("=")){const z=Xe(this.remaining);z&&(A=z,this.capture(A))}M[H(x)]=H(A)}parseQueryParam(M){const x=function Ge(D){const M=D.match(xe);return M?M[0]:""}(this.remaining);if(!x)return;this.capture(x);let A="";if(this.consumeOptional("=")){const K=function Lt(D){const M=D.match(ft);return M?M[0]:""}(this.remaining);K&&(A=K,this.capture(A))}const z=X(x),Q=X(A);if(M.hasOwnProperty(z)){let K=M[z];Array.isArray(K)||(K=[K],M[z]=K),K.push(Q)}else M[z]=Q}parseParens(M){const x={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Xe(this.remaining),z=this.remaining[A.length];if("/"!==z&&")"!==z&&";"!==z)throw new o.vHH(4010,Ht);let Q;A.indexOf(":")>-1?(Q=A.slice(0,A.indexOf(":")),this.capture(Q),this.capture(":")):M&&(Q=_t);const K=this.parseChildren();x[Q]=1===Object.keys(K).length?K[_t]:new It([],K),this.consumeOptional("//")}return x}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new o.vHH(4011,Ht)}}function Ie(D){return D.segments.length>0?new It([],{[_t]:D}):D}function Ae(D){const M={};for(const A of Object.keys(D.children)){const Q=Ae(D.children[A]);(Q.segments.length>0||Q.hasChildren())&&(M[A]=Q)}return function Me(D){if(1===D.numberOfChildren&&D.children[_t]){const M=D.children[_t];return new It(D.segments.concat(M.segments),M.children)}return D}(new It(D.segments,M))}function qe(D){return D instanceof ht}function An(D,M,x,A,z){if(0===x.length)return Si(M.root,M.root,M.root,A,z);const Q=function mi(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Ti(!0,0,D);let M=0,x=!1;const A=D.reduce((z,Q,K)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const ye={};return zt(Q.outlets,(Oe,et)=>{ye[et]="string"==typeof Oe?Oe.split("/"):Oe}),[...z,{outlets:ye}]}if(Q.segmentPath)return[...z,Q.segmentPath]}return"string"!=typeof Q?[...z,Q]:0===K?(Q.split("/").forEach((ye,Oe)=>{0==Oe&&"."===ye||(0==Oe&&""===ye?x=!0:".."===ye?M++:""!=ye&&z.push(ye))}),z):[...z,Q]},[]);return new Ti(x,M,A)}(x);return Q.toRoot()?Si(M.root,M.root,new It([],{}),A,z):function K(Oe){const et=function mr(D,M,x,A){if(D.isAbsolute)return new Wr(M.root,!0,0);if(-1===A)return new Wr(x,x===M.root,0);return function $i(D,M,x){let A=D,z=M,Q=x;for(;Q>z;){if(Q-=z,A=A.parent,!A)throw new o.vHH(4005,!1);z=A.segments.length}return new Wr(A,!1,z-Q)}(x,A+(sn(D.commands[0])?0:1),D.numberOfDoubleDots)}(Q,M,D.snapshot?._urlSegment,Oe),ut=et.processChildren?ii(et.segmentGroup,et.index,Q.commands):pi(et.segmentGroup,et.index,Q.commands);return Si(M.root,et.segmentGroup,ut,A,z)}(D.snapshot?._lastPathIndex)}function sn(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function ei(D){return"object"==typeof D&&null!=D&&D.outlets}function Si(D,M,x,A,z){let K,Q={};A&&zt(A,(Oe,et)=>{Q[et]=Array.isArray(Oe)?Oe.map(ut=>`${ut}`):`${Oe}`}),K=D===M?x:oi(D,M,x);const ye=Ie(Ae(K));return new ht(ye,Q,z)}function oi(D,M,x){const A={};return zt(D.children,(z,Q)=>{A[Q]=z===M?x:oi(z,M,x)}),new It(D.segments,A)}class Ti{constructor(M,x,A){if(this.isAbsolute=M,this.numberOfDoubleDots=x,this.commands=A,M&&A.length>0&&sn(A[0]))throw new o.vHH(4003,!1);const z=A.find(ei);if(z&&z!==Zt(A))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wr{constructor(M,x,A){this.segmentGroup=M,this.processChildren=x,this.index=A}}function pi(D,M,x){if(D||(D=new It([],{})),0===D.segments.length&&D.hasChildren())return ii(D,M,x);const A=function Tr(D,M,x){let A=0,z=M;const Q={match:!1,pathIndex:0,commandIndex:0};for(;z<D.segments.length;){if(A>=x.length)return Q;const K=D.segments[z],ye=x[A];if(ei(ye))break;const Oe=`${ye}`,et=A<x.length-1?x[A+1]:null;if(z>0&&void 0===Oe)break;if(Oe&&et&&"object"==typeof et&&void 0===et.outlets){if(!Vo(Oe,et,K))return Q;A+=2}else{if(!Vo(Oe,{},K))return Q;A++}z++}return{match:!0,pathIndex:z,commandIndex:A}}(D,M,x),z=x.slice(A.commandIndex);if(A.match&&A.pathIndex<D.segments.length){const Q=new It(D.segments.slice(0,A.pathIndex),{});return Q.children[_t]=new It(D.segments.slice(A.pathIndex),D.children),ii(Q,0,z)}return A.match&&0===z.length?new It(D.segments,{}):A.match&&!D.hasChildren()?Ai(D,M,x):A.match?ii(D,0,z):Ai(D,M,x)}function ii(D,M,x){if(0===x.length)return new It(D.segments,{});{const A=function li(D){return ei(D[0])?D[0].outlets:{[_t]:D}}(x),z={};return!A[_t]&&D.children[_t]&&1===D.numberOfChildren&&0===D.children[_t].segments.length?ii(D.children[_t],M,x):(zt(A,(Q,K)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(z[K]=pi(D.children[K],M,Q))}),zt(D.children,(Q,K)=>{void 0===A[K]&&(z[K]=Q)}),new It(D.segments,z))}}function Ai(D,M,x){const A=D.segments.slice(0,M);let z=0;for(;z<x.length;){const Q=x[z];if(ei(Q)){const Oe=Mr(Q.outlets);return new It(A,Oe)}if(0===z&&sn(x[0])){A.push(new Jt(D.segments[M].path,zo(x[0]))),z++;continue}const K=ei(Q)?Q.outlets[_t]:`${Q}`,ye=z<x.length-1?x[z+1]:null;K&&ye&&sn(ye)?(A.push(new Jt(K,zo(ye))),z+=2):(A.push(new Jt(K,{})),z++)}return new It(A,{})}function Mr(D){const M={};return zt(D,(x,A)=>{"string"==typeof x&&(x=[x]),null!==x&&(M[A]=Ai(new It([],{}),0,x))}),M}function zo(D){const M={};return zt(D,(x,A)=>M[A]=`${x}`),M}function Vo(D,M,x){return D==x.path&&Cn(M,x.parameters)}const cn="imperative";class Yn{constructor(M,x){this.id=M,this.url=x}}class vi extends Yn{constructor(M,x,A="imperative",z=null){super(M,x),this.type=0,this.navigationTrigger=A,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oi extends Yn{constructor(M,x,A){super(M,x),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xr extends Yn{constructor(M,x,A,z){super(M,x),this.reason=A,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gi extends Yn{constructor(M,x,A,z){super(M,x),this.reason=A,this.code=z,this.type=16}}class mo extends Yn{constructor(M,x,A,z){super(M,x),this.error=A,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ui extends Yn{constructor(M,x,A,z){super(M,x),this.urlAfterRedirects=A,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ka extends Yn{constructor(M,x,A,z){super(M,x),this.urlAfterRedirects=A,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go extends Yn{constructor(M,x,A,z,Q){super(M,x),this.urlAfterRedirects=A,this.state=z,this.shouldActivate=Q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ci extends Yn{constructor(M,x,A,z){super(M,x),this.urlAfterRedirects=A,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws extends Yn{constructor(M,x,A,z){super(M,x),this.urlAfterRedirects=A,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kr{constructor(M){this.route=M,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ls{constructor(M){this.route=M,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kr{constructor(M){this.snapshot=M,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rr{constructor(M){this.snapshot=M,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(M){this.snapshot=M,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ra{constructor(M){this.snapshot=M,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zr{constructor(M,x,A){this.routerEvent=M,this.position=x,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ar=(()=>{class D{createUrlTree(x,A,z,Q,K,ye){return An(x||A.root,z,Q,K,ye)}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac}),D})(),vl=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:function(M){return ar.\u0275fac(M)},providedIn:"root"}),D})();class Xo{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const x=this.pathFromRoot(M);return x.length>1?x[x.length-2]:null}children(M){const x=cs(M,this._root);return x?x.children.map(A=>A.value):[]}firstChild(M){const x=cs(M,this._root);return x&&x.children.length>0?x.children[0].value:null}siblings(M){const x=Cs(M,this._root);return x.length<2?[]:x[x.length-2].children.map(z=>z.value).filter(z=>z!==M)}pathFromRoot(M){return Cs(M,this._root).map(x=>x.value)}}function cs(D,M){if(D===M.value)return M;for(const x of M.children){const A=cs(D,x);if(A)return A}return null}function Cs(D,M){if(D===M.value)return[M];for(const x of M.children){const A=Cs(D,x);if(A.length)return A.unshift(M),A}return[]}class Io{constructor(M,x){this.value=M,this.children=x}toString(){return`TreeNode(${this.value})`}}function Nr(D){const M={};return D&&D.children.forEach(x=>M[x.value.outlet]=x),M}class _o extends Xo{constructor(M,x){super(M),this.snapshot=x,jr(this,M)}toString(){return this.snapshot.toString()}}function Fr(D,M){const x=function gr(D,M){const K=new uo([],{},{},"",{},_t,M,null,D.root,-1,{});return new Oo("",new Io(K,[]))}(D,M),A=new ie.X([new Jt("",{})]),z=new ie.X({}),Q=new ie.X({}),K=new ie.X({}),ye=new ie.X(""),Oe=new Ao(A,z,K,ye,Q,_t,M,x.root);return Oe.snapshot=x.root,new _o(new Io(Oe,[]),x)}class Ao{constructor(M,x,A,z,Q,K,ye,Oe){this.url=M,this.params=x,this.queryParams=A,this.fragment=z,this.data=Q,this.outlet=K,this.component=ye,this.title=this.data?.pipe((0,ze.U)(et=>et[Ot]))??(0,t.of)(void 0),this._futureSnapshot=Oe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ze.U)(M=>Qn(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ze.U)(M=>Qn(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yo(D,M="emptyOnly"){const x=D.pathFromRoot;let A=0;if("always"!==M)for(A=x.length-1;A>=1;){const z=x[A],Q=x[A-1];if(z.routeConfig&&""===z.routeConfig.path)A--;else{if(Q.component)break;A--}}return function Ds(D){return D.reduce((M,x)=>({params:{...M.params,...x.params},data:{...M.data,...x.data},resolve:{...x.data,...M.resolve,...x.routeConfig?.data,...x._resolvedData}}),{params:{},data:{},resolve:{}})}(x.slice(A))}class uo{get title(){return this.data?.[Ot]}constructor(M,x,A,z,Q,K,ye,Oe,et,ut,ct){this.url=M,this.params=x,this.queryParams=A,this.fragment=z,this.data=Q,this.outlet=K,this.component=ye,this.routeConfig=Oe,this._urlSegment=et,this._lastPathIndex=ut,this._resolve=ct}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Oo extends Xo{constructor(M,x){super(x),this.url=M,jr(this,x)}toString(){return Gs(this._root)}}function jr(D,M){M.value._routerState=D,M.children.forEach(x=>jr(D,x))}function Gs(D){const M=D.children.length>0?` { ${D.children.map(Gs).join(", ")} } `:"";return`${D.value}${M}`}function bl(D){if(D.snapshot){const M=D.snapshot,x=D._futureSnapshot;D.snapshot=x,Cn(M.queryParams,x.queryParams)||D.queryParams.next(x.queryParams),M.fragment!==x.fragment&&D.fragment.next(x.fragment),Cn(M.params,x.params)||D.params.next(x.params),function gn(D,M){if(D.length!==M.length)return!1;for(let x=0;x<D.length;++x)if(!Cn(D[x],M[x]))return!1;return!0}(M.url,x.url)||D.url.next(x.url),Cn(M.data,x.data)||D.data.next(x.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function oa(D,M){const x=Cn(D.params,M.params)&&function xt(D,M){return Gt(D,M)&&D.every((x,A)=>Cn(x.parameters,M[A].parameters))}(D.url,M.url);return x&&!(!D.parent!=!M.parent)&&(!D.parent||oa(D.parent,M.parent))}function es(D,M,x){if(x&&D.shouldReuseRoute(M.value,x.value.snapshot)){const A=x.value;A._futureSnapshot=M.value;const z=function xl(D,M,x){return M.children.map(A=>{for(const z of x.children)if(D.shouldReuseRoute(A.value,z.value.snapshot))return es(D,A,z);return es(D,A)})}(D,M,x);return new Io(A,z)}{if(D.shouldAttach(M.value)){const Q=D.retrieve(M.value);if(null!==Q){const K=Q.route;return K.value._futureSnapshot=M.value,K.children=M.children.map(ye=>es(D,ye)),K}}const A=function Ja(D){return new Ao(new ie.X(D.url),new ie.X(D.params),new ie.X(D.queryParams),new ie.X(D.fragment),new ie.X(D.data),D.outlet,D.component,D)}(M.value),z=M.children.map(Q=>es(D,Q));return new Io(A,z)}}const _r="ngNavigationCancelingError";function ji(D,M){const{redirectTo:x,navigationBehaviorOptions:A}=qe(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,z=Xl(!1,0,M);return z.url=x,z.navigationBehaviorOptions=A,z}function Xl(D,M,x){const A=new Error("NavigationCancelingError: "+(D||""));return A[_r]=!0,A.cancellationCode=M,x&&(A.url=x),A}function Fl(D){return Na(D)&&qe(D.url)}function Na(D){return D&&D[_r]}class qa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Po,this.attachRef=null}}let Po=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(x,A){const z=this.getOrCreateContext(x);z.outlet=A,this.contexts.set(x,z)}onChildOutletDestroyed(x){const A=this.getContext(x);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let A=this.getContext(x);return A||(A=new qa,this.contexts.set(x,A)),A}getContext(x){return this.contexts.get(x)||null}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const wr=!1;let _a=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=_t,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(Po),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(x){if(x.name){const{firstChange:A,previousValue:z}=x.name;if(A)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(x){return this.parentContexts.getContext(x)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const x=this.parentContexts.getContext(this.name);x?.route&&(x.attachRef?this.attach(x.attachRef,x.route):this.activateWith(x.route,x.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,wr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,wr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,wr);this.location.detach();const x=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(x.instance),x}attach(x,A){this.activated=x,this._activatedRoute=A,this.location.insert(x.hostView),this.attachEvents.emit(x.instance)}deactivate(){if(this.activated){const x=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(x)}}activateWith(x,A){if(this.isActivated)throw new o.vHH(4013,wr);this._activatedRoute=x;const z=this.location,K=x.snapshot.component,ye=this.parentContexts.getOrCreateContext(this.name).children,Oe=new sa(x,ye,z.injector);if(A&&function Fa(D){return!!D.resolveComponentFactory}(A)){const et=A.resolveComponentFactory(K);this.activated=z.createComponent(et,z.length,Oe)}else this.activated=z.createComponent(K,{index:z.length,injector:Oe,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275dir=o.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),D})();class sa{constructor(M,x,A){this.route=M,this.childContexts=x,this.parent=A}get(M,x){return M===Ao?this.route:M===Po?this.childContexts:this.parent.get(M,x)}}let $s=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275cmp=o.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(x,A){1&x&&o._UZ(0,"router-outlet")},dependencies:[_a],encapsulation:2}),D})();function Uo(D,M){return D.providers&&!D._injector&&(D._injector=(0,o.MMx)(D.providers,M,`Route: ${D.path}`)),D._injector??M}function jo(D){const M=D.children&&D.children.map(jo),x=M?{...D,children:M}:{...D};return!x.component&&!x.loadComponent&&(M||x.loadChildren)&&x.outlet&&x.outlet!==_t&&(x.component=$s),x}function qr(D){return D.outlet||_t}function ko(D,M){const x=D.filter(A=>qr(A)===M);return x.push(...D.filter(A=>qr(A)!==M)),x}function Ba(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let M=D.parent;M;M=M.parent){const x=M.routeConfig;if(x?._loadedInjector)return x._loadedInjector;if(x?._injector)return x._injector}return null}class Hr{constructor(M,x,A,z){this.routeReuseStrategy=M,this.futureState=x,this.currState=A,this.forwardEvent=z}activate(M){const x=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(x,A,M),bl(this.futureState.root),this.activateChildRoutes(x,A,M)}deactivateChildRoutes(M,x,A){const z=Nr(x);M.children.forEach(Q=>{const K=Q.value.outlet;this.deactivateRoutes(Q,z[K],A),delete z[K]}),zt(z,(Q,K)=>{this.deactivateRouteAndItsChildren(Q,A)})}deactivateRoutes(M,x,A){const z=M.value,Q=x?x.value:null;if(z===Q)if(z.component){const K=A.getContext(z.outlet);K&&this.deactivateChildRoutes(M,x,K.children)}else this.deactivateChildRoutes(M,x,A);else Q&&this.deactivateRouteAndItsChildren(x,A)}deactivateRouteAndItsChildren(M,x){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,x):this.deactivateRouteAndOutlet(M,x)}detachAndStoreRouteSubtree(M,x){const A=x.getContext(M.value.outlet),z=A&&M.value.component?A.children:x,Q=Nr(M);for(const K of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[K],z);if(A&&A.outlet){const K=A.outlet.detach(),ye=A.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:K,route:M,contexts:ye})}}deactivateRouteAndOutlet(M,x){const A=x.getContext(M.value.outlet),z=A&&M.value.component?A.children:x,Q=Nr(M);for(const K of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[K],z);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(M,x,A){const z=Nr(x);M.children.forEach(Q=>{this.activateRoutes(Q,z[Q.value.outlet],A),this.forwardEvent(new Ra(Q.value.snapshot))}),M.children.length&&this.forwardEvent(new Rr(M.value.snapshot))}activateRoutes(M,x,A){const z=M.value,Q=x?x.value:null;if(bl(z),z===Q)if(z.component){const K=A.getOrCreateContext(z.outlet);this.activateChildRoutes(M,x,K.children)}else this.activateChildRoutes(M,x,A);else if(z.component){const K=A.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const ye=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),K.children.onOutletReAttached(ye.contexts),K.attachRef=ye.componentRef,K.route=ye.route.value,K.outlet&&K.outlet.attach(ye.componentRef,ye.route.value),bl(ye.route.value),this.activateChildRoutes(M,null,K.children)}else{const ye=Ba(z.snapshot),Oe=ye?.get(o._Vd)??null;K.attachRef=null,K.route=z,K.resolver=Oe,K.injector=ye,K.outlet&&K.outlet.activateWith(z,K.injector),this.activateChildRoutes(M,null,K.children)}}else this.activateChildRoutes(M,null,A)}}class Ms{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class Yo{constructor(M,x){this.component=M,this.route=x}}function ts(D,M,x){const A=D._root;return Ro(A,M?M._root:null,x,[A.value])}function Fs(D,M){const x=Symbol(),A=M.get(D,x);return A===x?"function"!=typeof D||(0,o.Z0I)(D)?M.get(D):D:A}function Ro(D,M,x,A,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=Nr(M);return D.children.forEach(K=>{(function us(D,M,x,A,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=D.value,K=M?M.value:null,ye=x?x.getContext(D.value.outlet):null;if(K&&Q.routeConfig===K.routeConfig){const Oe=function ya(D,M,x){if("function"==typeof x)return x(D,M);switch(x){case"pathParamsChange":return!Gt(D.url,M.url);case"pathParamsOrQueryParamsChange":return!Gt(D.url,M.url)||!Cn(D.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oa(D,M)||!Cn(D.queryParams,M.queryParams);default:return!oa(D,M)}}(K,Q,Q.routeConfig.runGuardsAndResolvers);Oe?z.canActivateChecks.push(new Ms(A)):(Q.data=K.data,Q._resolvedData=K._resolvedData),Ro(D,M,Q.component?ye?ye.children:null:x,A,z),Oe&&ye&&ye.outlet&&ye.outlet.isActivated&&z.canDeactivateChecks.push(new Yo(ye.outlet.component,K))}else K&&ns(M,ye,z),z.canActivateChecks.push(new Ms(A)),Ro(D,null,Q.component?ye?ye.children:null:x,A,z)})(K,Q[K.value.outlet],x,A.concat([K.value]),z),delete Q[K.value.outlet]}),zt(Q,(K,ye)=>ns(K,x.getContext(ye),z)),z}function ns(D,M,x){const A=Nr(D),z=D.value;zt(A,(Q,K)=>{ns(Q,z.component?M?M.children.getContext(K):null:M,x)}),x.canDeactivateChecks.push(new Yo(z.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,z))}function za(D){return"function"==typeof D}function tr(D){return D instanceof te.K||"EmptyError"===D?.name}const hs=Symbol("INITIAL_VALUE");function Ss(){return(0,Qe.w)(D=>(0,le.a)(D.map(M=>M.pipe((0,lt.q)(1),(0,tt.O)(hs)))).pipe((0,ze.U)(M=>{for(const x of M)if(!0!==x){if(x===hs)return hs;if(!1===x||x instanceof ht)return x}return!0}),(0,Ve.h)(M=>M!==hs),(0,lt.q)(1)))}function Ks(D){return(0,de.z)((0,it.b)(M=>{if(qe(M))throw ji(0,M)}),(0,ze.U)(M=>!0===M))}const Va={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nl(D,M,x,A,z){const Q=Bl(D,M,x);return Q.matched?function tl(D,M,x,A){const z=M.canMatch;if(!z||0===z.length)return(0,t.of)(!0);const Q=z.map(K=>{const ye=Fs(K,D);return Xt(function kt(D){return D&&za(D.canMatch)}(ye)?ye.canMatch(M,x):D.runInContext(()=>ye(M,x)))});return(0,t.of)(Q).pipe(Ss(),Ks())}(A=Uo(M,A),M,x).pipe((0,ze.U)(K=>!0===K?Q:{...Va})):(0,t.of)(Q)}function Bl(D,M,x){if(""===M.path)return"full"===M.pathMatch&&(D.hasChildren()||x.length>0)?{...Va}:{matched:!0,consumedSegments:[],remainingSegments:x,parameters:{},positionalParamSegments:{}};const z=(M.matcher||En)(x,D,M);if(!z)return{...Va};const Q={};zt(z.posParams,(ye,Oe)=>{Q[Oe]=ye.path});const K=z.consumed.length>0?{...Q,...z.consumed[z.consumed.length-1].parameters}:Q;return{matched:!0,consumedSegments:z.consumed,remainingSegments:x.slice(z.consumed.length),parameters:K,positionalParamSegments:z.posParams??{}}}function Wo(D,M,x,A){if(x.length>0&&function Cl(D,M,x){return x.some(A=>rl(D,M,A)&&qr(A)!==_t)}(D,x,A)){const Q=new It(M,function il(D,M,x,A){const z={};z[_t]=A,A._sourceSegment=D,A._segmentIndexShift=M.length;for(const Q of x)if(""===Q.path&&qr(Q)!==_t){const K=new It([],{});K._sourceSegment=D,K._segmentIndexShift=M.length,z[qr(Q)]=K}return z}(D,M,A,new It(x,D.children)));return Q._sourceSegment=D,Q._segmentIndexShift=M.length,{segmentGroup:Q,slicedSegments:[]}}if(0===x.length&&function va(D,M,x){return x.some(A=>rl(D,M,A))}(D,x,A)){const Q=new It(D.segments,function ps(D,M,x,A,z){const Q={};for(const K of A)if(rl(D,x,K)&&!z[qr(K)]){const ye=new It([],{});ye._sourceSegment=D,ye._segmentIndexShift=M.length,Q[qr(K)]=ye}return{...z,...Q}}(D,M,x,A,D.children));return Q._sourceSegment=D,Q._segmentIndexShift=M.length,{segmentGroup:Q,slicedSegments:x}}const z=new It(D.segments,D.children);return z._sourceSegment=D,z._segmentIndexShift=M.length,{segmentGroup:z,slicedSegments:x}}function rl(D,M,x){return(!(D.hasChildren()||M.length>0)||"full"!==x.pathMatch)&&""===x.path}function Dl(D,M,x,A){return!!(qr(D)===A||A!==_t&&rl(M,x,D))&&("**"===D.path||Bl(M,D,x).matched)}function Ua(D,M,x){return 0===M.length&&!D.children[x]}const ol=!1;class fs{constructor(M){this.segmentGroup=M||null}}class sl{constructor(M){this.urlTree=M}}function aa(D){return(0,Pe._)(new fs(D))}function Cr(D){return(0,Pe._)(new sl(D))}class ki{constructor(M,x,A,z,Q){this.injector=M,this.configLoader=x,this.urlSerializer=A,this.urlTree=z,this.config=Q,this.allowRedirects=!0}apply(){const M=Wo(this.urlTree.root,[],[],this.config).segmentGroup,x=new It(M.segments,M.children);return this.expandSegmentGroup(this.injector,this.config,x,_t).pipe((0,ze.U)(Q=>this.createUrlTree(Ae(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Mt.K)(Q=>{if(Q instanceof sl)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof fs?this.noMatchError(Q):Q}))}match(M){return this.expandSegmentGroup(this.injector,this.config,M.root,_t).pipe((0,ze.U)(z=>this.createUrlTree(Ae(z),M.queryParams,M.fragment))).pipe((0,Mt.K)(z=>{throw z instanceof fs?this.noMatchError(z):z}))}noMatchError(M){return new o.vHH(4002,ol)}createUrlTree(M,x,A){const z=Ie(M);return new ht(z,x,A)}expandSegmentGroup(M,x,A,z){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(M,x,A).pipe((0,ze.U)(Q=>new It([],Q))):this.expandSegment(M,A,x,A.segments,z,!0)}expandChildren(M,x,A){const z=[];for(const Q of Object.keys(A.children))"primary"===Q?z.unshift(Q):z.push(Q);return(0,V.D)(z).pipe((0,Be.b)(Q=>{const K=A.children[Q],ye=ko(x,Q);return this.expandSegmentGroup(M,ye,K,Q).pipe((0,ze.U)(Oe=>({segment:Oe,outlet:Q})))}),ln((Q,K)=>(Q[K.outlet]=K.segment,Q),{}),sr())}expandSegment(M,x,A,z,Q,K){return(0,V.D)(A).pipe((0,Be.b)(ye=>this.expandSegmentAgainstRoute(M,x,A,ye,z,Q,K).pipe((0,Mt.K)(et=>{if(et instanceof fs)return(0,t.of)(null);throw et}))),(0,Ne.P)(ye=>!!ye),(0,Mt.K)((ye,Oe)=>{if(tr(ye))return Ua(x,z,Q)?(0,t.of)(new It([],{})):aa(x);throw ye}))}expandSegmentAgainstRoute(M,x,A,z,Q,K,ye){return Dl(z,x,Q,K)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(M,x,z,Q,K):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,x,A,z,Q,K):aa(x):aa(x)}expandSegmentAgainstRouteUsingRedirect(M,x,A,z,Q,K){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,A,z,K):this.expandRegularSegmentAgainstRouteUsingRedirect(M,x,A,z,Q,K)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,x,A,z){const Q=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Cr(Q):this.lineralizeSegments(A,Q).pipe((0,Fe.z)(K=>{const ye=new It(K,{});return this.expandSegment(M,ye,x,K,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,x,A,z,Q,K){const{matched:ye,consumedSegments:Oe,remainingSegments:et,positionalParamSegments:ut}=Bl(x,z,Q);if(!ye)return aa(x);const ct=this.applyRedirectCommands(Oe,z.redirectTo,ut);return z.redirectTo.startsWith("/")?Cr(ct):this.lineralizeSegments(z,ct).pipe((0,Fe.z)(vt=>this.expandSegment(M,x,A,vt.concat(et),K,!1)))}matchSegmentAgainstRoute(M,x,A,z,Q){return"**"===A.path?(M=Uo(A,M),A.loadChildren?(A._loadedRoutes?(0,t.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(M,A)).pipe((0,ze.U)(ye=>(A._loadedRoutes=ye.routes,A._loadedInjector=ye.injector,new It(z,{})))):(0,t.of)(new It(z,{}))):nl(x,A,z,M).pipe((0,Qe.w)(({matched:K,consumedSegments:ye,remainingSegments:Oe})=>K?this.getChildConfig(M=A._injector??M,A,z).pipe((0,Fe.z)(ut=>{const ct=ut.injector??M,vt=ut.routes,{segmentGroup:Ft,slicedSegments:rn}=Wo(x,ye,Oe,vt),Qt=new It(Ft.segments,Ft.children);if(0===rn.length&&Qt.hasChildren())return this.expandChildren(ct,vt,Qt).pipe((0,ze.U)(Vn=>new It(ye,Vn)));if(0===vt.length&&0===rn.length)return(0,t.of)(new It(ye,{}));const pn=qr(A)===Q;return this.expandSegment(ct,Qt,vt,rn,pn?_t:Q,!0).pipe((0,ze.U)(Nn=>new It(ye.concat(Nn.segments),Nn.children)))})):aa(x)))}getChildConfig(M,x,A){return x.children?(0,t.of)({routes:x.children,injector:M}):x.loadChildren?void 0!==x._loadedRoutes?(0,t.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):function Ws(D,M,x,A){const z=M.canLoad;if(void 0===z||0===z.length)return(0,t.of)(!0);const Q=z.map(K=>{const ye=Fs(K,D);return Xt(function re(D){return D&&za(D.canLoad)}(ye)?ye.canLoad(M,x):D.runInContext(()=>ye(M,x)))});return(0,t.of)(Q).pipe(Ss(),Ks())}(M,x,A).pipe((0,Fe.z)(z=>z?this.configLoader.loadChildren(M,x).pipe((0,it.b)(Q=>{x._loadedRoutes=Q.routes,x._loadedInjector=Q.injector})):function El(D){return(0,Pe._)(Xl(ol,3))}())):(0,t.of)({routes:[],injector:M})}lineralizeSegments(M,x){let A=[],z=x.root;for(;;){if(A=A.concat(z.segments),0===z.numberOfChildren)return(0,t.of)(A);if(z.numberOfChildren>1||!z.children[_t])return(0,Pe._)(new o.vHH(4e3,ol));z=z.children[_t]}}applyRedirectCommands(M,x,A){return this.applyRedirectCreateUrlTree(x,this.urlSerializer.parse(x),M,A)}applyRedirectCreateUrlTree(M,x,A,z){const Q=this.createSegmentGroup(M,x.root,A,z);return new ht(Q,this.createQueryParams(x.queryParams,this.urlTree.queryParams),x.fragment)}createQueryParams(M,x){const A={};return zt(M,(z,Q)=>{if("string"==typeof z&&z.startsWith(":")){const ye=z.substring(1);A[Q]=x[ye]}else A[Q]=z}),A}createSegmentGroup(M,x,A,z){const Q=this.createSegments(M,x.segments,A,z);let K={};return zt(x.children,(ye,Oe)=>{K[Oe]=this.createSegmentGroup(M,ye,A,z)}),new It(Q,K)}createSegments(M,x,A,z){return x.map(Q=>Q.path.startsWith(":")?this.findPosParam(M,Q,z):this.findOrReturn(Q,A))}findPosParam(M,x,A){const z=A[x.path.substring(1)];if(!z)throw new o.vHH(4001,ol);return z}findOrReturn(M,x){let A=0;for(const z of x){if(z.path===M.path)return x.splice(A),z;A++}return M}}class zl{}class Nu{constructor(M,x,A,z,Q,K,ye){this.injector=M,this.rootComponentType=x,this.config=A,this.urlTree=z,this.url=Q,this.paramsInheritanceStrategy=K,this.urlSerializer=ye}recognize(){const M=Wo(this.urlTree.root,[],[],this.config.filter(x=>void 0===x.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,M,_t).pipe((0,ze.U)(x=>{if(null===x)return null;const A=new uo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_t,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new Io(A,x),Q=new Oo(this.url,z);return this.inheritParamsAndData(Q._root),Q}))}inheritParamsAndData(M){const x=M.value,A=yo(x,this.paramsInheritanceStrategy);x.params=Object.freeze(A.params),x.data=Object.freeze(A.data),M.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(M,x,A,z){return 0===A.segments.length&&A.hasChildren()?this.processChildren(M,x,A):this.processSegment(M,x,A,A.segments,z)}processChildren(M,x,A){return(0,V.D)(Object.keys(A.children)).pipe((0,Be.b)(z=>{const Q=A.children[z],K=ko(x,z);return this.processSegmentGroup(M,K,Q,z)}),ln((z,Q)=>z&&Q?(z.push(...Q),z):null),function Ji(D,M=!1){return(0,St.e)((x,A)=>{let z=0;x.subscribe((0,Kt.x)(A,Q=>{const K=D(Q,z++);(K||M)&&A.next(Q),!K&&A.complete()}))})}(z=>null!==z),(0,Yr.d)(null),sr(),(0,ze.U)(z=>{if(null===z)return null;const Q=wa(z);return function As(D){D.sort((M,x)=>M.value.outlet===_t?-1:x.value.outlet===_t?1:M.value.outlet.localeCompare(x.value.outlet))}(Q),Q}))}processSegment(M,x,A,z,Q){return(0,V.D)(x).pipe((0,Be.b)(K=>this.processSegmentAgainstRoute(K._injector??M,K,A,z,Q)),(0,Ne.P)(K=>!!K),(0,Mt.K)(K=>{if(tr(K))return Ua(A,z,Q)?(0,t.of)([]):(0,t.of)(null);throw K}))}processSegmentAgainstRoute(M,x,A,z,Q){if(x.redirectTo||!Dl(x,A,z,Q))return(0,t.of)(null);let K;if("**"===x.path){const ye=z.length>0?Zt(z).parameters:{},Oe=Z(A)+z.length,et=new uo(z,ye,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G(x),qr(x),x.component??x._loadedComponent??null,x,ho(A),Oe,be(x));K=(0,t.of)({snapshot:et,consumedSegments:[],remainingSegments:[]})}else K=nl(A,x,z,M).pipe((0,ze.U)(({matched:ye,consumedSegments:Oe,remainingSegments:et,parameters:ut})=>{if(!ye)return null;const ct=Z(A)+Oe.length;return{snapshot:new uo(Oe,ut,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G(x),qr(x),x.component??x._loadedComponent??null,x,ho(A),ct,be(x)),consumedSegments:Oe,remainingSegments:et}}));return K.pipe((0,Qe.w)(ye=>{if(null===ye)return(0,t.of)(null);const{snapshot:Oe,consumedSegments:et,remainingSegments:ut}=ye;M=x._injector??M;const ct=x._loadedInjector??M,vt=function xa(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(x),{segmentGroup:Ft,slicedSegments:rn}=Wo(A,et,ut,vt.filter(pn=>void 0===pn.redirectTo));if(0===rn.length&&Ft.hasChildren())return this.processChildren(ct,vt,Ft).pipe((0,ze.U)(pn=>null===pn?null:[new Io(Oe,pn)]));if(0===vt.length&&0===rn.length)return(0,t.of)([new Io(Oe,[])]);const Qt=qr(x)===Q;return this.processSegment(ct,vt,Ft,rn,Qt?_t:Q).pipe((0,ze.U)(pn=>null===pn?null:[new Io(Oe,pn)]))}))}}function Ur(D){const M=D.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function wa(D){const M=[],x=new Set;for(const A of D){if(!Ur(A)){M.push(A);continue}const z=M.find(Q=>A.value.routeConfig===Q.value.routeConfig);void 0!==z?(z.children.push(...A.children),x.add(z)):M.push(A)}for(const A of x){const z=wa(A.children);M.push(new Io(A.value,z))}return M.filter(A=>!x.has(A))}function ho(D){let M=D;for(;M._sourceSegment;)M=M._sourceSegment;return M}function Z(D){let M=D,x=M._segmentIndexShift??0;for(;M._sourceSegment;)M=M._sourceSegment,x+=M._segmentIndexShift??0;return x-1}function G(D){return D.data||{}}function be(D){return D.resolve||{}}function Wi(D){return"string"==typeof D.title||null===D.title}function bi(D){return(0,Qe.w)(M=>{const x=D(M);return x?(0,V.D)(x).pipe((0,ze.U)(()=>M)):(0,t.of)(M)})}const nr=new o.OlP("ROUTES");let Ls=(()=>{class D{constructor(x,A){this.injector=x,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(x){if(this.componentLoaders.get(x))return this.componentLoaders.get(x);if(x._loadedComponent)return(0,t.of)(x._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(x);const A=Xt(x.loadComponent()).pipe((0,ze.U)(bo),(0,it.b)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(x),x._loadedComponent=Q}),at(()=>{this.componentLoaders.delete(x)})),z=new je.c(A,()=>new ke.x).pipe((0,Pt.x)());return this.componentLoaders.set(x,z),z}loadChildren(x,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,t.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const Q=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,ze.U)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(A);let Oe,et,ut=!1;Array.isArray(ye)?et=ye:(Oe=ye.create(x).injector,et=Hn(Oe.get(nr,[],o.XFs.Self|o.XFs.Optional)));return{routes:et.map(jo),injector:Oe}}),at(()=>{this.childrenLoaders.delete(A)})),K=new je.c(Q,()=>new ke.x).pipe((0,Pt.x)());return this.childrenLoaders.set(A,K),K}loadModuleFactoryOrRoutes(x){return Xt(x()).pipe((0,ze.U)(bo),(0,Fe.z)(z=>z instanceof o.YKP||Array.isArray(z)?(0,t.of)(z):(0,V.D)(this.compiler.compileModuleAsync(z))))}}return D.\u0275fac=function(x){return new(x||D)(o.LFG(o.zs3),o.LFG(o.Sil))},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function bo(D){return function Bs(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Sr=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ke.x,this.configLoader=(0,o.f3M)(Ls),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(di),this.rootContexts=(0,o.f3M)(Po),this.navigationId=0,this.afterPreactivation=()=>(0,t.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new ls(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new Kr(z))}complete(){this.transitions?.complete()}handleNavigationRequest(x){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...x,id:A})}setupNavigations(x){return this.transitions=new ie.X({id:0,targetPageId:0,currentUrlTree:x.currentUrlTree,currentRawUrl:x.currentUrlTree,extractedUrl:x.urlHandlingStrategy.extract(x.currentUrlTree),urlAfterRedirects:x.urlHandlingStrategy.extract(x.currentUrlTree),rawUrl:x.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cn,restoredState:null,currentSnapshot:x.routerState.snapshot,targetSnapshot:null,currentRouterState:x.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ve.h)(A=>0!==A.id),(0,ze.U)(A=>({...A,extractedUrl:x.urlHandlingStrategy.extract(A.rawUrl)})),(0,Qe.w)(A=>{let z=!1,Q=!1;return(0,t.of)(A).pipe((0,it.b)(K=>{this.currentNavigation={id:K.id,initialUrl:K.rawUrl,extractedUrl:K.extractedUrl,trigger:K.source,extras:K.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Qe.w)(K=>{const ye=x.browserUrlTree.toString(),Oe=!x.navigated||K.extractedUrl.toString()!==ye||ye!==x.currentUrlTree.toString();if(!Oe&&"reload"!==(K.extras.onSameUrlNavigation??x.onSameUrlNavigation)){const ut="";return this.events.next(new gi(K.id,x.serializeUrl(A.rawUrl),ut,0)),x.rawUrlTree=K.rawUrl,K.resolve(null),Ye.E}if(x.urlHandlingStrategy.shouldProcessUrl(K.rawUrl))return ja(K.source)&&(x.browserUrlTree=K.extractedUrl),(0,t.of)(K).pipe((0,Qe.w)(ut=>{const ct=this.transitions?.getValue();return this.events.next(new vi(ut.id,this.urlSerializer.serialize(ut.extractedUrl),ut.source,ut.restoredState)),ct!==this.transitions?.getValue()?Ye.E:Promise.resolve(ut)}),function yr(D,M,x,A){return(0,Qe.w)(z=>function ba(D,M,x,A,z){return new ki(D,M,x,A,z).apply()}(D,M,x,z.extractedUrl,A).pipe((0,ze.U)(Q=>({...z,urlAfterRedirects:Q}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,x.config),(0,it.b)(ut=>{this.currentNavigation={...this.currentNavigation,finalUrl:ut.urlAfterRedirects},A.urlAfterRedirects=ut.urlAfterRedirects}),function We(D,M,x,A,z){return(0,Fe.z)(Q=>function mc(D,M,x,A,z,Q,K="emptyOnly"){return new Nu(D,M,x,A,z,K,Q).recognize().pipe((0,Qe.w)(ye=>null===ye?function al(D){return new Se.y(M=>M.error(D))}(new zl):(0,t.of)(ye)))}(D,M,x,Q.urlAfterRedirects,A.serialize(Q.urlAfterRedirects),A,z).pipe((0,ze.U)(K=>({...Q,targetSnapshot:K}))))}(this.environmentInjector,this.rootComponentType,x.config,this.urlSerializer,x.paramsInheritanceStrategy),(0,it.b)(ut=>{if(A.targetSnapshot=ut.targetSnapshot,"eager"===x.urlUpdateStrategy){if(!ut.extras.skipLocationChange){const vt=x.urlHandlingStrategy.merge(ut.urlAfterRedirects,ut.rawUrl);x.setBrowserUrl(vt,ut)}x.browserUrlTree=ut.urlAfterRedirects}const ct=new Ui(ut.id,this.urlSerializer.serialize(ut.extractedUrl),this.urlSerializer.serialize(ut.urlAfterRedirects),ut.targetSnapshot);this.events.next(ct)}));if(Oe&&x.urlHandlingStrategy.shouldProcessUrl(x.rawUrlTree)){const{id:ut,extractedUrl:ct,source:vt,restoredState:Ft,extras:rn}=K,Qt=new vi(ut,this.urlSerializer.serialize(ct),vt,Ft);this.events.next(Qt);const pn=Fr(ct,this.rootComponentType).snapshot;return A={...K,targetSnapshot:pn,urlAfterRedirects:ct,extras:{...rn,skipLocationChange:!1,replaceUrl:!1}},(0,t.of)(A)}{const ut="";return this.events.next(new gi(K.id,x.serializeUrl(A.extractedUrl),ut,1)),x.rawUrlTree=K.rawUrl,K.resolve(null),Ye.E}}),(0,it.b)(K=>{const ye=new ka(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot);this.events.next(ye)}),(0,ze.U)(K=>A={...K,guards:ts(K.targetSnapshot,K.currentSnapshot,this.rootContexts)}),function Xa(D,M){return(0,Fe.z)(x=>{const{targetSnapshot:A,currentSnapshot:z,guards:{canActivateChecks:Q,canDeactivateChecks:K}}=x;return 0===K.length&&0===Q.length?(0,t.of)({...x,guardsResult:!0}):function on(D,M,x,A){return(0,V.D)(D).pipe((0,Fe.z)(z=>function el(D,M,x,A,z){const Q=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,t.of)(!0);const K=Q.map(ye=>{const Oe=Ba(M)??z,et=Fs(ye,Oe);return Xt(function Te(D){return D&&za(D.canDeactivate)}(et)?et.canDeactivate(D,M,x,A):Oe.runInContext(()=>et(D,M,x,A))).pipe((0,Ne.P)())});return(0,t.of)(K).pipe(Ss())}(z.component,z.route,x,M,A)),(0,Ne.P)(z=>!0!==z,!0))}(K,A,z,D).pipe((0,Fe.z)(ye=>ye&&function ds(D){return"boolean"==typeof D}(ye)?function Pi(D,M,x,A){return(0,V.D)(M).pipe((0,Be.b)(z=>(0,U.z)(function Ys(D,M){return null!==D&&M&&M(new kr(D)),(0,t.of)(!0)}(z.route.parent,A),function Yi(D,M){return null!==D&&M&&M(new ra(D)),(0,t.of)(!0)}(z.route,A),function $c(D,M,x){const A=M[M.length-1],Q=M.slice(0,M.length-1).reverse().map(K=>function fc(D){const M=D.routeConfig?D.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:D,guards:M}:null}(K)).filter(K=>null!==K).map(K=>(0,we.P)(()=>{const ye=K.guards.map(Oe=>{const et=Ba(K.node)??x,ut=Fs(Oe,et);return Xt(function Y(D){return D&&za(D.canActivateChild)}(ut)?ut.canActivateChild(A,D):et.runInContext(()=>ut(A,D))).pipe((0,Ne.P)())});return(0,t.of)(ye).pipe(Ss())}));return(0,t.of)(Q).pipe(Ss())}(D,z.path,x),function Vr(D,M,x){const A=M.routeConfig?M.routeConfig.canActivate:null;if(!A||0===A.length)return(0,t.of)(!0);const z=A.map(Q=>(0,we.P)(()=>{const K=Ba(M)??x,ye=Fs(Q,K);return Xt(function ne(D){return D&&za(D.canActivate)}(ye)?ye.canActivate(M,D):K.runInContext(()=>ye(M,D))).pipe((0,Ne.P)())}));return(0,t.of)(z).pipe(Ss())}(D,z.route,x))),(0,Ne.P)(z=>!0!==z,!0))}(A,Q,D,M):(0,t.of)(ye)),(0,ze.U)(ye=>({...x,guardsResult:ye})))})}(this.environmentInjector,K=>this.events.next(K)),(0,it.b)(K=>{if(A.guardsResult=K.guardsResult,qe(K.guardsResult))throw ji(0,K.guardsResult);const ye=new go(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(K.urlAfterRedirects),K.targetSnapshot,!!K.guardsResult);this.events.next(ye)}),(0,Ve.h)(K=>!!K.guardsResult||(x.restoreHistory(K),this.cancelNavigationTransition(K,"",3),!1)),bi(K=>{if(K.guards.canActivateChecks.length)return(0,t.of)(K).pipe((0,it.b)(ye=>{const Oe=new Ci(ye.id,this.urlSerializer.serialize(ye.extractedUrl),this.urlSerializer.serialize(ye.urlAfterRedirects),ye.targetSnapshot);this.events.next(Oe)}),(0,Qe.w)(ye=>{let Oe=!1;return(0,t.of)(ye).pipe(function Tt(D,M){return(0,Fe.z)(x=>{const{targetSnapshot:A,guards:{canActivateChecks:z}}=x;if(!z.length)return(0,t.of)(x);let Q=0;return(0,V.D)(z).pipe((0,Be.b)(K=>function Yt(D,M,x,A){const z=D.routeConfig,Q=D._resolve;return void 0!==z?.title&&!Wi(z)&&(Q[Ot]=z.title),function Dn(D,M,x,A){const z=function cr(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===z.length)return(0,t.of)({});const Q={};return(0,V.D)(z).pipe((0,Fe.z)(K=>function Wt(D,M,x,A){const z=Ba(M)??A,Q=Fs(D,z);return Xt(Q.resolve?Q.resolve(M,x):z.runInContext(()=>Q(M,x)))}(D[K],M,x,A).pipe((0,Ne.P)(),(0,it.b)(ye=>{Q[K]=ye}))),jn(1),(0,bt.h)(Q),(0,Mt.K)(K=>tr(K)?Ye.E:(0,Pe._)(K)))}(Q,D,M,A).pipe((0,ze.U)(K=>(D._resolvedData=K,D.data=yo(D,x).resolve,z&&Wi(z)&&(D.data[Ot]=z.title),null)))}(K.route,A,D,M)),(0,it.b)(()=>Q++),jn(1),(0,Fe.z)(K=>Q===z.length?(0,t.of)(x):Ye.E))})}(x.paramsInheritanceStrategy,this.environmentInjector),(0,it.b)({next:()=>Oe=!0,complete:()=>{Oe||(x.restoreHistory(ye),this.cancelNavigationTransition(ye,"",2))}}))}),(0,it.b)(ye=>{const Oe=new ws(ye.id,this.urlSerializer.serialize(ye.extractedUrl),this.urlSerializer.serialize(ye.urlAfterRedirects),ye.targetSnapshot);this.events.next(Oe)}))}),bi(K=>{const ye=Oe=>{const et=[];Oe.routeConfig?.loadComponent&&!Oe.routeConfig._loadedComponent&&et.push(this.configLoader.loadComponent(Oe.routeConfig).pipe((0,it.b)(ut=>{Oe.component=ut}),(0,ze.U)(()=>{})));for(const ut of Oe.children)et.push(...ye(ut));return et};return(0,le.a)(ye(K.targetSnapshot.root)).pipe((0,Yr.d)(),(0,lt.q)(1))}),bi(()=>this.afterPreactivation()),(0,ze.U)(K=>{const ye=function Gc(D,M,x){const A=es(D,M._root,x?x._root:void 0);return new _o(A,M)}(x.routeReuseStrategy,K.targetSnapshot,K.currentRouterState);return A={...K,targetRouterState:ye}}),(0,it.b)(K=>{x.currentUrlTree=K.urlAfterRedirects,x.rawUrlTree=x.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl),x.routerState=K.targetRouterState,"deferred"===x.urlUpdateStrategy&&(K.extras.skipLocationChange||x.setBrowserUrl(x.rawUrlTree,K),x.browserUrlTree=K.urlAfterRedirects)}),((D,M,x)=>(0,ze.U)(A=>(new Hr(M,A.targetRouterState,A.currentRouterState,x).activate(D),A)))(this.rootContexts,x.routeReuseStrategy,K=>this.events.next(K)),(0,it.b)({next:K=>{z=!0,this.lastSuccessfulNavigation=this.currentNavigation,x.navigated=!0,this.events.next(new Oi(K.id,this.urlSerializer.serialize(K.extractedUrl),this.urlSerializer.serialize(x.currentUrlTree))),x.titleStrategy?.updateTitle(K.targetRouterState.snapshot),K.resolve(!0)},complete:()=>{z=!0}}),at(()=>{z||Q||this.cancelNavigationTransition(A,"",1),this.currentNavigation?.id===A.id&&(this.currentNavigation=null)}),(0,Mt.K)(K=>{if(Q=!0,Na(K)){Fl(K)||(x.navigated=!0,x.restoreHistory(A,!0));const ye=new xr(A.id,this.urlSerializer.serialize(A.extractedUrl),K.message,K.cancellationCode);if(this.events.next(ye),Fl(K)){const Oe=x.urlHandlingStrategy.merge(K.url,x.rawUrlTree),et={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===x.urlUpdateStrategy||ja(A.source)};x.scheduleNavigation(Oe,cn,null,et,{resolve:A.resolve,reject:A.reject,promise:A.promise})}else A.resolve(!1)}else{x.restoreHistory(A,!0);const ye=new mo(A.id,this.urlSerializer.serialize(A.extractedUrl),K,A.targetSnapshot??void 0);this.events.next(ye);try{A.resolve(x.errorHandler(K))}catch(Oe){A.reject(Oe)}}return Ye.E}))}))}cancelNavigationTransition(x,A,z){const Q=new xr(x.id,this.urlSerializer.serialize(x.extractedUrl),A,z);this.events.next(Q),x.resolve(!1)}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ja(D){return D!==cn}let Vl=(()=>{class D{buildTitle(x){let A,z=x.root;for(;void 0!==z;)A=this.getResolvedTitleForRoute(z)??A,z=z.children.find(Q=>Q.outlet===_t);return A}getResolvedTitleForRoute(x){return x.data[Ot]}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:function(){return(0,o.f3M)(Tl)},providedIn:"root"}),D})(),Tl=(()=>{class D extends Vl{constructor(x){super(),this.title=x}updateTitle(x){const A=this.buildTitle(x);void 0!==A&&this.title.setTitle(A)}}return D.\u0275fac=function(x){return new(x||D)(o.LFG(qt.Dx))},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),is=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:function(){return(0,o.f3M)(_i)},providedIn:"root"}),D})();class zs{shouldDetach(M){return!1}store(M,x){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,x){return M.routeConfig===x.routeConfig}}let _i=(()=>{class D extends zs{}return D.\u0275fac=function(){let M;return function(A){return(M||(M=o.n5z(D)))(A||D)}}(),D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Ko=new o.OlP("",{providedIn:"root",factory:()=>({})});let Fo=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:function(){return(0,o.f3M)(Ca)},providedIn:"root"}),D})(),Ca=(()=>{class D{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,A){return x}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ca(D){throw D}function Jo(D,M,x){return M.parse("/")}const Pc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _n=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(Ko,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ca,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Jo,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(Fo),this.routeReuseStrategy=(0,o.f3M)(is),this.urlCreationStrategy=(0,o.f3M)(vl),this.titleStrategy=(0,o.f3M)(Vl),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Hn((0,o.f3M)(nr,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(Sr),this.urlSerializer=(0,o.f3M)(di),this.location=(0,o.f3M)(De.Ye),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ht,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Fr(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(x=>{this.lastSuccessfulId=x.id,this.currentPageId=x.targetPageId},x=>{this.console.warn(`Unhandled Navigation Error: ${x}`)})}resetRootComponentType(x){this.routerState.root.component=x,this.navigationTransitions.rootComponentType=x}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const x=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cn,x)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(x=>{const A="popstate"===x.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(x.url,A,x.state)},0)}))}navigateToSyncWithBrowser(x,A,z){const Q={replaceUrl:!0},K=z?.navigationId?z:null;if(z){const Oe={...z};delete Oe.navigationId,delete Oe.\u0275routerPageId,0!==Object.keys(Oe).length&&(Q.state=Oe)}const ye=this.parseUrl(x);this.scheduleNavigation(ye,A,K,Q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(x){this.config=x.map(jo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(x,A={}){const{relativeTo:z,queryParams:Q,fragment:K,queryParamsHandling:ye,preserveFragment:Oe}=A,et=Oe?this.currentUrlTree.fragment:K;let ut=null;switch(ye){case"merge":ut={...this.currentUrlTree.queryParams,...Q};break;case"preserve":ut=this.currentUrlTree.queryParams;break;default:ut=Q||null}return null!==ut&&(ut=this.removeEmptyProps(ut)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,x,ut,et??null)}navigateByUrl(x,A={skipLocationChange:!1}){const z=qe(x)?x:this.parseUrl(x),Q=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(Q,cn,null,A)}navigate(x,A={skipLocationChange:!1}){return function ec(D){for(let M=0;M<D.length;M++){if(null==D[M])throw new o.vHH(4008,!1)}}(x),this.navigateByUrl(this.createUrlTree(x,A),A)}serializeUrl(x){return this.urlSerializer.serialize(x)}parseUrl(x){let A;try{A=this.urlSerializer.parse(x)}catch(z){A=this.malformedUriErrorHandler(z,this.urlSerializer,x)}return A}isActive(x,A){let z;if(z=!0===A?{...Pc}:!1===A?{...Sn}:A,qe(x))return qi(this.currentUrlTree,x,z);const Q=this.parseUrl(x);return qi(this.currentUrlTree,Q,z)}removeEmptyProps(x){return Object.keys(x).reduce((A,z)=>{const Q=x[z];return null!=Q&&(A[z]=Q),A},{})}scheduleNavigation(x,A,z,Q,K){if(this.disposed)return Promise.resolve(!1);let ye,Oe,et,ut;return K?(ye=K.resolve,Oe=K.reject,et=K.promise):et=new Promise((ct,vt)=>{ye=ct,Oe=vt}),ut="computed"===this.canceledNavigationResolution?z&&z.\u0275routerPageId?z.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:ut,source:A,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:x,extras:Q,resolve:ye,reject:Oe,promise:et,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),et.catch(ct=>Promise.reject(ct))}setBrowserUrl(x,A){const z=this.urlSerializer.serialize(x),Q={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(z)||A.extras.replaceUrl?this.location.replaceState(z,"",Q):this.location.go(z,"",Q)}restoreHistory(x,A=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-x.targetPageId;"popstate"!==x.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===z?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(x),this.browserUrlTree=x.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(z)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(x),this.resetUrlToCurrentUrlTree())}resetState(x){this.routerState=x.currentRouterState,this.currentUrlTree=x.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,x.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(x,A){return"computed"===this.canceledNavigationResolution?{navigationId:x,\u0275routerPageId:A}:{navigationId:x}}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),xo=(()=>{class D{constructor(x,A,z,Q,K,ye){this.router=x,this.route=A,this.tabIndexAttribute=z,this.renderer=Q,this.el=K,this.locationStrategy=ye,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ke.x;const Oe=K.nativeElement.tagName;this.isAnchorElement="A"===Oe||"AREA"===Oe,this.isAnchorElement?this.subscription=x.events.subscribe(et=>{et instanceof Oi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(x){this._preserveFragment=(0,o.D6c)(x)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(x){this._skipLocationChange=(0,o.D6c)(x)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(x){this._replaceUrl=(0,o.D6c)(x)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(x){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",x)}ngOnChanges(x){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(x){null!=x?(this.commands=Array.isArray(x)?x:[x],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(x,A,z,Q,K){return!!(null===this.urlTree||this.isAnchorElement&&(0!==x||A||z||Q||K||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const x=null===this.href?null:(0,o.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",x)}applyAttributeValue(x,A){const z=this.renderer,Q=this.el.nativeElement;null!==A?z.setAttribute(Q,x,A):z.removeAttribute(Q,x)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(x){return new(x||D)(o.Y36(_n),o.Y36(Ao),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(De.S$))},D.\u0275dir=o.lG2({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,A){1&x&&o.NdJ("click",function(Q){return A.onClick(Q.button,Q.ctrlKey,Q.shiftKey,Q.altKey,Q.metaKey)}),2&x&&o.uIk("target",A.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),D})(),Js=(()=>{class D{get isActive(){return this._isActive}constructor(x,A,z,Q,K){this.router=x,this.element=A,this.renderer=z,this.cdr=Q,this.link=K,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new o.vpe,this.routerEventsSubscription=x.events.subscribe(ye=>{ye instanceof Oi&&this.update()})}ngAfterContentInit(){(0,t.of)(this.links.changes,(0,t.of)(null)).pipe((0,Vt.J)()).subscribe(x=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const x=[...this.links.toArray(),this.link].filter(A=>!!A).map(A=>A.onChanges);this.linkInputChangesSubscription=(0,V.D)(x).pipe((0,Vt.J)()).subscribe(A=>{this._isActive!==this.isLinkActive(this.router)(A)&&this.update()})}set routerLinkActive(x){const A=Array.isArray(x)?x:x.split(" ");this.classes=A.filter(z=>!!z)}ngOnChanges(x){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const x=this.hasActiveLinks();this._isActive!==x&&(this._isActive=x,this.cdr.markForCheck(),this.classes.forEach(A=>{x?this.renderer.addClass(this.element.nativeElement,A):this.renderer.removeClass(this.element.nativeElement,A)}),x&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(x))})}isLinkActive(x){const A=function Ho(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&x.isActive(z.urlTree,A)}hasActiveLinks(){const x=this.isLinkActive(this.router);return this.link&&x(this.link)||this.links.some(x)}}return D.\u0275fac=function(x){return new(x||D)(o.Y36(_n),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(xo,8))},D.\u0275dir=o.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(x,A,z){if(1&x&&o.Suo(z,xo,5),2&x){let Q;o.iGM(Q=o.CRH())&&(A.links=Q)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[o.TTD]}),D})();class ua{}let ur=(()=>{class D{constructor(x,A,z,Q,K){this.router=x,this.injector=z,this.preloadingStrategy=Q,this.loader=K}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ve.h)(x=>x instanceof Oi),(0,Be.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(x,A){const z=[];for(const Q of A){Q.providers&&!Q._injector&&(Q._injector=(0,o.MMx)(Q.providers,x,`Route: ${Q.path}`));const K=Q._injector??x,ye=Q._loadedInjector??K;Q.loadChildren&&!Q._loadedRoutes&&void 0===Q.canLoad||Q.loadComponent&&!Q._loadedComponent?z.push(this.preloadConfig(K,Q)):(Q.children||Q._loadedRoutes)&&z.push(this.processRoutes(ye,Q.children??Q._loadedRoutes))}return(0,V.D)(z).pipe((0,Vt.J)())}preloadConfig(x,A){return this.preloadingStrategy.preload(A,()=>{let z;z=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(x,A):(0,t.of)(null);const Q=z.pipe((0,Fe.z)(K=>null===K?(0,t.of)(void 0):(A._loadedRoutes=K.routes,A._loadedInjector=K.injector,this.processRoutes(K.injector??x,K.routes))));if(A.loadComponent&&!A._loadedComponent){const K=this.loader.loadComponent(A);return(0,V.D)([Q,K]).pipe((0,Vt.J)())}return Q})}}return D.\u0275fac=function(x){return new(x||D)(o.LFG(_n),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(ua),o.LFG(Ls))},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const wo=new o.OlP("");let Zc=(()=>{class D{constructor(x,A,z,Q,K={}){this.urlSerializer=x,this.transitions=A,this.viewportScroller=z,this.zone=Q,this.options=K,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},K.scrollPositionRestoration=K.scrollPositionRestoration||"disabled",K.anchorScrolling=K.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof vi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=x.navigationTrigger,this.restoredId=x.restoredState?x.restoredState.navigationId:0):x instanceof Oi&&(this.lastId=x.id,this.scheduleScrollEvent(x,this.urlSerializer.parse(x.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof zr&&(x.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(x.position):x.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(x.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(x,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zr(x,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return D.\u0275fac=function(x){o.$Z()},D.\u0275prov=o.Yz7({token:D,factory:D.\u0275fac}),D})();function Gr(D,M){return{\u0275kind:D,\u0275providers:M}}function tc(){const D=(0,o.f3M)(o.zs3);return M=>{const x=D.get(o.z2F);if(M!==x.components[0])return;const A=D.get(_n),z=D.get(_c);1===D.get(Hl)&&A.initialNavigation(),D.get(qs,null,o.XFs.Optional)?.setUpPreloading(),D.get(wo,null,o.XFs.Optional)?.init(),A.resetRootComponentType(x.componentTypes[0]),z.closed||(z.next(),z.unsubscribe())}}const _c=new o.OlP("",{factory:()=>new ke.x}),Hl=new o.OlP("",{providedIn:"root",factory:()=>1});const qs=new o.OlP("");function Ml(D){return Gr(0,[{provide:qs,useExisting:ur},{provide:ua,useExisting:D}])}const Yc=new o.OlP("ROUTER_FORROOT_GUARD"),vr=[De.Ye,{provide:di,useClass:fi},_n,Po,{provide:Ao,useFactory:function Os(D){return D.routerState.root},deps:[_n]},Ls,[]];function l(){return new o.PXZ("Router",_n)}let d=(()=>{class D{constructor(x){}static forRoot(x,A){return{ngModule:D,providers:[vr,[],{provide:nr,multi:!0,useValue:x},{provide:Yc,useFactory:O,deps:[[_n,new o.FiY,new o.tp0]]},{provide:Ko,useValue:A||{}},A?.useHash?{provide:De.S$,useClass:De.Do}:{provide:De.S$,useClass:De.b0},{provide:wo,useFactory:()=>{const D=(0,o.f3M)(De.EM),M=(0,o.f3M)(o.R0b),x=(0,o.f3M)(Ko),A=(0,o.f3M)(Sr),z=(0,o.f3M)(di);return x.scrollOffset&&D.setOffset(x.scrollOffset),new Zc(z,A,D,M,x)}},A?.preloadingStrategy?Ml(A.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:l},A?.initialNavigation?F(A):[],[{provide:$,useFactory:tc},{provide:o.tb,multi:!0,useExisting:$}]]}}static forChild(x){return{ngModule:D,providers:[{provide:nr,multi:!0,useValue:x}]}}}return D.\u0275fac=function(x){return new(x||D)(o.LFG(Yc,8))},D.\u0275mod=o.oAB({type:D}),D.\u0275inj=o.cJS({imports:[$s]}),D})();function O(D){return"guarded"}function F(D){return["disabled"===D.initialNavigation?Gr(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const M=(0,o.f3M)(_n);return()=>{M.setUpLocationChangeListener()}}},{provide:Hl,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Gr(2,[{provide:Hl,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:M=>{const x=M.get(De.V_,Promise.resolve());return()=>x.then(()=>new Promise(z=>{const Q=M.get(_n),K=M.get(_c);(function A(z){M.get(_n).events.pipe((0,Ve.h)(K=>K instanceof Oi||K instanceof xr||K instanceof mo),(0,ze.U)(K=>K instanceof Oi||K instanceof xr&&(0===K.code||1===K.code)&&null),(0,Ve.h)(K=>null!==K),(0,lt.q)(1)).subscribe(()=>{z()})})(()=>{z(!0)}),M.get(Sr).afterPreactivation=()=>(z(!0),K.closed?(0,t.of)(void 0):K),Q.initialNavigation()}))}}]).\u0275providers:[]]}const $=new o.OlP("")},1366:(At,Le,k)=>{"use strict";k.d(Le,{Kz:()=>hu,vL:()=>M,jn:()=>Cc,qj:()=>Lr,NG:()=>nc,wf:()=>z,M:()=>Kc,jt:()=>Uu,TH:()=>Jc,Vi:()=>Vu,XC:()=>ph,iD:()=>hh,J4:()=>Sl,FF:()=>Hd,bz:()=>Qc});var o=k(1571),V=k(9751),t=k(515),ie=k(9646),te=k(7579),le=k(4968),U=k(5963),we=k(8421);const{isArray:de}=Array;function Pe(g){return 1===g.length&&de(g[0])?g[0]:g}var Se=k(5403);function Ye(...g){return 1===(g=Pe(g)).length?(0,we.Xf)(g[0]):new V.y(function je(g){return T=>{let u=[];for(let b=0;u&&!T.closed&&b<g.length;b++)u.push((0,we.Xf)(g[b]).subscribe((0,Se.x)(T,B=>{if(u){for(let ee=0;ee<u.length;ee++)ee!==b&&u[ee].unsubscribe();u=null}T.next(B)})))}}(g))}k(1135),k(9841);var ze=k(5032);new V.y(ze.Z);var tt=k(3269);function Ve(...g){const T=(0,tt.jO)(g),u=Pe(g);return u.length?new V.y(b=>{let B=u.map(()=>[]),ee=u.map(()=>!1);b.add(()=>{B=ee=null});for(let Ue=0;!b.closed&&Ue<u.length;Ue++)(0,we.Xf)(u[Ue]).subscribe((0,Se.x)(b,st=>{if(B[Ue].push(st),B.every(dt=>dt.length)){const dt=B.map(yt=>yt.shift());b.next(T?T(...dt):dt),B.some((yt,Nt)=>!yt.length&&ee[Nt])&&b.complete()}},()=>{ee[Ue]=!0,!B[Ue].length&&b.complete()}));return()=>{B=ee=null}}):t.E}var Fe=k(6451),Ne=k(7272),it=k(2722),Mt=k(9300),St=k(5698),Kt=k(4004),jn=(k(8675),k(1884),k(3900)),yn=k(8505),Yr=k(4482),Zn=k(4671);function sr(...g){const T=(0,tt.jO)(g);return(0,Yr.e)((u,b)=>{const B=g.length,ee=new Array(B);let Ue=g.map(()=>!1),st=!1;for(let dt=0;dt<B;dt++)(0,we.Xf)(g[dt]).subscribe((0,Se.x)(b,yt=>{ee[dt]=yt,!st&&!Ue[dt]&&(Ue[dt]=!0,(st=Ue.every(Zn.y))&&(Ue=null))},ze.Z));u.subscribe((0,Se.x)(b,dt=>{if(st){const yt=[dt,...ee];b.next(T?T(...yt):yt)}}))})}var Ji=k(1005),at=(k(5684),k(6895)),Pt=k(4006),Vt={left:"right",right:"left",bottom:"top",top:"bottom"};function qt(g){return g.replace(/left|right|bottom|top/g,function(T){return Vt[T]})}function _t(g){return g.split("-")[0]}var Ot={start:"end",end:"start"};function un(g){return g.replace(/start|end/g,function(T){return Ot[T]})}var Qn="top",En="bottom",gn="right",Cn="left",Kn="auto",Hn=[Qn,En,gn,Cn],Zt="start",nn="end",Xt="viewport",Ht="popper",Zi=Hn.reduce(function(g,T){return g.concat([T+"-"+Zt,T+"-"+nn])},[]),qi=[].concat(Hn,[Kn]).reduce(function(g,T){return g.concat([T,T+"-"+Zt,T+"-"+nn])},[]),xt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Gt(g){if(null==g)return window;if("[object Window]"!==g.toString()){var T=g.ownerDocument;return T&&T.defaultView||window}return g}function bn(g){return g instanceof Gt(g).Element||g instanceof Element}function di(g){return g instanceof Gt(g).HTMLElement||g instanceof HTMLElement}function fi(g){return!(typeof ShadowRoot>"u")&&(g instanceof Gt(g).ShadowRoot||g instanceof ShadowRoot)}function Mo(g){return((bn(g)?g.ownerDocument:g.document)||window.document).documentElement}var hi=Math.max,Br=Math.min,Pr=Math.round;function eo(){var g=navigator.userAgentData;return null!=g&&g.brands&&Array.isArray(g.brands)?g.brands.map(function(T){return T.brand+"/"+T.version}).join(" "):navigator.userAgent}function to(){return!/^((?!chrome|android).)*safari/i.test(eo())}function Dt(g,T,u){void 0===T&&(T=!1),void 0===u&&(u=!1);var b=g.getBoundingClientRect(),B=1,ee=1;T&&di(g)&&(B=g.offsetWidth>0&&Pr(b.width)/g.offsetWidth||1,ee=g.offsetHeight>0&&Pr(b.height)/g.offsetHeight||1);var st=(bn(g)?Gt(g):window).visualViewport,dt=!to()&&u,yt=(b.left+(dt&&st?st.offsetLeft:0))/B,Nt=(b.top+(dt&&st?st.offsetTop:0))/ee,Pn=b.width/B,fn=b.height/ee;return{width:Pn,height:fn,top:Nt,right:yt+Pn,bottom:Nt+fn,left:yt,x:yt,y:Nt}}function H(g){var T=Gt(g);return{scrollLeft:T.pageXOffset,scrollTop:T.pageYOffset}}function X(g){return Dt(Mo(g)).left+H(g).scrollLeft}function _e(g){return Gt(g).getComputedStyle(g)}function Je(g){return g?(g.nodeName||"").toLowerCase():null}function Xe(g){return"html"===Je(g)?g:g.assignedSlot||g.parentNode||(fi(g)?g.host:null)||Mo(g)}function xe(g){var T=_e(g);return/auto|scroll|overlay|hidden/.test(T.overflow+T.overflowY+T.overflowX)}function Ge(g){return["html","body","#document"].indexOf(Je(g))>=0?g.ownerDocument.body:di(g)&&xe(g)?g:Ge(Xe(g))}function ft(g,T){var u;void 0===T&&(T=[]);var b=Ge(g),B=b===(null==(u=g.ownerDocument)?void 0:u.body),ee=Gt(b),Ue=B?[ee].concat(ee.visualViewport||[],xe(b)?b:[]):b,st=T.concat(Ue);return B?st:st.concat(ft(Xe(Ue)))}function Lt(g){return["table","td","th"].indexOf(Je(g))>=0}function Ut(g){return di(g)&&"fixed"!==_e(g).position?g.offsetParent:null}function Ae(g){for(var T=Gt(g),u=Ut(g);u&&Lt(u)&&"static"===_e(u).position;)u=Ut(u);return u&&("html"===Je(u)||"body"===Je(u)&&"static"===_e(u).position)?T:u||function Ie(g){var T=/firefox/i.test(eo());if(/Trident/i.test(eo())&&di(g)&&"fixed"===_e(g).position)return null;var B=Xe(g);for(fi(B)&&(B=B.host);di(B)&&["html","body"].indexOf(Je(B))<0;){var ee=_e(B);if("none"!==ee.transform||"none"!==ee.perspective||"paint"===ee.contain||-1!==["transform","perspective"].indexOf(ee.willChange)||T&&"filter"===ee.willChange||T&&ee.filter&&"none"!==ee.filter)return B;B=B.parentNode}return null}(g)||T}function Me(g,T){var u=T.getRootNode&&T.getRootNode();if(g.contains(T))return!0;if(u&&fi(u)){var b=T;do{if(b&&g.isSameNode(b))return!0;b=b.parentNode||b.host}while(b)}return!1}function qe(g){return Object.assign({},g,{left:g.x,top:g.y,right:g.x+g.width,bottom:g.y+g.height})}function Rt(g,T,u){return T===Xt?qe(function fe(g,T){var u=Gt(g),b=Mo(g),B=u.visualViewport,ee=b.clientWidth,Ue=b.clientHeight,st=0,dt=0;if(B){ee=B.width,Ue=B.height;var yt=to();(yt||!yt&&"fixed"===T)&&(st=B.offsetLeft,dt=B.offsetTop)}return{width:ee,height:Ue,x:st+X(g),y:dt}}(g,u)):bn(T)?function He(g,T){var u=Dt(g,!1,"fixed"===T);return u.top=u.top+g.clientTop,u.left=u.left+g.clientLeft,u.bottom=u.top+g.clientHeight,u.right=u.left+g.clientWidth,u.width=g.clientWidth,u.height=g.clientHeight,u.x=u.left,u.y=u.top,u}(T,u):qe(function Re(g){var T,u=Mo(g),b=H(g),B=null==(T=g.ownerDocument)?void 0:T.body,ee=hi(u.scrollWidth,u.clientWidth,B?B.scrollWidth:0,B?B.clientWidth:0),Ue=hi(u.scrollHeight,u.clientHeight,B?B.scrollHeight:0,B?B.clientHeight:0),st=-b.scrollLeft+X(g),dt=-b.scrollTop;return"rtl"===_e(B||u).direction&&(st+=hi(u.clientWidth,B?B.clientWidth:0)-ee),{width:ee,height:Ue,x:st,y:dt}}(Mo(g)))}function An(g){return g.split("-")[1]}function sn(g){return["top","bottom"].indexOf(g)>=0?"x":"y"}function ei(g){var dt,T=g.reference,u=g.element,b=g.placement,B=b?_t(b):null,ee=b?An(b):null,Ue=T.x+T.width/2-u.width/2,st=T.y+T.height/2-u.height/2;switch(B){case Qn:dt={x:Ue,y:T.y-u.height};break;case En:dt={x:Ue,y:T.y+T.height};break;case gn:dt={x:T.x+T.width,y:st};break;case Cn:dt={x:T.x-u.width,y:st};break;default:dt={x:T.x,y:T.y}}var yt=B?sn(B):null;if(null!=yt){var Nt="y"===yt?"height":"width";switch(ee){case Zt:dt[yt]=dt[yt]-(T[Nt]/2-u[Nt]/2);break;case nn:dt[yt]=dt[yt]+(T[Nt]/2-u[Nt]/2)}}return dt}function oi(g){return Object.assign({},{top:0,right:0,bottom:0,left:0},g)}function Ti(g,T){return T.reduce(function(u,b){return u[b]=g,u},{})}function mi(g,T){void 0===T&&(T={});var b=T.placement,B=void 0===b?g.placement:b,ee=T.strategy,Ue=void 0===ee?g.strategy:ee,st=T.boundary,dt=void 0===st?"clippingParents":st,yt=T.rootBoundary,Nt=void 0===yt?Xt:yt,Pn=T.elementContext,fn=void 0===Pn?Ht:Pn,On=T.altBoundary,Xi=void 0!==On&&On,ci=T.padding,Fi=void 0===ci?0:ci,Hi=oi("number"!=typeof Fi?Fi:Ti(Fi,Hn)),Xr=g.rects.popper,Li=g.elements[Xi?fn===Ht?"reference":Ht:fn],ir=function en(g,T,u,b){var B="clippingParents"===T?function jt(g){var T=ft(Xe(g)),b=["absolute","fixed"].indexOf(_e(g).position)>=0&&di(g)?Ae(g):g;return bn(b)?T.filter(function(B){return bn(B)&&Me(B,b)&&"body"!==Je(B)}):[]}(g):[].concat(T),ee=[].concat(B,[u]),st=ee.reduce(function(dt,yt){var Nt=Rt(g,yt,b);return dt.top=hi(Nt.top,dt.top),dt.right=Br(Nt.right,dt.right),dt.bottom=Br(Nt.bottom,dt.bottom),dt.left=hi(Nt.left,dt.left),dt},Rt(g,ee[0],b));return st.width=st.right-st.left,st.height=st.bottom-st.top,st.x=st.left,st.y=st.top,st}(bn(Li)?Li:Li.contextElement||Mo(g.elements.popper),dt,Nt,Ue),br=Dt(g.elements.reference),Ar=ei({reference:br,element:Xr,strategy:"absolute",placement:B}),dr=qe(Object.assign({},Xr,Ar)),Vi=fn===Ht?dr:br,Di={top:ir.top-Vi.top+Hi.top,bottom:Vi.bottom-ir.bottom+Hi.bottom,left:ir.left-Vi.left+Hi.left,right:Vi.right-ir.right+Hi.right},ta=g.modifiersData.offset;if(fn===Ht&&ta){var Pl=ta[B];Object.keys(Di).forEach(function(na){var pl=[gn,En].indexOf(na)>=0?1:-1,Kl=[Qn,En].indexOf(na)>=0?"y":"x";Di[na]+=Pl[Kl]*pl})}return Di}const $i={name:"flip",enabled:!0,phase:"main",fn:function mr(g){var T=g.state,u=g.options,b=g.name;if(!T.modifiersData[b]._skip){for(var B=u.mainAxis,ee=void 0===B||B,Ue=u.altAxis,st=void 0===Ue||Ue,dt=u.fallbackPlacements,yt=u.padding,Nt=u.boundary,Pn=u.rootBoundary,fn=u.altBoundary,On=u.flipVariations,Xi=void 0===On||On,ci=u.allowedAutoPlacements,Fi=T.options.placement,Hi=_t(Fi),Xr=dt||(Hi!==Fi&&Xi?function Ii(g){if(_t(g)===Kn)return[];var T=qt(g);return[un(g),T,un(T)]}(Fi):[qt(Fi)]),Li=[Fi].concat(Xr).reduce(function(cc,Rs){return cc.concat(_t(Rs)===Kn?function Wr(g,T){void 0===T&&(T={});var B=T.boundary,ee=T.rootBoundary,Ue=T.padding,st=T.flipVariations,dt=T.allowedAutoPlacements,yt=void 0===dt?qi:dt,Nt=An(T.placement),Pn=Nt?st?Zi:Zi.filter(function(Xi){return An(Xi)===Nt}):Hn,fn=Pn.filter(function(Xi){return yt.indexOf(Xi)>=0});0===fn.length&&(fn=Pn);var On=fn.reduce(function(Xi,ci){return Xi[ci]=mi(g,{placement:ci,boundary:B,rootBoundary:ee,padding:Ue})[_t(ci)],Xi},{});return Object.keys(On).sort(function(Xi,ci){return On[Xi]-On[ci]})}(T,{placement:Rs,boundary:Nt,rootBoundary:Pn,padding:yt,flipVariations:Xi,allowedAutoPlacements:ci}):Rs)},[]),ir=T.rects.reference,br=T.rects.popper,Ar=new Map,dr=!0,Vi=Li[0],Di=0;Di<Li.length;Di++){var ta=Li[Di],Pl=_t(ta),na=An(ta)===Zt,pl=[Qn,En].indexOf(Pl)>=0,Kl=pl?"width":"height",ks=mi(T,{placement:ta,boundary:Nt,rootBoundary:Pn,altBoundary:fn,padding:yt}),os=pl?na?gn:Cn:na?En:Qn;ir[Kl]>br[Kl]&&(os=qt(os));var fl=qt(os),nu=[];if(ee&&nu.push(ks[Pl]<=0),st&&nu.push(ks[os]<=0,ks[fl]<=0),nu.every(function(cc){return cc})){Vi=ta,dr=!1;break}Ar.set(ta,nu)}if(dr)for(var Cu=function(Rs){var Wa=Li.find(function(Qo){var pa=Ar.get(Qo);if(pa)return pa.slice(0,Rs).every(function(Eu){return Eu})});if(Wa)return Vi=Wa,"break"},Ya=Xi?3:1;Ya>0&&"break"!==Cu(Ya);Ya--);T.placement!==Vi&&(T.modifiersData[b]._skip=!0,T.placement=Vi,T.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function pi(g,T,u){return hi(g,Br(T,u))}function Tr(g){var T=Dt(g),u=g.offsetWidth,b=g.offsetHeight;return Math.abs(T.width-u)<=1&&(u=T.width),Math.abs(T.height-b)<=1&&(b=T.height),{x:g.offsetLeft,y:g.offsetTop,width:u,height:b}}const Mr={name:"preventOverflow",enabled:!0,phase:"main",fn:function Ai(g){var T=g.state,u=g.options,b=g.name,B=u.mainAxis,ee=void 0===B||B,Ue=u.altAxis,st=void 0!==Ue&&Ue,fn=u.tether,On=void 0===fn||fn,Xi=u.tetherOffset,ci=void 0===Xi?0:Xi,Fi=mi(T,{boundary:u.boundary,rootBoundary:u.rootBoundary,padding:u.padding,altBoundary:u.altBoundary}),Hi=_t(T.placement),lr=An(T.placement),Xr=!lr,Li=sn(Hi),ir=function li(g){return"x"===g?"y":"x"}(Li),br=T.modifiersData.popperOffsets,Ar=T.rects.reference,dr=T.rects.popper,Vi="function"==typeof ci?ci(Object.assign({},T.rects,{placement:T.placement})):ci,Di="number"==typeof Vi?{mainAxis:Vi,altAxis:Vi}:Object.assign({mainAxis:0,altAxis:0},Vi),ta=T.modifiersData.offset?T.modifiersData.offset[T.placement]:null,Pl={x:0,y:0};if(br){if(ee){var na,pl="y"===Li?Qn:Cn,Kl="y"===Li?En:gn,ks="y"===Li?"height":"width",os=br[Li],fl=os+Fi[pl],nu=os-Fi[Kl],so=On?-dr[ks]/2:0,Cu=lr===Zt?Ar[ks]:dr[ks],Ya=lr===Zt?-dr[ks]:-Ar[ks],Du=T.elements.arrow,cc=On&&Du?Tr(Du):{width:0,height:0},Rs=T.modifiersData["arrow#persistent"]?T.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Wa=Rs[pl],Qo=Rs[Kl],pa=pi(0,Ar[ks],cc[ks]),Eu=Xr?Ar[ks]/2-so-pa-Wa-Di.mainAxis:Cu-pa-Wa-Di.mainAxis,Sd=Xr?-Ar[ks]/2+so+pa+Qo+Di.mainAxis:Ya+pa+Qo+Di.mainAxis,Eo=T.elements.arrow&&Ae(T.elements.arrow),Xd=null!=(na=ta?.[Li])?na:0,i=os+Sd-Xd,a=pi(On?Br(fl,os+Eu-Xd-(Eo?"y"===Li?Eo.clientTop||0:Eo.clientLeft||0:0)):fl,os,On?hi(nu,i):nu);br[Li]=a,Pl[Li]=a-os}if(st){var f,I=br[ir],L="y"===ir?"height":"width",W=I+Fi["x"===Li?Qn:Cn],oe=I-Fi["x"===Li?En:gn],ae=-1!==[Qn,Cn].indexOf(Hi),pe=null!=(f=ta?.[ir])?f:0,ve=ae?W:I-Ar[L]-dr[L]-pe+Di.altAxis,Ce=ae?I+Ar[L]+dr[L]-pe-Di.altAxis:oe,$e=On&&ae?function ii(g,T,u){var b=pi(g,T,u);return b>u?u:b}(ve,I,Ce):pi(On?ve:W,I,On?Ce:oe);br[ir]=$e,Pl[ir]=$e-I}T.modifiersData[b]=Pl}},requiresIfExists:["offset"]},Yn={name:"arrow",enabled:!0,phase:"main",fn:function Vo(g){var T,u=g.state,b=g.name,B=g.options,ee=u.elements.arrow,Ue=u.modifiersData.popperOffsets,st=_t(u.placement),dt=sn(st),Nt=[Cn,gn].indexOf(st)>=0?"height":"width";if(ee&&Ue){var Pn=function(T,u){return oi("number"!=typeof(T="function"==typeof T?T(Object.assign({},u.rects,{placement:u.placement})):T)?T:Ti(T,Hn))}(B.padding,u),fn=Tr(ee),On="y"===dt?Qn:Cn,Xi="y"===dt?En:gn,ci=u.rects.reference[Nt]+u.rects.reference[dt]-Ue[dt]-u.rects.popper[Nt],Fi=Ue[dt]-u.rects.reference[dt],Hi=Ae(ee),lr=Hi?"y"===dt?Hi.clientHeight||0:Hi.clientWidth||0:0,br=lr/2-fn[Nt]/2+(ci/2-Fi/2),Ar=pi(Pn[On],br,lr-fn[Nt]-Pn[Xi]);u.modifiersData[b]=((T={})[dt]=Ar,T.centerOffset=Ar-br,T)}},effect:function cn(g){var T=g.state,b=g.options.element,B=void 0===b?"[data-popper-arrow]":b;null!=B&&("string"==typeof B&&!(B=T.elements.popper.querySelector(B))||Me(T.elements.popper,B)&&(T.elements.arrow=B))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gi(g,T,u){void 0===u&&(u=!1);var b=di(T),B=di(T)&&function xr(g){var T=g.getBoundingClientRect(),u=Pr(T.width)/g.offsetWidth||1,b=Pr(T.height)/g.offsetHeight||1;return 1!==u||1!==b}(T),ee=Mo(T),Ue=Dt(g,B,u),st={scrollLeft:0,scrollTop:0},dt={x:0,y:0};return(b||!b&&!u)&&(("body"!==Je(T)||xe(ee))&&(st=function Oi(g){return g!==Gt(g)&&di(g)?function vi(g){return{scrollLeft:g.scrollLeft,scrollTop:g.scrollTop}}(g):H(g)}(T)),di(T)?((dt=Dt(T,!0)).x+=T.clientLeft,dt.y+=T.clientTop):ee&&(dt.x=X(ee))),{x:Ue.left+st.scrollLeft-dt.x,y:Ue.top+st.scrollTop-dt.y,width:Ue.width,height:Ue.height}}function mo(g){var T=new Map,u=new Set,b=[];function B(ee){u.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach(function(st){if(!u.has(st)){var dt=T.get(st);dt&&B(dt)}}),b.push(ee)}return g.forEach(function(ee){T.set(ee.name,ee)}),g.forEach(function(ee){u.has(ee.name)||B(ee)}),b}function ka(g){var T;return function(){return T||(T=new Promise(function(u){Promise.resolve().then(function(){T=void 0,u(g())})})),T}}var Ci={placement:"bottom",modifiers:[],strategy:"absolute"};function ws(){for(var g=arguments.length,T=new Array(g),u=0;u<g;u++)T[u]=arguments[u];return!T.some(function(b){return!(b&&"function"==typeof b.getBoundingClientRect)})}function Kr(g){void 0===g&&(g={});var u=g.defaultModifiers,b=void 0===u?[]:u,B=g.defaultOptions,ee=void 0===B?Ci:B;return function(st,dt,yt){void 0===yt&&(yt=ee);var Nt={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ci,ee),modifiersData:{},elements:{reference:st,popper:dt},attributes:{},styles:{}},Pn=[],fn=!1,On={state:Nt,setOptions:function(Hi){var lr="function"==typeof Hi?Hi(Nt.options):Hi;ci(),Nt.options=Object.assign({},ee,Nt.options,lr),Nt.scrollParents={reference:bn(st)?ft(st):st.contextElement?ft(st.contextElement):[],popper:ft(dt)};var Xr=function Ui(g){var T=mo(g);return xt.reduce(function(u,b){return u.concat(T.filter(function(B){return B.phase===b}))},[])}(function go(g){var T=g.reduce(function(u,b){var B=u[b.name];return u[b.name]=B?Object.assign({},B,b,{options:Object.assign({},B.options,b.options),data:Object.assign({},B.data,b.data)}):b,u},{});return Object.keys(T).map(function(u){return T[u]})}([].concat(b,Nt.options.modifiers)));return Nt.orderedModifiers=Xr.filter(function(Li){return Li.enabled}),function Xi(){Nt.orderedModifiers.forEach(function(Fi){var lr=Fi.options,Li=Fi.effect;if("function"==typeof Li){var ir=Li({state:Nt,name:Fi.name,instance:On,options:void 0===lr?{}:lr});Pn.push(ir||function(){})}})}(),On.update()},forceUpdate:function(){if(!fn){var Hi=Nt.elements,lr=Hi.reference,Xr=Hi.popper;if(ws(lr,Xr)){Nt.rects={reference:gi(lr,Ae(Xr),"fixed"===Nt.options.strategy),popper:Tr(Xr)},Nt.reset=!1,Nt.placement=Nt.options.placement,Nt.orderedModifiers.forEach(function(Di){return Nt.modifiersData[Di.name]=Object.assign({},Di.data)});for(var Li=0;Li<Nt.orderedModifiers.length;Li++)if(!0!==Nt.reset){var ir=Nt.orderedModifiers[Li],br=ir.fn,Ar=ir.options;"function"==typeof br&&(Nt=br({state:Nt,options:void 0===Ar?{}:Ar,name:ir.name,instance:On})||Nt)}else Nt.reset=!1,Li=-1}}},update:ka(function(){return new Promise(function(Fi){On.forceUpdate(),Fi(Nt)})}),destroy:function(){ci(),fn=!0}};if(!ws(st,dt))return On;function ci(){Pn.forEach(function(Fi){return Fi()}),Pn=[]}return On.setOptions(yt).then(function(Fi){!fn&&yt.onFirstUpdate&&yt.onFirstUpdate(Fi)}),On}}var kr={passive:!0},ga={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ar(g){var T,u=g.popper,b=g.popperRect,B=g.placement,ee=g.variation,Ue=g.offsets,st=g.position,dt=g.gpuAcceleration,yt=g.adaptive,Nt=g.roundOffsets,Pn=g.isFixed,fn=Ue.x,On=void 0===fn?0:fn,Xi=Ue.y,ci=void 0===Xi?0:Xi,Fi="function"==typeof Nt?Nt({x:On,y:ci}):{x:On,y:ci};On=Fi.x,ci=Fi.y;var Hi=Ue.hasOwnProperty("x"),lr=Ue.hasOwnProperty("y"),Xr=Cn,Li=Qn,ir=window;if(yt){var br=Ae(u),Ar="clientHeight",dr="clientWidth";br===Gt(u)&&"static"!==_e(br=Mo(u)).position&&"absolute"===st&&(Ar="scrollHeight",dr="scrollWidth"),(B===Qn||(B===Cn||B===gn)&&ee===nn)&&(Li=En,ci-=(Pn&&br===ir&&ir.visualViewport?ir.visualViewport.height:br[Ar])-b.height,ci*=dt?1:-1),B!==Cn&&(B!==Qn&&B!==En||ee!==nn)||(Xr=gn,On-=(Pn&&br===ir&&ir.visualViewport?ir.visualViewport.width:br[dr])-b.width,On*=dt?1:-1)}var na,ta=Object.assign({position:st},yt&&ga),Pl=!0===Nt?function Ql(g,T){var b=g.y,B=T.devicePixelRatio||1;return{x:Pr(g.x*B)/B||0,y:Pr(b*B)/B||0}}({x:On,y:ci},Gt(u)):{x:On,y:ci};return On=Pl.x,ci=Pl.y,Object.assign({},ta,dt?((na={})[Li]=lr?"0":"",na[Xr]=Hi?"0":"",na.transform=(ir.devicePixelRatio||1)<=1?"translate("+On+"px, "+ci+"px)":"translate3d("+On+"px, "+ci+"px, 0)",na):((T={})[Li]=lr?ci+"px":"",T[Xr]=Hi?On+"px":"",T.transform="",T))}var Nr=Kr({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Rr(g){var T=g.state,u=g.instance,b=g.options,B=b.scroll,ee=void 0===B||B,Ue=b.resize,st=void 0===Ue||Ue,dt=Gt(T.elements.popper),yt=[].concat(T.scrollParents.reference,T.scrollParents.popper);return ee&&yt.forEach(function(Nt){Nt.addEventListener("scroll",u.update,kr)}),st&&dt.addEventListener("resize",u.update,kr),function(){ee&&yt.forEach(function(Nt){Nt.removeEventListener("scroll",u.update,kr)}),st&&dt.removeEventListener("resize",u.update,kr)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function Ra(g){var T=g.state;T.modifiersData[g.name]=ei({reference:T.rects.reference,element:T.rects.popper,strategy:"absolute",placement:T.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function So(g){var T=g.state,u=g.options,b=u.gpuAcceleration,B=void 0===b||b,ee=u.adaptive,Ue=void 0===ee||ee,st=u.roundOffsets,dt=void 0===st||st,yt={placement:_t(T.placement),variation:An(T.placement),popper:T.elements.popper,popperRect:T.rects.popper,gpuAcceleration:B,isFixed:"fixed"===T.options.strategy};null!=T.modifiersData.popperOffsets&&(T.styles.popper=Object.assign({},T.styles.popper,ar(Object.assign({},yt,{offsets:T.modifiersData.popperOffsets,position:T.options.strategy,adaptive:Ue,roundOffsets:dt})))),null!=T.modifiersData.arrow&&(T.styles.arrow=Object.assign({},T.styles.arrow,ar(Object.assign({},yt,{offsets:T.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:dt})))),T.attributes.popper=Object.assign({},T.attributes.popper,{"data-popper-placement":T.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Xo(g){var T=g.state;Object.keys(T.elements).forEach(function(u){var b=T.styles[u]||{},B=T.attributes[u]||{},ee=T.elements[u];!di(ee)||!Je(ee)||(Object.assign(ee.style,b),Object.keys(B).forEach(function(Ue){var st=B[Ue];!1===st?ee.removeAttribute(Ue):ee.setAttribute(Ue,!0===st?"":st)}))})},effect:function cs(g){var T=g.state,u={popper:{position:T.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(T.elements.popper.style,u.popper),T.styles=u,T.elements.arrow&&Object.assign(T.elements.arrow.style,u.arrow),function(){Object.keys(T.elements).forEach(function(b){var B=T.elements[b],ee=T.attributes[b]||{},st=Object.keys(T.styles.hasOwnProperty(b)?T.styles[b]:u[b]).reduce(function(dt,yt){return dt[yt]="",dt},{});!di(B)||!Je(B)||(Object.assign(B.style,st),Object.keys(ee).forEach(function(dt){B.removeAttribute(dt)}))})}},requires:["computeStyles"]}]});const gr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Fr(g){var T=g.state,b=g.name,B=g.options.offset,ee=void 0===B?[0,0]:B,Ue=qi.reduce(function(Nt,Pn){return Nt[Pn]=function _o(g,T,u){var b=_t(g),B=[Cn,Qn].indexOf(b)>=0?-1:1,ee="function"==typeof u?u(Object.assign({},T,{placement:g})):u,Ue=ee[0],st=ee[1];return Ue=Ue||0,st=(st||0)*B,[Cn,gn].indexOf(b)>=0?{x:st,y:Ue}:{x:Ue,y:st}}(Pn,T.rects,ee),Nt},{}),st=Ue[T.placement],yt=st.y;null!=T.modifiersData.popperOffsets&&(T.modifiersData.popperOffsets.x+=st.x,T.modifiersData.popperOffsets.y+=yt),T.modifiersData[b]=Ue}},oa=["*"],ji=["ngbDatepickerDayView",""],Xl=["month"],Fl=["year"];function Na(g,T){if(1&g&&(o.TgZ(0,"option",5),o._uU(1),o.qZA()),2&g){const u=T.$implicit,b=o.oxw();o.Q6J("value",u),o.uIk("aria-label",b.i18n.getMonthFullName(u,b.date.year)),o.xp6(1),o.Oqu(b.i18n.getMonthShortName(u,b.date.year))}}function qa(g,T){if(1&g&&(o.TgZ(0,"option",5),o._uU(1),o.qZA()),2&g){const u=T.$implicit,b=o.oxw();o.Q6J("value",u),o.xp6(1),o.Oqu(b.i18n.getYearNumerals(u))}}function Po(g,T){if(1&g){const u=o.EpF();o.TgZ(0,"ngb-datepicker-navigation-select",7),o.NdJ("select",function(B){o.CHM(u);const ee=o.oxw();return o.KtG(ee.select.emit(B))}),o.qZA()}if(2&g){const u=o.oxw();o.Q6J("date",u.date)("disabled",u.disabled)("months",u.selectBoxes.months)("years",u.selectBoxes.years)}}function wr(g,T){1&g&&o._UZ(0,"div",0)}function _a(g,T){1&g&&o._UZ(0,"div",0)}function sa(g,T){if(1&g&&(o.YNc(0,wr,1,0,"div",9),o.TgZ(1,"div",10),o._uU(2),o.qZA(),o.YNc(3,_a,1,0,"div",9)),2&g){const u=T.$implicit,b=T.index,B=o.oxw(2);o.Q6J("ngIf",b>0),o.xp6(2),o.hij(" ",B.i18n.getMonthLabel(u.firstDate)," "),o.xp6(1),o.Q6J("ngIf",b!==B.months.length-1)}}function Fa(g,T){if(1&g&&o.YNc(0,sa,4,3,"ng-template",8),2&g){const u=o.oxw();o.Q6J("ngForOf",u.months)}}function $s(g,T){if(1&g&&(o.TgZ(0,"div",5),o._uU(1),o.qZA()),2&g){const u=o.oxw(2);o.xp6(1),o.Oqu(u.i18n.getWeekLabel())}}function Uo(g,T){if(1&g&&(o.TgZ(0,"div",6),o._uU(1),o.qZA()),2&g){const u=T.$implicit;o.xp6(1),o.Oqu(u)}}function Es(g,T){if(1&g&&(o.TgZ(0,"div",2),o.YNc(1,$s,2,1,"div",3),o.YNc(2,Uo,2,1,"div",4),o.qZA()),2&g){const u=o.oxw();o.xp6(1),o.Q6J("ngIf",u.datepicker.showWeekNumbers),o.xp6(1),o.Q6J("ngForOf",u.viewModel.weekdays)}}function Ts(g,T){if(1&g&&(o.TgZ(0,"div",11),o._uU(1),o.qZA()),2&g){const u=o.oxw(2).$implicit,b=o.oxw();o.xp6(1),o.Oqu(b.i18n.getWeekNumerals(u.number))}}function Zs(g,T){}function La(g,T){if(1&g&&o.YNc(0,Zs,0,0,"ng-template",14),2&g){const u=o.oxw().$implicit,b=o.oxw(3);o.Q6J("ngTemplateOutlet",b.datepicker.dayTemplate)("ngTemplateOutletContext",u.context)}}function Ll(g,T){if(1&g){const u=o.EpF();o.TgZ(0,"div",12),o.NdJ("click",function(B){const Ue=o.CHM(u).$implicit;return o.oxw(3).doSelect(Ue),o.KtG(B.preventDefault())}),o.YNc(1,La,1,2,"ng-template",13),o.qZA()}if(2&g){const u=T.$implicit;o.ekj("disabled",u.context.disabled)("hidden",u.hidden)("ngb-dp-today",u.context.today),o.Q6J("tabindex",u.tabindex),o.uIk("aria-label",u.ariaLabel),o.xp6(1),o.Q6J("ngIf",!u.hidden)}}function wl(g,T){if(1&g&&(o.TgZ(0,"div",8),o.YNc(1,Ts,2,1,"div",9),o.YNc(2,Ll,2,9,"div",10),o.qZA()),2&g){const u=o.oxw().$implicit,b=o.oxw();o.xp6(1),o.Q6J("ngIf",b.datepicker.showWeekNumbers),o.xp6(1),o.Q6J("ngForOf",u.days)}}function Qi(g,T){1&g&&o.YNc(0,wl,3,2,"div",7),2&g&&o.Q6J("ngIf",!T.$implicit.collapsed)}const Ac=["defaultDayTemplate"],jo=["content"];function qr(g,T){if(1&g&&o._UZ(0,"div",8),2&g){const b=T.currentMonth,B=T.selected,ee=T.disabled,Ue=T.focused;o.Q6J("date",T.date)("currentMonth",b)("selected",B)("disabled",ee)("focused",Ue)}}function ko(g,T){if(1&g&&(o.TgZ(0,"div",13),o._uU(1),o.qZA()),2&g){const u=o.oxw().$implicit,b=o.oxw(2);o.xp6(1),o.hij(" ",b.i18n.getMonthLabel(u.firstDate)," ")}}function Ba(g,T){if(1&g&&(o.TgZ(0,"div",10),o.YNc(1,ko,2,1,"div",11),o._UZ(2,"ngb-datepicker-month",12),o.qZA()),2&g){const u=T.$implicit,b=o.oxw(2);o.xp6(1),o.Q6J("ngIf","none"===b.navigation||b.displayMonths>1&&"select"===b.navigation),o.xp6(1),o.Q6J("month",u.firstDate)}}function Qa(g,T){if(1&g&&o.YNc(0,Ba,3,2,"div",9),2&g){const u=o.oxw();o.Q6J("ngForOf",u.model.months)}}function Hr(g,T){if(1&g){const u=o.EpF();o.TgZ(0,"ngb-datepicker-navigation",14),o.NdJ("navigate",function(B){o.CHM(u);const ee=o.oxw();return o.KtG(ee.onNavigateEvent(B))})("select",function(B){o.CHM(u);const ee=o.oxw();return o.KtG(ee.onNavigateDateSelect(B))}),o.qZA()}if(2&g){const u=o.oxw();o.Q6J("date",u.model.firstDate)("months",u.model.months)("disabled",u.model.disabled)("showSelect","select"===u.model.navigation)("prevDisabled",u.model.prevDisabled)("nextDisabled",u.model.nextDisabled)("selectBoxes",u.model.selectBoxes)}}function Ms(g,T){}function Yo(g,T){}const ts=function(g){return{$implicit:g}},fc=["dialog"];function ho(g){return parseInt(`${g}`,10)}function G(g){return"string"==typeof g}function be(g){return!isNaN(ho(g))}function We(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g}function Tt(g){return null!=g}function Dn(g){return be(g)?`0${g}`.slice(-2):""}function Wt(g,T){return g&&g.className&&g.className.split&&g.className.split(/\s+/).indexOf(T)>=0}function bi(g){return(g||document.body).getBoundingClientRect()}const Ls={animation:!0,transitionTimerDelayMs:5},Bs=()=>{},{transitionTimerDelayMs:bo}=Ls,no=new Map,Sr=(g,T,u,b)=>{let B=b.context||{};const ee=no.get(T);if(ee)switch(b.runningTransition){case"continue":return t.E;case"stop":g.run(()=>ee.transition$.complete()),B=Object.assign(ee.context,B),no.delete(T)}const Ue=u(T,b.animation,B)||Bs;if(!b.animation||"none"===window.getComputedStyle(T).transitionProperty)return g.run(()=>Ue()),(0,ie.of)(void 0).pipe(function vo(g){return T=>new V.y(u=>T.subscribe({next:Ue=>g.run(()=>u.next(Ue)),error:Ue=>g.run(()=>u.error(Ue)),complete:()=>g.run(()=>u.complete())}))}(g));const st=new te.x,dt=new te.x,yt=st.pipe(function Be(...g){return T=>(0,Ne.z)(T,(0,ie.of)(...g))}(!0));no.set(T,{transition$:st,complete:()=>{dt.next(),dt.complete()},context:B});const Nt=function nr(g){const{transitionDelay:T,transitionDuration:u}=window.getComputedStyle(g);return 1e3*(parseFloat(T)+parseFloat(u))}(T);return g.runOutsideAngular(()=>{const Pn=(0,le.R)(T,"transitionend").pipe((0,it.R)(yt),(0,Mt.h)(({target:On})=>On===T));Ye((0,U.H)(Nt+bo).pipe((0,it.R)(yt)),Pn,dt).pipe((0,it.R)(yt)).subscribe(()=>{no.delete(T),g.run(()=>{Ue(),st.next(),st.complete()})})}),st.asObservable()};let is=(()=>{class g{constructor(){this.animation=Ls.animation}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();class Lr{constructor(T,u,b){this.year=We(T)?T:null,this.month=We(u)?u:null,this.day=We(b)?b:null}static from(T){return T instanceof Lr?T:T?new Lr(T.year,T.month,T.day):null}equals(T){return null!=T&&this.year===T.year&&this.month===T.month&&this.day===T.day}before(T){return!!T&&(this.year===T.year?this.month===T.month?this.day!==T.day&&this.day<T.day:this.month<T.month:this.year<T.year)}after(T){return!!T&&(this.year===T.year?this.month===T.month?this.day!==T.day&&this.day>T.day:this.month>T.month:this.year>T.year)}}function rs(g,T){return!function su(g,T){return!g&&!T||!!g&&!!T&&g.equals(T)}(g,T)}function da(g,T){return!(!g&&!T||g&&T&&g.year===T.year&&g.month===T.month)}function vr(g,T,u){return g&&T&&g.before(T)?T:g&&u&&g.after(u)?u:g||null}function l(g,T){const{minDate:u,maxDate:b,disabled:B,markDisabled:ee}=T;return!(null==g||B||ee&&ee(g,{year:g.year,month:g.month})||u&&g.before(u)||b&&g.after(b))}function se(g){return new Lr(g.getFullYear(),g.getMonth()+1,g.getDate())}function ge(g){const T=new Date(g.year,g.month-1,g.day,12);return isNaN(T.getTime())||T.setFullYear(g.year),T}let M=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:function(){return function D(){return new x}()},providedIn:"root"}),g})(),x=(()=>{class g extends M{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(u,b="d",B=1){let ee=ge(u),Ue=!0,st=ee.getMonth();switch(b){case"y":ee.setFullYear(ee.getFullYear()+B);break;case"m":st+=B,ee.setMonth(st),st%=12,st<0&&(st+=12);break;case"d":ee.setDate(ee.getDate()+B),Ue=!1;break;default:return u}return Ue&&ee.getMonth()!==st&&ee.setDate(0),se(ee)}getPrev(u,b="d",B=1){return this.getNext(u,b,-B)}getWeekday(u){let B=ge(u).getDay();return 0===B?7:B}getWeekNumber(u,b){7===b&&(b=0);const Ue=ge(u[(11-b)%7]);Ue.setDate(Ue.getDate()+4-(Ue.getDay()||7));const st=Ue.getTime();return Ue.setMonth(0),Ue.setDate(1),Math.floor(Math.round((st-Ue.getTime())/864e5)/7)+1}getToday(){return se(new Date)}isValid(u){if(!(u&&We(u.year)&&We(u.month)&&We(u.day)&&0!==u.year))return!1;const b=ge(u);return!isNaN(b.getTime())&&b.getFullYear()===u.year&&b.getMonth()+1===u.month&&b.getDate()===u.day}}return g.\u0275fac=function(){let T;return function(b){return(T||(T=o.n5z(g)))(b||g)}}(),g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})(),z=(()=>{class g{getMonthLabel(u){return`${this.getMonthFullName(u.month,u.year)} ${this.getYearNumerals(u.year)}`}getDayNumerals(u){return`${u.day}`}getWeekNumerals(u){return`${u}`}getYearNumerals(u){return`${u}`}getWeekLabel(){return""}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:function(u){let b=null;return b=u?new u:function A(g){return new Q(g)}(o.LFG(o.soG)),b},providedIn:"root"}),g})(),Q=(()=>{class g extends z{constructor(u){super(),this._locale=u,this._monthsShort=(0,at.UT)(u,at.x.Standalone,at.Tn.Abbreviated),this._monthsFull=(0,at.UT)(u,at.x.Standalone,at.Tn.Wide)}getWeekdayLabel(u,b){const B=(0,at.Mn)(this._locale,at.x.Standalone,void 0===b?at.Tn.Short:b);return B.map((Ue,st)=>B[(st+1)%7])[u-1]||""}getMonthShortName(u){return this._monthsShort[u-1]||""}getMonthFullName(u){return this._monthsFull[u-1]||""}getDayAriaLabel(u){const b=new Date(u.year,u.month-1,u.day);return(0,at.p6)(b,"fullDate",this._locale)}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(o.soG))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})(),K=(()=>{class g{constructor(u,b){this._calendar=u,this._i18n=b,this._VALIDATORS={dayTemplateData:B=>{if(this._state.dayTemplateData!==B)return{dayTemplateData:B}},displayMonths:B=>{if(We(B=ho(B))&&B>0&&this._state.displayMonths!==B)return{displayMonths:B}},disabled:B=>{if(this._state.disabled!==B)return{disabled:B}},firstDayOfWeek:B=>{if(We(B=ho(B))&&B>=0&&this._state.firstDayOfWeek!==B)return{firstDayOfWeek:B}},focusVisible:B=>{if(this._state.focusVisible!==B&&!this._state.disabled)return{focusVisible:B}},markDisabled:B=>{if(this._state.markDisabled!==B)return{markDisabled:B}},maxDate:B=>{const ee=this.toValidDate(B,null);if(rs(this._state.maxDate,ee))return{maxDate:ee}},minDate:B=>{const ee=this.toValidDate(B,null);if(rs(this._state.minDate,ee))return{minDate:ee}},navigation:B=>{if(this._state.navigation!==B)return{navigation:B}},outsideDays:B=>{if(this._state.outsideDays!==B)return{outsideDays:B}},weekdays:B=>{const ee=!0===B||!1===B?at.Tn.Short:B,Ue=!0!==B&&!1!==B||B;if(this._state.weekdayWidth!==ee||this._state.weekdaysVisible!==Ue)return{weekdayWidth:ee,weekdaysVisible:Ue}}},this._model$=new te.x,this._dateSelect$=new te.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:at.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,Mt.h)(u=>u.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,Mt.h)(u=>null!==u))}set(u){let b=Object.keys(u).map(B=>this._VALIDATORS[B](u[B])).reduce((B,ee)=>({...B,...ee}),{});Object.keys(b).length>0&&this._nextState(b)}focus(u){const b=this.toValidDate(u,null);null!=b&&!this._state.disabled&&rs(this._state.focusDate,b)&&this._nextState({focusDate:u})}focusSelect(){l(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(u){const b=this.toValidDate(u,this._calendar.getToday());null!=b&&!this._state.disabled&&(!this._state.firstDate||da(this._state.firstDate,b))&&this._nextState({firstDate:b})}select(u,b={}){const B=this.toValidDate(u,null);null!=B&&!this._state.disabled&&(rs(this._state.selectedDate,B)&&this._nextState({selectedDate:B}),b.emitEvent&&l(B,this._state)&&this._dateSelect$.next(B))}toValidDate(u,b){const B=Lr.from(u);return void 0===b&&(b=this._calendar.getToday()),this._calendar.isValid(B)?B:b}getMonth(u){for(let b of this._state.months)if(u.month===b.number&&u.year===b.year)return b;throw new Error(`month ${u.month} of year ${u.year} not found`)}_nextState(u){const b=this._updateState(u);this._patchContexts(b),this._state=b,this._model$.next(this._state)}_patchContexts(u){const{months:b,displayMonths:B,selectedDate:ee,focusDate:Ue,focusVisible:st,disabled:dt,outsideDays:yt}=u;u.months.forEach(Nt=>{Nt.weeks.forEach(Pn=>{Pn.days.forEach(fn=>{Ue&&(fn.context.focused=Ue.equals(fn.date)&&st),fn.tabindex=!dt&&Ue&&fn.date.equals(Ue)&&Ue.month===Nt.number?0:-1,!0===dt&&(fn.context.disabled=!0),void 0!==ee&&(fn.context.selected=null!==ee&&ee.equals(fn.date)),Nt.number!==fn.date.month&&(fn.hidden="hidden"===yt||"collapsed"===yt||B>1&&fn.date.after(b[0].firstDate)&&fn.date.before(b[B-1].lastDate))})})})}_updateState(u){const b=Object.assign({},this._state,u);let B=b.firstDate;if(("minDate"in u||"maxDate"in u)&&(function Yc(g,T){if(T&&g&&T.before(g))throw new Error(`'maxDate' ${T} should be greater than 'minDate' ${g}`)}(b.minDate,b.maxDate),b.focusDate=vr(b.focusDate,b.minDate,b.maxDate),b.firstDate=vr(b.firstDate,b.minDate,b.maxDate),B=b.focusDate),"disabled"in u&&(b.focusVisible=!1),"selectedDate"in u&&0===this._state.months.length&&(B=b.selectedDate),"focusVisible"in u||"focusDate"in u&&(b.focusDate=vr(b.focusDate,b.minDate,b.maxDate),B=b.focusDate,0!==b.months.length&&b.focusDate&&!b.focusDate.before(b.firstDate)&&!b.focusDate.after(b.lastDate)))return b;if("firstDate"in u&&(b.firstDate=vr(b.firstDate,b.minDate,b.maxDate),B=b.firstDate),B){const Ue=function O(g,T,u,b,B){const{displayMonths:ee,months:Ue}=u,st=Ue.splice(0,Ue.length);return Array.from({length:ee},(yt,Nt)=>{const Pn=Object.assign(g.getNext(T,"m",Nt),{day:1});if(Ue[Nt]=null,!B){const fn=st.findIndex(On=>On.firstDate.equals(Pn));-1!==fn&&(Ue[Nt]=st.splice(fn,1)[0])}return Pn}).forEach((yt,Nt)=>{null===Ue[Nt]&&(Ue[Nt]=function F(g,T,u,b,B={}){const{dayTemplateData:ee,minDate:Ue,maxDate:st,firstDayOfWeek:dt,markDisabled:yt,outsideDays:Nt,weekdayWidth:Pn,weekdaysVisible:fn}=u,On=g.getToday();B.firstDate=null,B.lastDate=null,B.number=T.month,B.year=T.year,B.weeks=B.weeks||[],B.weekdays=B.weekdays||[],T=function $(g,T,u){const b=g.getDaysPerWeek(),B=new Lr(T.year,T.month,1),ee=g.getWeekday(B)%b;return g.getPrev(B,"d",(b+ee-u)%b)}(g,T,dt),fn||(B.weekdays.length=0);for(let Xi=0;Xi<g.getWeeksPerMonth();Xi++){let ci=B.weeks[Xi];ci||(ci=B.weeks[Xi]={number:0,days:[],collapsed:!0});const Fi=ci.days;for(let Hi=0;Hi<g.getDaysPerWeek();Hi++){0===Xi&&fn&&(B.weekdays[Hi]=b.getWeekdayLabel(g.getWeekday(T),Pn));const lr=new Lr(T.year,T.month,T.day),Xr=g.getNext(lr),Li=b.getDayAriaLabel(lr);let ir=!!(Ue&&lr.before(Ue)||st&&lr.after(st));!ir&&yt&&(ir=yt(lr,{month:B.number,year:B.year}));let br=lr.equals(On),Ar=ee?ee(lr,{month:B.number,year:B.year}):void 0;null===B.firstDate&&lr.month===B.number&&(B.firstDate=lr),lr.month===B.number&&Xr.month!==B.number&&(B.lastDate=lr);let dr=Fi[Hi];dr||(dr=Fi[Hi]={}),dr.date=lr,dr.context=Object.assign(dr.context||{},{$implicit:lr,date:lr,data:Ar,currentMonth:B.number,currentYear:B.year,disabled:ir,focused:!1,selected:!1,today:br}),dr.tabindex=-1,dr.ariaLabel=Li,dr.hidden=!1,T=Xr}ci.number=g.getWeekNumber(Fi.map(Hi=>Hi.date),dt),ci.collapsed="collapsed"===Nt&&Fi[0].date.month!==B.number&&Fi[Fi.length-1].date.month!==B.number}return B}(g,yt,u,b,st.shift()||{}))}),Ue}(this._calendar,B,b,this._i18n,"dayTemplateData"in u||"firstDayOfWeek"in u||"markDisabled"in u||"minDate"in u||"maxDate"in u||"disabled"in u||"outsideDays"in u||"weekdaysVisible"in u);b.months=Ue,b.firstDate=Ue[0].firstDate,b.lastDate=Ue[Ue.length-1].lastDate,"selectedDate"in u&&!l(b.selectedDate,b)&&(b.selectedDate=null),"firstDate"in u&&(!b.focusDate||b.focusDate.before(b.firstDate)||b.focusDate.after(b.lastDate))&&(b.focusDate=B);const st=!this._state.firstDate||this._state.firstDate.year!==b.firstDate.year,dt=!this._state.firstDate||this._state.firstDate.month!==b.firstDate.month;"select"===b.navigation?(("minDate"in u||"maxDate"in u||0===b.selectBoxes.years.length||st)&&(b.selectBoxes.years=function c(g,T,u){if(!g)return[];const b=T?Math.max(T.year,g.year-500):g.year-10,ee=(u?Math.min(u.year,g.year+500):g.year+10)-b+1,Ue=Array(ee);for(let st=0;st<ee;st++)Ue[st]=b+st;return Ue}(b.firstDate,b.minDate,b.maxDate)),("minDate"in u||"maxDate"in u||0===b.selectBoxes.months.length||st)&&(b.selectBoxes.months=function d(g,T,u,b){if(!T)return[];let B=g.getMonths(T.year);if(u&&T.year===u.year){const ee=B.findIndex(Ue=>Ue===u.month);B=B.slice(ee)}if(b&&T.year===b.year){const ee=B.findIndex(Ue=>Ue===b.month);B=B.slice(0,ee+1)}return B}(this._calendar,b.firstDate,b.minDate,b.maxDate))):b.selectBoxes={years:[],months:[]},("arrows"===b.navigation||"select"===b.navigation)&&(dt||st||"minDate"in u||"maxDate"in u||"disabled"in u)&&(b.prevDisabled=b.disabled||function E(g,T,u){const b=Object.assign(g.getPrev(T,"m"),{day:1});return null!=u&&(b.year===u.year&&b.month<u.month||b.year<u.year&&1===u.month)}(this._calendar,b.firstDate,b.minDate),b.nextDisabled=b.disabled||function m(g,T,u){const b=Object.assign(g.getNext(T,"m"),{day:1});return null!=u&&b.after(u)}(this._calendar,b.lastDate,b.maxDate))}return b}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(M),o.LFG(z))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})();var ye=(()=>{return(g=ye||(ye={}))[g.PREV=0]="PREV",g[g.NEXT=1]="NEXT",ye;var g})();let Oe=(()=>{class g{constructor(u){this.i18n=u}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(z))},g.\u0275cmp=o.Xpm({type:g,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(u,b){2&u&&o.ekj("bg-primary",b.selected)("text-white",b.selected)("text-muted",b.isMuted())("outside",b.isMuted())("active",b.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[o.jDz],attrs:ji,decls:1,vars:1,template:function(u,b){1&u&&o._uU(0),2&u&&o.Oqu(b.i18n.getDayNumerals(b.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),g})(),et=(()=>{class g{constructor(u,b){this.i18n=u,this._renderer=b,this.select=new o.vpe,this._month=-1,this._year=-1}changeMonth(u){this.select.emit(new Lr(this.date.year,ho(u),1))}changeYear(u){this.select.emit(new Lr(ho(u),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(z),o.Y36(o.Qsj))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(u,b){if(1&u&&(o.Gf(Xl,7,o.SBq),o.Gf(Fl,7,o.SBq)),2&u){let B;o.iGM(B=o.CRH())&&(b.monthSelect=B.first),o.iGM(B=o.CRH())&&(b.yearSelect=B.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[o.jDz],decls:6,vars:4,consts:function(){let T,u,b,B;return T=$localize`:@@ngb.datepicker.select-month:Select month`,u=$localize`:@@ngb.datepicker.select-month:Select month`,b=$localize`:@@ngb.datepicker.select-year:Select year`,B=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",T,"title",u,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",b,"title",B,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(u,b){1&u&&(o.TgZ(0,"select",0,1),o.NdJ("change",function(ee){return b.changeMonth(ee.target.value)}),o.YNc(2,Na,2,3,"option",2),o.qZA(),o.TgZ(3,"select",3,4),o.NdJ("change",function(ee){return b.changeYear(ee.target.value)}),o.YNc(5,qa,2,2,"option",2),o.qZA()),2&u&&(o.Q6J("disabled",b.disabled),o.xp6(2),o.Q6J("ngForOf",b.months),o.xp6(1),o.Q6J("disabled",b.disabled),o.xp6(2),o.Q6J("ngForOf",b.years))},dependencies:[at.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),g})(),ut=(()=>{class g{constructor(u){this.i18n=u,this.navigation=ye,this.months=[],this.navigate=new o.vpe,this.select=new o.vpe}onClickPrev(u){u.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(u){u.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(z))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[o.jDz],decls:8,vars:4,consts:function(){let T,u,b,B;return T=$localize`:@@ngb.datepicker.previous-month:Previous month`,u=$localize`:@@ngb.datepicker.previous-month:Previous month`,b=$localize`:@@ngb.datepicker.next-month:Next month`,B=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",T,"title",u,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",b,"title",B,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(u,b){1&u&&(o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(ee){return b.onClickPrev(ee)}),o._UZ(2,"span",2),o.qZA()(),o.YNc(3,Po,1,4,"ngb-datepicker-navigation-select",3),o.YNc(4,Fa,1,1,null,4),o.TgZ(5,"div",5)(6,"button",6),o.NdJ("click",function(ee){return b.onClickNext(ee)}),o._UZ(7,"span",2),o.qZA()()),2&u&&(o.xp6(1),o.Q6J("disabled",b.prevDisabled),o.xp6(2),o.Q6J("ngIf",b.showSelect),o.xp6(1),o.Q6J("ngIf",!b.showSelect),o.xp6(2),o.Q6J("disabled",b.nextDisabled))},dependencies:[at.O5,at.ax,et],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),g})();var ct=(()=>{return(g=ct||(ct={}))[g.Tab=9]="Tab",g[g.Enter=13]="Enter",g[g.Escape=27]="Escape",g[g.Space=32]="Space",g[g.PageUp=33]="PageUp",g[g.PageDown=34]="PageDown",g[g.End=35]="End",g[g.Home=36]="Home",g[g.ArrowLeft=37]="ArrowLeft",g[g.ArrowUp=38]="ArrowUp",g[g.ArrowRight=39]="ArrowRight",g[g.ArrowDown=40]="ArrowDown",ct;var g})();let vt=(()=>{class g{processKey(u,b){const{state:B,calendar:ee}=b;switch(u.which){case ct.PageUp:b.focusDate(ee.getPrev(B.focusedDate,u.shiftKey?"y":"m",1));break;case ct.PageDown:b.focusDate(ee.getNext(B.focusedDate,u.shiftKey?"y":"m",1));break;case ct.End:b.focusDate(u.shiftKey?B.maxDate:B.lastDate);break;case ct.Home:b.focusDate(u.shiftKey?B.minDate:B.firstDate);break;case ct.ArrowLeft:b.focusDate(ee.getPrev(B.focusedDate,"d",1));break;case ct.ArrowUp:b.focusDate(ee.getPrev(B.focusedDate,"d",ee.getDaysPerWeek()));break;case ct.ArrowRight:b.focusDate(ee.getNext(B.focusedDate,"d",1));break;case ct.ArrowDown:b.focusDate(ee.getNext(B.focusedDate,"d",ee.getDaysPerWeek()));break;case ct.Enter:case ct.Space:b.focusSelect();break;default:return}u.preventDefault(),u.stopPropagation()}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Ft=(()=>{class g{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=at.Tn.Short}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Qt=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:function(){return function rn(){return new pn}()},providedIn:"root"}),g})(),pn=(()=>{class g extends Qt{fromModel(u){return u&&We(u.year)&&We(u.month)&&We(u.day)?{year:u.year,month:u.month,day:u.day}:null}toModel(u){return u&&We(u.year)&&We(u.month)&&We(u.day)?{year:u.year,month:u.month,day:u.day}:null}}return g.\u0275fac=function(){let T;return function(b){return(T||(T=o.n5z(g)))(b||g)}}(),g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})(),zn=(()=>{class g{constructor(u){this.templateRef=u}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(o.Rgc))},g.\u0275dir=o.lG2({type:g,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),g})(),Nn=(()=>{class g{constructor(u,b,B,ee){this.i18n=u,this.datepicker=b,this._keyboardService=B,this._service=ee}set month(u){this.viewModel=this._service.getMonth(u)}onKeyDown(u){this._keyboardService.processKey(u,this.datepicker)}doSelect(u){!u.context.disabled&&!u.hidden&&this.datepicker.onDateSelect(u.date)}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(z),o.Y36((0,o.Gpc)(()=>Vn)),o.Y36(vt),o.Y36(K))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(u,b){1&u&&o.NdJ("keydown",function(ee){return b.onKeyDown(ee)})},inputs:{month:"month"},standalone:!0,features:[o.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(u,b){1&u&&(o.YNc(0,Es,3,2,"div",0),o.YNc(1,Qi,1,1,"ng-template",1)),2&u&&(o.Q6J("ngIf",b.viewModel.weekdays.length>0),o.xp6(1),o.Q6J("ngForOf",b.viewModel.weeks))},dependencies:[at.O5,at.ax,at.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),g})(),Vn=(()=>{class g{constructor(u,b,B,ee,Ue,st,dt,yt){this._service=u,this._calendar=b,this._i18n=B,this._elementRef=st,this._ngbDateAdapter=dt,this._ngZone=yt,this.injector=(0,o.f3M)(o.zs3),this._controlValue=null,this._destroyed$=new te.x,this._publicState={},this.navigate=new o.vpe,this.dateSelect=new o.vpe,this.onChange=Nt=>{},this.onTouched=()=>{},["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(Nt=>this[Nt]=ee[Nt]),u.dateSelect$.pipe((0,it.R)(this._destroyed$)).subscribe(Nt=>{this.dateSelect.emit(Nt)}),u.model$.pipe((0,it.R)(this._destroyed$)).subscribe(Nt=>{const Pn=Nt.firstDate,fn=this.model?this.model.firstDate:null;this._publicState={maxDate:Nt.maxDate,minDate:Nt.minDate,firstDate:Nt.firstDate,lastDate:Nt.lastDate,focusedDate:Nt.focusDate,months:Nt.months.map(Hi=>Hi.firstDate)};let On=!1;if(!Pn.equals(fn)&&(this.navigate.emit({current:fn?{year:fn.year,month:fn.month}:null,next:{year:Pn.year,month:Pn.month},preventDefault:()=>On=!0}),On&&null!==fn))return void this._service.open(fn);const Xi=Nt.selectedDate,ci=Nt.focusDate,Fi=this.model?this.model.focusDate:null;this.model=Nt,rs(Xi,this._controlValue)&&(this._controlValue=Xi,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Xi))),rs(ci,Fi)&&Fi&&Nt.focusVisible&&this.focus(),Ue.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(u){this._service.focus(Lr.from(u))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,St.q)(1)).subscribe(()=>{const u=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');u&&u.focus()})}navigateTo(u){this._service.open(Lr.from(u?u.day?u:{...u,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const u=(0,le.R)(this._contentEl.nativeElement,"focusin"),b=(0,le.R)(this._contentEl.nativeElement,"focusout"),{nativeElement:B}=this._elementRef;(0,Fe.T)(u,b).pipe((0,Mt.h)(({target:ee,relatedTarget:Ue})=>!(Wt(ee,"ngb-dp-day")&&Wt(Ue,"ngb-dp-day")&&B.contains(ee)&&B.contains(Ue))),(0,it.R)(this._destroyed$)).subscribe(({type:ee})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===ee})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const u={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(b=>u[b]=this[b]),this._service.set(u),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(u){const b={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(B=>B in u).forEach(B=>b[B]=this[B]),this._service.set(b),"startDate"in u){const{currentValue:B,previousValue:ee}=u.startDate;da(ee,B)&&this.navigateTo(this.startDate)}}onDateSelect(u){this._service.focus(u),this._service.select(u,{emitEvent:!0})}onNavigateDateSelect(u){this._service.open(u)}onNavigateEvent(u){switch(u){case ye.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case ye.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}setDisabledState(u){this._service.set({disabled:u})}writeValue(u){this._controlValue=Lr.from(this._ngbDateAdapter.fromModel(u)),this._service.select(this._controlValue)}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(K),o.Y36(M),o.Y36(z),o.Y36(Ft),o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(Qt),o.Y36(o.R0b))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-datepicker"]],contentQueries:function(u,b,B){if(1&u&&o.Suo(B,zn,7),2&u){let ee;o.iGM(ee=o.CRH())&&(b.contentTemplateFromContent=ee.first)}},viewQuery:function(u,b){if(1&u&&(o.Gf(Ac,7),o.Gf(jo,7)),2&u){let B;o.iGM(B=o.CRH())&&(b._defaultDayTemplate=B.first),o.iGM(B=o.CRH())&&(b._contentEl=B.first)}},hostVars:2,hostBindings:function(u,b){2&u&&o.ekj("disabled",b.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[o._Bn([{provide:Pt.JU,useExisting:(0,o.Gpc)(()=>g),multi:!0},K]),o.TTD,o.jDz],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(u,b){if(1&u&&(o.YNc(0,qr,1,5,"ng-template",null,0,o.W1O),o.YNc(2,Qa,1,1,"ng-template",null,1,o.W1O),o.TgZ(4,"div",2),o.YNc(5,Hr,1,7,"ngb-datepicker-navigation",3),o.qZA(),o.TgZ(6,"div",4,5),o.YNc(8,Ms,0,0,"ng-template",6),o.qZA(),o.YNc(9,Yo,0,0,"ng-template",7)),2&u){const B=o.MAs(3);o.xp6(5),o.Q6J("ngIf","none"!==b.navigation),o.xp6(1),o.ekj("ngb-dp-months",!b.contentTemplate),o.xp6(2),o.Q6J("ngTemplateOutlet",b.contentTemplate||(null==b.contentTemplateFromContent?null:b.contentTemplateFromContent.templateRef)||B)("ngTemplateOutletContext",o.VKq(7,ts,b))("ngTemplateOutletInjector",b.injector),o.xp6(1),o.Q6J("ngTemplateOutlet",b.footerTemplate)}},dependencies:[at.O5,at.ax,at.tP,Oe,Nn,ut],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),g})();const zi=(g,T)=>!!T&&T.some(u=>u.contains(g)),Mn=(g,T)=>!T||null!=function Wi(g,T){return!T||typeof g.closest>"u"?null:g.closest(T)}(g,T),si=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function ti(g,T,u,b,B,ee,Ue,st){u&&g.runOutsideAngular((g=>si?()=>setTimeout(()=>g(),100):g)(()=>{const yt=(0,le.R)(T,"keydown").pipe((0,it.R)(B),(0,Mt.h)(fn=>fn.which===ct.Escape),(0,yn.b)(fn=>fn.preventDefault())),Nt=(0,le.R)(T,"mousedown").pipe((0,Kt.U)(fn=>{const On=fn.target;return 2!==fn.button&&!zi(On,Ue)&&("inside"===u?zi(On,ee)&&Mn(On,st):"outside"===u?!zi(On,ee):Mn(On,st)||!zi(On,ee))}),(0,it.R)(B)),Pn=(0,le.R)(T,"mouseup").pipe(sr(Nt),(0,Mt.h)(([fn,On])=>On),(0,Ji.g)(0),(0,it.R)(B));Ye([yt.pipe((0,Kt.U)(fn=>0)),Pn.pipe((0,Kt.U)(fn=>1))]).subscribe(fn=>g.run(()=>b(fn)))}))}const Xn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ai(g){const T=Array.from(g.querySelectorAll(Xn)).filter(u=>-1!==u.tabIndex);return[T[0],T[T.length-1]]}const Wn=(g,T,u,b=!1)=>{g.runOutsideAngular(()=>{const B=(0,le.R)(T,"focusin").pipe((0,it.R)(u),(0,Kt.U)(ee=>ee.target));(0,le.R)(T,"keydown").pipe((0,it.R)(u),(0,Mt.h)(ee=>ee.which===ct.Tab),sr(B)).subscribe(([ee,Ue])=>{const[st,dt]=ai(T);(Ue===st||Ue===T)&&ee.shiftKey&&(dt.focus(),ee.preventDefault()),Ue===dt&&!ee.shiftKey&&(st.focus(),ee.preventDefault())}),b&&(0,le.R)(T,"click").pipe((0,it.R)(u),sr(B),(0,Kt.U)(ee=>ee[1])).subscribe(ee=>ee.focus())})};let Jn=(()=>{class g{constructor(u){this._element=u.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(at.K0))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Co=/\s+/,io=/  +/gi,ms={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},$r=/^left/,po=/^right/,ha=/^start/,Us=/^end/;function Go({placement:g,baseClass:T},u){let b=Array.isArray(g)?g:g.split(Co),ee=b.findIndex(yt=>"auto"===yt);ee>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(yt){null==b.find(Nt=>-1!==Nt.search("^"+yt))&&b.splice(ee++,1,yt)});const Ue=b.map(yt=>function Do(g,T){const[u,b]=ms[g];return T&&b||u}(yt,u.isRTL()));return{placement:Ue.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!T,phase:"write",fn({state:yt}){const Nt=new RegExp(T+"(-[a-z]+)*","gi"),Pn=yt.elements.popper,fn=yt.placement;let On=Pn.className;On=On.replace(Nt,""),On+=` ${function Ea(g,T){let[u,b]=T.split("-");const B=u.replace($r,"start").replace(po,"end");let ee=[B];if(b){let Ue=b;("left"===u||"right"===u)&&(Ue=Ue.replace(ha,"top").replace(Us,"bottom")),ee.push(`${B}-${Ue}`)}return g&&(ee=ee.map(Ue=>`${g}-${Ue}`)),ee.join(" ")}(T,fn)}`,On=On.trim().replace(io," "),Pn.className=On}},$i,Mr,Yn,{enabled:!0,name:"flip",options:{fallbackPlacements:Ue}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Ta(g){return g}function Ga(){const g=(0,o.f3M)(Jn);let T=null;return{createPopper(u){if(!T){let B=(u.updatePopperOptions||Ta)(Go(u,g));T=Nr(u.hostElement,u.targetElement,B)}},update(){T&&T.update()},setOptions(u){if(T){let B=(u.updatePopperOptions||Ta)(Go(u,g));T.setOptions(B)}},destroy(){T&&(T.destroy(),T=null)}}}let yc=(()=>{class g extends Ft{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=u=>u,this.restoreFocus=!0}}return g.\u0275fac=function(){let T;return function(b){return(T||(T=o.n5z(g)))(b||g)}}(),g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function vc(g){return T=>(T.modifiers.push(gr,{name:"offset",options:{offset:()=>g}}),T)}let nc=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:function(){return function bc(){return new au}()},providedIn:"root"}),g})(),au=(()=>{class g extends nc{parse(u){if(null!=u){const b=u.trim().split("-");if(1===b.length&&be(b[0]))return{year:ho(b[0]),month:null,day:null};if(2===b.length&&be(b[0])&&be(b[1]))return{year:ho(b[0]),month:ho(b[1]),day:null};if(3===b.length&&be(b[0])&&be(b[1])&&be(b[2]))return{year:ho(b[0]),month:ho(b[1]),day:ho(b[2])}}return null}format(u){return u?`${u.year}-${be(u.month)?Dn(u.month):""}-${be(u.day)?Dn(u.day):""}`:""}}return g.\u0275fac=function(){let T;return function(b){return(T||(T=o.n5z(g)))(b||g)}}(),g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})(),Sl=(()=>{class g{constructor(u,b,B,ee,Ue,st,dt,yt,Nt,Pn){this._parserFormatter=u,this._elRef=b,this._vcRef=B,this._renderer=ee,this._ngZone=Ue,this._calendar=st,this._dateAdapter=dt,this._document=yt,this._changeDetector=Nt,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._destroyCloseHandlers$=new te.x,this.dateSelect=new o.vpe,this.navigate=new o.vpe,this.closed=new o.vpe,this._onChange=fn=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement","popperOptions"].forEach(fn=>this[fn]=Pn[fn]),this._positioning=Ga()}get disabled(){return this._disabled}set disabled(u){this._disabled=""===u||u&&"false"!==u,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(u){this._onChange=u}registerOnTouched(u){this._onTouched=u}registerOnValidatorChange(u){this._validatorChange=u}setDisabledState(u){this.disabled=u}validate(u){const{value:b}=u;if(null!=b){const B=this._fromDateStruct(this._dateAdapter.fromModel(b));if(!B)return{ngbDate:{invalid:b}};if(this.minDate&&B.before(Lr.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:b}}};if(this.maxDate&&B.after(Lr.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:b}}}}return null}writeValue(u){this._model=this._fromDateStruct(this._dateAdapter.fromModel(u)),this._writeModelValue(this._model)}manualDateChange(u,b=!1){const B=u!==this._inputValue;B&&(this._inputValue=u,this._model=this._fromDateStruct(this._parserFormatter.parse(u))),(B||!b)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):""===u?null:u),b&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){let u;if(this._cRef=this._vcRef.createComponent(Vn),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(b=>{this.writeValue(b),this._onChange(b),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,Wn(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus()),u=G(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this._ngZone.runOutsideAngular(()=>{this._cRef&&(this._positioning.createPopper({hostElement:u,targetElement:this._cRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:b=>this.popperOptions(vc([0,2])(b))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this.positionTarget&&!u)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._setCloseHandlers()}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let u=this._elWithFocus;G(this.restoreFocus)?u=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(u=this.restoreFocus),u&&u.focus?u.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(u){this.isOpen()&&this._cRef.instance.navigateTo(u)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(u){if((u.minDate||u.maxDate)&&(this._validatorChange(),this.isOpen()&&(u.minDate&&(this._cRef.instance.minDate=this.minDate),u.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(u))),u.datepickerClass){const{currentValue:b,previousValue:B}=u.datepickerClass;this._applyPopupClass(b,B)}u.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(u){["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(b=>{void 0!==this[b]&&u.setInput(b,this[b])}),u.setInput("startDate",this.startDate||this._model)}_applyPopupClass(u,b){const B=this._cRef?.location.nativeElement;B&&(u&&this._renderer.addClass(B,u),b&&this._renderer.removeClass(B,b))}_applyPopupStyling(u){this._renderer.addClass(u,"dropdown-menu"),this._renderer.addClass(u,"show"),"body"===this.container&&this._renderer.addClass(u,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(u){u.navigate.subscribe(b=>this.navigate.emit(b)),u.dateSelect.subscribe(b=>{this.dateSelect.emit(b),(!0===this.autoClose||"inside"===this.autoClose)&&this.close()})}_writeModelValue(u){const b=this._parserFormatter.format(u);this._inputValue=b,this._renderer.setProperty(this._elRef.nativeElement,"value",b),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(u)),this._onTouched())}_fromDateStruct(u){const b=u?new Lr(u.year,u.month,u.day):null;return this._calendar.isValid(b)?b:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),ti(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(nc),o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o.Qsj),o.Y36(o.R0b),o.Y36(M),o.Y36(Qt),o.Y36(at.K0),o.Y36(o.sBO),o.Y36(yc))},g.\u0275dir=o.lG2({type:g,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(u,b){1&u&&o.NdJ("input",function(ee){return b.manualDateChange(ee.target.value)})("change",function(ee){return b.manualDateChange(ee.target.value,!0)})("focus",function(){return b.onFocus()})("blur",function(){return b.onBlur()}),2&u&&o.Ikx("disabled",b.disabled)},inputs:{autoClose:"autoClose",contentTemplate:"contentTemplate",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",popperOptions:"popperOptions",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],standalone:!0,features:[o._Bn([{provide:Pt.JU,useExisting:(0,o.Gpc)(()=>g),multi:!0},{provide:Pt.Cf,useExisting:(0,o.Gpc)(()=>g),multi:!0},{provide:Ft,useExisting:yc}]),o.TTD]}),g})();function Bu(g){let T=function wc(g,T,u){let b=Il(g);return Al(b.gy,3,b.march)+31*(T-1)-ro(T,7)*(T-7)+u-1}(g.year,g.month,g.day),u=oh(T);return u.setHours(6,30,3,200),u}function ad(g,T){return T=+T,g.year=g.year+Math.floor((T-1)/12),g.month=Math.floor(((T-1)%12+12)%12)+1,g}function cl(g,T){return g-T*Math.floor(g/T)}function ro(g,T){return Math.trunc(g/T)}function Il(g){let T=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];const u=T.length,b=g+621;let Ue,B=-14,ee=T[0];if(g<ee||g>=T[u-1])throw new Error("Invalid Jalali year "+g);for(let Pn=1;Pn<u;Pn+=1){const fn=T[Pn];if(Ue=fn-ee,g<fn)break;B=B+8*ro(Ue,33)+ro(cl(Ue,33),4),ee=fn}let st=g-ee;B=B+8*ro(st,33)+ro(cl(st,33)+3,4),4===cl(Ue,33)&&Ue-st==4&&(B+=1);const yt=20+B-(ro(b,4)-ro(3*(ro(b,100)+1),4)-150);Ue-st<6&&(st=st-Ue+33*ro(Ue+4,33));let Nt=cl(cl(st+1,33)-1,4);return-1===Nt&&(Nt=4),{leap:Nt,gy:b,march:yt}}function oh(g){let T=4*g+139361631;T=T+4*ro(3*ro(4*g+183187720,146097),4)-3908;const u=5*ro(cl(T,1461),4)+308,b=ro(cl(u,153),5)+1,B=cl(ro(u,153),12)+1,ee=ro(T,1461)-100100+ro(8-B,6);return new Date(ee,B-1,b)}function Al(g,T,u){let b=ro(1461*(g+ro(T-8,6)+100100),4)+ro(153*cl(T+9,12)+2,5)+u-34840408;return b=b-ro(3*ro(g+100100+ro(T-8,6),100),4)+752,b}function lu(g,T){return g<=6?31:g<=11||0===Il(T).leap?30:29}new Date(1882,10,12),new Date(2174,10,25);let Cc=(()=>{class g extends M{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(u,b="d",B=1){switch(u=new Lr(u.year,u.month,u.day),b){case"y":return u=function Xs(g,T){return g.year=+T,g}(u,u.year+B),u.month=1,u.day=1,u;case"m":return(u=ad(u,u.month+B)).day=1,u;case"d":return function ld(g,T){let u=lu(g.month,g.year);if(T<=0)for(;T<=0;)u=lu((g=ad(g,g.month-1)).month,g.year),T+=u;else if(T>u)for(;T>u;)T-=u,u=lu((g=ad(g,g.month+1)).month,g.year);return g.day=T,g}(u,u.day+B);default:return u}}getPrev(u,b="d",B=1){return this.getNext(u,b,-B)}getWeekday(u){const b=Bu(u).getDay();return 0===b?7:b}getWeekNumber(u,b){7===b&&(b=0);const ee=u[(11-b)%7],Ue=Bu(ee);Ue.setDate(Ue.getDate()+4-(Ue.getDay()||7));const st=Ue.getTime(),dt=Bu(new Lr(ee.year,1,1));return Math.floor(Math.round((st-dt.getTime())/864e5)/7)+1}getToday(){return function rc(g){return function sh(g){let ee,Ue,st,T=oh(g).getFullYear(),u=T-621,b=Il(u);if(st=g-Al(T,3,b.march),st>=0){if(st<=185)return Ue=1+ro(st,31),ee=cl(st,31)+1,new Lr(u,Ue,ee);st-=186}else u-=1,st+=179,1===b.leap&&(st+=1);return Ue=7+ro(st,30),ee=cl(st,30)+1,new Lr(u,Ue,ee)}(Al(g.getFullYear(),g.getMonth()+1,g.getDate()))}(new Date)}isValid(u){return null!=u&&We(u.year)&&We(u.month)&&We(u.day)&&!isNaN(Bu(u).getTime())}}return g.\u0275fac=function(){let T;return function(b){return(T||(T=o.n5z(g)))(b||g)}}(),g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac}),g})(),Kc=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=o.oAB({type:g}),g.\u0275inj=o.cJS({imports:[Vn,Nn]}),g})(),jd=(()=>{class g{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=u=>u}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Jc=(()=>{class g{constructor(u,b){this.elementRef=u,this._renderer=b,this._disabled=!1}set disabled(u){this._disabled=""===u||!0===u,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(o.SBq),o.Y36(o.Qsj))},g.\u0275dir=o.lG2({type:g,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(u,b){2&u&&(o.Ikx("tabIndex",b.disabled?-1:0),o.ekj("disabled",b.disabled))},inputs:{disabled:"disabled"},standalone:!0}),g})(),Vu=(()=>{class g{constructor(u,b){this.dropdown=u,this.placement="bottom",this.isOpen=!1,this.nativeElement=b.nativeElement}}return g.\u0275fac=function(u){return new(u||g)(o.Y36((0,o.Gpc)(()=>Uu)),o.Y36(o.SBq))},g.\u0275dir=o.lG2({type:g,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(u,b,B){if(1&u&&o.Suo(B,Jc,4),2&u){let ee;o.iGM(ee=o.CRH())&&(b.menuItems=ee)}},hostVars:4,hostBindings:function(u,b){1&u&&o.NdJ("keydown.ArrowUp",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.ArrowDown",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Home",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.End",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Enter",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Space",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Tab",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Shift.Tab",function(ee){return b.dropdown.onKeyDown(ee)}),2&u&&o.ekj("dropdown-menu",!0)("show",b.dropdown.isOpen())},standalone:!0}),g})(),Ec=(()=>{class g{constructor(u,b){this.dropdown=u,this.nativeElement=b.nativeElement}}return g.\u0275fac=function(u){return new(u||g)(o.Y36((0,o.Gpc)(()=>Uu)),o.Y36(o.SBq))},g.\u0275dir=o.lG2({type:g,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(u,b){2&u&&o.uIk("aria-expanded",b.dropdown.isOpen())},standalone:!0}),g})(),hh=(()=>{class g extends Ec{constructor(u,b){super(u,b)}}return g.\u0275fac=function(u){return new(u||g)(o.Y36((0,o.Gpc)(()=>Uu)),o.Y36(o.SBq))},g.\u0275dir=o.lG2({type:g,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(u,b){1&u&&o.NdJ("click",function(){return b.dropdown.toggle()})("keydown.ArrowUp",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.ArrowDown",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Home",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.End",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Tab",function(ee){return b.dropdown.onKeyDown(ee)})("keydown.Shift.Tab",function(ee){return b.dropdown.onKeyDown(ee)}),2&u&&o.uIk("aria-expanded",b.dropdown.isOpen())},standalone:!0,features:[o._Bn([{provide:Ec,useExisting:(0,o.Gpc)(()=>g)}]),o.qOj]}),g})(),Uu=(()=>{class g{constructor(u,b,B,ee,Ue,st){this._changeDetector=u,this._document=B,this._ngZone=ee,this._elementRef=Ue,this._renderer=st,this._destroyCloseHandlers$=new te.x,this._bodyContainer=null,this._open=!1,this.openChange=new o.vpe,this.placement=b.placement,this.popperOptions=b.popperOptions,this.container=b.container,this.autoClose=b.autoClose,this._positioning=Ga(),this.display=this._elementRef.nativeElement.closest(".navbar")?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe((0,St.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(u){if(u.container&&this._open&&this._applyContainer(this.container),u.placement&&!u.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),u.dropdownClass){const{currentValue:b,previousValue:B}=u.dropdownClass;this._applyCustomDropdownClass(b,B)}u.autoClose&&this._open&&(this.autoClose=u.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:u=>this.popperOptions(vc([0,2])(u))}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),ti(this._ngZone,this._document,this.autoClose,u=>{this.close(),0===u&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(u){const b=u.which,B=this._getMenuElements();let ee=-1,Ue=null;const st=this._isEventFromToggle(u);if(!st&&B.length&&B.forEach((dt,yt)=>{dt.contains(u.target)&&(Ue=dt),dt===this._document.activeElement&&(ee=yt)}),b!==ct.Space&&b!==ct.Enter){if(b!==ct.Tab){if(st||Ue){if(this.open(),B.length){switch(b){case ct.ArrowDown:ee=Math.min(ee+1,B.length-1);break;case ct.ArrowUp:if(this._isDropup()&&-1===ee){ee=B.length-1;break}ee=Math.max(ee-1,0);break;case ct.Home:ee=0;break;case ct.End:ee=B.length-1}B[ee].focus()}u.preventDefault()}}else if(u.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===u.target)return void("body"!==this.container||u.shiftKey?u.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const dt=this._menu.nativeElement.querySelectorAll(Xn);u.shiftKey&&u.target===dt[0]?(this._anchor.nativeElement.focus(),u.preventDefault()):!u.shiftKey&&u.target===dt[dt.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else(0,le.R)(u.target,"focusout").pipe((0,St.q)(1)).subscribe(({relatedTarget:dt})=>{this._elementRef.nativeElement.contains(dt)||this.close()})}}else Ue&&(!0===this.autoClose||"inside"===this.autoClose)&&(0,le.R)(Ue,"click").pipe((0,St.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(u){return this._anchor.nativeElement.contains(u.target)}_getMenuElements(){const u=this._menu;return null==u?[]:u.menuItems.filter(b=>!b.disabled).map(b=>b.elementRef.nativeElement)}_positionMenu(){const u=this._menu;this.isOpen()&&u&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(u){return Array.isArray(u)?u[0]:u.split(" ")[0]}_resetContainer(){const u=this._renderer;this._menu&&u.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(u.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(u=null){if(this._resetContainer(),"body"===u){const b=this._renderer,B=this._menu.nativeElement,ee=this._bodyContainer=this._bodyContainer||b.createElement("div");b.setStyle(ee,"position","absolute"),b.setStyle(B,"position","static"),b.setStyle(ee,"z-index","1055"),b.appendChild(ee,B),b.appendChild(this._document.body,ee)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(u,b){const B="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;B&&(b&&this._renderer.removeClass(B,b),u&&this._renderer.addClass(B,u))}_applyPlacementClasses(u){const b=this._menu;if(b){u||(u=this._getFirstPlacement(this.placement));const B=this._renderer,ee=this._elementRef.nativeElement;B.removeClass(ee,"dropup"),B.removeClass(ee,"dropdown");const{nativeElement:Ue}=b;"static"===this.display?(b.placement=null,B.setAttribute(Ue,"data-bs-popper","static")):(b.placement=u,B.removeAttribute(Ue,"data-bs-popper"));const st=-1!==u.search("^top")?"dropup":"dropdown";B.addClass(ee,st);const dt=this._bodyContainer;dt&&(B.removeClass(dt,"dropup"),B.removeClass(dt,"dropdown"),B.addClass(dt,st))}}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(o.sBO),o.Y36(jd),o.Y36(at.K0),o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.Qsj))},g.\u0275dir=o.lG2({type:g,selectors:[["","ngbDropdown",""]],contentQueries:function(u,b,B){if(1&u&&(o.Suo(B,Vu,5),o.Suo(B,Ec,5)),2&u){let ee;o.iGM(ee=o.CRH())&&(b._menu=ee.first),o.iGM(ee=o.CRH())&&(b._anchor=ee.first)}},hostVars:2,hostBindings:function(u,b){2&u&&o.ekj("show",b.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],standalone:!0,features:[o.TTD]}),g})(),ph=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=o.oAB({type:g}),g.\u0275inj=o.cJS({}),g})();class qc{constructor(T,u,b){this.nodes=T,this.viewRef=u,this.componentRef=b}}let du=(()=>{class g{constructor(u,b){this._el=u,this._zone=b}ngOnInit(){this._zone.onStable.asObservable().pipe((0,St.q)(1)).subscribe(()=>{Sr(this._zone,this._el.nativeElement,(u,b)=>{b&&bi(u),u.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Sr(this._zone,this._el.nativeElement,({classList:u})=>u.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(o.SBq),o.Y36(o.R0b))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(u,b){2&u&&(o.Tol("modal-backdrop"+(b.backdropClass?" "+b.backdropClass:"")),o.ekj("show",!b.animation)("fade",b.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[o.jDz],decls:0,vars:0,template:function(u,b){},encapsulation:2}),g})();class hu{update(T){}close(T){}dismiss(T){}}const _d=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],yd=["animation","backdropClass"];class Zl{constructor(T,u,b,B){this._windowCmptRef=T,this._contentRef=u,this._backdropCmptRef=b,this._beforeDismiss=B,this._closed=new te.x,this._dismissed=new te.x,this._hidden=new te.x,T.instance.dismissEvent.subscribe(ee=>{this.dismiss(ee)}),this.result=new Promise((ee,Ue)=>{this._resolve=ee,this._reject=Ue}),this.result.then(null,()=>{})}_applyWindowOptions(T,u){_d.forEach(b=>{Tt(u[b])&&(T[b]=u[b])})}_applyBackdropOptions(T,u){yd.forEach(b=>{Tt(u[b])&&(T[b]=u[b])})}update(T){this._applyWindowOptions(this._windowCmptRef.instance,T),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,T)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,it.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,it.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(T){this._windowCmptRef&&(this._closed.next(T),this._resolve(T),this._removeModalElements())}_dismiss(T){this._dismissed.next(T),this._reject(T),this._removeModalElements()}dismiss(T){if(this._windowCmptRef)if(this._beforeDismiss){const u=this._beforeDismiss();!function Yt(g){return g&&g.then}(u)?!1!==u&&this._dismiss(T):u.then(b=>{!1!==b&&this._dismiss(T)},()=>{})}else this._dismiss(T)}_removeModalElements(){const T=this._windowCmptRef.instance.hide(),u=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ie.of)(void 0);T.subscribe(()=>{const{nativeElement:b}=this._windowCmptRef.location;b.parentNode.removeChild(b),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),u.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:b}=this._backdropCmptRef.location;b.parentNode.removeChild(b),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ve(T,u).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var ju=(()=>{return(g=ju||(ju={}))[g.BACKDROP_CLICK=0]="BACKDROP_CLICK",g[g.ESC=1]="ESC",ju;var g})();let pu=(()=>{class g{constructor(u,b,B){this._document=u,this._elRef=b,this._zone=B,this._closed$=new te.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new te.x,this.hidden=new te.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":G(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(u){this.dismissEvent.emit(u)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,St.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:u}=this._elRef,b={animation:this.animation,runningTransition:"stop"},Ue=Ve(Sr(this._zone,u,()=>u.classList.remove("show"),b),Sr(this._zone,this._dialogEl.nativeElement,()=>{},b));return Ue.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Ue}_show(){const u={animation:this.animation,runningTransition:"continue"};Ve(Sr(this._zone,this._elRef.nativeElement,(ee,Ue)=>{Ue&&bi(ee),ee.classList.add("show")},u),Sr(this._zone,this._dialogEl.nativeElement,()=>{},u)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:u}=this._elRef;this._zone.runOutsideAngular(()=>{(0,le.R)(u,"keydown").pipe((0,it.R)(this._closed$),(0,Mt.h)(B=>B.which===ct.Escape)).subscribe(B=>{this.keyboard?requestAnimationFrame(()=>{B.defaultPrevented||this._zone.run(()=>this.dismiss(ju.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let b=!1;(0,le.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,it.R)(this._closed$),(0,yn.b)(()=>b=!1),(0,jn.w)(()=>(0,le.R)(u,"mouseup").pipe((0,it.R)(this._closed$),(0,St.q)(1))),(0,Mt.h)(({target:B})=>u===B)).subscribe(()=>{b=!0}),(0,le.R)(u,"click").pipe((0,it.R)(this._closed$)).subscribe(({target:B})=>{u===B&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!b&&this._zone.run(()=>this.dismiss(ju.BACKDROP_CLICK))),b=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:u}=this._elRef;if(!u.contains(document.activeElement)){const b=u.querySelector("[ngbAutofocus]"),B=ai(u)[0];(b||B||u).focus()}}_restoreFocus(){const u=this._document.body,b=this._elWithFocus;let B;B=b&&b.focus&&u.contains(b)?b:u,this._zone.runOutsideAngular(()=>{setTimeout(()=>B.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Sr(this._zone,this._elRef.nativeElement,({classList:u})=>(u.add("modal-static"),()=>u.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return g.\u0275fac=function(u){return new(u||g)(o.Y36(at.K0),o.Y36(o.SBq),o.Y36(o.R0b))},g.\u0275cmp=o.Xpm({type:g,selectors:[["ngb-modal-window"]],viewQuery:function(u,b){if(1&u&&o.Gf(fc,7),2&u){let B;o.iGM(B=o.CRH())&&(b._dialogEl=B.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(u,b){2&u&&(o.uIk("aria-modal",!0)("aria-labelledby",b.ariaLabelledBy)("aria-describedby",b.ariaDescribedBy),o.Tol("modal d-block"+(b.windowClass?" "+b.windowClass:"")),o.ekj("fade",b.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[o.jDz],ngContentSelectors:oa,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(u,b){1&u&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&u&&o.Tol("modal-dialog"+(b.size?" modal-"+b.size:"")+(b.centered?" modal-dialog-centered":"")+b.fullscreenClass+(b.scrollable?" modal-dialog-scrollable":"")+(b.modalDialogClass?" "+b.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),g})(),Hh=(()=>{class g{constructor(u){this._document=u}hide(){const u=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),b=this._document.body,B=b.style,{overflow:ee,paddingRight:Ue}=B;if(u>0){const st=parseFloat(window.getComputedStyle(b).paddingRight);B.paddingRight=`${st+u}px`}return B.overflow="hidden",()=>{u>0&&(B.paddingRight=Ue),B.overflow=ee}}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(at.K0))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Hu=(()=>{class g{constructor(u,b,B,ee,Ue,st,dt){this._applicationRef=u,this._injector=b,this._environmentInjector=B,this._document=ee,this._scrollBar=Ue,this._rendererFactory=st,this._ngZone=dt,this._activeWindowCmptHasChanged=new te.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const yt=this._windowCmpts[this._windowCmpts.length-1];Wn(this._ngZone,yt.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(yt.location.nativeElement)}})}_restoreScrollBar(){const u=this._scrollBarRestoreFn;u&&(this._scrollBarRestoreFn=null,u())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(u,b,B){const ee=B.container instanceof HTMLElement?B.container:Tt(B.container)?this._document.querySelector(B.container):this._document.body,Ue=this._rendererFactory.createRenderer(null,null);if(!ee)throw new Error(`The specified modal container "${B.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const st=new hu,dt=(u=B.injector||u).get(o.lqb,null)||this._environmentInjector,yt=this._getContentRef(u,dt,b,st,B);let Nt=!1!==B.backdrop?this._attachBackdrop(ee):void 0,Pn=this._attachWindowComponent(ee,yt.nodes),fn=new Zl(Pn,yt,Nt,B.beforeDismiss);return this._registerModalRef(fn),this._registerWindowCmpt(Pn),fn.hidden.pipe((0,St.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Ue.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),st.close=On=>{fn.close(On)},st.dismiss=On=>{fn.dismiss(On)},st.update=On=>{fn.update(On)},fn.update(B),1===this._modalRefs.length&&Ue.addClass(this._document.body,"modal-open"),Nt&&Nt.instance&&Nt.changeDetectorRef.detectChanges(),Pn.changeDetectorRef.detectChanges(),fn}get activeInstances(){return this._activeInstances}dismissAll(u){this._modalRefs.forEach(b=>b.dismiss(u))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(u){let b=(0,o.LMc)(du,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(b.hostView),u.appendChild(b.location.nativeElement),b}_attachWindowComponent(u,b){let B=(0,o.LMc)(pu,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:b});return this._applicationRef.attachView(B.hostView),u.appendChild(B.location.nativeElement),B}_getContentRef(u,b,B,ee,Ue){return B?B instanceof o.Rgc?this._createFromTemplateRef(B,ee):G(B)?this._createFromString(B):this._createFromComponent(u,b,B,ee,Ue):new qc([])}_createFromTemplateRef(u,b){const ee=u.createEmbeddedView({$implicit:b,close(Ue){b.close(Ue)},dismiss(Ue){b.dismiss(Ue)}});return this._applicationRef.attachView(ee),new qc([ee.rootNodes],ee)}_createFromString(u){const b=this._document.createTextNode(`${u}`);return new qc([[b]])}_createFromComponent(u,b,B,ee,Ue){const st=o.zs3.create({providers:[{provide:hu,useValue:ee}],parent:u}),dt=(0,o.LMc)(B,{environmentInjector:b,elementInjector:st}),yt=dt.location.nativeElement;return Ue.scrollable&&yt.classList.add("component-host-scrollable"),this._applicationRef.attachView(dt.hostView),new qc([[yt]],dt.hostView,dt)}_setAriaHidden(u){const b=u.parentElement;b&&u!==this._document.body&&(Array.from(b.children).forEach(B=>{B!==u&&"SCRIPT"!==B.nodeName&&(this._ariaHiddenValues.set(B,B.getAttribute("aria-hidden")),B.setAttribute("aria-hidden","true"))}),this._setAriaHidden(b))}_revertAriaHidden(){this._ariaHiddenValues.forEach((u,b)=>{u?b.setAttribute("aria-hidden",u):b.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(u){const b=()=>{const B=this._modalRefs.indexOf(u);B>-1&&(this._modalRefs.splice(B,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(u),this._activeInstances.emit(this._modalRefs),u.result.then(b,b)}_registerWindowCmpt(u){this._windowCmpts.push(u),this._activeWindowCmptHasChanged.next(),u.onDestroy(()=>{const b=this._windowCmpts.indexOf(u);b>-1&&(this._windowCmpts.splice(b,1),this._activeWindowCmptHasChanged.next())})}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(o.lqb),o.LFG(at.K0),o.LFG(Hh),o.LFG(o.FYo),o.LFG(o.R0b))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),vd=(()=>{class g{constructor(u){this._ngbConfig=u,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(u){this._animation=u}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(is))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Hd=(()=>{class g{constructor(u,b,B){this._injector=u,this._modalStack=b,this._config=B}open(u,b={}){const B={...this._config,animation:this._config.animation,...b};return this._modalStack.open(this._injector,u,B)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(u){this._modalStack.dismissAll(u)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return g.\u0275fac=function(u){return new(u||g)(o.LFG(o.zs3),o.LFG(Hu),o.LFG(vd))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Qc=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=o.oAB({type:g}),g.\u0275inj=o.cJS({providers:[Hd]}),g})();new o.OlP("live announcer delay",{providedIn:"root",factory:function Sh(){return 100}})},4523:(At,Le,k)=>{"use strict";function o(Ei,N,ce,ht,It,Jt,xt){try{var Gt=Ei[Jt](xt),bn=Gt.value}catch(di){return void ce(di)}Gt.done?N(bn):Promise.resolve(bn).then(ht,It)}function V(Ei){return function(){var N=this,ce=arguments;return new Promise(function(ht,It){var Jt=Ei.apply(N,ce);function xt(bn){o(Jt,ht,It,xt,Gt,"next",bn)}function Gt(bn){o(Jt,ht,It,xt,Gt,"throw",bn)}xt(void 0)})}}k.d(Le,{TT:()=>Ot,Gd:()=>Cn,CI:()=>Kn,Wm:()=>In});var t=k(1571),ie=k(9898),te=k(7579);class le extends te.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(N){const{hasError:ce,_hasValue:ht,_value:It,thrownError:Jt,isStopped:xt,_isComplete:Gt}=this;ce?N.error(Jt):(xt||Gt)&&(ht&&N.next(It),N.complete())}next(N){this.isStopped||(this._value=N,this._hasValue=!0)}complete(){const{_hasValue:N,_value:ce,_isComplete:ht}=this;ht||(this._isComplete=!0,N&&super.next(ce),super.complete())}}var U=k(727),we=k(4968),de=k(6805),Se=k(6451),Ye=k(590),je=k(3900),ke=k(9718),De=k(9300),ze=k(8675),Qe=k(8372),lt=k(8505),tt=k(2722),Ve=k(5698),Fe=k(6895);const Ne=["content"],Be=["*"],it=["container"];function Mt(Ei,N){1&Ei&&t.GkF(0)}const St=function(Ei){return{$implicit:Ei}};function Kt(Ei,N){if(1&Ei&&(t.ynx(0),t.TgZ(1,"mgl-marker",3),t.YNc(2,Mt,1,0,"ng-container",4),t.qZA(),t.BQk()),2&Ei){const ce=t.oxw().$implicit,ht=t.oxw();t.xp6(1),t.Q6J("feature",ce),t.xp6(1),t.Q6J("ngTemplateOutlet",ht.clusterPointTpl)("ngTemplateOutletContext",t.VKq(3,St,ce))}}function wn(Ei,N){1&Ei&&t.GkF(0)}function ln(Ei,N){if(1&Ei&&(t.ynx(0),t.TgZ(1,"mgl-marker",3),t.YNc(2,wn,1,0,"ng-container",4),t.qZA(),t.BQk()),2&Ei){const ce=t.oxw().$implicit,ht=t.oxw();t.xp6(1),t.Q6J("feature",ce),t.xp6(1),t.Q6J("ngTemplateOutlet",ht.pointTpl)("ngTemplateOutletContext",t.VKq(3,St,ce))}}function jn(Ei,N){if(1&Ei&&(t.ynx(0),t.YNc(1,Kt,3,5,"ng-container",2),t.YNc(2,ln,3,5,"ng-container",2),t.BQk()),2&Ei){const ce=N.$implicit;t.xp6(1),t.Q6J("ngIf",ce.properties.cluster),t.xp6(1),t.Q6J("ngIf",!ce.properties.cluster)}}const yn=function(){return{"circle-radius":0}},Yr=new t.OlP("MapboxApiKey");class Zn{constructor(N,ce){this.zone=N,this.MAPBOX_API_KEY=ce,this.mapCreated=new le,this.mapLoaded=new le,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new U.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(N){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{N.customMapboxApiUrl&&(ie.baseApiUrl=N.customMapboxApiUrl),this.createMap({...N.mapOptions,accessToken:N.accessToken||this.MAPBOX_API_KEY||""}),this.hookEvents(N.mapEvents),this.mapEvents=N.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),N.mapEvents.mapCreate.observed&&this.zone.run(()=>{N.mapEvents.mapCreate.emit(this.mapInstance)})})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateProjection(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setProjection(N)})}updateMinZoom(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(N)})}updateMaxZoom(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(N)})}updateMinPitch(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(N)})}updateMaxPitch(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(N)})}updateRenderWorldCopies(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(N)})}updateScrollZoom(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(N){return this.zone.runOutsideAngular(()=>{N?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(N)})}updateMaxBounds(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(N)})}changeCanvasCursor(N){this.mapInstance.getCanvasContainer().style.cursor=N}queryRenderedFeatures(N,ce){return this.mapInstance.queryRenderedFeatures(N,ce)}panTo(N,ce){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(N,ce)})}move(N,ce,ht,It,Jt,xt){return this.zone.runOutsideAngular(()=>{this.mapInstance[N]({...ce,zoom:ht??this.mapInstance.getZoom(),center:It??this.mapInstance.getCenter(),bearing:Jt??this.mapInstance.getBearing(),pitch:xt??this.mapInstance.getPitch()})})}addLayer(N,ce,ht){this.zone.runOutsideAngular(()=>{Object.keys(N.layerOptions).forEach(It=>{void 0===N.layerOptions[It]&&delete N.layerOptions[It]}),this.mapInstance.addLayer(N.layerOptions,ht),ce&&((N.layerEvents.layerClick.observed||N.layerEvents.click.observed)&&this.mapInstance.on("click",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerClick.emit(It),N.layerEvents.click.emit(It)})}),(N.layerEvents.layerDblClick.observed||N.layerEvents.dblClick.observed)&&this.mapInstance.on("dblclick",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerDblClick.emit(It),N.layerEvents.dblClick.emit(It)})}),(N.layerEvents.layerMouseDown.observed||N.layerEvents.mouseDown.observed)&&this.mapInstance.on("mousedown",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseDown.emit(It),N.layerEvents.mouseDown.emit(It)})}),(N.layerEvents.layerMouseUp.observed||N.layerEvents.mouseUp.observed)&&this.mapInstance.on("mouseup",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseUp.emit(It),N.layerEvents.mouseUp.emit(It)})}),(N.layerEvents.layerMouseEnter.observed||N.layerEvents.mouseEnter.observed)&&this.mapInstance.on("mouseenter",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseEnter.emit(It),N.layerEvents.mouseEnter.emit(It)})}),(N.layerEvents.layerMouseLeave.observed||N.layerEvents.mouseLeave.observed)&&this.mapInstance.on("mouseleave",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseLeave.emit(It),N.layerEvents.mouseLeave.emit(It)})}),(N.layerEvents.layerMouseMove.observed||N.layerEvents.mouseMove.observed)&&this.mapInstance.on("mousemove",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseMove.emit(It),N.layerEvents.mouseMove.emit(It)})}),(N.layerEvents.layerMouseOver.observed||N.layerEvents.mouseOver.observed)&&this.mapInstance.on("mouseover",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseOver.emit(It),N.layerEvents.mouseOver.emit(It)})}),(N.layerEvents.layerMouseOut.observed||N.layerEvents.mouseOut.observed)&&this.mapInstance.on("mouseout",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerMouseOut.emit(It),N.layerEvents.mouseOut.emit(It)})}),(N.layerEvents.layerContextMenu.observed||N.layerEvents.contextMenu.observed)&&this.mapInstance.on("contextmenu",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerContextMenu.emit(It),N.layerEvents.contextMenu.emit(It)})}),(N.layerEvents.layerTouchStart.observed||N.layerEvents.touchStart.observed)&&this.mapInstance.on("touchstart",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerTouchStart.emit(It),N.layerEvents.touchStart.emit(It)})}),(N.layerEvents.layerTouchEnd.observed||N.layerEvents.touchEnd.observed)&&this.mapInstance.on("touchend",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerTouchEnd.emit(It),N.layerEvents.touchEnd.emit(It)})}),(N.layerEvents.layerTouchCancel.observed||N.layerEvents.touchCancel.observed)&&this.mapInstance.on("touchcancel",N.layerOptions.id,It=>{this.zone.run(()=>{N.layerEvents.layerTouchCancel.emit(It),N.layerEvents.touchCancel.emit(It)})}))})}removeLayer(N){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(N)&&this.mapInstance.removeLayer(N)})}addMarker(N){const ce={offset:N.markersOptions.offset,anchor:N.markersOptions.anchor,draggable:!!N.markersOptions.draggable,rotationAlignment:N.markersOptions.rotationAlignment,pitchAlignment:N.markersOptions.pitchAlignment,clickTolerance:N.markersOptions.clickTolerance};N.markersOptions.element.childNodes.length>0&&(ce.element=N.markersOptions.element);const ht=new ie.Marker(ce);return(N.markersEvents.markerDragStart.observed||N.markersEvents.dragStart.observed)&&ht.on("dragstart",Jt=>{if(Jt){const{target:xt}=Jt;this.zone.run(()=>{N.markersEvents.markerDragStart.emit(xt),N.markersEvents.dragStart.emit(xt)})}}),(N.markersEvents.markerDrag.observed||N.markersEvents.drag.observed)&&ht.on("drag",Jt=>{if(Jt){const{target:xt}=Jt;this.zone.run(()=>{N.markersEvents.markerDrag.emit(xt),N.markersEvents.drag.emit(xt)})}}),(N.markersEvents.markerDragEnd.observed||N.markersEvents.dragEnd.observed)&&ht.on("dragend",Jt=>{if(Jt){const{target:xt}=Jt;this.zone.run(()=>{N.markersEvents.markerDragEnd.emit(xt),N.markersEvents.dragEnd.emit(xt)})}}),ht.setLngLat(N.markersOptions.feature?N.markersOptions.feature.geometry.coordinates:N.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(ht.addTo(this.mapInstance),ht))}removeMarker(N){this.markersToRemove.push(N)}createPopup(N,ce){return this.zone.runOutsideAngular(()=>{Object.keys(N.popupOptions).forEach(It=>void 0===N.popupOptions[It]&&delete N.popupOptions[It]);const ht=new ie.Popup(N.popupOptions);return ht.setDOMContent(ce),(N.popupEvents.popupClose.observed||N.popupEvents.close.observed)&&ht.on("close",()=>{this.zone.run(()=>{N.popupEvents.popupClose.emit(),N.popupEvents.close.emit()})}),(N.popupEvents.popupOpen.observed||N.popupEvents.open.observed)&&ht.on("open",()=>{this.zone.run(()=>{N.popupEvents.popupOpen.emit(),N.popupEvents.open.emit()})}),ht})}addPopupToMap(N,ce,ht=!1){return this.zone.runOutsideAngular(()=>{ht&&N._listeners&&delete N._listeners.open,N.setLngLat(ce),N.addTo(this.mapInstance)})}addPopupToMarker(N,ce){return this.zone.runOutsideAngular(()=>{N.setPopup(ce)})}removePopupFromMap(N,ce=!1){ce&&N._listeners&&delete N._listeners.close,this.popupsToRemove.push(N)}removePopupFromMarker(N){return this.zone.runOutsideAngular(()=>{N.setPopup(void 0)})}addControl(N,ce){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(N,ce)})}removeControl(N){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(N)})}loadAndAddImage(N,ce,ht){var It=this;return V(function*(){return It.zone.runOutsideAngular(()=>new Promise((Jt,xt)=>{It.mapInstance.loadImage(ce,(Gt,bn)=>{Gt?xt(Gt):(It.addImage(N,bn,ht),Jt())})}))})()}addImage(N,ce,ht){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(N,ce,ht)})}removeImage(N){this.imageIdsToRemove.push(N)}addSource(N,ce){return this.zone.runOutsideAngular(()=>{Object.keys(ce).forEach(ht=>void 0===ce[ht]&&delete ce[ht]),this.mapInstance.addSource(N,ce)})}getSource(N){return this.mapInstance.getSource(N)}removeSource(N){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(N).forEach(ce=>this.mapInstance.removeLayer(ce.id)),this.mapInstance.removeSource(N)})}setAllLayerPaintProperty(N,ce){return this.zone.runOutsideAngular(()=>{Object.keys(ce).forEach(ht=>{this.mapInstance.setPaintProperty(N,ht,ce[ht])})})}setAllLayerLayoutProperty(N,ce){return this.zone.runOutsideAngular(()=>{Object.keys(ce).forEach(ht=>{this.mapInstance.setLayoutProperty(N,ht,ce[ht])})})}setLayerFilter(N,ce){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(N,ce)})}setLayerBefore(N,ce){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(N,ce)})}setLayerZoomRange(N,ce,ht){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(N,ce||0,ht||20)})}fitBounds(N,ce){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(N,ce)})}fitScreenCoordinates(N,ce,ht){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(N[0],N[1],ce,ht)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(N){t.R0b.assertNotInAngularZone(),Object.keys(N).forEach(ht=>{void 0===N[ht]&&delete N[ht]}),this.mapInstance=new ie.Map(N),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(N.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const N of this.markersToRemove)N.remove();this.markersToRemove=[]}removePopups(){for(const N of this.popupsToRemove)N.remove();this.popupsToRemove=[]}removeImages(){for(const N of this.imageIdsToRemove)this.mapInstance.removeImage(N);this.imageIdsToRemove=[]}findLayersBySourceId(N){const ce=this.mapInstance.getStyle().layers;return null==ce?[]:ce.filter(ht=>"source"in ht&&ht.source===N)}hookEvents(N){this.mapInstance.on("load",ce=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{N.mapLoad.emit(ce),N.load.emit(ce.target)})}),(N.mapResize.observed||N.resize.observed)&&this.mapInstance.on("resize",ce=>this.zone.run(()=>{N.mapResize.emit(ce),N.resize.emit(ce)})),(N.mapRemove.observed||N.remove.observed)&&this.mapInstance.on("remove",ce=>this.zone.run(()=>{N.mapRemove.emit(ce),N.remove.emit(ce)})),(N.mapMouseDown.observed||N.mouseDown.observed)&&this.mapInstance.on("mousedown",ce=>this.zone.run(()=>{N.mapMouseDown.emit(ce),N.mouseDown.emit(ce)})),(N.mapMouseUp.observed||N.mouseUp.observed)&&this.mapInstance.on("mouseup",ce=>this.zone.run(()=>{N.mapMouseUp.emit(ce),N.mouseUp.emit(ce)})),(N.mapMouseMove.observed||N.mouseMove.observed)&&this.mapInstance.on("mousemove",ce=>this.zone.run(()=>{N.mapMouseMove.emit(ce),N.mouseMove.emit(ce)})),(N.mapClick.observed||N.click.observed)&&this.mapInstance.on("click",ce=>this.zone.run(()=>{N.mapClick.emit(ce),N.click.emit(ce)})),(N.mapDblClick.observed||N.dblClick.observed)&&this.mapInstance.on("dblclick",ce=>this.zone.run(()=>{N.mapDblClick.emit(ce),N.dblClick.emit(ce)})),(N.mapMouseOver.observed||N.mouseOver.observed)&&this.mapInstance.on("mouseover",ce=>this.zone.run(()=>{N.mapMouseOver.emit(ce),N.mouseOver.emit(ce)})),(N.mapMouseOut.observed||N.mouseOut.observed)&&this.mapInstance.on("mouseout",ce=>this.zone.run(()=>{N.mapMouseOut.emit(ce),N.mouseOut.emit(ce)})),(N.mapContextMenu.observed||N.contextMenu.observed)&&this.mapInstance.on("contextmenu",ce=>this.zone.run(()=>{N.mapContextMenu.emit(ce),N.contextMenu.emit(ce)})),(N.mapTouchStart.observed||N.touchStart.observed)&&this.mapInstance.on("touchstart",ce=>this.zone.run(()=>{N.mapTouchStart.emit(ce),N.touchStart.emit(ce)})),(N.mapTouchEnd.observed||N.touchEnd.observed)&&this.mapInstance.on("touchend",ce=>this.zone.run(()=>{N.mapTouchEnd.emit(ce),N.touchEnd.emit(ce)})),(N.mapTouchMove.observed||N.touchMove.observed)&&this.mapInstance.on("touchmove",ce=>this.zone.run(()=>{N.mapTouchMove.emit(ce),N.touchMove.emit(ce)})),(N.mapTouchCancel.observed||N.touchCancel.observed)&&this.mapInstance.on("touchcancel",ce=>this.zone.run(()=>{N.mapTouchCancel.emit(ce),N.touchCancel.emit(ce)})),(N.mapWheel.observed||N.wheel.observed)&&this.mapInstance.on("wheel",ce=>this.zone.run(()=>{N.mapWheel.emit(ce),N.wheel.emit(ce)})),N.moveStart.observed&&this.mapInstance.on("movestart",ce=>this.zone.run(()=>N.moveStart.emit(ce))),N.move.observed&&this.mapInstance.on("move",ce=>this.zone.run(()=>N.move.emit(ce))),N.moveEnd.observed&&this.mapInstance.on("moveend",ce=>this.zone.run(()=>N.moveEnd.emit(ce))),(N.mapDragStart.observed||N.dragStart.observed)&&this.mapInstance.on("dragstart",ce=>this.zone.run(()=>{N.mapDragStart.emit(ce),N.dragStart.emit(ce)})),(N.mapDrag.observed||N.drag.observed)&&this.mapInstance.on("drag",ce=>this.zone.run(()=>{N.mapDrag.emit(ce),N.drag.emit(ce)})),(N.mapDragEnd.observed||N.dragEnd.observed)&&this.mapInstance.on("dragend",ce=>this.zone.run(()=>{N.mapDragEnd.emit(ce),N.dragEnd.emit(ce)})),N.zoomStart.observed&&this.mapInstance.on("zoomstart",ce=>this.zone.run(()=>N.zoomStart.emit(ce))),N.zoomEvt.observed&&this.mapInstance.on("zoom",ce=>this.zone.run(()=>N.zoomEvt.emit(ce))),N.zoomEnd.observed&&this.mapInstance.on("zoomend",ce=>this.zone.run(()=>N.zoomEnd.emit(ce))),N.rotateStart.observed&&this.mapInstance.on("rotatestart",ce=>this.zone.run(()=>N.rotateStart.emit(ce))),N.rotate.observed&&this.mapInstance.on("rotate",ce=>this.zone.run(()=>N.rotate.emit(ce))),N.rotateEnd.observed&&this.mapInstance.on("rotateend",ce=>this.zone.run(()=>N.rotateEnd.emit(ce))),N.pitchStart.observed&&this.mapInstance.on("pitchstart",ce=>this.zone.run(()=>N.pitchStart.emit(ce))),N.pitchEvt.observed&&this.mapInstance.on("pitch",ce=>this.zone.run(()=>N.pitchEvt.emit(ce))),N.pitchEnd.observed&&this.mapInstance.on("pitchend",ce=>this.zone.run(()=>N.pitchEnd.emit(ce))),N.boxZoomStart.observed&&this.mapInstance.on("boxzoomstart",ce=>this.zone.run(()=>N.boxZoomStart.emit(ce))),N.boxZoomEnd.observed&&this.mapInstance.on("boxzoomend",ce=>this.zone.run(()=>N.boxZoomEnd.emit(ce))),N.boxZoomCancel.observed&&this.mapInstance.on("boxzoomcancel",ce=>this.zone.run(()=>N.boxZoomCancel.emit(ce))),N.webGlContextLost.observed&&this.mapInstance.on("webglcontextlost",ce=>this.zone.run(()=>N.webGlContextLost.emit(ce))),N.webGlContextRestored.observed&&this.mapInstance.on("webglcontextrestored",ce=>this.zone.run(()=>N.webGlContextRestored.emit(ce))),N.render.observed&&this.mapInstance.on("render",ce=>this.zone.run(()=>N.render.emit(ce))),(N.mapError.observed||N.error.observed)&&this.mapInstance.on("error",ce=>this.zone.run(()=>{N.mapError.emit(ce),N.error.emit(ce)})),N.data.observed&&this.mapInstance.on("data",ce=>this.zone.run(()=>N.data.emit(ce))),N.styleData.observed&&this.mapInstance.on("styledata",ce=>this.zone.run(()=>N.styleData.emit(ce))),N.sourceData.observed&&this.mapInstance.on("sourcedata",ce=>this.zone.run(()=>N.sourceData.emit(ce))),N.dataLoading.observed&&this.mapInstance.on("dataloading",ce=>this.zone.run(()=>N.dataLoading.emit(ce))),N.styleDataLoading.observed&&this.mapInstance.on("styledataloading",ce=>this.zone.run(()=>N.styleDataLoading.emit(ce))),N.sourceDataLoading.observed&&this.mapInstance.on("sourcedataloading",ce=>this.zone.run(()=>N.sourceDataLoading.emit(ce))),N.styleImageMissing.observed&&this.mapInstance.on("styleimagemissing",ce=>this.zone.run(()=>N.styleImageMissing.emit(ce))),N.idle.observed&&this.mapInstance.on("idle",ce=>this.zone.run(()=>N.idle.emit(ce)))}assign(N,ce,ht){if("string"==typeof ce&&(ce=ce.split(".")),ce.length>1){const It=ce.shift();this.assign(N[It]="[object Object]"===Object.prototype.toString.call(N[It])?N[It]:{},ce,ht)}else N[ce[0]]=ht}static#e=this.\u0275fac=function(ce){return new(ce||Zn)(t.LFG(t.R0b),t.LFG(Yr,8))};static#t=this.\u0275prov=t.Yz7({token:Zn,factory:Zn.\u0275fac})}class sr{constructor(N){this.container=N}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}class Ji{constructor(N){this.mapService=N,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new sr(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}static#e=this.\u0275fac=function(ce){return new(ce||Ji)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Ji,selectors:[["mgl-control"]],viewQuery:function(ce,ht){if(1&ce&&t.Gf(Ne,7),2&ce){let It;t.iGM(It=t.CRH())&&(ht.content=It.first)}},inputs:{position:"position"},ngContentSelectors:Be,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(ce,ht){1&ce&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},encapsulation:2,changeDetection:0})}class bt{constructor(N,ce){this.mapService=N,this.controlComponent=ce}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const N={};void 0!==this.compact&&(N.compact=this.compact),void 0!==this.customAttribution&&(N.customAttribution=this.customAttribution),this.controlComponent.control=new ie.AttributionControl(N),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(ce){return new(ce||bt)(t.Y36(Zn),t.Y36(Ji,1))};static#t=this.\u0275dir=t.lG2({type:bt,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}})}class at{constructor(N,ce){this.mapService=N,this.controlComponent=ce}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new ie.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(ce){return new(ce||at)(t.Y36(Zn),t.Y36(Ji,1))};static#t=this.\u0275dir=t.lG2({type:at,selectors:[["","mglFullscreen",""]],hostBindings:function(ce,ht){1&ce&&t.NdJ("webkitfullscreenchange",function(Jt){return ht.onFullscreen(Jt.target)},!1,t.Jf7)},inputs:{container:"container"}})}class Pt{constructor(N,ce){this.mapService=N,this.controlComponent=ce,this.geolocate=new t.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const N={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation,showUserHeading:this.showUserHeading};Object.keys(N).forEach(ce=>{void 0===N[ce]&&delete N[ce]}),this.controlComponent.control=new ie.GeolocateControl(N),this.controlComponent.control.on("geolocate",ce=>{this.geolocate.emit(ce)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(ce){return new(ce||Pt)(t.Y36(Zn),t.Y36(Ji,1))};static#t=this.\u0275dir=t.lG2({type:Pt,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation",showUserHeading:"showUserHeading"},outputs:{geolocate:"geolocate"}})}class Vt{constructor(N,ce){this.mapService=N,this.controlComponent=ce}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const N={};void 0!==this.showCompass&&(N.showCompass=this.showCompass),void 0!==this.showZoom&&(N.showZoom=this.showZoom),this.controlComponent.control=new ie.NavigationControl(N),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(ce){return new(ce||Vt)(t.Y36(Zn),t.Y36(Ji,1))};static#t=this.\u0275dir=t.lG2({type:Vt,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}})}class qt{constructor(N,ce){this.mapService=N,this.controlComponent=ce}ngOnChanges(N){N.unit&&!N.unit.isFirstChange()&&this.controlComponent.control.setUnit(N.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const N={};void 0!==this.maxWidth&&(N.maxWidth=this.maxWidth),void 0!==this.unit&&(N.unit=this.unit),this.controlComponent.control=new ie.ScaleControl(N),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}static#e=this.\u0275fac=function(ce){return new(ce||qt)(t.Y36(Zn),t.Y36(Ji,1))};static#t=this.\u0275dir=t.lG2({type:qt,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[t.TTD]})}const _t=(Ei,N,ce)=>{console.warn(`[ngx-mapbox-gl]: ${Ei}: ${N} is deprecated, please use ${ce} instead.`)};class Ot{constructor(N){this.mapService=N,this.layerClick=new t.vpe,this.layerDblClick=new t.vpe,this.layerMouseDown=new t.vpe,this.layerMouseUp=new t.vpe,this.layerMouseEnter=new t.vpe,this.layerMouseLeave=new t.vpe,this.layerMouseMove=new t.vpe,this.layerMouseOver=new t.vpe,this.layerMouseOut=new t.vpe,this.layerContextMenu=new t.vpe,this.layerTouchStart=new t.vpe,this.layerTouchEnd=new t.vpe,this.layerTouchCancel=new t.vpe,this.click=new t.vpe,this.dblClick=new t.vpe,this.mouseDown=new t.vpe,this.mouseUp=new t.vpe,this.mouseEnter=new t.vpe,this.mouseLeave=new t.vpe,this.mouseMove=new t.vpe,this.mouseOver=new t.vpe,this.mouseOut=new t.vpe,this.contextMenu=new t.vpe,this.touchStart=new t.vpe,this.touchEnd=new t.vpe,this.touchCancel=new t.vpe,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,je.w)(()=>(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,ke.h)(!1),(0,De.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,ze.O)(!0)))).subscribe(N=>this.init(N))}ngOnChanges(N){this.layerAdded&&(N.paint&&!N.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,N.paint.currentValue),N.layout&&!N.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,N.layout.currentValue),N.filter&&!N.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,N.filter.currentValue),N.before&&!N.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,N.before.currentValue),(N.minzoom&&!N.minzoom.isFirstChange()||N.maxzoom&&!N.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.mapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(N){this.mapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},N,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const N=_t.bind(void 0,Ot.name);this.click.observed&&N("click","layerClick"),this.dblClick.observed&&N("dblClick","layerDblClick"),this.mouseDown.observed&&N("mouseDown","layerMouseDown"),this.mouseUp.observed&&N("mouseUp","layerMouseUp"),this.mouseEnter.observed&&N("mouseEnter","layerMouseEnter"),this.mouseLeave.observed&&N("mouseLeave","layerMouseLeave"),this.mouseMove.observed&&N("mouseMove","layerMouseMove"),this.mouseOver.observed&&N("mouseOver","layerMouseOver"),this.mouseOut.observed&&N("mouseOut","layerMouseOut"),this.contextMenu.observed&&N("contextMenu","layerContextMenu"),this.touchStart.observed&&N("touchStart","layerTouchStart"),this.touchEnd.observed&&N("touchEnd","layerTouchEnd"),this.touchCancel.observed&&N("touchCancel","layerTouchCancel")}static#e=this.\u0275fac=function(ce){return new(ce||Ot)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Ot,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2})}class un{constructor(N,ce){this.mapService=N,this.zone=ce,this.updateFeatureData=new te.x,this.sub=new U.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){if(this.sourceAdded&&((N.maxzoom&&!N.maxzoom.isFirstChange()||N.attribution&&!N.attribution.isFirstChange()||N.buffer&&!N.buffer.isFirstChange()||N.tolerance&&!N.tolerance.isFirstChange()||N.cluster&&!N.cluster.isFirstChange()||N.clusterRadius&&!N.clusterRadius.isFirstChange()||N.clusterMaxZoom&&!N.clusterMaxZoom.isFirstChange()||N.clusterMinPoints&&!N.clusterMinPoints.isFirstChange()||N.clusterProperties&&!N.clusterProperties.isFirstChange()||N.lineMetrics&&!N.lineMetrics.isFirstChange()||N.generateId&&!N.generateId.isFirstChange()||N.promoteId&&!N.promoteId.isFirstChange()||N.filter&&!N.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),N.data&&!N.data.isFirstChange())){const ce=this.mapService.getSource(this.id);if(void 0===ce)return;ce.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(N){var ce=this;return V(function*(){const ht=ce.mapService.getSource(ce.id);return ce.zone.run(V(function*(){return new Promise((It,Jt)=>{ht.getClusterExpansionZoom(N,(xt,Gt)=>{xt?Jt(xt):It(Gt)})})}))})()}getClusterChildren(N){var ce=this;return V(function*(){const ht=ce.mapService.getSource(ce.id);return ce.zone.run(V(function*(){return new Promise((It,Jt)=>{ht.getClusterChildren(N,(xt,Gt)=>{xt?Jt(xt):It(Gt)})})}))})()}getClusterLeaves(N,ce,ht){var It=this;return V(function*(){const Jt=It.mapService.getSource(It.id);return It.zone.run(V(function*(){return new Promise((xt,Gt)=>{Jt.getClusterLeaves(N,ce,ht,(bn,di)=>{bn?Gt(bn):xt(di)})})}))})()}_addFeature(N){this.data.features.push(N),this.updateFeatureData.next(null)}_removeFeature(N){const ce=this.data,ht=ce.features.indexOf(N);ht>-1&&ce.features.splice(ht,1),this.updateFeatureData.next(null)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const ce=this.updateFeatureData.pipe((0,Qe.b)(0)).subscribe(()=>{const ht=this.mapService.getSource(this.id);void 0!==ht&&ht.setData(this.data)});this.sub.add(ce),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||un)(t.Y36(Zn),t.Y36(t.R0b))};static#t=this.\u0275cmp=t.Xpm({type:un,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class Qn{constructor(N){this.GeoJSONSourceComponent=N,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(N){this.feature.geometry.coordinates=N,this.GeoJSONSourceComponent.updateFeatureData.next(null)}static#e=this.\u0275fac=function(ce){return new(ce||Qn)(t.Y36((0,t.Gpc)(()=>un)))};static#t=this.\u0275cmp=t.Xpm({type:Qn,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class En{constructor(N,ce,ht){this.mapService=N,this.ngZone=ce,this.featureComponent=ht,this.featureDragStart=new t.vpe,this.featureDragEnd=new t.vpe,this.featureDrag=new t.vpe,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.drag=new t.vpe,this.sub=new U.w0}ngOnInit(){let N,ce,ht;if(this.warnDeprecatedOutputs(),!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(N=this.layer.layerMouseEnter,ce=this.layer.layerMouseLeave,ht=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(N,ce,ht)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(N,ce,ht){let It=!1,Jt=!1;this.mapService.mapCreated$.subscribe(()=>{const xt=(0,we.R)(this.mapService.mapInstance,"mouseup"),Gt=N.pipe((0,De.h)(()=>!It),(0,De.h)(fi=>this.filterFeature(fi)),(0,lt.b)(()=>{Jt=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,je.w)(()=>(0,we.R)(this.mapService.mapInstance,"mousedown").pipe((0,tt.R)(ce)))),bn=Gt.pipe((0,je.w)(()=>(0,we.R)(this.mapService.mapInstance,"mousemove").pipe((0,tt.R)(xt)))),di=Gt.pipe((0,je.w)(()=>xt.pipe((0,Ve.q)(1))));this.sub.add(Gt.subscribe(fi=>{It=!0,(this.featureDragStart.observed||this.dragStart.observed)&&this.ngZone.run(()=>{this.featureDragStart.emit(fi),this.dragStart.emit(fi)})})),this.sub.add(bn.subscribe(fi=>{ht([fi.lngLat.lng,fi.lngLat.lat]),(this.featureDrag.observed||this.drag.observed)&&this.ngZone.run(()=>{this.featureDrag.emit(fi),this.drag.emit(fi)})})),this.sub.add(di.subscribe(fi=>{It=!1,(this.featureDragEnd.observed||this.dragEnd.observed)&&this.ngZone.run(()=>{this.featureDragEnd.emit(fi),this.dragEnd.emit(fi)}),Jt||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(ce.pipe((0,lt.b)(()=>Jt=!1),(0,De.h)(()=>!It)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(N){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(N.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}warnDeprecatedOutputs(){const N=_t.bind(void 0,En.name);this.dragStart.observed&&N("dragStart","featureDragStart"),this.dragEnd.observed&&N("dragEnd","featureDragEnd"),this.drag.observed&&N("drag","featureDrag")}static#e=this.\u0275fac=function(ce){return new(ce||En)(t.Y36(Zn),t.Y36(t.R0b),t.Y36(Qn,9))};static#t=this.\u0275dir=t.lG2({type:En,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"}})}class gn{constructor(N,ce){this.mapService=N,this.zone=ce,this.imageError=new t.vpe,this.imageLoaded=new t.vpe,this.error=new t.vpe,this.loaded=new t.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.mapService.mapLoaded$.pipe((0,je.w)(()=>(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,ze.O)(void 0),(0,De.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(N){(N.data&&!N.data.isFirstChange()||N.options&&!N.options.isFirstChange()||N.url&&!N.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var N=this;return V(function*(){if(N.isAdding=!0,N.data)N.mapService.addImage(N.id,N.data,N.options),N.isAdded=!0,N.isAdding=!1;else if(N.url)try{yield N.mapService.loadAndAddImage(N.id,N.url,N.options),N.isAdded=!0,N.isAdding=!1,N.zone.run(()=>{N.imageLoaded.emit(),N.loaded.emit()})}catch(ce){N.zone.run(()=>{N.imageError.emit(ce),N.error.emit(ce)})}})()}warnDeprecatedOutputs(){const N=_t.bind(void 0,gn.name);this.error.observed&&N("error","imageError"),this.loaded.observed&&N("loaded","imageLoaded")}static#e=this.\u0275fac=function(ce){return new(ce||gn)(t.Y36(Zn),t.Y36(t.R0b))};static#t=this.\u0275cmp=t.Xpm({type:gn,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded",error:"error",loaded:"loaded"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2})}class Cn{get mapInstance(){return this.mapService.mapInstance}constructor(N){this.mapService=N,this.movingMethod="flyTo",this.mapResize=new t.vpe,this.mapRemove=new t.vpe,this.mapMouseDown=new t.vpe,this.mapMouseUp=new t.vpe,this.mapMouseMove=new t.vpe,this.mapClick=new t.vpe,this.mapDblClick=new t.vpe,this.mapMouseOver=new t.vpe,this.mapMouseOut=new t.vpe,this.mapContextMenu=new t.vpe,this.mapTouchStart=new t.vpe,this.mapTouchEnd=new t.vpe,this.mapTouchMove=new t.vpe,this.mapTouchCancel=new t.vpe,this.mapWheel=new t.vpe,this.moveStart=new t.vpe,this.move=new t.vpe,this.moveEnd=new t.vpe,this.mapDragStart=new t.vpe,this.mapDrag=new t.vpe,this.mapDragEnd=new t.vpe,this.zoomStart=new t.vpe,this.zoomEvt=new t.vpe,this.zoomEnd=new t.vpe,this.rotateStart=new t.vpe,this.rotate=new t.vpe,this.rotateEnd=new t.vpe,this.pitchStart=new t.vpe,this.pitchEvt=new t.vpe,this.pitchEnd=new t.vpe,this.boxZoomStart=new t.vpe,this.boxZoomEnd=new t.vpe,this.boxZoomCancel=new t.vpe,this.webGlContextLost=new t.vpe,this.webGlContextRestored=new t.vpe,this.mapLoad=new t.vpe,this.mapCreate=new t.vpe,this.idle=new t.vpe,this.render=new t.vpe,this.mapError=new t.vpe,this.data=new t.vpe,this.styleData=new t.vpe,this.sourceData=new t.vpe,this.dataLoading=new t.vpe,this.styleDataLoading=new t.vpe,this.sourceDataLoading=new t.vpe,this.styleImageMissing=new t.vpe,this.resize=new t.vpe,this.remove=new t.vpe,this.mouseDown=new t.vpe,this.mouseUp=new t.vpe,this.mouseMove=new t.vpe,this.click=new t.vpe,this.dblClick=new t.vpe,this.mouseOver=new t.vpe,this.mouseOut=new t.vpe,this.contextMenu=new t.vpe,this.touchStart=new t.vpe,this.touchEnd=new t.vpe,this.touchMove=new t.vpe,this.touchCancel=new t.vpe,this.wheel=new t.vpe,this.dragStart=new t.vpe,this.drag=new t.vpe,this.dragEnd=new t.vpe,this.load=new t.vpe,this.error=new t.vpe}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.mapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures,projection:this.projection},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(N){var ce=this;return V(function*(){yield function Pe(Ei,N){const ce="object"==typeof N;return new Promise((ht,It)=>{let xt,Jt=!1;Ei.subscribe({next:Gt=>{xt=Gt,Jt=!0},error:It,complete:()=>{Jt?ht(xt):ce?ht(N.defaultValue):It(new de.K)}})})}(ce.mapService.mapCreated$),N.cursorStyle&&!N.cursorStyle.isFirstChange()&&ce.mapService.changeCanvasCursor(N.cursorStyle.currentValue),N.projection&&!N.projection.isFirstChange()&&ce.mapService.updateProjection(N.projection.currentValue),N.minZoom&&!N.minZoom.isFirstChange()&&ce.mapService.updateMinZoom(N.minZoom.currentValue),N.maxZoom&&!N.maxZoom.isFirstChange()&&ce.mapService.updateMaxZoom(N.maxZoom.currentValue),N.minPitch&&!N.minPitch.isFirstChange()&&ce.mapService.updateMinPitch(N.minPitch.currentValue),N.maxPitch&&!N.maxPitch.isFirstChange()&&ce.mapService.updateMaxPitch(N.maxPitch.currentValue),N.renderWorldCopies&&!N.renderWorldCopies.isFirstChange()&&ce.mapService.updateRenderWorldCopies(N.renderWorldCopies.currentValue),N.scrollZoom&&!N.scrollZoom.isFirstChange()&&ce.mapService.updateScrollZoom(N.scrollZoom.currentValue),N.dragRotate&&!N.dragRotate.isFirstChange()&&ce.mapService.updateDragRotate(N.dragRotate.currentValue),N.touchPitch&&!N.touchPitch.isFirstChange()&&ce.mapService.updateTouchPitch(N.touchPitch.currentValue),N.touchZoomRotate&&!N.touchZoomRotate.isFirstChange()&&ce.mapService.updateTouchZoomRotate(N.touchZoomRotate.currentValue),N.doubleClickZoom&&!N.doubleClickZoom.isFirstChange()&&ce.mapService.updateDoubleClickZoom(N.doubleClickZoom.currentValue),N.keyboard&&!N.keyboard.isFirstChange()&&ce.mapService.updateKeyboard(N.keyboard.currentValue),N.dragPan&&!N.dragPan.isFirstChange()&&ce.mapService.updateDragPan(N.dragPan.currentValue),N.boxZoom&&!N.boxZoom.isFirstChange()&&ce.mapService.updateBoxZoom(N.boxZoom.currentValue),N.style&&!N.style.isFirstChange()&&ce.mapService.updateStyle(N.style.currentValue),N.maxBounds&&!N.maxBounds.isFirstChange()&&ce.mapService.updateMaxBounds(N.maxBounds.currentValue),N.fitBounds&&N.fitBounds.currentValue&&!N.fitBounds.isFirstChange()&&ce.mapService.fitBounds(N.fitBounds.currentValue,ce.fitBoundsOptions),N.fitScreenCoordinates&&N.fitScreenCoordinates.currentValue&&((ce.center||ce.zoom||ce.pitch||ce.fitBounds)&&N.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),ce.mapService.fitScreenCoordinates(N.fitScreenCoordinates.currentValue,ce.bearing?ce.bearing[0]:0,ce.movingOptions)),!ce.centerWithPanTo||!N.center||N.center.isFirstChange()||N.zoom||N.bearing||N.pitch?(N.center&&!N.center.isFirstChange()||N.zoom&&!N.zoom.isFirstChange()||N.bearing&&!N.bearing.isFirstChange()&&!N.fitScreenCoordinates||N.pitch&&!N.pitch.isFirstChange())&&ce.mapService.move(ce.movingMethod,ce.movingOptions,N.zoom&&ce.zoom?ce.zoom[0]:void 0,N.center?ce.center:void 0,N.bearing&&ce.bearing?ce.bearing[0]:void 0,N.pitch&&ce.pitch?ce.pitch[0]:void 0):ce.mapService.panTo(ce.center,ce.panToOptions)})()}warnDeprecatedOutputs(){const N=_t.bind(void 0,Cn.name);this.resize.observed&&N("resize","mapResize"),this.remove.observed&&N("remove","mapRemove"),this.mouseDown.observed&&N("mouseDown","mapMouseDown"),this.mouseUp.observed&&N("mouseUp","mapMouseUp"),this.mouseMove.observed&&N("mouseMove","mapMouseMove"),this.click.observed&&N("click","mapClick"),this.dblClick.observed&&N("dblClick","mapDblClick"),this.mouseOver.observed&&N("mouseOver","mapMouseOver"),this.mouseOut.observed&&N("mouseOut","mapMouseOut"),this.contextMenu.observed&&N("contextMenu","mapContextMenu"),this.touchStart.observed&&N("touchStart","mapTouchStart"),this.touchEnd.observed&&N("touchEnd","mapTouchEnd"),this.touchMove.observed&&N("touchMove","mapTouchMove"),this.touchCancel.observed&&N("touchCancel","mapTouchCancel"),this.wheel.observed&&N("wheel","mapWheel"),this.dragStart.observed&&N("dragStart","mapDragStart"),this.drag.observed&&N("drag","mapDrag"),this.dragEnd.observed&&N("dragEnd","mapDragEnd"),this.load.observed&&N("load","mapLoad"),this.error.observed&&N("error","mapError")}static#e=this.\u0275fac=function(ce){return new(ce||Cn)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Cn,selectors:[["mgl-map"]],viewQuery:function(ce,ht){if(1&ce&&t.Gf(it,7),2&ce){let It;t.iGM(It=t.CRH())&&(ht.mapContainer=It.first)}},inputs:{accessToken:"accessToken",collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",projection:"projection",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",mapCreate:"mapCreate",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[t._Bn([Zn]),t.TTD],decls:2,vars:0,consts:[["container",""]],template:function(ce,ht){1&ce&&t._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}class Kn{constructor(N){this.mapService=N,this.markerDragStart=new t.vpe,this.markerDragEnd=new t.vpe,this.markerDrag=new t.vpe,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.drag=new t.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(N){N.lngLat&&!N.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),N.feature&&!N.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),N.draggable&&!N.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),N.popupShown&&!N.popupShown.isFirstChange()&&(N.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),N.pitchAlignment&&!N.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(N.pitchAlignment.currentValue),N.rotationAlignment&&!N.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(N.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd,dragStart:this.markerDragStart,drag:this.markerDrag,dragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(N){this.markerInstance.setLngLat(N)}warnDeprecatedOutputs(){const N=_t.bind(void 0,Kn.name);this.markerDragStart.observed&&N("dragStart","markerDragStart"),this.markerDragEnd.observed&&N("dragEnd","markerDragEnd"),this.markerDrag.observed&&N("drag","markerDrag")}static#e=this.\u0275fac=function(ce){return new(ce||Kn)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Kn,selectors:[["mgl-marker"]],viewQuery:function(ce,ht){if(1&ce&&t.Gf(Ne,7),2&ce){let It;t.iGM(It=t.CRH())&&(ht.content=It.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag",dragStart:"dragStart",dragEnd:"dragEnd",drag:"drag"},features:[t.TTD],ngContentSelectors:Be,decls:3,vars:2,consts:[["content",""]],template:function(ce,ht){1&ce&&(t.F$t(),t.TgZ(0,"div",null,0),t.Hsn(2),t.qZA()),2&ce&&t.Tol(ht.className)},encapsulation:2,changeDetection:0})}class Hn{static#e=this.\u0275fac=function(ce){return new(ce||Hn)};static#t=this.\u0275dir=t.lG2({type:Hn,selectors:[["ng-template","mglPoint",""]]})}class Zt{static#e=this.\u0275fac=function(ce){return new(ce||Zt)};static#t=this.\u0275dir=t.lG2({type:Zt,selectors:[["ng-template","mglClusterPoint",""]]})}let nn=0;class zt{constructor(N,ce,ht){this.mapService=N,this.ChangeDetectorRef=ce,this.zone=ht,this.layerId="mgl-markers-for-clusters-"+nn++,this.sub=new U.w0}ngAfterContentInit(){const ce=this.mapService.mapCreated$.pipe((0,je.w)(()=>(0,we.R)(this.mapService.mapInstance,"data").pipe((0,De.h)(ht=>ht.sourceId===this.source&&"metadata"!==ht.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,je.w)(()=>(0,Se.T)((0,we.R)(this.mapService.mapInstance,"move"),(0,we.R)(this.mapService.mapInstance,"moveend")).pipe((0,ze.O)(void 0)))).subscribe(()=>{this.zone.run(()=>{this.updateCluster()})});this.sub.add(ce)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(N,ce){return ce.id}updateCluster(){const N={layers:[this.layerId]};this.pointTpl||(N.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(N),this.ChangeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(ce){return new(ce||zt)(t.Y36(Zn),t.Y36(t.sBO),t.Y36(t.R0b))};static#t=this.\u0275cmp=t.Xpm({type:zt,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(ce,ht,It){if(1&ce&&(t.Suo(It,Hn,5,t.Rgc),t.Suo(It,Zt,5,t.Rgc)),2&ce){let Jt;t.iGM(Jt=t.CRH())&&(ht.pointTpl=Jt.first),t.iGM(Jt=t.CRH())&&(ht.clusterPointTpl=Jt.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(ce,ht){1&ce&&(t._UZ(0,"mgl-layer",0),t.YNc(1,jn,3,2,"ng-container",1)),2&ce&&(t.Q6J("id",ht.layerId)("source",ht.source)("paint",t.DdM(5,yn)),t.xp6(1),t.Q6J("ngForOf",ht.clusterPoints)("ngForTrackBy",ht.trackByClusterPoint))},dependencies:[Fe.sg,Fe.O5,Fe.tP,Ot,Kn],encapsulation:2,changeDetection:0})}class Xt{constructor(N){this.mapService=N,this.popupClose=new t.vpe,this.popupOpen=new t.vpe,this.close=new t.vpe,this.open=new t.vpe}ngOnInit(){if(this.warnDeprecatedOutputs(),this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(N){if(N.lngLat&&!N.lngLat.isFirstChange()||N.feature&&!N.feature.isFirstChange()){const ce=N.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const ht=this.createPopup();this.mapService.addPopupToMap(ht,ce,this.popupInstance.isOpen()),this.popupInstance=ht}if(N.marker&&!N.marker.isFirstChange()){const ce=N.marker.previousValue;ce.markerInstance&&this.mapService.removePopupFromMarker(ce.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}N.offset&&!N.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{open:this.open,close:this.close,popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(N){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(N,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,N)}})}warnDeprecatedOutputs(){const N=_t.bind(void 0,Xt.name);this.close.observed&&N("close","popupClose"),this.open.observed&&N("open","popupOpen")}static#e=this.\u0275fac=function(ce){return new(ce||Xt)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Xt,selectors:[["mgl-popup"]],viewQuery:function(ce,ht){if(1&ce&&t.Gf(Ne,7),2&ce){let It;t.iGM(It=t.CRH())&&(ht.content=It.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen",close:"close",open:"open"},features:[t.TTD],ngContentSelectors:Be,decls:3,vars:0,consts:[["content",""]],template:function(ce,ht){1&ce&&(t.F$t(),t.TgZ(0,"div",null,0),t.Hsn(2),t.qZA())},encapsulation:2,changeDetection:0})}class Ht{constructor(N){this.mapService=N,this.sourceAdded=!1,this.sub=new U.w0}ngOnInit(){const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){if(this.sourceAdded)if(N.canvas&&!N.canvas.isFirstChange()||N.animate&&!N.animate.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(N.coordinates&&!N.coordinates.isFirstChange()){const ce=this.mapService.getSource(this.id);if(void 0===ce)return;ce.setCoordinates(this.coordinates)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:"canvas",coordinates:this.coordinates,canvas:this.canvas,animate:this.animate}),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||Ht)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Ht,selectors:[["mgl-canvas-source"]],inputs:{id:"id",coordinates:"coordinates",canvas:"canvas",animate:"animate"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class ui{constructor(N){this.mapService=N}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(N){if(void 0===this.sourceId)return;const ce=this.mapService.getSource(this.sourceId);void 0!==ce&&ce.updateImage({url:void 0===N.url?void 0:this.url,coordinates:void 0===N.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}static#e=this.\u0275fac=function(ce){return new(ce||ui)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:ui,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class Zi{constructor(N){this.mapService=N,this.type="raster-dem",this.sourceAdded=!1,this.sub=new U.w0}ngOnInit(){const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){this.sourceAdded&&(N.url&&!N.url.isFirstChange()||N.tiles&&!N.tiles.isFirstChange()||N.bounds&&!N.bounds.isFirstChange()||N.minzoom&&!N.minzoom.isFirstChange()||N.maxzoom&&!N.maxzoom.isFirstChange()||N.tileSize&&!N.tileSize.isFirstChange()||N.attribution&&!N.attribution.isFirstChange()||N.encoding&&!N.encoding.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,attribution:this.attribution,encoding:this.encoding}),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||Zi)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Zi,selectors:[["mgl-raster-dem-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",attribution:"attribution",encoding:"encoding"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class qi{constructor(N){this.mapService=N,this.type="raster",this.sourceAdded=!1,this.sub=new U.w0}ngOnInit(){const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){this.sourceAdded&&(N.url&&!N.url.isFirstChange()||N.tiles&&!N.tiles.isFirstChange()||N.bounds&&!N.bounds.isFirstChange()||N.minzoom&&!N.minzoom.isFirstChange()||N.maxzoom&&!N.maxzoom.isFirstChange()||N.tileSize&&!N.tileSize.isFirstChange()||N.scheme&&!N.scheme.isFirstChange()||N.attribution&&!N.attribution.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,minzoom:this.minzoom,maxzoom:this.maxzoom,tileSize:this.tileSize,scheme:this.scheme,attribution:this.attribution}),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||qi)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:qi,selectors:[["mgl-raster-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",minzoom:"minzoom",maxzoom:"maxzoom",tileSize:"tileSize",scheme:"scheme",attribution:"attribution"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class Er{constructor(N){this.mapService=N,this.type="vector",this.sourceAdded=!1,this.sub=new U.w0}ngOnInit(){const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){if(this.sourceAdded)if(N.bounds&&!N.bounds.isFirstChange()||N.scheme&&!N.scheme.isFirstChange()||N.minzoom&&!N.minzoom.isFirstChange()||N.maxzoom&&!N.maxzoom.isFirstChange()||N.attribution&&!N.attribution.isFirstChange()||N.promoteId&&!N.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(N.url&&!N.url.isFirstChange()||N.tiles&&!N.tiles.isFirstChange()){const ce=this.mapService.getSource(this.id);if(void 0===ce)return;N.url&&this.url&&ce.setUrl(this.url),N.tiles&&this.tiles&&ce.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||Er)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Er,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class Or{constructor(N){this.mapService=N,this.sourceAdded=!1,this.sub=new U.w0}ngOnInit(){const N=this.mapService.mapLoaded$.subscribe(()=>{this.init();const ce=(0,we.R)(this.mapService.mapInstance,"styledata").pipe((0,De.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(ce)});this.sub.add(N)}ngOnChanges(N){if(this.sourceAdded)if(N.urls&&!N.urls.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(N.coordinates&&!N.coordinates.isFirstChange()){const ce=this.mapService.getSource(this.id);if(void 0===ce)return;ce.setCoordinates(this.coordinates)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:"video",urls:this.urls,coordinates:this.coordinates}),this.sourceAdded=!0}static#e=this.\u0275fac=function(ce){return new(ce||Or)(t.Y36(Zn))};static#t=this.\u0275cmp=t.Xpm({type:Or,selectors:[["mgl-video-source"]],inputs:{id:"id",urls:"urls",coordinates:"coordinates"},features:[t.TTD],decls:0,vars:0,template:function(ce,ht){},encapsulation:2,changeDetection:0})}class In{static withConfig(N){return{ngModule:In,providers:[{provide:Yr,useValue:N.accessToken}]}}static#e=this.\u0275fac=function(ce){return new(ce||In)};static#t=this.\u0275mod=t.oAB({type:In});static#n=this.\u0275inj=t.cJS({imports:[Fe.ez]})}},7582:(At,Le,k)=>{"use strict";function Ye(bt,at,Pt,Vt){return new(Pt||(Pt=Promise))(function(_t,Ot){function un(gn){try{En(Vt.next(gn))}catch(Cn){Ot(Cn)}}function Qn(gn){try{En(Vt.throw(gn))}catch(Cn){Ot(Cn)}}function En(gn){gn.done?_t(gn.value):function qt(_t){return _t instanceof Pt?_t:new Pt(function(Ot){Ot(_t)})}(gn.value).then(un,Qn)}En((Vt=Vt.apply(bt,at||[])).next())})}function Fe(bt){return this instanceof Fe?(this.v=bt,this):new Fe(bt)}function Ne(bt,at,Pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qt,Vt=Pt.apply(bt,at||[]),_t=[];return qt={},Ot("next"),Ot("throw"),Ot("return"),qt[Symbol.asyncIterator]=function(){return this},qt;function Ot(Kn){Vt[Kn]&&(qt[Kn]=function(Hn){return new Promise(function(Zt,nn){_t.push([Kn,Hn,Zt,nn])>1||un(Kn,Hn)})})}function un(Kn,Hn){try{!function Qn(Kn){Kn.value instanceof Fe?Promise.resolve(Kn.value.v).then(En,gn):Cn(_t[0][2],Kn)}(Vt[Kn](Hn))}catch(Zt){Cn(_t[0][3],Zt)}}function En(Kn){un("next",Kn)}function gn(Kn){un("throw",Kn)}function Cn(Kn,Hn){Kn(Hn),_t.shift(),_t.length&&un(_t[0][0],_t[0][1])}}function it(bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pt,at=bt[Symbol.asyncIterator];return at?at.call(bt):(bt=function ze(bt){var at="function"==typeof Symbol&&Symbol.iterator,Pt=at&&bt[at],Vt=0;if(Pt)return Pt.call(bt);if(bt&&"number"==typeof bt.length)return{next:function(){return bt&&Vt>=bt.length&&(bt=void 0),{value:bt&&bt[Vt++],done:!bt}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")}(bt),Pt={},Vt("next"),Vt("throw"),Vt("return"),Pt[Symbol.asyncIterator]=function(){return this},Pt);function Vt(_t){Pt[_t]=bt[_t]&&function(Ot){return new Promise(function(un,Qn){!function qt(_t,Ot,un,Qn){Promise.resolve(Qn).then(function(En){_t({value:En,done:un})},Ot)}(un,Qn,(Ot=bt[_t](Ot)).done,Ot.value)})}}}k.d(Le,{FC:()=>Ne,KL:()=>it,mG:()=>Ye,qq:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},At=>{At(At.s=1067)}]);